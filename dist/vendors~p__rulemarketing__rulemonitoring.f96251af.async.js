(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+K+b":function(br,Ot,Ee){var he=Ee("JHRd");function B(L){var o=new L.constructor(L.byteLength);return new he(o).set(new he(L)),o}br.exports=B},"+Qka":function(br,Ot,Ee){var he=Ee("fmRc"),B=Ee("t2Dn"),L=Ee("cq/+"),o=Ee("T1AV"),e=Ee("GoyQ"),g=Ee("mTTR"),v=Ee("itsj");function p(c,h,i,r,n){c!==h&&L(h,function(s,f){if(n||(n=new he),e(s))o(c,h,f,i,p,r,n);else{var u=r?r(v(c,f),s,f+"",c,h,n):void 0;u===void 0&&(u=s),B(c,f,u)}},g)}br.exports=p},"+VLl":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return x});var he=Ee("jrin"),B=Ee("tJVT"),L=Ee("rAM+"),o=Ee("Hel2"),e=Math.PI/3,g=[0,e,2*e,3*e,4*e,5*e];function v(M){return M[0]}function p(M){return M[1]}var c=function(){var M=0,P=0,C=1,O=1,w=v,S=p,I,j,N;function W(J){var Q={},ne=[],K,ie=J.length;for(K=0;K<ie;++K)if(!(isNaN(we=+w.call(null,de=J[K],K,J))||isNaN(Re=+S.call(null,de,K,J)))){var de,we,Re,_e=Math.round(Re=Re/N),Ue=Math.round(we=we/j-(_e&1)/2),rt=Re-_e;if(Math.abs(rt)*3>1){var Fe=we-Ue,Se=Ue+(we<Ue?-1:1)/2,ye=_e+(Re<_e?-1:1),Oe=we-Se,ue=Re-ye;Fe*Fe+rt*rt>Oe*Oe+ue*ue&&(Ue=Se+(_e&1?1:-1)/2,_e=ye)}var xe=Ue+"-"+_e,Ae=Q[xe];Ae?Ae.push(de):(ne.push(Ae=Q[xe]=[de]),Ae.x=(Ue+(_e&1)/2)*j,Ae.y=_e*N)}return ne}function H(J){var Q=0,ne=0;return g.map(function(K){var ie=Math.sin(K)*J,de=-Math.cos(K)*J,we=ie-Q,Re=de-ne;return Q=ie,ne=de,[we,Re]})}return W.hexagon=function(J){return"m"+H(J==null?I:+J).join("l")+"z"},W.centers=function(){for(var J=[],Q=Math.round(P/N),ne=Math.round(M/j),K=Q*N;K<O+I;K+=N,++Q)for(var ie=ne*j+(Q&1)*j/2;ie<C+j/2;ie+=j)J.push([ie,K]);return J},W.mesh=function(){var J=H(I).slice(0,4).join("l");return W.centers().map(function(Q){return"M"+Q+"m"+J}).join("")},W.x=function(J){return arguments.length?(w=J,W):w},W.y=function(J){return arguments.length?(S=J,W):S},W.radius=function(J){return arguments.length?(I=+J,j=I*2*Math.sin(e),N=I*1.5,W):I},W.size=function(J){return arguments.length?(M=P=0,C=+J[0],O=+J[1],W):[C-M,O-P]},W.extent=function(J){return arguments.length?(M=+J[0][0],P=+J[0][1],C=+J[1][0],O=+J[1][1],W):[[M,P],[C,O]]},W.radius(1)},h=Object.defineProperty,i=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,u=function(P,C,O){return C in P?h(P,C,{enumerable:!0,configurable:!0,writable:!0,value:O}):P[C]=O},d=function(P,C){for(var O in C||(C={}))s.call(C,O)&&u(P,O,C[O]);if(n){var w=Object(L.a)(n(C)),S;try{for(w.s();!(S=w.n()).done;){var O=S.value;f.call(C,O)&&u(P,O,C[O])}}catch(I){w.e(I)}finally{w.f()}}return P},b=function(P,C){return i(P,r(C))},_=6378e3;function x(M,P){var C=M.dataArray,O=P.size,w=O===void 0?10:O,S=P.method,I=S===void 0?"sum":S,j=w/(2*Math.PI*_)*(256<<20)/2,N=C.map(function(Q){var ne=Object(o.f)(Q.coordinates),K=Object(B.a)(ne,2),ie=K[0],de=K[1];return b(d({},Q),{coordinates:[ie,de]})}),W=c().radius(j).x(function(Q){return Q.coordinates[0]}).y(function(Q){return Q.coordinates[1]}),H=W(N),J={dataArray:H.map(function(Q,ne){var K;if(P.field&&I){var ie=o.c.getColumn(Q,P.field);Q[I]=o.c.statMap[I](ie)}return K={},Object(he.a)(K,P.method,Q[I]),Object(he.a)(K,"count",Q.length),Object(he.a)(K,"rawData",Q),Object(he.a)(K,"coordinates",[Q.x,Q.y]),Object(he.a)(K,"_id",ne),K}),radius:j,xOffset:j,yOffset:j,type:"hexagon"};return J}},"+iFO":function(br,Ot,Ee){var he=Ee("dTAl"),B=Ee("LcsW"),L=Ee("6sVZ");function o(e){return typeof e.constructor=="function"&&!L(e)?he(B(e)):{}}br.exports=o},"/XxM":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return d});var he=Ee("qLMh"),B=Ee("rAM+"),L=Ee("Hel2"),o=Ee("aEx7"),e=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,i=function(_,x,M){return x in _?e(_,x,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[x]=M},r=function(_,x){for(var M in x||(x={}))c.call(x,M)&&i(_,M,x[M]);if(p){var P=Object(B.a)(p(x)),C;try{for(P.s();!(C=P.n()).done;){var M=C.value;h.call(x,M)&&i(_,M,x[M])}}catch(O){P.e(O)}finally{P.f()}}return _},n=function(_,x){return g(_,v(x))},s=function(_,x,M){return new Promise(function(P,C){var O=function(j){try{S(M.next(j))}catch(N){C(N)}},w=function(j){try{S(M.throw(j))}catch(N){C(N)}},S=function(j){return j.done?P(j.value):Promise.resolve(j.value).then(O,w)};S((M=M.apply(_,x)).next())})},f={tileSize:256,minZoom:0,maxZoom:Infinity,zoomOffset:0,warp:!0},u=function(_,x,M,P,C){return s(void 0,null,Object(he.a)().mark(function O(){var w;return Object(he.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return w=Object(L.F)(_,x),I.abrupt("return",new Promise(function(j){if(C)C({x:M.x,y:M.y,z:M.z},function(W,H){if(W||!H)j(void 0);else{var J=new o.a(H,M.x,M.y,M.z);j(J)}});else{var N=Object(L.A)(n(r({},P),{url:w}),function(W,H){if(W||!H)j(void 0);else{var J=new o.a(H,M.x,M.y,M.z);j(J)}});M.xhrCancel=function(){return N.cancel()}}}));case 2:case"end":return I.stop()}},O)}))};function d(b,_){var x=Array.isArray(b)?b[0]:b,M=function(O,w){return u(x,O,w,_==null?void 0:_.requestParameters,_==null?void 0:_.getCustomData)},P=n(r(r({},f),_),{getTileData:M});return{data:x,dataArray:[],tilesetOptions:P,isTile:!0}}},"0Q2g":function(br,Ot,Ee){var he=Ee("W6/K");function B(L,o){return L&&L.length&&o&&o.length?he(L,o):L}br.exports=B},"0cpV":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return c}),Ee.d(Ot,"b",function(){return p}),Ee.d(Ot,"c",function(){return o}),Ee.d(Ot,"d",function(){return v});var he=Ee("Hel2"),B=Ee("Aib3"),L=Ee.n(B);function o(h,i){return h.map(function(r){return r[i]*1})}function e(h){return h===void 0?!1:!Array.isArray(h)&&h.data!==void 0}function g(h){return Array.isArray(h)?h.length===0?!1:!!e(h[0]):!1}function v(h){return Array.isArray(h)?h.length===0||typeof h[0]=="number":!1}function p(h){var i=Object.isFrozen(h)?he.N.cloneDeep(h):h;return L()(i,!0),i}function c(h,i){return h||[[i[0],i[3]],[i[2],i[3]],[i[2],i[1]],[i[0],i[1]]]}},"0wsv":function(br,Ot,Ee){"use strict";Ee.d(Ot,"b",function(){return e}),Ee.d(Ot,"h",function(){return v}),Ee.d(Ot,"i",function(){return c}),Ee.d(Ot,"f",function(){return i}),Ee.d(Ot,"c",function(){return n}),Ee.d(Ot,"g",function(){return u}),Ee.d(Ot,"k",function(){return _}),Ee.d(Ot,"j",function(){return C}),Ee.d(Ot,"a",function(){return O}),Ee.d(Ot,"d",function(){return I}),Ee.d(Ot,"e",function(){return j});var he=63710088e-1,B={centimeters:he*100,centimetres:he*100,degrees:he/111325,feet:he*3.28084,inches:he*39.37,kilometers:he/1e3,kilometres:he/1e3,meters:he,metres:he,miles:he/1609.344,millimeters:he*1e3,millimetres:he*1e3,nauticalmiles:he/1852,radians:1,yards:he*1.0936},L={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/he,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(H,J,Q){Q===void 0&&(Q={});var ne={type:"Feature"};return(Q.id===0||Q.id)&&(ne.id=Q.id),Q.bbox&&(ne.bbox=Q.bbox),ne.properties=J||{},ne.geometry=H,ne}function g(H,J,Q){switch(Q===void 0&&(Q={}),H){case"Point":return v(J).geometry;case"LineString":return i(J).geometry;case"Polygon":return c(J).geometry;case"MultiPoint":return f(J).geometry;case"MultiLineString":return s(J).geometry;case"MultiPolygon":return u(J).geometry;default:throw new Error(H+" is invalid")}}function v(H,J,Q){if(Q===void 0&&(Q={}),!H)throw new Error("coordinates is required");if(!Array.isArray(H))throw new Error("coordinates must be an Array");if(H.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I(H[0])||!I(H[1]))throw new Error("coordinates must contain numbers");var ne={type:"Point",coordinates:H};return e(ne,J,Q)}function p(H,J,Q){return Q===void 0&&(Q={}),n(H.map(function(ne){return v(ne,J)}),Q)}function c(H,J,Q){Q===void 0&&(Q={});for(var ne=0,K=H;ne<K.length;ne++){var ie=K[ne];if(ie.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var de=0;de<ie[ie.length-1].length;de++)if(ie[ie.length-1][de]!==ie[0][de])throw new Error("First and last Position are not equivalent.")}var we={type:"Polygon",coordinates:H};return e(we,J,Q)}function h(H,J,Q){return Q===void 0&&(Q={}),n(H.map(function(ne){return c(ne,J)}),Q)}function i(H,J,Q){if(Q===void 0&&(Q={}),H.length<2)throw new Error("coordinates must be an array of two or more positions");var ne={type:"LineString",coordinates:H};return e(ne,J,Q)}function r(H,J,Q){return Q===void 0&&(Q={}),n(H.map(function(ne){return i(ne,J)}),Q)}function n(H,J){J===void 0&&(J={});var Q={type:"FeatureCollection"};return J.id&&(Q.id=J.id),J.bbox&&(Q.bbox=J.bbox),Q.features=H,Q}function s(H,J,Q){Q===void 0&&(Q={});var ne={type:"MultiLineString",coordinates:H};return e(ne,J,Q)}function f(H,J,Q){Q===void 0&&(Q={});var ne={type:"MultiPoint",coordinates:H};return e(ne,J,Q)}function u(H,J,Q){Q===void 0&&(Q={});var ne={type:"MultiPolygon",coordinates:H};return e(ne,J,Q)}function d(H,J,Q){Q===void 0&&(Q={});var ne={type:"GeometryCollection",geometries:H};return e(ne,J,Q)}function b(H,J){if(J===void 0&&(J=0),J&&!(J>=0))throw new Error("precision must be a positive number");var Q=Math.pow(10,J||0);return Math.round(H*Q)/Q}function _(H,J){J===void 0&&(J="kilometers");var Q=B[J];if(!Q)throw new Error(J+" units is invalid");return H*Q}function x(H,J){J===void 0&&(J="kilometers");var Q=B[J];if(!Q)throw new Error(J+" units is invalid");return H/Q}function M(H,J){return C(x(H,J))}function P(H){var J=H%360;return J<0&&(J+=360),J}function C(H){var J=H%(2*Math.PI);return J*180/Math.PI}function O(H){var J=H%360;return J*Math.PI/180}function w(H,J,Q){if(J===void 0&&(J="kilometers"),Q===void 0&&(Q="kilometers"),!(H>=0))throw new Error("length must be a positive number");return _(x(H,J),Q)}function S(H,J,Q){if(J===void 0&&(J="meters"),Q===void 0&&(Q="kilometers"),!(H>=0))throw new Error("area must be a positive number");var ne=o[J];if(!ne)throw new Error("invalid original units");var K=o[Q];if(!K)throw new Error("invalid final units");return H/ne*K}function I(H){return!isNaN(H)&&H!==null&&!Array.isArray(H)}function j(H){return!!H&&H.constructor===Object}function N(H){if(!H)throw new Error("bbox is required");if(!Array.isArray(H))throw new Error("bbox must be an Array");if(H.length!==4&&H.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");H.forEach(function(J){if(!I(J))throw new Error("bbox must only contain numbers")})}function W(H){if(!H)throw new Error("id is required");if(["string","number"].indexOf(typeof H)===-1)throw new Error("id must be a number or a string")}},"1+5i":function(br,Ot,Ee){var he=Ee("w/wX"),B=Ee("sEf8"),L=Ee("mdPL"),o=L&&L.isSet,e=o?B(o):he;br.exports=e},"14J3":function(br,Ot,Ee){"use strict";var he=Ee("EFp3"),B=Ee.n(he),L=Ee("1GLa")},"1lnX":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return Ae});var he=Ee("rAM+"),B=Ee("h1nZ"),L=Ee("qLMh"),o=Ee("Hel2"),e=Ee("OoWq"),g=function(be,le,z){return new Promise(function(ae,V){var re=function(Me){try{q(z.next(Me))}catch(De){V(De)}},te=function(Me){try{q(z.throw(Me))}catch(De){V(De)}},q=function(Me){return Me.done?ae(Me.value):Promise.resolve(Me.value).then(re,te)};q((z=z.apply(be,le)).next())})},v=function(be,le,z,ae){return g(void 0,null,Object(L.a)().mark(function V(){return Object(L.a)().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.abrupt("return",new Promise(function(q,ve){le({x:be.x,y:be.y,z:be.z},function(Me,De){if(Me||De.length===0){ve(Me);return}De&&Object(e.b)([{data:De,bands:[0]}],z,ae,function(ze,We){ze?ve(ze):We&&q(We)})})}));case 1:case"end":return te.stop()}},V)}))},p=function(be,le){return g(void 0,null,Object(L.a)().mark(function z(){return Object(L.a)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.abrupt("return",new Promise(function(re,te){le({x:be.x,y:be.y,z:be.z},function(q,ve){if(q||!ve){te(q);return}ve instanceof ArrayBuffer?Object(o.t)(ve,function(Me,De){Me&&te(Me),re(De)}):ve instanceof HTMLImageElement?re(ve):te(q)})}));case 1:case"end":return V.stop()}},z)}))};function c(pe,be){return Array.isArray(pe)?typeof pe[0]=="string"?pe.map(function(le){return Object(o.F)(le,be)}):pe.map(function(le){return{url:Object(o.F)(le.url,be),bands:le.bands||[0]}}):Object(o.F)(pe,be)}function h(pe){return typeof pe=="string"?[{url:pe,bands:[0]}]:typeof pe[0]=="string"?pe.map(function(be){return{url:be,bands:[0]}}):pe}function i(pe,be){pe.xhrCancel=function(){be.map(function(le){le.abort()})}}var r=Object.defineProperty,n=Object.defineProperties,s=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,b=function(be,le,z){return le in be?r(be,le,{enumerable:!0,configurable:!0,writable:!0,value:z}):be[le]=z},_=function(be,le){for(var z in le||(le={}))u.call(le,z)&&b(be,z,le[z]);if(f){var ae=Object(he.a)(f(le)),V;try{for(ae.s();!(V=ae.n()).done;){var z=V.value;d.call(le,z)&&b(be,z,le[z])}}catch(re){ae.e(re)}finally{ae.f()}}return be},x=function(be,le){return n(be,s(le))},M=function(be,le,z){return new Promise(function(ae,V){var re=function(Me){try{q(z.next(Me))}catch(De){V(De)}},te=function(Me){try{q(z.throw(Me))}catch(De){V(De)}},q=function(Me){return Me.done?ae(Me.value):Promise.resolve(Me.value).then(re,te)};q((z=z.apply(be,le)).next())})},P=function(be,le,z,ae,V){return M(void 0,null,Object(L.a)().mark(function re(){var te,q,ve,Me,De,ze;return Object(L.a)().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(te=h(le.url),!(te.length>1)){He.next=15;break}return He.next=4,C(te,le);case 4:if(q=He.sent,ve=q.rasterFiles,Me=q.xhrList,De=q.errList,i(be,Me),!(De.length>0)){He.next=12;break}return z(De,null),He.abrupt("return");case 12:Object(e.b)(ve,ae,V,z),He.next=17;break;case 15:ze=Object(o.A)(le,function($e,It){if($e)z($e);else if(It){var Yt=[{data:It,bands:te[0].bands}];Object(e.b)(Yt,ae,V,z)}}),i(be,[ze]);case 17:case"end":return He.stop()}},re)}))};function C(pe,be){return M(this,null,Object(L.a)().mark(function le(){var z,ae,V,re,te,q,ve,Me,De,ze,We;return Object(L.a)().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:z=[],ae=[],V=[],re=0;case 4:if(!(re<pe.length)){$e.next=20;break}return te=pe[re],q=x(_({},be),{url:te.url}),ve=te.bands,$e.next=10,Object(o.O)(x(_({},q),{type:"arrayBuffer"}));case 10:Me=$e.sent,De=Me.err,ze=Me.data,We=Me.xhr,De&&V.push(De),ae.push(We),z.push({data:ze,bands:ve});case 17:re++,$e.next=4;break;case 20:return $e.abrupt("return",{rasterFiles:z,xhrList:ae,errList:V});case 21:case"end":return $e.stop()}},le)}))}var O=Object.defineProperty,w=Object.defineProperties,S=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,W=function(be,le,z){return le in be?O(be,le,{enumerable:!0,configurable:!0,writable:!0,value:z}):be[le]=z},H=function(be,le){for(var z in le||(le={}))j.call(le,z)&&W(be,z,le[z]);if(I){var ae=Object(he.a)(I(le)),V;try{for(ae.s();!(V=ae.n()).done;){var z=V.value;N.call(le,z)&&W(be,z,le[z])}}catch(re){ae.e(re)}finally{ae.f()}}return be},J=function(be,le){return w(be,S(le))},Q=function(be,le,z){return new Promise(function(ae,V){var re=function(Me){try{q(z.next(Me))}catch(De){V(De)}},te=function(Me){try{q(z.throw(Me))}catch(De){V(De)}},q=function(Me){return Me.done?ae(Me.value):Promise.resolve(Me.value).then(re,te)};q((z=z.apply(be,le)).next())})},ne=function(be,le,z,ae){return Q(void 0,null,Object(L.a)().mark(function V(){var re,te,q,ve,Me,De;return Object(L.a)().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return re=ae.format,te=re===void 0?ie:re,q=ae.operation,ve=ae.requestParameters,Me=ve===void 0?{}:ve,De=J(H({},Me),{url:c(be,le)}),We.abrupt("return",new Promise(function(He,$e){P(z,De,function(It,Yt){It?$e(It):Yt&&He(Yt)},te,q)}));case 3:case"end":return We.stop()}},V)}))},K=function(be,le,z,ae){return Q(void 0,null,Object(L.a)().mark(function V(){var re,te,q,ve;return Object(L.a)().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return te=Array.isArray(be)?be[0]:be,ae.wmtsOptions?(q=(ae==null?void 0:ae.getURLFromTemplate)||o.G,re=q(te,H(H({},le),ae.wmtsOptions))):(ve=(ae==null?void 0:ae.getURLFromTemplate)||o.F,re=ve(te,le)),De.abrupt("return",new Promise(function(ze,We){var He,$e=Object(o.E)(J(H({},ae==null?void 0:ae.requestParameters),{url:re,type:((He=ae==null?void 0:ae.requestParameters)==null?void 0:He.type)||"arrayBuffer"}),function(It,Yt){It?We(It):Yt&&ze(Yt)},ae.transformResponse);z.xhrCancel=function(){return $e.cancel()}}));case 3:case"end":return De.stop()}},V)}))},ie=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},de=Object.defineProperty,we=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,Fe=function(be,le,z){return le in be?de(be,le,{enumerable:!0,configurable:!0,writable:!0,value:z}):be[le]=z},Se=function(be,le){for(var z in le||(le={}))Ue.call(le,z)&&Fe(be,z,le[z]);if(_e){var ae=Object(he.a)(_e(le)),V;try{for(ae.s();!(V=ae.n()).done;){var z=V.value;rt.call(le,z)&&Fe(be,z,le[z])}}catch(re){ae.e(re)}finally{ae.f()}}return be},ye=function(be,le){return we(be,Re(le))},Oe={tileSize:256,minZoom:0,maxZoom:Infinity,zoomOffset:0,warp:!0},ue=[B.k.ARRAYBUFFER,B.k.RGB];function xe(pe){return!!(Array.isArray(pe)&&pe.length===0||!Array.isArray(pe)&&typeof pe!="string")}function Ae(pe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(xe(pe))throw new Error("tile server url is error");var le=(be==null?void 0:be.dataType)||B.k.IMAGE;le===B.k.RGB&&(le=B.k.ARRAYBUFFER);var z=function(re,te){switch(le){case B.k.IMAGE:return K(pe,re,te,be);case B.k.CUSTOMIMAGE:case B.k.CUSTOMTERRAINRGB:return p(te,be==null?void 0:be.getCustomData);case B.k.ARRAYBUFFER:return ne(pe,re,te,be);case B.k.CUSTOMARRAYBUFFER:case B.k.CUSTOMRGB:return v(te,be==null?void 0:be.getCustomData,(be==null?void 0:be.format)||ie,be==null?void 0:be.operation);default:return K(pe,re,te,be)}},ae=ye(Se(Se({},Oe),be),{getTileData:z});return{data:pe,dataArray:[],tilesetOptions:ae,isTile:!0}}},"1uty":function(br,Ot,Ee){"use strict";var he="_erd";function B(e){return e[he]={},L(e)}function L(e){return e[he]}function o(e){delete e[he]}br.exports={initState:B,getState:L,cleanState:o}},"2GsC":function(br,Ot){function Ee(he,B,L,o){for(var e=L-1,g=he.length;++e<g;)if(o(he[e],B))return e;return-1}br.exports=Ee},"2ajD":function(br,Ot){function Ee(he){return he!==he}br.exports=Ee},"3Aqx":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return B}),Ee.d(Ot,"b",function(){return o});var he=Ee("tJVT"),B={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:L}};function L(e,g){for(var v=e[0].rasterData,p=e[1].rasterData,c=e[2].rasterData,h=[],i=(g==null?void 0:g.countCut)||[2,98],r=Object(he.a)(i,2),n=r[0],s=r[1],f=(g==null?void 0:g.RMinMax)||o(v,n,s),u=(g==null?void 0:g.GMinMax)||o(p,n,s),d=(g==null?void 0:g.BMinMax)||o(c,n,s),b=0;b<v.length;b++)h.push(Math.max(0,v[b]-f[0])),h.push(Math.max(0,p[b]-u[0])),h.push(Math.max(0,c[b]-d[0]));return{rasterData:h,rMinMax:f,gMinMax:u,bMinMax:d}}function o(e,g,v){var p=e.slice().sort(function(r,n){return r-n}),c=p.length,h=p[Math.ceil(c*g/100)],i=p[Math.ceil(c*v/100)];return[h,i]}},"3D5h":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return ae});var he=Ee("qLMh"),B=Ee("rAM+");function L(V,re,te,q){for(var ve=q,Me=te-re>>1,De=te-re,ze,We=V[re],He=V[re+1],$e=V[te],It=V[te+1],Yt=re+3;Yt<te;Yt+=3){var rr=o(V[Yt],V[Yt+1],We,He,$e,It);if(rr>ve)ze=Yt,ve=rr;else if(rr===ve){var ir=Math.abs(Yt-Me);ir<De&&(ze=Yt,De=ir)}}ve>q&&(ze-re>3&&L(V,re,ze,q),V[ze+2]=ve,te-ze>3&&L(V,ze,te,q))}function o(V,re,te,q,ve,Me){var De=ve-te,ze=Me-q;if(De!==0||ze!==0){var We=((V-te)*De+(re-q)*ze)/(De*De+ze*ze);We>1?(te=ve,q=Me):We>0&&(te+=De*We,q+=ze*We)}return De=V-te,ze=re-q,De*De+ze*ze}function e(V,re,te,q){var ve={id:typeof V=="undefined"?null:V,type:re,geometry:te,tags:q,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};return g(ve),ve}function g(V){var re=V.geometry,te=V.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")v(V,re);else if(te==="Polygon"||te==="MultiLineString")for(var q=0;q<re.length;q++)v(V,re[q]);else if(te==="MultiPolygon")for(q=0;q<re.length;q++)for(var ve=0;ve<re[q].length;ve++)v(V,re[q][ve])}function v(V,re){for(var te=0;te<re.length;te+=3)V.minX=Math.min(V.minX,re[te]),V.minY=Math.min(V.minY,re[te+1]),V.maxX=Math.max(V.maxX,re[te]),V.maxY=Math.max(V.maxY,re[te+1])}function p(V,re){var te=[];if(V.type==="FeatureCollection")for(var q=0;q<V.features.length;q++)c(te,V.features[q],re,q);else V.type==="Feature"?c(te,V,re):c(te,{geometry:V},re);return te}function c(V,re,te,q){if(!!re.geometry){var ve=re.geometry.coordinates,Me=re.geometry.type,De=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),ze=[],We=re.id;if(te.promoteId?We=re.properties[te.promoteId]:te.generateId&&(We=q||0),Me==="Point")h(ve,ze);else if(Me==="MultiPoint")for(var He=0;He<ve.length;He++)h(ve[He],ze);else if(Me==="LineString")i(ve,ze,De,!1);else if(Me==="MultiLineString")if(te.lineMetrics){for(He=0;He<ve.length;He++)ze=[],i(ve[He],ze,De,!1),V.push(e(We,"LineString",ze,re.properties));return}else r(ve,ze,De,!1);else if(Me==="Polygon")r(ve,ze,De,!0);else if(Me==="MultiPolygon")for(He=0;He<ve.length;He++){var $e=[];r(ve[He],$e,De,!0),ze.push($e)}else if(Me==="GeometryCollection"){for(He=0;He<re.geometry.geometries.length;He++)c(V,{id:We,geometry:re.geometry.geometries[He],properties:re.properties},te,q);return}else throw new Error("Input data is not a valid GeoJSON object.");V.push(e(We,Me,ze,re.properties))}}function h(V,re){re.push(n(V[0])),re.push(s(V[1])),re.push(0)}function i(V,re,te,q){for(var ve,Me,De=0,ze=0;ze<V.length;ze++){var We=n(V[ze][0]),He=s(V[ze][1]);re.push(We),re.push(He),re.push(0),ze>0&&(q?De+=(ve*He-We*Me)/2:De+=Math.sqrt(Math.pow(We-ve,2)+Math.pow(He-Me,2))),ve=We,Me=He}var $e=re.length-3;re[2]=1,L(re,0,$e,te),re[$e+2]=1,re.size=Math.abs(De),re.start=0,re.end=re.size}function r(V,re,te,q){for(var ve=0;ve<V.length;ve++){var Me=[];i(V[ve],Me,te,q),re.push(Me)}}function n(V){return V/360+.5}function s(V){var re=Math.sin(V*Math.PI/180),te=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return te<0?0:te>1?1:te}function f(V,re,te,q,ve,Me,De,ze){if(te/=re,q/=re,Me>=te&&De<q)return V;if(De<te||Me>=q)return null;for(var We=[],He=0;He<V.length;He++){var $e=V[He],It=$e.geometry,Yt=$e.type,rr=ve===0?$e.minX:$e.minY,ir=ve===0?$e.maxX:$e.maxY;if(rr>=te&&ir<q){We.push($e);continue}else if(ir<te||rr>=q)continue;var Br=[];if(Yt==="Point"||Yt==="MultiPoint")u(It,Br,te,q,ve);else if(Yt==="LineString")d(It,Br,te,q,ve,!1,ze.lineMetrics);else if(Yt==="MultiLineString")_(It,Br,te,q,ve,!1);else if(Yt==="Polygon")_(It,Br,te,q,ve,!0);else if(Yt==="MultiPolygon")for(var tr=0;tr<It.length;tr++){var ft=[];_(It[tr],ft,te,q,ve,!0),ft.length&&Br.push(ft)}if(Br.length){if(ze.lineMetrics&&Yt==="LineString"){for(tr=0;tr<Br.length;tr++)We.push(e($e.id,Yt,Br[tr],$e.tags));continue}(Yt==="LineString"||Yt==="MultiLineString")&&(Br.length===1?(Yt="LineString",Br=Br[0]):Yt="MultiLineString"),(Yt==="Point"||Yt==="MultiPoint")&&(Yt=Br.length===3?"Point":"MultiPoint"),We.push(e($e.id,Yt,Br,$e.tags))}}return We.length?We:null}function u(V,re,te,q,ve){for(var Me=0;Me<V.length;Me+=3){var De=V[Me+ve];De>=te&&De<=q&&(re.push(V[Me]),re.push(V[Me+1]),re.push(V[Me+2]))}}function d(V,re,te,q,ve,Me,De){for(var ze=b(V),We=ve===0?M:P,He=V.start,$e,It,Yt=0;Yt<V.length-3;Yt+=3){var rr=V[Yt],ir=V[Yt+1],Br=V[Yt+2],tr=V[Yt+3],ft=V[Yt+4],st=ve===0?rr:ir,Tt=ve===0?tr:ft,Qe=!1;De&&($e=Math.sqrt(Math.pow(rr-tr,2)+Math.pow(ir-ft,2))),st<te?Tt>te&&(It=We(ze,rr,ir,tr,ft,te),De&&(ze.start=He+$e*It)):st>q?Tt<q&&(It=We(ze,rr,ir,tr,ft,q),De&&(ze.start=He+$e*It)):x(ze,rr,ir,Br),Tt<te&&st>=te&&(It=We(ze,rr,ir,tr,ft,te),Qe=!0),Tt>q&&st<=q&&(It=We(ze,rr,ir,tr,ft,q),Qe=!0),!Me&&Qe&&(De&&(ze.end=He+$e*It),re.push(ze),ze=b(V)),De&&(He+=$e)}var it=V.length-3;rr=V[it],ir=V[it+1],Br=V[it+2],st=ve===0?rr:ir,st>=te&&st<=q&&x(ze,rr,ir,Br),it=ze.length-3,Me&&it>=3&&(ze[it]!==ze[0]||ze[it+1]!==ze[1])&&x(ze,ze[0],ze[1],ze[2]),ze.length&&re.push(ze)}function b(V){var re=[];return re.size=V.size,re.start=V.start,re.end=V.end,re}function _(V,re,te,q,ve,Me){for(var De=0;De<V.length;De++)d(V[De],re,te,q,ve,Me,!1)}function x(V,re,te,q){V.push(re),V.push(te),V.push(q)}function M(V,re,te,q,ve,Me){var De=(Me-re)/(q-re);return V.push(Me),V.push(te+(ve-te)*De),V.push(1),De}function P(V,re,te,q,ve,Me){var De=(Me-te)/(ve-te);return V.push(re+(q-re)*De),V.push(Me),V.push(1),De}function C(V,re){var te=re.buffer/re.extent,q=V,ve=f(V,1,-1-te,te,0,-1,2,re),Me=f(V,1,1-te,2+te,0,-1,2,re);return(ve||Me)&&(q=f(V,1,-te,1+te,0,-1,2,re)||[],ve&&(q=O(ve,1).concat(q)),Me&&(q=q.concat(O(Me,-1)))),q}function O(V,re){for(var te=[],q=0;q<V.length;q++){var ve=V[q],Me=ve.type,De;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")De=w(ve.geometry,re);else if(Me==="MultiLineString"||Me==="Polygon"){De=[];for(var ze=0;ze<ve.geometry.length;ze++)De.push(w(ve.geometry[ze],re))}else if(Me==="MultiPolygon")for(De=[],ze=0;ze<ve.geometry.length;ze++){for(var We=[],He=0;He<ve.geometry[ze].length;He++)We.push(w(ve.geometry[ze][He],re));De.push(We)}te.push(e(ve.id,Me,De,ve.tags))}return te}function w(V,re){var te=[];te.size=V.size,V.start!==void 0&&(te.start=V.start,te.end=V.end);for(var q=0;q<V.length;q+=3)te.push(V[q]+re,V[q+1],V[q+2]);return te}function S(V,re){if(V.transformed)return V;var te=1<<V.z,q=V.x,ve=V.y,Me,De,ze;for(Me=0;Me<V.features.length;Me++){var We=V.features[Me],He=We.geometry,$e=We.type;if(We.geometry=[],$e===1)for(De=0;De<He.length;De+=2)We.geometry.push(I(He[De],He[De+1],re,te,q,ve));else for(De=0;De<He.length;De++){var It=[];for(ze=0;ze<He[De].length;ze+=2)It.push(I(He[De][ze],He[De][ze+1],re,te,q,ve));We.geometry.push(It)}}return V.transformed=!0,V}function I(V,re,te,q,ve,Me){return[Math.round(te*(V*q-ve)),Math.round(te*(re*q-Me))]}function j(V,re,te,q,ve){for(var Me=re===ve.maxZoom?0:ve.tolerance/((1<<re)*ve.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:q,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ze=0;ze<V.length;ze++){De.numFeatures++,N(De,V[ze],Me,ve);var We=V[ze].minX,He=V[ze].minY,$e=V[ze].maxX,It=V[ze].maxY;We<De.minX&&(De.minX=We),He<De.minY&&(De.minY=He),$e>De.maxX&&(De.maxX=$e),It>De.maxY&&(De.maxY=It)}return De}function N(V,re,te,q){var ve=re.geometry,Me=re.type,De=[];if(Me==="Point"||Me==="MultiPoint")for(var ze=0;ze<ve.length;ze+=3)De.push(ve[ze]),De.push(ve[ze+1]),V.numPoints++,V.numSimplified++;else if(Me==="LineString")W(De,ve,V,te,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(ze=0;ze<ve.length;ze++)W(De,ve[ze],V,te,Me==="Polygon",ze===0);else if(Me==="MultiPolygon")for(var We=0;We<ve.length;We++){var He=ve[We];for(ze=0;ze<He.length;ze++)W(De,He[ze],V,te,!0,ze===0)}if(De.length){var $e=re.tags||null;if(Me==="LineString"&&q.lineMetrics){$e={};for(var It in re.tags)$e[It]=re.tags[It];$e.mapbox_clip_start=ve.start/ve.size,$e.mapbox_clip_end=ve.end/ve.size}var Yt={geometry:De,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:$e};re.id!==null&&(Yt.id=re.id),V.features.push(Yt)}}function W(V,re,te,q,ve,Me){var De=q*q;if(q>0&&re.size<(ve?De:q)){te.numPoints+=re.length/3;return}for(var ze=[],We=0;We<re.length;We+=3)(q===0||re[We+2]>De)&&(te.numSimplified++,ze.push(re[We]),ze.push(re[We+1])),te.numPoints++;ve&&H(ze,Me),V.push(ze)}function H(V,re){for(var te=0,q=0,ve=V.length,Me=ve-2;q<ve;Me=q,q+=2)te+=(V[q]-V[Me])*(V[q+1]+V[Me+1]);if(te>0===re)for(q=0,ve=V.length;q<ve/2;q+=2){var De=V[q],ze=V[q+1];V[q]=V[ve-2-q],V[q+1]=V[ve-1-q],V[ve-2-q]=De,V[ve-1-q]=ze}}function J(V,re){return new Q(V,re)}function Q(V,re){re=this.options=K(Object.create(this.options),re);var te=re.debug;if(te&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var q=p(V,re);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),q=C(q,re),q.length&&this.splitTile(q,0,0,0),te&&(q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Q.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Q.prototype.splitTile=function(V,re,te,q,ve,Me,De){for(var ze=[V,re,te,q],We=this.options,He=We.debug;ze.length;){q=ze.pop(),te=ze.pop(),re=ze.pop(),V=ze.pop();var $e=1<<re,It=ne(re,te,q),Yt=this.tiles[It];if(!Yt&&(He>1&&console.time("creation"),Yt=this.tiles[It]=j(V,re,te,q,We),this.tileCoords.push({z:re,x:te,y:q}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,te,q,Yt.numFeatures,Yt.numPoints,Yt.numSimplified),console.timeEnd("creation"));var rr="z"+re;this.stats[rr]=(this.stats[rr]||0)+1,this.total++}if(Yt.source=V,ve){if(re===We.maxZoom||re===ve)continue;var ir=1<<ve-re;if(te!==Math.floor(Me/ir)||q!==Math.floor(De/ir))continue}else if(re===We.indexMaxZoom||Yt.numPoints<=We.indexMaxPoints)continue;if(Yt.source=null,V.length!==0){He>1&&console.time("clipping");var Br=.5*We.buffer/We.extent,tr=.5-Br,ft=.5+Br,st=1+Br,Tt,Qe,it,zt,Qt,Ar;Tt=Qe=it=zt=null,Qt=f(V,$e,te-Br,te+ft,0,Yt.minX,Yt.maxX,We),Ar=f(V,$e,te+tr,te+st,0,Yt.minX,Yt.maxX,We),V=null,Qt&&(Tt=f(Qt,$e,q-Br,q+ft,1,Yt.minY,Yt.maxY,We),Qe=f(Qt,$e,q+tr,q+st,1,Yt.minY,Yt.maxY,We),Qt=null),Ar&&(it=f(Ar,$e,q-Br,q+ft,1,Yt.minY,Yt.maxY,We),zt=f(Ar,$e,q+tr,q+st,1,Yt.minY,Yt.maxY,We),Ar=null),He>1&&console.timeEnd("clipping"),ze.push(Tt||[],re+1,te*2,q*2),ze.push(Qe||[],re+1,te*2,q*2+1),ze.push(it||[],re+1,te*2+1,q*2),ze.push(zt||[],re+1,te*2+1,q*2+1)}}},Q.prototype.getTile=function(V,re,te){var q=this.options,ve=q.extent,Me=q.debug;if(V<0||V>24)return null;var De=1<<V;re=(re%De+De)%De;var ze=ne(V,re,te);if(this.tiles[ze])return S(this.tiles[ze],ve);Me>1&&console.log("drilling down to z%d-%d-%d",V,re,te);for(var We=V,He=re,$e=te,It;!It&&We>0;)We--,He=Math.floor(He/2),$e=Math.floor($e/2),It=this.tiles[ne(We,He,$e)];return!It||!It.source?null:(Me>1&&console.log("found parent tile z%d-%d-%d",We,He,$e),Me>1&&console.time("drilling down"),this.splitTile(It.source,We,He,$e,V,re,te),Me>1&&console.timeEnd("drilling down"),this.tiles[ze]?S(this.tiles[ze],ve):null)};function ne(V,re,te){return((1<<V)*te+re)*32+V}function K(V,re){for(var te in re)V[te]=re[te];return V}var ie=Ee("p9j5"),de=Object.defineProperty,we=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,Fe=function(re,te,q){return te in re?de(re,te,{enumerable:!0,configurable:!0,writable:!0,value:q}):re[te]=q},Se=function(re,te){for(var q in te||(te={}))Ue.call(te,q)&&Fe(re,q,te[q]);if(_e){var ve=Object(B.a)(_e(te)),Me;try{for(ve.s();!(Me=ve.n()).done;){var q=Me.value;rt.call(te,q)&&Fe(re,q,te[q])}}catch(De){ve.e(De)}finally{ve.f()}}return re},ye=function(re,te){return we(re,Re(te))},Oe=function(re,te,q){return new Promise(function(ve,Me){var De=function($e){try{We(q.next($e))}catch(It){Me(It)}},ze=function($e){try{We(q.throw($e))}catch(It){Me(It)}},We=function($e){return $e.done?ve($e.value):Promise.resolve($e.value).then(De,ze)};We((q=q.apply(re,te)).next())})},ue={tileSize:256,minZoom:0,maxZoom:Infinity,zoomOffset:0};function xe(V){for(var re=0,te=0,q=V.length,ve=q-1,Me,De;te<q;ve=te++)Me=V[te],De=V[ve],re+=(De.x-Me.x)*(Me.y+De.y);return re}function Ae(V){var re=V.length;if(re<=1)return[V];for(var te=[],q,ve,Me=0;Me<re;Me++){var De=xe(V[Me]);De!==0&&(ve===void 0&&(ve=De<0),ve===De<0?(q&&te.push(q),q=[V[Me]]):q.push(V[Me]))}return q&&te.push(q),te}var pe=["Unknown","Point","LineString","Polygon"];function be(V,re,te,q,ve){var Me=ve.geometry,De=ve.type,ze=ve.tags,We=ve.id,He=V*Math.pow(2,q),$e=V*re,It=V*te,Yt=pe[De],rr,ir;function Br(st){for(var Tt=0;Tt<st.length;Tt++){var Qe=st[Tt];if(Qe[3])break;var it=180-(Qe[1]+It)*360/He,zt=(Qe[0]+$e)*360/He-180,Qt=360/Math.PI*Math.atan(Math.exp(it*Math.PI/180))-90;st[Tt]=[zt,Qt,0,1]}}switch(De){case 1:var tr=[];for(rr=0;rr<Me.length;rr++)tr[rr]=Me[rr][0];Me=tr,Br(Me);break;case 2:for(rr=0;rr<Me.length;rr++)Br(Me[rr]);break;case 3:for(Me=Ae(Me),rr=0;rr<Me.length;rr++)for(ir=0;ir<Me[rr].length;ir++)Br(Me[rr][ir]);break}Me.length===1?Me=Me[0]:Yt="Multi"+Yt;var ft={type:"Feature",geometry:{type:Yt,coordinates:Me},properties:ze,id:We,tileOrigin:[0,0],coord:""};return ft}var le=function(re,te,q,ve){return Oe(void 0,null,Object(he.a)().mark(function Me(){return Object(he.a)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",new Promise(function(We){var He=te.getTile(re.z,re.x,re.y),$e=He?He.features.map(function(rr){return be(ve,q.x,q.y,q.z,rr)}):[],It={layers:{defaultLayer:{features:$e}}},Yt=new ie.a(It,re.x,re.y,re.z);We(Yt)}));case 1:case"end":return ze.stop()}},Me)}))};function z(V){var re={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return V===void 0||typeof V.geojsonvtOptions=="undefined"?re:Se(Se({},re),V.geojsonvtOptions)}function ae(V,re){var te=z(re),q=te.extent||4096,ve=J(V,te),Me=function(We,He){return le(He,ve,We,q)},De=ye(Se(Se({},ue),re),{getTileData:Me});return{data:V,dataArray:[],tilesetOptions:De,isTile:!0}}},"3L5V":function(br,Ot,Ee){(function(he){var B=Ee("xbqb").default,L=Ee("Lw8S").default;(function(o,e){br.exports=e()})(this,function(){"use strict";/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
  See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function o(tr,ft){var st={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},Tt,Qe,it,zt;return zt={next:Qt(0),throw:Qt(1),return:Qt(2)},typeof Symbol=="function"&&(zt[Symbol.iterator]=function(){return this}),zt;function Qt(zr){return function(ct){return Ar([zr,ct])}}function Ar(zr){if(Tt)throw new TypeError("Generator is already executing.");for(;st;)try{if(Tt=1,Qe&&(it=zr[0]&2?Qe.return:zr[0]?Qe.throw||((it=Qe.return)&&it.call(Qe),0):Qe.next)&&!(it=it.call(Qe,zr[1])).done)return it;switch(Qe=0,it&&(zr=[zr[0]&2,it.value]),zr[0]){case 0:case 1:it=zr;break;case 4:return st.label++,{value:zr[1],done:!1};case 5:st.label++,Qe=zr[1],zr=[0];continue;case 7:zr=st.ops.pop(),st.trys.pop();continue;default:if(it=st.trys,!(it=it.length>0&&it[it.length-1])&&(zr[0]===6||zr[0]===2)){st=0;continue}if(zr[0]===3&&(!it||zr[1]>it[0]&&zr[1]<it[3])){st.label=zr[1];break}if(zr[0]===6&&st.label<it[1]){st.label=it[1],it=zr;break}if(it&&st.label<it[2]){st.label=it[2],st.ops.push(zr);break}it[2]&&st.ops.pop(),st.trys.pop();continue}zr=ft.call(tr,st)}catch(ct){zr=[6,ct],Qe=0}finally{Tt=it=0}if(zr[0]&5)throw zr[1];return{value:zr[0]?zr[1]:void 0,done:!0}}}var e=function(){function tr(ft,st){this.next=null,this.key=ft,this.data=st,this.left=null,this.right=null}return tr}();function g(tr,ft){return tr>ft?1:tr<ft?-1:0}function v(tr,ft,st){for(var Tt=new e(null,null),Qe=Tt,it=Tt;;){var zt=st(tr,ft.key);if(zt<0){if(ft.left===null)break;if(st(tr,ft.left.key)<0){var Qt=ft.left;if(ft.left=Qt.right,Qt.right=ft,ft=Qt,ft.left===null)break}it.left=ft,it=ft,ft=ft.left}else if(zt>0){if(ft.right===null)break;if(st(tr,ft.right.key)>0){var Qt=ft.right;if(ft.right=Qt.left,Qt.left=ft,ft=Qt,ft.right===null)break}Qe.right=ft,Qe=ft,ft=ft.right}else break}return Qe.right=ft.left,it.left=ft.right,ft.left=Tt.right,ft.right=Tt.left,ft}function p(tr,ft,st,Tt){var Qe=new e(tr,ft);if(st===null)return Qe.left=Qe.right=null,Qe;st=v(tr,st,Tt);var it=Tt(tr,st.key);return it<0?(Qe.left=st.left,Qe.right=st,st.left=null):it>=0&&(Qe.right=st.right,Qe.left=st,st.right=null),Qe}function c(tr,ft,st){var Tt=null,Qe=null;if(ft){ft=v(tr,ft,st);var it=st(ft.key,tr);it===0?(Tt=ft.left,Qe=ft.right):it<0?(Qe=ft.right,ft.right=null,Tt=ft):(Tt=ft.left,ft.left=null,Qe=ft)}return{left:Tt,right:Qe}}function h(tr,ft,st){return ft===null?tr:(tr===null||(ft=v(tr.key,ft,st),ft.left=tr),ft)}function i(tr,ft,st,Tt,Qe){if(tr){Tt(""+ft+(st?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Qe(tr)+`
`);var it=ft+(st?"    ":"\u2502   ");tr.left&&i(tr.left,it,!1,Tt,Qe),tr.right&&i(tr.right,it,!0,Tt,Qe)}}var r=function(){function tr(ft){ft===void 0&&(ft=g),this._root=null,this._size=0,this._comparator=ft}return tr.prototype.insert=function(ft,st){return this._size++,this._root=p(ft,st,this._root,this._comparator)},tr.prototype.add=function(ft,st){var Tt=new e(ft,st);this._root===null&&(Tt.left=Tt.right=null,this._size++,this._root=Tt);var Qe=this._comparator,it=v(ft,this._root,Qe),zt=Qe(ft,it.key);return zt===0?this._root=it:(zt<0?(Tt.left=it.left,Tt.right=it,it.left=null):zt>0&&(Tt.right=it.right,Tt.left=it,it.right=null),this._size++,this._root=Tt),this._root},tr.prototype.remove=function(ft){this._root=this._remove(ft,this._root,this._comparator)},tr.prototype._remove=function(ft,st,Tt){var Qe;if(st===null)return null;st=v(ft,st,Tt);var it=Tt(ft,st.key);return it===0?(st.left===null?Qe=st.right:(Qe=v(ft,st.left,Tt),Qe.right=st.right),this._size--,Qe):st},tr.prototype.pop=function(){var ft=this._root;if(ft){for(;ft.left;)ft=ft.left;return this._root=v(ft.key,this._root,this._comparator),this._root=this._remove(ft.key,this._root,this._comparator),{key:ft.key,data:ft.data}}return null},tr.prototype.findStatic=function(ft){for(var st=this._root,Tt=this._comparator;st;){var Qe=Tt(ft,st.key);if(Qe===0)return st;Qe<0?st=st.left:st=st.right}return null},tr.prototype.find=function(ft){return this._root&&(this._root=v(ft,this._root,this._comparator),this._comparator(ft,this._root.key)!==0)?null:this._root},tr.prototype.contains=function(ft){for(var st=this._root,Tt=this._comparator;st;){var Qe=Tt(ft,st.key);if(Qe===0)return!0;Qe<0?st=st.left:st=st.right}return!1},tr.prototype.forEach=function(ft,st){for(var Tt=this._root,Qe=[],it=!1;!it;)Tt!==null?(Qe.push(Tt),Tt=Tt.left):Qe.length!==0?(Tt=Qe.pop(),ft.call(st,Tt),Tt=Tt.right):it=!0;return this},tr.prototype.range=function(ft,st,Tt,Qe){for(var it=[],zt=this._comparator,Qt=this._root,Ar;it.length!==0||Qt;)if(Qt)it.push(Qt),Qt=Qt.left;else{if(Qt=it.pop(),Ar=zt(Qt.key,st),Ar>0)break;if(zt(Qt.key,ft)>=0&&Tt.call(Qe,Qt))return this;Qt=Qt.right}return this},tr.prototype.keys=function(){var ft=[];return this.forEach(function(st){var Tt=st.key;return ft.push(Tt)}),ft},tr.prototype.values=function(){var ft=[];return this.forEach(function(st){var Tt=st.data;return ft.push(Tt)}),ft},tr.prototype.min=function(){return this._root?this.minNode(this._root).key:null},tr.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},tr.prototype.minNode=function(ft){if(ft===void 0&&(ft=this._root),ft)for(;ft.left;)ft=ft.left;return ft},tr.prototype.maxNode=function(ft){if(ft===void 0&&(ft=this._root),ft)for(;ft.right;)ft=ft.right;return ft},tr.prototype.at=function(ft){for(var st=this._root,Tt=!1,Qe=0,it=[];!Tt;)if(st)it.push(st),st=st.left;else if(it.length>0){if(st=it.pop(),Qe===ft)return st;Qe++,st=st.right}else Tt=!0;return null},tr.prototype.next=function(ft){var st=this._root,Tt=null;if(ft.right){for(Tt=ft.right;Tt.left;)Tt=Tt.left;return Tt}for(var Qe=this._comparator;st;){var it=Qe(ft.key,st.key);if(it===0)break;it<0?(Tt=st,st=st.left):st=st.right}return Tt},tr.prototype.prev=function(ft){var st=this._root,Tt=null;if(ft.left!==null){for(Tt=ft.left;Tt.right;)Tt=Tt.right;return Tt}for(var Qe=this._comparator;st;){var it=Qe(ft.key,st.key);if(it===0)break;it<0?st=st.left:(Tt=st,st=st.right)}return Tt},tr.prototype.clear=function(){return this._root=null,this._size=0,this},tr.prototype.toList=function(){return f(this._root)},tr.prototype.load=function(ft,st,Tt){st===void 0&&(st=[]),Tt===void 0&&(Tt=!1);var Qe=ft.length,it=this._comparator;if(Tt&&b(ft,st,0,Qe-1,it),this._root===null)this._root=n(ft,st,0,Qe),this._size=Qe;else{var zt=d(this.toList(),s(ft,st),it);Qe=this._size+Qe,this._root=u({head:zt},0,Qe)}return this},tr.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(tr.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(tr.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),tr.prototype.toString=function(ft){ft===void 0&&(ft=function(Qe){return String(Qe.key)});var st=[];return i(this._root,"",!0,function(Tt){return st.push(Tt)},ft),st.join("")},tr.prototype.update=function(ft,st,Tt){var Qe=this._comparator,it=c(ft,this._root,Qe),zt=it.left,Qt=it.right;Qe(ft,st)<0?Qt=p(st,Tt,Qt,Qe):zt=p(st,Tt,zt,Qe),this._root=h(zt,Qt,Qe)},tr.prototype.split=function(ft){return c(ft,this._root,this._comparator)},tr.prototype[Symbol.iterator]=function(){var ft,st,Tt;return o(this,function(Qe){switch(Qe.label){case 0:ft=this._root,st=[],Tt=!1,Qe.label=1;case 1:return Tt?[3,6]:ft===null?[3,2]:(st.push(ft),ft=ft.left,[3,5]);case 2:return st.length===0?[3,4]:(ft=st.pop(),[4,ft]);case 3:return Qe.sent(),ft=ft.right,[3,5];case 4:Tt=!0,Qe.label=5;case 5:return[3,1];case 6:return[2]}})},tr}();function n(tr,ft,st,Tt){var Qe=Tt-st;if(Qe>0){var it=st+Math.floor(Qe/2),zt=tr[it],Qt=ft[it],Ar=new e(zt,Qt);return Ar.left=n(tr,ft,st,it),Ar.right=n(tr,ft,it+1,Tt),Ar}return null}function s(tr,ft){for(var st=new e(null,null),Tt=st,Qe=0;Qe<tr.length;Qe++)Tt=Tt.next=new e(tr[Qe],ft[Qe]);return Tt.next=null,st.next}function f(tr){for(var ft=tr,st=[],Tt=!1,Qe=new e(null,null),it=Qe;!Tt;)ft?(st.push(ft),ft=ft.left):st.length>0?(ft=it=it.next=st.pop(),ft=ft.right):Tt=!0;return it.next=null,Qe.next}function u(tr,ft,st){var Tt=st-ft;if(Tt>0){var Qe=ft+Math.floor(Tt/2),it=u(tr,ft,Qe),zt=tr.head;return zt.left=it,tr.head=tr.head.next,zt.right=u(tr,Qe+1,st),zt}return null}function d(tr,ft,st){for(var Tt=new e(null,null),Qe=Tt,it=tr,zt=ft;it!==null&&zt!==null;)st(it.key,zt.key)<0?(Qe.next=it,it=it.next):(Qe.next=zt,zt=zt.next),Qe=Qe.next;return it!==null?Qe.next=it:zt!==null&&(Qe.next=zt),Tt.next}function b(tr,ft,st,Tt,Qe){if(!(st>=Tt)){for(var it=tr[st+Tt>>1],zt=st-1,Qt=Tt+1;;){do zt++;while(Qe(tr[zt],it)<0);do Qt--;while(Qe(tr[Qt],it)>0);if(zt>=Qt)break;var Ar=tr[zt];tr[zt]=tr[Qt],tr[Qt]=Ar,Ar=ft[zt],ft[zt]=ft[Qt],ft[Qt]=Ar}b(tr,ft,st,Qt,Qe),b(tr,ft,Qt+1,Tt,Qe)}}var _=function(ft,st){return ft.ll.x<=st.x&&st.x<=ft.ur.x&&ft.ll.y<=st.y&&st.y<=ft.ur.y},x=function(ft,st){if(st.ur.x<ft.ll.x||ft.ur.x<st.ll.x||st.ur.y<ft.ll.y||ft.ur.y<st.ll.y)return null;var Tt=ft.ll.x<st.ll.x?st.ll.x:ft.ll.x,Qe=ft.ur.x<st.ur.x?ft.ur.x:st.ur.x,it=ft.ll.y<st.ll.y?st.ll.y:ft.ll.y,zt=ft.ur.y<st.ur.y?ft.ur.y:st.ur.y;return{ll:{x:Tt,y:it},ur:{x:Qe,y:zt}}},M=Number.EPSILON;M===void 0&&(M=Math.pow(2,-52));var P=M*M,C=function(ft,st){if(-M<ft&&ft<M&&-M<st&&st<M)return 0;var Tt=ft-st;return Tt*Tt<P*ft*st?0:ft<st?-1:1},O=function(){function tr(){B(this,tr),this.reset()}return L(tr,[{key:"reset",value:function(){this.xRounder=new w,this.yRounder=new w}},{key:"round",value:function(st,Tt){return{x:this.xRounder.round(st),y:this.yRounder.round(Tt)}}}]),tr}(),w=function(){function tr(){B(this,tr),this.tree=new r,this.round(0)}return L(tr,[{key:"round",value:function(st){var Tt=this.tree.add(st),Qe=this.tree.prev(Tt);if(Qe!==null&&C(Tt.key,Qe.key)===0)return this.tree.remove(st),Qe.key;var it=this.tree.next(Tt);return it!==null&&C(Tt.key,it.key)===0?(this.tree.remove(st),it.key):st}}]),tr}(),S=new O,I=11102230246251565e-32,j=134217729,N=(3+8*I)*I;function W(tr,ft,st,Tt,Qe){var it,zt,Qt,Ar,zr=ft[0],ct=Tt[0],ot=0,xt=0;ct>zr==ct>-zr?(it=zr,zr=ft[++ot]):(it=ct,ct=Tt[++xt]);var Bt=0;if(ot<tr&&xt<st)for(ct>zr==ct>-zr?(zt=zr+it,Qt=it-(zt-zr),zr=ft[++ot]):(zt=ct+it,Qt=it-(zt-ct),ct=Tt[++xt]),it=zt,Qt!==0&&(Qe[Bt++]=Qt);ot<tr&&xt<st;)ct>zr==ct>-zr?(zt=it+zr,Ar=zt-it,Qt=it-(zt-Ar)+(zr-Ar),zr=ft[++ot]):(zt=it+ct,Ar=zt-it,Qt=it-(zt-Ar)+(ct-Ar),ct=Tt[++xt]),it=zt,Qt!==0&&(Qe[Bt++]=Qt);for(;ot<tr;)zt=it+zr,Ar=zt-it,Qt=it-(zt-Ar)+(zr-Ar),zr=ft[++ot],it=zt,Qt!==0&&(Qe[Bt++]=Qt);for(;xt<st;)zt=it+ct,Ar=zt-it,Qt=it-(zt-Ar)+(ct-Ar),ct=Tt[++xt],it=zt,Qt!==0&&(Qe[Bt++]=Qt);return(it!==0||Bt===0)&&(Qe[Bt++]=it),Bt}function H(tr,ft){for(var st=ft[0],Tt=1;Tt<tr;Tt++)st+=ft[Tt];return st}function J(tr){return new Float64Array(tr)}var Q=(3+16*I)*I,ne=(2+12*I)*I,K=(9+64*I)*I*I,ie=J(4),de=J(8),we=J(12),Re=J(16),_e=J(4);function Ue(tr,ft,st,Tt,Qe,it,zt){var Qt,Ar,zr,ct,ot,xt,Bt,Ke,lt,mt,qe,yt,qt,Er,Zr,Dr,Cr,mn,xn=tr-Qe,lr=st-Qe,An=ft-it,On=Tt-it;Er=xn*On,xt=j*xn,Bt=xt-(xt-xn),Ke=xn-Bt,xt=j*On,lt=xt-(xt-On),mt=On-lt,Zr=Ke*mt-(Er-Bt*lt-Ke*lt-Bt*mt),Dr=An*lr,xt=j*An,Bt=xt-(xt-An),Ke=An-Bt,xt=j*lr,lt=xt-(xt-lr),mt=lr-lt,Cr=Ke*mt-(Dr-Bt*lt-Ke*lt-Bt*mt),qe=Zr-Cr,ot=Zr-qe,ie[0]=Zr-(qe+ot)+(ot-Cr),yt=Er+qe,ot=yt-Er,qt=Er-(yt-ot)+(qe-ot),qe=qt-Dr,ot=qt-qe,ie[1]=qt-(qe+ot)+(ot-Dr),mn=yt+qe,ot=mn-yt,ie[2]=yt-(mn-ot)+(qe-ot),ie[3]=mn;var Mt=H(4,ie),er=ne*zt;if(Mt>=er||-Mt>=er||(ot=tr-xn,Qt=tr-(xn+ot)+(ot-Qe),ot=st-lr,zr=st-(lr+ot)+(ot-Qe),ot=ft-An,Ar=ft-(An+ot)+(ot-it),ot=Tt-On,ct=Tt-(On+ot)+(ot-it),Qt===0&&Ar===0&&zr===0&&ct===0)||(er=K*zt+N*Math.abs(Mt),Mt+=xn*ct+On*Qt-(An*zr+lr*Ar),Mt>=er||-Mt>=er))return Mt;Er=Qt*On,xt=j*Qt,Bt=xt-(xt-Qt),Ke=Qt-Bt,xt=j*On,lt=xt-(xt-On),mt=On-lt,Zr=Ke*mt-(Er-Bt*lt-Ke*lt-Bt*mt),Dr=Ar*lr,xt=j*Ar,Bt=xt-(xt-Ar),Ke=Ar-Bt,xt=j*lr,lt=xt-(xt-lr),mt=lr-lt,Cr=Ke*mt-(Dr-Bt*lt-Ke*lt-Bt*mt),qe=Zr-Cr,ot=Zr-qe,_e[0]=Zr-(qe+ot)+(ot-Cr),yt=Er+qe,ot=yt-Er,qt=Er-(yt-ot)+(qe-ot),qe=qt-Dr,ot=qt-qe,_e[1]=qt-(qe+ot)+(ot-Dr),mn=yt+qe,ot=mn-yt,_e[2]=yt-(mn-ot)+(qe-ot),_e[3]=mn;var $t=W(4,ie,4,_e,de);Er=xn*ct,xt=j*xn,Bt=xt-(xt-xn),Ke=xn-Bt,xt=j*ct,lt=xt-(xt-ct),mt=ct-lt,Zr=Ke*mt-(Er-Bt*lt-Ke*lt-Bt*mt),Dr=An*zr,xt=j*An,Bt=xt-(xt-An),Ke=An-Bt,xt=j*zr,lt=xt-(xt-zr),mt=zr-lt,Cr=Ke*mt-(Dr-Bt*lt-Ke*lt-Bt*mt),qe=Zr-Cr,ot=Zr-qe,_e[0]=Zr-(qe+ot)+(ot-Cr),yt=Er+qe,ot=yt-Er,qt=Er-(yt-ot)+(qe-ot),qe=qt-Dr,ot=qt-qe,_e[1]=qt-(qe+ot)+(ot-Dr),mn=yt+qe,ot=mn-yt,_e[2]=yt-(mn-ot)+(qe-ot),_e[3]=mn;var Tr=W($t,de,4,_e,we);Er=Qt*ct,xt=j*Qt,Bt=xt-(xt-Qt),Ke=Qt-Bt,xt=j*ct,lt=xt-(xt-ct),mt=ct-lt,Zr=Ke*mt-(Er-Bt*lt-Ke*lt-Bt*mt),Dr=Ar*zr,xt=j*Ar,Bt=xt-(xt-Ar),Ke=Ar-Bt,xt=j*zr,lt=xt-(xt-zr),mt=zr-lt,Cr=Ke*mt-(Dr-Bt*lt-Ke*lt-Bt*mt),qe=Zr-Cr,ot=Zr-qe,_e[0]=Zr-(qe+ot)+(ot-Cr),yt=Er+qe,ot=yt-Er,qt=Er-(yt-ot)+(qe-ot),qe=qt-Dr,ot=qt-qe,_e[1]=qt-(qe+ot)+(ot-Dr),mn=yt+qe,ot=mn-yt,_e[2]=yt-(mn-ot)+(qe-ot),_e[3]=mn;var Mr=W(Tr,we,4,_e,Re);return Re[Mr-1]}function rt(tr,ft,st,Tt,Qe,it){var zt=(ft-it)*(st-Qe),Qt=(tr-Qe)*(Tt-it),Ar=zt-Qt,zr=Math.abs(zt+Qt);return Math.abs(Ar)>=Q*zr?Ar:-Ue(tr,ft,st,Tt,Qe,it,zr)}var Fe=function(ft,st){return ft.x*st.y-ft.y*st.x},Se=function(ft,st){return ft.x*st.x+ft.y*st.y},ye=function(ft,st,Tt){var Qe=rt(ft.x,ft.y,st.x,st.y,Tt.x,Tt.y);return Qe>0?-1:Qe<0?1:0},Oe=function(ft){return Math.sqrt(Se(ft,ft))},ue=function(ft,st,Tt){var Qe={x:st.x-ft.x,y:st.y-ft.y},it={x:Tt.x-ft.x,y:Tt.y-ft.y};return Fe(it,Qe)/Oe(it)/Oe(Qe)},xe=function(ft,st,Tt){var Qe={x:st.x-ft.x,y:st.y-ft.y},it={x:Tt.x-ft.x,y:Tt.y-ft.y};return Se(it,Qe)/Oe(it)/Oe(Qe)},Ae=function(ft,st,Tt){return st.y===0?null:{x:ft.x+st.x/st.y*(Tt-ft.y),y:Tt}},pe=function(ft,st,Tt){return st.x===0?null:{x:Tt,y:ft.y+st.y/st.x*(Tt-ft.x)}},be=function(ft,st,Tt,Qe){if(st.x===0)return pe(Tt,Qe,ft.x);if(Qe.x===0)return pe(ft,st,Tt.x);if(st.y===0)return Ae(Tt,Qe,ft.y);if(Qe.y===0)return Ae(ft,st,Tt.y);var it=Fe(st,Qe);if(it==0)return null;var zt={x:Tt.x-ft.x,y:Tt.y-ft.y},Qt=Fe(zt,st)/it,Ar=Fe(zt,Qe)/it,zr=ft.x+Ar*st.x,ct=Tt.x+Qt*Qe.x,ot=ft.y+Ar*st.y,xt=Tt.y+Qt*Qe.y,Bt=(zr+ct)/2,Ke=(ot+xt)/2;return{x:Bt,y:Ke}},le=function(){function tr(ft,st){B(this,tr),ft.events===void 0?ft.events=[this]:ft.events.push(this),this.point=ft,this.isLeft=st}return L(tr,[{key:"link",value:function(st){if(st.point===this.point)throw new Error("Tried to link already linked events");for(var Tt=st.point.events,Qe=0,it=Tt.length;Qe<it;Qe++){var zt=Tt[Qe];this.point.events.push(zt),zt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var st=this.point.events.length,Tt=0;Tt<st;Tt++){var Qe=this.point.events[Tt];if(Qe.segment.consumedBy===void 0)for(var it=Tt+1;it<st;it++){var zt=this.point.events[it];zt.consumedBy===void 0&&Qe.otherSE.point.events===zt.otherSE.point.events&&Qe.segment.consume(zt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var st=[],Tt=0,Qe=this.point.events.length;Tt<Qe;Tt++){var it=this.point.events[Tt];it!==this&&!it.segment.ringOut&&it.segment.isInResult()&&st.push(it)}return st}},{key:"getLeftmostComparator",value:function(st){var Tt=this,Qe=new Map,it=function(Qt){var Ar=Qt.otherSE;Qe.set(Qt,{sine:ue(Tt.point,st.point,Ar.point),cosine:xe(Tt.point,st.point,Ar.point)})};return function(zt,Qt){Qe.has(zt)||it(zt),Qe.has(Qt)||it(Qt);var Ar=Qe.get(zt),zr=Ar.sine,ct=Ar.cosine,ot=Qe.get(Qt),xt=ot.sine,Bt=ot.cosine;return zr>=0&&xt>=0?ct<Bt?1:ct>Bt?-1:0:zr<0&&xt<0?ct<Bt?-1:ct>Bt?1:0:xt<zr?-1:xt>zr?1:0}}}],[{key:"compare",value:function(st,Tt){var Qe=tr.comparePoints(st.point,Tt.point);return Qe!==0?Qe:(st.point!==Tt.point&&st.link(Tt),st.isLeft!==Tt.isLeft?st.isLeft?1:-1:ae.compare(st.segment,Tt.segment))}},{key:"comparePoints",value:function(st,Tt){return st.x<Tt.x?-1:st.x>Tt.x?1:st.y<Tt.y?-1:st.y>Tt.y?1:0}}]),tr}(),z=0,ae=function(){function tr(ft,st,Tt,Qe){B(this,tr),this.id=++z,this.leftSE=ft,ft.segment=this,ft.otherSE=st,this.rightSE=st,st.segment=this,st.otherSE=ft,this.rings=Tt,this.windings=Qe}return L(tr,[{key:"replaceRightSE",value:function(st){this.rightSE=st,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var st=this.leftSE.point.y,Tt=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:st<Tt?st:Tt},ur:{x:this.rightSE.point.x,y:st>Tt?st:Tt}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(st){return st.x===this.leftSE.point.x&&st.y===this.leftSE.point.y||st.x===this.rightSE.point.x&&st.y===this.rightSE.point.y}},{key:"comparePoint",value:function(st){if(this.isAnEndpoint(st))return 0;var Tt=this.leftSE.point,Qe=this.rightSE.point,it=this.vector();if(Tt.x===Qe.x)return st.x===Tt.x?0:st.x<Tt.x?1:-1;var zt=(st.y-Tt.y)/it.y,Qt=Tt.x+zt*it.x;if(st.x===Qt)return 0;var Ar=(st.x-Tt.x)/it.x,zr=Tt.y+Ar*it.y;return st.y===zr?0:st.y<zr?-1:1}},{key:"getIntersection",value:function(st){var Tt=this.bbox(),Qe=st.bbox(),it=x(Tt,Qe);if(it===null)return null;var zt=this.leftSE.point,Qt=this.rightSE.point,Ar=st.leftSE.point,zr=st.rightSE.point,ct=_(Tt,Ar)&&this.comparePoint(Ar)===0,ot=_(Qe,zt)&&st.comparePoint(zt)===0,xt=_(Tt,zr)&&this.comparePoint(zr)===0,Bt=_(Qe,Qt)&&st.comparePoint(Qt)===0;if(ot&&ct)return Bt&&!xt?Qt:!Bt&&xt?zr:null;if(ot)return xt&&zt.x===zr.x&&zt.y===zr.y?null:zt;if(ct)return Bt&&Qt.x===Ar.x&&Qt.y===Ar.y?null:Ar;if(Bt&&xt)return null;if(Bt)return Qt;if(xt)return zr;var Ke=be(zt,this.vector(),Ar,st.vector());return Ke===null||!_(it,Ke)?null:S.round(Ke.x,Ke.y)}},{key:"split",value:function(st){var Tt=[],Qe=st.events!==void 0,it=new le(st,!0),zt=new le(st,!1),Qt=this.rightSE;this.replaceRightSE(zt),Tt.push(zt),Tt.push(it);var Ar=new tr(it,Qt,this.rings.slice(),this.windings.slice());return le.comparePoints(Ar.leftSE.point,Ar.rightSE.point)>0&&Ar.swapEvents(),le.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Qe&&(it.checkForConsuming(),zt.checkForConsuming()),Tt}},{key:"swapEvents",value:function(){var st=this.rightSE;this.rightSE=this.leftSE,this.leftSE=st,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Tt=0,Qe=this.windings.length;Tt<Qe;Tt++)this.windings[Tt]*=-1}},{key:"consume",value:function(st){for(var Tt=this,Qe=st;Tt.consumedBy;)Tt=Tt.consumedBy;for(;Qe.consumedBy;)Qe=Qe.consumedBy;var it=tr.compare(Tt,Qe);if(it!==0){if(it>0){var zt=Tt;Tt=Qe,Qe=zt}if(Tt.prev===Qe){var Qt=Tt;Tt=Qe,Qe=Qt}for(var Ar=0,zr=Qe.rings.length;Ar<zr;Ar++){var ct=Qe.rings[Ar],ot=Qe.windings[Ar],xt=Tt.rings.indexOf(ct);xt===-1?(Tt.rings.push(ct),Tt.windings.push(ot)):Tt.windings[xt]+=ot}Qe.rings=null,Qe.windings=null,Qe.consumedBy=Tt,Qe.leftSE.consumedBy=Tt.leftSE,Qe.rightSE.consumedBy=Tt.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var st=this.prev.consumedBy||this.prev;this._beforeState=st.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var st=this.beforeState();this._afterState={rings:st.rings.slice(0),windings:st.windings.slice(0),multiPolys:[]};for(var Tt=this._afterState.rings,Qe=this._afterState.windings,it=this._afterState.multiPolys,zt=0,Qt=this.rings.length;zt<Qt;zt++){var Ar=this.rings[zt],zr=this.windings[zt],ct=Tt.indexOf(Ar);ct===-1?(Tt.push(Ar),Qe.push(zr)):Qe[ct]+=zr}for(var ot=[],xt=[],Bt=0,Ke=Tt.length;Bt<Ke;Bt++)if(Qe[Bt]!==0){var lt=Tt[Bt],mt=lt.poly;if(xt.indexOf(mt)===-1)if(lt.isExterior)ot.push(mt);else{xt.indexOf(mt)===-1&&xt.push(mt);var qe=ot.indexOf(lt.poly);qe!==-1&&ot.splice(qe,1)}}for(var yt=0,qt=ot.length;yt<qt;yt++){var Er=ot[yt].multiPoly;it.indexOf(Er)===-1&&it.push(Er)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var st=this.beforeState().multiPolys,Tt=this.afterState().multiPolys;switch($e.type){case"union":{var Qe=st.length===0,it=Tt.length===0;this._isInResult=Qe!==it;break}case"intersection":{var zt,Qt;st.length<Tt.length?(zt=st.length,Qt=Tt.length):(zt=Tt.length,Qt=st.length),this._isInResult=Qt===$e.numMultiPolys&&zt<Qt;break}case"xor":{var Ar=Math.abs(st.length-Tt.length);this._isInResult=Ar%2==1;break}case"difference":{var zr=function(ot){return ot.length===1&&ot[0].isSubject};this._isInResult=zr(st)!==zr(Tt);break}default:throw new Error("Unrecognized operation type found ".concat($e.type))}return this._isInResult}}],[{key:"compare",value:function(st,Tt){var Qe=st.leftSE.point.x,it=Tt.leftSE.point.x,zt=st.rightSE.point.x,Qt=Tt.rightSE.point.x;if(Qt<Qe)return 1;if(zt<it)return-1;var Ar=st.leftSE.point.y,zr=Tt.leftSE.point.y,ct=st.rightSE.point.y,ot=Tt.rightSE.point.y;if(Qe<it){if(zr<Ar&&zr<ct)return 1;if(zr>Ar&&zr>ct)return-1;var xt=st.comparePoint(Tt.leftSE.point);if(xt<0)return 1;if(xt>0)return-1;var Bt=Tt.comparePoint(st.rightSE.point);return Bt!==0?Bt:-1}if(Qe>it){if(Ar<zr&&Ar<ot)return-1;if(Ar>zr&&Ar>ot)return 1;var Ke=Tt.comparePoint(st.leftSE.point);if(Ke!==0)return Ke;var lt=st.comparePoint(Tt.rightSE.point);return lt<0?1:lt>0?-1:1}if(Ar<zr)return-1;if(Ar>zr)return 1;if(zt<Qt){var mt=Tt.comparePoint(st.rightSE.point);if(mt!==0)return mt}if(zt>Qt){var qe=st.comparePoint(Tt.rightSE.point);if(qe<0)return 1;if(qe>0)return-1}if(zt!==Qt){var yt=ct-Ar,qt=zt-Qe,Er=ot-zr,Zr=Qt-it;if(yt>qt&&Er<Zr)return 1;if(yt<qt&&Er>Zr)return-1}return zt>Qt?1:zt<Qt||ct<ot?-1:ct>ot?1:st.id<Tt.id?-1:st.id>Tt.id?1:0}},{key:"fromRing",value:function(st,Tt,Qe){var it,zt,Qt,Ar=le.comparePoints(st,Tt);if(Ar<0)it=st,zt=Tt,Qt=1;else if(Ar>0)it=Tt,zt=st,Qt=-1;else throw new Error("Tried to create degenerate segment at [".concat(st.x,", ").concat(st.y,"]"));var zr=new le(it,!0),ct=new le(zt,!1);return new tr(zr,ct,[Qe],[Qt])}}]),tr}(),V=function(){function tr(ft,st,Tt){if(B(this,tr),!Array.isArray(ft)||ft.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=st,this.isExterior=Tt,this.segments=[],typeof ft[0][0]!="number"||typeof ft[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Qe=S.round(ft[0][0],ft[0][1]);this.bbox={ll:{x:Qe.x,y:Qe.y},ur:{x:Qe.x,y:Qe.y}};for(var it=Qe,zt=1,Qt=ft.length;zt<Qt;zt++){if(typeof ft[zt][0]!="number"||typeof ft[zt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ar=S.round(ft[zt][0],ft[zt][1]);Ar.x===it.x&&Ar.y===it.y||(this.segments.push(ae.fromRing(it,Ar,this)),Ar.x<this.bbox.ll.x&&(this.bbox.ll.x=Ar.x),Ar.y<this.bbox.ll.y&&(this.bbox.ll.y=Ar.y),Ar.x>this.bbox.ur.x&&(this.bbox.ur.x=Ar.x),Ar.y>this.bbox.ur.y&&(this.bbox.ur.y=Ar.y),it=Ar)}(Qe.x!==it.x||Qe.y!==it.y)&&this.segments.push(ae.fromRing(it,Qe,this))}return L(tr,[{key:"getSweepEvents",value:function(){for(var st=[],Tt=0,Qe=this.segments.length;Tt<Qe;Tt++){var it=this.segments[Tt];st.push(it.leftSE),st.push(it.rightSE)}return st}}]),tr}(),re=function(){function tr(ft,st){if(B(this,tr),!Array.isArray(ft))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new V(ft[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Tt=1,Qe=ft.length;Tt<Qe;Tt++){var it=new V(ft[Tt],this,!1);it.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=it.bbox.ll.x),it.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=it.bbox.ll.y),it.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=it.bbox.ur.x),it.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=it.bbox.ur.y),this.interiorRings.push(it)}this.multiPoly=st}return L(tr,[{key:"getSweepEvents",value:function(){for(var st=this.exteriorRing.getSweepEvents(),Tt=0,Qe=this.interiorRings.length;Tt<Qe;Tt++)for(var it=this.interiorRings[Tt].getSweepEvents(),zt=0,Qt=it.length;zt<Qt;zt++)st.push(it[zt]);return st}}]),tr}(),te=function(){function tr(ft,st){if(B(this,tr),!Array.isArray(ft))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof ft[0][0][0]=="number"&&(ft=[ft])}catch(zt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Tt=0,Qe=ft.length;Tt<Qe;Tt++){var it=new re(ft[Tt],this);it.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=it.bbox.ll.x),it.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=it.bbox.ll.y),it.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=it.bbox.ur.x),it.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=it.bbox.ur.y),this.polys.push(it)}this.isSubject=st}return L(tr,[{key:"getSweepEvents",value:function(){for(var st=[],Tt=0,Qe=this.polys.length;Tt<Qe;Tt++)for(var it=this.polys[Tt].getSweepEvents(),zt=0,Qt=it.length;zt<Qt;zt++)st.push(it[zt]);return st}}]),tr}(),q=function(){function tr(ft){B(this,tr),this.events=ft;for(var st=0,Tt=ft.length;st<Tt;st++)ft[st].segment.ringOut=this;this.poly=null}return L(tr,[{key:"getGeom",value:function(){for(var st=this.events[0].point,Tt=[st],Qe=1,it=this.events.length-1;Qe<it;Qe++){var zt=this.events[Qe].point,Qt=this.events[Qe+1].point;ye(zt,st,Qt)!==0&&(Tt.push(zt),st=zt)}if(Tt.length===1)return null;var Ar=Tt[0],zr=Tt[1];ye(Ar,st,zr)===0&&Tt.shift(),Tt.push(Tt[0]);for(var ct=this.isExteriorRing()?1:-1,ot=this.isExteriorRing()?0:Tt.length-1,xt=this.isExteriorRing()?Tt.length:-1,Bt=[],Ke=ot;Ke!=xt;Ke+=ct)Bt.push([Tt[Ke].x,Tt[Ke].y]);return Bt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var st=this.enclosingRing();this._isExteriorRing=st?!st.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var st=this.events[0],Tt=1,Qe=this.events.length;Tt<Qe;Tt++){var it=this.events[Tt];le.compare(st,it)>0&&(st=it)}for(var zt=st.segment.prevInResult(),Qt=zt?zt.prevInResult():null;;){if(!zt)return null;if(!Qt)return zt.ringOut;if(Qt.ringOut!==zt.ringOut)return Qt.ringOut.enclosingRing()!==zt.ringOut?zt.ringOut:zt.ringOut.enclosingRing();zt=Qt.prevInResult(),Qt=zt?zt.prevInResult():null}}}],[{key:"factory",value:function(st){for(var Tt=[],Qe=0,it=st.length;Qe<it;Qe++){var zt=st[Qe];if(!(!zt.isInResult()||zt.ringOut)){for(var Qt=null,Ar=zt.leftSE,zr=zt.rightSE,ct=[Ar],ot=Ar.point,xt=[];Qt=Ar,Ar=zr,ct.push(Ar),Ar.point!==ot;)for(;;){var Bt=Ar.getAvailableLinkedEvents();if(Bt.length===0){var Ke=ct[0].point,lt=ct[ct.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Ke.x,",")+" ".concat(Ke.y,"]. Last matching segment found ends at")+" [".concat(lt.x,", ").concat(lt.y,"]."))}if(Bt.length===1){zr=Bt[0].otherSE;break}for(var mt=null,qe=0,yt=xt.length;qe<yt;qe++)if(xt[qe].point===Ar.point){mt=qe;break}if(mt!==null){var qt=xt.splice(mt)[0],Er=ct.splice(qt.index);Er.unshift(Er[0].otherSE),Tt.push(new tr(Er.reverse()));continue}xt.push({index:ct.length,point:Ar.point});var Zr=Ar.getLeftmostComparator(Qt);zr=Bt.sort(Zr)[0].otherSE;break}Tt.push(new tr(ct))}}return Tt}}]),tr}(),ve=function(){function tr(ft){B(this,tr),this.exteriorRing=ft,ft.poly=this,this.interiorRings=[]}return L(tr,[{key:"addInterior",value:function(st){this.interiorRings.push(st),st.poly=this}},{key:"getGeom",value:function(){var st=[this.exteriorRing.getGeom()];if(st[0]===null)return null;for(var Tt=0,Qe=this.interiorRings.length;Tt<Qe;Tt++){var it=this.interiorRings[Tt].getGeom();it!==null&&st.push(it)}return st}}]),tr}(),Me=function(){function tr(ft){B(this,tr),this.rings=ft,this.polys=this._composePolys(ft)}return L(tr,[{key:"getGeom",value:function(){for(var st=[],Tt=0,Qe=this.polys.length;Tt<Qe;Tt++){var it=this.polys[Tt].getGeom();it!==null&&st.push(it)}return st}},{key:"_composePolys",value:function(st){for(var Tt=[],Qe=0,it=st.length;Qe<it;Qe++){var zt=st[Qe];if(!zt.poly)if(zt.isExteriorRing())Tt.push(new ve(zt));else{var Qt=zt.enclosingRing();Qt.poly||Tt.push(new ve(Qt)),Qt.poly.addInterior(zt)}}return Tt}}]),tr}(),De=function(){function tr(ft){B(this,tr);var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ae.compare;this.queue=ft,this.tree=new r(st),this.segments=[]}return L(tr,[{key:"process",value:function(st){var Tt=st.segment,Qe=[];if(st.consumedBy)return st.isLeft?this.queue.remove(st.otherSE):this.tree.remove(Tt),Qe;var it=st.isLeft?this.tree.add(Tt):this.tree.find(Tt);if(!it)throw new Error("Unable to find segment #".concat(Tt.id," ")+"[".concat(Tt.leftSE.point.x,", ").concat(Tt.leftSE.point.y,"] -> ")+"[".concat(Tt.rightSE.point.x,", ").concat(Tt.rightSE.point.y,"] ")+"in SweepLine tree.");for(var zt=it,Qt=it,Ar=void 0,zr=void 0;Ar===void 0;)zt=this.tree.prev(zt),zt===null?Ar=null:zt.key.consumedBy===void 0&&(Ar=zt.key);for(;zr===void 0;)Qt=this.tree.next(Qt),Qt===null?zr=null:Qt.key.consumedBy===void 0&&(zr=Qt.key);if(st.isLeft){var ct=null;if(Ar){var ot=Ar.getIntersection(Tt);if(ot!==null&&(Tt.isAnEndpoint(ot)||(ct=ot),!Ar.isAnEndpoint(ot)))for(var xt=this._splitSafely(Ar,ot),Bt=0,Ke=xt.length;Bt<Ke;Bt++)Qe.push(xt[Bt])}var lt=null;if(zr){var mt=zr.getIntersection(Tt);if(mt!==null&&(Tt.isAnEndpoint(mt)||(lt=mt),!zr.isAnEndpoint(mt)))for(var qe=this._splitSafely(zr,mt),yt=0,qt=qe.length;yt<qt;yt++)Qe.push(qe[yt])}if(ct!==null||lt!==null){var Er=null;if(ct===null)Er=lt;else if(lt===null)Er=ct;else{var Zr=le.comparePoints(ct,lt);Er=Zr<=0?ct:lt}this.queue.remove(Tt.rightSE),Qe.push(Tt.rightSE);for(var Dr=Tt.split(Er),Cr=0,mn=Dr.length;Cr<mn;Cr++)Qe.push(Dr[Cr])}Qe.length>0?(this.tree.remove(Tt),Qe.push(st)):(this.segments.push(Tt),Tt.prev=Ar)}else{if(Ar&&zr){var xn=Ar.getIntersection(zr);if(xn!==null){if(!Ar.isAnEndpoint(xn))for(var lr=this._splitSafely(Ar,xn),An=0,On=lr.length;An<On;An++)Qe.push(lr[An]);if(!zr.isAnEndpoint(xn))for(var Mt=this._splitSafely(zr,xn),er=0,$t=Mt.length;er<$t;er++)Qe.push(Mt[er])}}this.tree.remove(Tt)}return Qe}},{key:"_splitSafely",value:function(st,Tt){this.tree.remove(st);var Qe=st.rightSE;this.queue.remove(Qe);var it=st.split(Tt);return it.push(Qe),st.consumedBy===void 0&&this.tree.add(st),it}}]),tr}(),ze=typeof he!="undefined"&&Object({NODE_ENV:"production"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,We=typeof he!="undefined"&&Object({NODE_ENV:"production"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,He=function(){function tr(){B(this,tr)}return L(tr,[{key:"run",value:function(st,Tt,Qe){$e.type=st,S.reset();for(var it=[new te(Tt,!0)],zt=0,Qt=Qe.length;zt<Qt;zt++)it.push(new te(Qe[zt],!1));if($e.numMultiPolys=it.length,$e.type==="difference")for(var Ar=it[0],zr=1;zr<it.length;)x(it[zr].bbox,Ar.bbox)!==null?zr++:it.splice(zr,1);if($e.type==="intersection"){for(var ct=0,ot=it.length;ct<ot;ct++)for(var xt=it[ct],Bt=ct+1,Ke=it.length;Bt<Ke;Bt++)if(x(xt.bbox,it[Bt].bbox)===null)return[]}for(var lt=new r(le.compare),mt=0,qe=it.length;mt<qe;mt++)for(var yt=it[mt].getSweepEvents(),qt=0,Er=yt.length;qt<Er;qt++)if(lt.insert(yt[qt]),lt.size>ze)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).");for(var Zr=new De(lt),Dr=lt.size,Cr=lt.pop();Cr;){var mn=Cr.key;if(lt.size===Dr){var xn=mn.segment;throw new Error("Unable to pop() ".concat(mn.isLeft?"left":"right"," SweepEvent ")+"[".concat(mn.point.x,", ").concat(mn.point.y,"] from segment #").concat(xn.id," ")+"[".concat(xn.leftSE.point.x,", ").concat(xn.leftSE.point.y,"] -> ")+"[".concat(xn.rightSE.point.x,", ").concat(xn.rightSE.point.y,"] from queue."))}if(lt.size>ze)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(Zr.segments.length>We)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");for(var lr=Zr.process(mn),An=0,On=lr.length;An<On;An++){var Mt=lr[An];Mt.consumedBy===void 0&&lt.insert(Mt)}Dr=lt.size,Cr=lt.pop()}S.reset();var er=q.factory(Zr.segments),$t=new Me(er);return $t.getGeom()}}]),tr}(),$e=new He,It=function(ft){for(var st=arguments.length,Tt=new Array(st>1?st-1:0),Qe=1;Qe<st;Qe++)Tt[Qe-1]=arguments[Qe];return $e.run("union",ft,Tt)},Yt=function(ft){for(var st=arguments.length,Tt=new Array(st>1?st-1:0),Qe=1;Qe<st;Qe++)Tt[Qe-1]=arguments[Qe];return $e.run("intersection",ft,Tt)},rr=function(ft){for(var st=arguments.length,Tt=new Array(st>1?st-1:0),Qe=1;Qe<st;Qe++)Tt[Qe-1]=arguments[Qe];return $e.run("xor",ft,Tt)},ir=function(ft){for(var st=arguments.length,Tt=new Array(st>1?st-1:0),Qe=1;Qe<st;Qe++)Tt[Qe-1]=arguments[Qe];return $e.run("difference",ft,Tt)},Br={union:It,intersection:Yt,xor:rr,difference:ir};return Br})}).call(this,Ee("Q2Ig"))},"3L66":function(br,Ot,Ee){var he=Ee("MMmD"),B=Ee("ExA7");function L(o){return B(o)&&he(o)}br.exports=L},"44Ds":function(br,Ot,Ee){var he=Ee("e4Nc"),B="Expected a function";function L(o,e){if(typeof o!="function"||e!=null&&typeof e!="function")throw new TypeError(B);var g=function(){var v=arguments,p=e?e.apply(this,v):v[0],c=g.cache;if(c.has(p))return c.get(p);var h=o.apply(this,v);return g.cache=c.set(p,h)||c,h};return g.cache=new(L.Cache||he),g}L.Cache=he,br.exports=L},"4ZJM":function(br,Ot,Ee){(function(he,B){br.exports=B()})(this,function(){"use strict";var he,B,L;function o(e,g){if(!he)he=g;else if(!B)B=g;else{var v="var sharedChunk = {}; ("+he+")(sharedChunk); ("+B+")(sharedChunk);",p={};he(p),L=g(p),typeof window!="undefined"&&(L.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}return o(["exports"],function(e){"use strict";function g(E,A){return E(A={exports:{}},A.exports),A.exports}var v=p;function p(E,A,D,Z){this.cx=3*E,this.bx=3*(D-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(Z-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=Z,this.p2x=D,this.p2y=Z}p.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},p.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},p.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},p.prototype.solveCurveX=function(E,A){var D,Z,se,ge,Te;for(A===void 0&&(A=1e-6),se=E,Te=0;Te<8;Te++){if(ge=this.sampleCurveX(se)-E,Math.abs(ge)<A)return se;var je=this.sampleCurveDerivativeX(se);if(Math.abs(je)<1e-6)break;se-=ge/je}if((se=E)<(D=0))return D;if(se>(Z=1))return Z;for(;D<Z;){if(ge=this.sampleCurveX(se),Math.abs(ge-E)<A)return se;E>ge?D=se:Z=se,se=.5*(Z-D)+D}return se},p.prototype.solve=function(E,A){return this.sampleCurveY(this.solveCurveX(E,A))};var c=h;function h(E,A){this.x=E,this.y=A}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,D){return this.clone()._rotateAround(A,D)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var D=A.x-this.x,Z=A.y-this.y;return D*D+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,D){return Math.atan2(this.x*D-this.y*A,this.x*A+this.y*D)},_matMult:function(A){var D=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=D,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var D=Math.cos(A),Z=Math.sin(A),se=Z*this.x+D*this.y;return this.x=D*this.x-Z*this.y,this.y=se,this},_rotateAround:function(A,D){var Z=Math.cos(A),se=Math.sin(A),ge=D.y+se*(this.x-D.x)+Z*(this.y-D.y);return this.x=D.x+Z*(this.x-D.x)-se*(this.y-D.y),this.y=ge,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(E){return E instanceof h?E:Array.isArray(E)?new h(E[0],E[1]):E};var i=typeof self!="undefined"?self:{},r=Math.pow(2,53)-1;function n(E,A,D,Z){var se=new v(E,A,D,Z);return function(ge){return se.solve(ge)}}var s=n(.25,.1,.25,1);function f(E,A,D){return Math.min(D,Math.max(A,E))}function u(E,A,D){var Z=D-A,se=((E-A)%Z+Z)%Z+A;return se===A?D:se}function d(E){for(var A=[],D=arguments.length-1;D-- >0;)A[D]=arguments[D+1];for(var Z=0,se=A;Z<se.length;Z+=1){var ge=se[Z];for(var Te in ge)E[Te]=ge[Te]}return E}var b=1;function _(){return b++}function x(){return function E(A){return A?(A^16*Math.random()>>A/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}()}function M(E){return!!E&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E)}function P(E,A){E.forEach(function(D){A[D]&&(A[D]=A[D].bind(A))})}function C(E,A){return E.indexOf(A,E.length-A.length)!==-1}function O(E,A,D){var Z={};for(var se in E)Z[se]=A.call(D||this,E[se],se,E);return Z}function w(E,A,D){var Z={};for(var se in E)A.call(D||this,E[se],se,E)&&(Z[se]=E[se]);return Z}function S(E){return Array.isArray(E)?E.map(S):typeof E=="object"&&E?O(E,S):E}var I={};function j(E){I[E]||(typeof console!="undefined"&&console.warn(E),I[E]=!0)}function N(E,A,D){return(D.y-E.y)*(A.x-E.x)>(A.y-E.y)*(D.x-E.x)}function W(E){for(var A=0,D=0,Z=E.length,se=Z-1,ge=void 0,Te=void 0;D<Z;se=D++)A+=((Te=E[se]).x-(ge=E[D]).x)*(ge.y+Te.y);return A}function H(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function J(E){var A={};if(E.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(Z,se,ge,Te){var je=ge||Te;return A[se]=!je||je.toLowerCase(),""}),A["max-age"]){var D=parseInt(A["max-age"],10);isNaN(D)?delete A["max-age"]:A["max-age"]=D}return A}var Q=null;function ne(E){if(Q==null){var A=E.navigator?E.navigator.userAgent:null;Q=!!E.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return Q}function K(E){try{var A=i[E];return A.setItem("_mapbox_test_",1),A.removeItem("_mapbox_test_"),!0}catch(D){return!1}}var ie,de,we,Re,_e=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now.bind(Date),Ue=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame,rt=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.msCancelAnimationFrame,Fe={now:_e,frame:function(A){var D=Ue(A);return{cancel:function(){return rt(D)}}},getImageData:function(A,D){D===void 0&&(D=0);var Z=i.document.createElement("canvas"),se=Z.getContext("2d");if(!se)throw new Error("failed to create canvas 2d context");return Z.width=A.width,Z.height=A.height,se.drawImage(A,0,0,A.width,A.height),se.getImageData(-D,-D,A.width+2*D,A.height+2*D)},resolveURL:function(A){return ie||(ie=i.document.createElement("a")),ie.href=A,ie.href},hardwareConcurrency:i.navigator&&i.navigator.hardwareConcurrency||4,get devicePixelRatio(){return i.devicePixelRatio},get prefersReducedMotion(){return!!i.matchMedia&&(de==null&&(de=i.matchMedia("(prefers-reduced-motion: reduce)")),de.matches)}},Se={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ye={supported:!1,testSupport:function(A){!Oe&&Re&&(ue?xe(A):we=A)}},Oe=!1,ue=!1;function xe(E){var A=E.createTexture();E.bindTexture(E.TEXTURE_2D,A);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,Re),E.isContextLost())return;ye.supported=!0}catch(D){}E.deleteTexture(A),Oe=!0}i.document&&((Re=i.document.createElement("img")).onload=function(){we&&xe(we),we=null,ue=!0},Re.onerror=function(){Oe=!0,we=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ae="01",pe=function(A,D){this._transformRequestFn=A,this._customAccessToken=D,this._createSkuToken()};function be(E){return E.indexOf("mapbox:")===0}pe.prototype._createSkuToken=function(){var E=function(){for(var A="",D=0;D<10;D++)A+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ae,A].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=E.token,this._skuTokenExpiresAt=E.tokenExpiresAt},pe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},pe.prototype.transformRequest=function(E,A){return this._transformRequestFn&&this._transformRequestFn(E,A)||{url:E}},pe.prototype.normalizeStyleURL=function(E,A){if(!be(E))return E;var D=V(E);return D.path="/styles/v1"+D.path,this._makeAPIURL(D,this._customAccessToken||A)},pe.prototype.normalizeGlyphsURL=function(E,A){if(!be(E))return E;var D=V(E);return D.path="/fonts/v1"+D.path,this._makeAPIURL(D,this._customAccessToken||A)},pe.prototype.normalizeSourceURL=function(E,A){if(!be(E))return E;var D=V(E);return D.path="/v4/"+D.authority+".json",D.params.push("secure"),this._makeAPIURL(D,this._customAccessToken||A)},pe.prototype.normalizeSpriteURL=function(E,A,D,Z){var se=V(E);return be(E)?(se.path="/styles/v1"+se.path+"/sprite"+A+D,this._makeAPIURL(se,this._customAccessToken||Z)):(se.path+=""+A+D,re(se))},pe.prototype.normalizeTileURL=function(E,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),E&&!be(E))return E;var D=V(E);D.path=D.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Fe.devicePixelRatio>=2||A===512?"@2x":"")+(ye.supported?".webp":"$1")),D.path=D.path.replace(/^.+\/v4\//,"/"),D.path="/v4"+D.path;var Z=this._customAccessToken||function(se){for(var ge=0,Te=se;ge<Te.length;ge+=1){var je=Te[ge].match(/^access_token=(.*)$/);if(je)return je[1]}return null}(D.params)||Se.ACCESS_TOKEN;return Se.REQUIRE_ACCESS_TOKEN&&Z&&this._skuToken&&D.params.push("sku="+this._skuToken),this._makeAPIURL(D,Z)},pe.prototype.canonicalizeTileURL=function(E,A){var D=V(E);if(!D.path.match(/(^\/v4\/)/)||!D.path.match(/\.[\w]+$/))return E;var Z="mapbox://tiles/";Z+=D.path.replace("/v4/","");var se=D.params;return A&&(se=se.filter(function(ge){return!ge.match(/^access_token=/)})),se.length&&(Z+="?"+se.join("&")),Z},pe.prototype.canonicalizeTileset=function(E,A){for(var D=!!A&&be(A),Z=[],se=0,ge=E.tiles||[];se<ge.length;se+=1){var Te=ge[se];z(Te)?Z.push(this.canonicalizeTileURL(Te,D)):Z.push(Te)}return Z},pe.prototype._makeAPIURL=function(E,A){var D="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",Z=V(Se.API_URL);if(E.protocol=Z.protocol,E.authority=Z.authority,E.protocol==="http"){var se=E.params.indexOf("secure");se>=0&&E.params.splice(se,1)}if(Z.path!=="/"&&(E.path=""+Z.path+E.path),!Se.REQUIRE_ACCESS_TOKEN)return re(E);if(!(A=A||Se.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+D);if(A[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+D);return E.params=E.params.filter(function(ge){return ge.indexOf("access_token")===-1}),E.params.push("access_token="+A),re(E)};var le=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function z(E){return le.test(E)}var ae=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function V(E){var A=E.match(ae);if(!A)throw new Error("Unable to parse URL object");return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}function re(E){var A=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+A}function te(E){if(!E)return null;var A=E.split(".");if(!A||A.length!==3)return null;try{return JSON.parse(decodeURIComponent(i.atob(A[1]).split("").map(function(D){return"%"+("00"+D.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(D){return null}}var q=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};q.prototype.getStorageKey=function(E){var A,D=te(Se.ACCESS_TOKEN);return A=D&&D.u?i.btoa(encodeURIComponent(D.u).replace(/%([0-9A-F]{2})/g,function(Z,se){return String.fromCharCode(Number("0x"+se))})):Se.ACCESS_TOKEN||"",E?"mapbox.eventData."+E+":"+A:"mapbox.eventData:"+A},q.prototype.fetchEventData=function(){var E=K("localStorage"),A=this.getStorageKey(),D=this.getStorageKey("uuid");if(E)try{var Z=i.localStorage.getItem(A);Z&&(this.eventData=JSON.parse(Z));var se=i.localStorage.getItem(D);se&&(this.anonId=se)}catch(ge){j("Unable to read from LocalStorage")}},q.prototype.saveEventData=function(){var E=K("localStorage"),A=this.getStorageKey(),D=this.getStorageKey("uuid");if(E)try{i.localStorage.setItem(D,this.anonId),Object.keys(this.eventData).length>=1&&i.localStorage.setItem(A,JSON.stringify(this.eventData))}catch(Z){j("Unable to write to LocalStorage")}},q.prototype.processRequests=function(E){},q.prototype.postEvent=function(E,A,D,Z){var se=this;if(Se.EVENTS_URL){var ge=V(Se.EVENTS_URL);ge.params.push("access_token="+(Z||Se.ACCESS_TOKEN||""));var Te={event:this.type,created:new Date(E).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Ae,userId:this.anonId},je=A?d(Te,A):Te,Ze={url:re(ge),headers:{"Content-Type":"text/plain"},body:JSON.stringify([je])};this.pendingRequest=zr(Ze,function(pt){se.pendingRequest=null,D(pt),se.saveEventData(),se.processRequests(Z)})}},q.prototype.queueRequest=function(E,A){this.queue.push(E),this.processRequests(A)};var ve,Me,De=function(E){function A(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.postMapLoadEvent=function(D,Z,se,ge){this.skuToken=se;var Te=!(!ge&&!Se.ACCESS_TOKEN),je=Array.isArray(D)&&D.some(function(Ze){return be(Ze)||z(Ze)});Se.EVENTS_URL&&Te&&je&&this.queueRequest({id:Z,timestamp:Date.now()},ge)},A.prototype.processRequests=function(D){var Z=this;if(!this.pendingRequest&&this.queue.length!==0){var se=this.queue.shift(),ge=se.id,Te=se.timestamp;ge&&this.success[ge]||(this.anonId||this.fetchEventData(),M(this.anonId)||(this.anonId=x()),this.postEvent(Te,{skuToken:this.skuToken},function(je){je||ge&&(Z.success[ge]=!0)},D))}},A}(q),ze=new(function(E){function A(D){E.call(this,"appUserTurnstile"),this._customAccessToken=D}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.postTurnstileEvent=function(D,Z){Se.EVENTS_URL&&Se.ACCESS_TOKEN&&Array.isArray(D)&&D.some(function(se){return be(se)||z(se)})&&this.queueRequest(Date.now(),Z)},A.prototype.processRequests=function(D){var Z=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var se=te(Se.ACCESS_TOKEN),ge=se?se.u:Se.ACCESS_TOKEN,Te=ge!==this.eventData.tokenU;M(this.anonId)||(this.anonId=x(),Te=!0);var je=this.queue.shift();if(this.eventData.lastSuccess){var Ze=new Date(this.eventData.lastSuccess),pt=new Date(je),wt=(je-this.eventData.lastSuccess)/864e5;Te=Te||wt>=1||wt<-1||Ze.getDate()!==pt.getDate()}else Te=!0;if(!Te)return this.processRequests();this.postEvent(je,{"enabled.telemetry":!1},function(Wt){Wt||(Z.eventData.lastSuccess=je,Z.eventData.tokenU=ge)},D)}},A}(q)),We=ze.postTurnstileEvent.bind(ze),He=new De,$e=He.postMapLoadEvent.bind(He),It=500,Yt=50;function rr(){i.caches&&!ve&&(ve=i.caches.open("mapbox-tiles"))}function ir(E){var A=E.indexOf("?");return A<0?E:E.slice(0,A)}var Br,tr=1/0;function ft(){return Br==null&&(Br=i.OffscreenCanvas&&new i.OffscreenCanvas(1,1).getContext("2d")&&typeof i.createImageBitmap=="function"),Br}var st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(st);var Tt=function(E){function A(D,Z,se){Z===401&&z(se)&&(D+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,D),this.status=Z,this.url=se,this.name=this.constructor.name,this.message=D}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},A}(Error),Qe=H()?function(){return self.worker&&self.worker.referrer}:function(){return(i.location.protocol==="blob:"?i.parent:i).location.href},it,zt,Qt=function(A,D){if(!(/^file:/.test(Z=A.url)||/^file:/.test(Qe())&&!/^\w+:/.test(Z))){if(i.fetch&&i.Request&&i.AbortController&&i.Request.prototype.hasOwnProperty("signal"))return function(se,ge){var Te,je=new i.AbortController,Ze=new i.Request(se.url,{method:se.method||"GET",body:se.body,credentials:se.credentials,headers:se.headers,referrer:Qe(),signal:je.signal}),pt=!1,wt=!1,Wt=(Te=Ze.url).indexOf("sku=")>0&&z(Te);se.type==="json"&&Ze.headers.set("Accept","application/json");var Xt=function(Lr,qr,Jr){if(!wt){if(Lr&&Lr.message!=="SecurityError"&&j(Lr),qr&&Jr)return dr(qr);var Cn=Date.now();i.fetch(Ze).then(function(Un){if(Un.ok){var Jn=Wt?Un.clone():null;return dr(Un,Jn,Cn)}return ge(new Tt(Un.statusText,Un.status,se.url))}).catch(function(Un){Un.code!==20&&ge(new Error(Un.message))})}},dr=function(Lr,qr,Jr){(se.type==="arrayBuffer"?Lr.arrayBuffer():se.type==="json"?Lr.json():Lr.text()).then(function(Cn){wt||(qr&&Jr&&function(Un,Jn,yi){if(rr(),ve){var hi={status:Jn.status,statusText:Jn.statusText,headers:new i.Headers};Jn.headers.forEach(function(Zi,ba){return hi.headers.set(ba,Zi)});var Xi=J(Jn.headers.get("Cache-Control")||"");Xi["no-store"]||(Xi["max-age"]&&hi.headers.set("Expires",new Date(yi+1e3*Xi["max-age"]).toUTCString()),new Date(hi.headers.get("Expires")).getTime()-yi<42e4||function(Zi,ba){if(Me===void 0)try{new Response(new ReadableStream),Me=!0}catch(Ma){Me=!1}Me?ba(Zi.body):Zi.blob().then(ba)}(Jn,function(Zi){var ba=new i.Response(Zi,hi);rr(),ve&&ve.then(function(Ma){return Ma.put(ir(Un.url),ba)}).catch(function(Ma){return j(Ma.message)})}))}}(Ze,qr,Jr),pt=!0,ge(null,Cn,Lr.headers.get("Cache-Control"),Lr.headers.get("Expires")))}).catch(function(Cn){wt||ge(new Error(Cn.message))})};return Wt?function(jr,Lr){if(rr(),!ve)return Lr(null);var qr=ir(jr.url);ve.then(function(Jr){Jr.match(qr).then(function(Cn){var Un=function(Jn){if(!Jn)return!1;var yi=new Date(Jn.headers.get("Expires")||0),hi=J(Jn.headers.get("Cache-Control")||"");return yi>Date.now()&&!hi["no-cache"]}(Cn);Jr.delete(qr),Un&&Jr.put(qr,Cn.clone()),Lr(null,Cn,Un)}).catch(Lr)}).catch(Lr)}(Ze,Xt):Xt(null,null),{cancel:function(){wt=!0,pt||je.abort()}}}(A,D);if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,D,void 0,!0)}var Z;return function(se,ge){var Te=new i.XMLHttpRequest;for(var je in Te.open(se.method||"GET",se.url,!0),se.type==="arrayBuffer"&&(Te.responseType="arraybuffer"),se.headers)Te.setRequestHeader(je,se.headers[je]);return se.type==="json"&&(Te.responseType="text",Te.setRequestHeader("Accept","application/json")),Te.withCredentials=se.credentials==="include",Te.onerror=function(){ge(new Error(Te.statusText))},Te.onload=function(){if((Te.status>=200&&Te.status<300||Te.status===0)&&Te.response!==null){var Ze=Te.response;if(se.type==="json")try{Ze=JSON.parse(Te.response)}catch(pt){return ge(pt)}ge(null,Ze,Te.getResponseHeader("Cache-Control"),Te.getResponseHeader("Expires"))}else ge(new Tt(Te.statusText,Te.status,se.url))},Te.send(se.body),{cancel:function(){return Te.abort()}}}(A,D)},Ar=function(A,D){return Qt(d(A,{type:"arrayBuffer"}),D)},zr=function(A,D){return Qt(d(A,{method:"POST"}),D)},ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";it=[],zt=0;var ot=function E(A,D){if(ye.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),zt>=Se.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:A,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return it.push(Z),Z}zt++;var se=!1,ge=function(){if(!se)for(se=!0,zt--;it.length&&zt<Se.MAX_PARALLEL_IMAGE_REQUESTS;){var Ze=it.shift();Ze.cancelled||(Ze.cancel=E(Ze.requestParameters,Ze.callback).cancel)}},Te=Ar(A,function(je,Ze,pt,wt){ge(),je?D(je):Ze&&(ft()?function(Wt,Xt){var dr=new i.Blob([new Uint8Array(Wt)],{type:"image/png"});i.createImageBitmap(dr).then(function(jr){Xt(null,jr)}).catch(function(jr){Xt(new Error("Could not load image because of "+jr.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ze,D):function(Wt,Xt,dr,jr){var Lr=new i.Image,qr=i.URL;Lr.onload=function(){Xt(null,Lr),qr.revokeObjectURL(Lr.src),Lr.onload=null,i.requestAnimationFrame(function(){Lr.src=ct})},Lr.onerror=function(){return Xt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Jr=new i.Blob([new Uint8Array(Wt)],{type:"image/png"});Lr.cacheControl=dr,Lr.expires=jr,Lr.src=Wt.byteLength?qr.createObjectURL(Jr):ct}(Ze,D,pt,wt))});return{cancel:function(){Te.cancel(),ge()}}};function xt(E,A,D){D[E]&&D[E].indexOf(A)!==-1||(D[E]=D[E]||[],D[E].push(A))}function Bt(E,A,D){if(D&&D[E]){var Z=D[E].indexOf(A);Z!==-1&&D[E].splice(Z,1)}}var Ke=function(A,D){D===void 0&&(D={}),d(this,D),this.type=A},lt=function(E){function A(D,Z){Z===void 0&&(Z={}),E.call(this,"error",d({error:D},Z))}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A}(Ke),mt=function(){};mt.prototype.on=function(E,A){return this._listeners=this._listeners||{},xt(E,A,this._listeners),this},mt.prototype.off=function(E,A){return Bt(E,A,this._listeners),Bt(E,A,this._oneTimeListeners),this},mt.prototype.once=function(E,A){return this._oneTimeListeners=this._oneTimeListeners||{},xt(E,A,this._oneTimeListeners),this},mt.prototype.fire=function(E,A){typeof E=="string"&&(E=new Ke(E,A||{}));var D=E.type;if(this.listens(D)){E.target=this;for(var Z=0,se=this._listeners&&this._listeners[D]?this._listeners[D].slice():[];Z<se.length;Z+=1)se[Z].call(this,E);for(var ge=0,Te=this._oneTimeListeners&&this._oneTimeListeners[D]?this._oneTimeListeners[D].slice():[];ge<Te.length;ge+=1){var je=Te[ge];Bt(D,je,this._oneTimeListeners),je.call(this,E)}var Ze=this._eventedParent;Ze&&(d(E,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Ze.fire(E))}else E instanceof lt&&console.error(E.error);return this},mt.prototype.listens=function(E){return this._listeners&&this._listeners[E]&&this._listeners[E].length>0||this._oneTimeListeners&&this._oneTimeListeners[E]&&this._oneTimeListeners[E].length>0||this._eventedParent&&this._eventedParent.listens(E)},mt.prototype.setEventedParent=function(E,A){return this._eventedParent=E,this._eventedParentData=A,this};var qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},yt=function(A,D,Z,se){this.message=(A?A+": ":"")+Z,se&&(this.identifier=se),D!=null&&D.__line__&&(this.line=D.__line__)};function qt(E){var A=E.value;return A?[new yt(E.key,A,"constants have been deprecated as of v8")]:[]}function Er(E){for(var A=[],D=arguments.length-1;D-- >0;)A[D]=arguments[D+1];for(var Z=0,se=A;Z<se.length;Z+=1){var ge=se[Z];for(var Te in ge)E[Te]=ge[Te]}return E}function Zr(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function Dr(E){if(Array.isArray(E))return E.map(Dr);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var A={};for(var D in E)A[D]=Dr(E[D]);return A}return Zr(E)}var Cr=function(E){function A(D,Z){E.call(this,Z),this.message=Z,this.key=D}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A}(Error),mn=function(A,D){D===void 0&&(D=[]),this.parent=A,this.bindings={};for(var Z=0,se=D;Z<se.length;Z+=1){var ge=se[Z];this.bindings[ge[0]]=ge[1]}};mn.prototype.concat=function(E){return new mn(this,E)},mn.prototype.get=function(E){if(this.bindings[E])return this.bindings[E];if(this.parent)return this.parent.get(E);throw new Error(E+" not found in scope.")},mn.prototype.has=function(E){return!!this.bindings[E]||!!this.parent&&this.parent.has(E)};var xn={kind:"null"},lr={kind:"number"},An={kind:"string"},On={kind:"boolean"},Mt={kind:"color"},er={kind:"object"},$t={kind:"value"},Tr={kind:"collator"},Mr={kind:"formatted"},Hr={kind:"resolvedImage"};function wr(E,A){return{kind:"array",itemType:E,N:A}}function Ur(E){if(E.kind==="array"){var A=Ur(E.itemType);return typeof E.N=="number"?"array<"+A+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+A+">"}return E.kind}var fn=[xn,lr,An,On,Mt,Mr,er,wr($t),Hr];function tn(E,A){if(A.kind==="error")return null;if(E.kind==="array"){if(A.kind==="array"&&(A.N===0&&A.itemType.kind==="value"||!tn(E.itemType,A.itemType))&&(typeof E.N!="number"||E.N===A.N))return null}else{if(E.kind===A.kind)return null;if(E.kind==="value"){for(var D=0,Z=fn;D<Z.length;D+=1)if(!tn(Z[D],A))return null}}return"Expected "+Ur(E)+" but found "+Ur(A)+" instead."}function Rr(E,A){return A.some(function(D){return D.kind===E.kind})}function Nn(E,A){return A.some(function(D){return D==="null"?E===null:D==="array"?Array.isArray(E):D==="object"?E&&!Array.isArray(E)&&typeof E=="object":D===typeof E})}var En=g(function(E,A){var D={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Z(je){return(je=Math.round(je))<0?0:je>255?255:je}function se(je){return Z(je[je.length-1]==="%"?parseFloat(je)/100*255:parseInt(je))}function ge(je){return(Ze=je[je.length-1]==="%"?parseFloat(je)/100:parseFloat(je))<0?0:Ze>1?1:Ze;var Ze}function Te(je,Ze,pt){return pt<0?pt+=1:pt>1&&(pt-=1),6*pt<1?je+(Ze-je)*pt*6:2*pt<1?Ze:3*pt<2?je+(Ze-je)*(2/3-pt)*6:je}try{A.parseCSSColor=function(je){var Ze,pt=je.replace(/ /g,"").toLowerCase();if(pt in D)return D[pt].slice();if(pt[0]==="#")return pt.length===4?(Ze=parseInt(pt.substr(1),16))>=0&&Ze<=4095?[(3840&Ze)>>4|(3840&Ze)>>8,240&Ze|(240&Ze)>>4,15&Ze|(15&Ze)<<4,1]:null:pt.length===7&&(Ze=parseInt(pt.substr(1),16))>=0&&Ze<=16777215?[(16711680&Ze)>>16,(65280&Ze)>>8,255&Ze,1]:null;var wt=pt.indexOf("("),Wt=pt.indexOf(")");if(wt!==-1&&Wt+1===pt.length){var Xt=pt.substr(0,wt),dr=pt.substr(wt+1,Wt-(wt+1)).split(","),jr=1;switch(Xt){case"rgba":if(dr.length!==4)return null;jr=ge(dr.pop());case"rgb":return dr.length!==3?null:[se(dr[0]),se(dr[1]),se(dr[2]),jr];case"hsla":if(dr.length!==4)return null;jr=ge(dr.pop());case"hsl":if(dr.length!==3)return null;var Lr=(parseFloat(dr[0])%360+360)%360/360,qr=ge(dr[1]),Jr=ge(dr[2]),Cn=Jr<=.5?Jr*(qr+1):Jr+qr-Jr*qr,Un=2*Jr-Cn;return[Z(255*Te(Un,Cn,Lr+1/3)),Z(255*Te(Un,Cn,Lr)),Z(255*Te(Un,Cn,Lr-1/3)),jr];default:return null}}return null}}catch(je){}}).parseCSSColor,Yn=function(A,D,Z,se){se===void 0&&(se=1),this.r=A,this.g=D,this.b=Z,this.a=se};Yn.parse=function(E){if(E){if(E instanceof Yn)return E;if(typeof E=="string"){var A=En(E);if(A)return new Yn(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3])}}},Yn.prototype.toString=function(){var E=this.toArray(),A=E[1],D=E[2],Z=E[3];return"rgba("+Math.round(E[0])+","+Math.round(A)+","+Math.round(D)+","+Z+")"},Yn.prototype.toArray=function(){var E=this.a;return E===0?[0,0,0,0]:[255*this.r/E,255*this.g/E,255*this.b/E,E]},Yn.black=new Yn(0,0,0,1),Yn.white=new Yn(1,1,1,1),Yn.transparent=new Yn(0,0,0,0),Yn.red=new Yn(1,0,0,1);var wi=function(A,D,Z){this.sensitivity=A?D?"variant":"case":D?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};wi.prototype.compare=function(E,A){return this.collator.compare(E,A)},wi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var $a=function(A,D,Z,se,ge){this.text=A,this.image=D,this.scale=Z,this.fontStack=se,this.textColor=ge},so=function(A){this.sections=A};so.fromString=function(E){return new so([new $a(E,null,null,null,null)])},so.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(E){return E.text.length!==0||E.image&&E.image.name.length!==0})},so.factory=function(E){return E instanceof so?E:so.fromString(E)},so.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(E){return E.text}).join("")},so.prototype.serialize=function(){for(var E=["format"],A=0,D=this.sections;A<D.length;A+=1){var Z=D[A];if(Z.image)E.push(["image",Z.image.name]);else{E.push(Z.text);var se={};Z.fontStack&&(se["text-font"]=["literal",Z.fontStack.split(",")]),Z.scale&&(se["font-scale"]=Z.scale),Z.textColor&&(se["text-color"]=["rgba"].concat(Z.textColor.toArray())),E.push(se)}}return E};var Po=function(A){this.name=A.name,this.available=A.available};function Ro(E,A,D,Z){return typeof E=="number"&&E>=0&&E<=255&&typeof A=="number"&&A>=0&&A<=255&&typeof D=="number"&&D>=0&&D<=255?Z===void 0||typeof Z=="number"&&Z>=0&&Z<=1?null:"Invalid rgba value ["+[E,A,D,Z].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof Z=="number"?[E,A,D,Z]:[E,A,D]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function So(E){if(E===null||typeof E=="string"||typeof E=="boolean"||typeof E=="number"||E instanceof Yn||E instanceof wi||E instanceof so||E instanceof Po)return!0;if(Array.isArray(E)){for(var A=0,D=E;A<D.length;A+=1)if(!So(D[A]))return!1;return!0}if(typeof E=="object"){for(var Z in E)if(!So(E[Z]))return!1;return!0}return!1}function Va(E){if(E===null)return xn;if(typeof E=="string")return An;if(typeof E=="boolean")return On;if(typeof E=="number")return lr;if(E instanceof Yn)return Mt;if(E instanceof wi)return Tr;if(E instanceof so)return Mr;if(E instanceof Po)return Hr;if(Array.isArray(E)){for(var A,D=E.length,Z=0,se=E;Z<se.length;Z+=1){var ge=Va(se[Z]);if(A){if(A===ge)continue;A=$t;break}A=ge}return wr(A||$t,D)}return er}function ws(E){var A=typeof E;return E===null?"":A==="string"||A==="number"||A==="boolean"?String(E):E instanceof Yn||E instanceof so||E instanceof Po?E.toString():JSON.stringify(E)}Po.prototype.toString=function(){return this.name},Po.fromString=function(E){return E?new Po({name:E,available:!1}):null},Po.prototype.serialize=function(){return["image",this.name]};var ps=function(A,D){this.type=A,this.value=D};ps.parse=function(E,A){if(E.length!==2)return A.error("'literal' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(!So(E[1]))return A.error("invalid value");var D=E[1],Z=Va(D),se=A.expectedType;return Z.kind!=="array"||Z.N!==0||!se||se.kind!=="array"||typeof se.N=="number"&&se.N!==0||(Z=se),new ps(Z,D)},ps.prototype.evaluate=function(){return this.value},ps.prototype.eachChild=function(){},ps.prototype.outputDefined=function(){return!0},ps.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Yn?["rgba"].concat(this.value.toArray()):this.value instanceof so?this.value.serialize():this.value};var Ao=function(A){this.name="ExpressionEvaluationError",this.message=A};Ao.prototype.toJSON=function(){return this.message};var zs={string:An,number:lr,boolean:On,object:er},Qa=function(A,D){this.type=A,this.args=D};Qa.parse=function(E,A){if(E.length<2)return A.error("Expected at least one argument.");var D,Z=1,se=E[0];if(se==="array"){var ge,Te;if(E.length>2){var je=E[1];if(typeof je!="string"||!(je in zs)||je==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);ge=zs[je],Z++}else ge=$t;if(E.length>3){if(E[2]!==null&&(typeof E[2]!="number"||E[2]<0||E[2]!==Math.floor(E[2])))return A.error('The length argument to "array" must be a positive integer literal',2);Te=E[2],Z++}D=wr(ge,Te)}else D=zs[se];for(var Ze=[];Z<E.length;Z++){var pt=A.parse(E[Z],Z,$t);if(!pt)return null;Ze.push(pt)}return new Qa(D,Ze)},Qa.prototype.evaluate=function(E){for(var A=0;A<this.args.length;A++){var D=this.args[A].evaluate(E);if(!tn(this.type,Va(D)))return D;if(A===this.args.length-1)throw new Ao("Expected value to be of type "+Ur(this.type)+", but found "+Ur(Va(D))+" instead.")}return null},Qa.prototype.eachChild=function(E){this.args.forEach(E)},Qa.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},Qa.prototype.serialize=function(){var E=this.type,A=[E.kind];if(E.kind==="array"){var D=E.itemType;if(D.kind==="string"||D.kind==="number"||D.kind==="boolean"){A.push(D.kind);var Z=E.N;(typeof Z=="number"||this.args.length>1)&&A.push(Z)}}return A.concat(this.args.map(function(se){return se.serialize()}))};var fs=function(A){this.type=Mr,this.sections=A};fs.parse=function(E,A){if(E.length<2)return A.error("Expected at least one argument.");var D=E[1];if(!Array.isArray(D)&&typeof D=="object")return A.error("First argument must be an image or text section.");for(var Z=[],se=!1,ge=1;ge<=E.length-1;++ge){var Te=E[ge];if(se&&typeof Te=="object"&&!Array.isArray(Te)){se=!1;var je=null;if(Te["font-scale"]&&!(je=A.parse(Te["font-scale"],1,lr)))return null;var Ze=null;if(Te["text-font"]&&!(Ze=A.parse(Te["text-font"],1,wr(An))))return null;var pt=null;if(Te["text-color"]&&!(pt=A.parse(Te["text-color"],1,Mt)))return null;var wt=Z[Z.length-1];wt.scale=je,wt.font=Ze,wt.textColor=pt}else{var Wt=A.parse(E[ge],1,$t);if(!Wt)return null;var Xt=Wt.type.kind;if(Xt!=="string"&&Xt!=="value"&&Xt!=="null"&&Xt!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");se=!0,Z.push({content:Wt,scale:null,font:null,textColor:null})}}return new fs(Z)},fs.prototype.evaluate=function(E){return new so(this.sections.map(function(A){var D=A.content.evaluate(E);return Va(D)===Hr?new $a("",D,null,null,null):new $a(ws(D),null,A.scale?A.scale.evaluate(E):null,A.font?A.font.evaluate(E).join(","):null,A.textColor?A.textColor.evaluate(E):null)}))},fs.prototype.eachChild=function(E){for(var A=0,D=this.sections;A<D.length;A+=1){var Z=D[A];E(Z.content),Z.scale&&E(Z.scale),Z.font&&E(Z.font),Z.textColor&&E(Z.textColor)}},fs.prototype.outputDefined=function(){return!1},fs.prototype.serialize=function(){for(var E=["format"],A=0,D=this.sections;A<D.length;A+=1){var Z=D[A];E.push(Z.content.serialize());var se={};Z.scale&&(se["font-scale"]=Z.scale.serialize()),Z.font&&(se["text-font"]=Z.font.serialize()),Z.textColor&&(se["text-color"]=Z.textColor.serialize()),E.push(se)}return E};var Vs=function(A){this.type=Hr,this.input=A};Vs.parse=function(E,A){if(E.length!==2)return A.error("Expected two arguments.");var D=A.parse(E[1],1,An);return D?new Vs(D):A.error("No image name provided.")},Vs.prototype.evaluate=function(E){var A=this.input.evaluate(E),D=Po.fromString(A);return D&&E.availableImages&&(D.available=E.availableImages.indexOf(A)>-1),D},Vs.prototype.eachChild=function(E){E(this.input)},Vs.prototype.outputDefined=function(){return!1},Vs.prototype.serialize=function(){return["image",this.input.serialize()]};var Ju={"to-boolean":On,"to-color":Mt,"to-number":lr,"to-string":An},ts=function(A,D){this.type=A,this.args=D};ts.parse=function(E,A){if(E.length<2)return A.error("Expected at least one argument.");var D=E[0];if((D==="to-boolean"||D==="to-string")&&E.length!==2)return A.error("Expected one argument.");for(var Z=Ju[D],se=[],ge=1;ge<E.length;ge++){var Te=A.parse(E[ge],ge,$t);if(!Te)return null;se.push(Te)}return new ts(Z,se)},ts.prototype.evaluate=function(E){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(E));if(this.type.kind==="color"){for(var A,D,Z=0,se=this.args;Z<se.length;Z+=1){if(D=null,(A=se[Z].evaluate(E))instanceof Yn)return A;if(typeof A=="string"){var ge=E.parseColor(A);if(ge)return ge}else if(Array.isArray(A)&&!(D=A.length<3||A.length>4?"Invalid rbga value "+JSON.stringify(A)+": expected an array containing either three or four numeric values.":Ro(A[0],A[1],A[2],A[3])))return new Yn(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Ao(D||"Could not parse color from value '"+(typeof A=="string"?A:String(JSON.stringify(A)))+"'")}if(this.type.kind==="number"){for(var Te=null,je=0,Ze=this.args;je<Ze.length;je+=1){if((Te=Ze[je].evaluate(E))===null)return 0;var pt=Number(Te);if(!isNaN(pt))return pt}throw new Ao("Could not convert "+JSON.stringify(Te)+" to number.")}return this.type.kind==="formatted"?so.fromString(ws(this.args[0].evaluate(E))):this.type.kind==="resolvedImage"?Po.fromString(ws(this.args[0].evaluate(E))):ws(this.args[0].evaluate(E))},ts.prototype.eachChild=function(E){this.args.forEach(E)},ts.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ts.prototype.serialize=function(){if(this.type.kind==="formatted")return new fs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vs(this.args[0]).serialize();var E=["to-"+this.type.kind];return this.eachChild(function(A){E.push(A.serialize())}),E};var Zs=["Unknown","Point","LineString","Polygon"],ys=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ys.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ys.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zs[this.feature.type]:this.feature.type:null},ys.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ys.prototype.canonicalID=function(){return this.canonical},ys.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ys.prototype.parseColor=function(E){var A=this._parseColorCache[E];return A||(A=this._parseColorCache[E]=Yn.parse(E)),A};var Lt=function(A,D,Z,se){this.name=A,this.type=D,this._evaluate=Z,this.args=se};Lt.prototype.evaluate=function(E){return this._evaluate(E,this.args)},Lt.prototype.eachChild=function(E){this.args.forEach(E)},Lt.prototype.outputDefined=function(){return!1},Lt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(E){return E.serialize()}))},Lt.parse=function(E,A){var D,Z=E[0],se=Lt.definitions[Z];if(!se)return A.error('Unknown expression "'+Z+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ge=Array.isArray(se)?se[0]:se.type,Te=Array.isArray(se)?[[se[1],se[2]]]:se.overloads,je=Te.filter(function(Aa){var da=Aa[0];return!Array.isArray(da)||da.length===E.length-1}),Ze=null,pt=0,wt=je;pt<wt.length;pt+=1){var Wt=wt[pt],Xt=Wt[0],dr=Wt[1];Ze=new bs(A.registry,A.path,null,A.scope);for(var jr=[],Lr=!1,qr=1;qr<E.length;qr++){var Jr=E[qr],Cn=Array.isArray(Xt)?Xt[qr-1]:Xt.type,Un=Ze.parse(Jr,1+jr.length,Cn);if(!Un){Lr=!0;break}jr.push(Un)}if(!Lr)if(Array.isArray(Xt)&&Xt.length!==jr.length)Ze.error("Expected "+Xt.length+" arguments, but found "+jr.length+" instead.");else{for(var Jn=0;Jn<jr.length;Jn++){var yi=Array.isArray(Xt)?Xt[Jn]:Xt.type,hi=jr[Jn];Ze.concat(Jn+1).checkSubtype(yi,hi.type)}if(Ze.errors.length===0)return new Lt(Z,ge,dr,jr)}}if(je.length===1)(D=A.errors).push.apply(D,Ze.errors);else{for(var Xi=(je.length?je:Te).map(function(Aa){var da;return da=Aa[0],Array.isArray(da)?"("+da.map(Ur).join(", ")+")":"("+Ur(da.type)+"...)"}).join(" | "),Zi=[],ba=1;ba<E.length;ba++){var Ma=A.parse(E[ba],1+Zi.length);if(!Ma)return null;Zi.push(Ur(Ma.type))}A.error("Expected arguments of type "+Xi+", but found ("+Zi.join(", ")+") instead.")}return null},Lt.register=function(E,A){for(var D in Lt.definitions=A,A)E[D]=Lt};var at=function(A,D,Z){this.type=Tr,this.locale=Z,this.caseSensitive=A,this.diacriticSensitive=D};function Ye(E,A){E[0]=Math.min(E[0],A[0]),E[1]=Math.min(E[1],A[1]),E[2]=Math.max(E[2],A[0]),E[3]=Math.max(E[3],A[1])}function St(E,A){return!(E[0]<=A[0]||E[2]>=A[2]||E[1]<=A[1]||E[3]>=A[3])}function fr(E,A){var D=(180+E[0])/360,Z=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E[1]*Math.PI/360)))/360,se=Math.pow(2,A.z);return[Math.round(D*se*8192),Math.round(Z*se*8192)]}function Gr(E,A,D){return A[1]>E[1]!=D[1]>E[1]&&E[0]<(D[0]-A[0])*(E[1]-A[1])/(D[1]-A[1])+A[0]}function hn(E,A){for(var D,Z,se,ge,Te,je,Ze,pt=!1,wt=0,Wt=A.length;wt<Wt;wt++)for(var Xt=A[wt],dr=0,jr=Xt.length;dr<jr-1;dr++){if((ge=(D=E)[0]-(Z=Xt[dr])[0])*(Ze=D[1]-(se=Xt[dr+1])[1])-(je=D[0]-se[0])*(Te=D[1]-Z[1])==0&&ge*je<=0&&Te*Ze<=0)return!1;Gr(E,Xt[dr],Xt[dr+1])&&(pt=!pt)}return pt}function un(E,A){for(var D=0;D<A.length;D++)if(hn(E,A[D]))return!0;return!1}function Qn(E,A,D,Z){var se=Z[0]-D[0],ge=Z[1]-D[1],Te=(E[0]-D[0])*ge-se*(E[1]-D[1]),je=(A[0]-D[0])*ge-se*(A[1]-D[1]);return Te>0&&je<0||Te<0&&je>0}function Ai(E,A,D){for(var Z=0,se=D;Z<se.length;Z+=1)for(var ge=se[Z],Te=0;Te<ge.length-1;++Te)if((Wt=[(wt=ge[Te+1])[0]-(pt=ge[Te])[0],wt[1]-pt[1]])[0]*(Xt=[(Ze=A)[0]-(je=E)[0],Ze[1]-je[1]])[1]-Wt[1]*Xt[0]!=0&&Qn(je,Ze,pt,wt)&&Qn(pt,wt,je,Ze))return!0;var je,Ze,pt,wt,Wt,Xt;return!1}function bi(E,A){for(var D=0;D<E.length;++D)if(!hn(E[D],A))return!1;for(var Z=0;Z<E.length-1;++Z)if(Ai(E[Z],E[Z+1],A))return!1;return!0}function na(E,A){for(var D=0;D<A.length;D++)if(bi(E,A[D]))return!0;return!1}function Oa(E,A,D){for(var Z=[],se=0;se<E.length;se++){for(var ge=[],Te=0;Te<E[se].length;Te++){var je=fr(E[se][Te],D);Ye(A,je),ge.push(je)}Z.push(ge)}return Z}function fo(E,A,D){for(var Z=[],se=0;se<E.length;se++){var ge=Oa(E[se],A,D);Z.push(ge)}return Z}function uo(E,A,D,Z){if(E[0]<D[0]||E[0]>D[2]){var se=.5*Z,ge=E[0]-D[0]>se?-Z:D[0]-E[0]>se?Z:0;ge===0&&(ge=E[0]-D[2]>se?-Z:D[2]-E[0]>se?Z:0),E[0]+=ge}Ye(A,E)}function Uo(E,A,D,Z){for(var se=8192*Math.pow(2,Z.z),ge=[8192*Z.x,8192*Z.y],Te=[],je=0,Ze=E;je<Ze.length;je+=1)for(var pt=0,wt=Ze[je];pt<wt.length;pt+=1){var Wt=wt[pt],Xt=[Wt.x+ge[0],Wt.y+ge[1]];uo(Xt,A,D,se),Te.push(Xt)}return Te}function lo(E,A,D,Z){for(var se,ge=8192*Math.pow(2,Z.z),Te=[8192*Z.x,8192*Z.y],je=[],Ze=0,pt=E;Ze<pt.length;Ze+=1){for(var wt=[],Wt=0,Xt=pt[Ze];Wt<Xt.length;Wt+=1){var dr=Xt[Wt],jr=[dr.x+Te[0],dr.y+Te[1]];Ye(A,jr),wt.push(jr)}je.push(wt)}if(A[2]-A[0]<=ge/2){(se=A)[0]=se[1]=1/0,se[2]=se[3]=-1/0;for(var Lr=0,qr=je;Lr<qr.length;Lr+=1)for(var Jr=0,Cn=qr[Lr];Jr<Cn.length;Jr+=1)uo(Cn[Jr],A,D,ge)}return je}at.parse=function(E,A){if(E.length!==2)return A.error("Expected one argument.");var D=E[1];if(typeof D!="object"||Array.isArray(D))return A.error("Collator options argument must be an object.");var Z=A.parse(D["case-sensitive"]!==void 0&&D["case-sensitive"],1,On);if(!Z)return null;var se=A.parse(D["diacritic-sensitive"]!==void 0&&D["diacritic-sensitive"],1,On);if(!se)return null;var ge=null;return D.locale&&!(ge=A.parse(D.locale,1,An))?null:new at(Z,se,ge)},at.prototype.evaluate=function(E){return new wi(this.caseSensitive.evaluate(E),this.diacriticSensitive.evaluate(E),this.locale?this.locale.evaluate(E):null)},at.prototype.eachChild=function(E){E(this.caseSensitive),E(this.diacriticSensitive),this.locale&&E(this.locale)},at.prototype.outputDefined=function(){return!1},at.prototype.serialize=function(){var E={};return E["case-sensitive"]=this.caseSensitive.serialize(),E["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(E.locale=this.locale.serialize()),["collator",E]};var go=function(A,D){this.type=On,this.geojson=A,this.geometries=D};function Ho(E){if(E instanceof Lt&&(E.name==="get"&&E.args.length===1||E.name==="feature-state"||E.name==="has"&&E.args.length===1||E.name==="properties"||E.name==="geometry-type"||E.name==="id"||/^filter-/.test(E.name))||E instanceof go)return!1;var A=!0;return E.eachChild(function(D){A&&!Ho(D)&&(A=!1)}),A}function Qo(E){if(E instanceof Lt&&E.name==="feature-state")return!1;var A=!0;return E.eachChild(function(D){A&&!Qo(D)&&(A=!1)}),A}function Go(E,A){if(E instanceof Lt&&A.indexOf(E.name)>=0)return!1;var D=!0;return E.eachChild(function(Z){D&&!Go(Z,A)&&(D=!1)}),D}go.parse=function(E,A){if(E.length!==2)return A.error("'within' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(So(E[1])){var D=E[1];if(D.type==="FeatureCollection")for(var Z=0;Z<D.features.length;++Z){var se=D.features[Z].geometry.type;if(se==="Polygon"||se==="MultiPolygon")return new go(D,D.features[Z].geometry)}else if(D.type==="Feature"){var ge=D.geometry.type;if(ge==="Polygon"||ge==="MultiPolygon")return new go(D,D.geometry)}else if(D.type==="Polygon"||D.type==="MultiPolygon")return new go(D,D)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")},go.prototype.evaluate=function(E){if(E.geometry()!=null&&E.canonicalID()!=null){if(E.geometryType()==="Point")return function(A,D){var Z=[1/0,1/0,-1/0,-1/0],se=[1/0,1/0,-1/0,-1/0],ge=A.canonicalID();if(D.type==="Polygon"){var Te=Oa(D.coordinates,se,ge),je=Uo(A.geometry(),Z,se,ge);if(!St(Z,se))return!1;for(var Ze=0,pt=je;Ze<pt.length;Ze+=1)if(!hn(pt[Ze],Te))return!1}if(D.type==="MultiPolygon"){var wt=fo(D.coordinates,se,ge),Wt=Uo(A.geometry(),Z,se,ge);if(!St(Z,se))return!1;for(var Xt=0,dr=Wt;Xt<dr.length;Xt+=1)if(!un(dr[Xt],wt))return!1}return!0}(E,this.geometries);if(E.geometryType()==="LineString")return function(A,D){var Z=[1/0,1/0,-1/0,-1/0],se=[1/0,1/0,-1/0,-1/0],ge=A.canonicalID();if(D.type==="Polygon"){var Te=Oa(D.coordinates,se,ge),je=lo(A.geometry(),Z,se,ge);if(!St(Z,se))return!1;for(var Ze=0,pt=je;Ze<pt.length;Ze+=1)if(!bi(pt[Ze],Te))return!1}if(D.type==="MultiPolygon"){var wt=fo(D.coordinates,se,ge),Wt=lo(A.geometry(),Z,se,ge);if(!St(Z,se))return!1;for(var Xt=0,dr=Wt;Xt<dr.length;Xt+=1)if(!na(dr[Xt],wt))return!1}return!0}(E,this.geometries)}return!1},go.prototype.eachChild=function(){},go.prototype.outputDefined=function(){return!0},go.prototype.serialize=function(){return["within",this.geojson]};var _s=function(A,D){this.type=D.type,this.name=A,this.boundExpression=D};_s.parse=function(E,A){if(E.length!==2||typeof E[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");var D=E[1];return A.scope.has(D)?new _s(D,A.scope.get(D)):A.error('Unknown variable "'+D+'". Make sure "'+D+'" has been bound in an enclosing "let" expression before using it.',1)},_s.prototype.evaluate=function(E){return this.boundExpression.evaluate(E)},_s.prototype.eachChild=function(){},_s.prototype.outputDefined=function(){return!1},_s.prototype.serialize=function(){return["var",this.name]};var bs=function(A,D,Z,se,ge){D===void 0&&(D=[]),se===void 0&&(se=new mn),ge===void 0&&(ge=[]),this.registry=A,this.path=D,this.key=D.map(function(Te){return"["+Te+"]"}).join(""),this.scope=se,this.errors=ge,this.expectedType=Z};function Ks(E,A){for(var D,Z=E.length-1,se=0,ge=Z,Te=0;se<=ge;)if((D=E[Te=Math.floor((se+ge)/2)])<=A){if(Te===Z||A<E[Te+1])return Te;se=Te+1}else{if(!(D>A))throw new Ao("Input is not a number.");ge=Te-1}return 0}bs.prototype.parse=function(E,A,D,Z,se){return se===void 0&&(se={}),A?this.concat(A,D,Z)._parse(E,se):this._parse(E,se)},bs.prototype._parse=function(E,A){function D(pt,wt,Wt){return Wt==="assert"?new Qa(wt,[pt]):Wt==="coerce"?new ts(wt,[pt]):pt}if(E!==null&&typeof E!="string"&&typeof E!="boolean"&&typeof E!="number"||(E=["literal",E]),Array.isArray(E)){if(E.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var Z=E[0];if(typeof Z!="string")return this.error("Expression name must be a string, but found "+typeof Z+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var se=this.registry[Z];if(se){var ge=se.parse(E,this);if(!ge)return null;if(this.expectedType){var Te=this.expectedType,je=ge.type;if(Te.kind!=="string"&&Te.kind!=="number"&&Te.kind!=="boolean"&&Te.kind!=="object"&&Te.kind!=="array"||je.kind!=="value")if(Te.kind!=="color"&&Te.kind!=="formatted"&&Te.kind!=="resolvedImage"||je.kind!=="value"&&je.kind!=="string"){if(this.checkSubtype(Te,je))return null}else ge=D(ge,Te,A.typeAnnotation||"coerce");else ge=D(ge,Te,A.typeAnnotation||"assert")}if(!(ge instanceof ps)&&ge.type.kind!=="resolvedImage"&&function pt(wt){if(wt instanceof _s)return pt(wt.boundExpression);if(wt instanceof Lt&&wt.name==="error"||wt instanceof at||wt instanceof go)return!1;var Wt=wt instanceof ts||wt instanceof Qa,Xt=!0;return wt.eachChild(function(dr){Xt=Wt?Xt&&pt(dr):Xt&&dr instanceof ps}),!!Xt&&Ho(wt)&&Go(wt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(ge)){var Ze=new ys;try{ge=new ps(ge.type,ge.evaluate(Ze))}catch(pt){return this.error(pt.message),null}}return ge}return this.error('Unknown expression "'+Z+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(E===void 0?"'undefined' value invalid. Use null instead.":typeof E=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof E+" instead.")},bs.prototype.concat=function(E,A,D){var Z=typeof E=="number"?this.path.concat(E):this.path,se=D?this.scope.concat(D):this.scope;return new bs(this.registry,Z,A||null,se,this.errors)},bs.prototype.error=function(E){for(var A=[],D=arguments.length-1;D-- >0;)A[D]=arguments[D+1];var Z=""+this.key+A.map(function(se){return"["+se+"]"}).join("");this.errors.push(new Cr(Z,E))},bs.prototype.checkSubtype=function(E,A){var D=tn(E,A);return D&&this.error(D),D};var Yo=function(A,D,Z){this.type=A,this.input=D,this.labels=[],this.outputs=[];for(var se=0,ge=Z;se<ge.length;se+=1){var Te=ge[se],je=Te[1];this.labels.push(Te[0]),this.outputs.push(je)}};function mo(E,A,D){return E*(1-D)+A*D}Yo.parse=function(E,A){if(E.length-1<4)return A.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!=0)return A.error("Expected an even number of arguments.");var D=A.parse(E[1],1,lr);if(!D)return null;var Z=[],se=null;A.expectedType&&A.expectedType.kind!=="value"&&(se=A.expectedType);for(var ge=1;ge<E.length;ge+=2){var Te=ge===1?-1/0:E[ge],je=E[ge+1],Ze=ge,pt=ge+1;if(typeof Te!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ze);if(Z.length&&Z[Z.length-1][0]>=Te)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ze);var wt=A.parse(je,pt,se);if(!wt)return null;se=se||wt.type,Z.push([Te,wt])}return new Yo(se,D,Z)},Yo.prototype.evaluate=function(E){var A=this.labels,D=this.outputs;if(A.length===1)return D[0].evaluate(E);var Z=this.input.evaluate(E);if(Z<=A[0])return D[0].evaluate(E);var se=A.length;return Z>=A[se-1]?D[se-1].evaluate(E):D[Ks(A,Z)].evaluate(E)},Yo.prototype.eachChild=function(E){E(this.input);for(var A=0,D=this.outputs;A<D.length;A+=1)E(D[A])},Yo.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},Yo.prototype.serialize=function(){for(var E=["step",this.input.serialize()],A=0;A<this.labels.length;A++)A>0&&E.push(this.labels[A]),E.push(this.outputs[A].serialize());return E};var Rs=Object.freeze({__proto__:null,number:mo,color:function(A,D,Z){return new Yn(mo(A.r,D.r,Z),mo(A.g,D.g,Z),mo(A.b,D.b,Z),mo(A.a,D.a,Z))},array:function(A,D,Z){return A.map(function(se,ge){return mo(se,D[ge],Z)})}}),rs=6/29*3*(6/29),Za=Math.PI/180,qa=180/Math.PI;function Fs(E){return E>.008856451679035631?Math.pow(E,1/3):E/rs+4/29}function Ou(E){return E>6/29?E*E*E:rs*(E-4/29)}function Ws(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function nl(E){return(E/=255)<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function Bu(E){var A=nl(E.r),D=nl(E.g),Z=nl(E.b),se=Fs((.4124564*A+.3575761*D+.1804375*Z)/.95047),ge=Fs((.2126729*A+.7151522*D+.072175*Z)/1);return{l:116*ge-16,a:500*(se-ge),b:200*(ge-Fs((.0193339*A+.119192*D+.9503041*Z)/1.08883)),alpha:E.a}}function su(E){var A=(E.l+16)/116,D=isNaN(E.a)?A:A+E.a/500,Z=isNaN(E.b)?A:A-E.b/200;return A=1*Ou(A),D=.95047*Ou(D),Z=1.08883*Ou(Z),new Yn(Ws(3.2404542*D-1.5371385*A-.4985314*Z),Ws(-.969266*D+1.8760108*A+.041556*Z),Ws(.0556434*D-.2040259*A+1.0572252*Z),E.alpha)}function zu(E,A,D){var Z=A-E;return E+D*(Z>180||Z<-180?Z-360*Math.round(Z/360):Z)}var uu={forward:Bu,reverse:su,interpolate:function(A,D,Z){return{l:mo(A.l,D.l,Z),a:mo(A.a,D.a,Z),b:mo(A.b,D.b,Z),alpha:mo(A.alpha,D.alpha,Z)}}},hu={forward:function(A){var D=Bu(A),Z=D.l,se=D.a,ge=D.b,Te=Math.atan2(ge,se)*qa;return{h:Te<0?Te+360:Te,c:Math.sqrt(se*se+ge*ge),l:Z,alpha:A.a}},reverse:function(A){var D=A.h*Za,Z=A.c;return su({l:A.l,a:Math.cos(D)*Z,b:Math.sin(D)*Z,alpha:A.alpha})},interpolate:function(A,D,Z){return{h:zu(A.h,D.h,Z),c:mo(A.c,D.c,Z),l:mo(A.l,D.l,Z),alpha:mo(A.alpha,D.alpha,Z)}}},Qu=Object.freeze({__proto__:null,lab:uu,hcl:hu}),qo=function(A,D,Z,se,ge){this.type=A,this.operator=D,this.interpolation=Z,this.input=se,this.labels=[],this.outputs=[];for(var Te=0,je=ge;Te<je.length;Te+=1){var Ze=je[Te],pt=Ze[1];this.labels.push(Ze[0]),this.outputs.push(pt)}};function du(E,A,D,Z){var se=Z-D,ge=E-D;return se===0?0:A===1?ge/se:(Math.pow(A,ge)-1)/(Math.pow(A,se)-1)}qo.interpolationFactor=function(E,A,D,Z){var se=0;if(E.name==="exponential")se=du(A,E.base,D,Z);else if(E.name==="linear")se=du(A,1,D,Z);else if(E.name==="cubic-bezier"){var ge=E.controlPoints;se=new v(ge[0],ge[1],ge[2],ge[3]).solve(du(A,1,D,Z))}return se},qo.parse=function(E,A){var D=E[0],Z=E[1],se=E[2],ge=E.slice(3);if(!Array.isArray(Z)||Z.length===0)return A.error("Expected an interpolation type expression.",1);if(Z[0]==="linear")Z={name:"linear"};else if(Z[0]==="exponential"){var Te=Z[1];if(typeof Te!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);Z={name:"exponential",base:Te}}else{if(Z[0]!=="cubic-bezier")return A.error("Unknown interpolation type "+String(Z[0]),1,0);var je=Z.slice(1);if(je.length!==4||je.some(function(qr){return typeof qr!="number"||qr<0||qr>1}))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Z={name:"cubic-bezier",controlPoints:je}}if(E.length-1<4)return A.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(!(se=A.parse(se,2,lr)))return null;var Ze=[],pt=null;D==="interpolate-hcl"||D==="interpolate-lab"?pt=Mt:A.expectedType&&A.expectedType.kind!=="value"&&(pt=A.expectedType);for(var wt=0;wt<ge.length;wt+=2){var Wt=ge[wt],Xt=ge[wt+1],dr=wt+3,jr=wt+4;if(typeof Wt!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',dr);if(Ze.length&&Ze[Ze.length-1][0]>=Wt)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',dr);var Lr=A.parse(Xt,jr,pt);if(!Lr)return null;pt=pt||Lr.type,Ze.push([Wt,Lr])}return pt.kind==="number"||pt.kind==="color"||pt.kind==="array"&&pt.itemType.kind==="number"&&typeof pt.N=="number"?new qo(pt,D,Z,se,Ze):A.error("Type "+Ur(pt)+" is not interpolatable.")},qo.prototype.evaluate=function(E){var A=this.labels,D=this.outputs;if(A.length===1)return D[0].evaluate(E);var Z=this.input.evaluate(E);if(Z<=A[0])return D[0].evaluate(E);var se=A.length;if(Z>=A[se-1])return D[se-1].evaluate(E);var ge=Ks(A,Z),Te=qo.interpolationFactor(this.interpolation,Z,A[ge],A[ge+1]),je=D[ge].evaluate(E),Ze=D[ge+1].evaluate(E);return this.operator==="interpolate"?Rs[this.type.kind.toLowerCase()](je,Ze,Te):this.operator==="interpolate-hcl"?hu.reverse(hu.interpolate(hu.forward(je),hu.forward(Ze),Te)):uu.reverse(uu.interpolate(uu.forward(je),uu.forward(Ze),Te))},qo.prototype.eachChild=function(E){E(this.input);for(var A=0,D=this.outputs;A<D.length;A+=1)E(D[A])},qo.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},qo.prototype.serialize=function(){var E;E=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var A=[this.operator,E,this.input.serialize()],D=0;D<this.labels.length;D++)A.push(this.labels[D],this.outputs[D].serialize());return A};var ns=function(A,D){this.type=A,this.args=D};ns.parse=function(E,A){if(E.length<2)return A.error("Expectected at least one argument.");var D=null,Z=A.expectedType;Z&&Z.kind!=="value"&&(D=Z);for(var se=[],ge=0,Te=E.slice(1);ge<Te.length;ge+=1){var je=A.parse(Te[ge],1+se.length,D,void 0,{typeAnnotation:"omit"});if(!je)return null;D=D||je.type,se.push(je)}var Ze=Z&&se.some(function(pt){return tn(Z,pt.type)});return new ns(Ze?$t:D,se)},ns.prototype.evaluate=function(E){for(var A,D=null,Z=0,se=0,ge=this.args;se<ge.length&&(Z++,(D=ge[se].evaluate(E))&&D instanceof Po&&!D.available&&(A||(A=D.name),D=null,Z===this.args.length&&(D=A)),D===null);se+=1);return D},ns.prototype.eachChild=function(E){this.args.forEach(E)},ns.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ns.prototype.serialize=function(){var E=["coalesce"];return this.eachChild(function(A){E.push(A.serialize())}),E};var ru=function(A,D){this.type=D.type,this.bindings=[].concat(A),this.result=D};ru.prototype.evaluate=function(E){return this.result.evaluate(E)},ru.prototype.eachChild=function(E){for(var A=0,D=this.bindings;A<D.length;A+=1)E(D[A][1]);E(this.result)},ru.parse=function(E,A){if(E.length<4)return A.error("Expected at least 3 arguments, but found "+(E.length-1)+" instead.");for(var D=[],Z=1;Z<E.length-1;Z+=2){var se=E[Z];if(typeof se!="string")return A.error("Expected string, but found "+typeof se+" instead.",Z);if(/[^a-zA-Z0-9_]/.test(se))return A.error("Variable names must contain only alphanumeric characters or '_'.",Z);var ge=A.parse(E[Z+1],Z+1);if(!ge)return null;D.push([se,ge])}var Te=A.parse(E[E.length-1],E.length-1,A.expectedType,D);return Te?new ru(D,Te):null},ru.prototype.outputDefined=function(){return this.result.outputDefined()},ru.prototype.serialize=function(){for(var E=["let"],A=0,D=this.bindings;A<D.length;A+=1){var Z=D[A];E.push(Z[0],Z[1].serialize())}return E.push(this.result.serialize()),E};var _u=function(A,D,Z){this.type=A,this.index=D,this.input=Z};_u.parse=function(E,A){if(E.length!==3)return A.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var D=A.parse(E[1],1,lr),Z=A.parse(E[2],2,wr(A.expectedType||$t));return D&&Z?new _u(Z.type.itemType,D,Z):null},_u.prototype.evaluate=function(E){var A=this.index.evaluate(E),D=this.input.evaluate(E);if(A<0)throw new Ao("Array index out of bounds: "+A+" < 0.");if(A>=D.length)throw new Ao("Array index out of bounds: "+A+" > "+(D.length-1)+".");if(A!==Math.floor(A))throw new Ao("Array index must be an integer, but found "+A+" instead.");return D[A]},_u.prototype.eachChild=function(E){E(this.index),E(this.input)},_u.prototype.outputDefined=function(){return!1},_u.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Hs=function(A,D){this.type=On,this.needle=A,this.haystack=D};Hs.parse=function(E,A){if(E.length!==3)return A.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var D=A.parse(E[1],1,$t),Z=A.parse(E[2],2,$t);return D&&Z?Rr(D.type,[On,An,lr,xn,$t])?new Hs(D,Z):A.error("Expected first argument to be of type boolean, string, number or null, but found "+Ur(D.type)+" instead"):null},Hs.prototype.evaluate=function(E){var A=this.needle.evaluate(E),D=this.haystack.evaluate(E);if(!D)return!1;if(!Nn(A,["boolean","string","number","null"]))throw new Ao("Expected first argument to be of type boolean, string, number or null, but found "+Ur(Va(A))+" instead.");if(!Nn(D,["string","array"]))throw new Ao("Expected second argument to be of type array or string, but found "+Ur(Va(D))+" instead.");return D.indexOf(A)>=0},Hs.prototype.eachChild=function(E){E(this.needle),E(this.haystack)},Hs.prototype.outputDefined=function(){return!0},Hs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ns=function(A,D,Z){this.type=lr,this.needle=A,this.haystack=D,this.fromIndex=Z};Ns.parse=function(E,A){if(E.length<=2||E.length>=5)return A.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var D=A.parse(E[1],1,$t),Z=A.parse(E[2],2,$t);if(!D||!Z)return null;if(!Rr(D.type,[On,An,lr,xn,$t]))return A.error("Expected first argument to be of type boolean, string, number or null, but found "+Ur(D.type)+" instead");if(E.length===4){var se=A.parse(E[3],3,lr);return se?new Ns(D,Z,se):null}return new Ns(D,Z)},Ns.prototype.evaluate=function(E){var A=this.needle.evaluate(E),D=this.haystack.evaluate(E);if(!Nn(A,["boolean","string","number","null"]))throw new Ao("Expected first argument to be of type boolean, string, number or null, but found "+Ur(Va(A))+" instead.");if(!Nn(D,["string","array"]))throw new Ao("Expected second argument to be of type array or string, but found "+Ur(Va(D))+" instead.");if(this.fromIndex){var Z=this.fromIndex.evaluate(E);return D.indexOf(A,Z)}return D.indexOf(A)},Ns.prototype.eachChild=function(E){E(this.needle),E(this.haystack),this.fromIndex&&E(this.fromIndex)},Ns.prototype.outputDefined=function(){return!1},Ns.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var E=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),E]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Js=function(A,D,Z,se,ge,Te){this.inputType=A,this.type=D,this.input=Z,this.cases=se,this.outputs=ge,this.otherwise=Te};Js.parse=function(E,A){if(E.length<5)return A.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if(E.length%2!=1)return A.error("Expected an even number of arguments.");var D,Z;A.expectedType&&A.expectedType.kind!=="value"&&(Z=A.expectedType);for(var se={},ge=[],Te=2;Te<E.length-1;Te+=2){var je=E[Te],Ze=E[Te+1];Array.isArray(je)||(je=[je]);var pt=A.concat(Te);if(je.length===0)return pt.error("Expected at least one branch label.");for(var wt=0,Wt=je;wt<Wt.length;wt+=1){var Xt=Wt[wt];if(typeof Xt!="number"&&typeof Xt!="string")return pt.error("Branch labels must be numbers or strings.");if(typeof Xt=="number"&&Math.abs(Xt)>Number.MAX_SAFE_INTEGER)return pt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Xt=="number"&&Math.floor(Xt)!==Xt)return pt.error("Numeric branch labels must be integer values.");if(D){if(pt.checkSubtype(D,Va(Xt)))return null}else D=Va(Xt);if(se[String(Xt)]!==void 0)return pt.error("Branch labels must be unique.");se[String(Xt)]=ge.length}var dr=A.parse(Ze,Te,Z);if(!dr)return null;Z=Z||dr.type,ge.push(dr)}var jr=A.parse(E[1],1,$t);if(!jr)return null;var Lr=A.parse(E[E.length-1],E.length-1,Z);return Lr?jr.type.kind!=="value"&&A.concat(1).checkSubtype(D,jr.type)?null:new Js(D,Z,jr,se,ge,Lr):null},Js.prototype.evaluate=function(E){var A=this.input.evaluate(E);return(Va(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(E)},Js.prototype.eachChild=function(E){E(this.input),this.outputs.forEach(E),E(this.otherwise)},Js.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})&&this.otherwise.outputDefined()},Js.prototype.serialize=function(){for(var E=this,A=["match",this.input.serialize()],D=[],Z={},se=0,ge=Object.keys(this.cases).sort();se<ge.length;se+=1){var Te=ge[se];(Wt=Z[this.cases[Te]])===void 0?(Z[this.cases[Te]]=D.length,D.push([this.cases[Te],[Te]])):D[Wt][1].push(Te)}for(var je=function(jr){return E.inputType.kind==="number"?Number(jr):jr},Ze=0,pt=D;Ze<pt.length;Ze+=1){var wt=pt[Ze],Wt=wt[0],Xt=wt[1];A.push(Xt.length===1?je(Xt[0]):Xt.map(je)),A.push(this.outputs[outputIndex$1].serialize())}return A.push(this.otherwise.serialize()),A};var Fu=function(A,D,Z){this.type=A,this.branches=D,this.otherwise=Z};Fu.parse=function(E,A){if(E.length<4)return A.error("Expected at least 3 arguments, but found only "+(E.length-1)+".");if(E.length%2!=0)return A.error("Expected an odd number of arguments.");var D;A.expectedType&&A.expectedType.kind!=="value"&&(D=A.expectedType);for(var Z=[],se=1;se<E.length-1;se+=2){var ge=A.parse(E[se],se,On);if(!ge)return null;var Te=A.parse(E[se+1],se+1,D);if(!Te)return null;Z.push([ge,Te]),D=D||Te.type}var je=A.parse(E[E.length-1],E.length-1,D);return je?new Fu(D,Z,je):null},Fu.prototype.evaluate=function(E){for(var A=0,D=this.branches;A<D.length;A+=1){var Z=D[A],se=Z[1];if(Z[0].evaluate(E))return se.evaluate(E)}return this.otherwise.evaluate(E)},Fu.prototype.eachChild=function(E){for(var A=0,D=this.branches;A<D.length;A+=1){var Z=D[A],se=Z[1];E(Z[0]),E(se)}E(this.otherwise)},Fu.prototype.outputDefined=function(){return this.branches.every(function(E){return E[1].outputDefined()})&&this.otherwise.outputDefined()},Fu.prototype.serialize=function(){var E=["case"];return this.eachChild(function(A){E.push(A.serialize())}),E};var vu=function(A,D,Z,se){this.type=A,this.input=D,this.beginIndex=Z,this.endIndex=se};function Vu(E,A){return E==="=="||E==="!="?A.kind==="boolean"||A.kind==="string"||A.kind==="number"||A.kind==="null"||A.kind==="value":A.kind==="string"||A.kind==="number"||A.kind==="value"}function Nu(E,A,D,Z){return Z.compare(A,D)===0}function To(E,A,D){var Z=E!=="=="&&E!=="!=";return function(){function se(ge,Te,je){this.type=On,this.lhs=ge,this.rhs=Te,this.collator=je,this.hasUntypedArgument=ge.type.kind==="value"||Te.type.kind==="value"}return se.parse=function(ge,Te){if(ge.length!==3&&ge.length!==4)return Te.error("Expected two or three arguments.");var je=ge[0],Ze=Te.parse(ge[1],1,$t);if(!Ze)return null;if(!Vu(je,Ze.type))return Te.concat(1).error('"'+je+`" comparisons are not supported for type '`+Ur(Ze.type)+"'.");var pt=Te.parse(ge[2],2,$t);if(!pt)return null;if(!Vu(je,pt.type))return Te.concat(2).error('"'+je+`" comparisons are not supported for type '`+Ur(pt.type)+"'.");if(Ze.type.kind!==pt.type.kind&&Ze.type.kind!=="value"&&pt.type.kind!=="value")return Te.error("Cannot compare types '"+Ur(Ze.type)+"' and '"+Ur(pt.type)+"'.");Z&&(Ze.type.kind==="value"&&pt.type.kind!=="value"?Ze=new Qa(pt.type,[Ze]):Ze.type.kind!=="value"&&pt.type.kind==="value"&&(pt=new Qa(Ze.type,[pt])));var wt=null;if(ge.length===4){if(Ze.type.kind!=="string"&&pt.type.kind!=="string"&&Ze.type.kind!=="value"&&pt.type.kind!=="value")return Te.error("Cannot use collator to compare non-string types.");if(!(wt=Te.parse(ge[3],3,Tr)))return null}return new se(Ze,pt,wt)},se.prototype.evaluate=function(ge){var Te=this.lhs.evaluate(ge),je=this.rhs.evaluate(ge);if(Z&&this.hasUntypedArgument){var Ze=Va(Te),pt=Va(je);if(Ze.kind!==pt.kind||Ze.kind!=="string"&&Ze.kind!=="number")throw new Ao('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+Ze.kind+", "+pt.kind+") instead.")}if(this.collator&&!Z&&this.hasUntypedArgument){var wt=Va(Te),Wt=Va(je);if(wt.kind!=="string"||Wt.kind!=="string")return A(ge,Te,je)}return this.collator?D(ge,Te,je,this.collator.evaluate(ge)):A(ge,Te,je)},se.prototype.eachChild=function(ge){ge(this.lhs),ge(this.rhs),this.collator&&ge(this.collator)},se.prototype.outputDefined=function(){return!0},se.prototype.serialize=function(){var ge=[E];return this.eachChild(function(Te){ge.push(Te.serialize())}),ge},se}()}vu.parse=function(E,A){if(E.length<=2||E.length>=5)return A.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var D=A.parse(E[1],1,$t),Z=A.parse(E[2],2,lr);if(!D||!Z)return null;if(!Rr(D.type,[wr($t),An,$t]))return A.error("Expected first argument to be of type array or string, but found "+Ur(D.type)+" instead");if(E.length===4){var se=A.parse(E[3],3,lr);return se?new vu(D.type,D,Z,se):null}return new vu(D.type,D,Z)},vu.prototype.evaluate=function(E){var A=this.input.evaluate(E),D=this.beginIndex.evaluate(E);if(!Nn(A,["string","array"]))throw new Ao("Expected first argument to be of type array or string, but found "+Ur(Va(A))+" instead.");if(this.endIndex){var Z=this.endIndex.evaluate(E);return A.slice(D,Z)}return A.slice(D)},vu.prototype.eachChild=function(E){E(this.input),E(this.beginIndex),this.endIndex&&E(this.endIndex)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var E=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),E]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Wu=To("==",function(E,A,D){return A===D},Nu),Hu=To("!=",function(E,A,D){return A!==D},function(E,A,D,Z){return!Nu(0,A,D,Z)}),Ru=To("<",function(E,A,D){return A<D},function(E,A,D,Z){return Z.compare(A,D)<0}),$o=To(">",function(E,A,D){return A>D},function(E,A,D,Z){return Z.compare(A,D)>0}),dl=To("<=",function(E,A,D){return A<=D},function(E,A,D,Z){return Z.compare(A,D)<=0}),Gu=To(">=",function(E,A,D){return A>=D},function(E,A,D,Z){return Z.compare(A,D)>=0}),os=function(A,D,Z,se,ge){this.type=An,this.number=A,this.locale=D,this.currency=Z,this.minFractionDigits=se,this.maxFractionDigits=ge};os.parse=function(E,A){if(E.length!==3)return A.error("Expected two arguments.");var D=A.parse(E[1],1,lr);if(!D)return null;var Z=E[2];if(typeof Z!="object"||Array.isArray(Z))return A.error("NumberFormat options argument must be an object.");var se=null;if(Z.locale&&!(se=A.parse(Z.locale,1,An)))return null;var ge=null;if(Z.currency&&!(ge=A.parse(Z.currency,1,An)))return null;var Te=null;if(Z["min-fraction-digits"]&&!(Te=A.parse(Z["min-fraction-digits"],1,lr)))return null;var je=null;return Z["max-fraction-digits"]&&!(je=A.parse(Z["max-fraction-digits"],1,lr))?null:new os(D,se,ge,Te,je)},os.prototype.evaluate=function(E){return new Intl.NumberFormat(this.locale?this.locale.evaluate(E):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(E):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(E):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(E):void 0}).format(this.number.evaluate(E))},os.prototype.eachChild=function(E){E(this.number),this.locale&&E(this.locale),this.currency&&E(this.currency),this.minFractionDigits&&E(this.minFractionDigits),this.maxFractionDigits&&E(this.maxFractionDigits)},os.prototype.outputDefined=function(){return!1},os.prototype.serialize=function(){var E={};return this.locale&&(E.locale=this.locale.serialize()),this.currency&&(E.currency=this.currency.serialize()),this.minFractionDigits&&(E["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(E["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),E]};var Us=function(A){this.type=lr,this.input=A};Us.parse=function(E,A){if(E.length!==2)return A.error("Expected 1 argument, but found "+(E.length-1)+" instead.");var D=A.parse(E[1],1);return D?D.type.kind!=="array"&&D.type.kind!=="string"&&D.type.kind!=="value"?A.error("Expected argument of type string or array, but found "+Ur(D.type)+" instead."):new Us(D):null},Us.prototype.evaluate=function(E){var A=this.input.evaluate(E);if(typeof A=="string"||Array.isArray(A))return A.length;throw new Ao("Expected value to be of type string or array, but found "+Ur(Va(A))+" instead.")},Us.prototype.eachChild=function(E){E(this.input)},Us.prototype.outputDefined=function(){return!1},Us.prototype.serialize=function(){var E=["length"];return this.eachChild(function(A){E.push(A.serialize())}),E};var hs={"==":Wu,"!=":Hu,">":$o,"<":Ru,">=":Gu,"<=":dl,array:Qa,at:_u,boolean:Qa,case:Fu,coalesce:ns,collator:at,format:fs,image:Vs,in:Hs,"index-of":Ns,interpolate:qo,"interpolate-hcl":qo,"interpolate-lab":qo,length:Us,let:ru,literal:ps,match:Js,number:Qa,"number-format":os,object:Qa,slice:vu,step:Yo,string:Qa,"to-boolean":ts,"to-color":ts,"to-number":ts,"to-string":ts,var:_s,within:go};function xs(E,A){var D=A[0],Z=A[1],se=A[2],ge=A[3];D=D.evaluate(E),Z=Z.evaluate(E),se=se.evaluate(E);var Te=ge?ge.evaluate(E):1,je=Ro(D,Z,se,Te);if(je)throw new Ao(je);return new Yn(D/255*Te,Z/255*Te,se/255*Te,Te)}function il(E,A){return E in A}function Tu(E,A){var D=A[E];return D===void 0?null:D}function Is(E){return{type:E}}function lu(E){return{result:"success",value:E}}function bu(E){return{result:"error",value:E}}function nu(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function Be(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function Fr(E){return!!E.expression&&E.expression.interpolated}function jt(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function Vt(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function gt(E){return E}function ar(E,A,D){return E!==void 0?E:A!==void 0?A:D!==void 0?D:void 0}function gr(E,A,D,Z,se){return ar(typeof D===se?Z[D]:void 0,E.default,A.default)}function en(E,A,D){if(jt(D)!=="number")return ar(E.default,A.default);var Z=E.stops.length;if(Z===1||D<=E.stops[0][0])return E.stops[0][1];if(D>=E.stops[Z-1][0])return E.stops[Z-1][1];var se=Ks(E.stops.map(function(ge){return ge[0]}),D);return E.stops[se][1]}function Vr(E,A,D){var Z=E.base!==void 0?E.base:1;if(jt(D)!=="number")return ar(E.default,A.default);var se=E.stops.length;if(se===1||D<=E.stops[0][0])return E.stops[0][1];if(D>=E.stops[se-1][0])return E.stops[se-1][1];var ge=Ks(E.stops.map(function(Wt){return Wt[0]}),D),Te=function(Wt,Xt,dr,jr){var Lr=jr-dr,qr=Wt-dr;return Lr===0?0:Xt===1?qr/Lr:(Math.pow(Xt,qr)-1)/(Math.pow(Xt,Lr)-1)}(D,Z,E.stops[ge][0],E.stops[ge+1][0]),je=E.stops[ge][1],Ze=E.stops[ge+1][1],pt=Rs[A.type]||gt;if(E.colorSpace&&E.colorSpace!=="rgb"){var wt=Qu[E.colorSpace];pt=function(Xt,dr){return wt.reverse(wt.interpolate(wt.forward(Xt),wt.forward(dr),Te))}}return typeof je.evaluate=="function"?{evaluate:function(){for(var Xt=[],dr=arguments.length;dr--;)Xt[dr]=arguments[dr];var jr=je.evaluate.apply(void 0,Xt),Lr=Ze.evaluate.apply(void 0,Xt);if(jr!==void 0&&Lr!==void 0)return pt(jr,Lr,Te)}}:pt(je,Ze,Te)}function on(E,A,D){return A.type==="color"?D=Yn.parse(D):A.type==="formatted"?D=so.fromString(D.toString()):A.type==="resolvedImage"?D=Po.fromString(D.toString()):jt(D)===A.type||A.type==="enum"&&A.values[D]||(D=void 0),ar(D,E.default,A.default)}Lt.register(hs,{error:[{kind:"error"},[An],function(E,A){throw new Ao(A[0].evaluate(E))}],typeof:[An,[$t],function(E,A){return Ur(Va(A[0].evaluate(E)))}],"to-rgba":[wr(lr,4),[Mt],function(E,A){return A[0].evaluate(E).toArray()}],rgb:[Mt,[lr,lr,lr],xs],rgba:[Mt,[lr,lr,lr,lr],xs],has:{type:On,overloads:[[[An],function(E,A){return il(A[0].evaluate(E),E.properties())}],[[An,er],function(E,A){var D=A[1];return il(A[0].evaluate(E),D.evaluate(E))}]]},get:{type:$t,overloads:[[[An],function(E,A){return Tu(A[0].evaluate(E),E.properties())}],[[An,er],function(E,A){var D=A[1];return Tu(A[0].evaluate(E),D.evaluate(E))}]]},"feature-state":[$t,[An],function(E,A){return Tu(A[0].evaluate(E),E.featureState||{})}],properties:[er,[],function(E){return E.properties()}],"geometry-type":[An,[],function(E){return E.geometryType()}],id:[$t,[],function(E){return E.id()}],zoom:[lr,[],function(E){return E.globals.zoom}],"heatmap-density":[lr,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[lr,[],function(E){return E.globals.lineProgress||0}],accumulated:[$t,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[lr,Is(lr),function(E,A){for(var D=0,Z=0,se=A;Z<se.length;Z+=1)D+=se[Z].evaluate(E);return D}],"*":[lr,Is(lr),function(E,A){for(var D=1,Z=0,se=A;Z<se.length;Z+=1)D*=se[Z].evaluate(E);return D}],"-":{type:lr,overloads:[[[lr,lr],function(E,A){var D=A[1];return A[0].evaluate(E)-D.evaluate(E)}],[[lr],function(E,A){return-A[0].evaluate(E)}]]},"/":[lr,[lr,lr],function(E,A){var D=A[1];return A[0].evaluate(E)/D.evaluate(E)}],"%":[lr,[lr,lr],function(E,A){var D=A[1];return A[0].evaluate(E)%D.evaluate(E)}],ln2:[lr,[],function(){return Math.LN2}],pi:[lr,[],function(){return Math.PI}],e:[lr,[],function(){return Math.E}],"^":[lr,[lr,lr],function(E,A){var D=A[1];return Math.pow(A[0].evaluate(E),D.evaluate(E))}],sqrt:[lr,[lr],function(E,A){return Math.sqrt(A[0].evaluate(E))}],log10:[lr,[lr],function(E,A){return Math.log(A[0].evaluate(E))/Math.LN10}],ln:[lr,[lr],function(E,A){return Math.log(A[0].evaluate(E))}],log2:[lr,[lr],function(E,A){return Math.log(A[0].evaluate(E))/Math.LN2}],sin:[lr,[lr],function(E,A){return Math.sin(A[0].evaluate(E))}],cos:[lr,[lr],function(E,A){return Math.cos(A[0].evaluate(E))}],tan:[lr,[lr],function(E,A){return Math.tan(A[0].evaluate(E))}],asin:[lr,[lr],function(E,A){return Math.asin(A[0].evaluate(E))}],acos:[lr,[lr],function(E,A){return Math.acos(A[0].evaluate(E))}],atan:[lr,[lr],function(E,A){return Math.atan(A[0].evaluate(E))}],min:[lr,Is(lr),function(E,A){return Math.min.apply(Math,A.map(function(D){return D.evaluate(E)}))}],max:[lr,Is(lr),function(E,A){return Math.max.apply(Math,A.map(function(D){return D.evaluate(E)}))}],abs:[lr,[lr],function(E,A){return Math.abs(A[0].evaluate(E))}],round:[lr,[lr],function(E,A){var D=A[0].evaluate(E);return D<0?-Math.round(-D):Math.round(D)}],floor:[lr,[lr],function(E,A){return Math.floor(A[0].evaluate(E))}],ceil:[lr,[lr],function(E,A){return Math.ceil(A[0].evaluate(E))}],"filter-==":[On,[An,$t],function(E,A){var D=A[0],Z=A[1];return E.properties()[D.value]===Z.value}],"filter-id-==":[On,[$t],function(E,A){var D=A[0];return E.id()===D.value}],"filter-type-==":[On,[An],function(E,A){var D=A[0];return E.geometryType()===D.value}],"filter-<":[On,[An,$t],function(E,A){var D=A[0],Z=A[1],se=E.properties()[D.value],ge=Z.value;return typeof se==typeof ge&&se<ge}],"filter-id-<":[On,[$t],function(E,A){var D=A[0],Z=E.id(),se=D.value;return typeof Z==typeof se&&Z<se}],"filter->":[On,[An,$t],function(E,A){var D=A[0],Z=A[1],se=E.properties()[D.value],ge=Z.value;return typeof se==typeof ge&&se>ge}],"filter-id->":[On,[$t],function(E,A){var D=A[0],Z=E.id(),se=D.value;return typeof Z==typeof se&&Z>se}],"filter-<=":[On,[An,$t],function(E,A){var D=A[0],Z=A[1],se=E.properties()[D.value],ge=Z.value;return typeof se==typeof ge&&se<=ge}],"filter-id-<=":[On,[$t],function(E,A){var D=A[0],Z=E.id(),se=D.value;return typeof Z==typeof se&&Z<=se}],"filter->=":[On,[An,$t],function(E,A){var D=A[0],Z=A[1],se=E.properties()[D.value],ge=Z.value;return typeof se==typeof ge&&se>=ge}],"filter-id->=":[On,[$t],function(E,A){var D=A[0],Z=E.id(),se=D.value;return typeof Z==typeof se&&Z>=se}],"filter-has":[On,[$t],function(E,A){return A[0].value in E.properties()}],"filter-has-id":[On,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[On,[wr(An)],function(E,A){return A[0].value.indexOf(E.geometryType())>=0}],"filter-id-in":[On,[wr($t)],function(E,A){return A[0].value.indexOf(E.id())>=0}],"filter-in-small":[On,[An,wr($t)],function(E,A){var D=A[0];return A[1].value.indexOf(E.properties()[D.value])>=0}],"filter-in-large":[On,[An,wr($t)],function(E,A){var D=A[0],Z=A[1];return function(se,ge,Te,je){for(;Te<=je;){var Ze=Te+je>>1;if(ge[Ze]===se)return!0;ge[Ze]>se?je=Ze-1:Te=Ze+1}return!1}(E.properties()[D.value],Z.value,0,Z.value.length-1)}],all:{type:On,overloads:[[[On,On],function(E,A){var D=A[1];return A[0].evaluate(E)&&D.evaluate(E)}],[Is(On),function(E,A){for(var D=0,Z=A;D<Z.length;D+=1)if(!Z[D].evaluate(E))return!1;return!0}]]},any:{type:On,overloads:[[[On,On],function(E,A){var D=A[1];return A[0].evaluate(E)||D.evaluate(E)}],[Is(On),function(E,A){for(var D=0,Z=A;D<Z.length;D+=1)if(Z[D].evaluate(E))return!0;return!1}]]},"!":[On,[On],function(E,A){return!A[0].evaluate(E)}],"is-supported-script":[On,[An],function(E,A){var D=E.globals&&E.globals.isSupportedScript;return!D||D(A[0].evaluate(E))}],upcase:[An,[An],function(E,A){return A[0].evaluate(E).toUpperCase()}],downcase:[An,[An],function(E,A){return A[0].evaluate(E).toLowerCase()}],concat:[An,Is($t),function(E,A){return A.map(function(D){return ws(D.evaluate(E))}).join("")}],"resolved-locale":[An,[Tr],function(E,A){return A[0].evaluate(E).resolvedLocale()}]});var Dn=function(A,D){this.expression=A,this._warningHistory={},this._evaluator=new ys,this._defaultValue=D?function(Z){return Z.type==="color"&&Vt(Z.default)?new Yn(0,0,0,0):Z.type==="color"?Yn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};function di(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in hs}function xi(E,A){var D=new bs(hs,[],A?function(se){var ge={color:Mt,string:An,number:lr,enum:An,boolean:On,formatted:Mr,resolvedImage:Hr};return se.type==="array"?wr(ge[se.value]||$t,se.length):ge[se.type]}(A):void 0),Z=D.parse(E,void 0,void 0,void 0,A&&A.type==="string"?{typeAnnotation:"coerce"}:void 0);return Z?lu(new Dn(Z,A)):bu(D.errors)}Dn.prototype.evaluateWithoutErrorHandling=function(E,A,D,Z,se,ge){return this._evaluator.globals=E,this._evaluator.feature=A,this._evaluator.featureState=D,this._evaluator.canonical=Z,this._evaluator.availableImages=se||null,this._evaluator.formattedSection=ge,this.expression.evaluate(this._evaluator)},Dn.prototype.evaluate=function(E,A,D,Z,se,ge){this._evaluator.globals=E,this._evaluator.feature=A||null,this._evaluator.featureState=D||null,this._evaluator.canonical=Z,this._evaluator.availableImages=se||null,this._evaluator.formattedSection=ge||null;try{var Te=this.expression.evaluate(this._evaluator);if(Te==null||typeof Te=="number"&&Te!=Te)return this._defaultValue;if(this._enumValues&&!(Te in this._enumValues))throw new Ao("Expected value to be one of "+Object.keys(this._enumValues).map(function(je){return JSON.stringify(je)}).join(", ")+", but found "+JSON.stringify(Te)+" instead.");return Te}catch(je){return this._warningHistory[je.message]||(this._warningHistory[je.message]=!0,typeof console!="undefined"&&console.warn(je.message)),this._defaultValue}};var ji=function(A,D){this.kind=A,this._styleExpression=D,this.isStateDependent=A!=="constant"&&!Qo(D.expression)};ji.prototype.evaluateWithoutErrorHandling=function(E,A,D,Z,se,ge){return this._styleExpression.evaluateWithoutErrorHandling(E,A,D,Z,se,ge)},ji.prototype.evaluate=function(E,A,D,Z,se,ge){return this._styleExpression.evaluate(E,A,D,Z,se,ge)};var ia=function(A,D,Z,se){this.kind=A,this.zoomStops=Z,this._styleExpression=D,this.isStateDependent=A!=="camera"&&!Qo(D.expression),this.interpolationType=se};function ca(E,A){if((E=xi(E,A)).result==="error")return E;var D=E.value.expression,Z=Ho(D);if(!Z&&!nu(A))return bu([new Cr("","data expressions not supported")]);var se=Go(D,["zoom"]);if(!se&&!Be(A))return bu([new Cr("","zoom expressions not supported")]);var ge=function Te(je){var Ze=null;if(je instanceof ru)Ze=Te(je.result);else if(je instanceof ns)for(var pt=0,wt=je.args;pt<wt.length&&!(Ze=Te(wt[pt]));pt+=1);else(je instanceof Yo||je instanceof qo)&&je.input instanceof Lt&&je.input.name==="zoom"&&(Ze=je);return Ze instanceof Cr||je.eachChild(function(Wt){var Xt=Te(Wt);Xt instanceof Cr?Ze=Xt:!Ze&&Xt?Ze=new Cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Ze&&Xt&&Ze!==Xt&&(Ze=new Cr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Ze}(D);return ge||se?ge instanceof Cr?bu([ge]):ge instanceof qo&&!Fr(A)?bu([new Cr("",'"interpolate" expressions cannot be used with this property')]):lu(ge?new ia(Z?"camera":"composite",E.value,ge.labels,ge instanceof qo?ge.interpolation:void 0):new ji(Z?"constant":"source",E.value)):bu([new Cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ia.prototype.evaluateWithoutErrorHandling=function(E,A,D,Z,se,ge){return this._styleExpression.evaluateWithoutErrorHandling(E,A,D,Z,se,ge)},ia.prototype.evaluate=function(E,A,D,Z,se,ge){return this._styleExpression.evaluate(E,A,D,Z,se,ge)},ia.prototype.interpolationFactor=function(E,A,D){return this.interpolationType?qo.interpolationFactor(this.interpolationType,E,A,D):0};var ea=function(A,D){this._parameters=A,this._specification=D,Er(this,function Z(se,ge){var Te,je,Ze,pt=ge.type==="color",wt=se.stops&&typeof se.stops[0][0]=="object",Wt=wt||!(wt||se.property!==void 0),Xt=se.type||(Fr(ge)?"exponential":"interval");if(pt&&((se=Er({},se)).stops&&(se.stops=se.stops.map(function(Aa){return[Aa[0],Yn.parse(Aa[1])]})),se.default=Yn.parse(se.default?se.default:ge.default)),se.colorSpace&&se.colorSpace!=="rgb"&&!Qu[se.colorSpace])throw new Error("Unknown color space: "+se.colorSpace);if(Xt==="exponential")Te=Vr;else if(Xt==="interval")Te=en;else if(Xt==="categorical"){Te=gr,je=Object.create(null);for(var dr=0,jr=se.stops;dr<jr.length;dr+=1){var Lr=jr[dr];je[Lr[0]]=Lr[1]}Ze=typeof se.stops[0][0]}else{if(Xt!=="identity")throw new Error('Unknown function type "'+Xt+'"');Te=on}if(wt){for(var qr={},Jr=[],Cn=0;Cn<se.stops.length;Cn++){var Un=se.stops[Cn],Jn=Un[0].zoom;qr[Jn]===void 0&&(qr[Jn]={zoom:Jn,type:se.type,property:se.property,default:se.default,stops:[]},Jr.push(Jn)),qr[Jn].stops.push([Un[0].value,Un[1]])}for(var yi=[],hi=0,Xi=Jr;hi<Xi.length;hi+=1){var Zi=Xi[hi];yi.push([qr[Zi].zoom,Z(qr[Zi],ge)])}var ba={name:"linear"};return{kind:"composite",interpolationType:ba,interpolationFactor:qo.interpolationFactor.bind(void 0,ba),zoomStops:yi.map(function(Aa){return Aa[0]}),evaluate:function(da,yo){var ka=da.zoom;return Vr({stops:yi,base:se.base},ge,ka).evaluate(ka,yo)}}}if(Wt){var Ma=Xt==="exponential"?{name:"exponential",base:se.base!==void 0?se.base:1}:null;return{kind:"camera",interpolationType:Ma,interpolationFactor:qo.interpolationFactor.bind(void 0,Ma),zoomStops:se.stops.map(function(Aa){return Aa[0]}),evaluate:function(da){return Te(se,ge,da.zoom,je,Ze)}}}return{kind:"source",evaluate:function(da,yo){var ka=yo&&yo.properties?yo.properties[se.property]:void 0;return ka===void 0?ar(se.default,ge.default):Te(se,ge,ka,je,Ze)}}}(this._parameters,this._specification))};function ma(E){var A=E.key,D=E.value,Z=E.valueSpec||{},se=E.objectElementValidators||{},ge=E.style,Te=E.styleSpec,je=[],Ze=jt(D);if(Ze!=="object")return[new yt(A,D,"object expected, "+Ze+" found")];for(var pt in D){var wt=pt.split(".")[0],Wt=Z[wt]||Z["*"],Xt=void 0;if(se[wt])Xt=se[wt];else if(Z[wt])Xt=xo;else if(se["*"])Xt=se["*"];else{if(!Z["*"]){je.push(new yt(A,D[pt],'unknown property "'+pt+'"'));continue}Xt=xo}je=je.concat(Xt({key:(A&&A+".")+pt,value:D[pt],valueSpec:Wt,style:ge,styleSpec:Te,object:D,objectKey:pt},D))}for(var dr in Z)se[dr]||Z[dr].required&&Z[dr].default===void 0&&D[dr]===void 0&&je.push(new yt(A,D,'missing required property "'+dr+'"'));return je}function Ia(E){var A=E.value,D=E.valueSpec,Z=E.style,se=E.styleSpec,ge=E.key,Te=E.arrayElementValidator||xo;if(jt(A)!=="array")return[new yt(ge,A,"array expected, "+jt(A)+" found")];if(D.length&&A.length!==D.length)return[new yt(ge,A,"array length "+D.length+" expected, length "+A.length+" found")];if(D["min-length"]&&A.length<D["min-length"])return[new yt(ge,A,"array length at least "+D["min-length"]+" expected, length "+A.length+" found")];var je={type:D.value,values:D.values};se.$version<7&&(je.function=D.function),jt(D.value)==="object"&&(je=D.value);for(var Ze=[],pt=0;pt<A.length;pt++)Ze=Ze.concat(Te({array:A,arrayIndex:pt,value:A[pt],valueSpec:je,style:Z,styleSpec:se,key:ge+"["+pt+"]"}));return Ze}function Fa(E){var A=E.key,D=E.value,Z=E.valueSpec,se=jt(D);return se==="number"&&D!=D&&(se="NaN"),se!=="number"?[new yt(A,D,"number expected, "+se+" found")]:"minimum"in Z&&D<Z.minimum?[new yt(A,D,D+" is less than the minimum value "+Z.minimum)]:"maximum"in Z&&D>Z.maximum?[new yt(A,D,D+" is greater than the maximum value "+Z.maximum)]:[]}function Io(E){var A,D,Z,se=E.valueSpec,ge=Zr(E.value.type),Te={},je=ge!=="categorical"&&E.value.property===void 0,Ze=!je,pt=jt(E.value.stops)==="array"&&jt(E.value.stops[0])==="array"&&jt(E.value.stops[0][0])==="object",wt=ma({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:function(jr){if(ge==="identity")return[new yt(jr.key,jr.value,'identity function may not have a "stops" property')];var Lr=[],qr=jr.value;return Lr=Lr.concat(Ia({key:jr.key,value:qr,valueSpec:jr.valueSpec,style:jr.style,styleSpec:jr.styleSpec,arrayElementValidator:Wt})),jt(qr)==="array"&&qr.length===0&&Lr.push(new yt(jr.key,qr,"array must have at least one stop")),Lr},default:function(jr){return xo({key:jr.key,value:jr.value,valueSpec:se,style:jr.style,styleSpec:jr.styleSpec})}}});return ge==="identity"&&je&&wt.push(new yt(E.key,E.value,'missing required property "property"')),ge==="identity"||E.value.stops||wt.push(new yt(E.key,E.value,'missing required property "stops"')),ge==="exponential"&&E.valueSpec.expression&&!Fr(E.valueSpec)&&wt.push(new yt(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(Ze&&!nu(E.valueSpec)?wt.push(new yt(E.key,E.value,"property functions not supported")):je&&!Be(E.valueSpec)&&wt.push(new yt(E.key,E.value,"zoom functions not supported"))),ge!=="categorical"&&!pt||E.value.property!==void 0||wt.push(new yt(E.key,E.value,'"property" property is required')),wt;function Wt(dr){var jr=[],Lr=dr.value,qr=dr.key;if(jt(Lr)!=="array")return[new yt(qr,Lr,"array expected, "+jt(Lr)+" found")];if(Lr.length!==2)return[new yt(qr,Lr,"array length 2 expected, length "+Lr.length+" found")];if(pt){if(jt(Lr[0])!=="object")return[new yt(qr,Lr,"object expected, "+jt(Lr[0])+" found")];if(Lr[0].zoom===void 0)return[new yt(qr,Lr,"object stop key must have zoom")];if(Lr[0].value===void 0)return[new yt(qr,Lr,"object stop key must have value")];if(Z&&Z>Zr(Lr[0].zoom))return[new yt(qr,Lr[0].zoom,"stop zoom values must appear in ascending order")];Zr(Lr[0].zoom)!==Z&&(Z=Zr(Lr[0].zoom),D=void 0,Te={}),jr=jr.concat(ma({key:qr+"[0]",value:Lr[0],valueSpec:{zoom:{}},style:dr.style,styleSpec:dr.styleSpec,objectElementValidators:{zoom:Fa,value:Xt}}))}else jr=jr.concat(Xt({key:qr+"[0]",value:Lr[0],valueSpec:{},style:dr.style,styleSpec:dr.styleSpec},Lr));return di(Dr(Lr[1]))?jr.concat([new yt(qr+"[1]",Lr[1],"expressions are not allowed in function stops.")]):jr.concat(xo({key:qr+"[1]",value:Lr[1],valueSpec:se,style:dr.style,styleSpec:dr.styleSpec}))}function Xt(dr,jr){var Lr=jt(dr.value),qr=Zr(dr.value),Jr=dr.value!==null?dr.value:jr;if(A){if(Lr!==A)return[new yt(dr.key,Jr,Lr+" stop domain type must match previous stop domain type "+A)]}else A=Lr;if(Lr!=="number"&&Lr!=="string"&&Lr!=="boolean")return[new yt(dr.key,Jr,"stop domain value must be a number, string, or boolean")];if(Lr!=="number"&&ge!=="categorical"){var Cn="number expected, "+Lr+" found";return nu(se)&&ge===void 0&&(Cn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(dr.key,Jr,Cn)]}return ge!=="categorical"||Lr!=="number"||isFinite(qr)&&Math.floor(qr)===qr?ge!=="categorical"&&Lr==="number"&&D!==void 0&&qr<D?[new yt(dr.key,Jr,"stop domain values must appear in ascending order")]:(D=qr,ge==="categorical"&&qr in Te?[new yt(dr.key,Jr,"stop domain values must be unique")]:(Te[qr]=!0,[])):[new yt(dr.key,Jr,"integer expected, found "+qr)]}}function ho(E){var A=(E.expressionContext==="property"?ca:xi)(Dr(E.value),E.valueSpec);if(A.result==="error")return A.value.map(function(Z){return new yt(""+E.key+Z.key,E.value,Z.message)});var D=A.value.expression||A.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!D.outputDefined())return[new yt(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!Qo(D))return[new yt(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!Qo(D))return[new yt(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!Go(D,["zoom","feature-state"]))return[new yt(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!Ho(D))return[new yt(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ba(E){var A=E.key,D=E.value,Z=E.valueSpec,se=[];return Array.isArray(Z.values)?Z.values.indexOf(Zr(D))===-1&&se.push(new yt(A,D,"expected one of ["+Z.values.join(", ")+"], "+JSON.stringify(D)+" found")):Object.keys(Z.values).indexOf(Zr(D))===-1&&se.push(new yt(A,D,"expected one of ["+Object.keys(Z.values).join(", ")+"], "+JSON.stringify(D)+" found")),se}function Mo(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var A=0,D=E.slice(1);A<D.length;A+=1){var Z=D[A];if(!Mo(Z)&&typeof Z!="boolean")return!1}return!0;default:return!0}}ea.deserialize=function(E){return new ea(E._parameters,E._specification)},ea.serialize=function(E){return{_parameters:E._parameters,_specification:E._specification}};var _o={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Da(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};Mo(E)||(E=ko(E));var A=xi(E,_o);if(A.result==="error")throw new Error(A.value.map(function(D){return D.key+": "+D.message}).join(", "));return{filter:function(Z,se,ge){return A.value.evaluate(Z,se,{},ge)},needGeometry:function D(Z){if(!Array.isArray(Z))return!1;if(Z[0]==="within")return!0;for(var se=1;se<Z.length;se++)if(D(Z[se]))return!0;return!1}(E)}}function ss(E,A){return E<A?-1:E>A?1:0}function ko(E){if(!E)return!0;var A,D=E[0];return E.length<=1?D!=="any":D==="=="?bo(E[1],E[2],"=="):D==="!="?us(bo(E[1],E[2],"==")):D==="<"||D===">"||D==="<="||D===">="?bo(E[1],E[2],D):D==="any"?(A=E.slice(1),["any"].concat(A.map(ko))):D==="all"?["all"].concat(E.slice(1).map(ko)):D==="none"?["all"].concat(E.slice(1).map(ko).map(us)):D==="in"?Zo(E[1],E.slice(2)):D==="!in"?us(Zo(E[1],E.slice(2))):D==="has"?As(E[1]):D==="!has"?us(As(E[1])):D!=="within"||E}function bo(E,A,D){switch(E){case"$type":return["filter-type-"+D,A];case"$id":return["filter-id-"+D,A];default:return["filter-"+D,E,A]}}function Zo(E,A){if(A.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",A]];case"$id":return["filter-id-in",["literal",A]];default:return A.length>200&&!A.some(function(D){return typeof D!=typeof A[0]})?["filter-in-large",E,["literal",A.sort(ss)]]:["filter-in-small",E,["literal",A]]}}function As(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function us(E){return["!",E]}function Mu(E){return Mo(Dr(E.value))?ho(Er({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function A(D){var Z=D.value,se=D.key;if(jt(Z)!=="array")return[new yt(se,Z,"array expected, "+jt(Z)+" found")];var ge,Te=D.styleSpec,je=[];if(Z.length<1)return[new yt(se,Z,"filter array must have at least 1 element")];switch(je=je.concat(Ba({key:se+"[0]",value:Z[0],valueSpec:Te.filter_operator,style:D.style,styleSpec:D.styleSpec})),Zr(Z[0])){case"<":case"<=":case">":case">=":Z.length>=2&&Zr(Z[1])==="$type"&&je.push(new yt(se,Z,'"$type" cannot be use with operator "'+Z[0]+'"'));case"==":case"!=":Z.length!==3&&je.push(new yt(se,Z,'filter array for operator "'+Z[0]+'" must have 3 elements'));case"in":case"!in":Z.length>=2&&(ge=jt(Z[1]))!=="string"&&je.push(new yt(se+"[1]",Z[1],"string expected, "+ge+" found"));for(var Ze=2;Ze<Z.length;Ze++)ge=jt(Z[Ze]),Zr(Z[1])==="$type"?je=je.concat(Ba({key:se+"["+Ze+"]",value:Z[Ze],valueSpec:Te.geometry_type,style:D.style,styleSpec:D.styleSpec})):ge!=="string"&&ge!=="number"&&ge!=="boolean"&&je.push(new yt(se+"["+Ze+"]",Z[Ze],"string, number, or boolean expected, "+ge+" found"));break;case"any":case"all":case"none":for(var pt=1;pt<Z.length;pt++)je=je.concat(A({key:se+"["+pt+"]",value:Z[pt],style:D.style,styleSpec:D.styleSpec}));break;case"has":case"!has":ge=jt(Z[1]),Z.length!==2?je.push(new yt(se,Z,'filter array for "'+Z[0]+'" operator must have 2 elements')):ge!=="string"&&je.push(new yt(se+"[1]",Z[1],"string expected, "+ge+" found"));break;case"within":ge=jt(Z[1]),Z.length!==2?je.push(new yt(se,Z,'filter array for "'+Z[0]+'" operator must have 2 elements')):ge!=="object"&&je.push(new yt(se+"[1]",Z[1],"object expected, "+ge+" found"))}return je}(E)}function Qs(E,A){var D=E.key,Z=E.style,se=E.styleSpec,ge=E.value,Te=E.objectKey,je=se[A+"_"+E.layerType];if(!je)return[];var Ze=Te.match(/^(.*)-transition$/);if(A==="paint"&&Ze&&je[Ze[1]]&&je[Ze[1]].transition)return xo({key:D,value:ge,valueSpec:se.transition,style:Z,styleSpec:se});var pt,wt=E.valueSpec||je[Te];if(!wt)return[new yt(D,ge,'unknown property "'+Te+'"')];if(jt(ge)==="string"&&nu(wt)&&!wt.tokens&&(pt=/^{([^}]+)}$/.exec(ge)))return[new yt(D,ge,'"'+Te+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(pt[1])+" }`.")];var Wt=[];return E.layerType==="symbol"&&(Te==="text-field"&&Z&&!Z.glyphs&&Wt.push(new yt(D,ge,'use of "text-field" requires a style "glyphs" property')),Te==="text-font"&&Vt(Dr(ge))&&Zr(ge.type)==="identity"&&Wt.push(new yt(D,ge,'"text-font" does not support identity functions'))),Wt.concat(xo({key:E.key,value:ge,valueSpec:wt,style:Z,styleSpec:se,expressionContext:"property",propertyType:A,propertyKey:Te}))}function Ls(E){return Qs(E,"paint")}function Es(E){return Qs(E,"layout")}function al(E){var A=[],D=E.value,Z=E.key,se=E.style,ge=E.styleSpec;D.type||D.ref||A.push(new yt(Z,D,'either "type" or "ref" is required'));var Te,je=Zr(D.type),Ze=Zr(D.ref);if(D.id)for(var pt=Zr(D.id),wt=0;wt<E.arrayIndex;wt++){var Wt=se.layers[wt];Zr(Wt.id)===pt&&A.push(new yt(Z,D.id,'duplicate layer id "'+D.id+'", previously used at line '+Wt.id.__line__))}if("ref"in D)["type","source","source-layer","filter","layout"].forEach(function(jr){jr in D&&A.push(new yt(Z,D[jr],'"'+jr+'" is prohibited for ref layers'))}),se.layers.forEach(function(jr){Zr(jr.id)===Ze&&(Te=jr)}),Te?Te.ref?A.push(new yt(Z,D.ref,"ref cannot reference another ref layer")):je=Zr(Te.type):A.push(new yt(Z,D.ref,'ref layer "'+Ze+'" not found'));else if(je!=="background")if(D.source){var Xt=se.sources&&se.sources[D.source],dr=Xt&&Zr(Xt.type);Xt?dr==="vector"&&je==="raster"?A.push(new yt(Z,D.source,'layer "'+D.id+'" requires a raster source')):dr==="raster"&&je!=="raster"?A.push(new yt(Z,D.source,'layer "'+D.id+'" requires a vector source')):dr!=="vector"||D["source-layer"]?dr==="raster-dem"&&je!=="hillshade"?A.push(new yt(Z,D.source,"raster-dem source can only be used with layer type 'hillshade'.")):je!=="line"||!D.paint||!D.paint["line-gradient"]||dr==="geojson"&&Xt.lineMetrics||A.push(new yt(Z,D,'layer "'+D.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):A.push(new yt(Z,D,'layer "'+D.id+'" must specify a "source-layer"')):A.push(new yt(Z,D.source,'source "'+D.source+'" not found'))}else A.push(new yt(Z,D,'missing required property "source"'));return A=A.concat(ma({key:Z,value:D,valueSpec:ge.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xo({key:Z+".type",value:D.type,valueSpec:ge.layer.type,style:E.style,styleSpec:E.styleSpec,object:D,objectKey:"type"})},filter:Mu,layout:function(Lr){return ma({layer:D,key:Lr.key,value:Lr.value,style:Lr.style,styleSpec:Lr.styleSpec,objectElementValidators:{"*":function(Jr){return Es(Er({layerType:je},Jr))}}})},paint:function(Lr){return ma({layer:D,key:Lr.key,value:Lr.value,style:Lr.style,styleSpec:Lr.styleSpec,objectElementValidators:{"*":function(Jr){return Ls(Er({layerType:je},Jr))}}})}}}))}function cu(E){var A=E.value,D=E.key,Z=jt(A);return Z!=="string"?[new yt(D,A,"string expected, "+Z+" found")]:[]}var zo={promoteId:function(A){var D=A.key,Z=A.value;if(jt(Z)==="string")return cu({key:D,value:Z});var se=[];for(var ge in Z)se.push.apply(se,cu({key:D+"."+ge,value:Z[ge]}));return se}};function qu(E){var A=E.value,D=E.key,Z=E.styleSpec,se=E.style;if(!A.type)return[new yt(D,A,'"type" is required')];var ge,Te=Zr(A.type);switch(Te){case"vector":case"raster":case"raster-dem":return ma({key:D,value:A,valueSpec:Z["source_"+Te.replace("-","_")],style:E.style,styleSpec:Z,objectElementValidators:zo});case"geojson":if(ge=ma({key:D,value:A,valueSpec:Z.source_geojson,style:se,styleSpec:Z,objectElementValidators:zo}),A.cluster)for(var je in A.clusterProperties){var Ze=A.clusterProperties[je],pt=Ze[0],wt=typeof pt=="string"?[pt,["accumulated"],["get",je]]:pt;ge.push.apply(ge,ho({key:D+"."+je+".map",value:Ze[1],expressionContext:"cluster-map"})),ge.push.apply(ge,ho({key:D+"."+je+".reduce",value:wt,expressionContext:"cluster-reduce"}))}return ge;case"video":return ma({key:D,value:A,valueSpec:Z.source_video,style:se,styleSpec:Z});case"image":return ma({key:D,value:A,valueSpec:Z.source_image,style:se,styleSpec:Z});case"canvas":return[new yt(D,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ba({key:D+".type",value:A.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:se,styleSpec:Z})}}function ol(E){var A=E.value,D=E.styleSpec,Z=D.light,se=E.style,ge=[],Te=jt(A);if(A===void 0)return ge;if(Te!=="object")return ge.concat([new yt("light",A,"object expected, "+Te+" found")]);for(var je in A){var Ze=je.match(/^(.*)-transition$/);ge=ge.concat(Ze&&Z[Ze[1]]&&Z[Ze[1]].transition?xo({key:je,value:A[je],valueSpec:D.transition,style:se,styleSpec:D}):Z[je]?xo({key:je,value:A[je],valueSpec:Z[je],style:se,styleSpec:D}):[new yt(je,A[je],'unknown property "'+je+'"')])}return ge}var xu={"*":function(){return[]},array:Ia,boolean:function(A){var D=A.value,Z=A.key,se=jt(D);return se!=="boolean"?[new yt(Z,D,"boolean expected, "+se+" found")]:[]},number:Fa,color:function(A){var D=A.key,Z=A.value,se=jt(Z);return se!=="string"?[new yt(D,Z,"color expected, "+se+" found")]:En(Z)===null?[new yt(D,Z,'color expected, "'+Z+'" found')]:[]},constants:qt,enum:Ba,filter:Mu,function:Io,layer:al,object:ma,source:qu,light:ol,string:cu,formatted:function(A){return cu(A).length===0?[]:ho(A)},resolvedImage:function(A){return cu(A).length===0?[]:ho(A)}};function xo(E){var A=E.value,D=E.valueSpec,Z=E.styleSpec;return D.expression&&Vt(Zr(A))?Io(E):D.expression&&di(Dr(A))?ho(E):D.type&&xu[D.type]?xu[D.type](E):ma(Er({},E,{valueSpec:D.type?Z[D.type]:D}))}function Ko(E){var A=E.value,D=E.key,Z=cu(E);return Z.length||(A.indexOf("{fontstack}")===-1&&Z.push(new yt(D,A,'"glyphs" url must include a "{fontstack}" token')),A.indexOf("{range}")===-1&&Z.push(new yt(D,A,'"glyphs" url must include a "{range}" token'))),Z}function Iu(E,A){A===void 0&&(A=qe);var D=[];return D=D.concat(xo({key:"",value:E,valueSpec:A.$root,styleSpec:A,style:E,objectElementValidators:{glyphs:Ko,"*":function(){return[]}}})),E.constants&&(D=D.concat(qt({key:"constants",value:E.constants,style:E,styleSpec:A}))),Hl(D)}function Hl(E){return[].concat(E).sort(function(A,D){return A.line-D.line})}function xl(E){return function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return Hl(E.apply(this,A))}}Iu.source=xl(qu),Iu.light=xl(ol),Iu.layer=xl(al),Iu.filter=xl(Mu),Iu.paintProperty=xl(Ls),Iu.layoutProperty=xl(Es);var yl=Iu,Tc=yl.light,El=yl.paintProperty,_l=yl.layoutProperty;function sl(E,A){var D=!1;if(A&&A.length)for(var Z=0,se=A;Z<se.length;Z+=1)E.fire(new lt(new Error(se[Z].message))),D=!0;return D}var ls=gs;function gs(E,A,D){var Z=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var se=new Int32Array(this.arrayBuffer);E=se[0],this.d=(A=se[1])+2*(D=se[2]);for(var ge=0;ge<this.d*this.d;ge++){var Te=se[3+ge],je=se[3+ge+1];Z.push(Te===je?null:se.subarray(Te,je))}var Ze=se[3+Z.length+1];this.keys=se.subarray(se[3+Z.length],Ze),this.bboxes=se.subarray(Ze),this.insert=this._insertReadonly}else{this.d=A+2*D;for(var pt=0;pt<this.d*this.d;pt++)Z.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=E,this.padding=D,this.scale=A/E,this.uid=0;var wt=D/A*E;this.min=-wt,this.max=E+wt}gs.prototype.insert=function(E,A,D,Z,se){this._forEachCell(A,D,Z,se,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(A),this.bboxes.push(D),this.bboxes.push(Z),this.bboxes.push(se)},gs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gs.prototype._insertCell=function(E,A,D,Z,se,ge){this.cells[se].push(ge)},gs.prototype.query=function(E,A,D,Z,se){var ge=this.min,Te=this.max;if(E<=ge&&A<=ge&&Te<=D&&Te<=Z&&!se)return Array.prototype.slice.call(this.keys);var je=[];return this._forEachCell(E,A,D,Z,this._queryCell,je,{},se),je},gs.prototype._queryCell=function(E,A,D,Z,se,ge,Te,je){var Ze=this.cells[se];if(Ze!==null)for(var pt=this.keys,wt=this.bboxes,Wt=0;Wt<Ze.length;Wt++){var Xt=Ze[Wt];if(Te[Xt]===void 0){var dr=4*Xt;(je?je(wt[dr+0],wt[dr+1],wt[dr+2],wt[dr+3]):E<=wt[dr+2]&&A<=wt[dr+3]&&D>=wt[dr+0]&&Z>=wt[dr+1])?(Te[Xt]=!0,ge.push(pt[Xt])):Te[Xt]=!1}}},gs.prototype._forEachCell=function(E,A,D,Z,se,ge,Te,je){for(var Ze=this._convertToCellCoord(E),pt=this._convertToCellCoord(A),wt=this._convertToCellCoord(D),Wt=this._convertToCellCoord(Z),Xt=Ze;Xt<=wt;Xt++)for(var dr=pt;dr<=Wt;dr++){var jr=this.d*dr+Xt;if((!je||je(this._convertFromCellCoord(Xt),this._convertFromCellCoord(dr),this._convertFromCellCoord(Xt+1),this._convertFromCellCoord(dr+1)))&&se.call(this,E,A,D,Z,jr,ge,Te,je))return}},gs.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},gs.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},gs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,A=3+this.cells.length+1+1,D=0,Z=0;Z<this.cells.length;Z++)D+=this.cells[Z].length;var se=new Int32Array(A+D+this.keys.length+this.bboxes.length);se[0]=this.extent,se[1]=this.n,se[2]=this.padding;for(var ge=A,Te=0;Te<E.length;Te++){var je=E[Te];se[3+Te]=ge,se.set(je,ge),ge+=je.length}return se[3+E.length]=ge,se.set(this.keys,ge),se[3+E.length+1]=ge+=this.keys.length,se.set(this.bboxes,ge),ge+=this.bboxes.length,se.buffer};var ht=i.ImageData,Ut=i.ImageBitmap,Ht={};function Kt(E,A,D){D===void 0&&(D={}),Object.defineProperty(A,"_classRegistryKey",{value:E,writeable:!1}),Ht[E]={klass:A,omit:D.omit||[],shallow:D.shallow||[]}}for(var pr in Kt("Object",Object),ls.serialize=function(E,A){var D=E.toArrayBuffer();return A&&A.push(D),{buffer:D}},ls.deserialize=function(E){return new ls(E.buffer)},Kt("Grid",ls),Kt("Color",Yn),Kt("Error",Error),Kt("ResolvedImage",Po),Kt("StylePropertyFunction",ea),Kt("StyleExpression",Dn,{omit:["_evaluator"]}),Kt("ZoomDependentExpression",ia),Kt("ZoomConstantExpression",ji),Kt("CompoundExpression",Lt,{omit:["_evaluate"]}),hs)hs[pr]._classRegistryKey||Kt("Expression_"+pr,hs[pr]);function ln(E){return E&&typeof ArrayBuffer!="undefined"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function Rn(E){return Ut&&E instanceof Ut}function Fn(E,A){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(ln(E)||Rn(E))return A&&A.push(E),E;if(ArrayBuffer.isView(E)){var D=E;return A&&A.push(D.buffer),D}if(E instanceof ht)return A&&A.push(E.data.buffer),E;if(Array.isArray(E)){for(var Z=[],se=0,ge=E;se<ge.length;se+=1)Z.push(Fn(ge[se],A));return Z}if(typeof E=="object"){var Te=E.constructor,je=Te._classRegistryKey;if(!je)throw new Error("can't serialize object of unregistered class");var Ze=Te.serialize?Te.serialize(E,A):{};if(!Te.serialize){for(var pt in E)if(E.hasOwnProperty(pt)&&!(Ht[je].omit.indexOf(pt)>=0)){var wt=E[pt];Ze[pt]=Ht[je].shallow.indexOf(pt)>=0?wt:Fn(wt,A)}E instanceof Error&&(Ze.message=E.message)}if(Ze.$name)throw new Error("$name property is reserved for worker serialization logic.");return je!=="Object"&&(Ze.$name=je),Ze}throw new Error("can't serialize object of type "+typeof E)}function li(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||ln(E)||Rn(E)||ArrayBuffer.isView(E)||E instanceof ht)return E;if(Array.isArray(E))return E.map(li);if(typeof E=="object"){var A=E.$name||"Object",D=Ht[A].klass;if(!D)throw new Error("can't deserialize unregistered class "+A);if(D.deserialize)return D.deserialize(E);for(var Z=Object.create(D.prototype),se=0,ge=Object.keys(E);se<ge.length;se+=1){var Te=ge[se];if(Te!=="$name"){var je=E[Te];Z[Te]=Ht[A].shallow.indexOf(Te)>=0?je:li(je)}}return Z}throw new Error("can't deserialize object of type "+typeof E)}var qi=function(){this.first=!0};qi.prototype.update=function(E,A){var D=Math.floor(E);return this.first?(this.first=!1,this.lastIntegerZoom=D,this.lastIntegerZoomTime=0,this.lastZoom=E,this.lastFloorZoom=D,!0):(this.lastFloorZoom>D?(this.lastIntegerZoom=D+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<D&&(this.lastIntegerZoom=D,this.lastIntegerZoomTime=A),E!==this.lastZoom&&(this.lastZoom=E,this.lastFloorZoom=D,!0))};var Wn={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function ga(E){for(var A=0,D=E;A<D.length;A+=1)if(ao(D[A].charCodeAt(0)))return!0;return!1}function ao(E){return!(E!==746&&E!==747&&(E<4352||!(Wn["Bopomofo Extended"](E)||Wn.Bopomofo(E)||Wn["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Wn["CJK Compatibility Ideographs"](E)||Wn["CJK Compatibility"](E)||Wn["CJK Radicals Supplement"](E)||Wn["CJK Strokes"](E)||!(!Wn["CJK Symbols and Punctuation"](E)||E>=12296&&E<=12305||E>=12308&&E<=12319||E===12336)||Wn["CJK Unified Ideographs Extension A"](E)||Wn["CJK Unified Ideographs"](E)||Wn["Enclosed CJK Letters and Months"](E)||Wn["Hangul Compatibility Jamo"](E)||Wn["Hangul Jamo Extended-A"](E)||Wn["Hangul Jamo Extended-B"](E)||Wn["Hangul Jamo"](E)||Wn["Hangul Syllables"](E)||Wn.Hiragana(E)||Wn["Ideographic Description Characters"](E)||Wn.Kanbun(E)||Wn["Kangxi Radicals"](E)||Wn["Katakana Phonetic Extensions"](E)||Wn.Katakana(E)&&E!==12540||!(!Wn["Halfwidth and Fullwidth Forms"](E)||E===65288||E===65289||E===65293||E>=65306&&E<=65310||E===65339||E===65341||E===65343||E>=65371&&E<=65503||E===65507||E>=65512&&E<=65519)||!(!Wn["Small Form Variants"](E)||E>=65112&&E<=65118||E>=65123&&E<=65126)||Wn["Unified Canadian Aboriginal Syllabics"](E)||Wn["Unified Canadian Aboriginal Syllabics Extended"](E)||Wn["Vertical Forms"](E)||Wn["Yijing Hexagram Symbols"](E)||Wn["Yi Syllables"](E)||Wn["Yi Radicals"](E))))}function is(E){return!(ao(E)||function(A){return!!(Wn["Latin-1 Supplement"](A)&&(A===167||A===169||A===174||A===177||A===188||A===189||A===190||A===215||A===247)||Wn["General Punctuation"](A)&&(A===8214||A===8224||A===8225||A===8240||A===8241||A===8251||A===8252||A===8258||A===8263||A===8264||A===8265||A===8273)||Wn["Letterlike Symbols"](A)||Wn["Number Forms"](A)||Wn["Miscellaneous Technical"](A)&&(A>=8960&&A<=8967||A>=8972&&A<=8991||A>=8996&&A<=9e3||A===9003||A>=9085&&A<=9114||A>=9150&&A<=9165||A===9167||A>=9169&&A<=9179||A>=9186&&A<=9215)||Wn["Control Pictures"](A)&&A!==9251||Wn["Optical Character Recognition"](A)||Wn["Enclosed Alphanumerics"](A)||Wn["Geometric Shapes"](A)||Wn["Miscellaneous Symbols"](A)&&!(A>=9754&&A<=9759)||Wn["Miscellaneous Symbols and Arrows"](A)&&(A>=11026&&A<=11055||A>=11088&&A<=11097||A>=11192&&A<=11243)||Wn["CJK Symbols and Punctuation"](A)||Wn.Katakana(A)||Wn["Private Use Area"](A)||Wn["CJK Compatibility Forms"](A)||Wn["Small Form Variants"](A)||Wn["Halfwidth and Fullwidth Forms"](A)||A===8734||A===8756||A===8757||A>=9984&&A<=10087||A>=10102&&A<=10131||A===65532||A===65533)}(E))}function vo(E){return E>=1424&&E<=2303||Wn["Arabic Presentation Forms-A"](E)||Wn["Arabic Presentation Forms-B"](E)}function Et(E,A){return!(!A&&vo(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Wn.Khmer(E))}function bt(E){for(var A=0,D=E;A<D.length;A+=1)if(vo(D[A].charCodeAt(0)))return!0;return!1}var mr=null,or="unavailable",Ir=null,yn=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(or="error"),mr&&mr(A)};function jn(){qn.fire(new Ke("pluginStateChange",{pluginStatus:or,pluginURL:Ir}))}var qn=new mt,ui=function(){return or},kn=function(){if(or!=="deferred"||!Ir)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");or="loading",jn(),Ir&&Ar({url:Ir},function(A){A?yn(A):(or="loaded",jn())})},oi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return or==="loaded"||oi.applyArabicShaping!=null},isLoading:function(){return or==="loading"},setState:function(A){or=A.pluginStatus,Ir=A.pluginURL},isParsed:function(){return oi.applyArabicShaping!=null&&oi.processBidirectionalText!=null&&oi.processStyledBidirectionalText!=null},getPluginURL:function(){return Ir}},bn=function(A,D){this.zoom=A,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qi,this.transition={})};bn.prototype.isSupportedScript=function(E){return function(A,D){for(var Z=0,se=A;Z<se.length;Z+=1)if(!Et(se[Z].charCodeAt(0),D))return!1;return!0}(E,oi.isLoaded())},bn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},bn.prototype.getCrossfadeParameters=function(){var E=this.zoom,A=E-Math.floor(E),D=this.crossFadingFactor();return E>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*D}:{fromScale:.5,toScale:1,t:1-(1-D)*A}};var Xe=function(A,D){this.property=A,this.value=D,this.expression=function(Z,se){if(Vt(Z))return new ea(Z,se);if(di(Z)){var ge=ca(Z,se);if(ge.result==="error")throw new Error(ge.value.map(function(je){return je.key+": "+je.message}).join(", "));return ge.value}var Te=Z;return typeof Z=="string"&&se.type==="color"&&(Te=Yn.parse(Z)),{kind:"constant",evaluate:function(){return Te}}}(D===void 0?A.specification.default:D,A.specification)};Xe.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Xe.prototype.possiblyEvaluate=function(E,A,D){return this.property.possiblyEvaluate(this,E,A,D)};var et=function(A){this.property=A,this.value=new Xe(A,void 0)};et.prototype.transitioned=function(E,A){return new At(this.property,this.value,A,d({},E.transition,this.transition),E.now)},et.prototype.untransitioned=function(){return new At(this.property,this.value,null,{},0)};var Ct=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};Ct.prototype.getValue=function(E){return S(this._values[E].value.value)},Ct.prototype.setValue=function(E,A){this._values.hasOwnProperty(E)||(this._values[E]=new et(this._values[E].property)),this._values[E].value=new Xe(this._values[E].property,A===null?void 0:S(A))},Ct.prototype.getTransition=function(E){return S(this._values[E].transition)},Ct.prototype.setTransition=function(E,A){this._values.hasOwnProperty(E)||(this._values[E]=new et(this._values[E].property)),this._values[E].transition=S(A)||void 0},Ct.prototype.serialize=function(){for(var E={},A=0,D=Object.keys(this._values);A<D.length;A+=1){var Z=D[A],se=this.getValue(Z);se!==void 0&&(E[Z]=se);var ge=this.getTransition(Z);ge!==void 0&&(E[Z+"-transition"]=ge)}return E},Ct.prototype.transitioned=function(E,A){for(var D=new Le(this._properties),Z=0,se=Object.keys(this._values);Z<se.length;Z+=1){var ge=se[Z];D._values[ge]=this._values[ge].transitioned(E,A._values[ge])}return D},Ct.prototype.untransitioned=function(){for(var E=new Le(this._properties),A=0,D=Object.keys(this._values);A<D.length;A+=1){var Z=D[A];E._values[Z]=this._values[Z].untransitioned()}return E};var At=function(A,D,Z,se,ge){this.property=A,this.value=D,this.begin=ge+se.delay||0,this.end=this.begin+se.duration||0,A.specification.transition&&(se.delay||se.duration)&&(this.prior=Z)};At.prototype.possiblyEvaluate=function(E,A,D){var Z=E.now||0,se=this.value.possiblyEvaluate(E,A,D),ge=this.prior;if(ge){if(Z>this.end)return this.prior=null,se;if(this.value.isDataDriven())return this.prior=null,se;if(Z<this.begin)return ge.possiblyEvaluate(E,A,D);var Te=(Z-this.begin)/(this.end-this.begin);return this.property.interpolate(ge.possiblyEvaluate(E,A,D),se,function(je){if(je<=0)return 0;if(je>=1)return 1;var Ze=je*je,pt=Ze*je;return 4*(je<.5?pt:3*(je-Ze)+pt-.75)}(Te))}return se};var Le=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};Le.prototype.possiblyEvaluate=function(E,A,D){for(var Z=new tt(this._properties),se=0,ge=Object.keys(this._values);se<ge.length;se+=1){var Te=ge[se];Z._values[Te]=this._values[Te].possiblyEvaluate(E,A,D)}return Z},Le.prototype.hasTransition=function(){for(var E=0,A=Object.keys(this._values);E<A.length;E+=1)if(this._values[A[E]].prior)return!0;return!1};var Ne=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Ne.prototype.getValue=function(E){return S(this._values[E].value)},Ne.prototype.setValue=function(E,A){this._values[E]=new Xe(this._values[E].property,A===null?void 0:S(A))},Ne.prototype.serialize=function(){for(var E={},A=0,D=Object.keys(this._values);A<D.length;A+=1){var Z=D[A],se=this.getValue(Z);se!==void 0&&(E[Z]=se)}return E},Ne.prototype.possiblyEvaluate=function(E,A,D){for(var Z=new tt(this._properties),se=0,ge=Object.keys(this._values);se<ge.length;se+=1){var Te=ge[se];Z._values[Te]=this._values[Te].possiblyEvaluate(E,A,D)}return Z};var nt=function(A,D,Z){this.property=A,this.value=D,this.parameters=Z};nt.prototype.isConstant=function(){return this.value.kind==="constant"},nt.prototype.constantOr=function(E){return this.value.kind==="constant"?this.value.value:E},nt.prototype.evaluate=function(E,A,D,Z){return this.property.evaluate(this.value,this.parameters,E,A,D,Z)};var tt=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};tt.prototype.get=function(E){return this._values[E]};var dt=function(A){this.specification=A};dt.prototype.possiblyEvaluate=function(E,A){return E.expression.evaluate(A)},dt.prototype.interpolate=function(E,A,D){var Z=Rs[this.specification.type];return Z?Z(E,A,D):E};var Dt=function(A,D){this.specification=A,this.overrides=D};Dt.prototype.possiblyEvaluate=function(E,A,D,Z){return new nt(this,E.expression.kind==="constant"||E.expression.kind==="camera"?{kind:"constant",value:E.expression.evaluate(A,null,{},D,Z)}:E.expression,A)},Dt.prototype.interpolate=function(E,A,D){if(E.value.kind!=="constant"||A.value.kind!=="constant")return E;if(E.value.value===void 0||A.value.value===void 0)return new nt(this,{kind:"constant",value:void 0},E.parameters);var Z=Rs[this.specification.type];return Z?new nt(this,{kind:"constant",value:Z(E.value.value,A.value.value,D)},E.parameters):E},Dt.prototype.evaluate=function(E,A,D,Z,se,ge){return E.kind==="constant"?E.value:E.evaluate(A,D,Z,se,ge)};var Zt=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.possiblyEvaluate=function(D,Z,se,ge){if(D.value===void 0)return new nt(this,{kind:"constant",value:void 0},Z);if(D.expression.kind==="constant"){var Te=D.expression.evaluate(Z,null,{},se,ge),je=D.property.specification.type==="resolvedImage"&&typeof Te!="string"?Te.name:Te,Ze=this._calculate(je,je,je,Z);return new nt(this,{kind:"constant",value:Ze},Z)}if(D.expression.kind==="camera"){var pt=this._calculate(D.expression.evaluate({zoom:Z.zoom-1}),D.expression.evaluate({zoom:Z.zoom}),D.expression.evaluate({zoom:Z.zoom+1}),Z);return new nt(this,{kind:"constant",value:pt},Z)}return new nt(this,D.expression,Z)},A.prototype.evaluate=function(D,Z,se,ge,Te,je){if(D.kind==="source"){var Ze=D.evaluate(Z,se,ge,Te,je);return this._calculate(Ze,Ze,Ze,Z)}return D.kind==="composite"?this._calculate(D.evaluate({zoom:Math.floor(Z.zoom)-1},se,ge),D.evaluate({zoom:Math.floor(Z.zoom)},se,ge),D.evaluate({zoom:Math.floor(Z.zoom)+1},se,ge),Z):D.value},A.prototype._calculate=function(D,Z,se,ge){return ge.zoom>ge.zoomHistory.lastIntegerZoom?{from:D,to:Z}:{from:se,to:Z}},A.prototype.interpolate=function(D){return D},A}(Dt),cr=function(A){this.specification=A};cr.prototype.possiblyEvaluate=function(E,A,D,Z){if(E.value!==void 0){if(E.expression.kind==="constant"){var se=E.expression.evaluate(A,null,{},D,Z);return this._calculate(se,se,se,A)}return this._calculate(E.expression.evaluate(new bn(Math.floor(A.zoom-1),A)),E.expression.evaluate(new bn(Math.floor(A.zoom),A)),E.expression.evaluate(new bn(Math.floor(A.zoom+1),A)),A)}},cr.prototype._calculate=function(E,A,D,Z){return Z.zoom>Z.zoomHistory.lastIntegerZoom?{from:E,to:A}:{from:D,to:A}},cr.prototype.interpolate=function(E){return E};var Jt=function(A){this.specification=A};Jt.prototype.possiblyEvaluate=function(E,A,D,Z){return!!E.expression.evaluate(A,null,{},D,Z)},Jt.prototype.interpolate=function(){return!1};var xr=function(A){for(var D in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Z=A[D];Z.specification.overridable&&this.overridableProperties.push(D);var se=this.defaultPropertyValues[D]=new Xe(Z,void 0),ge=this.defaultTransitionablePropertyValues[D]=new et(Z);this.defaultTransitioningPropertyValues[D]=ge.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=se.possiblyEvaluate({})}};Kt("DataDrivenProperty",Dt),Kt("DataConstantProperty",dt),Kt("CrossFadedDataDrivenProperty",Zt),Kt("CrossFadedProperty",cr),Kt("ColorRampProperty",Jt);var yr=function(E){function A(D,Z){if(E.call(this),this.id=D.id,this.type=D.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},D.type!=="custom"&&(this.metadata=(D=D).metadata,this.minzoom=D.minzoom,this.maxzoom=D.maxzoom,D.type!=="background"&&(this.source=D.source,this.sourceLayer=D["source-layer"],this.filter=D.filter),Z.layout&&(this._unevaluatedLayout=new Ne(Z.layout)),Z.paint)){for(var se in this._transitionablePaint=new Ct(Z.paint),D.paint)this.setPaintProperty(se,D.paint[se],{validate:!1});for(var ge in D.layout)this.setLayoutProperty(ge,D.layout[ge],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tt(Z.paint)}}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},A.prototype.getLayoutProperty=function(D){return D==="visibility"?this.visibility:this._unevaluatedLayout.getValue(D)},A.prototype.setLayoutProperty=function(D,Z,se){se===void 0&&(se={}),Z!=null&&this._validate(_l,"layers."+this.id+".layout."+D,D,Z,se)||(D!=="visibility"?this._unevaluatedLayout.setValue(D,Z):this.visibility=Z)},A.prototype.getPaintProperty=function(D){return C(D,"-transition")?this._transitionablePaint.getTransition(D.slice(0,-"-transition".length)):this._transitionablePaint.getValue(D)},A.prototype.setPaintProperty=function(D,Z,se){if(se===void 0&&(se={}),Z!=null&&this._validate(El,"layers."+this.id+".paint."+D,D,Z,se))return!1;if(C(D,"-transition"))return this._transitionablePaint.setTransition(D.slice(0,-"-transition".length),Z||void 0),!1;var ge=this._transitionablePaint._values[D],Te=ge.property.specification["property-type"]==="cross-faded-data-driven",je=ge.value.isDataDriven(),Ze=ge.value;this._transitionablePaint.setValue(D,Z),this._handleSpecialPaintPropertyUpdate(D);var pt=this._transitionablePaint._values[D].value;return pt.isDataDriven()||je||Te||this._handleOverridablePaintPropertyUpdate(D,Ze,pt)},A.prototype._handleSpecialPaintPropertyUpdate=function(D){},A.prototype._handleOverridablePaintPropertyUpdate=function(D,Z,se){return!1},A.prototype.isHidden=function(D){return!!(this.minzoom&&D<this.minzoom)||!!(this.maxzoom&&D>=this.maxzoom)||this.visibility==="none"},A.prototype.updateTransitions=function(D){this._transitioningPaint=this._transitionablePaint.transitioned(D,this._transitioningPaint)},A.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},A.prototype.recalculate=function(D,Z){D.getCrossfadeParameters&&(this._crossfadeParameters=D.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(D,void 0,Z)),this.paint=this._transitioningPaint.possiblyEvaluate(D,void 0,Z)},A.prototype.serialize=function(){var D={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(D.layout=D.layout||{},D.layout.visibility=this.visibility),w(D,function(Z,se){return!(Z===void 0||se==="layout"&&!Object.keys(Z).length||se==="paint"&&!Object.keys(Z).length)})},A.prototype._validate=function(D,Z,se,ge,Te){return Te===void 0&&(Te={}),(!Te||Te.validate!==!1)&&sl(this,D.call(yl,{key:Z,layerType:this.type,objectKey:se,value:ge,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))},A.prototype.is3D=function(){return!1},A.prototype.isTileClipped=function(){return!1},A.prototype.hasOffscreenPass=function(){return!1},A.prototype.resize=function(){},A.prototype.isStateDependent=function(){for(var D in this.paint._values){var Z=this.paint.get(D);if(Z instanceof nt&&nu(Z.property.specification)&&(Z.value.kind==="source"||Z.value.kind==="composite")&&Z.value.isStateDependent)return!0}return!1},A}(mt),rn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Kr=function(A,D){this._structArray=A,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},an=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qr(E,A){A===void 0&&(A=1);var D=0,Z=0;return{members:E.map(function(se){var ge=rn[se.type].BYTES_PER_ELEMENT,Te=D=_n(D,Math.max(A,ge)),je=se.components||1;return Z=Math.max(Z,ge),D+=ge*je,{name:se.name,type:se.type,components:je,offset:Te}}),size:_n(D,Math.max(Z,A)),alignment:A}}function _n(E,A){return Math.ceil(E/A)*A}an.serialize=function(E,A){return E._trim(),A&&(E.isTransferred=!0,A.push(E.arrayBuffer)),{length:E.length,arrayBuffer:E.arrayBuffer}},an.deserialize=function(E){var A=Object.create(this.prototype);return A.arrayBuffer=E.arrayBuffer,A.length=E.length,A.capacity=E.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A},an.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},an.prototype.clear=function(){this.length=0},an.prototype.resize=function(E){this.reserve(E),this.length=E},an.prototype.reserve=function(E){if(E>this.capacity){this.capacity=Math.max(E,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}},an.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Pn=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z){var se=this.length;return this.resize(se+1),this.emplace(se,D,Z)},A.prototype.emplace=function(D,Z,se){var ge=2*D;return this.int16[ge+0]=Z,this.int16[ge+1]=se,D},A}(an);Pn.prototype.bytesPerElement=4,Kt("StructArrayLayout2i4",Pn);var ri=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,D,Z,se,ge)},A.prototype.emplace=function(D,Z,se,ge,Te){var je=4*D;return this.int16[je+0]=Z,this.int16[je+1]=se,this.int16[je+2]=ge,this.int16[je+3]=Te,D},A}(an);ri.prototype.bytesPerElement=8,Kt("StructArrayLayout4i8",ri);var Ei=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,D,Z,se,ge,Te,je)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze){var pt=6*D;return this.int16[pt+0]=Z,this.int16[pt+1]=se,this.int16[pt+2]=ge,this.int16[pt+3]=Te,this.int16[pt+4]=je,this.int16[pt+5]=Ze,D},A}(an);Ei.prototype.bytesPerElement=12,Kt("StructArrayLayout2i4i12",Ei);var zn=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,D,Z,se,ge,Te,je)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze){var pt=4*D,wt=8*D;return this.int16[pt+0]=Z,this.int16[pt+1]=se,this.uint8[wt+4]=ge,this.uint8[wt+5]=Te,this.uint8[wt+6]=je,this.uint8[wt+7]=Ze,D},A}(an);zn.prototype.bytesPerElement=8,Kt("StructArrayLayout2i4ub8",zn);var gi=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z){var se=this.length;return this.resize(se+1),this.emplace(se,D,Z)},A.prototype.emplace=function(D,Z,se){var ge=2*D;return this.float32[ge+0]=Z,this.float32[ge+1]=se,D},A}(an);gi.prototype.bytesPerElement=8,Kt("StructArrayLayout2f8",gi);var Ti=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,D,Z,se,ge,Te,je,Ze,pt,wt,Wt)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt){var dr=10*D;return this.uint16[dr+0]=Z,this.uint16[dr+1]=se,this.uint16[dr+2]=ge,this.uint16[dr+3]=Te,this.uint16[dr+4]=je,this.uint16[dr+5]=Ze,this.uint16[dr+6]=pt,this.uint16[dr+7]=wt,this.uint16[dr+8]=Wt,this.uint16[dr+9]=Xt,D},A}(an);Ti.prototype.bytesPerElement=20,Kt("StructArrayLayout10ui20",Ti);var la=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr){var jr=this.length;return this.resize(jr+1),this.emplace(jr,D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr){var Lr=12*D;return this.int16[Lr+0]=Z,this.int16[Lr+1]=se,this.int16[Lr+2]=ge,this.int16[Lr+3]=Te,this.uint16[Lr+4]=je,this.uint16[Lr+5]=Ze,this.uint16[Lr+6]=pt,this.uint16[Lr+7]=wt,this.int16[Lr+8]=Wt,this.int16[Lr+9]=Xt,this.int16[Lr+10]=dr,this.int16[Lr+11]=jr,D},A}(an);la.prototype.bytesPerElement=24,Kt("StructArrayLayout4i4ui4i24",la);var Vi=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,D,Z,se)},A.prototype.emplace=function(D,Z,se,ge){var Te=3*D;return this.float32[Te+0]=Z,this.float32[Te+1]=se,this.float32[Te+2]=ge,D},A}(an);Vi.prototype.bytesPerElement=12,Kt("StructArrayLayout3f12",Vi);var Ha=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D){var Z=this.length;return this.resize(Z+1),this.emplace(Z,D)},A.prototype.emplace=function(D,Z){return this.uint32[1*D+0]=Z,D},A}(an);Ha.prototype.bytesPerElement=4,Kt("StructArrayLayout1ul4",Ha);var Na=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je,Ze,pt,wt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,D,Z,se,ge,Te,je,Ze,pt,wt)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt){var Xt=10*D,dr=5*D;return this.int16[Xt+0]=Z,this.int16[Xt+1]=se,this.int16[Xt+2]=ge,this.int16[Xt+3]=Te,this.int16[Xt+4]=je,this.int16[Xt+5]=Ze,this.uint32[dr+3]=pt,this.uint16[Xt+8]=wt,this.uint16[Xt+9]=Wt,D},A}(an);Na.prototype.bytesPerElement=20,Kt("StructArrayLayout6i1ul2ui20",Na);var Wa=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,D,Z,se,ge,Te,je)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze){var pt=6*D;return this.int16[pt+0]=Z,this.int16[pt+1]=se,this.int16[pt+2]=ge,this.int16[pt+3]=Te,this.int16[pt+4]=je,this.int16[pt+5]=Ze,D},A}(an);Wa.prototype.bytesPerElement=12,Kt("StructArrayLayout2i2i2i12",Wa);var mi=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te){var je=this.length;return this.resize(je+1),this.emplace(je,D,Z,se,ge,Te)},A.prototype.emplace=function(D,Z,se,ge,Te,je){var Ze=4*D,pt=8*D;return this.float32[Ze+0]=Z,this.float32[Ze+1]=se,this.float32[Ze+2]=ge,this.int16[pt+6]=Te,this.int16[pt+7]=je,D},A}(an);mi.prototype.bytesPerElement=16,Kt("StructArrayLayout2f1f2i16",mi);var eo=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,D,Z,se,ge)},A.prototype.emplace=function(D,Z,se,ge,Te){var je=12*D,Ze=3*D;return this.uint8[je+0]=Z,this.uint8[je+1]=se,this.float32[Ze+1]=ge,this.float32[Ze+2]=Te,D},A}(an);eo.prototype.bytesPerElement=12,Kt("StructArrayLayout2ub2f12",eo);var Lo=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,D,Z,se)},A.prototype.emplace=function(D,Z,se,ge){var Te=3*D;return this.uint16[Te+0]=Z,this.uint16[Te+1]=se,this.uint16[Te+2]=ge,D},A}(an);Lo.prototype.bytesPerElement=6,Kt("StructArrayLayout3ui6",Lo);var po=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr,qr,Jr,Cn){var Un=this.length;return this.resize(Un+1),this.emplace(Un,D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr,qr,Jr,Cn)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr,qr,Jr,Cn,Un){var Jn=24*D,yi=12*D,hi=48*D;return this.int16[Jn+0]=Z,this.int16[Jn+1]=se,this.uint16[Jn+2]=ge,this.uint16[Jn+3]=Te,this.uint32[yi+2]=je,this.uint32[yi+3]=Ze,this.uint32[yi+4]=pt,this.uint16[Jn+10]=wt,this.uint16[Jn+11]=Wt,this.uint16[Jn+12]=Xt,this.float32[yi+7]=dr,this.float32[yi+8]=jr,this.uint8[hi+36]=Lr,this.uint8[hi+37]=qr,this.uint8[hi+38]=Jr,this.uint32[yi+10]=Cn,this.int16[Jn+22]=Un,D},A}(an);po.prototype.bytesPerElement=48,Kt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",po);var Wi=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr,qr,Jr,Cn,Un,Jn,yi,hi,Xi,Zi,ba,Ma,Aa,da,yo){var ka=this.length;return this.resize(ka+1),this.emplace(ka,D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr,qr,Jr,Cn,Un,Jn,yi,hi,Xi,Zi,ba,Ma,Aa,da,yo)},A.prototype.emplace=function(D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr,qr,Jr,Cn,Un,Jn,yi,hi,Xi,Zi,ba,Ma,Aa,da,yo,ka){var Ca=34*D,cs=17*D;return this.int16[Ca+0]=Z,this.int16[Ca+1]=se,this.int16[Ca+2]=ge,this.int16[Ca+3]=Te,this.int16[Ca+4]=je,this.int16[Ca+5]=Ze,this.int16[Ca+6]=pt,this.int16[Ca+7]=wt,this.uint16[Ca+8]=Wt,this.uint16[Ca+9]=Xt,this.uint16[Ca+10]=dr,this.uint16[Ca+11]=jr,this.uint16[Ca+12]=Lr,this.uint16[Ca+13]=qr,this.uint16[Ca+14]=Jr,this.uint16[Ca+15]=Cn,this.uint16[Ca+16]=Un,this.uint16[Ca+17]=Jn,this.uint16[Ca+18]=yi,this.uint16[Ca+19]=hi,this.uint16[Ca+20]=Xi,this.uint16[Ca+21]=Zi,this.uint16[Ca+22]=ba,this.uint32[cs+12]=Ma,this.float32[cs+13]=Aa,this.float32[cs+14]=da,this.float32[cs+15]=yo,this.float32[cs+16]=ka,D},A}(an);Wi.prototype.bytesPerElement=68,Kt("StructArrayLayout8i15ui1ul4f68",Wi);var Oo=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D){var Z=this.length;return this.resize(Z+1),this.emplace(Z,D)},A.prototype.emplace=function(D,Z){return this.float32[1*D+0]=Z,D},A}(an);Oo.prototype.bytesPerElement=4,Kt("StructArrayLayout1f4",Oo);var as=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,D,Z,se)},A.prototype.emplace=function(D,Z,se,ge){var Te=3*D;return this.int16[Te+0]=Z,this.int16[Te+1]=se,this.int16[Te+2]=ge,D},A}(an);as.prototype.bytesPerElement=6,Kt("StructArrayLayout3i6",as);var pu=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,D,Z,se)},A.prototype.emplace=function(D,Z,se,ge){var Te=4*D;return this.uint32[2*D+0]=Z,this.uint16[Te+2]=se,this.uint16[Te+3]=ge,D},A}(an);pu.prototype.bytesPerElement=8,Kt("StructArrayLayout1ul2ui8",pu);var gu=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z){var se=this.length;return this.resize(se+1),this.emplace(se,D,Z)},A.prototype.emplace=function(D,Z,se){var ge=2*D;return this.uint16[ge+0]=Z,this.uint16[ge+1]=se,D},A}(an);gu.prototype.bytesPerElement=4,Kt("StructArrayLayout2ui4",gu);var Sl=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D){var Z=this.length;return this.resize(Z+1),this.emplace(Z,D)},A.prototype.emplace=function(D,Z){return this.uint16[1*D+0]=Z,D},A}(an);Sl.prototype.bytesPerElement=2,Kt("StructArrayLayout1ui2",Sl);var ul=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(D,Z,se,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,D,Z,se,ge)},A.prototype.emplace=function(D,Z,se,ge,Te){var je=4*D;return this.float32[je+0]=Z,this.float32[je+1]=se,this.float32[je+2]=ge,this.float32[je+3]=Te,D},A}(an);ul.prototype.bytesPerElement=16,Kt("StructArrayLayout4f16",ul);var X=function(E){function A(){E.apply(this,arguments)}E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A;var D={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return D.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},D.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},D.x1.get=function(){return this._structArray.int16[this._pos2+2]},D.y1.get=function(){return this._structArray.int16[this._pos2+3]},D.x2.get=function(){return this._structArray.int16[this._pos2+4]},D.y2.get=function(){return this._structArray.int16[this._pos2+5]},D.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},D.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},D.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},D.anchorPoint.get=function(){return new c(this.anchorPointX,this.anchorPointY)},Object.defineProperties(A.prototype,D),A}(Kr);X.prototype.size=20;var k=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.get=function(D){return new X(this,D)},A}(Na);Kt("CollisionBoxArray",k);var F=function(E){function A(){E.apply(this,arguments)}E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A;var D={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return D.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},D.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},D.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},D.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},D.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},D.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},D.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},D.segment.get=function(){return this._structArray.uint16[this._pos2+10]},D.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},D.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},D.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},D.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},D.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},D.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},D.placedOrientation.set=function(Z){this._structArray.uint8[this._pos1+37]=Z},D.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},D.hidden.set=function(Z){this._structArray.uint8[this._pos1+38]=Z},D.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},D.crossTileID.set=function(Z){this._structArray.uint32[this._pos4+10]=Z},D.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(A.prototype,D),A}(Kr);F.prototype.size=48;var $=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.get=function(D){return new F(this,D)},A}(po);Kt("PlacedSymbolArray",$);var G=function(E){function A(){E.apply(this,arguments)}E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A;var D={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return D.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},D.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},D.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},D.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},D.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},D.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},D.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},D.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},D.key.get=function(){return this._structArray.uint16[this._pos2+8]},D.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},D.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},D.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},D.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},D.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},D.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},D.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},D.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},D.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},D.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},D.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},D.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},D.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},D.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},D.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},D.crossTileID.set=function(Z){this._structArray.uint32[this._pos4+12]=Z},D.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},D.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},D.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},D.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(A.prototype,D),A}(Kr);G.prototype.size=68;var ee=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.get=function(D){return new G(this,D)},A}(Wi);Kt("SymbolInstanceArray",ee);var ce=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.getoffsetX=function(D){return this.float32[1*D+0]},A}(Oo);Kt("GlyphOffsetArray",ce);var fe=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.getx=function(D){return this.int16[3*D+0]},A.prototype.gety=function(D){return this.int16[3*D+1]},A.prototype.gettileUnitDistanceFromAnchor=function(D){return this.int16[3*D+2]},A}(as);Kt("SymbolLineVertexArray",fe);var Pe=function(E){function A(){E.apply(this,arguments)}E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A;var D={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return D.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},D.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},D.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(A.prototype,D),A}(Kr);Pe.prototype.size=8;var Ie=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.get=function(D){return new Pe(this,D)},A}(pu);Kt("FeatureIndexArray",Ie);var ke=Qr([{name:"a_pos",components:2,type:"Int16"}],4).members,Ge=function(A){A===void 0&&(A=[]),this.segments=A};function Je(E,A){return 256*(E=f(Math.floor(E),0,255))+f(Math.floor(A),0,255)}Ge.prototype.prepareSegment=function(E,A,D,Z){var se=this.segments[this.segments.length-1];return E>Ge.MAX_VERTEX_ARRAY_LENGTH&&j("Max vertices per segment is "+Ge.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+E),(!se||se.vertexLength+E>Ge.MAX_VERTEX_ARRAY_LENGTH||se.sortKey!==Z)&&(se={vertexOffset:A.length,primitiveOffset:D.length,vertexLength:0,primitiveLength:0},Z!==void 0&&(se.sortKey=Z),this.segments.push(se)),se},Ge.prototype.get=function(){return this.segments},Ge.prototype.destroy=function(){for(var E=0,A=this.segments;E<A.length;E+=1){var D=A[E];for(var Z in D.vaos)D.vaos[Z].destroy()}},Ge.simpleSegment=function(E,A,D,Z){return new Ge([{vertexOffset:E,primitiveOffset:A,vertexLength:D,primitiveLength:Z,vaos:{},sortKey:0}])},Ge.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Kt("SegmentVector",Ge);var vt=Qr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),_t=g(function(E){E.exports=function(A,D){var Z,se,ge,Te,je,Ze,pt,wt;for(se=A.length-(Z=3&A.length),ge=D,je=3432918353,Ze=461845907,wt=0;wt<se;)pt=255&A.charCodeAt(wt)|(255&A.charCodeAt(++wt))<<8|(255&A.charCodeAt(++wt))<<16|(255&A.charCodeAt(++wt))<<24,++wt,ge=27492+(65535&(Te=5*(65535&(ge=(ge^=pt=(65535&(pt=(pt=(65535&pt)*je+(((pt>>>16)*je&65535)<<16)&4294967295)<<15|pt>>>17))*Ze+(((pt>>>16)*Ze&65535)<<16)&4294967295)<<13|ge>>>19))+((5*(ge>>>16)&65535)<<16)&4294967295))+((58964+(Te>>>16)&65535)<<16);switch(pt=0,Z){case 3:pt^=(255&A.charCodeAt(wt+2))<<16;case 2:pt^=(255&A.charCodeAt(wt+1))<<8;case 1:ge^=pt=(65535&(pt=(pt=(65535&(pt^=255&A.charCodeAt(wt)))*je+(((pt>>>16)*je&65535)<<16)&4294967295)<<15|pt>>>17))*Ze+(((pt>>>16)*Ze&65535)<<16)&4294967295}return ge^=A.length,ge=2246822507*(65535&(ge^=ge>>>16))+((2246822507*(ge>>>16)&65535)<<16)&4294967295,ge=3266489909*(65535&(ge^=ge>>>13))+((3266489909*(ge>>>16)&65535)<<16)&4294967295,(ge^=ge>>>16)>>>0}}),Rt=g(function(E){E.exports=function(A,D){for(var Z,se=A.length,ge=D^se,Te=0;se>=4;)Z=1540483477*(65535&(Z=255&A.charCodeAt(Te)|(255&A.charCodeAt(++Te))<<8|(255&A.charCodeAt(++Te))<<16|(255&A.charCodeAt(++Te))<<24))+((1540483477*(Z>>>16)&65535)<<16),ge=1540483477*(65535&ge)+((1540483477*(ge>>>16)&65535)<<16)^(Z=1540483477*(65535&(Z^=Z>>>24))+((1540483477*(Z>>>16)&65535)<<16)),se-=4,++Te;switch(se){case 3:ge^=(255&A.charCodeAt(Te+2))<<16;case 2:ge^=(255&A.charCodeAt(Te+1))<<8;case 1:ge=1540483477*(65535&(ge^=255&A.charCodeAt(Te)))+((1540483477*(ge>>>16)&65535)<<16)}return ge=1540483477*(65535&(ge^=ge>>>13))+((1540483477*(ge>>>16)&65535)<<16),(ge^=ge>>>15)>>>0}}),Pt=_t,Gt=Rt;Pt.murmur3=_t,Pt.murmur2=Gt;var ur=function(){this.ids=[],this.positions=[],this.indexed=!1};ur.prototype.add=function(E,A,D,Z){this.ids.push(nn(E)),this.positions.push(A,D,Z)},ur.prototype.getPositions=function(E){for(var A=nn(E),D=0,Z=this.ids.length-1;D<Z;){var se=D+Z>>1;this.ids[se]>=A?Z=se:D=se+1}for(var ge=[];this.ids[D]===A;)ge.push({index:this.positions[3*D],start:this.positions[3*D+1],end:this.positions[3*D+2]}),D++;return ge},ur.serialize=function(E,A){var D=new Float64Array(E.ids),Z=new Uint32Array(E.positions);return function se(ge,Te,je,Ze){for(;je<Ze;){for(var pt=ge[je+Ze>>1],wt=je-1,Wt=Ze+1;;){do wt++;while(ge[wt]<pt);do Wt--;while(ge[Wt]>pt);if(wt>=Wt)break;Yr(ge,wt,Wt),Yr(Te,3*wt,3*Wt),Yr(Te,3*wt+1,3*Wt+1),Yr(Te,3*wt+2,3*Wt+2)}Wt-je<Ze-Wt?(se(ge,Te,je,Wt),je=Wt+1):(se(ge,Te,Wt+1,Ze),Ze=Wt)}}(D,Z,0,D.length-1),A&&A.push(D.buffer,Z.buffer),{ids:D,positions:Z}},ur.deserialize=function(E){var A=new ur;return A.ids=E.ids,A.positions=E.positions,A.indexed=!0,A};var hr=Math.pow(2,53)-1;function nn(E){var A=+E;return!isNaN(A)&&A<=hr?A:Pt(String(E))}function Yr(E,A,D){var Z=E[A];E[A]=E[D],E[D]=Z}Kt("FeaturePositionMap",ur);var Tn=function(A,D){this.gl=A.gl,this.location=D},In=function(E){function A(D,Z){E.call(this,D,Z),this.current=0}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){this.current!==D&&(this.current=D,this.gl.uniform1i(this.location,D))},A}(Tn),si=function(E){function A(D,Z){E.call(this,D,Z),this.current=0}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){this.current!==D&&(this.current=D,this.gl.uniform1f(this.location,D))},A}(Tn),ni=function(E){function A(D,Z){E.call(this,D,Z),this.current=[0,0]}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){D[0]===this.current[0]&&D[1]===this.current[1]||(this.current=D,this.gl.uniform2f(this.location,D[0],D[1]))},A}(Tn),Ci=function(E){function A(D,Z){E.call(this,D,Z),this.current=[0,0,0]}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){D[0]===this.current[0]&&D[1]===this.current[1]&&D[2]===this.current[2]||(this.current=D,this.gl.uniform3f(this.location,D[0],D[1],D[2]))},A}(Tn),Ji=function(E){function A(D,Z){E.call(this,D,Z),this.current=[0,0,0,0]}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){D[0]===this.current[0]&&D[1]===this.current[1]&&D[2]===this.current[2]&&D[3]===this.current[3]||(this.current=D,this.gl.uniform4f(this.location,D[0],D[1],D[2],D[3]))},A}(Tn),ha=function(E){function A(D,Z){E.call(this,D,Z),this.current=Yn.transparent}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){D.r===this.current.r&&D.g===this.current.g&&D.b===this.current.b&&D.a===this.current.a||(this.current=D,this.gl.uniform4f(this.location,D.r,D.g,D.b,D.a))},A}(Tn),ya=new Float32Array(16),to=function(E){function A(D,Z){E.call(this,D,Z),this.current=ya}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.set=function(D){if(D[12]!==this.current[12]||D[0]!==this.current[0])return this.current=D,void this.gl.uniformMatrix4fv(this.location,!1,D);for(var Z=1;Z<16;Z++)if(D[Z]!==this.current[Z]){this.current=D,this.gl.uniformMatrix4fv(this.location,!1,D);break}},A}(Tn);function wo(E){return[Je(255*E.r,255*E.g),Je(255*E.b,255*E.a)]}var ta=function(A,D,Z){this.value=A,this.uniformNames=D.map(function(se){return"u_"+se}),this.type=Z};ta.prototype.setUniform=function(E,A,D){E.set(D.constantOr(this.value))},ta.prototype.getBinding=function(E,A,D){return this.type==="color"?new ha(E,A):new si(E,A)};var Ka=function(A,D){this.uniformNames=D.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ka.prototype.setConstantPatternPositions=function(E,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=E.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=E.tlbr},Ka.prototype.setUniform=function(E,A,D,Z){var se=Z==="u_pattern_to"?this.patternTo:Z==="u_pattern_from"?this.patternFrom:Z==="u_pixel_ratio_to"?this.pixelRatioTo:Z==="u_pixel_ratio_from"?this.pixelRatioFrom:null;se&&E.set(se)},Ka.prototype.getBinding=function(E,A,D){return D.substr(0,9)==="u_pattern"?new Ji(E,A):new si(E,A)};var Ga=function(A,D,Z,se){this.expression=A,this.type=Z,this.maxValue=0,this.paintVertexAttributes=D.map(function(ge){return{name:"a_"+ge,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new se};Ga.prototype.populatePaintArray=function(E,A,D,Z,se){var ge=this.paintVertexArray.length,Te=this.expression.evaluate(new bn(0),A,{},Z,[],se);this.paintVertexArray.resize(E),this._setPaintValue(ge,E,Te)},Ga.prototype.updatePaintArray=function(E,A,D,Z){var se=this.expression.evaluate({zoom:0},D,Z);this._setPaintValue(E,A,se)},Ga.prototype._setPaintValue=function(E,A,D){if(this.type==="color")for(var Z=wo(D),se=E;se<A;se++)this.paintVertexArray.emplace(se,Z[0],Z[1]);else{for(var ge=E;ge<A;ge++)this.paintVertexArray.emplace(ge,D);this.maxValue=Math.max(this.maxValue,Math.abs(D))}},Ga.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ua=function(A,D,Z,se,ge,Te){this.expression=A,this.uniformNames=D.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=se,this.zoom=ge,this.maxValue=0,this.paintVertexAttributes=D.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Te};ua.prototype.populatePaintArray=function(E,A,D,Z,se){var ge=this.expression.evaluate(new bn(this.zoom),A,{},Z,[],se),Te=this.expression.evaluate(new bn(this.zoom+1),A,{},Z,[],se),je=this.paintVertexArray.length;this.paintVertexArray.resize(E),this._setPaintValue(je,E,ge,Te)},ua.prototype.updatePaintArray=function(E,A,D,Z){var se=this.expression.evaluate({zoom:this.zoom},D,Z),ge=this.expression.evaluate({zoom:this.zoom+1},D,Z);this._setPaintValue(E,A,se,ge)},ua.prototype._setPaintValue=function(E,A,D,Z){if(this.type==="color")for(var se=wo(D),ge=wo(Z),Te=E;Te<A;Te++)this.paintVertexArray.emplace(Te,se[0],se[1],ge[0],ge[1]);else{for(var je=E;je<A;je++)this.paintVertexArray.emplace(je,D,Z);this.maxValue=Math.max(this.maxValue,Math.abs(D),Math.abs(Z))}},ua.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ua.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ua.prototype.setUniform=function(E,A){var D=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,Z=f(this.expression.interpolationFactor(D,this.zoom,this.zoom+1),0,1);E.set(Z)},ua.prototype.getBinding=function(E,A,D){return new si(E,A)};var Xa=function(A,D,Z,se,ge,Te){this.expression=A,this.type=D,this.useIntegerZoom=Z,this.zoom=se,this.layerId=Te,this.zoomInPaintVertexArray=new ge,this.zoomOutPaintVertexArray=new ge};Xa.prototype.populatePaintArray=function(E,A,D){var Z=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(E),this.zoomOutPaintVertexArray.resize(E),this._setPaintValues(Z,E,A.patterns&&A.patterns[this.layerId],D)},Xa.prototype.updatePaintArray=function(E,A,D,Z,se){this._setPaintValues(E,A,D.patterns&&D.patterns[this.layerId],se)},Xa.prototype._setPaintValues=function(E,A,D,Z){if(Z&&D){var se=Z[D.min],ge=Z[D.mid],Te=Z[D.max];if(se&&ge&&Te)for(var je=E;je<A;je++)this.zoomInPaintVertexArray.emplace(je,ge.tl[0],ge.tl[1],ge.br[0],ge.br[1],se.tl[0],se.tl[1],se.br[0],se.br[1],ge.pixelRatio,se.pixelRatio),this.zoomOutPaintVertexArray.emplace(je,ge.tl[0],ge.tl[1],ge.br[0],ge.br[1],Te.tl[0],Te.tl[1],Te.br[0],Te.br[1],ge.pixelRatio,Te.pixelRatio)}},Xa.prototype.upload=function(E){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=E.createVertexBuffer(this.zoomInPaintVertexArray,vt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=E.createVertexBuffer(this.zoomOutPaintVertexArray,vt.members,this.expression.isStateDependent))},Xa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ea=function(A,D,Z){this.binders={},this._buffers=[];var se=[];for(var ge in A.paint._values)if(Z(ge)){var Te=A.paint.get(ge);if(Te instanceof nt&&nu(Te.property.specification)){var je=Co(ge,A.type),Ze=Te.value,pt=Te.property.specification.type,wt=Te.property.useIntegerZoom,Wt=Te.property.specification["property-type"],Xt=Wt==="cross-faded"||Wt==="cross-faded-data-driven";if(Ze.kind==="constant")this.binders[ge]=Xt?new Ka(Ze.value,je):new ta(Ze.value,je,pt),se.push("/u_"+ge);else if(Ze.kind==="source"||Xt){var dr=iu(ge,pt,"source");this.binders[ge]=Xt?new Xa(Ze,pt,wt,D,dr,A.id):new Ga(Ze,je,pt,dr),se.push("/a_"+ge)}else{var jr=iu(ge,pt,"composite");this.binders[ge]=new ua(Ze,je,pt,wt,D,jr),se.push("/z_"+ge)}}}this.cacheKey=se.sort().join("")};Ea.prototype.getMaxValue=function(E){var A=this.binders[E];return A instanceof Ga||A instanceof ua?A.maxValue:0},Ea.prototype.populatePaintArrays=function(E,A,D,Z,se){for(var ge in this.binders){var Te=this.binders[ge];(Te instanceof Ga||Te instanceof ua||Te instanceof Xa)&&Te.populatePaintArray(E,A,D,Z,se)}},Ea.prototype.setConstantPatternPositions=function(E,A){for(var D in this.binders){var Z=this.binders[D];Z instanceof Ka&&Z.setConstantPatternPositions(E,A)}},Ea.prototype.updatePaintArrays=function(E,A,D,Z,se){var ge=!1;for(var Te in E)for(var je=0,Ze=A.getPositions(Te);je<Ze.length;je+=1){var pt=Ze[je],wt=D.feature(pt.index);for(var Wt in this.binders){var Xt=this.binders[Wt];if((Xt instanceof Ga||Xt instanceof ua||Xt instanceof Xa)&&Xt.expression.isStateDependent===!0){var dr=Z.paint.get(Wt);Xt.expression=dr.value,Xt.updatePaintArray(pt.start,pt.end,wt,E[Te],se),ge=!0}}}return ge},Ea.prototype.defines=function(){var E=[];for(var A in this.binders){var D=this.binders[A];(D instanceof ta||D instanceof Ka)&&E.push.apply(E,D.uniformNames.map(function(Z){return"#define HAS_UNIFORM_"+Z}))}return E},Ea.prototype.getBinderAttributes=function(){var E=[];for(var A in this.binders){var D=this.binders[A];if(D instanceof Ga||D instanceof ua)for(var Z=0;Z<D.paintVertexAttributes.length;Z++)E.push(D.paintVertexAttributes[Z].name);else if(D instanceof Xa)for(var se=0;se<vt.members.length;se++)E.push(vt.members[se].name)}return E},Ea.prototype.getBinderUniforms=function(){var E=[];for(var A in this.binders){var D=this.binders[A];if(D instanceof ta||D instanceof Ka||D instanceof ua)for(var Z=0,se=D.uniformNames;Z<se.length;Z+=1)E.push(se[Z])}return E},Ea.prototype.getPaintVertexBuffers=function(){return this._buffers},Ea.prototype.getUniforms=function(E,A){var D=[];for(var Z in this.binders){var se=this.binders[Z];if(se instanceof ta||se instanceof Ka||se instanceof ua)for(var ge=0,Te=se.uniformNames;ge<Te.length;ge+=1){var je=Te[ge];if(A[je]){var Ze=se.getBinding(E,A[je],je);D.push({name:je,property:Z,binding:Ze})}}}return D},Ea.prototype.setUniforms=function(E,A,D,Z){for(var se=0,ge=A;se<ge.length;se+=1){var Te=ge[se],je=Te.name,Ze=Te.property;this.binders[Ze].setUniform(Te.binding,Z,D.get(Ze),je)}},Ea.prototype.updatePaintBuffers=function(E){for(var A in this._buffers=[],this.binders){var D=this.binders[A];if(E&&D instanceof Xa){var Z=E.fromScale===2?D.zoomInPaintVertexBuffer:D.zoomOutPaintVertexBuffer;Z&&this._buffers.push(Z)}else(D instanceof Ga||D instanceof ua)&&D.paintVertexBuffer&&this._buffers.push(D.paintVertexBuffer)}},Ea.prototype.upload=function(E){for(var A in this.binders){var D=this.binders[A];(D instanceof Ga||D instanceof ua||D instanceof Xa)&&D.upload(E)}this.updatePaintBuffers()},Ea.prototype.destroy=function(){for(var E in this.binders){var A=this.binders[E];(A instanceof Ga||A instanceof ua||A instanceof Xa)&&A.destroy()}};var ro=function(A,D,Z){Z===void 0&&(Z=function(){return!0}),this.programConfigurations={};for(var se=0,ge=A;se<ge.length;se+=1){var Te=ge[se];this.programConfigurations[Te.id]=new Ea(Te,D,Z)}this.needsUpload=!1,this._featureMap=new ur,this._bufferOffset=0};function Co(E,A){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[E]||[E.replace(A+"-","").replace(/-/g,"_")]}function iu(E,A,D){var Z={color:{source:gi,composite:ul},number:{source:Oo,composite:gi}},se=function(ge){return{"line-pattern":{source:Ti,composite:Ti},"fill-pattern":{source:Ti,composite:Ti},"fill-extrusion-pattern":{source:Ti,composite:Ti}}[ge]}(E);return se&&se[D]||Z[A][D]}ro.prototype.populatePaintArrays=function(E,A,D,Z,se,ge){for(var Te in this.programConfigurations)this.programConfigurations[Te].populatePaintArrays(E,A,Z,se,ge);A.id!==void 0&&this._featureMap.add(A.id,D,this._bufferOffset,E),this._bufferOffset=E,this.needsUpload=!0},ro.prototype.updatePaintArrays=function(E,A,D,Z){for(var se=0,ge=D;se<ge.length;se+=1){var Te=ge[se];this.needsUpload=this.programConfigurations[Te.id].updatePaintArrays(E,this._featureMap,A,Te,Z)||this.needsUpload}},ro.prototype.get=function(E){return this.programConfigurations[E]},ro.prototype.upload=function(E){if(this.needsUpload){for(var A in this.programConfigurations)this.programConfigurations[A].upload(E);this.needsUpload=!1}},ro.prototype.destroy=function(){for(var E in this.programConfigurations)this.programConfigurations[E].destroy()},Kt("ConstantBinder",ta),Kt("CrossFadedConstantBinder",Ka),Kt("SourceExpressionBinder",Ga),Kt("CrossFadedCompositeBinder",Xa),Kt("CompositeExpressionBinder",ua),Kt("ProgramConfiguration",Ea,{omit:["_buffers"]}),Kt("ProgramConfigurationSet",ro);var $s=Math.pow(2,14)-1,Eu=-$s-1;function Ds(E){for(var A=8192/E.extent,D=E.loadGeometry(),Z=0;Z<D.length;Z++)for(var se=D[Z],ge=0;ge<se.length;ge++){var Te=se[ge],je=Math.round(Te.x*A),Ze=Math.round(Te.y*A);Te.x=f(je,Eu,$s),Te.y=f(Ze,Eu,$s),(je<Te.x||je>Te.x+1||Ze<Te.y||Ze>Te.y+1)&&j("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return D}function qs(E,A){return{type:E.type,id:E.id,properties:E.properties,geometry:A?Ds(E):[]}}function vl(E,A,D,Z,se){E.emplaceBack(2*A+(Z+1)/2,2*D+(se+1)/2)}var Xu=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Pn,this.indexArray=new Lo,this.segments=new Ge,this.programConfigurations=new ro(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function pc(E,A){for(var D=0;D<E.length;D++)if(zc(A,E[D]))return!0;for(var Z=0;Z<A.length;Z++)if(zc(E,A[Z]))return!0;return!!_f(E,A)}function Rc(E,A,D){return!!zc(E,A)||!!Ic(A,E,D)}function Ll(E,A){if(E.length===1)return kc(A,E[0]);for(var D=0;D<A.length;D++)for(var Z=A[D],se=0;se<Z.length;se++)if(zc(E,Z[se]))return!0;for(var ge=0;ge<E.length;ge++)if(kc(A,E[ge]))return!0;for(var Te=0;Te<A.length;Te++)if(_f(E,A[Te]))return!0;return!1}function dc(E,A,D){if(E.length>1){if(_f(E,A))return!0;for(var Z=0;Z<A.length;Z++)if(Ic(A[Z],E,D))return!0}for(var se=0;se<E.length;se++)if(Ic(E[se],A,D))return!0;return!1}function _f(E,A){if(E.length===0||A.length===0)return!1;for(var D=0;D<E.length-1;D++)for(var Z=E[D],se=E[D+1],ge=0;ge<A.length-1;ge++)if(bf(Z,se,A[ge],A[ge+1]))return!0;return!1}function bf(E,A,D,Z){return N(E,D,Z)!==N(A,D,Z)&&N(E,A,D)!==N(E,A,Z)}function Ic(E,A,D){var Z=D*D;if(A.length===1)return E.distSqr(A[0])<Z;for(var se=1;se<A.length;se++)if(Kc(E,A[se-1],A[se])<Z)return!0;return!1}function Kc(E,A,D){var Z=A.distSqr(D);if(Z===0)return E.distSqr(A);var se=((E.x-A.x)*(D.x-A.x)+(E.y-A.y)*(D.y-A.y))/Z;return E.distSqr(se<0?A:se>1?D:D.sub(A)._mult(se)._add(A))}function kc(E,A){for(var D,Z,se,ge=!1,Te=0;Te<E.length;Te++)for(var je=0,Ze=(D=E[Te]).length-1;je<D.length;Ze=je++)(Z=D[je]).y>A.y!=(se=D[Ze]).y>A.y&&A.x<(se.x-Z.x)*(A.y-Z.y)/(se.y-Z.y)+Z.x&&(ge=!ge);return ge}function zc(E,A){for(var D=!1,Z=0,se=E.length-1;Z<E.length;se=Z++){var ge=E[Z],Te=E[se];ge.y>A.y!=Te.y>A.y&&A.x<(Te.x-ge.x)*(A.y-ge.y)/(Te.y-ge.y)+ge.x&&(D=!D)}return D}function af(E,A,D){var Z=D[0],se=D[2];if(E.x<Z.x&&A.x<Z.x||E.x>se.x&&A.x>se.x||E.y<Z.y&&A.y<Z.y||E.y>se.y&&A.y>se.y)return!1;var ge=N(E,A,D[0]);return ge!==N(E,A,D[1])||ge!==N(E,A,D[2])||ge!==N(E,A,D[3])}function Gl(E,A,D){var Z=A.paint.get(E).value;return Z.kind==="constant"?Z.value:D.programConfigurations.get(A.id).getMaxValue(E)}function ll(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function ac(E,A,D,Z,se){if(!A[0]&&!A[1])return E;var ge=c.convert(A)._mult(se);D==="viewport"&&ge._rotate(-Z);for(var Te=[],je=0;je<E.length;je++)Te.push(E[je].sub(ge));return Te}Xu.prototype.populate=function(E,A,D){var Z=this.layers[0],se=[],ge=null;Z.type==="circle"&&(ge=Z.layout.get("circle-sort-key"));for(var Te=0,je=E;Te<je.length;Te+=1){var Ze=je[Te],pt=Ze.feature,wt=Ze.id,Wt=Ze.index,Xt=Ze.sourceLayerIndex,dr=this.layers[0]._featureFilter.needGeometry,jr=qs(pt,dr);if(this.layers[0]._featureFilter.filter(new bn(this.zoom),jr,D)){var Lr=ge?ge.evaluate(jr,{},D):void 0,qr={id:wt,properties:pt.properties,type:pt.type,sourceLayerIndex:Xt,index:Wt,geometry:dr?jr.geometry:Ds(pt),patterns:{},sortKey:Lr};se.push(qr)}}ge&&se.sort(function(Zi,ba){return Zi.sortKey-ba.sortKey});for(var Jr=0,Cn=se;Jr<Cn.length;Jr+=1){var Un=Cn[Jr],Jn=Un.geometry,yi=Un.index,hi=Un.sourceLayerIndex,Xi=E[yi].feature;this.addFeature(Un,Jn,yi,D),A.featureIndex.insert(Xi,Jn,yi,hi,this.index)}},Xu.prototype.update=function(E,A,D){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,A,this.stateDependentLayers,D)},Xu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xu.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,ke),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},Xu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xu.prototype.addFeature=function(E,A,D,Z){for(var se=0,ge=A;se<ge.length;se+=1)for(var Te=0,je=ge[se];Te<je.length;Te+=1){var Ze=je[Te],pt=Ze.x,wt=Ze.y;if(!(pt<0||pt>=8192||wt<0||wt>=8192)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,E.sortKey),Xt=Wt.vertexLength;vl(this.layoutVertexArray,pt,wt,-1,-1),vl(this.layoutVertexArray,pt,wt,1,-1),vl(this.layoutVertexArray,pt,wt,1,1),vl(this.layoutVertexArray,pt,wt,-1,1),this.indexArray.emplaceBack(Xt,Xt+1,Xt+2),this.indexArray.emplaceBack(Xt,Xt+3,Xt+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,D,{},Z)},Kt("CircleBucket",Xu,{omit:["layers"]});var of=new xr({"circle-sort-key":new Dt(qe.layout_circle["circle-sort-key"])}),Lc={paint:new xr({"circle-radius":new Dt(qe.paint_circle["circle-radius"]),"circle-color":new Dt(qe.paint_circle["circle-color"]),"circle-blur":new Dt(qe.paint_circle["circle-blur"]),"circle-opacity":new Dt(qe.paint_circle["circle-opacity"]),"circle-translate":new dt(qe.paint_circle["circle-translate"]),"circle-translate-anchor":new dt(qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dt(qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dt(qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dt(qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dt(qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dt(qe.paint_circle["circle-stroke-opacity"])}),layout:of},cl=typeof Float32Array!="undefined"?Float32Array:Array;function fl(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function Su(E,A,D){var Z=A[0],se=A[1],ge=A[2],Te=A[3],je=A[4],Ze=A[5],pt=A[6],wt=A[7],Wt=A[8],Xt=A[9],dr=A[10],jr=A[11],Lr=A[12],qr=A[13],Jr=A[14],Cn=A[15],Un=D[0],Jn=D[1],yi=D[2],hi=D[3];return E[0]=Un*Z+Jn*je+yi*Wt+hi*Lr,E[1]=Un*se+Jn*Ze+yi*Xt+hi*qr,E[2]=Un*ge+Jn*pt+yi*dr+hi*Jr,E[3]=Un*Te+Jn*wt+yi*jr+hi*Cn,E[4]=(Un=D[4])*Z+(Jn=D[5])*je+(yi=D[6])*Wt+(hi=D[7])*Lr,E[5]=Un*se+Jn*Ze+yi*Xt+hi*qr,E[6]=Un*ge+Jn*pt+yi*dr+hi*Jr,E[7]=Un*Te+Jn*wt+yi*jr+hi*Cn,E[8]=(Un=D[8])*Z+(Jn=D[9])*je+(yi=D[10])*Wt+(hi=D[11])*Lr,E[9]=Un*se+Jn*Ze+yi*Xt+hi*qr,E[10]=Un*ge+Jn*pt+yi*dr+hi*Jr,E[11]=Un*Te+Jn*wt+yi*jr+hi*Cn,E[12]=(Un=D[12])*Z+(Jn=D[13])*je+(yi=D[14])*Wt+(hi=D[15])*Lr,E[13]=Un*se+Jn*Ze+yi*Xt+hi*qr,E[14]=Un*ge+Jn*pt+yi*dr+hi*Jr,E[15]=Un*Te+Jn*wt+yi*jr+hi*Cn,E}Math.hypot||(Math.hypot=function(){for(var E=arguments,A=0,D=arguments.length;D--;)A+=E[D]*E[D];return Math.sqrt(A)});var Xl,ql=Su;function Dc(E,A,D){var Z=A[0],se=A[1],ge=A[2],Te=A[3];return E[0]=D[0]*Z+D[4]*se+D[8]*ge+D[12]*Te,E[1]=D[1]*Z+D[5]*se+D[9]*ge+D[13]*Te,E[2]=D[2]*Z+D[6]*se+D[10]*ge+D[14]*Te,E[3]=D[3]*Z+D[7]*se+D[11]*ge+D[15]*Te,E}Xl=new cl(3),cl!=Float32Array&&(Xl[0]=0,Xl[1]=0,Xl[2]=0),function(){var E=new cl(4);cl!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0)}();var fh=(function(){var E=new cl(2);cl!=Float32Array&&(E[0]=0,E[1]=0)}(),function(E){function A(D){E.call(this,D,Lc)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.createBucket=function(D){return new Xu(D)},A.prototype.queryRadius=function(D){var Z=D;return Gl("circle-radius",this,Z)+Gl("circle-stroke-width",this,Z)+ll(this.paint.get("circle-translate"))},A.prototype.queryIntersectsFeature=function(D,Z,se,ge,Te,je,Ze,pt){for(var wt=ac(D,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),je.angle,Ze),Wt=this.paint.get("circle-radius").evaluate(Z,se)+this.paint.get("circle-stroke-width").evaluate(Z,se),Xt=this.paint.get("circle-pitch-alignment")==="map",dr=Xt?wt:function(Xi,Zi){return Xi.map(function(ba){return wh(ba,Zi)})}(wt,pt),jr=Xt?Wt*Ze:Wt,Lr=0,qr=ge;Lr<qr.length;Lr+=1)for(var Jr=0,Cn=qr[Lr];Jr<Cn.length;Jr+=1){var Un=Cn[Jr],Jn=Xt?Un:wh(Un,pt),yi=jr,hi=Dc([],[Un.x,Un.y,0,1],pt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?yi*=hi[3]/je.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(yi*=je.cameraToCenterDistance/hi[3]),Rc(dr,Jn,yi))return!0}return!1},A}(yr));function wh(E,A){var D=Dc([],[E.x,E.y,0,1],A);return new c(D[0]/D[3],D[1]/D[3])}var xf=function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A}(Xu);function gc(E,A,D,Z){var se=A.width,ge=A.height;if(Z){if(Z instanceof Uint8ClampedArray)Z=new Uint8Array(Z.buffer);else if(Z.length!==se*ge*D)throw new RangeError("mismatched image size")}else Z=new Uint8Array(se*ge*D);return E.width=se,E.height=ge,E.data=Z,E}function Rh(E,A,D){var Z=A.width,se=A.height;if(Z!==E.width||se!==E.height){var ge=gc({},{width:Z,height:se},D);jf(E,ge,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,Z),height:Math.min(E.height,se)},D),E.width=Z,E.height=se,E.data=ge.data}}function jf(E,A,D,Z,se,ge){if(se.width===0||se.height===0)return A;if(se.width>E.width||se.height>E.height||D.x>E.width-se.width||D.y>E.height-se.height)throw new RangeError("out of range source coordinates for image copy");if(se.width>A.width||se.height>A.height||Z.x>A.width-se.width||Z.y>A.height-se.height)throw new RangeError("out of range destination coordinates for image copy");for(var Te=E.data,je=A.data,Ze=0;Ze<se.height;Ze++)for(var pt=((D.y+Ze)*E.width+D.x)*ge,wt=((Z.y+Ze)*A.width+Z.x)*ge,Wt=0;Wt<se.width*ge;Wt++)je[wt+Wt]=Te[pt+Wt];return A}Kt("HeatmapBucket",xf,{omit:["layers"]});var Vc=function(A,D){gc(this,A,1,D)};Vc.prototype.resize=function(E){Rh(this,E,1)},Vc.prototype.clone=function(){return new Vc({width:this.width,height:this.height},new Uint8Array(this.data))},Vc.copy=function(E,A,D,Z,se){jf(E,A,D,Z,se,1)};var oc=function(A,D){gc(this,A,4,D)};oc.prototype.resize=function(E){Rh(this,E,4)},oc.prototype.replace=function(E,A){A?this.data.set(E):this.data=E instanceof Uint8ClampedArray?new Uint8Array(E.buffer):E},oc.prototype.clone=function(){return new oc({width:this.width,height:this.height},new Uint8Array(this.data))},oc.copy=function(E,A,D,Z,se){jf(E,A,D,Z,se,4)},Kt("AlphaImage",Vc),Kt("RGBAImage",oc);var tp={paint:new xr({"heatmap-radius":new Dt(qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dt(qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dt(qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jt(qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dt(qe.paint_heatmap["heatmap-opacity"])})};function Cd(E){var A={},D=E.resolution||256,Z=E.clips?E.clips.length:1,se=E.image||new oc({width:D,height:Z}),ge=function(Lr,qr,Jr){A[E.evaluationKey]=Jr;var Cn=E.expression.evaluate(A);se.data[Lr+qr+0]=Math.floor(255*Cn.r/Cn.a),se.data[Lr+qr+1]=Math.floor(255*Cn.g/Cn.a),se.data[Lr+qr+2]=Math.floor(255*Cn.b/Cn.a),se.data[Lr+qr+3]=Math.floor(255*Cn.a)};if(E.clips)for(var Te=0,je=0;Te<Z;++Te,je+=4*D)for(var Ze=0,pt=0;Ze<D;Ze++,pt+=4){var wt=Ze/(D-1),Wt=E.clips[Te];ge(je,pt,Wt.start*(1-wt)+Wt.end*wt)}else for(var Xt=0,dr=0;Xt<D;Xt++,dr+=4)ge(0,dr,Xt/(D-1));return se}var sc=function(E){function A(D){E.call(this,D,tp),this._updateColorRamp()}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.createBucket=function(D){return new xf(D)},A.prototype._handleSpecialPaintPropertyUpdate=function(D){D==="heatmap-color"&&this._updateColorRamp()},A.prototype._updateColorRamp=function(){this.colorRamp=Cd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},A.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},A.prototype.queryRadius=function(){return 0},A.prototype.queryIntersectsFeature=function(){return!1},A.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},A}(yr),Pd={paint:new xr({"hillshade-illumination-direction":new dt(qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new dt(qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dt(qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dt(qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dt(qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dt(qe.paint_hillshade["hillshade-accent-color"])})},rp=function(E){function A(D){E.call(this,D,Pd)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},A}(yr),np=Qr([{name:"a_pos",components:2,type:"Int16"}],4).members,Kh=Jh,ip=Jh;function Jh(E,A,D){D=D||2;var Z,se,ge,Te,je,Ze,pt,wt=A&&A.length,Wt=wt?A[0]*D:E.length,Xt=sv(E,0,Wt,D,!0),dr=[];if(!Xt||Xt.next===Xt.prev)return dr;if(wt&&(Xt=function(Lr,qr,Jr,Cn){var Un,Jn,yi,hi=[];for(Un=0,Jn=qr.length;Un<Jn;Un++)(yi=sv(Lr,qr[Un]*Cn,Un<Jn-1?qr[Un+1]*Cn:Lr.length,Cn,!1))===yi.next&&(yi.steiner=!0),hi.push(Lh(yi));for(hi.sort(up),Un=0;Un<hi.length;Un++)wd(hi[Un],Jr),Jr=Bf(Jr,Jr.next);return Jr}(E,A,Xt,D)),E.length>80*D){Z=ge=E[0],se=Te=E[1];for(var jr=D;jr<Wt;jr+=D)(je=E[jr])<Z&&(Z=je),(Ze=E[jr+1])<se&&(se=Ze),je>ge&&(ge=je),Ze>Te&&(Te=Ze);pt=(pt=Math.max(ge-Z,Te-se))!==0?1/pt:0}return Ih(Xt,dr,D,Z,se,pt),dr}function sv(E,A,D,Z,se){var ge,Te;if(se===Kf(E,A,D,Z)>0)for(ge=A;ge<D;ge+=Z)Te=vh(ge,E[ge],E[ge+1],Te);else for(ge=D-Z;ge>=A;ge-=Z)Te=vh(ge,E[ge],E[ge+1],Te);return Te&&Yf(Te,Te.next)&&(Sf(Te),Te=Te.next),Te}function Bf(E,A){if(!E)return E;A||(A=E);var D,Z=E;do if(D=!1,Z.steiner||!Yf(Z,Z.next)&&fu(Z.prev,Z,Z.next)!==0)Z=Z.next;else{if(Sf(Z),(Z=A=Z.prev)===Z.next)break;D=!0}while(D||Z!==A);return A}function Ih(E,A,D,Z,se,ge,Te){if(E){!Te&&ge&&function(wt,Wt,Xt,dr){var jr=wt;do jr.z===null&&(jr.z=hh(jr.x,jr.y,Wt,Xt,dr)),jr.prevZ=jr.prev,jr.nextZ=jr.next,jr=jr.next;while(jr!==wt);jr.prevZ.nextZ=null,jr.prevZ=null,function(Lr){var qr,Jr,Cn,Un,Jn,yi,hi,Xi,Zi=1;do{for(Jr=Lr,Lr=null,Jn=null,yi=0;Jr;){for(yi++,Cn=Jr,hi=0,qr=0;qr<Zi&&(hi++,Cn=Cn.nextZ);qr++);for(Xi=Zi;hi>0||Xi>0&&Cn;)hi!==0&&(Xi===0||!Cn||Jr.z<=Cn.z)?(Un=Jr,Jr=Jr.nextZ,hi--):(Un=Cn,Cn=Cn.nextZ,Xi--),Jn?Jn.nextZ=Un:Lr=Un,Un.prevZ=Jn,Jn=Un;Jr=Cn}Jn.nextZ=null,Zi*=2}while(yi>1)}(jr)}(E,Z,se,ge);for(var je,Ze,pt=E;E.prev!==E.next;)if(je=E.prev,Ze=E.next,ge?op(E,Z,se,ge):ap(E))A.push(je.i/D),A.push(E.i/D),A.push(Ze.i/D),Sf(E),E=Ze.next,pt=Ze.next;else if((E=Ze)===pt){Te?Te===1?Ih(E=uv(Bf(E),A,D),A,D,Z,se,ge,2):Te===2&&sp(E,A,D,Z,se,ge):Ih(Bf(E),A,D,Z,se,ge,1);break}}}function ap(E){var A=E.prev,D=E,Z=E.next;if(fu(A,D,Z)>=0)return!1;for(var se=E.next.next;se!==E.prev;){if(Ef(A.x,A.y,D.x,D.y,Z.x,Z.y,se.x,se.y)&&fu(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function op(E,A,D,Z){var se=E.prev,ge=E,Te=E.next;if(fu(se,ge,Te)>=0)return!1;for(var je=se.x>ge.x?se.x>Te.x?se.x:Te.x:ge.x>Te.x?ge.x:Te.x,Ze=se.y>ge.y?se.y>Te.y?se.y:Te.y:ge.y>Te.y?ge.y:Te.y,pt=hh(se.x<ge.x?se.x<Te.x?se.x:Te.x:ge.x<Te.x?ge.x:Te.x,se.y<ge.y?se.y<Te.y?se.y:Te.y:ge.y<Te.y?ge.y:Te.y,A,D,Z),wt=hh(je,Ze,A,D,Z),Wt=E.prevZ,Xt=E.nextZ;Wt&&Wt.z>=pt&&Xt&&Xt.z<=wt;){if(Wt!==E.prev&&Wt!==E.next&&Ef(se.x,se.y,ge.x,ge.y,Te.x,Te.y,Wt.x,Wt.y)&&fu(Wt.prev,Wt,Wt.next)>=0||(Wt=Wt.prevZ,Xt!==E.prev&&Xt!==E.next&&Ef(se.x,se.y,ge.x,ge.y,Te.x,Te.y,Xt.x,Xt.y)&&fu(Xt.prev,Xt,Xt.next)>=0))return!1;Xt=Xt.nextZ}for(;Wt&&Wt.z>=pt;){if(Wt!==E.prev&&Wt!==E.next&&Ef(se.x,se.y,ge.x,ge.y,Te.x,Te.y,Wt.x,Wt.y)&&fu(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.prevZ}for(;Xt&&Xt.z<=wt;){if(Xt!==E.prev&&Xt!==E.next&&Ef(se.x,se.y,ge.x,ge.y,Te.x,Te.y,Xt.x,Xt.y)&&fu(Xt.prev,Xt,Xt.next)>=0)return!1;Xt=Xt.nextZ}return!0}function uv(E,A,D){var Z=E;do{var se=Z.prev,ge=Z.next.next;!Yf(se,ge)&&ed(se,Z,Z.next,ge)&&Ff(se,ge)&&Ff(ge,se)&&(A.push(se.i/D),A.push(Z.i/D),A.push(ge.i/D),Sf(Z),Sf(Z.next),Z=E=ge),Z=Z.next}while(Z!==E);return Bf(Z)}function sp(E,A,D,Z,se,ge){var Te=E;do{for(var je=Te.next.next;je!==Te.prev;){if(Te.i!==je.i&&qh(Te,je)){var Ze=dh(Te,je);return Te=Bf(Te,Te.next),Ze=Bf(Ze,Ze.next),Ih(Te,A,D,Z,se,ge),void Ih(Ze,A,D,Z,se,ge)}je=je.next}Te=Te.next}while(Te!==E)}function up(E,A){return E.x-A.x}function wd(E,A){if(A=function(Z,se){var ge,Te=se,je=Z.x,Ze=Z.y,pt=-1/0;do{if(Ze<=Te.y&&Ze>=Te.next.y&&Te.next.y!==Te.y){var wt=Te.x+(Ze-Te.y)*(Te.next.x-Te.x)/(Te.next.y-Te.y);if(wt<=je&&wt>pt){if(pt=wt,wt===je){if(Ze===Te.y)return Te;if(Ze===Te.next.y)return Te.next}ge=Te.x<Te.next.x?Te:Te.next}}Te=Te.next}while(Te!==se);if(!ge)return null;if(je===pt)return ge;var Wt,Xt=ge,dr=ge.x,jr=ge.y,Lr=1/0;Te=ge;do je>=Te.x&&Te.x>=dr&&je!==Te.x&&Ef(Ze<jr?je:pt,Ze,dr,jr,Ze<jr?pt:je,Ze,Te.x,Te.y)&&(Wt=Math.abs(Ze-Te.y)/(je-Te.x),Ff(Te,Z)&&(Wt<Lr||Wt===Lr&&(Te.x>ge.x||Te.x===ge.x&&Qh(ge,Te)))&&(ge=Te,Lr=Wt)),Te=Te.next;while(Te!==Xt);return ge}(E,A)){var D=dh(A,E);Bf(A,A.next),Bf(D,D.next)}}function Qh(E,A){return fu(E.prev,E,A.prev)<0&&fu(A.next,E,E.next)<0}function hh(E,A,D,Z,se){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-D)*se)|E<<8))|E<<4))|E<<2))|E<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Z)*se)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function Lh(E){var A=E,D=E;do(A.x<D.x||A.x===D.x&&A.y<D.y)&&(D=A),A=A.next;while(A!==E);return D}function Ef(E,A,D,Z,se,ge,Te,je){return(se-Te)*(A-je)-(E-Te)*(ge-je)>=0&&(E-Te)*(Z-je)-(D-Te)*(A-je)>=0&&(D-Te)*(ge-je)-(se-Te)*(Z-je)>=0}function qh(E,A){return E.next.i!==A.i&&E.prev.i!==A.i&&!function(D,Z){var se=D;do{if(se.i!==D.i&&se.next.i!==D.i&&se.i!==Z.i&&se.next.i!==Z.i&&ed(se,se.next,D,Z))return!0;se=se.next}while(se!==D);return!1}(E,A)&&(Ff(E,A)&&Ff(A,E)&&function(D,Z){var se=D,ge=!1,Te=(D.x+Z.x)/2,je=(D.y+Z.y)/2;do se.y>je!=se.next.y>je&&se.next.y!==se.y&&Te<(se.next.x-se.x)*(je-se.y)/(se.next.y-se.y)+se.x&&(ge=!ge),se=se.next;while(se!==D);return ge}(E,A)&&(fu(E.prev,E,A.prev)||fu(E,A.prev,A))||Yf(E,A)&&fu(E.prev,E,E.next)>0&&fu(A.prev,A,A.next)>0)}function fu(E,A,D){return(A.y-E.y)*(D.x-A.x)-(A.x-E.x)*(D.y-A.y)}function Yf(E,A){return E.x===A.x&&E.y===A.y}function ed(E,A,D,Z){var se=$f(fu(E,A,D)),ge=$f(fu(E,A,Z)),Te=$f(fu(D,Z,E)),je=$f(fu(D,Z,A));return se!==ge&&Te!==je||!(se!==0||!Wc(E,D,A))||!(ge!==0||!Wc(E,Z,A))||!(Te!==0||!Wc(D,E,Z))||!(je!==0||!Wc(D,A,Z))}function Wc(E,A,D){return A.x<=Math.max(E.x,D.x)&&A.x>=Math.min(E.x,D.x)&&A.y<=Math.max(E.y,D.y)&&A.y>=Math.min(E.y,D.y)}function $f(E){return E>0?1:E<0?-1:0}function Ff(E,A){return fu(E.prev,E,E.next)<0?fu(E,A,E.next)>=0&&fu(E,E.prev,A)>=0:fu(E,A,E.prev)<0||fu(E,E.next,A)<0}function dh(E,A){var D=new Zf(E.i,E.x,E.y),Z=new Zf(A.i,A.x,A.y),se=E.next,ge=A.prev;return E.next=A,A.prev=E,D.next=se,se.prev=D,Z.next=D,D.prev=Z,ge.next=Z,Z.prev=ge,Z}function vh(E,A,D,Z){var se=new Zf(E,A,D);return Z?(se.next=Z.next,se.prev=Z,Z.next.prev=se,Z.next=se):(se.prev=se,se.next=se),se}function Sf(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function Zf(E,A,D){this.i=E,this.x=A,this.y=D,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Kf(E,A,D,Z){for(var se=0,ge=A,Te=D-Z;ge<D;ge+=Z)se+=(E[Te]-E[ge])*(E[ge+1]+E[Te+1]),Te=ge;return se}function lv(E,A,D,Z,se){(function ge(Te,je,Ze,pt,wt){for(;pt>Ze;){if(pt-Ze>600){var Wt=pt-Ze+1,Xt=je-Ze+1,dr=Math.log(Wt),jr=.5*Math.exp(2*dr/3),Lr=.5*Math.sqrt(dr*jr*(Wt-jr)/Wt)*(Xt-Wt/2<0?-1:1);ge(Te,je,Math.max(Ze,Math.floor(je-Xt*jr/Wt+Lr)),Math.min(pt,Math.floor(je+(Wt-Xt)*jr/Wt+Lr)),wt)}var qr=Te[je],Jr=Ze,Cn=pt;for(mc(Te,Ze,je),wt(Te[pt],qr)>0&&mc(Te,Ze,pt);Jr<Cn;){for(mc(Te,Jr,Cn),Jr++,Cn--;wt(Te[Jr],qr)<0;)Jr++;for(;wt(Te[Cn],qr)>0;)Cn--}wt(Te[Ze],qr)===0?mc(Te,Ze,Cn):mc(Te,++Cn,pt),Cn<=je&&(Ze=Cn+1),je<=Cn&&(pt=Cn-1)}})(E,A,D||0,Z||E.length-1,se||Nf)}function mc(E,A,D){var Z=E[A];E[A]=E[D],E[D]=Z}function Nf(E,A){return E<A?-1:E>A?1:0}function td(E,A){var D=E.length;if(D<=1)return[E];for(var Z,se,ge=[],Te=0;Te<D;Te++){var je=W(E[Te]);je!==0&&(E[Te].area=Math.abs(je),se===void 0&&(se=je<0),se===je<0?(Z&&ge.push(Z),Z=[E[Te]]):Z.push(E[Te]))}if(Z&&ge.push(Z),A>1)for(var Ze=0;Ze<ge.length;Ze++)ge[Ze].length<=A||(lv(ge[Ze],A,1,ge[Ze].length-1,Rd),ge[Ze]=ge[Ze].slice(0,A));return ge}function Rd(E,A){return A.area-E.area}function Id(E,A,D){for(var Z=D.patternDependencies,se=!1,ge=0,Te=A;ge<Te.length;ge+=1){var je=Te[ge].paint.get(E+"-pattern");je.isConstant()||(se=!0);var Ze=je.constantOr(null);Ze&&(se=!0,Z[Ze.to]=!0,Z[Ze.from]=!0)}return se}function Ld(E,A,D,Z,se){for(var ge=se.patternDependencies,Te=0,je=A;Te<je.length;Te+=1){var Ze=je[Te],pt=Ze.paint.get(E+"-pattern").value;if(pt.kind!=="constant"){var wt=pt.evaluate({zoom:Z-1},D,{},se.availableImages),Wt=pt.evaluate({zoom:Z},D,{},se.availableImages),Xt=pt.evaluate({zoom:Z+1},D,{},se.availableImages);Wt=Wt&&Wt.name?Wt.name:Wt,Xt=Xt&&Xt.name?Xt.name:Xt,ge[wt=wt&&wt.name?wt.name:wt]=!0,ge[Wt]=!0,ge[Xt]=!0,D.patterns[Ze.id]={min:wt,mid:Wt,max:Xt}}}return D}Jh.deviation=function(E,A,D,Z){var se=A&&A.length,ge=Math.abs(Kf(E,0,se?A[0]*D:E.length,D));if(se)for(var Te=0,je=A.length;Te<je;Te++)ge-=Math.abs(Kf(E,A[Te]*D,Te<je-1?A[Te+1]*D:E.length,D));var Ze=0;for(Te=0;Te<Z.length;Te+=3){var pt=Z[Te]*D,wt=Z[Te+1]*D,Wt=Z[Te+2]*D;Ze+=Math.abs((E[pt]-E[Wt])*(E[wt+1]-E[pt+1])-(E[pt]-E[wt])*(E[Wt+1]-E[pt+1]))}return ge===0&&Ze===0?0:Math.abs((Ze-ge)/ge)},Jh.flatten=function(E){for(var A=E[0][0].length,D={vertices:[],holes:[],dimensions:A},Z=0,se=0;se<E.length;se++){for(var ge=0;ge<E[se].length;ge++)for(var Te=0;Te<A;Te++)D.vertices.push(E[se][ge][Te]);se>0&&D.holes.push(Z+=E[se-1].length)}return D},Kh.default=ip;var jc=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new Lo,this.indexArray2=new gu,this.programConfigurations=new ro(A.layers,A.zoom),this.segments=new Ge,this.segments2=new Ge,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};jc.prototype.populate=function(E,A,D){this.hasPattern=Id("fill",this.layers,A);for(var Z=this.layers[0].layout.get("fill-sort-key"),se=[],ge=0,Te=E;ge<Te.length;ge+=1){var je=Te[ge],Ze=je.feature,pt=je.id,wt=je.index,Wt=je.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,dr=qs(Ze,Xt);if(this.layers[0]._featureFilter.filter(new bn(this.zoom),dr,D)){var jr=Z?Z.evaluate(dr,{},D,A.availableImages):void 0,Lr={id:pt,properties:Ze.properties,type:Ze.type,sourceLayerIndex:Wt,index:wt,geometry:Xt?dr.geometry:Ds(Ze),patterns:{},sortKey:jr};se.push(Lr)}}Z&&se.sort(function(Xi,Zi){return Xi.sortKey-Zi.sortKey});for(var qr=0,Jr=se;qr<Jr.length;qr+=1){var Cn=Jr[qr],Un=Cn.geometry,Jn=Cn.index,yi=Cn.sourceLayerIndex;if(this.hasPattern){var hi=Ld("fill",this.layers,Cn,this.zoom,A);this.patternFeatures.push(hi)}else this.addFeature(Cn,Un,Jn,D,{});A.featureIndex.insert(E[Jn].feature,Un,Jn,yi,this.index)}},jc.prototype.update=function(E,A,D){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,A,this.stateDependentLayers,D)},jc.prototype.addFeatures=function(E,A,D){for(var Z=0,se=this.patternFeatures;Z<se.length;Z+=1){var ge=se[Z];this.addFeature(ge,ge.geometry,ge.index,A,D)}},jc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jc.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,np),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.indexBuffer2=E.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(E),this.uploaded=!0},jc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},jc.prototype.addFeature=function(E,A,D,Z,se){for(var ge=0,Te=td(A,500);ge<Te.length;ge+=1){for(var je=Te[ge],Ze=0,pt=0,wt=je;pt<wt.length;pt+=1)Ze+=wt[pt].length;for(var Wt=this.segments.prepareSegment(Ze,this.layoutVertexArray,this.indexArray),Xt=Wt.vertexLength,dr=[],jr=[],Lr=0,qr=je;Lr<qr.length;Lr+=1){var Jr=qr[Lr];if(Jr.length!==0){Jr!==je[0]&&jr.push(dr.length/2);var Cn=this.segments2.prepareSegment(Jr.length,this.layoutVertexArray,this.indexArray2),Un=Cn.vertexLength;this.layoutVertexArray.emplaceBack(Jr[0].x,Jr[0].y),this.indexArray2.emplaceBack(Un+Jr.length-1,Un),dr.push(Jr[0].x),dr.push(Jr[0].y);for(var Jn=1;Jn<Jr.length;Jn++)this.layoutVertexArray.emplaceBack(Jr[Jn].x,Jr[Jn].y),this.indexArray2.emplaceBack(Un+Jn-1,Un+Jn),dr.push(Jr[Jn].x),dr.push(Jr[Jn].y);Cn.vertexLength+=Jr.length,Cn.primitiveLength+=Jr.length}}for(var yi=Kh(dr,jr),hi=0;hi<yi.length;hi+=3)this.indexArray.emplaceBack(Xt+yi[hi],Xt+yi[hi+1],Xt+yi[hi+2]);Wt.vertexLength+=Ze,Wt.primitiveLength+=yi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,D,se,Z)},Kt("FillBucket",jc,{omit:["layers","patternFeatures"]});var Af=new xr({"fill-sort-key":new Dt(qe.layout_fill["fill-sort-key"])}),Dd={paint:new xr({"fill-antialias":new dt(qe.paint_fill["fill-antialias"]),"fill-opacity":new Dt(qe.paint_fill["fill-opacity"]),"fill-color":new Dt(qe.paint_fill["fill-color"]),"fill-outline-color":new Dt(qe.paint_fill["fill-outline-color"]),"fill-translate":new dt(qe.paint_fill["fill-translate"]),"fill-translate-anchor":new dt(qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zt(qe.paint_fill["fill-pattern"])}),layout:Af},uc=function(E){function A(D){E.call(this,D,Dd)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.recalculate=function(D,Z){E.prototype.recalculate.call(this,D,Z);var se=this.paint._values["fill-outline-color"];se.value.kind==="constant"&&se.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},A.prototype.createBucket=function(D){return new jc(D)},A.prototype.queryRadius=function(){return ll(this.paint.get("fill-translate"))},A.prototype.queryIntersectsFeature=function(D,Z,se,ge,Te,je,Ze){return Ll(ac(D,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),je.angle,Ze),ge)},A.prototype.isTileClipped=function(){return!0},A}(yr),cv=Qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,fv=Uf;function Uf(E,A,D,Z,se){this.properties={},this.extent=D,this.type=0,this._pbf=E,this._geometry=-1,this._keys=Z,this._values=se,E.readFields(kf,this,A)}function kf(E,A,D){E==1?A.id=D.readVarint():E==2?function(Z,se){for(var ge=Z.readVarint()+Z.pos;Z.pos<ge;){var Te=se._keys[Z.readVarint()],je=se._values[Z.readVarint()];se.properties[Te]=je}}(D,A):E==3?A.type=D.readVarint():E==4&&(A._geometry=D.pos)}function sf(E){for(var A,D,Z=0,se=0,ge=E.length,Te=ge-1;se<ge;Te=se++)Z+=((D=E[Te]).x-(A=E[se]).x)*(A.y+D.y);return Z}Uf.types=["Unknown","Point","LineString","Polygon"],Uf.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var A,D=E.readVarint()+E.pos,Z=1,se=0,ge=0,Te=0,je=[];E.pos<D;){if(se<=0){var Ze=E.readVarint();Z=7&Ze,se=Ze>>3}if(se--,Z===1||Z===2)ge+=E.readSVarint(),Te+=E.readSVarint(),Z===1&&(A&&je.push(A),A=[]),A.push(new c(ge,Te));else{if(Z!==7)throw new Error("unknown command "+Z);A&&A.push(A[0].clone())}}return A&&je.push(A),je},Uf.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var A=E.readVarint()+E.pos,D=1,Z=0,se=0,ge=0,Te=1/0,je=-1/0,Ze=1/0,pt=-1/0;E.pos<A;){if(Z<=0){var wt=E.readVarint();D=7&wt,Z=wt>>3}if(Z--,D===1||D===2)(se+=E.readSVarint())<Te&&(Te=se),se>je&&(je=se),(ge+=E.readSVarint())<Ze&&(Ze=ge),ge>pt&&(pt=ge);else if(D!==7)throw new Error("unknown command "+D)}return[Te,Ze,je,pt]},Uf.prototype.toGeoJSON=function(E,A,D){var Z,se,ge=this.extent*Math.pow(2,D),Te=this.extent*E,je=this.extent*A,Ze=this.loadGeometry(),pt=Uf.types[this.type];function wt(dr){for(var jr=0;jr<dr.length;jr++){var Lr=dr[jr];dr[jr]=[360*(Lr.x+Te)/ge-180,360/Math.PI*Math.atan(Math.exp((180-360*(Lr.y+je)/ge)*Math.PI/180))-90]}}switch(this.type){case 1:var Wt=[];for(Z=0;Z<Ze.length;Z++)Wt[Z]=Ze[Z][0];wt(Ze=Wt);break;case 2:for(Z=0;Z<Ze.length;Z++)wt(Ze[Z]);break;case 3:for(Ze=function(dr){var jr=dr.length;if(jr<=1)return[dr];for(var Lr,qr,Jr=[],Cn=0;Cn<jr;Cn++){var Un=sf(dr[Cn]);Un!==0&&(qr===void 0&&(qr=Un<0),qr===Un<0?(Lr&&Jr.push(Lr),Lr=[dr[Cn]]):Lr.push(dr[Cn]))}return Lr&&Jr.push(Lr),Jr}(Ze),Z=0;Z<Ze.length;Z++)for(se=0;se<Ze[Z].length;se++)wt(Ze[Z][se])}Ze.length===1?Ze=Ze[0]:pt="Multi"+pt;var Xt={type:"Feature",geometry:{type:pt,coordinates:Ze},properties:this.properties};return"id"in this&&(Xt.id=this.id),Xt};var rd=Jf;function Jf(E,A){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(Jc,this,A),this.length=this._features.length}function Jc(E,A,D){E===15?A.version=D.readVarint():E===1?A.name=D.readString():E===5?A.extent=D.readVarint():E===2?A._features.push(D.pos):E===3?A._keys.push(D.readString()):E===4&&A._values.push(function(Z){for(var se=null,ge=Z.readVarint()+Z.pos;Z.pos<ge;){var Te=Z.readVarint()>>3;se=Te===1?Z.readString():Te===2?Z.readFloat():Te===3?Z.readDouble():Te===4?Z.readVarint64():Te===5?Z.readVarint():Te===6?Z.readSVarint():Te===7?Z.readBoolean():null}return se}(D))}function hv(E,A,D){if(E===3){var Z=new rd(D,D.readVarint()+D.pos);Z.length&&(A[Z.name]=Z)}}Jf.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var A=this._pbf.readVarint()+this._pbf.pos;return new fv(this._pbf,A,this.extent,this._keys,this._values)};var yc={VectorTile:function(A,D){this.layers=A.readFields(hv,{},D)},VectorTileFeature:fv,VectorTileLayer:rd},Dh=yc.VectorTileFeature.types,jh=Math.pow(2,13);function lc(E,A,D,Z,se,ge,Te,je){E.emplaceBack(A,D,2*Math.floor(Z*jh)+Te,se*jh*2,ge*jh*2,Math.round(je))}var Xo=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Ei,this.indexArray=new Lo,this.programConfigurations=new ro(A.layers,A.zoom),this.segments=new Ge,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Al(E,A){return E.x===A.x&&(E.x<0||E.x>8192)||E.y===A.y&&(E.y<0||E.y>8192)}Xo.prototype.populate=function(E,A,D){this.features=[],this.hasPattern=Id("fill-extrusion",this.layers,A);for(var Z=0,se=E;Z<se.length;Z+=1){var ge=se[Z],Te=ge.feature,je=ge.id,Ze=ge.index,pt=ge.sourceLayerIndex,wt=this.layers[0]._featureFilter.needGeometry,Wt=qs(Te,wt);if(this.layers[0]._featureFilter.filter(new bn(this.zoom),Wt,D)){var Xt={id:je,sourceLayerIndex:pt,index:Ze,geometry:wt?Wt.geometry:Ds(Te),properties:Te.properties,type:Te.type,patterns:{}};this.hasPattern?this.features.push(Ld("fill-extrusion",this.layers,Xt,this.zoom,A)):this.addFeature(Xt,Xt.geometry,Ze,D,{}),A.featureIndex.insert(Te,Xt.geometry,Ze,pt,this.index,!0)}}},Xo.prototype.addFeatures=function(E,A,D){for(var Z=0,se=this.features;Z<se.length;Z+=1){var ge=se[Z];this.addFeature(ge,ge.geometry,ge.index,A,D)}},Xo.prototype.update=function(E,A,D){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,A,this.stateDependentLayers,D)},Xo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xo.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,cv),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},Xo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xo.prototype.addFeature=function(E,A,D,Z,se){for(var ge=0,Te=td(A,500);ge<Te.length;ge+=1){for(var je=Te[ge],Ze=0,pt=0,wt=je;pt<wt.length;pt+=1)Ze+=wt[pt].length;for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Xt=0,dr=je;Xt<dr.length;Xt+=1){var jr=dr[Xt];if(jr.length!==0&&!((cs=jr).every(function(jo){return jo.x<0})||cs.every(function(jo){return jo.x>8192})||cs.every(function(jo){return jo.y<0})||cs.every(function(jo){return jo.y>8192})))for(var Lr=0,qr=0;qr<jr.length;qr++){var Jr=jr[qr];if(qr>=1){var Cn=jr[qr-1];if(!Al(Jr,Cn)){Wt.vertexLength+4>Ge.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Un=Jr.sub(Cn)._perp()._unit(),Jn=Cn.dist(Jr);Lr+Jn>32768&&(Lr=0),lc(this.layoutVertexArray,Jr.x,Jr.y,Un.x,Un.y,0,0,Lr),lc(this.layoutVertexArray,Jr.x,Jr.y,Un.x,Un.y,0,1,Lr),lc(this.layoutVertexArray,Cn.x,Cn.y,Un.x,Un.y,0,0,Lr+=Jn),lc(this.layoutVertexArray,Cn.x,Cn.y,Un.x,Un.y,0,1,Lr);var yi=Wt.vertexLength;this.indexArray.emplaceBack(yi,yi+2,yi+1),this.indexArray.emplaceBack(yi+1,yi+2,yi+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+Ze>Ge.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(Ze,this.layoutVertexArray,this.indexArray)),Dh[E.type]==="Polygon"){for(var hi=[],Xi=[],Zi=Wt.vertexLength,ba=0,Ma=je;ba<Ma.length;ba+=1){var Aa=Ma[ba];if(Aa.length!==0){Aa!==je[0]&&Xi.push(hi.length/2);for(var da=0;da<Aa.length;da++){var yo=Aa[da];lc(this.layoutVertexArray,yo.x,yo.y,0,0,1,1,0),hi.push(yo.x),hi.push(yo.y)}}}for(var ka=Kh(hi,Xi),Ca=0;Ca<ka.length;Ca+=3)this.indexArray.emplaceBack(Zi+ka[Ca],Zi+ka[Ca+2],Zi+ka[Ca+1]);Wt.primitiveLength+=ka.length/3,Wt.vertexLength+=Ze}}var cs;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,D,se,Z)},Kt("FillExtrusionBucket",Xo,{omit:["layers","features"]});var ei={paint:new xr({"fill-extrusion-opacity":new dt(qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dt(qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dt(qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dt(qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zt(qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dt(qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dt(qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dt(qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bh=function(E){function A(D){E.call(this,D,ei)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.createBucket=function(D){return new Xo(D)},A.prototype.queryRadius=function(){return ll(this.paint.get("fill-extrusion-translate"))},A.prototype.is3D=function(){return!0},A.prototype.queryIntersectsFeature=function(D,Z,se,ge,Te,je,Ze,pt){var wt=ac(D,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),je.angle,Ze),Wt=this.paint.get("fill-extrusion-height").evaluate(Z,se),Xt=this.paint.get("fill-extrusion-base").evaluate(Z,se),dr=function(Lr,qr,Jr,Cn){for(var Un=[],Jn=0,yi=Lr;Jn<yi.length;Jn+=1){var hi=yi[Jn],Xi=[hi.x,hi.y,0,1];Dc(Xi,Xi,qr),Un.push(new c(Xi[0]/Xi[3],Xi[1]/Xi[3]))}return Un}(wt,pt),jr=function(Lr,qr,Jr,Cn){for(var Un=[],Jn=[],yi=Cn[8]*qr,hi=Cn[9]*qr,Xi=Cn[10]*qr,Zi=Cn[11]*qr,ba=Cn[8]*Jr,Ma=Cn[9]*Jr,Aa=Cn[10]*Jr,da=Cn[11]*Jr,yo=0,ka=Lr;yo<ka.length;yo+=1){for(var Ca=[],cs=[],jo=0,eu=ka[yo];jo<eu.length;jo+=1){var io=eu[jo],ds=io.x,mu=io.y,Cu=Cn[0]*ds+Cn[4]*mu+Cn[12],$u=Cn[1]*ds+Cn[5]*mu+Cn[13],tl=Cn[2]*ds+Cn[6]*mu+Cn[14],pl=Cn[3]*ds+Cn[7]*mu+Cn[15],Fl=tl+Xi,Rl=pl+Zi,cc=Cu+ba,nc=$u+Ma,bc=tl+Aa,Zl=pl+da,Nl=new c((Cu+yi)/Rl,($u+hi)/Rl);Nl.z=Fl/Rl,Ca.push(Nl);var Kl=new c(cc/Zl,nc/Zl);Kl.z=bc/Zl,cs.push(Kl)}Un.push(Ca),Jn.push(cs)}return[Un,Jn]}(ge,Xt,Wt,pt);return function(Lr,qr,Jr){var Cn=1/0;Ll(Jr,qr)&&(Cn=dv(Jr,qr[0]));for(var Un=0;Un<qr.length;Un++)for(var Jn=qr[Un],yi=Lr[Un],hi=0;hi<Jn.length-1;hi++){var Xi=Jn[hi],Zi=[Xi,Jn[hi+1],yi[hi+1],yi[hi],Xi];pc(Jr,Zi)&&(Cn=Math.min(Cn,dv(Jr,Zi)))}return Cn!==1/0&&Cn}(jr[0],jr[1],dr)},A}(yr);function ph(E,A){return E.x*A.x+E.y*A.y}function dv(E,A){if(E.length===1){for(var D,Z=0,se=A[Z++];!D||se.equals(D);)if(!(D=A[Z++]))return 1/0;for(;Z<A.length;Z++){var ge=A[Z],Te=E[0],je=D.sub(se),Ze=ge.sub(se),pt=Te.sub(se),wt=ph(je,je),Wt=ph(je,Ze),Xt=ph(Ze,Ze),dr=ph(pt,je),jr=ph(pt,Ze),Lr=wt*Xt-Wt*Wt,qr=(Xt*dr-Wt*jr)/Lr,Jr=(wt*jr-Wt*dr)/Lr,Cn=se.z*(1-qr-Jr)+D.z*qr+ge.z*Jr;if(isFinite(Cn))return Cn}return 1/0}for(var Un=1/0,Jn=0,yi=A;Jn<yi.length;Jn+=1)Un=Math.min(Un,yi[Jn].z);return Un}var vv=Qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,pv=Qr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,jd=yc.VectorTileFeature.types,gv=Math.cos(Math.PI/180*37.5),lp=Math.pow(2,14)/.5,Uu=function(A){var D=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Z){return Z.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Z){D.gradients[Z.id]={}}),this.layoutVertexArray=new zn,this.layoutVertexArray2=new gi,this.indexArray=new Lo,this.programConfigurations=new ro(A.layers,A.zoom),this.segments=new Ge,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Z){return Z.isStateDependent()}).map(function(Z){return Z.id})};Uu.prototype.populate=function(E,A,D){this.hasPattern=Id("line",this.layers,A);for(var Z=this.layers[0].layout.get("line-sort-key"),se=[],ge=0,Te=E;ge<Te.length;ge+=1){var je=Te[ge],Ze=je.feature,pt=je.id,wt=je.index,Wt=je.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,dr=qs(Ze,Xt);if(this.layers[0]._featureFilter.filter(new bn(this.zoom),dr,D)){var jr=Z?Z.evaluate(dr,{},D):void 0,Lr={id:pt,properties:Ze.properties,type:Ze.type,sourceLayerIndex:Wt,index:wt,geometry:Xt?dr.geometry:Ds(Ze),patterns:{},sortKey:jr};se.push(Lr)}}Z&&se.sort(function(Xi,Zi){return Xi.sortKey-Zi.sortKey});for(var qr=0,Jr=se;qr<Jr.length;qr+=1){var Cn=Jr[qr],Un=Cn.geometry,Jn=Cn.index,yi=Cn.sourceLayerIndex;if(this.hasPattern){var hi=Ld("line",this.layers,Cn,this.zoom,A);this.patternFeatures.push(hi)}else this.addFeature(Cn,Un,Jn,D,{});A.featureIndex.insert(E[Jn].feature,Un,Jn,yi,this.index)}},Uu.prototype.update=function(E,A,D){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,A,this.stateDependentLayers,D)},Uu.prototype.addFeatures=function(E,A,D){for(var Z=0,se=this.patternFeatures;Z<se.length;Z+=1){var ge=se[Z];this.addFeature(ge,ge.geometry,ge.index,A,D)}},Uu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Uu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Uu.prototype.upload=function(E){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=E.createVertexBuffer(this.layoutVertexArray2,pv)),this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,vv),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},Uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Uu.prototype.lineFeatureClips=function(E){if(E.properties&&E.properties.hasOwnProperty("mapbox_clip_start")&&E.properties.hasOwnProperty("mapbox_clip_end"))return{start:+E.properties.mapbox_clip_start,end:+E.properties.mapbox_clip_end}},Uu.prototype.addFeature=function(E,A,D,Z,se){var ge=this.layers[0].layout,Te=ge.get("line-join").evaluate(E,{}),je=ge.get("line-cap"),Ze=ge.get("line-miter-limit"),pt=ge.get("line-round-limit");this.lineClips=this.lineFeatureClips(E);for(var wt=0,Wt=A;wt<Wt.length;wt+=1)this.addLine(Wt[wt],E,Te,je,Ze,pt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,D,se,Z)},Uu.prototype.addLine=function(E,A,D,Z,se,ge){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Te=0;Te<E.length-1;Te++)this.totalDistance+=E[Te].dist(E[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var je=jd[A.type]==="Polygon",Ze=E.length;Ze>=2&&E[Ze-1].equals(E[Ze-2]);)Ze--;for(var pt=0;pt<Ze-1&&E[pt].equals(E[pt+1]);)pt++;if(!(Ze<(je?3:2))){D==="bevel"&&(se=1.05);var wt,Wt=this.overscaling<=16?122880/(512*this.overscaling):0,Xt=this.segments.prepareSegment(10*Ze,this.layoutVertexArray,this.indexArray),dr=void 0,jr=void 0,Lr=void 0,qr=void 0;this.e1=this.e2=-1,je&&(qr=E[pt].sub(wt=E[Ze-2])._unit()._perp());for(var Jr=pt;Jr<Ze;Jr++)if(!(jr=Jr===Ze-1?je?E[pt+1]:void 0:E[Jr+1])||!E[Jr].equals(jr)){qr&&(Lr=qr),wt&&(dr=wt),wt=E[Jr],qr=jr?jr.sub(wt)._unit()._perp():Lr;var Cn=(Lr=Lr||qr).add(qr);Cn.x===0&&Cn.y===0||Cn._unit();var Un=Lr.x*qr.x+Lr.y*qr.y,Jn=Cn.x*qr.x+Cn.y*qr.y,yi=Jn!==0?1/Jn:1/0,hi=2*Math.sqrt(2-2*Jn),Xi=Jn<gv&&dr&&jr,Zi=Lr.x*qr.y-Lr.y*qr.x>0;if(Xi&&Jr>pt){var ba=wt.dist(dr);if(ba>2*Wt){var Ma=wt.sub(wt.sub(dr)._mult(Wt/ba)._round());this.updateDistance(dr,Ma),this.addCurrentVertex(Ma,Lr,0,0,Xt),dr=Ma}}var Aa=dr&&jr,da=Aa?D:je?"butt":Z;if(Aa&&da==="round"&&(yi<ge?da="miter":yi<=2&&(da="fakeround")),da==="miter"&&yi>se&&(da="bevel"),da==="bevel"&&(yi>2&&(da="flipbevel"),yi<se&&(da="miter")),dr&&this.updateDistance(dr,wt),da==="miter")Cn._mult(yi),this.addCurrentVertex(wt,Cn,0,0,Xt);else if(da==="flipbevel"){if(yi>100)Cn=qr.mult(-1);else{var yo=yi*Lr.add(qr).mag()/Lr.sub(qr).mag();Cn._perp()._mult(yo*(Zi?-1:1))}this.addCurrentVertex(wt,Cn,0,0,Xt),this.addCurrentVertex(wt,Cn.mult(-1),0,0,Xt)}else if(da==="bevel"||da==="fakeround"){var ka=-Math.sqrt(yi*yi-1),Ca=Zi?ka:0,cs=Zi?0:ka;if(dr&&this.addCurrentVertex(wt,Lr,Ca,cs,Xt),da==="fakeround")for(var jo=Math.round(180*hi/Math.PI/20),eu=1;eu<jo;eu++){var io=eu/jo;if(io!==.5){var ds=io-.5;io+=io*ds*(io-1)*((1.0904+Un*(Un*(3.55645-1.43519*Un)-3.2452))*ds*ds+(.848013+Un*(.215638*Un-1.06021)))}var mu=qr.sub(Lr)._mult(io)._add(Lr)._unit()._mult(Zi?-1:1);this.addHalfVertex(wt,mu.x,mu.y,!1,Zi,0,Xt)}jr&&this.addCurrentVertex(wt,qr,-Ca,-cs,Xt)}else if(da==="butt")this.addCurrentVertex(wt,Cn,0,0,Xt);else if(da==="square"){var Cu=dr?1:-1;this.addCurrentVertex(wt,Cn,Cu,Cu,Xt)}else da==="round"&&(dr&&(this.addCurrentVertex(wt,Lr,0,0,Xt),this.addCurrentVertex(wt,Lr,1,1,Xt,!0)),jr&&(this.addCurrentVertex(wt,qr,-1,-1,Xt,!0),this.addCurrentVertex(wt,qr,0,0,Xt)));if(Xi&&Jr<Ze-1){var $u=wt.dist(jr);if($u>2*Wt){var tl=wt.add(jr.sub(wt)._mult(Wt/$u)._round());this.updateDistance(wt,tl),this.addCurrentVertex(tl,qr,0,0,Xt),wt=tl}}}}},Uu.prototype.addCurrentVertex=function(E,A,D,Z,se,ge){ge===void 0&&(ge=!1);var Te=A.y*Z-A.x,je=-A.y-A.x*Z;this.addHalfVertex(E,A.x+A.y*D,A.y-A.x*D,ge,!1,D,se),this.addHalfVertex(E,Te,je,ge,!0,-Z,se),this.distance>lp/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(E,A,D,Z,se,ge))},Uu.prototype.addHalfVertex=function(E,A,D,Z,se,ge,Te){var je=.5*(this.lineClips?this.scaledDistance*(lp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((E.x<<1)+(Z?1:0),(E.y<<1)+(se?1:0),Math.round(63*A)+128,Math.round(63*D)+128,1+(ge===0?0:ge<0?-1:1)|(63&je)<<2,je>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Ze=Te.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ze),Te.primitiveLength++),se?this.e2=Ze:this.e1=Ze},Uu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Uu.prototype.updateDistance=function(E,A){this.distance+=E.dist(A),this.updateScaledDistance()},Kt("LineBucket",Uu,{omit:["layers","patternFeatures"]});var Fh=new xr({"line-cap":new dt(qe.layout_line["line-cap"]),"line-join":new Dt(qe.layout_line["line-join"]),"line-miter-limit":new dt(qe.layout_line["line-miter-limit"]),"line-round-limit":new dt(qe.layout_line["line-round-limit"]),"line-sort-key":new Dt(qe.layout_line["line-sort-key"])}),Nh={paint:new xr({"line-opacity":new Dt(qe.paint_line["line-opacity"]),"line-color":new Dt(qe.paint_line["line-color"]),"line-translate":new dt(qe.paint_line["line-translate"]),"line-translate-anchor":new dt(qe.paint_line["line-translate-anchor"]),"line-width":new Dt(qe.paint_line["line-width"]),"line-gap-width":new Dt(qe.paint_line["line-gap-width"]),"line-offset":new Dt(qe.paint_line["line-offset"]),"line-blur":new Dt(qe.paint_line["line-blur"]),"line-dasharray":new cr(qe.paint_line["line-dasharray"]),"line-pattern":new Zt(qe.paint_line["line-pattern"]),"line-gradient":new Jt(qe.paint_line["line-gradient"])}),layout:Fh},nd=new(function(E){function A(){E.apply(this,arguments)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.possiblyEvaluate=function(D,Z){return Z=new bn(Math.floor(Z.zoom),{now:Z.now,fadeDuration:Z.fadeDuration,zoomHistory:Z.zoomHistory,transition:Z.transition}),E.prototype.possiblyEvaluate.call(this,D,Z)},A.prototype.evaluate=function(D,Z,se,ge){return Z=d({},Z,{zoom:Math.floor(Z.zoom)}),E.prototype.evaluate.call(this,D,Z,se,ge)},A}(Dt))(Nh.paint.properties["line-width"].specification);nd.useIntegerZoom=!0;var gh=function(E){function A(D){E.call(this,D,Nh),this.gradientVersion=0}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype._handleSpecialPaintPropertyUpdate=function(D){D==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Yo,this.gradientVersion=(this.gradientVersion+1)%r)},A.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},A.prototype.recalculate=function(D,Z){E.prototype.recalculate.call(this,D,Z),this.paint._values["line-floorwidth"]=nd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,D)},A.prototype.createBucket=function(D){return new Uu(D)},A.prototype.queryRadius=function(D){var Z=D,se=mh(Gl("line-width",this,Z),Gl("line-gap-width",this,Z)),ge=Gl("line-offset",this,Z);return se/2+Math.abs(ge)+ll(this.paint.get("line-translate"))},A.prototype.queryIntersectsFeature=function(D,Z,se,ge,Te,je,Ze){var pt=ac(D,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),je.angle,Ze),wt=Ze/2*mh(this.paint.get("line-width").evaluate(Z,se),this.paint.get("line-gap-width").evaluate(Z,se)),Wt=this.paint.get("line-offset").evaluate(Z,se);return Wt&&(ge=function(Xt,dr){for(var jr=[],Lr=new c(0,0),qr=0;qr<Xt.length;qr++){for(var Jr=Xt[qr],Cn=[],Un=0;Un<Jr.length;Un++){var Jn=Jr[Un],yi=Jr[Un+1],hi=Un===0?Lr:Jn.sub(Jr[Un-1])._unit()._perp(),Xi=Un===Jr.length-1?Lr:yi.sub(Jn)._unit()._perp(),Zi=hi._add(Xi)._unit();Zi._mult(1/(Zi.x*Xi.x+Zi.y*Xi.y)),Cn.push(Zi._mult(dr)._add(Jn))}jr.push(Cn)}return jr}(ge,Wt*Ze)),function(Xt,dr,jr){for(var Lr=0;Lr<dr.length;Lr++){var qr=dr[Lr];if(Xt.length>=3){for(var Jr=0;Jr<qr.length;Jr++)if(zc(Xt,qr[Jr]))return!0}if(dc(Xt,qr,jr))return!0}return!1}(pt,ge,wt)},A.prototype.isTileClipped=function(){return!0},A}(yr);function mh(E,A){return A>0?A+2*E:E}var mv=Qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$p=Qr([{name:"a_projected_pos",components:3,type:"Float32"}],4),yv=(Qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Bc=(Qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),kt=Qr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function nr(E,A,D){return E.sections.forEach(function(Z){Z.text=function(se,ge,Te){var je=ge.layout.get("text-transform").evaluate(Te,{});return je==="uppercase"?se=se.toLocaleUpperCase():je==="lowercase"&&(se=se.toLocaleLowerCase()),oi.applyArabicShaping&&(se=oi.applyArabicShaping(se)),se}(Z.text,A,D)}),E}Qr([{name:"triangle",components:3,type:"Uint16"}]),Qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qr([{type:"Float32",name:"offsetX"}]),Qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Xr={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Gn=function(A,D,Z,se,ge){var Te,je,Ze=8*ge-se-1,pt=(1<<Ze)-1,wt=pt>>1,Wt=-7,Xt=Z?ge-1:0,dr=Z?-1:1,jr=A[D+Xt];for(Xt+=dr,Te=jr&(1<<-Wt)-1,jr>>=-Wt,Wt+=Ze;Wt>0;Te=256*Te+A[D+Xt],Xt+=dr,Wt-=8);for(je=Te&(1<<-Wt)-1,Te>>=-Wt,Wt+=se;Wt>0;je=256*je+A[D+Xt],Xt+=dr,Wt-=8);if(Te===0)Te=1-wt;else{if(Te===pt)return je?NaN:1/0*(jr?-1:1);je+=Math.pow(2,se),Te-=wt}return(jr?-1:1)*je*Math.pow(2,Te-se)},vi=function(A,D,Z,se,ge,Te){var je,Ze,pt,wt=8*Te-ge-1,Wt=(1<<wt)-1,Xt=Wt>>1,dr=ge===23?Math.pow(2,-24)-Math.pow(2,-77):0,jr=se?0:Te-1,Lr=se?1:-1,qr=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(Ze=isNaN(D)?1:0,je=Wt):(je=Math.floor(Math.log(D)/Math.LN2),D*(pt=Math.pow(2,-je))<1&&(je--,pt*=2),(D+=je+Xt>=1?dr/pt:dr*Math.pow(2,1-Xt))*pt>=2&&(je++,pt/=2),je+Xt>=Wt?(Ze=0,je=Wt):je+Xt>=1?(Ze=(D*pt-1)*Math.pow(2,ge),je+=Xt):(Ze=D*Math.pow(2,Xt-1)*Math.pow(2,ge),je=0));ge>=8;A[Z+jr]=255&Ze,jr+=Lr,Ze/=256,ge-=8);for(je=je<<ge|Ze,wt+=ge;wt>0;A[Z+jr]=255&je,jr+=Lr,je/=256,wt-=8);A[Z+jr-Lr]|=128*qr},fi=Ln;function Ln(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}Ln.Varint=0,Ln.Fixed64=1,Ln.Bytes=2,Ln.Fixed32=5;var Li=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Bi(E){return E.type===Ln.Bytes?E.readVarint()+E.pos:E.pos+1}function Hi(E,A,D){return D?4294967296*A+(E>>>0):4294967296*(A>>>0)+(E>>>0)}function zi(E,A,D){var Z=A<=16383?1:A<=2097151?2:A<=268435455?3:Math.floor(Math.log(A)/(7*Math.LN2));D.realloc(Z);for(var se=D.pos-1;se>=E;se--)D.buf[se+Z]=D.buf[se]}function Gi(E,A){for(var D=0;D<E.length;D++)A.writeVarint(E[D])}function aa(E,A){for(var D=0;D<E.length;D++)A.writeSVarint(E[D])}function Yi(E,A){for(var D=0;D<E.length;D++)A.writeFloat(E[D])}function Fi(E,A){for(var D=0;D<E.length;D++)A.writeDouble(E[D])}function $n(E,A){for(var D=0;D<E.length;D++)A.writeBoolean(E[D])}function Xn(E,A){for(var D=0;D<E.length;D++)A.writeFixed32(E[D])}function Ui(E,A){for(var D=0;D<E.length;D++)A.writeSFixed32(E[D])}function oa(E,A){for(var D=0;D<E.length;D++)A.writeFixed64(E[D])}function pi(E,A){for(var D=0;D<E.length;D++)A.writeSFixed64(E[D])}function wa(E,A){return(E[A]|E[A+1]<<8|E[A+2]<<16)+16777216*E[A+3]}function Di(E,A,D){E[D]=A,E[D+1]=A>>>8,E[D+2]=A>>>16,E[D+3]=A>>>24}function $i(E,A){return(E[A]|E[A+1]<<8|E[A+2]<<16)+(E[A+3]<<24)}function Si(E,A,D){E===1&&D.readMessage(Qi,A)}function Qi(E,A,D){if(E===3){var Z=D.readMessage(Ra,{}),se=Z.width,ge=Z.height,Te=Z.left,je=Z.top,Ze=Z.advance;A.push({id:Z.id,bitmap:new Vc({width:se+6,height:ge+6},Z.bitmap),metrics:{width:se,height:ge,left:Te,top:je,advance:Ze}})}}function Ra(E,A,D){E===1?A.id=D.readVarint():E===2?A.bitmap=D.readBytes():E===3?A.width=D.readVarint():E===4?A.height=D.readVarint():E===5?A.left=D.readSVarint():E===6?A.top=D.readSVarint():E===7&&(A.advance=D.readVarint())}function co(E){for(var A=0,D=0,Z=0,se=E;Z<se.length;Z+=1){var ge=se[Z];A+=ge.w*ge.h,D=Math.max(D,ge.w)}E.sort(function(Lr,qr){return qr.h-Lr.h});for(var Te=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),D),h:1/0}],je=0,Ze=0,pt=0,wt=E;pt<wt.length;pt+=1)for(var Wt=wt[pt],Xt=Te.length-1;Xt>=0;Xt--){var dr=Te[Xt];if(!(Wt.w>dr.w||Wt.h>dr.h)){if(Wt.x=dr.x,Wt.y=dr.y,Ze=Math.max(Ze,Wt.y+Wt.h),je=Math.max(je,Wt.x+Wt.w),Wt.w===dr.w&&Wt.h===dr.h){var jr=Te.pop();Xt<Te.length&&(Te[Xt]=jr)}else Wt.h===dr.h?(dr.x+=Wt.w,dr.w-=Wt.w):Wt.w===dr.w?(dr.y+=Wt.h,dr.h-=Wt.h):(Te.push({x:dr.x+Wt.w,y:dr.y,w:dr.w-Wt.w,h:Wt.h}),dr.y+=Wt.h,dr.h-=Wt.h);break}}return{w:je,h:Ze,fill:A/(je*Ze)||0}}Ln.prototype={destroy:function(){this.buf=null},readFields:function(A,D,Z){for(Z=Z||this.length;this.pos<Z;){var se=this.readVarint(),ge=se>>3,Te=this.pos;this.type=7&se,A(ge,D,this),this.pos===Te&&this.skip(se)}return D},readMessage:function(A,D){return this.readFields(A,D,this.readVarint()+this.pos)},readFixed32:function(){var A=wa(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=$i(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=wa(this.buf,this.pos)+4294967296*wa(this.buf,this.pos+4);return this.pos+=8,A},readSFixed64:function(){var A=wa(this.buf,this.pos)+4294967296*$i(this.buf,this.pos+4);return this.pos+=8,A},readFloat:function(){var A=Gn(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Gn(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var D,Z,se=this.buf;return D=127&(Z=se[this.pos++]),Z<128?D:(D|=(127&(Z=se[this.pos++]))<<7,Z<128?D:(D|=(127&(Z=se[this.pos++]))<<14,Z<128?D:(D|=(127&(Z=se[this.pos++]))<<21,Z<128?D:function(ge,Te,je){var Ze,pt,wt=je.buf;if(Ze=(112&(pt=wt[je.pos++]))>>4,pt<128||(Ze|=(127&(pt=wt[je.pos++]))<<3,pt<128)||(Ze|=(127&(pt=wt[je.pos++]))<<10,pt<128)||(Ze|=(127&(pt=wt[je.pos++]))<<17,pt<128)||(Ze|=(127&(pt=wt[je.pos++]))<<24,pt<128)||(Ze|=(1&(pt=wt[je.pos++]))<<31,pt<128))return Hi(ge,Ze,Te);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(Z=se[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,D=this.pos;return this.pos=A,A-D>=12&&Li?function(Z,se,ge){return Li.decode(Z.subarray(se,ge))}(this.buf,D,A):function(Z,se,ge){for(var Te="",je=se;je<ge;){var Ze,pt,wt,Wt=Z[je],Xt=null,dr=Wt>239?4:Wt>223?3:Wt>191?2:1;if(je+dr>ge)break;dr===1?Wt<128&&(Xt=Wt):dr===2?(192&(Ze=Z[je+1]))==128&&(Xt=(31&Wt)<<6|63&Ze)<=127&&(Xt=null):dr===3?(pt=Z[je+2],(192&(Ze=Z[je+1]))==128&&(192&pt)==128&&((Xt=(15&Wt)<<12|(63&Ze)<<6|63&pt)<=2047||Xt>=55296&&Xt<=57343)&&(Xt=null)):dr===4&&(pt=Z[je+2],wt=Z[je+3],(192&(Ze=Z[je+1]))==128&&(192&pt)==128&&(192&wt)==128&&((Xt=(15&Wt)<<18|(63&Ze)<<12|(63&pt)<<6|63&wt)<=65535||Xt>=1114112)&&(Xt=null)),Xt===null?(Xt=65533,dr=1):Xt>65535&&(Xt-=65536,Te+=String.fromCharCode(Xt>>>10&1023|55296),Xt=56320|1023&Xt),Te+=String.fromCharCode(Xt),je+=dr}return Te}(this.buf,D,A)},readBytes:function(){var A=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,A);return this.pos=A,D},readPackedVarint:function(A,D){if(this.type!==Ln.Bytes)return A.push(this.readVarint(D));var Z=Bi(this);for(A=A||[];this.pos<Z;)A.push(this.readVarint(D));return A},readPackedSVarint:function(A){if(this.type!==Ln.Bytes)return A.push(this.readSVarint());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==Ln.Bytes)return A.push(this.readBoolean());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==Ln.Bytes)return A.push(this.readFloat());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==Ln.Bytes)return A.push(this.readDouble());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==Ln.Bytes)return A.push(this.readFixed32());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==Ln.Bytes)return A.push(this.readSFixed32());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==Ln.Bytes)return A.push(this.readFixed64());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==Ln.Bytes)return A.push(this.readSFixed64());var D=Bi(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed64());return A},skip:function(A){var D=7&A;if(D===Ln.Varint)for(;this.buf[this.pos++]>127;);else if(D===Ln.Bytes)this.pos=this.readVarint()+this.pos;else if(D===Ln.Fixed32)this.pos+=4;else{if(D!==Ln.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(A,D){this.writeVarint(A<<3|D)},realloc:function(A){for(var D=this.length||16;D<this.pos+A;)D*=2;if(D!==this.length){var Z=new Uint8Array(D);Z.set(this.buf),this.buf=Z,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Di(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Di(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Di(this.buf,-1&A,this.pos),Di(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Di(this.buf,-1&A,this.pos),Di(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(D,Z){var se,ge;if(D>=0?(se=D%4294967296|0,ge=D/4294967296|0):(ge=~(-D/4294967296),4294967295^(se=~(-D%4294967296))?se=se+1|0:(se=0,ge=ge+1|0)),D>=18446744073709552e3||D<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Te,je,Ze){Ze.buf[Ze.pos++]=127&Te|128,Te>>>=7,Ze.buf[Ze.pos++]=127&Te|128,Te>>>=7,Ze.buf[Ze.pos++]=127&Te|128,Te>>>=7,Ze.buf[Ze.pos++]=127&Te|128,Ze.buf[Ze.pos]=127&(Te>>>=7)}(se,0,Z),function(Te,je){var Ze=(7&Te)<<4;je.buf[je.pos++]|=Ze|((Te>>>=3)?128:0),Te&&(je.buf[je.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(je.buf[je.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(je.buf[je.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(je.buf[je.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(je.buf[je.pos++]=127&Te)))))}(ge,Z)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var D=this.pos;this.pos=function(se,ge,Te){for(var je,Ze,pt=0;pt<ge.length;pt++){if((je=ge.charCodeAt(pt))>55295&&je<57344){if(!Ze){je>56319||pt+1===ge.length?(se[Te++]=239,se[Te++]=191,se[Te++]=189):Ze=je;continue}if(je<56320){se[Te++]=239,se[Te++]=191,se[Te++]=189,Ze=je;continue}je=Ze-55296<<10|je-56320|65536,Ze=null}else Ze&&(se[Te++]=239,se[Te++]=191,se[Te++]=189,Ze=null);je<128?se[Te++]=je:(je<2048?se[Te++]=je>>6|192:(je<65536?se[Te++]=je>>12|224:(se[Te++]=je>>18|240,se[Te++]=je>>12&63|128),se[Te++]=je>>6&63|128),se[Te++]=63&je|128)}return Te}(this.buf,A,this.pos);var Z=this.pos-D;Z>=128&&zi(D,Z,this),this.pos=D-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(A){this.realloc(4),vi(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),vi(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var D=A.length;this.writeVarint(D),this.realloc(D);for(var Z=0;Z<D;Z++)this.buf[this.pos++]=A[Z]},writeRawMessage:function(A,D){this.pos++;var Z=this.pos;A(D,this);var se=this.pos-Z;se>=128&&zi(Z,se,this),this.pos=Z-1,this.writeVarint(se),this.pos+=se},writeMessage:function(A,D,Z){this.writeTag(A,Ln.Bytes),this.writeRawMessage(D,Z)},writePackedVarint:function(A,D){D.length&&this.writeMessage(A,Gi,D)},writePackedSVarint:function(A,D){D.length&&this.writeMessage(A,aa,D)},writePackedBoolean:function(A,D){D.length&&this.writeMessage(A,$n,D)},writePackedFloat:function(A,D){D.length&&this.writeMessage(A,Yi,D)},writePackedDouble:function(A,D){D.length&&this.writeMessage(A,Fi,D)},writePackedFixed32:function(A,D){D.length&&this.writeMessage(A,Xn,D)},writePackedSFixed32:function(A,D){D.length&&this.writeMessage(A,Ui,D)},writePackedFixed64:function(A,D){D.length&&this.writeMessage(A,oa,D)},writePackedSFixed64:function(A,D){D.length&&this.writeMessage(A,pi,D)},writeBytesField:function(A,D){this.writeTag(A,Ln.Bytes),this.writeBytes(D)},writeFixed32Field:function(A,D){this.writeTag(A,Ln.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(A,D){this.writeTag(A,Ln.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(A,D){this.writeTag(A,Ln.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(A,D){this.writeTag(A,Ln.Fixed64),this.writeSFixed64(D)},writeVarintField:function(A,D){this.writeTag(A,Ln.Varint),this.writeVarint(D)},writeSVarintField:function(A,D){this.writeTag(A,Ln.Varint),this.writeSVarint(D)},writeStringField:function(A,D){this.writeTag(A,Ln.Bytes),this.writeString(D)},writeFloatField:function(A,D){this.writeTag(A,Ln.Fixed32),this.writeFloat(D)},writeDoubleField:function(A,D){this.writeTag(A,Ln.Fixed64),this.writeDouble(D)},writeBooleanField:function(A,D){this.writeVarintField(A,Boolean(D))}};var ra=function(A,D){var Z=D.pixelRatio,se=D.version,ge=D.stretchX,Te=D.stretchY,je=D.content;this.paddedRect=A,this.pixelRatio=Z,this.stretchX=ge,this.stretchY=Te,this.content=je,this.version=se},ki={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ki.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ki.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ki.tlbr.get=function(){return this.tl.concat(this.br)},ki.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ra.prototype,ki);var _i=function(A,D){var Z={},se={};this.haveRenderCallbacks=[];var ge=[];this.addImages(A,Z,ge),this.addImages(D,se,ge);var Te=co(ge),je=new oc({width:Te.w||1,height:Te.h||1});for(var Ze in A){var pt=A[Ze],wt=Z[Ze].paddedRect;oc.copy(pt.data,je,{x:0,y:0},{x:wt.x+1,y:wt.y+1},pt.data)}for(var Wt in D){var Xt=D[Wt],dr=se[Wt].paddedRect,jr=dr.x+1,Lr=dr.y+1,qr=Xt.data.width,Jr=Xt.data.height;oc.copy(Xt.data,je,{x:0,y:0},{x:jr,y:Lr},Xt.data),oc.copy(Xt.data,je,{x:0,y:Jr-1},{x:jr,y:Lr-1},{width:qr,height:1}),oc.copy(Xt.data,je,{x:0,y:0},{x:jr,y:Lr+Jr},{width:qr,height:1}),oc.copy(Xt.data,je,{x:qr-1,y:0},{x:jr-1,y:Lr},{width:1,height:Jr}),oc.copy(Xt.data,je,{x:0,y:0},{x:jr+qr,y:Lr},{width:1,height:Jr})}this.image=je,this.iconPositions=Z,this.patternPositions=se};_i.prototype.addImages=function(E,A,D){for(var Z in E){var se=E[Z],ge={x:0,y:0,w:se.data.width+2,h:se.data.height+2};D.push(ge),A[Z]=new ra(ge,se),se.hasRenderCallback&&this.haveRenderCallbacks.push(Z)}},_i.prototype.patchUpdatedImages=function(E,A){for(var D in E.dispatchRenderCallbacks(this.haveRenderCallbacks),E.updatedImages)this.patchUpdatedImage(this.iconPositions[D],E.getImage(D),A),this.patchUpdatedImage(this.patternPositions[D],E.getImage(D),A)},_i.prototype.patchUpdatedImage=function(E,A,D){if(E&&A&&E.version!==A.version){E.version=A.version;var Z=E.tl;D.update(A.data,void 0,{x:Z[0],y:Z[1]})}},Kt("ImagePosition",ra),Kt("ImageAtlas",_i);var Ua={horizontal:1,vertical:2,horizontalOnly:3},Vo=function(){this.scale=1,this.fontStack="",this.imageName=null};Vo.forText=function(E,A){var D=new Vo;return D.scale=E||1,D.fontStack=A,D},Vo.forImage=function(E){var A=new Vo;return A.imageName=E,A};var sa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Fo(E,A,D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr){var qr,Jr=sa.fromFeature(E,se);Wt===Ua.vertical&&Jr.verticalizePunctuation();var Cn=oi.processBidirectionalText,Un=oi.processStyledBidirectionalText;if(Cn&&Jr.sections.length===1){qr=[];for(var Jn=0,yi=Cn(Jr.toString(),Tl(Jr,pt,ge,A,Z,dr,jr));Jn<yi.length;Jn+=1){var hi=yi[Jn],Xi=new sa;Xi.text=hi,Xi.sections=Jr.sections;for(var Zi=0;Zi<hi.length;Zi++)Xi.sectionIndex.push(0);qr.push(Xi)}}else if(Un){qr=[];for(var ba=0,Ma=Un(Jr.text,Jr.sectionIndex,Tl(Jr,pt,ge,A,Z,dr,jr));ba<Ma.length;ba+=1){var Aa=Ma[ba],da=new sa;da.text=Aa[0],da.sectionIndex=Aa[1],da.sections=Jr.sections,qr.push(da)}}else qr=function(Ca,cs){for(var jo=[],eu=Ca.text,io=0,ds=0,mu=cs;ds<mu.length;ds+=1){var Cu=mu[ds];jo.push(Ca.substring(io,Cu)),io=Cu}return io<eu.length&&jo.push(Ca.substring(io,eu.length)),jo}(Jr,Tl(Jr,pt,ge,A,Z,dr,jr));var yo=[],ka={positionedLines:yo,text:Jr.toString(),top:wt[1],bottom:wt[1],left:wt[0],right:wt[0],writingMode:Wt,iconsInText:!1,verticalizable:!1};return function(Ca,cs,jo,eu,io,ds,mu,Cu,$u,tl,pl,Fl){for(var Rl=0,cc=-17,nc=0,bc=0,Zl=Cu==="right"?1:Cu==="left"?0:.5,Nl=0,Kl=0,Bs=io;Kl<Bs.length;Kl+=1){var ms=Bs[Kl];ms.trim();var Au=ms.getMaxScale(),Du=24*(Au-1),xc={positionedGlyphs:[],lineOffset:0};Ca.positionedLines[Nl]=xc;var ku=xc.positionedGlyphs,rl=0;if(ms.length()){for(var vc=0;vc<ms.length();vc++){var Ts=ms.getSection(vc),eh=ms.getSectionIndex(vc),qc=ms.getCharCode(vc),Tf=0,Gc=null,fc=null,th=null,rh=24,nh=!($u===Ua.horizontal||!pl&&!ao(qc)||pl&&(Eo[qc]||(_h=qc,Wn.Arabic(_h)||Wn["Arabic Supplement"](_h)||Wn["Arabic Extended-A"](_h)||Wn["Arabic Presentation Forms-A"](_h)||Wn["Arabic Presentation Forms-B"](_h))));if(Ts.imageName){var Ud=eu[Ts.imageName];if(!Ud)continue;th=Ts.imageName,Ca.iconsInText=Ca.iconsInText||!0,fc=Ud.paddedRect;var Xc=Ud.displaySize;Ts.scale=24*Ts.scale/Fl,Tf=Du+(24-Xc[1]*Ts.scale),rh=(Gc={width:Xc[0],height:Xc[1],left:1,top:-3,advance:nh?Xc[1]:Xc[0]}).advance;var kd=nh?Xc[0]*Ts.scale-24*Au:Xc[1]*Ts.scale-24*Au;kd>0&&kd>rl&&(rl=kd)}else{var zd=jo[Ts.fontStack],Vh=zd&&zd[qc];if(Vh&&Vh.rect)fc=Vh.rect,Gc=Vh.metrics;else{var Av=cs[Ts.fontStack],Vd=Av&&Av[qc];if(!Vd)continue;Gc=Vd.metrics}Tf=24*(Au-Ts.scale)}nh?(Ca.verticalizable=!0,ku.push({glyph:qc,imageName:th,x:Rl,y:cc+Tf,vertical:nh,scale:Ts.scale,fontStack:Ts.fontStack,sectionIndex:eh,metrics:Gc,rect:fc}),Rl+=rh*Ts.scale+tl):(ku.push({glyph:qc,imageName:th,x:Rl,y:cc+Tf,vertical:nh,scale:Ts.scale,fontStack:Ts.fontStack,sectionIndex:eh,metrics:Gc,rect:fc}),Rl+=Gc.advance*Ts.scale+tl)}ku.length!==0&&(nc=Math.max(Rl-tl,nc),Ml(ku,0,ku.length-1,Zl,rl)),Rl=0;var Ov=ds*Au+rl;xc.lineOffset=Math.max(rl,Du),cc+=Ov,bc=Math.max(Ov,bc),++Nl}else cc+=ds,++Nl}var _h,sd=cc- -17,Tv=Lu(mu),ud=Tv.horizontalAlign,bh=Tv.verticalAlign;(function(Wd,Mv,Wh,ld,cd,Cv,fd,Hd,Gd){var Xd,Yd=(Mv-Wh)*cd;Xd=Cv!==fd?-Hd*ld- -17:(-ld*Gd+.5)*fd;for(var zf=0,ih=Wd;zf<ih.length;zf+=1)for(var hd=0,dd=ih[zf].positionedGlyphs;hd<dd.length;hd+=1){var $d=dd[hd];$d.x+=Yd,$d.y+=Xd}})(Ca.positionedLines,Zl,ud,bh,nc,bc,ds,sd,io.length),Ca.top+=-bh*sd,Ca.bottom=Ca.top+sd,Ca.left+=-ud*nc,Ca.right=Ca.left+nc}(ka,A,D,Z,qr,Te,je,Ze,Wt,pt,Xt,Lr),!function(Ca){for(var cs=0,jo=Ca;cs<jo.length;cs+=1)if(jo[cs].positionedGlyphs.length!==0)return!1;return!0}(yo)&&ka}sa.fromFeature=function(E,A){for(var D=new sa,Z=0;Z<E.sections.length;Z++){var se=E.sections[Z];se.image?D.addImageSection(se):D.addTextSection(se,A)}return D},sa.prototype.length=function(){return this.text.length},sa.prototype.getSection=function(E){return this.sections[this.sectionIndex[E]]},sa.prototype.getSectionIndex=function(E){return this.sectionIndex[E]},sa.prototype.getCharCode=function(E){return this.text.charCodeAt(E)},sa.prototype.verticalizePunctuation=function(){this.text=function(E){for(var A="",D=0;D<E.length;D++){var Z=E.charCodeAt(D+1)||null,se=E.charCodeAt(D-1)||null;A+=Z&&is(Z)&&!Xr[E[D+1]]||se&&is(se)&&!Xr[E[D-1]]||!Xr[E[D]]?E[D]:Xr[E[D]]}return A}(this.text)},sa.prototype.trim=function(){for(var E=0,A=0;A<this.text.length&&Eo[this.text.charCodeAt(A)];A++)E++;for(var D=this.text.length,Z=this.text.length-1;Z>=0&&Z>=E&&Eo[this.text.charCodeAt(Z)];Z--)D--;this.text=this.text.substring(E,D),this.sectionIndex=this.sectionIndex.slice(E,D)},sa.prototype.substring=function(E,A){var D=new sa;return D.text=this.text.substring(E,A),D.sectionIndex=this.sectionIndex.slice(E,A),D.sections=this.sections,D},sa.prototype.toString=function(){return this.text},sa.prototype.getMaxScale=function(){var E=this;return this.sectionIndex.reduce(function(A,D){return Math.max(A,E.sections[D].scale)},0)},sa.prototype.addTextSection=function(E,A){this.text+=E.text,this.sections.push(Vo.forText(E.scale,E.fontStack||A));for(var D=this.sections.length-1,Z=0;Z<E.text.length;++Z)this.sectionIndex.push(D)},sa.prototype.addImageSection=function(E){var A=E.image?E.image.name:"";if(A.length!==0){var D=this.getNextImageSectionCharCode();D?(this.text+=String.fromCharCode(D),this.sections.push(Vo.forImage(A)),this.sectionIndex.push(this.sections.length-1)):j("Reached maximum number of images 6401")}else j("Can't add FormattedSection with an empty image.")},sa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Eo={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oo={};function js(E,A,D,Z,se,ge){if(A.imageName){var Te=Z[A.imageName];return Te?Te.displaySize[0]*A.scale*24/ge+se:0}var je=D[A.fontStack],Ze=je&&je[E];return Ze?Ze.metrics.advance*A.scale+se:0}function Ol(E,A,D,Z){var se=Math.pow(E-A,2);return Z?E<A?se/2:2*se:se+Math.abs(D)*D}function Yl(E,A,D){var Z=0;return E===10&&(Z-=1e4),D&&(Z+=150),E!==40&&E!==65288||(Z+=50),A!==41&&A!==65289||(Z+=50),Z}function Jo(E,A,D,Z,se,ge){for(var Te=null,je=Ol(A,D,se,ge),Ze=0,pt=Z;Ze<pt.length;Ze+=1){var wt=pt[Ze],Wt=Ol(A-wt.x,D,se,ge)+wt.badness;Wt<=je&&(Te=wt,je=Wt)}return{index:E,x:A,priorBreak:Te,badness:je}}function Tl(E,A,D,Z,se,ge,Te){if(ge!=="point")return[];if(!E)return[];for(var je,Ze=[],pt=function(qr,Jr,Cn,Un,Jn,yi){for(var hi=0,Xi=0;Xi<qr.length();Xi++){var Zi=qr.getSection(Xi);hi+=js(qr.getCharCode(Xi),Zi,Un,Jn,Jr,yi)}return hi/Math.max(1,Math.ceil(hi/Cn))}(E,A,D,Z,se,Te),wt=E.text.indexOf("\u200B")>=0,Wt=0,Xt=0;Xt<E.length();Xt++){var dr=E.getSection(Xt),jr=E.getCharCode(Xt);if(Eo[jr]||(Wt+=js(jr,dr,Z,se,A,Te)),Xt<E.length()-1){var Lr=!((je=jr)<11904||!(Wn["Bopomofo Extended"](je)||Wn.Bopomofo(je)||Wn["CJK Compatibility Forms"](je)||Wn["CJK Compatibility Ideographs"](je)||Wn["CJK Compatibility"](je)||Wn["CJK Radicals Supplement"](je)||Wn["CJK Strokes"](je)||Wn["CJK Symbols and Punctuation"](je)||Wn["CJK Unified Ideographs Extension A"](je)||Wn["CJK Unified Ideographs"](je)||Wn["Enclosed CJK Letters and Months"](je)||Wn["Halfwidth and Fullwidth Forms"](je)||Wn.Hiragana(je)||Wn["Ideographic Description Characters"](je)||Wn["Kangxi Radicals"](je)||Wn["Katakana Phonetic Extensions"](je)||Wn.Katakana(je)||Wn["Vertical Forms"](je)||Wn["Yi Radicals"](je)||Wn["Yi Syllables"](je)));(oo[jr]||Lr||dr.imageName)&&Ze.push(Jo(Xt+1,Wt,pt,Ze,Yl(jr,E.getCharCode(Xt+1),Lr&&wt),!1))}}return function qr(Jr){return Jr?qr(Jr.priorBreak).concat(Jr.index):[]}(Jo(E.length(),Wt,pt,Ze,0,!0))}function Lu(E){var A=.5,D=.5;switch(E){case"right":case"top-right":case"bottom-right":A=1;break;case"left":case"top-left":case"bottom-left":A=0}switch(E){case"bottom":case"bottom-right":case"bottom-left":D=1;break;case"top":case"top-right":case"top-left":D=0}return{horizontalAlign:A,verticalAlign:D}}function Ml(E,A,D,Z,se){if(Z||se)for(var ge=E[D],Te=(E[D].x+ge.metrics.advance*ge.scale)*Z,je=A;je<=D;je++)E[je].x-=Te,E[je].y+=se}function Cl(E,A,D,Z,se,ge){var Te,je=E.image;if(je.content){var Ze=je.content,pt=je.pixelRatio||1;Te=[Ze[0]/pt,Ze[1]/pt,je.displaySize[0]-Ze[2]/pt,je.displaySize[1]-Ze[3]/pt]}var wt,Wt,Xt,dr,jr=A.left*ge,Lr=A.right*ge;D==="width"||D==="both"?(dr=se[0]+jr-Z[3],Wt=se[0]+Lr+Z[1]):Wt=(dr=se[0]+(jr+Lr-je.displaySize[0])/2)+je.displaySize[0];var qr=A.top*ge,Jr=A.bottom*ge;return D==="height"||D==="both"?(wt=se[1]+qr-Z[0],Xt=se[1]+Jr+Z[2]):Xt=(wt=se[1]+(qr+Jr-je.displaySize[1])/2)+je.displaySize[1],{image:je,top:wt,right:Wt,bottom:Xt,left:dr,collisionPadding:Te}}oo[10]=!0,oo[32]=!0,oo[38]=!0,oo[40]=!0,oo[41]=!0,oo[43]=!0,oo[45]=!0,oo[47]=!0,oo[173]=!0,oo[183]=!0,oo[8203]=!0,oo[8208]=!0,oo[8211]=!0,oo[8231]=!0;var el=function(E){function A(D,Z,se,ge){E.call(this,D,Z),this.angle=se,ge!==void 0&&(this.segment=ge)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.clone=function(){return new A(this.x,this.y,this.angle,this.segment)},A}(c);function Dl(E,A){var D=A.expression;if(D.kind==="constant")return{kind:"constant",layoutSize:D.evaluate(new bn(E+1))};if(D.kind==="source")return{kind:"source"};for(var Z=D.zoomStops,se=D.interpolationType,ge=0;ge<Z.length&&Z[ge]<=E;)ge++;for(var Te=ge=Math.max(0,ge-1);Te<Z.length&&Z[Te]<E+1;)Te++;Te=Math.min(Z.length-1,Te);var je=Z[ge],Ze=Z[Te];return D.kind==="composite"?{kind:"composite",minZoom:je,maxZoom:Ze,interpolationType:se}:{kind:"camera",minZoom:je,maxZoom:Ze,minSize:D.evaluate(new bn(je)),maxSize:D.evaluate(new bn(Ze)),interpolationType:se}}function ec(E,A,D){var Z=A.uSize,se=D.lowerSize;return E.kind==="source"?se/128:E.kind==="composite"?mo(se/128,D.upperSize/128,A.uSizeT):Z}function Pl(E,A){var D=0,Z=0;if(E.kind==="constant")Z=E.layoutSize;else if(E.kind!=="source"){var se=E.interpolationType,ge=se?f(qo.interpolationFactor(se,A,E.minZoom,E.maxZoom),0,1):0;E.kind==="camera"?Z=mo(E.minSize,E.maxSize,ge):D=ge}return{uSizeT:D,uSize:Z}}Kt("Anchor",el);var Wo=Object.freeze({__proto__:null,getSizeData:Dl,evaluateSizeForFeature:ec,evaluateSizeForZoom:Pl,SIZE_PACK_FACTOR:128});function tc(E,A,D,Z,se){if(A.segment===void 0)return!0;for(var ge=A,Te=A.segment+1,je=0;je>-D/2;){if(--Te<0)return!1;je-=E[Te].dist(ge),ge=E[Te]}je+=E[Te].dist(E[Te+1]),Te++;for(var Ze=[],pt=0;je<D/2;){var wt=E[Te],Wt=E[Te+1];if(!Wt)return!1;var Xt=E[Te-1].angleTo(wt)-wt.angleTo(Wt);for(Xt=Math.abs((Xt+3*Math.PI)%(2*Math.PI)-Math.PI),Ze.push({distance:je,angleDelta:Xt}),pt+=Xt;je-Ze[0].distance>Z;)pt-=Ze.shift().angleDelta;if(pt>se)return!1;Te++,je+=wt.dist(Wt)}return!0}function Gs(E){for(var A=0,D=0;D<E.length-1;D++)A+=E[D].dist(E[D+1]);return A}function no(E,A,D){return E?.6*A*D:0}function No(E,A){return Math.max(E?E.right-E.left:0,A?A.right-A.left:0)}function Os(E,A,D,Z,se,ge){for(var Te=no(D,se,ge),je=No(D,Z)*ge,Ze=0,pt=Gs(E)/2,wt=0;wt<E.length-1;wt++){var Wt=E[wt],Xt=E[wt+1],dr=Wt.dist(Xt);if(Ze+dr>pt){var jr=(pt-Ze)/dr,Lr=mo(Wt.x,Xt.x,jr),qr=mo(Wt.y,Xt.y,jr),Jr=new el(Lr,qr,Xt.angleTo(Wt),wt);return Jr._round(),!Te||tc(E,Jr,je,Te,A)?Jr:void 0}Ze+=dr}}function rc(E,A,D,Z,se,ge,Te,je,Ze){var pt=no(Z,ge,Te),wt=No(Z,se),Wt=wt*Te,Xt=E[0].x===0||E[0].x===Ze||E[0].y===0||E[0].y===Ze;return A-Wt<A/4&&(A=Wt+A/4),function dr(jr,Lr,qr,Jr,Cn,Un,Jn,yi,hi){for(var Xi=Un/2,Zi=Gs(jr),ba=0,Ma=Lr-qr,Aa=[],da=0;da<jr.length-1;da++){for(var yo=jr[da],ka=jr[da+1],Ca=yo.dist(ka),cs=ka.angleTo(yo);Ma+qr<ba+Ca;){var jo=((Ma+=qr)-ba)/Ca,eu=mo(yo.x,ka.x,jo),io=mo(yo.y,ka.y,jo);if(eu>=0&&eu<hi&&io>=0&&io<hi&&Ma-Xi>=0&&Ma+Xi<=Zi){var ds=new el(eu,io,cs,da);ds._round(),Jr&&!tc(jr,ds,Un,Jr,Cn)||Aa.push(ds)}}ba+=Ca}return yi||Aa.length||Jn||(Aa=dr(jr,ba/2,qr,Jr,Cn,Un,Jn,!0,hi)),Aa}(E,Xt?A/2*je%A:(wt/2+2*ge)*Te*je%A,A,pt,D,Wt,Xt,!1,Ze)}function _c(E,A,D,Z,se){for(var ge=[],Te=0;Te<E.length;Te++)for(var je=E[Te],Ze=void 0,pt=0;pt<je.length-1;pt++){var wt=je[pt],Wt=je[pt+1];wt.x<A&&Wt.x<A||(wt.x<A?wt=new c(A,wt.y+(A-wt.x)/(Wt.x-wt.x)*(Wt.y-wt.y))._round():Wt.x<A&&(Wt=new c(A,wt.y+(A-wt.x)/(Wt.x-wt.x)*(Wt.y-wt.y))._round()),wt.y<D&&Wt.y<D||(wt.y<D?wt=new c(wt.x+(D-wt.y)/(Wt.y-wt.y)*(Wt.x-wt.x),D)._round():Wt.y<D&&(Wt=new c(wt.x+(D-wt.y)/(Wt.y-wt.y)*(Wt.x-wt.x),D)._round()),wt.x>=Z&&Wt.x>=Z||(wt.x>=Z?wt=new c(Z,wt.y+(Z-wt.x)/(Wt.x-wt.x)*(Wt.y-wt.y))._round():Wt.x>=Z&&(Wt=new c(Z,wt.y+(Z-wt.x)/(Wt.x-wt.x)*(Wt.y-wt.y))._round()),wt.y>=se&&Wt.y>=se||(wt.y>=se?wt=new c(wt.x+(se-wt.y)/(Wt.y-wt.y)*(Wt.x-wt.x),se)._round():Wt.y>=se&&(Wt=new c(wt.x+(se-wt.y)/(Wt.y-wt.y)*(Wt.x-wt.x),se)._round()),Ze&&wt.equals(Ze[Ze.length-1])||ge.push(Ze=[wt]),Ze.push(Wt)))))}return ge}function kr(E,A,D,Z){var se=[],ge=E.image,Te=ge.pixelRatio,je=ge.paddedRect.w-2,Ze=ge.paddedRect.h-2,pt=E.right-E.left,wt=E.bottom-E.top,Wt=ge.stretchX||[[0,je]],Xt=ge.stretchY||[[0,Ze]],dr=function(io,ds){return io+ds[1]-ds[0]},jr=Wt.reduce(dr,0),Lr=Xt.reduce(dr,0),qr=je-jr,Jr=Ze-Lr,Cn=0,Un=jr,Jn=0,yi=Lr,hi=0,Xi=qr,Zi=0,ba=Jr;if(ge.content&&Z){var Ma=ge.content;Cn=ii(Wt,0,Ma[0]),Jn=ii(Xt,0,Ma[1]),Un=ii(Wt,Ma[0],Ma[2]),yi=ii(Xt,Ma[1],Ma[3]),hi=Ma[0]-Cn,Zi=Ma[1]-Jn,Xi=Ma[2]-Ma[0]-Un,ba=Ma[3]-Ma[1]-yi}var Aa=function(io,ds,mu,Cu){var $u=fa(io.stretch-Cn,Un,pt,E.left),tl=Do(io.fixed-hi,Xi,io.stretch,jr),pl=fa(ds.stretch-Jn,yi,wt,E.top),Fl=Do(ds.fixed-Zi,ba,ds.stretch,Lr),Rl=fa(mu.stretch-Cn,Un,pt,E.left),cc=Do(mu.fixed-hi,Xi,mu.stretch,jr),nc=fa(Cu.stretch-Jn,yi,wt,E.top),bc=Do(Cu.fixed-Zi,ba,Cu.stretch,Lr),Zl=new c($u,pl),Nl=new c(Rl,pl),Kl=new c(Rl,nc),Bs=new c($u,nc),ms=new c(tl/Te,Fl/Te),Au=new c(cc/Te,bc/Te),Du=A*Math.PI/180;if(Du){var xc=Math.sin(Du),ku=Math.cos(Du),rl=[ku,-xc,xc,ku];Zl._matMult(rl),Nl._matMult(rl),Bs._matMult(rl),Kl._matMult(rl)}var vc=io.stretch+io.fixed,Ts=ds.stretch+ds.fixed;return{tl:Zl,tr:Nl,bl:Bs,br:Kl,tex:{x:ge.paddedRect.x+1+vc,y:ge.paddedRect.y+1+Ts,w:mu.stretch+mu.fixed-vc,h:Cu.stretch+Cu.fixed-Ts},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ms,pixelOffsetBR:Au,minFontScaleX:Xi/Te/pt,minFontScaleY:ba/Te/wt,isSDF:D}};if(Z&&(ge.stretchX||ge.stretchY))for(var da=Hn(Wt,qr,jr),yo=Hn(Xt,Jr,Lr),ka=0;ka<da.length-1;ka++)for(var Ca=da[ka],cs=da[ka+1],jo=0;jo<yo.length-1;jo++)se.push(Aa(Ca,yo[jo],cs,yo[jo+1]));else se.push(Aa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:je+1},{fixed:0,stretch:Ze+1}));return se}function ii(E,A,D){for(var Z=0,se=0,ge=E;se<ge.length;se+=1){var Te=ge[se];Z+=Math.max(A,Math.min(D,Te[1]))-Math.max(A,Math.min(D,Te[0]))}return Z}function Hn(E,A,D){for(var Z=[{fixed:-1,stretch:0}],se=0,ge=E;se<ge.length;se+=1){var Te=ge[se],je=Te[0],Ze=Te[1],pt=Z[Z.length-1];Z.push({fixed:je-pt.stretch,stretch:pt.stretch}),Z.push({fixed:je-pt.stretch,stretch:pt.stretch+(Ze-je)})}return Z.push({fixed:A+1,stretch:D}),Z}function fa(E,A,D,Z){return E/A*D+Z}function Do(E,A,D,Z){return E-A*D/Z}var au=function(A,D,Z,se,ge,Te,je,Ze,pt,wt){if(this.boxStartIndex=A.length,pt){var Wt=Te.top,Xt=Te.bottom,dr=Te.collisionPadding;dr&&(Wt-=dr[1],Xt+=dr[3]);var jr=Xt-Wt;jr>0&&(jr=Math.max(10,jr),this.circleDiameter=jr)}else{var Lr=Te.top*je-Ze,qr=Te.bottom*je+Ze,Jr=Te.left*je-Ze,Cn=Te.right*je+Ze,Un=Te.collisionPadding;if(Un&&(Jr-=Un[0]*je,Lr-=Un[1]*je,Cn+=Un[2]*je,qr+=Un[3]*je),wt){var Jn=new c(Jr,Lr),yi=new c(Cn,Lr),hi=new c(Jr,qr),Xi=new c(Cn,qr),Zi=wt*Math.PI/180;Jn._rotate(Zi),yi._rotate(Zi),hi._rotate(Zi),Xi._rotate(Zi),Jr=Math.min(Jn.x,yi.x,hi.x,Xi.x),Cn=Math.max(Jn.x,yi.x,hi.x,Xi.x),Lr=Math.min(Jn.y,yi.y,hi.y,Xi.y),qr=Math.max(Jn.y,yi.y,hi.y,Xi.y)}A.emplaceBack(D.x,D.y,Jr,Lr,Cn,qr,Z,se,ge)}this.boxEndIndex=A.length},sr=function(A,D){if(A===void 0&&(A=[]),D===void 0&&(D=Pr),this.data=A,this.length=this.data.length,this.compare=D,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Pr(E,A){return E<A?-1:E>A?1:0}function $r(E,A,D){A===void 0&&(A=1),D===void 0&&(D=!1);for(var Z=1/0,se=1/0,ge=-1/0,Te=-1/0,je=E[0],Ze=0;Ze<je.length;Ze++){var pt=je[Ze];(!Ze||pt.x<Z)&&(Z=pt.x),(!Ze||pt.y<se)&&(se=pt.y),(!Ze||pt.x>ge)&&(ge=pt.x),(!Ze||pt.y>Te)&&(Te=pt.y)}var wt=Math.min(ge-Z,Te-se),Wt=wt/2,Xt=new sr([],Zn);if(wt===0)return new c(Z,se);for(var dr=Z;dr<ge;dr+=wt)for(var jr=se;jr<Te;jr+=wt)Xt.push(new Vn(dr+Wt,jr+Wt,Wt,E));for(var Lr=function(Cn){for(var Un=0,Jn=0,yi=0,hi=Cn[0],Xi=0,Zi=hi.length,ba=Zi-1;Xi<Zi;ba=Xi++){var Ma=hi[Xi],Aa=hi[ba],da=Ma.x*Aa.y-Aa.x*Ma.y;Jn+=(Ma.x+Aa.x)*da,yi+=(Ma.y+Aa.y)*da,Un+=3*da}return new Vn(Jn/Un,yi/Un,0,Cn)}(E),qr=Xt.length;Xt.length;){var Jr=Xt.pop();(Jr.d>Lr.d||!Lr.d)&&(Lr=Jr,D&&console.log("found best %d after %d probes",Math.round(1e4*Jr.d)/1e4,qr)),Jr.max-Lr.d<=A||(Xt.push(new Vn(Jr.p.x-(Wt=Jr.h/2),Jr.p.y-Wt,Wt,E)),Xt.push(new Vn(Jr.p.x+Wt,Jr.p.y-Wt,Wt,E)),Xt.push(new Vn(Jr.p.x-Wt,Jr.p.y+Wt,Wt,E)),Xt.push(new Vn(Jr.p.x+Wt,Jr.p.y+Wt,Wt,E)),qr+=4)}return D&&(console.log("num probes: "+qr),console.log("best distance: "+Lr.d)),Lr.p}function Zn(E,A){return A.max-E.max}function Vn(E,A,D,Z){this.p=new c(E,A),this.h=D,this.d=function(se,ge){for(var Te=!1,je=1/0,Ze=0;Ze<ge.length;Ze++)for(var pt=ge[Ze],wt=0,Wt=pt.length,Xt=Wt-1;wt<Wt;Xt=wt++){var dr=pt[wt],jr=pt[Xt];dr.y>se.y!=jr.y>se.y&&se.x<(jr.x-dr.x)*(se.y-dr.y)/(jr.y-dr.y)+dr.x&&(Te=!Te),je=Math.min(je,Kc(se,dr,jr))}return(Te?1:-1)*Math.sqrt(je)}(this.p,Z),this.max=this.d+this.h*Math.SQRT2}sr.prototype.push=function(E){this.data.push(E),this.length++,this._up(this.length-1)},sr.prototype.pop=function(){if(this.length!==0){var E=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),E}},sr.prototype.peek=function(){return this.data[0]},sr.prototype._up=function(E){for(var A=this.data,D=this.compare,Z=A[E];E>0;){var se=E-1>>1,ge=A[se];if(D(Z,ge)>=0)break;A[E]=ge,E=se}A[E]=Z},sr.prototype._down=function(E){for(var A=this.data,D=this.compare,Z=this.length>>1,se=A[E];E<Z;){var ge=1+(E<<1),Te=A[ge],je=ge+1;if(je<this.length&&D(A[je],Te)<0&&(ge=je,Te=A[je]),D(Te,se)>=0)break;A[E]=Te,E=ge}A[E]=se};var sn=Number.POSITIVE_INFINITY;function gn(E,A){return A[1]!==sn?function(D,Z,se){var ge=0,Te=0;switch(Z=Math.abs(Z),se=Math.abs(se),D){case"top-right":case"top-left":case"top":Te=se-7;break;case"bottom-right":case"bottom-left":case"bottom":Te=7-se}switch(D){case"top-right":case"bottom-right":case"right":ge=-Z;break;case"top-left":case"bottom-left":case"left":ge=Z}return[ge,Te]}(E,A[0],A[1]):function(D,Z){var se=0,ge=0;Z<0&&(Z=0);var Te=Z/Math.sqrt(2);switch(D){case"top-right":case"top-left":ge=Te-7;break;case"bottom-right":case"bottom-left":ge=7-Te;break;case"bottom":ge=7-Z;break;case"top":ge=Z-7}switch(D){case"top-right":case"bottom-right":se=-Te;break;case"top-left":case"bottom-left":se=Te;break;case"left":se=Z;break;case"right":se=-Z}return[se,ge]}(E,A[0])}function Sn(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nr(E,A,D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr){var Lr=function(Jn,yi,hi,Xi,Zi,ba,Ma,Aa){for(var da=Xi.layout.get("text-rotate").evaluate(ba,{})*Math.PI/180,yo=[],ka=0,Ca=yi.positionedLines;ka<Ca.length;ka+=1)for(var cs=Ca[ka],jo=0,eu=cs.positionedGlyphs;jo<eu.length;jo+=1){var io=eu[jo];if(io.rect){var ds=io.rect||{},mu=4,Cu=!0,$u=1,tl=0,pl=(Zi||Aa)&&io.vertical,Fl=io.metrics.advance*io.scale/2;if(Aa&&yi.verticalizable&&(tl=cs.lineOffset/2-(io.imageName?-(24-io.metrics.width*io.scale)/2:24*(io.scale-1))),io.imageName){var Rl=Ma[io.imageName];Cu=Rl.sdf,mu=1/($u=Rl.pixelRatio)}var cc=Zi?[io.x+Fl,io.y]:[0,0],nc=Zi?[0,0]:[io.x+Fl+hi[0],io.y+hi[1]-tl],bc=[0,0];pl&&(bc=nc,nc=[0,0]);var Zl=(io.metrics.left-mu)*io.scale-Fl+nc[0],Nl=(-io.metrics.top-mu)*io.scale+nc[1],Kl=Zl+ds.w*io.scale/$u,Bs=Nl+ds.h*io.scale/$u,ms=new c(Zl,Nl),Au=new c(Kl,Nl),Du=new c(Zl,Bs),xc=new c(Kl,Bs);if(pl){var ku=new c(-Fl,Fl- -17),rl=-Math.PI/2,vc=12-Fl,Ts=new c(22-vc,-(io.imageName?vc:0)),eh=new(Function.prototype.bind.apply(c,[null].concat(bc)));ms._rotateAround(rl,ku)._add(Ts)._add(eh),Au._rotateAround(rl,ku)._add(Ts)._add(eh),Du._rotateAround(rl,ku)._add(Ts)._add(eh),xc._rotateAround(rl,ku)._add(Ts)._add(eh)}if(da){var qc=Math.sin(da),Tf=Math.cos(da),Gc=[Tf,-qc,qc,Tf];ms._matMult(Gc),Au._matMult(Gc),Du._matMult(Gc),xc._matMult(Gc)}var fc=new c(0,0),th=new c(0,0);yo.push({tl:ms,tr:Au,bl:Du,br:xc,tex:ds,writingMode:yi.writingMode,glyphOffset:cc,sectionIndex:io.sectionIndex,isSDF:Cu,pixelOffsetTL:fc,pixelOffsetBR:th,minFontScaleX:0,minFontScaleY:0})}}return yo}(0,D,je,se,ge,Te,Z,E.allowVerticalPlacement),qr=E.textSizeData,Jr=null;qr.kind==="source"?(Jr=[128*se.layout.get("text-size").evaluate(Te,{})])[0]>32640&&j(E.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):qr.kind==="composite"&&((Jr=[128*dr.compositeTextSizes[0].evaluate(Te,{},jr),128*dr.compositeTextSizes[1].evaluate(Te,{},jr)])[0]>32640||Jr[1]>32640)&&j(E.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),E.addSymbols(E.text,Lr,Jr,je,ge,Te,pt,A,Ze.lineStartIndex,Ze.lineLength,Xt,jr);for(var Cn=0,Un=wt;Cn<Un.length;Cn+=1)Wt[Un[Cn]]=E.text.placedSymbolArray.length-1;return 4*Lr.length}function dn(E){for(var A in E)return E[A];return null}function Or(E,A,D,Z){var se=E.compareText;if(A in se){for(var ge=se[A],Te=ge.length-1;Te>=0;Te--)if(Z.dist(ge[Te])<D)return!0}else se[A]=[];return se[A].push(Z),!1}var pn=yc.VectorTileFeature.types,ai=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ci(E,A,D,Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt){var dr=je?Math.min(32640,Math.round(je[0])):0,jr=je?Math.min(32640,Math.round(je[1])):0;E.emplaceBack(A,D,Math.round(32*Z),Math.round(32*se),ge,Te,(dr<<1)+(Ze?1:0),jr,16*pt,16*wt,256*Wt,256*Xt)}function Ri(E,A,D){E.emplaceBack(A.x,A.y,D),E.emplaceBack(A.x,A.y,D),E.emplaceBack(A.x,A.y,D),E.emplaceBack(A.x,A.y,D)}function Oi(E){for(var A=0,D=E.sections;A<D.length;A+=1)if(bt(D[A].text))return!0;return!1}var Ni=function(A){this.layoutVertexArray=new la,this.indexArray=new Lo,this.programConfigurations=A,this.segments=new Ge,this.dynamicLayoutVertexArray=new Vi,this.opacityVertexArray=new Ha,this.placedSymbolArray=new $};Ni.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ni.prototype.upload=function(E,A,D,Z){this.isEmpty()||(D&&(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,mv.members),this.indexBuffer=E.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=E.createVertexBuffer(this.dynamicLayoutVertexArray,$p.members,!0),this.opacityVertexBuffer=E.createVertexBuffer(this.opacityVertexArray,ai,!0),this.opacityVertexBuffer.itemSize=1),(D||Z)&&this.programConfigurations.upload(E))},Ni.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Kt("SymbolBuffers",Ni);var Ta=function(A,D,Z){this.layoutVertexArray=new A,this.layoutAttributes=D,this.indexArray=new Z,this.segments=new Ge,this.collisionVertexArray=new eo};Ta.prototype.upload=function(E){this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=E.createVertexBuffer(this.collisionVertexArray,yv.members,!0)},Ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Kt("CollisionBuffers",Ta);var _a=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Te){return Te.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fl([]),this.placementViewportMatrix=fl([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dl(this.zoom,D["text-size"]),this.iconSizeData=Dl(this.zoom,D["icon-size"]);var Z=this.layers[0].layout,se=Z.get("symbol-sort-key"),ge=Z.get("symbol-z-order");this.canOverlap=Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement"),this.sortFeaturesByKey=ge!=="viewport-y"&&se.constantOr(1)!==void 0,this.sortFeaturesByY=(ge==="viewport-y"||ge==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(Te){return Ua[Te]})),this.stateDependentLayerIds=this.layers.filter(function(Te){return Te.isStateDependent()}).map(function(Te){return Te.id}),this.sourceID=A.sourceID};_a.prototype.createArrays=function(){this.text=new Ni(new ro(this.layers,this.zoom,function(E){return/^text/.test(E)})),this.icon=new Ni(new ro(this.layers,this.zoom,function(E){return/^icon/.test(E)})),this.glyphOffsetArray=new ce,this.lineVertexArray=new fe,this.symbolInstances=new ee},_a.prototype.calculateGlyphDependencies=function(E,A,D,Z,se){for(var ge=0;ge<E.length;ge++)if(A[E.charCodeAt(ge)]=!0,(D||Z)&&se){var Te=Xr[E.charAt(ge)];Te&&(A[Te.charCodeAt(0)]=!0)}},_a.prototype.populate=function(E,A,D){var Z=this.layers[0],se=Z.layout,ge=se.get("text-font"),Te=se.get("text-field"),je=se.get("icon-image"),Ze=(Te.value.kind!=="constant"||Te.value.value instanceof so&&!Te.value.value.isEmpty()||Te.value.value.toString().length>0)&&(ge.value.kind!=="constant"||ge.value.value.length>0),pt=je.value.kind!=="constant"||!!je.value.value||Object.keys(je.parameters).length>0,wt=se.get("symbol-sort-key");if(this.features=[],Ze||pt){for(var Wt=A.iconDependencies,Xt=A.glyphDependencies,dr=A.availableImages,jr=new bn(this.zoom),Lr=0,qr=E;Lr<qr.length;Lr+=1){var Jr=qr[Lr],Cn=Jr.feature,Un=Jr.id,Jn=Jr.index,yi=Jr.sourceLayerIndex,hi=Z._featureFilter.needGeometry,Xi=qs(Cn,hi);if(Z._featureFilter.filter(jr,Xi,D)){hi||(Xi.geometry=Ds(Cn));var Zi=void 0;if(Ze){var ba=Z.getValueAndResolveTokens("text-field",Xi,D,dr),Ma=so.factory(ba);Oi(Ma)&&(this.hasRTLText=!0),(!this.hasRTLText||ui()==="unavailable"||this.hasRTLText&&oi.isParsed())&&(Zi=nr(Ma,Z,Xi))}var Aa=void 0;if(pt){var da=Z.getValueAndResolveTokens("icon-image",Xi,D,dr);Aa=da instanceof Po?da:Po.fromString(da)}if(Zi||Aa){var yo=this.sortFeaturesByKey?wt.evaluate(Xi,{},D):void 0;if(this.features.push({id:Un,text:Zi,icon:Aa,index:Jn,sourceLayerIndex:yi,geometry:Xi.geometry,properties:Cn.properties,type:pn[Cn.type],sortKey:yo}),Aa&&(Wt[Aa.name]=!0),Zi){var ka=ge.evaluate(Xi,{},D).join(","),Ca=se.get("text-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ua.vertical)>=0;for(var cs=0,jo=Zi.sections;cs<jo.length;cs+=1){var eu=jo[cs];if(eu.image)Wt[eu.image.name]=!0;else{var io=ga(Zi.toString()),ds=eu.fontStack||ka,mu=Xt[ds]=Xt[ds]||{};this.calculateGlyphDependencies(eu.text,mu,Ca,this.allowVerticalPlacement,io)}}}}}}se.get("symbol-placement")==="line"&&(this.features=function(Cu){var $u={},tl={},pl=[],Fl=0;function Rl(ku){pl.push(Cu[ku]),Fl++}function cc(ku,rl,vc){var Ts=tl[ku];return delete tl[ku],tl[rl]=Ts,pl[Ts].geometry[0].pop(),pl[Ts].geometry[0]=pl[Ts].geometry[0].concat(vc[0]),Ts}function nc(ku,rl,vc){var Ts=$u[rl];return delete $u[rl],$u[ku]=Ts,pl[Ts].geometry[0].shift(),pl[Ts].geometry[0]=vc[0].concat(pl[Ts].geometry[0]),Ts}function bc(ku,rl,vc){var Ts=vc?rl[0][rl[0].length-1]:rl[0][0];return ku+":"+Ts.x+":"+Ts.y}for(var Zl=0;Zl<Cu.length;Zl++){var Nl=Cu[Zl],Kl=Nl.geometry,Bs=Nl.text?Nl.text.toString():null;if(Bs){var ms=bc(Bs,Kl),Au=bc(Bs,Kl,!0);if(ms in tl&&Au in $u&&tl[ms]!==$u[Au]){var Du=nc(ms,Au,Kl),xc=cc(ms,Au,pl[Du].geometry);delete $u[ms],delete tl[Au],tl[bc(Bs,pl[xc].geometry,!0)]=xc,pl[Du].geometry=null}else ms in tl?cc(ms,Au,Kl):Au in $u?nc(ms,Au,Kl):(Rl(Zl),$u[ms]=Fl-1,tl[Au]=Fl-1)}else Rl(Zl)}return pl.filter(function(ku){return ku.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Cu,$u){return Cu.sortKey-$u.sortKey})}},_a.prototype.update=function(E,A,D){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(E,A,this.layers,D),this.icon.programConfigurations.updatePaintArrays(E,A,this.layers,D))},_a.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},_a.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},_a.prototype.upload=function(E){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(E),this.iconCollisionBox.upload(E)),this.text.upload(E,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(E,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},_a.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},_a.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},_a.prototype.addToLineVertexArray=function(E,A){var D=this.lineVertexArray.length;if(E.segment!==void 0){for(var Z=E.dist(A[E.segment+1]),se=E.dist(A[E.segment]),ge={},Te=E.segment+1;Te<A.length;Te++)ge[Te]={x:A[Te].x,y:A[Te].y,tileUnitDistanceFromAnchor:Z},Te<A.length-1&&(Z+=A[Te+1].dist(A[Te]));for(var je=E.segment||0;je>=0;je--)ge[je]={x:A[je].x,y:A[je].y,tileUnitDistanceFromAnchor:se},je>0&&(se+=A[je-1].dist(A[je]));for(var Ze=0;Ze<A.length;Ze++){var pt=ge[Ze];this.lineVertexArray.emplaceBack(pt.x,pt.y,pt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:D,lineLength:this.lineVertexArray.length-D}},_a.prototype.addSymbols=function(E,A,D,Z,se,ge,Te,je,Ze,pt,wt,Wt){for(var Xt=E.indexArray,dr=E.layoutVertexArray,jr=E.segments.prepareSegment(4*A.length,dr,Xt,this.canOverlap?ge.sortKey:void 0),Lr=this.glyphOffsetArray.length,qr=jr.vertexLength,Jr=this.allowVerticalPlacement&&Te===Ua.vertical?Math.PI/2:0,Cn=ge.text&&ge.text.sections,Un=0;Un<A.length;Un++){var Jn=A[Un],yi=Jn.tl,hi=Jn.tr,Xi=Jn.bl,Zi=Jn.br,ba=Jn.tex,Ma=Jn.pixelOffsetTL,Aa=Jn.pixelOffsetBR,da=Jn.minFontScaleX,yo=Jn.minFontScaleY,ka=Jn.glyphOffset,Ca=Jn.isSDF,cs=Jn.sectionIndex,jo=jr.vertexLength,eu=ka[1];ci(dr,je.x,je.y,yi.x,eu+yi.y,ba.x,ba.y,D,Ca,Ma.x,Ma.y,da,yo),ci(dr,je.x,je.y,hi.x,eu+hi.y,ba.x+ba.w,ba.y,D,Ca,Aa.x,Ma.y,da,yo),ci(dr,je.x,je.y,Xi.x,eu+Xi.y,ba.x,ba.y+ba.h,D,Ca,Ma.x,Aa.y,da,yo),ci(dr,je.x,je.y,Zi.x,eu+Zi.y,ba.x+ba.w,ba.y+ba.h,D,Ca,Aa.x,Aa.y,da,yo),Ri(E.dynamicLayoutVertexArray,je,Jr),Xt.emplaceBack(jo,jo+1,jo+2),Xt.emplaceBack(jo+1,jo+2,jo+3),jr.vertexLength+=4,jr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ka[0]),Un!==A.length-1&&cs===A[Un+1].sectionIndex||E.programConfigurations.populatePaintArrays(dr.length,ge,ge.index,{},Wt,Cn&&Cn[cs])}E.placedSymbolArray.emplaceBack(je.x,je.y,Lr,this.glyphOffsetArray.length-Lr,qr,Ze,pt,je.segment,D?D[0]:0,D?D[1]:0,Z[0],Z[1],Te,0,!1,0,wt)},_a.prototype._addCollisionDebugVertex=function(E,A,D,Z,se,ge){return A.emplaceBack(0,0),E.emplaceBack(D.x,D.y,Z,se,Math.round(ge.x),Math.round(ge.y))},_a.prototype.addCollisionDebugVertices=function(E,A,D,Z,se,ge,Te){var je=se.segments.prepareSegment(4,se.layoutVertexArray,se.indexArray),Ze=je.vertexLength,pt=se.layoutVertexArray,wt=se.collisionVertexArray,Wt=Te.anchorX,Xt=Te.anchorY;this._addCollisionDebugVertex(pt,wt,ge,Wt,Xt,new c(E,A)),this._addCollisionDebugVertex(pt,wt,ge,Wt,Xt,new c(D,A)),this._addCollisionDebugVertex(pt,wt,ge,Wt,Xt,new c(D,Z)),this._addCollisionDebugVertex(pt,wt,ge,Wt,Xt,new c(E,Z)),je.vertexLength+=4;var dr=se.indexArray;dr.emplaceBack(Ze,Ze+1),dr.emplaceBack(Ze+1,Ze+2),dr.emplaceBack(Ze+2,Ze+3),dr.emplaceBack(Ze+3,Ze),je.primitiveLength+=4},_a.prototype.addDebugCollisionBoxes=function(E,A,D,Z){for(var se=E;se<A;se++){var ge=this.collisionBoxArray.get(se);this.addCollisionDebugVertices(ge.x1,ge.y1,ge.x2,ge.y2,Z?this.textCollisionBox:this.iconCollisionBox,ge.anchorPoint,D)}},_a.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ta(Wa,Bc.members,gu),this.iconCollisionBox=new Ta(Wa,Bc.members,gu);for(var E=0;E<this.symbolInstances.length;E++){var A=this.symbolInstances.get(E);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}},_a.prototype._deserializeCollisionBoxesForSymbol=function(E,A,D,Z,se,ge,Te,je,Ze){for(var pt={},wt=A;wt<D;wt++){var Wt=E.get(wt);pt.textBox={x1:Wt.x1,y1:Wt.y1,x2:Wt.x2,y2:Wt.y2,anchorPointX:Wt.anchorPointX,anchorPointY:Wt.anchorPointY},pt.textFeatureIndex=Wt.featureIndex;break}for(var Xt=Z;Xt<se;Xt++){var dr=E.get(Xt);pt.verticalTextBox={x1:dr.x1,y1:dr.y1,x2:dr.x2,y2:dr.y2,anchorPointX:dr.anchorPointX,anchorPointY:dr.anchorPointY},pt.verticalTextFeatureIndex=dr.featureIndex;break}for(var jr=ge;jr<Te;jr++){var Lr=E.get(jr);pt.iconBox={x1:Lr.x1,y1:Lr.y1,x2:Lr.x2,y2:Lr.y2,anchorPointX:Lr.anchorPointX,anchorPointY:Lr.anchorPointY},pt.iconFeatureIndex=Lr.featureIndex;break}for(var qr=je;qr<Ze;qr++){var Jr=E.get(qr);pt.verticalIconBox={x1:Jr.x1,y1:Jr.y1,x2:Jr.x2,y2:Jr.y2,anchorPointX:Jr.anchorPointX,anchorPointY:Jr.anchorPointY},pt.verticalIconFeatureIndex=Jr.featureIndex;break}return pt},_a.prototype.deserializeCollisionBoxes=function(E){this.collisionArrays=[];for(var A=0;A<this.symbolInstances.length;A++){var D=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(E,D.textBoxStartIndex,D.textBoxEndIndex,D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D.iconBoxStartIndex,D.iconBoxEndIndex,D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex))}},_a.prototype.hasTextData=function(){return this.text.segments.get().length>0},_a.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_a.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},_a.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},_a.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},_a.prototype.addIndicesForPlacedSymbol=function(E,A){for(var D=E.placedSymbolArray.get(A),Z=D.vertexStartIndex+4*D.numGlyphs,se=D.vertexStartIndex;se<Z;se+=4)E.indexArray.emplaceBack(se,se+1,se+2),E.indexArray.emplaceBack(se+1,se+2,se+3)},_a.prototype.getSortedSymbolIndexes=function(E){if(this.sortedAngle===E&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var A=Math.sin(E),D=Math.cos(E),Z=[],se=[],ge=[],Te=0;Te<this.symbolInstances.length;++Te){ge.push(Te);var je=this.symbolInstances.get(Te);Z.push(0|Math.round(A*je.anchorX+D*je.anchorY)),se.push(je.featureIndex)}return ge.sort(function(Ze,pt){return Z[Ze]-Z[pt]||se[pt]-se[Ze]}),ge},_a.prototype.addToSortKeyRanges=function(E,A){var D=this.sortKeyRanges[this.sortKeyRanges.length-1];D&&D.sortKey===A?D.symbolInstanceEnd=E+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:E,symbolInstanceEnd:E+1})},_a.prototype.sortFeatures=function(E){var A=this;if(this.sortFeaturesByY&&this.sortedAngle!==E&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(E),this.sortedAngle=E,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var D=0,Z=this.symbolInstanceIndexes;D<Z.length;D+=1){var se=this.symbolInstances.get(Z[D]);this.featureSortOrder.push(se.featureIndex),[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(function(ge,Te,je){ge>=0&&je.indexOf(ge)===Te&&A.addIndicesForPlacedSymbol(A.text,ge)}),se.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,se.verticalPlacedTextSymbolIndex),se.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,se.placedIconSymbolIndex),se.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,se.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Kt("SymbolBucket",_a,{omit:["layers","collisionBoxArray","features","compareText"]}),_a.MAX_GLYPHS=65535,_a.addDynamicAttributes=Ri;var Sa=new xr({"symbol-placement":new dt(qe.layout_symbol["symbol-placement"]),"symbol-spacing":new dt(qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dt(qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dt(qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dt(qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dt(qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new dt(qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new dt(qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dt(qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dt(qe.layout_symbol["icon-size"]),"icon-text-fit":new dt(qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dt(qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dt(qe.layout_symbol["icon-image"]),"icon-rotate":new Dt(qe.layout_symbol["icon-rotate"]),"icon-padding":new dt(qe.layout_symbol["icon-padding"]),"icon-keep-upright":new dt(qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Dt(qe.layout_symbol["icon-offset"]),"icon-anchor":new Dt(qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dt(qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dt(qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dt(qe.layout_symbol["text-rotation-alignment"]),"text-field":new Dt(qe.layout_symbol["text-field"]),"text-font":new Dt(qe.layout_symbol["text-font"]),"text-size":new Dt(qe.layout_symbol["text-size"]),"text-max-width":new Dt(qe.layout_symbol["text-max-width"]),"text-line-height":new dt(qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Dt(qe.layout_symbol["text-letter-spacing"]),"text-justify":new Dt(qe.layout_symbol["text-justify"]),"text-radial-offset":new Dt(qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dt(qe.layout_symbol["text-variable-anchor"]),"text-anchor":new Dt(qe.layout_symbol["text-anchor"]),"text-max-angle":new dt(qe.layout_symbol["text-max-angle"]),"text-writing-mode":new dt(qe.layout_symbol["text-writing-mode"]),"text-rotate":new Dt(qe.layout_symbol["text-rotate"]),"text-padding":new dt(qe.layout_symbol["text-padding"]),"text-keep-upright":new dt(qe.layout_symbol["text-keep-upright"]),"text-transform":new Dt(qe.layout_symbol["text-transform"]),"text-offset":new Dt(qe.layout_symbol["text-offset"]),"text-allow-overlap":new dt(qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new dt(qe.layout_symbol["text-ignore-placement"]),"text-optional":new dt(qe.layout_symbol["text-optional"])}),Ya={paint:new xr({"icon-opacity":new Dt(qe.paint_symbol["icon-opacity"]),"icon-color":new Dt(qe.paint_symbol["icon-color"]),"icon-halo-color":new Dt(qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dt(qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dt(qe.paint_symbol["icon-halo-blur"]),"icon-translate":new dt(qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new dt(qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dt(qe.paint_symbol["text-opacity"]),"text-color":new Dt(qe.paint_symbol["text-color"],{runtimeType:Mt,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Dt(qe.paint_symbol["text-halo-color"]),"text-halo-width":new Dt(qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Dt(qe.paint_symbol["text-halo-blur"]),"text-translate":new dt(qe.paint_symbol["text-translate"]),"text-translate-anchor":new dt(qe.paint_symbol["text-translate-anchor"])}),layout:Sa},ja=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:xn,this.defaultValue=A};ja.prototype.evaluate=function(E){if(E.formattedSection){var A=this.defaultValue.property.overrides;if(A&&A.hasOverride(E.formattedSection))return A.getOverride(E.formattedSection)}return E.feature&&E.featureState?this.defaultValue.evaluate(E.feature,E.featureState):this.defaultValue.property.specification.default},ja.prototype.eachChild=function(E){this.defaultValue.isConstant()||E(this.defaultValue.value._styleExpression.expression)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){return null},Kt("FormatSectionOverride",ja,{omit:["defaultValue"]});var Xs=function(E){function A(D){E.call(this,D,Ya)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.recalculate=function(D,Z){if(E.prototype.recalculate.call(this,D,Z),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var se=this.layout.get("text-writing-mode");if(se){for(var ge=[],Te=0,je=se;Te<je.length;Te+=1){var Ze=je[Te];ge.indexOf(Ze)<0&&ge.push(Ze)}this.layout._values["text-writing-mode"]=ge}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},A.prototype.getValueAndResolveTokens=function(D,Z,se,ge){var Te=this.layout.get(D).evaluate(Z,{},se,ge),je=this._unevaluatedLayout._values[D];return je.isDataDriven()||di(je.value)||!Te?Te:function(Ze,pt){return pt.replace(/{([^{}]+)}/g,function(wt,Wt){return Wt in Ze?String(Ze[Wt]):""})}(Z.properties,Te)},A.prototype.createBucket=function(D){return new _a(D)},A.prototype.queryRadius=function(){return 0},A.prototype.queryIntersectsFeature=function(){return!1},A.prototype._setPaintOverrides=function(){for(var D=0,Z=Ya.paint.overridableProperties;D<Z.length;D+=1){var se=Z[D];if(A.hasPaintOverride(this.layout,se)){var ge,Te=this.paint.get(se),je=new ja(Te),Ze=new Dn(je,Te.property.specification);ge=Te.value.kind==="constant"||Te.value.kind==="source"?new ji("source",Ze):new ia("composite",Ze,Te.value.zoomStops,Te.value._interpolationType),this.paint._values[se]=new nt(Te.property,ge,Te.parameters)}}},A.prototype._handleOverridablePaintPropertyUpdate=function(D,Z,se){return!(!this.layout||Z.isDataDriven()||se.isDataDriven())&&A.hasPaintOverride(this.layout,D)},A.hasPaintOverride=function(D,Z){var se=D.get("text-field"),ge=Ya.paint.properties[Z],Te=!1,je=function(Wt){for(var Xt=0,dr=Wt;Xt<dr.length;Xt+=1)if(ge.overrides&&ge.overrides.hasOverride(dr[Xt]))return void(Te=!0)};if(se.value.kind==="constant"&&se.value.value instanceof so)je(se.value.value.sections);else if(se.value.kind==="source"){var Ze=function wt(Wt){Te||(Wt instanceof ps&&Va(Wt.value)===Mr?je(Wt.value.sections):Wt instanceof fs?je(Wt.sections):Wt.eachChild(wt))},pt=se.value;pt._styleExpression&&Ze(pt._styleExpression.expression)}return Te},A}(yr),wl={paint:new xr({"background-color":new dt(qe.paint_background["background-color"]),"background-pattern":new cr(qe.paint_background["background-pattern"]),"background-opacity":new dt(qe.paint_background["background-opacity"])})},Qc=function(E){function A(D){E.call(this,D,wl)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A}(yr),Bd={paint:new xr({"raster-opacity":new dt(qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new dt(qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dt(qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dt(qe.paint_raster["raster-brightness-max"]),"raster-saturation":new dt(qe.paint_raster["raster-saturation"]),"raster-contrast":new dt(qe.paint_raster["raster-contrast"]),"raster-resampling":new dt(qe.paint_raster["raster-resampling"]),"raster-fade-duration":new dt(qe.paint_raster["raster-fade-duration"])})},Hc=function(E){function A(D){E.call(this,D,Bd)}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A}(yr),_v=function(E){function A(D){E.call(this,D,{}),this.implementation=D}return E&&(A.__proto__=E),(A.prototype=Object.create(E&&E.prototype)).constructor=A,A.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},A.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},A.prototype.recalculate=function(){},A.prototype.updateTransitions=function(){},A.prototype.hasTransition=function(){},A.prototype.serialize=function(){},A.prototype.onAdd=function(D){this.implementation.onAdd&&this.implementation.onAdd(D,D.painter.context.gl)},A.prototype.onRemove=function(D){this.implementation.onRemove&&this.implementation.onRemove(D,D.painter.context.gl)},A}(yr),Of={circle:fh,heatmap:sc,hillshade:rp,fill:uc,"fill-extrusion":Bh,line:gh,symbol:Xs,background:Qc,raster:Hc},id=i.HTMLImageElement,Zp=i.HTMLCanvasElement,Kp=i.HTMLVideoElement,Jp=i.ImageData,Fd=i.ImageBitmap,Uh=function(A,D,Z,se){this.context=A,this.format=Z,this.texture=A.gl.createTexture(),this.update(D,se)};Uh.prototype.update=function(E,A,D){var Z=E.width,se=E.height,ge=!(this.size&&this.size[0]===Z&&this.size[1]===se||D),Te=this.context,je=Te.gl;if(this.useMipmap=Boolean(A&&A.useMipmap),je.bindTexture(je.TEXTURE_2D,this.texture),Te.pixelStoreUnpackFlipY.set(!1),Te.pixelStoreUnpack.set(1),Te.pixelStoreUnpackPremultiplyAlpha.set(this.format===je.RGBA&&(!A||A.premultiply!==!1)),ge)this.size=[Z,se],E instanceof id||E instanceof Zp||E instanceof Kp||E instanceof Jp||Fd&&E instanceof Fd?je.texImage2D(je.TEXTURE_2D,0,this.format,this.format,je.UNSIGNED_BYTE,E):je.texImage2D(je.TEXTURE_2D,0,this.format,Z,se,0,this.format,je.UNSIGNED_BYTE,E.data);else{var Ze=D||{x:0,y:0},pt=Ze.x,wt=Ze.y;E instanceof id||E instanceof Zp||E instanceof Kp||E instanceof Jp||Fd&&E instanceof Fd?je.texSubImage2D(je.TEXTURE_2D,0,pt,wt,je.RGBA,je.UNSIGNED_BYTE,E):je.texSubImage2D(je.TEXTURE_2D,0,pt,wt,Z,se,je.RGBA,je.UNSIGNED_BYTE,E.data)}this.useMipmap&&this.isSizePowerOfTwo()&&je.generateMipmap(je.TEXTURE_2D)},Uh.prototype.bind=function(E,A,D){var Z=this.context.gl;Z.bindTexture(Z.TEXTURE_2D,this.texture),D!==Z.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(D=Z.LINEAR),E!==this.filter&&(Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,E),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,D||E),this.filter=E),A!==this.wrap&&(Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,A),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,A),this.wrap=A)},Uh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Uh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var cp=function(A){var D=this;this._callback=A,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};cp.prototype.trigger=function(){var E=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){E._triggered=!1,E._callback()},0))},cp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ad=function(A,D,Z){this.target=A,this.parent=D,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},P(["receive","process"],this),this.invoker=new cp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?A:i};function Qp(E,A,D){var Z=2*Math.PI*6378137/256/Math.pow(2,D);return[E*Z-2*Math.PI*6378137/2,A*Z-2*Math.PI*6378137/2]}ad.prototype.send=function(E,A,D,Z,se){var ge=this;se===void 0&&(se=!1);var Te=Math.round(1e18*Math.random()).toString(36).substring(0,10);D&&(this.callbacks[Te]=D);var je=ne(this.globalScope)?void 0:[];return this.target.postMessage({id:Te,type:E,hasCallback:!!D,targetMapId:Z,mustQueue:se,sourceMapId:this.mapId,data:Fn(A,je)},je),{cancel:function(){D&&delete ge.callbacks[Te],ge.target.postMessage({id:Te,type:"<cancel>",targetMapId:Z,sourceMapId:ge.mapId})}}},ad.prototype.receive=function(E){var A=E.data,D=A.id;if(D&&(!A.targetMapId||this.mapId===A.targetMapId))if(A.type==="<cancel>"){delete this.tasks[D];var Z=this.cancelCallbacks[D];delete this.cancelCallbacks[D],Z&&Z()}else H()||A.mustQueue?(this.tasks[D]=A,this.taskQueue.push(D),this.invoker.trigger()):this.processTask(D,A)},ad.prototype.process=function(){if(this.taskQueue.length){var E=this.taskQueue.shift(),A=this.tasks[E];delete this.tasks[E],this.taskQueue.length&&this.invoker.trigger(),A&&this.processTask(E,A)}},ad.prototype.processTask=function(E,A){var D=this;if(A.type==="<response>"){var Z=this.callbacks[E];delete this.callbacks[E],Z&&(A.error?Z(li(A.error)):Z(null,li(A.data)))}else{var se=!1,ge=ne(this.globalScope)?void 0:[],Te=A.hasCallback?function(wt,Wt){se=!0,delete D.cancelCallbacks[E],D.target.postMessage({id:E,type:"<response>",sourceMapId:D.mapId,error:wt?Fn(wt):null,data:Fn(Wt,ge)},ge)}:function(wt){se=!0},je=null,Ze=li(A.data);if(this.parent[A.type])je=this.parent[A.type](A.sourceMapId,Ze,Te);else if(this.parent.getWorkerSource){var pt=A.type.split(".");je=this.parent.getWorkerSource(A.sourceMapId,pt[0],Ze.source)[pt[1]](Ze,Te)}else Te(new Error("Could not find function "+A.type));!se&&je&&je.cancel&&(this.cancelCallbacks[E]=je.cancel)}},ad.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var jl=function(A,D){A&&(D?this.setSouthWest(A).setNorthEast(D):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};jl.prototype.setNorthEast=function(E){return this._ne=E instanceof Yu?new Yu(E.lng,E.lat):Yu.convert(E),this},jl.prototype.setSouthWest=function(E){return this._sw=E instanceof Yu?new Yu(E.lng,E.lat):Yu.convert(E),this},jl.prototype.extend=function(E){var A,D,Z=this._sw,se=this._ne;if(E instanceof Yu)A=E,D=E;else{if(!(E instanceof jl))return Array.isArray(E)?E.length===4||E.every(Array.isArray)?this.extend(jl.convert(E)):this.extend(Yu.convert(E)):this;if(D=E._ne,!(A=E._sw)||!D)return this}return Z||se?(Z.lng=Math.min(A.lng,Z.lng),Z.lat=Math.min(A.lat,Z.lat),se.lng=Math.max(D.lng,se.lng),se.lat=Math.max(D.lat,se.lat)):(this._sw=new Yu(A.lng,A.lat),this._ne=new Yu(D.lng,D.lat)),this},jl.prototype.getCenter=function(){return new Yu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},jl.prototype.getSouthWest=function(){return this._sw},jl.prototype.getNorthEast=function(){return this._ne},jl.prototype.getNorthWest=function(){return new Yu(this.getWest(),this.getNorth())},jl.prototype.getSouthEast=function(){return new Yu(this.getEast(),this.getSouth())},jl.prototype.getWest=function(){return this._sw.lng},jl.prototype.getSouth=function(){return this._sw.lat},jl.prototype.getEast=function(){return this._ne.lng},jl.prototype.getNorth=function(){return this._ne.lat},jl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},jl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},jl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},jl.prototype.contains=function(E){var A=Yu.convert(E),D=A.lng,Z=A.lat,se=this._sw.lng<=D&&D<=this._ne.lng;return this._sw.lng>this._ne.lng&&(se=this._sw.lng>=D&&D>=this._ne.lng),this._sw.lat<=Z&&Z<=this._ne.lat&&se},jl.convert=function(E){return!E||E instanceof jl?E:new jl(E)};var Yu=function(A,D){if(isNaN(A)||isNaN(D))throw new Error("Invalid LngLat object: ("+A+", "+D+")");if(this.lng=+A,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Yu.prototype.wrap=function(){return new Yu(u(this.lng,-180,180),this.lat)},Yu.prototype.toArray=function(){return[this.lng,this.lat]},Yu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Yu.prototype.distanceTo=function(E){var A=Math.PI/180,D=this.lat*A,Z=E.lat*A,se=Math.sin(D)*Math.sin(Z)+Math.cos(D)*Math.cos(Z)*Math.cos((E.lng-this.lng)*A);return 63710088e-1*Math.acos(Math.min(se,1))},Yu.prototype.toBounds=function(E){E===void 0&&(E=0);var A=360*E/40075017,D=A/Math.cos(Math.PI/180*this.lat);return new jl(new Yu(this.lng-D,this.lat-A),new Yu(this.lng+D,this.lat+A))},Yu.convert=function(E){if(E instanceof Yu)return E;if(Array.isArray(E)&&(E.length===2||E.length===3))return new Yu(Number(E[0]),Number(E[1]));if(!Array.isArray(E)&&typeof E=="object"&&E!==null)return new Yu(Number("lng"in E?E.lng:E.lon),Number(E.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var qp=2*Math.PI*63710088e-1;function fm(E){return qp*Math.cos(E*Math.PI/180)}function fp(E){return(180+E)/360}function eg(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function bv(E,A){return E/fm(A)}function tg(E){return 360/Math.PI*Math.atan(Math.exp((180-360*E)*Math.PI/180))-90}var kh=function(A,D,Z){Z===void 0&&(Z=0),this.x=+A,this.y=+D,this.z=+Z};kh.fromLngLat=function(E,A){A===void 0&&(A=0);var D=Yu.convert(E);return new kh(fp(D.lng),eg(D.lat),bv(A,D.lat))},kh.prototype.toLngLat=function(){return new Yu(360*this.x-180,tg(this.y))},kh.prototype.toAltitude=function(){return this.z*fm(tg(this.y))},kh.prototype.meterInMercatorCoordinateUnits=function(){return 1/qp*(E=tg(this.y),1/Math.cos(E*Math.PI/180));var E};var zh=function(A,D,Z){this.z=A,this.x=D,this.y=Z,this.key=Nd(0,A,A,D,Z)};zh.prototype.equals=function(E){return this.z===E.z&&this.x===E.x&&this.y===E.y},zh.prototype.url=function(E,A){var D,Z,se,ge,Te,je=(Z=this.y,se=this.z,ge=Qp(256*(D=this.x),256*(Z=Math.pow(2,se)-Z-1),se),Te=Qp(256*(D+1),256*(Z+1),se),ge[0]+","+ge[1]+","+Te[0]+","+Te[1]),Ze=function(pt,wt,Wt){for(var Xt,dr="",jr=pt;jr>0;jr--)dr+=(wt&(Xt=1<<jr-1)?1:0)+(Wt&Xt?2:0);return dr}(this.z,this.x,this.y);return E[(this.x+this.y)%E.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(A==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Ze).replace("{bbox-epsg-3857}",je)},zh.prototype.getTilePoint=function(E){var A=Math.pow(2,this.z);return new c(8192*(E.x*A-this.x),8192*(E.y*A-this.y))},zh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var hp=function(A,D){this.wrap=A,this.canonical=D,this.key=Nd(A,D.z,D.z,D.x,D.y)},Bl=function(A,D,Z,se,ge){this.overscaledZ=A,this.wrap=D,this.canonical=new zh(Z,+se,+ge),this.key=Nd(D,A,Z,se,ge)};function Nd(E,A,D,Z,se){(E*=2)<0&&(E=-1*E-1);var ge=1<<D;return(ge*ge*E+ge*se+Z).toString(36)+D.toString(36)+A.toString(36)}Bl.prototype.equals=function(E){return this.overscaledZ===E.overscaledZ&&this.wrap===E.wrap&&this.canonical.equals(E.canonical)},Bl.prototype.scaledTo=function(E){var A=this.canonical.z-E;return E>this.canonical.z?new Bl(E,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bl(E,this.wrap,E,this.canonical.x>>A,this.canonical.y>>A)},Bl.prototype.calculateScaledKey=function(E,A){var D=this.canonical.z-E;return E>this.canonical.z?Nd(this.wrap*+A,E,this.canonical.z,this.canonical.x,this.canonical.y):Nd(this.wrap*+A,E,E,this.canonical.x>>D,this.canonical.y>>D)},Bl.prototype.isChildOf=function(E){if(E.wrap!==this.wrap)return!1;var A=this.canonical.z-E.canonical.z;return E.overscaledZ===0||E.overscaledZ<this.overscaledZ&&E.canonical.x===this.canonical.x>>A&&E.canonical.y===this.canonical.y>>A},Bl.prototype.children=function(E){if(this.overscaledZ>=E)return[new Bl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var A=this.canonical.z+1,D=2*this.canonical.x,Z=2*this.canonical.y;return[new Bl(A,this.wrap,A,D,Z),new Bl(A,this.wrap,A,D+1,Z),new Bl(A,this.wrap,A,D,Z+1),new Bl(A,this.wrap,A,D+1,Z+1)]},Bl.prototype.isLessThan=function(E){return this.wrap<E.wrap||!(this.wrap>E.wrap)&&(this.overscaledZ<E.overscaledZ||!(this.overscaledZ>E.overscaledZ)&&(this.canonical.x<E.canonical.x||!(this.canonical.x>E.canonical.x)&&this.canonical.y<E.canonical.y))},Bl.prototype.wrapped=function(){return new Bl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Bl.prototype.unwrapTo=function(E){return new Bl(this.overscaledZ,E,this.canonical.z,this.canonical.x,this.canonical.y)},Bl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Bl.prototype.toUnwrapped=function(){return new hp(this.wrap,this.canonical)},Bl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Bl.prototype.getTilePoint=function(E){return this.canonical.getTilePoint(new kh(E.x-this.wrap,E.y))},Kt("CanonicalTileID",zh),Kt("OverscaledTileID",Bl,{omit:["posMatrix"]});var Qf=function(A,D,Z){if(this.uid=A,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return j('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var se=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=Z||"mapbox";for(var ge=0;ge<se;ge++)this.data[this._idx(-1,ge)]=this.data[this._idx(0,ge)],this.data[this._idx(se,ge)]=this.data[this._idx(se-1,ge)],this.data[this._idx(ge,-1)]=this.data[this._idx(ge,0)],this.data[this._idx(ge,se)]=this.data[this._idx(ge,se-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(se,-1)]=this.data[this._idx(se-1,0)],this.data[this._idx(-1,se)]=this.data[this._idx(0,se-1)],this.data[this._idx(se,se)]=this.data[this._idx(se-1,se-1)]};Qf.prototype.get=function(E,A){var D=new Uint8Array(this.data.buffer),Z=4*this._idx(E,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(D[Z],D[Z+1],D[Z+2])},Qf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Qf.prototype._idx=function(E,A){if(E<-1||E>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(E+1)},Qf.prototype._unpackMapbox=function(E,A,D){return(256*E*256+256*A+D)/10-1e4},Qf.prototype._unpackTerrarium=function(E,A,D){return 256*E+A+D/256-32768},Qf.prototype.getPixels=function(){return new oc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Qf.prototype.backfillBorder=function(E,A,D){if(this.dim!==E.dim)throw new Error("dem dimension mismatch");var Z=A*this.dim,se=A*this.dim+this.dim,ge=D*this.dim,Te=D*this.dim+this.dim;switch(A){case-1:Z=se-1;break;case 1:se=Z+1}switch(D){case-1:ge=Te-1;break;case 1:Te=ge+1}for(var je=-A*this.dim,Ze=-D*this.dim,pt=ge;pt<Te;pt++)for(var wt=Z;wt<se;wt++)this.data[this._idx(wt,pt)]=E.data[this._idx(wt+je,pt+Ze)]},Kt("DEMData",Qf);var xv=function(A){this._stringToNumber={},this._numberToString=[];for(var D=0;D<A.length;D++){var Z=A[D];this._stringToNumber[Z]=D,this._numberToString[D]=Z}};xv.prototype.encode=function(E){return this._stringToNumber[E]},xv.prototype.decode=function(E){return this._numberToString[E]};var Ev=function(A,D,Z,se,ge){this.type="Feature",this._vectorTileFeature=A,A._z=D,A._x=Z,A._y=se,this.properties=A.properties,this.id=ge},dp={geometry:{configurable:!0}};dp.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},dp.geometry.set=function(E){this._geometry=E},Ev.prototype.toJSON=function(){var E={geometry:this.geometry};for(var A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(E[A]=this[A]);return E},Object.defineProperties(Ev.prototype,dp);var od=function(){this.state={},this.stateChanges={},this.deletedStates={}};od.prototype.updateState=function(E,A,D){var Z=String(A);if(this.stateChanges[E]=this.stateChanges[E]||{},this.stateChanges[E][Z]=this.stateChanges[E][Z]||{},d(this.stateChanges[E][Z],D),this.deletedStates[E]===null)for(var se in this.deletedStates[E]={},this.state[E])se!==Z&&(this.deletedStates[E][se]=null);else if(this.deletedStates[E]&&this.deletedStates[E][Z]===null)for(var ge in this.deletedStates[E][Z]={},this.state[E][Z])D[ge]||(this.deletedStates[E][Z][ge]=null);else for(var Te in D)this.deletedStates[E]&&this.deletedStates[E][Z]&&this.deletedStates[E][Z][Te]===null&&delete this.deletedStates[E][Z][Te]},od.prototype.removeFeatureState=function(E,A,D){if(this.deletedStates[E]!==null){var Z=String(A);if(this.deletedStates[E]=this.deletedStates[E]||{},D&&A!==void 0)this.deletedStates[E][Z]!==null&&(this.deletedStates[E][Z]=this.deletedStates[E][Z]||{},this.deletedStates[E][Z][D]=null);else if(A!==void 0)if(this.stateChanges[E]&&this.stateChanges[E][Z])for(D in this.deletedStates[E][Z]={},this.stateChanges[E][Z])this.deletedStates[E][Z][D]=null;else this.deletedStates[E][Z]=null;else this.deletedStates[E]=null}},od.prototype.getState=function(E,A){var D=String(A),Z=d({},(this.state[E]||{})[D],(this.stateChanges[E]||{})[D]);if(this.deletedStates[E]===null)return{};if(this.deletedStates[E]){var se=this.deletedStates[E][A];if(se===null)return{};for(var ge in se)delete Z[ge]}return Z},od.prototype.initializeTileState=function(E,A){E.setFeatureState(this.state,A)},od.prototype.coalesceChanges=function(E,A){var D={};for(var Z in this.stateChanges){this.state[Z]=this.state[Z]||{};var se={};for(var ge in this.stateChanges[Z])this.state[Z][ge]||(this.state[Z][ge]={}),d(this.state[Z][ge],this.stateChanges[Z][ge]),se[ge]=this.state[Z][ge];D[Z]=se}for(var Te in this.deletedStates){this.state[Te]=this.state[Te]||{};var je={};if(this.deletedStates[Te]===null)for(var Ze in this.state[Te])je[Ze]={},this.state[Te][Ze]={};else for(var pt in this.deletedStates[Te]){if(this.deletedStates[Te][pt]===null)this.state[Te][pt]={};else for(var wt=0,Wt=Object.keys(this.deletedStates[Te][pt]);wt<Wt.length;wt+=1)delete this.state[Te][pt][Wt[wt]];je[pt]=this.state[Te][pt]}D[Te]=D[Te]||{},d(D[Te],je)}if(this.stateChanges={},this.deletedStates={},Object.keys(D).length!==0)for(var Xt in E)E[Xt].setFeatureState(D,A)};var qf=function(A,D){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new ls(8192,16,0),this.grid3D=new ls(8192,16,0),this.featureIndexArray=new Ie,this.promoteId=D};function Sv(E,A,D,Z,se){return O(E,function(ge,Te){var je=A instanceof tt?A.get(Te):null;return je&&je.evaluate?je.evaluate(D,Z,se):je})}function rg(E){for(var A=1/0,D=1/0,Z=-1/0,se=-1/0,ge=0,Te=E;ge<Te.length;ge+=1){var je=Te[ge];A=Math.min(A,je.x),D=Math.min(D,je.y),Z=Math.max(Z,je.x),se=Math.max(se,je.y)}return{minX:A,minY:D,maxX:Z,maxY:se}}function hm(E,A){return A-E}qf.prototype.insert=function(E,A,D,Z,se,ge){var Te=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(D,Z,se);for(var je=ge?this.grid3D:this.grid,Ze=0;Ze<A.length;Ze++){for(var pt=A[Ze],wt=[1/0,1/0,-1/0,-1/0],Wt=0;Wt<pt.length;Wt++){var Xt=pt[Wt];wt[0]=Math.min(wt[0],Xt.x),wt[1]=Math.min(wt[1],Xt.y),wt[2]=Math.max(wt[2],Xt.x),wt[3]=Math.max(wt[3],Xt.y)}wt[0]<8192&&wt[1]<8192&&wt[2]>=0&&wt[3]>=0&&je.insert(Te,wt[0],wt[1],wt[2],wt[3])}},qf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new yc.VectorTile(new fi(this.rawTileData)).layers,this.sourceLayerCoder=new xv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},qf.prototype.query=function(E,A,D,Z){var se=this;this.loadVTLayers();for(var ge=E.params||{},Te=8192/E.tileSize/E.scale,je=Da(ge.filter),Ze=E.queryGeometry,pt=E.queryPadding*Te,wt=rg(Ze),Wt=this.grid.query(wt.minX-pt,wt.minY-pt,wt.maxX+pt,wt.maxY+pt),Xt=rg(E.cameraQueryGeometry),dr=this.grid3D.query(Xt.minX-pt,Xt.minY-pt,Xt.maxX+pt,Xt.maxY+pt,function(Jn,yi,hi,Xi){return function(Zi,ba,Ma,Aa,da){for(var yo=0,ka=Zi;yo<ka.length;yo+=1){var Ca=ka[yo];if(ba<=Ca.x&&Ma<=Ca.y&&Aa>=Ca.x&&da>=Ca.y)return!0}var cs=[new c(ba,Ma),new c(ba,da),new c(Aa,da),new c(Aa,Ma)];if(Zi.length>2){for(var jo=0,eu=cs;jo<eu.length;jo+=1)if(zc(Zi,eu[jo]))return!0}for(var io=0;io<Zi.length-1;io++)if(af(Zi[io],Zi[io+1],cs))return!0;return!1}(E.cameraQueryGeometry,Jn-pt,yi-pt,hi+pt,Xi+pt)}),jr=0,Lr=dr;jr<Lr.length;jr+=1)Wt.push(Lr[jr]);Wt.sort(hm);for(var qr,Jr={},Cn=function(yi){var hi=Wt[yi];if(hi!==qr){qr=hi;var Xi=se.featureIndexArray.get(hi),Zi=null;se.loadMatchingFeature(Jr,Xi.bucketIndex,Xi.sourceLayerIndex,Xi.featureIndex,je,ge.layers,ge.availableImages,A,D,Z,function(ba,Ma,Aa){return Zi||(Zi=Ds(ba)),Ma.queryIntersectsFeature(Ze,ba,Aa,Zi,se.z,E.transform,Te,E.pixelPosMatrix)})}},Un=0;Un<Wt.length;Un++)Cn(Un);return Jr},qf.prototype.loadMatchingFeature=function(E,A,D,Z,se,ge,Te,je,Ze,pt,wt){var Wt=this.bucketLayerIDs[A];if(!ge||function(Zi,ba){for(var Ma=0;Ma<Zi.length;Ma++)if(ba.indexOf(Zi[Ma])>=0)return!0;return!1}(ge,Wt)){var Xt=this.sourceLayerCoder.decode(D),dr=this.vtLayers[Xt].feature(Z);if(se.needGeometry){var jr=qs(dr,!0);if(!se.filter(new bn(this.tileID.overscaledZ),jr,this.tileID.canonical))return}else if(!se.filter(new bn(this.tileID.overscaledZ),dr))return;for(var Lr=this.getId(dr,Xt),qr=0;qr<Wt.length;qr++){var Jr=Wt[qr];if(!(ge&&ge.indexOf(Jr)<0)){var Cn=je[Jr];if(Cn){var Un={};Lr!==void 0&&pt&&(Un=pt.getState(Cn.sourceLayer||"_geojsonTileLayer",Lr));var Jn=d({},Ze[Jr]);Jn.paint=Sv(Jn.paint,Cn.paint,dr,Un,Te),Jn.layout=Sv(Jn.layout,Cn.layout,dr,Un,Te);var yi=!wt||wt(dr,Cn,Un);if(yi){var hi=new Ev(dr,this.z,this.x,this.y,Lr);hi.layer=Jn;var Xi=E[Jr];Xi===void 0&&(Xi=E[Jr]=[]),Xi.push({featureIndex:Z,feature:hi,intersectionZ:yi})}}}}}},qf.prototype.lookupSymbolFeatures=function(E,A,D,Z,se,ge,Te,je){var Ze={};this.loadVTLayers();for(var pt=Da(se),wt=0,Wt=E;wt<Wt.length;wt+=1)this.loadMatchingFeature(Ze,D,Z,Wt[wt],pt,ge,Te,je,A);return Ze},qf.prototype.hasLayer=function(E){for(var A=0,D=this.bucketLayerIDs;A<D.length;A+=1)for(var Z=0,se=D[A];Z<se.length;Z+=1)if(E===se[Z])return!0;return!1},qf.prototype.getId=function(E,A){var D=E.id;return this.promoteId&&typeof(D=E.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]])=="boolean"&&(D=Number(D)),D},Kt("FeatureIndex",qf,{omit:["rawTileData","sourceLayerCoder"]});var $l=function(A,D){this.tileID=A,this.uid=_(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};$l.prototype.registerFadeDuration=function(E){var A=E+this.timeAdded;A<Fe.now()||this.fadeEndTime&&A<this.fadeEndTime||(this.fadeEndTime=A)},$l.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},$l.prototype.loadVectorData=function(E,A,D){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",E){for(var Z in E.featureIndex&&(this.latestFeatureIndex=E.featureIndex,E.rawTileData?(this.latestRawTileData=E.rawTileData,this.latestFeatureIndex.rawTileData=E.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=E.collisionBoxArray,this.buckets=function(pt,wt){var Wt={};if(!wt)return Wt;for(var Xt=function(){var qr=jr[dr],Jr=qr.layerIds.map(function(Jn){return wt.getLayer(Jn)}).filter(Boolean);if(Jr.length!==0){qr.layers=Jr,qr.stateDependentLayerIds&&(qr.stateDependentLayers=qr.stateDependentLayerIds.map(function(Jn){return Jr.filter(function(yi){return yi.id===Jn})[0]}));for(var Cn=0,Un=Jr;Cn<Un.length;Cn+=1)Wt[Un[Cn].id]=qr}},dr=0,jr=pt;dr<jr.length;dr+=1)Xt();return Wt}(E.buckets,A.style),this.hasSymbolBuckets=!1,this.buckets){var se=this.buckets[Z];if(se instanceof _a){if(this.hasSymbolBuckets=!0,!D)break;se.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ge in this.buckets){var Te=this.buckets[ge];if(Te instanceof _a&&Te.hasRTLText){this.hasRTLText=!0,oi.isLoading()||oi.isLoaded()||ui()!=="deferred"||kn();break}}for(var je in this.queryPadding=0,this.buckets){var Ze=this.buckets[je];this.queryPadding=Math.max(this.queryPadding,A.style.getLayer(je).queryRadius(Ze))}E.imageAtlas&&(this.imageAtlas=E.imageAtlas),E.glyphAtlasImage&&(this.glyphAtlasImage=E.glyphAtlasImage)}else this.collisionBoxArray=new k},$l.prototype.unloadVectorData=function(){for(var E in this.buckets)this.buckets[E].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},$l.prototype.getBucket=function(E){return this.buckets[E.id]},$l.prototype.upload=function(E){for(var A in this.buckets){var D=this.buckets[A];D.uploadPending()&&D.upload(E)}var Z=E.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Uh(E,this.imageAtlas.image,Z.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Uh(E,this.glyphAtlasImage,Z.ALPHA),this.glyphAtlasImage=null)},$l.prototype.prepare=function(E){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(E,this.imageAtlasTexture)},$l.prototype.queryRenderedFeatures=function(E,A,D,Z,se,ge,Te,je,Ze,pt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:Z,cameraQueryGeometry:se,scale:ge,tileSize:this.tileSize,pixelPosMatrix:pt,transform:je,params:Te,queryPadding:this.queryPadding*Ze},E,A,D):{}},$l.prototype.querySourceFeatures=function(E,A){var D=this.latestFeatureIndex;if(D&&D.rawTileData){var Z=D.loadVTLayers(),se=A?A.sourceLayer:"",ge=Z._geojsonTileLayer||Z[se];if(ge)for(var Te=Da(A&&A.filter),je=this.tileID.canonical,Ze=je.z,pt=je.x,wt=je.y,Wt={z:Ze,x:pt,y:wt},Xt=0;Xt<ge.length;Xt++){var dr=ge.feature(Xt);if(Te.needGeometry){var jr=qs(dr,!0);if(!Te.filter(new bn(this.tileID.overscaledZ),jr,this.tileID.canonical))continue}else if(!Te.filter(new bn(this.tileID.overscaledZ),dr))continue;var Lr=D.getId(dr,se),qr=new Ev(dr,Ze,pt,wt,Lr);qr.tile=Wt,E.push(qr)}}},$l.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},$l.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},$l.prototype.setExpiryData=function(E){var A=this.expirationTime;if(E.cacheControl){var D=J(E.cacheControl);D["max-age"]&&(this.expirationTime=Date.now()+1e3*D["max-age"])}else E.expires&&(this.expirationTime=new Date(E.expires).getTime());if(this.expirationTime){var Z=Date.now(),se=!1;if(this.expirationTime>Z)se=!1;else if(A)if(this.expirationTime<A)se=!0;else{var ge=this.expirationTime-A;ge?this.expirationTime=Z+Math.max(ge,3e4):se=!0}else se=!0;se?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},$l.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},$l.prototype.setFeatureState=function(E,A){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(E).length!==0){var D=this.latestFeatureIndex.loadVTLayers();for(var Z in this.buckets)if(A.style.hasLayer(Z)){var se=this.buckets[Z],ge=se.layers[0].sourceLayer||"_geojsonTileLayer",Te=D[ge],je=E[ge];if(Te&&je&&Object.keys(je).length!==0){se.update(je,Te,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Ze=A&&A.style&&A.style.getLayer(Z);Ze&&(this.queryPadding=Math.max(this.queryPadding,Ze.queryRadius(se)))}}}},$l.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},$l.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Fe.now()},$l.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},$l.prototype.setHoldDuration=function(E){this.symbolFadeHoldUntil=Fe.now()+E},$l.prototype.setDependencies=function(E,A){for(var D={},Z=0,se=A;Z<se.length;Z+=1)D[se[Z]]=!0;this.dependencies[E]=D},$l.prototype.hasDependency=function(E,A){for(var D=0,Z=E;D<Z.length;D+=1){var se=this.dependencies[Z[D]];if(se){for(var ge=0,Te=A;ge<Te.length;ge+=1)if(se[Te[ge]])return!0}}return!1};var yh=i.performance,ng=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},yh.mark(this._marks.start)};ng.prototype.finish=function(){yh.mark(this._marks.end);var E=yh.getEntriesByName(this._marks.measure);return E.length===0&&(yh.measure(this._marks.measure,this._marks.start,this._marks.end),E=yh.getEntriesByName(this._marks.measure),yh.clearMarks(this._marks.start),yh.clearMarks(this._marks.end),yh.clearMeasures(this._marks.measure)),E},e.Actor=ad,e.AlphaImage=Vc,e.CanonicalTileID=zh,e.CollisionBoxArray=k,e.Color=Yn,e.DEMData=Qf,e.DataConstantProperty=dt,e.DictionaryCoder=xv,e.EXTENT=8192,e.ErrorEvent=lt,e.EvaluationParameters=bn,e.Event=Ke,e.Evented=mt,e.FeatureIndex=qf,e.FillBucket=jc,e.FillExtrusionBucket=Xo,e.ImageAtlas=_i,e.ImagePosition=ra,e.LineBucket=Uu,e.LngLat=Yu,e.LngLatBounds=jl,e.MercatorCoordinate=kh,e.ONE_EM=24,e.OverscaledTileID=Bl,e.Point=c,e.Point$1=c,e.Properties=xr,e.Protobuf=fi,e.RGBAImage=oc,e.RequestManager=pe,e.RequestPerformance=ng,e.ResourceType=st,e.SegmentVector=Ge,e.SourceFeatureState=od,e.StructArrayLayout1ui2=Sl,e.StructArrayLayout2f1f2i16=mi,e.StructArrayLayout2i4=Pn,e.StructArrayLayout3ui6=Lo,e.StructArrayLayout4i8=ri,e.SymbolBucket=_a,e.Texture=Uh,e.Tile=$l,e.Transitionable=Ct,e.Uniform1f=si,e.Uniform1i=In,e.Uniform2f=ni,e.Uniform3f=Ci,e.Uniform4f=Ji,e.UniformColor=ha,e.UniformMatrix4f=to,e.UnwrappedTileID=hp,e.ValidationError=yt,e.WritingMode=Ua,e.ZoomHistory=qi,e.add=function(E,A,D){return E[0]=A[0]+D[0],E[1]=A[1]+D[1],E[2]=A[2]+D[2],E},e.addDynamicAttributes=Ri,e.asyncAll=function(E,A,D){if(!E.length)return D(null,[]);var Z=E.length,se=new Array(E.length),ge=null;E.forEach(function(Te,je){A(Te,function(Ze,pt){Ze&&(ge=Ze),se[je]=pt,--Z==0&&D(ge,se)})})},e.bezier=n,e.bindAll=P,e.browser=Fe,e.cacheEntryPossiblyAdded=function(E){++tr>Yt&&(E.getActor().send("enforceCacheSizeLimit",It),tr=0)},e.clamp=f,e.clearTileCache=function(E){var A=i.caches.delete("mapbox-tiles");E&&A.catch(E).then(function(){return E()})},e.clipLine=_c,e.clone=function(E){var A=new cl(16);return A[0]=E[0],A[1]=E[1],A[2]=E[2],A[3]=E[3],A[4]=E[4],A[5]=E[5],A[6]=E[6],A[7]=E[7],A[8]=E[8],A[9]=E[9],A[10]=E[10],A[11]=E[11],A[12]=E[12],A[13]=E[13],A[14]=E[14],A[15]=E[15],A},e.clone$1=S,e.clone$2=function(E){var A=new cl(3);return A[0]=E[0],A[1]=E[1],A[2]=E[2],A},e.collisionCircleLayout=kt,e.config=Se,e.create=function(){var E=new cl(16);return cl!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E},e.create$1=function(){var E=new cl(9);return cl!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E},e.create$2=function(){var E=new cl(4);return cl!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E},e.createCommonjsModule=g,e.createExpression=xi,e.createLayout=Qr,e.createStyleLayer=function(E){return E.type==="custom"?new _v(E):new Of[E.type](E)},e.cross=function(E,A,D){var Z=A[0],se=A[1],ge=A[2],Te=D[0],je=D[1],Ze=D[2];return E[0]=se*Ze-ge*je,E[1]=ge*Te-Z*Ze,E[2]=Z*je-se*Te,E},e.deepEqual=function E(A,D){if(Array.isArray(A)){if(!Array.isArray(D)||A.length!==D.length)return!1;for(var Z=0;Z<A.length;Z++)if(!E(A[Z],D[Z]))return!1;return!0}if(typeof A=="object"&&A!==null&&D!==null){if(typeof D!="object"||Object.keys(A).length!==Object.keys(D).length)return!1;for(var se in A)if(!E(A[se],D[se]))return!1;return!0}return A===D},e.dot=function(E,A){return E[0]*A[0]+E[1]*A[1]+E[2]*A[2]},e.dot$1=function(E,A){return E[0]*A[0]+E[1]*A[1]+E[2]*A[2]+E[3]*A[3]},e.ease=s,e.emitValidationErrors=sl,e.endsWith=C,e.enforceCacheSizeLimit=function(E){rr(),ve&&ve.then(function(A){A.keys().then(function(D){for(var Z=0;Z<D.length-E;Z++)A.delete(D[Z])})})},e.evaluateSizeForFeature=ec,e.evaluateSizeForZoom=Pl,e.evaluateVariableOffset=gn,e.evented=qn,e.extend=d,e.featureFilter=Da,e.filterObject=w,e.fromRotation=function(E,A){var D=Math.sin(A),Z=Math.cos(A);return E[0]=Z,E[1]=D,E[2]=0,E[3]=-D,E[4]=Z,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E},e.getAnchorAlignment=Lu,e.getAnchorJustification=Sn,e.getArrayBuffer=Ar,e.getImage=ot,e.getJSON=function(E,A){return Qt(d(E,{type:"json"}),A)},e.getRTLTextPluginStatus=ui,e.getReferrer=Qe,e.getVideo=function(E,A){var D,Z,se=i.document.createElement("video");se.muted=!0,se.onloadstart=function(){A(null,se)};for(var ge=0;ge<E.length;ge++){var Te=i.document.createElement("source");D=E[ge],Z=void 0,(Z=i.document.createElement("a")).href=D,(Z.protocol!==i.document.location.protocol||Z.host!==i.document.location.host)&&(se.crossOrigin="Anonymous"),Te.src=E[ge],se.appendChild(Te)}return{cancel:function(){}}},e.identity=fl,e.invert=function(E,A){var D=A[0],Z=A[1],se=A[2],ge=A[3],Te=A[4],je=A[5],Ze=A[6],pt=A[7],wt=A[8],Wt=A[9],Xt=A[10],dr=A[11],jr=A[12],Lr=A[13],qr=A[14],Jr=A[15],Cn=D*je-Z*Te,Un=D*Ze-se*Te,Jn=D*pt-ge*Te,yi=Z*Ze-se*je,hi=Z*pt-ge*je,Xi=se*pt-ge*Ze,Zi=wt*Lr-Wt*jr,ba=wt*qr-Xt*jr,Ma=wt*Jr-dr*jr,Aa=Wt*qr-Xt*Lr,da=Wt*Jr-dr*Lr,yo=Xt*Jr-dr*qr,ka=Cn*yo-Un*da+Jn*Aa+yi*Ma-hi*ba+Xi*Zi;return ka?(E[0]=(je*yo-Ze*da+pt*Aa)*(ka=1/ka),E[1]=(se*da-Z*yo-ge*Aa)*ka,E[2]=(Lr*Xi-qr*hi+Jr*yi)*ka,E[3]=(Xt*hi-Wt*Xi-dr*yi)*ka,E[4]=(Ze*Ma-Te*yo-pt*ba)*ka,E[5]=(D*yo-se*Ma+ge*ba)*ka,E[6]=(qr*Jn-jr*Xi-Jr*Un)*ka,E[7]=(wt*Xi-Xt*Jn+dr*Un)*ka,E[8]=(Te*da-je*Ma+pt*Zi)*ka,E[9]=(Z*Ma-D*da-ge*Zi)*ka,E[10]=(jr*hi-Lr*Jn+Jr*Cn)*ka,E[11]=(Wt*Jn-wt*hi-dr*Cn)*ka,E[12]=(je*ba-Te*Aa-Ze*Zi)*ka,E[13]=(D*Aa-Z*ba+se*Zi)*ka,E[14]=(Lr*Un-jr*yi-qr*Cn)*ka,E[15]=(wt*yi-Wt*Un+Xt*Cn)*ka,E):null},e.isChar=Wn,e.isMapboxURL=be,e.keysDifference=function(E,A){var D=[];for(var Z in E)Z in A||D.push(Z);return D},e.makeRequest=Qt,e.mapObject=O,e.mercatorXfromLng=fp,e.mercatorYfromLat=eg,e.mercatorZfromAltitude=bv,e.mul=ql,e.multiply=Su,e.mvt=yc,e.nextPowerOfTwo=function(E){return E<=1?1:Math.pow(2,Math.ceil(Math.log(E)/Math.LN2))},e.normalize=function(E,A){var D=A[0],Z=A[1],se=A[2],ge=D*D+Z*Z+se*se;return ge>0&&(ge=1/Math.sqrt(ge)),E[0]=A[0]*ge,E[1]=A[1]*ge,E[2]=A[2]*ge,E},e.number=mo,e.offscreenCanvasSupported=ft,e.ortho=function(E,A,D,Z,se,ge,Te){var je=1/(A-D),Ze=1/(Z-se),pt=1/(ge-Te);return E[0]=-2*je,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*Ze,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*pt,E[11]=0,E[12]=(A+D)*je,E[13]=(se+Z)*Ze,E[14]=(Te+ge)*pt,E[15]=1,E},e.parseGlyphPBF=function(E){return new fi(E).readFields(Si,[])},e.pbf=fi,e.performSymbolLayout=function(E,A,D,Z,se,ge,Te){E.createArrays(),E.tilePixelRatio=8192/(512*E.overscaling),E.compareText={},E.iconsNeedLinear=!1;var je=E.layers[0].layout,Ze=E.layers[0]._unevaluatedLayout._values,pt={};if(E.textSizeData.kind==="composite"){var wt=E.textSizeData,Wt=wt.maxZoom;pt.compositeTextSizes=[Ze["text-size"].possiblyEvaluate(new bn(wt.minZoom),Te),Ze["text-size"].possiblyEvaluate(new bn(Wt),Te)]}if(E.iconSizeData.kind==="composite"){var Xt=E.iconSizeData,dr=Xt.maxZoom;pt.compositeIconSizes=[Ze["icon-size"].possiblyEvaluate(new bn(Xt.minZoom),Te),Ze["icon-size"].possiblyEvaluate(new bn(dr),Te)]}pt.layoutTextSize=Ze["text-size"].possiblyEvaluate(new bn(E.zoom+1),Te),pt.layoutIconSize=Ze["icon-size"].possiblyEvaluate(new bn(E.zoom+1),Te),pt.textMaxSize=Ze["text-size"].possiblyEvaluate(new bn(18));for(var jr=24*je.get("text-line-height"),Lr=je.get("text-rotation-alignment")==="map"&&je.get("symbol-placement")!=="point",qr=je.get("text-keep-upright"),Jr=je.get("text-size"),Cn=function(){var hi=Jn[Un],Xi=je.get("text-font").evaluate(hi,{},Te).join(","),Zi=Jr.evaluate(hi,{},Te),ba=pt.layoutTextSize.evaluate(hi,{},Te),Ma=pt.layoutIconSize.evaluate(hi,{},Te),Aa={horizontal:{},vertical:void 0},da=hi.text,yo=[0,0];if(da){var ka=da.toString(),Ca=24*je.get("text-letter-spacing").evaluate(hi,{},Te),cs=function(Bs){for(var ms=0,Au=Bs;ms<Au.length;ms+=1)if(Du=Au[ms].charCodeAt(0),Wn.Arabic(Du)||Wn["Arabic Supplement"](Du)||Wn["Arabic Extended-A"](Du)||Wn["Arabic Presentation Forms-A"](Du)||Wn["Arabic Presentation Forms-B"](Du))return!1;var Du;return!0}(ka)?Ca:0,jo=je.get("text-anchor").evaluate(hi,{},Te),eu=je.get("text-variable-anchor");if(!eu){var io=je.get("text-radial-offset").evaluate(hi,{},Te);yo=io?gn(jo,[24*io,sn]):je.get("text-offset").evaluate(hi,{},Te).map(function(Bs){return 24*Bs})}var ds=Lr?"center":je.get("text-justify").evaluate(hi,{},Te),mu=je.get("symbol-placement"),Cu=mu==="point"?24*je.get("text-max-width").evaluate(hi,{},Te):0,$u=function(){E.allowVerticalPlacement&&ga(ka)&&(Aa.vertical=Fo(da,A,D,se,Xi,Cu,jr,jo,"left",cs,yo,Ua.vertical,!0,mu,ba,Zi))};if(!Lr&&eu){for(var tl=ds==="auto"?eu.map(function(Bs){return Sn(Bs)}):[ds],pl=!1,Fl=0;Fl<tl.length;Fl++){var Rl=tl[Fl];if(!Aa.horizontal[Rl])if(pl)Aa.horizontal[Rl]=Aa.horizontal[0];else{var cc=Fo(da,A,D,se,Xi,Cu,jr,"center",Rl,cs,yo,Ua.horizontal,!1,mu,ba,Zi);cc&&(Aa.horizontal[Rl]=cc,pl=cc.positionedLines.length===1)}}$u()}else{ds==="auto"&&(ds=Sn(jo));var nc=Fo(da,A,D,se,Xi,Cu,jr,jo,ds,cs,yo,Ua.horizontal,!1,mu,ba,Zi);nc&&(Aa.horizontal[ds]=nc),$u(),ga(ka)&&Lr&&qr&&(Aa.vertical=Fo(da,A,D,se,Xi,Cu,jr,jo,ds,cs,yo,Ua.vertical,!1,mu,ba,Zi))}}var bc=void 0,Zl=!1;if(hi.icon&&hi.icon.name){var Nl=Z[hi.icon.name];Nl&&(bc=function(Bs,ms,Au){var Du=Lu(Au),xc=ms[0]-Bs.displaySize[0]*Du.horizontalAlign,ku=ms[1]-Bs.displaySize[1]*Du.verticalAlign;return{image:Bs,top:ku,bottom:ku+Bs.displaySize[1],left:xc,right:xc+Bs.displaySize[0]}}(se[hi.icon.name],je.get("icon-offset").evaluate(hi,{},Te),je.get("icon-anchor").evaluate(hi,{},Te)),Zl=Nl.sdf,E.sdfIcons===void 0?E.sdfIcons=Nl.sdf:E.sdfIcons!==Nl.sdf&&j("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Nl.pixelRatio!==E.pixelRatio||je.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var Kl=dn(Aa.horizontal)||Aa.vertical;E.iconsInText=!!Kl&&Kl.iconsInText,(Kl||bc)&&function(Bs,ms,Au,Du,xc,ku,rl,vc,Ts,eh,qc){var Tf=ku.textMaxSize.evaluate(ms,{});Tf===void 0&&(Tf=rl);var Gc,fc=Bs.layers[0].layout,th=fc.get("icon-offset").evaluate(ms,{},qc),rh=dn(Au.horizontal),nh=rl/24,Ud=Bs.tilePixelRatio*nh,Xc=Bs.tilePixelRatio*Tf/24,kd=Bs.tilePixelRatio*vc,zd=Bs.tilePixelRatio*fc.get("symbol-spacing"),Vh=fc.get("text-padding")*Bs.tilePixelRatio,Av=fc.get("icon-padding")*Bs.tilePixelRatio,Vd=fc.get("text-max-angle")/180*Math.PI,Ov=fc.get("text-rotation-alignment")==="map"&&fc.get("symbol-placement")!=="point",_h=fc.get("icon-rotation-alignment")==="map"&&fc.get("symbol-placement")!=="point",sd=fc.get("symbol-placement"),Tv=zd/2,ud=fc.get("icon-text-fit");Du&&ud!=="none"&&(Bs.allowVerticalPlacement&&Au.vertical&&(Gc=Cl(Du,Au.vertical,ud,fc.get("icon-text-fit-padding"),th,nh)),rh&&(Du=Cl(Du,rh,ud,fc.get("icon-text-fit-padding"),th,nh)));var bh=function(dm,vd){vd.x<0||vd.x>=8192||vd.y<0||vd.y>=8192||function(bl,Mf,vm,xh,mp,og,Pv,ef,wv,Zd,Rv,Iv,sg,ug,Hh,lg,pm,cg,fg,hg,Yc,uf,pd,Mc,lf){var gd,$c,Vf,oh,Fc,cf=bl.addToLineVertexArray(Mf,vm),Ec=0,Cf=0,Pf=0,Kd=0,yp=-1,Lv=-1,wf={},dg=Pt(""),_p=0,Dv=0;if(ef._unevaluatedLayout.getValue("text-radial-offset")===void 0?(_p=(gd=ef.layout.get("text-offset").evaluate(Yc,{},Mc).map(function(_m){return 24*_m}))[0],Dv=gd[1]):(_p=24*ef.layout.get("text-radial-offset").evaluate(Yc,{},Mc),Dv=sn),bl.allowVerticalPlacement&&xh.vertical){var bp=ef.layout.get("text-rotate").evaluate(Yc,{},Mc)+90;oh=new au(wv,Mf,Zd,Rv,Iv,xh.vertical,sg,ug,Hh,bp),Pv&&(Fc=new au(wv,Mf,Zd,Rv,Iv,Pv,pm,cg,Hh,bp))}if(mp){var xp=ef.layout.get("icon-rotate").evaluate(Yc,{}),vg=ef.layout.get("icon-text-fit")!=="none",Ep=kr(mp,xp,pd,vg),md=Pv?kr(Pv,xp,pd,vg):void 0;Vf=new au(wv,Mf,Zd,Rv,Iv,mp,pm,cg,!1,xp),Ec=4*Ep.length;var pg=bl.iconSizeData,Wf=null;pg.kind==="source"?(Wf=[128*ef.layout.get("icon-size").evaluate(Yc,{})])[0]>32640&&j(bl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):pg.kind==="composite"&&((Wf=[128*uf.compositeIconSizes[0].evaluate(Yc,{},Mc),128*uf.compositeIconSizes[1].evaluate(Yc,{},Mc)])[0]>32640||Wf[1]>32640)&&j(bl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),bl.addSymbols(bl.icon,Ep,Wf,hg,fg,Yc,!1,Mf,cf.lineStartIndex,cf.lineLength,-1,Mc),yp=bl.icon.placedSymbolArray.length-1,md&&(Cf=4*md.length,bl.addSymbols(bl.icon,md,Wf,hg,fg,Yc,Ua.vertical,Mf,cf.lineStartIndex,cf.lineLength,-1,Mc),Lv=bl.icon.placedSymbolArray.length-1)}for(var gg in xh.horizontal){var jv=xh.horizontal[gg];if(!$c){dg=Pt(jv.text);var gm=ef.layout.get("text-rotate").evaluate(Yc,{},Mc);$c=new au(wv,Mf,Zd,Rv,Iv,jv,sg,ug,Hh,gm)}var mg=jv.positionedLines.length===1;if(Pf+=Nr(bl,Mf,jv,og,ef,Hh,Yc,lg,cf,xh.vertical?Ua.horizontal:Ua.horizontalOnly,mg?Object.keys(xh.horizontal):[gg],wf,yp,uf,Mc),mg)break}xh.vertical&&(Kd+=Nr(bl,Mf,xh.vertical,og,ef,Hh,Yc,lg,cf,Ua.vertical,["vertical"],wf,Lv,uf,Mc));var yg=$c?$c.boxStartIndex:bl.collisionBoxArray.length,ff=$c?$c.boxEndIndex:bl.collisionBoxArray.length,yd=oh?oh.boxStartIndex:bl.collisionBoxArray.length,mm=oh?oh.boxEndIndex:bl.collisionBoxArray.length,ym=Vf?Vf.boxStartIndex:bl.collisionBoxArray.length,Sp=Vf?Vf.boxEndIndex:bl.collisionBoxArray.length,gl=Fc?Fc.boxStartIndex:bl.collisionBoxArray.length,ml=Fc?Fc.boxEndIndex:bl.collisionBoxArray.length,Rf=-1,Bv=function(bg,bm){return bg&&bg.circleDiameter?Math.max(bg.circleDiameter,bm):bm};Rf=Bv($c,Rf),Rf=Bv(oh,Rf),Rf=Bv(Vf,Rf);var _g=(Rf=Bv(Fc,Rf))>-1?1:0;_g&&(Rf*=lf/24),bl.glyphOffsetArray.length>=_a.MAX_GLYPHS&&j("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yc.sortKey!==void 0&&bl.addToSortKeyRanges(bl.symbolInstances.length,Yc.sortKey),bl.symbolInstances.emplaceBack(Mf.x,Mf.y,wf.right>=0?wf.right:-1,wf.center>=0?wf.center:-1,wf.left>=0?wf.left:-1,wf.vertical||-1,yp,Lv,dg,yg,ff,yd,mm,ym,Sp,gl,ml,Zd,Pf,Kd,Ec,Cf,_g,0,sg,_p,Dv,Rf)}(Bs,vd,dm,Au,Du,xc,Gc,Bs.layers[0],Bs.collisionBoxArray,ms.index,ms.sourceLayerIndex,Bs.index,Ud,Vh,Ov,Ts,kd,Av,_h,th,ms,ku,eh,qc,rl)};if(sd==="line")for(var Wd=0,Mv=_c(ms.geometry,0,0,8192,8192);Wd<Mv.length;Wd+=1)for(var Wh=Mv[Wd],ld=0,cd=rc(Wh,zd,Vd,Au.vertical||rh,Du,24,Xc,Bs.overscaling,8192);ld<cd.length;ld+=1){var Cv=cd[ld];rh&&Or(Bs,rh.text,Tv,Cv)||bh(Wh,Cv)}else if(sd==="line-center")for(var fd=0,Hd=ms.geometry;fd<Hd.length;fd+=1){var Gd=Hd[fd];if(Gd.length>1){var Xd=Os(Gd,Vd,Au.vertical||rh,Du,24,Xc);Xd&&bh(Gd,Xd)}}else if(ms.type==="Polygon")for(var Yd=0,zf=td(ms.geometry,0);Yd<zf.length;Yd+=1){var ih=zf[Yd],hd=$r(ih,16);bh(ih[0],new el(hd.x,hd.y,0))}else if(ms.type==="LineString")for(var dd=0,$d=ms.geometry;dd<$d.length;dd+=1){var ah=$d[dd];bh(ah,new el(ah[0].x,ah[0].y,0))}else if(ms.type==="Point")for(var vp=0,ig=ms.geometry;vp<ig.length;vp+=1)for(var pp=0,ag=ig[vp];pp<ag.length;pp+=1){var gp=ag[pp];bh([gp],new el(gp.x,gp.y,0))}}(E,hi,Aa,bc,Z,pt,ba,Ma,yo,Zl,Te)},Un=0,Jn=E.features;Un<Jn.length;Un+=1)Cn();ge&&E.generateCollisionDebugBuffers()},e.perspective=function(E,A,D,Z,se){var ge,Te=1/Math.tan(A/2);return E[0]=Te/D,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=Te,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,se!=null&&se!==1/0?(E[10]=(se+Z)*(ge=1/(Z-se)),E[14]=2*se*Z*ge):(E[10]=-1,E[14]=-2*Z),E},e.pick=function(E,A){for(var D={},Z=0;Z<A.length;Z++){var se=A[Z];se in E&&(D[se]=E[se])}return D},e.plugin=oi,e.polygonIntersectsPolygon=pc,e.postMapLoadEvent=$e,e.postTurnstileEvent=We,e.potpack=co,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Kt,e.registerForPluginStateChange=function(E){return E({pluginStatus:or,pluginURL:Ir}),qn.on("pluginStateChange",E),E},e.renderColorRamp=Cd,e.rotate=function(E,A,D){var Z=A[0],se=A[1],ge=A[2],Te=A[3],je=Math.sin(D),Ze=Math.cos(D);return E[0]=Z*Ze+ge*je,E[1]=se*Ze+Te*je,E[2]=Z*-je+ge*Ze,E[3]=se*-je+Te*Ze,E},e.rotateX=function(E,A,D){var Z=Math.sin(D),se=Math.cos(D),ge=A[4],Te=A[5],je=A[6],Ze=A[7],pt=A[8],wt=A[9],Wt=A[10],Xt=A[11];return A!==E&&(E[0]=A[0],E[1]=A[1],E[2]=A[2],E[3]=A[3],E[12]=A[12],E[13]=A[13],E[14]=A[14],E[15]=A[15]),E[4]=ge*se+pt*Z,E[5]=Te*se+wt*Z,E[6]=je*se+Wt*Z,E[7]=Ze*se+Xt*Z,E[8]=pt*se-ge*Z,E[9]=wt*se-Te*Z,E[10]=Wt*se-je*Z,E[11]=Xt*se-Ze*Z,E},e.rotateZ=function(E,A,D){var Z=Math.sin(D),se=Math.cos(D),ge=A[0],Te=A[1],je=A[2],Ze=A[3],pt=A[4],wt=A[5],Wt=A[6],Xt=A[7];return A!==E&&(E[8]=A[8],E[9]=A[9],E[10]=A[10],E[11]=A[11],E[12]=A[12],E[13]=A[13],E[14]=A[14],E[15]=A[15]),E[0]=ge*se+pt*Z,E[1]=Te*se+wt*Z,E[2]=je*se+Wt*Z,E[3]=Ze*se+Xt*Z,E[4]=pt*se-ge*Z,E[5]=wt*se-Te*Z,E[6]=Wt*se-je*Z,E[7]=Xt*se-Ze*Z,E},e.scale=function(E,A,D){var Z=D[0],se=D[1],ge=D[2];return E[0]=A[0]*Z,E[1]=A[1]*Z,E[2]=A[2]*Z,E[3]=A[3]*Z,E[4]=A[4]*se,E[5]=A[5]*se,E[6]=A[6]*se,E[7]=A[7]*se,E[8]=A[8]*ge,E[9]=A[9]*ge,E[10]=A[10]*ge,E[11]=A[11]*ge,E[12]=A[12],E[13]=A[13],E[14]=A[14],E[15]=A[15],E},e.scale$1=function(E,A,D){return E[0]=A[0]*D,E[1]=A[1]*D,E[2]=A[2]*D,E[3]=A[3]*D,E},e.scale$2=function(E,A,D){return E[0]=A[0]*D,E[1]=A[1]*D,E[2]=A[2]*D,E},e.setCacheLimits=function(E,A){It=E,Yt=A},e.setRTLTextPlugin=function(E,A,D){if(D===void 0&&(D=!1),or==="deferred"||or==="loading"||or==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ir=Fe.resolveURL(E),or="deferred",mr=A,jn(),D||kn()},e.sphericalToCartesian=function(E){var A=E[0],D=E[1],Z=E[2];return D+=90,D*=Math.PI/180,Z*=Math.PI/180,{x:A*Math.cos(D)*Math.sin(Z),y:A*Math.sin(D)*Math.sin(Z),z:A*Math.cos(Z)}},e.sqrLen=function(E){var A=E[0],D=E[1];return A*A+D*D},e.styleSpec=qe,e.sub=function(E,A,D){return E[0]=A[0]-D[0],E[1]=A[1]-D[1],E[2]=A[2]-D[2],E},e.symbolSize=Wo,e.transformMat3=function(E,A,D){var Z=A[0],se=A[1],ge=A[2];return E[0]=Z*D[0]+se*D[3]+ge*D[6],E[1]=Z*D[1]+se*D[4]+ge*D[7],E[2]=Z*D[2]+se*D[5]+ge*D[8],E},e.transformMat4=Dc,e.translate=function(E,A,D){var Z,se,ge,Te,je,Ze,pt,wt,Wt,Xt,dr,jr,Lr=D[0],qr=D[1],Jr=D[2];return A===E?(E[12]=A[0]*Lr+A[4]*qr+A[8]*Jr+A[12],E[13]=A[1]*Lr+A[5]*qr+A[9]*Jr+A[13],E[14]=A[2]*Lr+A[6]*qr+A[10]*Jr+A[14],E[15]=A[3]*Lr+A[7]*qr+A[11]*Jr+A[15]):(se=A[1],ge=A[2],Te=A[3],je=A[4],Ze=A[5],pt=A[6],wt=A[7],Wt=A[8],Xt=A[9],dr=A[10],jr=A[11],E[0]=Z=A[0],E[1]=se,E[2]=ge,E[3]=Te,E[4]=je,E[5]=Ze,E[6]=pt,E[7]=wt,E[8]=Wt,E[9]=Xt,E[10]=dr,E[11]=jr,E[12]=Z*Lr+je*qr+Wt*Jr+A[12],E[13]=se*Lr+Ze*qr+Xt*Jr+A[13],E[14]=ge*Lr+pt*qr+dr*Jr+A[14],E[15]=Te*Lr+wt*qr+jr*Jr+A[15]),E},e.triggerPluginCompletionEvent=yn,e.uniqueId=_,e.validateCustomStyleLayer=function(E){var A=[],D=E.id;return D===void 0&&A.push({message:"layers."+D+': missing required property "id"'}),E.render===void 0&&A.push({message:"layers."+D+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&A.push({message:"layers."+D+': property "renderingMode" must be either "2d" or "3d"'}),A},e.validateLight=Tc,e.validateStyle=yl,e.values=function(E){var A=[];for(var D in E)A.push(E[D]);return A},e.vectorTile=yc,e.version="1.13.3",e.warnOnce=j,e.webpSupported=ye,e.window=i,e.wrap=u}),o(["./shared"],function(e){"use strict";function g(ct){var ot=typeof ct;if(ot==="number"||ot==="boolean"||ot==="string"||ct==null)return JSON.stringify(ct);if(Array.isArray(ct)){for(var xt="[",Bt=0,Ke=ct;Bt<Ke.length;Bt+=1)xt+=g(Ke[Bt])+",";return xt+"]"}for(var lt=Object.keys(ct).sort(),mt="{",qe=0;qe<lt.length;qe++)mt+=JSON.stringify(lt[qe])+":"+g(ct[lt[qe]])+",";return mt+"}"}function v(ct){for(var ot="",xt=0,Bt=e.refProperties;xt<Bt.length;xt+=1)ot+="/"+g(ct[Bt[xt]]);return ot}var p=function(ot){this.keyCache={},ot&&this.replace(ot)};p.prototype.replace=function(ct){this._layerConfigs={},this._layers={},this.update(ct,[])},p.prototype.update=function(ct,ot){for(var xt=this,Bt=0,Ke=ct;Bt<Ke.length;Bt+=1){var lt=Ke[Bt];this._layerConfigs[lt.id]=lt;var mt=this._layers[lt.id]=e.createStyleLayer(lt);mt._featureFilter=e.featureFilter(mt.filter),this.keyCache[lt.id]&&delete this.keyCache[lt.id]}for(var qe=0,yt=ot;qe<yt.length;qe+=1){var qt=yt[qe];delete this.keyCache[qt],delete this._layerConfigs[qt],delete this._layers[qt]}this.familiesBySource={};for(var Er=0,Zr=function(On,Mt){for(var er={},$t=0;$t<On.length;$t++){var Tr=Mt&&Mt[On[$t].id]||v(On[$t]);Mt&&(Mt[On[$t].id]=Tr);var Mr=er[Tr];Mr||(Mr=er[Tr]=[]),Mr.push(On[$t])}var Hr=[];for(var wr in er)Hr.push(er[wr]);return Hr}(e.values(this._layerConfigs),this.keyCache);Er<Zr.length;Er+=1){var Dr=Zr[Er].map(function(On){return xt._layers[On.id]}),Cr=Dr[0];if(Cr.visibility!=="none"){var mn=Cr.source||"",xn=this.familiesBySource[mn];xn||(xn=this.familiesBySource[mn]={});var lr=Cr.sourceLayer||"_geojsonTileLayer",An=xn[lr];An||(An=xn[lr]=[]),An.push(Dr)}}};var c=function(ot){var xt={},Bt=[];for(var Ke in ot){var lt=ot[Ke],mt=xt[Ke]={};for(var qe in lt){var yt=lt[+qe];if(yt&&yt.bitmap.width!==0&&yt.bitmap.height!==0){var qt={x:0,y:0,w:yt.bitmap.width+2,h:yt.bitmap.height+2};Bt.push(qt),mt[qe]={rect:qt,metrics:yt.metrics}}}}var Er=e.potpack(Bt),Zr=new e.AlphaImage({width:Er.w||1,height:Er.h||1});for(var Dr in ot){var Cr=ot[Dr];for(var mn in Cr){var xn=Cr[+mn];if(xn&&xn.bitmap.width!==0&&xn.bitmap.height!==0){var lr=xt[Dr][mn].rect;e.AlphaImage.copy(xn.bitmap,Zr,{x:0,y:0},{x:lr.x+1,y:lr.y+1},xn.bitmap)}}}this.image=Zr,this.positions=xt};e.register("GlyphAtlas",c);var h=function(ot){this.tileID=new e.OverscaledTileID(ot.tileID.overscaledZ,ot.tileID.wrap,ot.tileID.canonical.z,ot.tileID.canonical.x,ot.tileID.canonical.y),this.uid=ot.uid,this.zoom=ot.zoom,this.pixelRatio=ot.pixelRatio,this.tileSize=ot.tileSize,this.source=ot.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ot.showCollisionBoxes,this.collectResourceTiming=!!ot.collectResourceTiming,this.returnDependencies=!!ot.returnDependencies,this.promoteId=ot.promoteId};function i(ct,ot,xt){for(var Bt=new e.EvaluationParameters(ot),Ke=0,lt=ct;Ke<lt.length;Ke+=1)lt[Ke].recalculate(Bt,xt)}function r(ct,ot){var xt=e.getArrayBuffer(ct.request,function(Bt,Ke,lt,mt){Bt?ot(Bt):Ke&&ot(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ke)),rawData:Ke,cacheControl:lt,expires:mt})});return function(){xt.cancel(),ot()}}h.prototype.parse=function(ct,ot,xt,Bt,Ke){var lt=this;this.status="parsing",this.data=ct,this.collisionBoxArray=new e.CollisionBoxArray;var mt=new e.DictionaryCoder(Object.keys(ct.layers).sort()),qe=new e.FeatureIndex(this.tileID,this.promoteId);qe.bucketLayerIDs=[];var yt,qt,Er,Zr,Dr={},Cr={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xt},mn=ot.familiesBySource[this.source];for(var xn in mn){var lr=ct.layers[xn];if(lr){lr.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+xn+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var An=mt.encode(xn),On=[],Mt=0;Mt<lr.length;Mt++){var er=lr.feature(Mt),$t=qe.getId(er,xn);On.push({feature:er,id:$t,index:Mt,sourceLayerIndex:An})}for(var Tr=0,Mr=mn[xn];Tr<Mr.length;Tr+=1){var Hr=Mr[Tr],wr=Hr[0];wr.minzoom&&this.zoom<Math.floor(wr.minzoom)||wr.maxzoom&&this.zoom>=wr.maxzoom||wr.visibility!=="none"&&(i(Hr,this.zoom,xt),(Dr[wr.id]=wr.createBucket({index:qe.bucketLayerIDs.length,layers:Hr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:An,sourceID:this.source})).populate(On,Cr,this.tileID.canonical),qe.bucketLayerIDs.push(Hr.map(function(Nn){return Nn.id})))}}}var Ur=e.mapObject(Cr.glyphDependencies,function(Nn){return Object.keys(Nn).map(Number)});Object.keys(Ur).length?Bt.send("getGlyphs",{uid:this.uid,stacks:Ur},function(Nn,En){yt||(yt=Nn,qt=En,Rr.call(lt))}):qt={};var fn=Object.keys(Cr.iconDependencies);fn.length?Bt.send("getImages",{icons:fn,source:this.source,tileID:this.tileID,type:"icons"},function(Nn,En){yt||(yt=Nn,Er=En,Rr.call(lt))}):Er={};var tn=Object.keys(Cr.patternDependencies);function Rr(){if(yt)return Ke(yt);if(qt&&Er&&Zr){var Nn=new c(qt),En=new e.ImageAtlas(Er,Zr);for(var Yn in Dr){var wi=Dr[Yn];wi instanceof e.SymbolBucket?(i(wi.layers,this.zoom,xt),e.performSymbolLayout(wi,qt,Nn.positions,Er,En.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wi.hasPattern&&(wi instanceof e.LineBucket||wi instanceof e.FillBucket||wi instanceof e.FillExtrusionBucket)&&(i(wi.layers,this.zoom,xt),wi.addFeatures(Cr,this.tileID.canonical,En.patternPositions))}this.status="done",Ke(null,{buckets:e.values(Dr).filter(function($a){return!$a.isEmpty()}),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nn.image,imageAtlas:En,glyphMap:this.returnDependencies?qt:null,iconMap:this.returnDependencies?Er:null,glyphPositions:this.returnDependencies?Nn.positions:null})}}tn.length?Bt.send("getImages",{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"},function(Nn,En){yt||(yt=Nn,Zr=En,Rr.call(lt))}):Zr={},Rr.call(this)};var n=function(ot,xt,Bt,Ke){this.actor=ot,this.layerIndex=xt,this.availableImages=Bt,this.loadVectorData=Ke||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(ct,ot){var xt=this,Bt=ct.uid;this.loading||(this.loading={});var Ke=!!(ct&&ct.request&&ct.request.collectResourceTiming)&&new e.RequestPerformance(ct.request),lt=this.loading[Bt]=new h(ct);lt.abort=this.loadVectorData(ct,function(mt,qe){if(delete xt.loading[Bt],mt||!qe)return lt.status="done",xt.loaded[Bt]=lt,ot(mt);var yt=qe.rawData,qt={};qe.expires&&(qt.expires=qe.expires),qe.cacheControl&&(qt.cacheControl=qe.cacheControl);var Er={};if(Ke){var Zr=Ke.finish();Zr&&(Er.resourceTiming=JSON.parse(JSON.stringify(Zr)))}lt.vectorTile=qe.vectorTile,lt.parse(qe.vectorTile,xt.layerIndex,xt.availableImages,xt.actor,function(Dr,Cr){if(Dr||!Cr)return ot(Dr);ot(null,e.extend({rawTileData:yt.slice(0)},Cr,qt,Er))}),xt.loaded=xt.loaded||{},xt.loaded[Bt]=lt})},n.prototype.reloadTile=function(ct,ot){var xt=this,Bt=this.loaded,Ke=ct.uid,lt=this;if(Bt&&Bt[Ke]){var mt=Bt[Ke];mt.showCollisionBoxes=ct.showCollisionBoxes;var qe=function(qt,Er){var Zr=mt.reloadCallback;Zr&&(delete mt.reloadCallback,mt.parse(mt.vectorTile,lt.layerIndex,xt.availableImages,lt.actor,Zr)),ot(qt,Er)};mt.status==="parsing"?mt.reloadCallback=qe:mt.status==="done"&&(mt.vectorTile?mt.parse(mt.vectorTile,this.layerIndex,this.availableImages,this.actor,qe):qe())}},n.prototype.abortTile=function(ct,ot){var xt=this.loading,Bt=ct.uid;xt&&xt[Bt]&&xt[Bt].abort&&(xt[Bt].abort(),delete xt[Bt]),ot()},n.prototype.removeTile=function(ct,ot){var xt=this.loaded,Bt=ct.uid;xt&&xt[Bt]&&delete xt[Bt],ot()};var s=e.window.ImageBitmap,f=function(){this.loaded={}};function u(ct,ot){if(ct.length!==0){d(ct[0],ot);for(var xt=1;xt<ct.length;xt++)d(ct[xt],!ot)}}function d(ct,ot){for(var xt=0,Bt=0,Ke=0,lt=ct.length,mt=lt-1;Ke<lt;mt=Ke++){var qe=(ct[Ke][0]-ct[mt][0])*(ct[mt][1]+ct[Ke][1]),yt=xt+qe;Bt+=Math.abs(xt)>=Math.abs(qe)?xt-yt+qe:qe-yt+xt,xt=yt}xt+Bt>=0!=!!ot&&ct.reverse()}f.prototype.loadTile=function(ct,ot){var xt=ct.uid,Bt=ct.encoding,Ke=ct.rawImageData,lt=s&&Ke instanceof s?this.getImageData(Ke):Ke,mt=new e.DEMData(xt,lt,Bt);this.loaded=this.loaded||{},this.loaded[xt]=mt,ot(null,mt)},f.prototype.getImageData=function(ct){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ct.width,ct.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ct.width,this.offscreenCanvas.height=ct.height,this.offscreenCanvasContext.drawImage(ct,0,0,ct.width,ct.height);var ot=this.offscreenCanvasContext.getImageData(-1,-1,ct.width+2,ct.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:ot.width,height:ot.height},ot.data)},f.prototype.removeTile=function(ct){var ot=this.loaded,xt=ct.uid;ot&&ot[xt]&&delete ot[xt]};var b=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,_=function(ot){this._feature=ot,this.extent=e.EXTENT,this.type=ot.type,this.properties=ot.tags,"id"in ot&&!isNaN(ot.id)&&(this.id=parseInt(ot.id,10))};_.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ct=[],ot=0,xt=this._feature.geometry;ot<xt.length;ot+=1){var Bt=xt[ot];ct.push([new e.Point$1(Bt[0],Bt[1])])}return ct}for(var Ke=[],lt=0,mt=this._feature.geometry;lt<mt.length;lt+=1){for(var qe=[],yt=0,qt=mt[lt];yt<qt.length;yt+=1){var Er=qt[yt];qe.push(new e.Point$1(Er[0],Er[1]))}Ke.push(qe)}return Ke},_.prototype.toGeoJSON=function(ct,ot,xt){return b.call(this,ct,ot,xt)};var x=function(ot){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=ot.length,this._features=ot};x.prototype.feature=function(ct){return new _(this._features[ct])};var M=e.vectorTile.VectorTileFeature,P=C;function C(ct,ot){this.options=ot||{},this.features=ct,this.length=ct.length}function O(ct,ot){this.id=typeof ct.id=="number"?ct.id:void 0,this.type=ct.type,this.rawGeometry=ct.type===1?[ct.geometry]:ct.geometry,this.properties=ct.tags,this.extent=ot||4096}C.prototype.feature=function(ct){return new O(this.features[ct],this.options.extent)},O.prototype.loadGeometry=function(){var ct=this.rawGeometry;this.geometry=[];for(var ot=0;ot<ct.length;ot++){for(var xt=ct[ot],Bt=[],Ke=0;Ke<xt.length;Ke++)Bt.push(new e.Point$1(xt[Ke][0],xt[Ke][1]));this.geometry.push(Bt)}return this.geometry},O.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ct=this.geometry,ot=1/0,xt=-1/0,Bt=1/0,Ke=-1/0,lt=0;lt<ct.length;lt++)for(var mt=ct[lt],qe=0;qe<mt.length;qe++){var yt=mt[qe];ot=Math.min(ot,yt.x),xt=Math.max(xt,yt.x),Bt=Math.min(Bt,yt.y),Ke=Math.max(Ke,yt.y)}return[ot,Bt,xt,Ke]},O.prototype.toGeoJSON=M.prototype.toGeoJSON;var w=I,S=P;function I(ct){var ot=new e.pbf;return function(xt,Bt){for(var Ke in xt.layers)Bt.writeMessage(3,j,xt.layers[Ke])}(ct,ot),ot.finish()}function j(ct,ot){var xt;ot.writeVarintField(15,ct.version||1),ot.writeStringField(1,ct.name||""),ot.writeVarintField(5,ct.extent||4096);var Bt={keys:[],values:[],keycache:{},valuecache:{}};for(xt=0;xt<ct.length;xt++)Bt.feature=ct.feature(xt),ot.writeMessage(2,N,Bt);var Ke=Bt.keys;for(xt=0;xt<Ke.length;xt++)ot.writeStringField(3,Ke[xt]);var lt=Bt.values;for(xt=0;xt<lt.length;xt++)ot.writeMessage(4,ne,lt[xt])}function N(ct,ot){var xt=ct.feature;xt.id!==void 0&&ot.writeVarintField(1,xt.id),ot.writeMessage(2,W,ct),ot.writeVarintField(3,xt.type),ot.writeMessage(4,Q,xt)}function W(ct,ot){var xt=ct.feature,Bt=ct.keys,Ke=ct.values,lt=ct.keycache,mt=ct.valuecache;for(var qe in xt.properties){var yt=lt[qe];yt===void 0&&(Bt.push(qe),lt[qe]=yt=Bt.length-1),ot.writeVarint(yt);var qt=xt.properties[qe],Er=typeof qt;Er!=="string"&&Er!=="boolean"&&Er!=="number"&&(qt=JSON.stringify(qt));var Zr=Er+":"+qt,Dr=mt[Zr];Dr===void 0&&(Ke.push(qt),mt[Zr]=Dr=Ke.length-1),ot.writeVarint(Dr)}}function H(ct,ot){return(ot<<3)+(7&ct)}function J(ct){return ct<<1^ct>>31}function Q(ct,ot){for(var xt=ct.loadGeometry(),Bt=ct.type,Ke=0,lt=0,mt=xt.length,qe=0;qe<mt;qe++){var yt=xt[qe],qt=1;Bt===1&&(qt=yt.length),ot.writeVarint(H(1,qt));for(var Er=Bt===3?yt.length-1:yt.length,Zr=0;Zr<Er;Zr++){Zr===1&&Bt!==1&&ot.writeVarint(H(2,Er-1));var Dr=yt[Zr].x-Ke,Cr=yt[Zr].y-lt;ot.writeVarint(J(Dr)),ot.writeVarint(J(Cr)),Ke+=Dr,lt+=Cr}Bt===3&&ot.writeVarint(H(7,1))}}function ne(ct,ot){var xt=typeof ct;xt==="string"?ot.writeStringField(1,ct):xt==="boolean"?ot.writeBooleanField(7,ct):xt==="number"&&(ct%1!=0?ot.writeDoubleField(3,ct):ct<0?ot.writeSVarintField(6,ct):ot.writeVarintField(5,ct))}function K(ct,ot,xt,Bt){ie(ct,xt,Bt),ie(ot,2*xt,2*Bt),ie(ot,2*xt+1,2*Bt+1)}function ie(ct,ot,xt){var Bt=ct[ot];ct[ot]=ct[xt],ct[xt]=Bt}function de(ct,ot,xt,Bt){var Ke=ct-xt,lt=ot-Bt;return Ke*Ke+lt*lt}w.fromVectorTileJs=I,w.fromGeojsonVt=function(ct,ot){ot=ot||{};var xt={};for(var Bt in ct)xt[Bt]=new P(ct[Bt].features,ot),xt[Bt].name=Bt,xt[Bt].version=ot.version,xt[Bt].extent=ot.extent;return I({layers:xt})},w.GeoJSONWrapper=S;var we=function(ot){return ot[0]},Re=function(ot){return ot[1]},_e=function(ot,xt,Bt,Ke,lt){xt===void 0&&(xt=we),Bt===void 0&&(Bt=Re),Ke===void 0&&(Ke=64),lt===void 0&&(lt=Float64Array),this.nodeSize=Ke,this.points=ot;for(var mt=ot.length<65536?Uint16Array:Uint32Array,qe=this.ids=new mt(ot.length),yt=this.coords=new lt(2*ot.length),qt=0;qt<ot.length;qt++)qe[qt]=qt,yt[2*qt]=xt(ot[qt]),yt[2*qt+1]=Bt(ot[qt]);(function Er(Zr,Dr,Cr,mn,xn,lr){if(!(xn-mn<=Cr)){var An=mn+xn>>1;(function On(Mt,er,$t,Tr,Mr,Hr){for(;Mr>Tr;){if(Mr-Tr>600){var wr=Mr-Tr+1,Ur=$t-Tr+1,fn=Math.log(wr),tn=.5*Math.exp(2*fn/3),Rr=.5*Math.sqrt(fn*tn*(wr-tn)/wr)*(Ur-wr/2<0?-1:1);On(Mt,er,$t,Math.max(Tr,Math.floor($t-Ur*tn/wr+Rr)),Math.min(Mr,Math.floor($t+(wr-Ur)*tn/wr+Rr)),Hr)}var Nn=er[2*$t+Hr],En=Tr,Yn=Mr;for(K(Mt,er,Tr,$t),er[2*Mr+Hr]>Nn&&K(Mt,er,Tr,Mr);En<Yn;){for(K(Mt,er,En,Yn),En++,Yn--;er[2*En+Hr]<Nn;)En++;for(;er[2*Yn+Hr]>Nn;)Yn--}er[2*Tr+Hr]===Nn?K(Mt,er,Tr,Yn):K(Mt,er,++Yn,Mr),Yn<=$t&&(Tr=Yn+1),$t<=Yn&&(Mr=Yn-1)}})(Zr,Dr,An,mn,xn,lr%2),Er(Zr,Dr,Cr,mn,An-1,lr+1),Er(Zr,Dr,Cr,An+1,xn,lr+1)}})(qe,yt,Ke,0,qe.length-1,0)};_e.prototype.range=function(ct,ot,xt,Bt){return function(Ke,lt,mt,qe,yt,qt,Er){for(var Zr,Dr,Cr=[0,Ke.length-1,0],mn=[];Cr.length;){var xn=Cr.pop(),lr=Cr.pop(),An=Cr.pop();if(lr-An<=Er)for(var On=An;On<=lr;On++)Dr=lt[2*On+1],(Zr=lt[2*On])>=mt&&Zr<=yt&&Dr>=qe&&Dr<=qt&&mn.push(Ke[On]);else{var Mt=Math.floor((An+lr)/2);Dr=lt[2*Mt+1],(Zr=lt[2*Mt])>=mt&&Zr<=yt&&Dr>=qe&&Dr<=qt&&mn.push(Ke[Mt]);var er=(xn+1)%2;(xn===0?mt<=Zr:qe<=Dr)&&(Cr.push(An),Cr.push(Mt-1),Cr.push(er)),(xn===0?yt>=Zr:qt>=Dr)&&(Cr.push(Mt+1),Cr.push(lr),Cr.push(er))}}return mn}(this.ids,this.coords,ct,ot,xt,Bt,this.nodeSize)},_e.prototype.within=function(ct,ot,xt){return function(Bt,Ke,lt,mt,qe,yt){for(var qt=[0,Bt.length-1,0],Er=[],Zr=qe*qe;qt.length;){var Dr=qt.pop(),Cr=qt.pop(),mn=qt.pop();if(Cr-mn<=yt)for(var xn=mn;xn<=Cr;xn++)de(Ke[2*xn],Ke[2*xn+1],lt,mt)<=Zr&&Er.push(Bt[xn]);else{var lr=Math.floor((mn+Cr)/2),An=Ke[2*lr],On=Ke[2*lr+1];de(An,On,lt,mt)<=Zr&&Er.push(Bt[lr]);var Mt=(Dr+1)%2;(Dr===0?lt-qe<=An:mt-qe<=On)&&(qt.push(mn),qt.push(lr-1),qt.push(Mt)),(Dr===0?lt+qe>=An:mt+qe>=On)&&(qt.push(lr+1),qt.push(Cr),qt.push(Mt))}}return Er}(this.ids,this.coords,ct,ot,xt,this.nodeSize)};var Ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ot){return ot}},rt=function(ot){this.options=Ae(Object.create(Ue),ot),this.trees=new Array(this.options.maxZoom+1)};function Fe(ct,ot,xt,Bt,Ke){return{x:ct,y:ot,zoom:1/0,id:xt,parentId:-1,numPoints:Bt,properties:Ke}}function Se(ct,ot){var xt=ct.geometry.coordinates,Bt=xt[1];return{x:ue(xt[0]),y:xe(Bt),zoom:1/0,index:ot,parentId:-1}}function ye(ct){return{type:"Feature",id:ct.id,properties:Oe(ct),geometry:{type:"Point",coordinates:[(Bt=ct.x,360*(Bt-.5)),(ot=ct.y,xt=(180-360*ot)*Math.PI/180,360*Math.atan(Math.exp(xt))/Math.PI-90)]}};var ot,xt,Bt}function Oe(ct){var ot=ct.numPoints,xt=ot>=1e4?Math.round(ot/1e3)+"k":ot>=1e3?Math.round(ot/100)/10+"k":ot;return Ae(Ae({},ct.properties),{cluster:!0,cluster_id:ct.id,point_count:ot,point_count_abbreviated:xt})}function ue(ct){return ct/360+.5}function xe(ct){var ot=Math.sin(ct*Math.PI/180),xt=.5-.25*Math.log((1+ot)/(1-ot))/Math.PI;return xt<0?0:xt>1?1:xt}function Ae(ct,ot){for(var xt in ot)ct[xt]=ot[xt];return ct}function pe(ct){return ct.x}function be(ct){return ct.y}function le(ct,ot,xt,Bt,Ke,lt){var mt=Ke-xt,qe=lt-Bt;if(mt!==0||qe!==0){var yt=((ct-xt)*mt+(ot-Bt)*qe)/(mt*mt+qe*qe);yt>1?(xt=Ke,Bt=lt):yt>0&&(xt+=mt*yt,Bt+=qe*yt)}return(mt=ct-xt)*mt+(qe=ot-Bt)*qe}function z(ct,ot,xt,Bt){var Ke={id:ct===void 0?null:ct,type:ot,geometry:xt,tags:Bt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(lt){var mt=lt.geometry,qe=lt.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")ae(lt,mt);else if(qe==="Polygon"||qe==="MultiLineString")for(var yt=0;yt<mt.length;yt++)ae(lt,mt[yt]);else if(qe==="MultiPolygon")for(yt=0;yt<mt.length;yt++)for(var qt=0;qt<mt[yt].length;qt++)ae(lt,mt[yt][qt])}(Ke),Ke}function ae(ct,ot){for(var xt=0;xt<ot.length;xt+=3)ct.minX=Math.min(ct.minX,ot[xt]),ct.minY=Math.min(ct.minY,ot[xt+1]),ct.maxX=Math.max(ct.maxX,ot[xt]),ct.maxY=Math.max(ct.maxY,ot[xt+1])}function V(ct,ot,xt,Bt){if(ot.geometry){var Ke=ot.geometry.coordinates,lt=ot.geometry.type,mt=Math.pow(xt.tolerance/((1<<xt.maxZoom)*xt.extent),2),qe=[],yt=ot.id;if(xt.promoteId?yt=ot.properties[xt.promoteId]:xt.generateId&&(yt=Bt||0),lt==="Point")re(Ke,qe);else if(lt==="MultiPoint")for(var qt=0;qt<Ke.length;qt++)re(Ke[qt],qe);else if(lt==="LineString")te(Ke,qe,mt,!1);else if(lt==="MultiLineString"){if(xt.lineMetrics){for(qt=0;qt<Ke.length;qt++)te(Ke[qt],qe=[],mt,!1),ct.push(z(yt,"LineString",qe,ot.properties));return}q(Ke,qe,mt,!1)}else if(lt==="Polygon")q(Ke,qe,mt,!0);else{if(lt!=="MultiPolygon"){if(lt==="GeometryCollection"){for(qt=0;qt<ot.geometry.geometries.length;qt++)V(ct,{id:yt,geometry:ot.geometry.geometries[qt],properties:ot.properties},xt,Bt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qt=0;qt<Ke.length;qt++){var Er=[];q(Ke[qt],Er,mt,!0),qe.push(Er)}}ct.push(z(yt,lt,qe,ot.properties))}}function re(ct,ot){ot.push(ve(ct[0])),ot.push(Me(ct[1])),ot.push(0)}function te(ct,ot,xt,Bt){for(var Ke,lt,mt=0,qe=0;qe<ct.length;qe++){var yt=ve(ct[qe][0]),qt=Me(ct[qe][1]);ot.push(yt),ot.push(qt),ot.push(0),qe>0&&(mt+=Bt?(Ke*qt-yt*lt)/2:Math.sqrt(Math.pow(yt-Ke,2)+Math.pow(qt-lt,2))),Ke=yt,lt=qt}var Er=ot.length-3;ot[2]=1,function Zr(Dr,Cr,mn,xn){for(var lr,An=xn,On=mn-Cr>>1,Mt=mn-Cr,er=Dr[Cr],$t=Dr[Cr+1],Tr=Dr[mn],Mr=Dr[mn+1],Hr=Cr+3;Hr<mn;Hr+=3){var wr=le(Dr[Hr],Dr[Hr+1],er,$t,Tr,Mr);if(wr>An)lr=Hr,An=wr;else if(wr===An){var Ur=Math.abs(Hr-On);Ur<Mt&&(lr=Hr,Mt=Ur)}}An>xn&&(lr-Cr>3&&Zr(Dr,Cr,lr,xn),Dr[lr+2]=An,mn-lr>3&&Zr(Dr,lr,mn,xn))}(ot,0,Er,xt),ot[Er+2]=1,ot.size=Math.abs(mt),ot.start=0,ot.end=ot.size}function q(ct,ot,xt,Bt){for(var Ke=0;Ke<ct.length;Ke++){var lt=[];te(ct[Ke],lt,xt,Bt),ot.push(lt)}}function ve(ct){return ct/360+.5}function Me(ct){var ot=Math.sin(ct*Math.PI/180),xt=.5-.25*Math.log((1+ot)/(1-ot))/Math.PI;return xt<0?0:xt>1?1:xt}function De(ct,ot,xt,Bt,Ke,lt,mt,qe){if(Bt/=ot,lt>=(xt/=ot)&&mt<Bt)return ct;if(mt<xt||lt>=Bt)return null;for(var yt=[],qt=0;qt<ct.length;qt++){var Er=ct[qt],Zr=Er.geometry,Dr=Er.type,Cr=Ke===0?Er.minX:Er.minY,mn=Ke===0?Er.maxX:Er.maxY;if(Cr>=xt&&mn<Bt)yt.push(Er);else if(!(mn<xt||Cr>=Bt)){var xn=[];if(Dr==="Point"||Dr==="MultiPoint")ze(Zr,xn,xt,Bt,Ke);else if(Dr==="LineString")We(Zr,xn,xt,Bt,Ke,!1,qe.lineMetrics);else if(Dr==="MultiLineString")$e(Zr,xn,xt,Bt,Ke,!1);else if(Dr==="Polygon")$e(Zr,xn,xt,Bt,Ke,!0);else if(Dr==="MultiPolygon")for(var lr=0;lr<Zr.length;lr++){var An=[];$e(Zr[lr],An,xt,Bt,Ke,!0),An.length&&xn.push(An)}if(xn.length){if(qe.lineMetrics&&Dr==="LineString"){for(lr=0;lr<xn.length;lr++)yt.push(z(Er.id,Dr,xn[lr],Er.tags));continue}Dr!=="LineString"&&Dr!=="MultiLineString"||(xn.length===1?(Dr="LineString",xn=xn[0]):Dr="MultiLineString"),Dr!=="Point"&&Dr!=="MultiPoint"||(Dr=xn.length===3?"Point":"MultiPoint"),yt.push(z(Er.id,Dr,xn,Er.tags))}}}return yt.length?yt:null}function ze(ct,ot,xt,Bt,Ke){for(var lt=0;lt<ct.length;lt+=3){var mt=ct[lt+Ke];mt>=xt&&mt<=Bt&&(ot.push(ct[lt]),ot.push(ct[lt+1]),ot.push(ct[lt+2]))}}function We(ct,ot,xt,Bt,Ke,lt,mt){for(var qe,yt,qt=He(ct),Er=Ke===0?Yt:rr,Zr=ct.start,Dr=0;Dr<ct.length-3;Dr+=3){var Cr=ct[Dr],mn=ct[Dr+1],xn=ct[Dr+2],lr=ct[Dr+3],An=ct[Dr+4],On=Ke===0?Cr:mn,Mt=Ke===0?lr:An,er=!1;mt&&(qe=Math.sqrt(Math.pow(Cr-lr,2)+Math.pow(mn-An,2))),On<xt?Mt>xt&&(yt=Er(qt,Cr,mn,lr,An,xt),mt&&(qt.start=Zr+qe*yt)):On>Bt?Mt<Bt&&(yt=Er(qt,Cr,mn,lr,An,Bt),mt&&(qt.start=Zr+qe*yt)):It(qt,Cr,mn,xn),Mt<xt&&On>=xt&&(yt=Er(qt,Cr,mn,lr,An,xt),er=!0),Mt>Bt&&On<=Bt&&(yt=Er(qt,Cr,mn,lr,An,Bt),er=!0),!lt&&er&&(mt&&(qt.end=Zr+qe*yt),ot.push(qt),qt=He(ct)),mt&&(Zr+=qe)}var $t=ct.length-3;Cr=ct[$t],mn=ct[$t+1],xn=ct[$t+2],(On=Ke===0?Cr:mn)>=xt&&On<=Bt&&It(qt,Cr,mn,xn),$t=qt.length-3,lt&&$t>=3&&(qt[$t]!==qt[0]||qt[$t+1]!==qt[1])&&It(qt,qt[0],qt[1],qt[2]),qt.length&&ot.push(qt)}function He(ct){var ot=[];return ot.size=ct.size,ot.start=ct.start,ot.end=ct.end,ot}function $e(ct,ot,xt,Bt,Ke,lt){for(var mt=0;mt<ct.length;mt++)We(ct[mt],ot,xt,Bt,Ke,lt,!1)}function It(ct,ot,xt,Bt){ct.push(ot),ct.push(xt),ct.push(Bt)}function Yt(ct,ot,xt,Bt,Ke,lt){var mt=(lt-ot)/(Bt-ot);return ct.push(lt),ct.push(xt+(Ke-xt)*mt),ct.push(1),mt}function rr(ct,ot,xt,Bt,Ke,lt){var mt=(lt-xt)/(Ke-xt);return ct.push(ot+(Bt-ot)*mt),ct.push(lt),ct.push(1),mt}function ir(ct,ot){for(var xt=[],Bt=0;Bt<ct.length;Bt++){var Ke,lt=ct[Bt],mt=lt.type;if(mt==="Point"||mt==="MultiPoint"||mt==="LineString")Ke=Br(lt.geometry,ot);else if(mt==="MultiLineString"||mt==="Polygon"){Ke=[];for(var qe=0;qe<lt.geometry.length;qe++)Ke.push(Br(lt.geometry[qe],ot))}else if(mt==="MultiPolygon")for(Ke=[],qe=0;qe<lt.geometry.length;qe++){for(var yt=[],qt=0;qt<lt.geometry[qe].length;qt++)yt.push(Br(lt.geometry[qe][qt],ot));Ke.push(yt)}xt.push(z(lt.id,mt,Ke,lt.tags))}return xt}function Br(ct,ot){var xt=[];xt.size=ct.size,ct.start!==void 0&&(xt.start=ct.start,xt.end=ct.end);for(var Bt=0;Bt<ct.length;Bt+=3)xt.push(ct[Bt]+ot,ct[Bt+1],ct[Bt+2]);return xt}function tr(ct,ot){if(ct.transformed)return ct;var xt,Bt,Ke,lt=1<<ct.z,mt=ct.x,qe=ct.y;for(xt=0;xt<ct.features.length;xt++){var yt=ct.features[xt],qt=yt.geometry,Er=yt.type;if(yt.geometry=[],Er===1)for(Bt=0;Bt<qt.length;Bt+=2)yt.geometry.push(ft(qt[Bt],qt[Bt+1],ot,lt,mt,qe));else for(Bt=0;Bt<qt.length;Bt++){var Zr=[];for(Ke=0;Ke<qt[Bt].length;Ke+=2)Zr.push(ft(qt[Bt][Ke],qt[Bt][Ke+1],ot,lt,mt,qe));yt.geometry.push(Zr)}}return ct.transformed=!0,ct}function ft(ct,ot,xt,Bt,Ke,lt){return[Math.round(xt*(ct*Bt-Ke)),Math.round(xt*(ot*Bt-lt))]}function st(ct,ot,xt,Bt,Ke){for(var lt=ot===Ke.maxZoom?0:Ke.tolerance/((1<<ot)*Ke.extent),mt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:xt,y:Bt,z:ot,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},qe=0;qe<ct.length;qe++){mt.numFeatures++,Tt(mt,ct[qe],lt,Ke);var yt=ct[qe].minX,qt=ct[qe].minY,Er=ct[qe].maxX,Zr=ct[qe].maxY;yt<mt.minX&&(mt.minX=yt),qt<mt.minY&&(mt.minY=qt),Er>mt.maxX&&(mt.maxX=Er),Zr>mt.maxY&&(mt.maxY=Zr)}return mt}function Tt(ct,ot,xt,Bt){var Ke=ot.geometry,lt=ot.type,mt=[];if(lt==="Point"||lt==="MultiPoint")for(var qe=0;qe<Ke.length;qe+=3)mt.push(Ke[qe]),mt.push(Ke[qe+1]),ct.numPoints++,ct.numSimplified++;else if(lt==="LineString")Qe(mt,Ke,ct,xt,!1,!1);else if(lt==="MultiLineString"||lt==="Polygon")for(qe=0;qe<Ke.length;qe++)Qe(mt,Ke[qe],ct,xt,lt==="Polygon",qe===0);else if(lt==="MultiPolygon")for(var yt=0;yt<Ke.length;yt++){var qt=Ke[yt];for(qe=0;qe<qt.length;qe++)Qe(mt,qt[qe],ct,xt,!0,qe===0)}if(mt.length){var Er=ot.tags||null;if(lt==="LineString"&&Bt.lineMetrics){for(var Zr in Er={},ot.tags)Er[Zr]=ot.tags[Zr];Er.mapbox_clip_start=Ke.start/Ke.size,Er.mapbox_clip_end=Ke.end/Ke.size}var Dr={geometry:mt,type:lt==="Polygon"||lt==="MultiPolygon"?3:lt==="LineString"||lt==="MultiLineString"?2:1,tags:Er};ot.id!==null&&(Dr.id=ot.id),ct.features.push(Dr)}}function Qe(ct,ot,xt,Bt,Ke,lt){var mt=Bt*Bt;if(Bt>0&&ot.size<(Ke?mt:Bt))xt.numPoints+=ot.length/3;else{for(var qe=[],yt=0;yt<ot.length;yt+=3)(Bt===0||ot[yt+2]>mt)&&(xt.numSimplified++,qe.push(ot[yt]),qe.push(ot[yt+1])),xt.numPoints++;Ke&&function(qt,Er){for(var Zr=0,Dr=0,Cr=qt.length,mn=Cr-2;Dr<Cr;mn=Dr,Dr+=2)Zr+=(qt[Dr]-qt[mn])*(qt[Dr+1]+qt[mn+1]);if(Zr>0===Er)for(Dr=0,Cr=qt.length;Dr<Cr/2;Dr+=2){var xn=qt[Dr],lr=qt[Dr+1];qt[Dr]=qt[Cr-2-Dr],qt[Dr+1]=qt[Cr-1-Dr],qt[Cr-2-Dr]=xn,qt[Cr-1-Dr]=lr}}(qe,lt),ct.push(qe)}}function it(ct,ot){var xt=(ot=this.options=function(Ke,lt){for(var mt in lt)Ke[mt]=lt[mt];return Ke}(Object.create(this.options),ot)).debug;if(xt&&console.time("preprocess data"),ot.maxZoom<0||ot.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ot.promoteId&&ot.generateId)throw new Error("promoteId and generateId cannot be used together.");var Bt=function(Ke,lt){var mt=[];if(Ke.type==="FeatureCollection")for(var qe=0;qe<Ke.features.length;qe++)V(mt,Ke.features[qe],lt,qe);else V(mt,Ke.type==="Feature"?Ke:{geometry:Ke},lt);return mt}(ct,ot);this.tiles={},this.tileCoords=[],xt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ot.indexMaxZoom,ot.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Bt=function(Ke,lt){var mt=lt.buffer/lt.extent,qe=Ke,yt=De(Ke,1,-1-mt,mt,0,-1,2,lt),qt=De(Ke,1,1-mt,2+mt,0,-1,2,lt);return(yt||qt)&&(qe=De(Ke,1,-mt,1+mt,0,-1,2,lt)||[],yt&&(qe=ir(yt,1).concat(qe)),qt&&(qe=qe.concat(ir(qt,-1)))),qe}(Bt,ot)).length&&this.splitTile(Bt,0,0,0),xt&&(Bt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function zt(ct,ot,xt){return 32*((1<<ct)*xt+ot)+ct}function Qt(ct,ot){var xt=ct.tileID.canonical;if(!this._geoJSONIndex)return ot(null,null);var Bt=this._geoJSONIndex.getTile(xt.z,xt.x,xt.y);if(!Bt)return ot(null,null);var Ke=new x(Bt.features),lt=w(Ke);lt.byteOffset===0&&lt.byteLength===lt.buffer.byteLength||(lt=new Uint8Array(lt)),ot(null,{vectorTile:Ke,rawData:lt.buffer})}rt.prototype.load=function(ct){var ot=this.options,xt=ot.log,Bt=ot.minZoom,Ke=ot.maxZoom,lt=ot.nodeSize;xt&&console.time("total time");var mt="prepare "+ct.length+" points";xt&&console.time(mt),this.points=ct;for(var qe=[],yt=0;yt<ct.length;yt++)ct[yt].geometry&&qe.push(Se(ct[yt],yt));this.trees[Ke+1]=new _e(qe,pe,be,lt,Float32Array),xt&&console.timeEnd(mt);for(var qt=Ke;qt>=Bt;qt--){var Er=+Date.now();qe=this._cluster(qe,qt),this.trees[qt]=new _e(qe,pe,be,lt,Float32Array),xt&&console.log("z%d: %d clusters in %dms",qt,qe.length,+Date.now()-Er)}return xt&&console.timeEnd("total time"),this},rt.prototype.getClusters=function(ct,ot){var xt=((ct[0]+180)%360+360)%360-180,Bt=Math.max(-90,Math.min(90,ct[1])),Ke=ct[2]===180?180:((ct[2]+180)%360+360)%360-180,lt=Math.max(-90,Math.min(90,ct[3]));if(ct[2]-ct[0]>=360)xt=-180,Ke=180;else if(xt>Ke){var mt=this.getClusters([xt,Bt,180,lt],ot),qe=this.getClusters([-180,Bt,Ke,lt],ot);return mt.concat(qe)}for(var yt=this.trees[this._limitZoom(ot)],qt=[],Er=0,Zr=yt.range(ue(xt),xe(lt),ue(Ke),xe(Bt));Er<Zr.length;Er+=1){var Dr=yt.points[Zr[Er]];qt.push(Dr.numPoints?ye(Dr):this.points[Dr.index])}return qt},rt.prototype.getChildren=function(ct){var ot=this._getOriginId(ct),xt=this._getOriginZoom(ct),Bt="No cluster with the specified id.",Ke=this.trees[xt];if(!Ke)throw new Error(Bt);var lt=Ke.points[ot];if(!lt)throw new Error(Bt);for(var mt=this.options.radius/(this.options.extent*Math.pow(2,xt-1)),qe=[],yt=0,qt=Ke.within(lt.x,lt.y,mt);yt<qt.length;yt+=1){var Er=Ke.points[qt[yt]];Er.parentId===ct&&qe.push(Er.numPoints?ye(Er):this.points[Er.index])}if(qe.length===0)throw new Error(Bt);return qe},rt.prototype.getLeaves=function(ct,ot,xt){var Bt=[];return this._appendLeaves(Bt,ct,ot=ot||10,xt=xt||0,0),Bt},rt.prototype.getTile=function(ct,ot,xt){var Bt=this.trees[this._limitZoom(ct)],Ke=Math.pow(2,ct),lt=this.options,mt=lt.radius/lt.extent,qe=(xt-mt)/Ke,yt=(xt+1+mt)/Ke,qt={features:[]};return this._addTileFeatures(Bt.range((ot-mt)/Ke,qe,(ot+1+mt)/Ke,yt),Bt.points,ot,xt,Ke,qt),ot===0&&this._addTileFeatures(Bt.range(1-mt/Ke,qe,1,yt),Bt.points,Ke,xt,Ke,qt),ot===Ke-1&&this._addTileFeatures(Bt.range(0,qe,mt/Ke,yt),Bt.points,-1,xt,Ke,qt),qt.features.length?qt:null},rt.prototype.getClusterExpansionZoom=function(ct){for(var ot=this._getOriginZoom(ct)-1;ot<=this.options.maxZoom;){var xt=this.getChildren(ct);if(ot++,xt.length!==1)break;ct=xt[0].properties.cluster_id}return ot},rt.prototype._appendLeaves=function(ct,ot,xt,Bt,Ke){for(var lt=0,mt=this.getChildren(ot);lt<mt.length;lt+=1){var qe=mt[lt],yt=qe.properties;if(yt&&yt.cluster?Ke+yt.point_count<=Bt?Ke+=yt.point_count:Ke=this._appendLeaves(ct,yt.cluster_id,xt,Bt,Ke):Ke<Bt?Ke++:ct.push(qe),ct.length===xt)break}return Ke},rt.prototype._addTileFeatures=function(ct,ot,xt,Bt,Ke,lt){for(var mt=0,qe=ct;mt<qe.length;mt+=1){var yt=ot[qe[mt]],qt=yt.numPoints,Er={type:1,geometry:[[Math.round(this.options.extent*(yt.x*Ke-xt)),Math.round(this.options.extent*(yt.y*Ke-Bt))]],tags:qt?Oe(yt):this.points[yt.index].properties},Zr=void 0;qt?Zr=yt.id:this.options.generateId?Zr=yt.index:this.points[yt.index].id&&(Zr=this.points[yt.index].id),Zr!==void 0&&(Er.id=Zr),lt.features.push(Er)}},rt.prototype._limitZoom=function(ct){return Math.max(this.options.minZoom,Math.min(+ct,this.options.maxZoom+1))},rt.prototype._cluster=function(ct,ot){for(var xt=[],Bt=this.options,Ke=Bt.reduce,lt=Bt.minPoints,mt=Bt.radius/(Bt.extent*Math.pow(2,ot)),qe=0;qe<ct.length;qe++){var yt=ct[qe];if(!(yt.zoom<=ot)){yt.zoom=ot;for(var qt=this.trees[ot+1],Er=qt.within(yt.x,yt.y,mt),Zr=yt.numPoints||1,Dr=Zr,Cr=0,mn=Er;Cr<mn.length;Cr+=1){var xn=qt.points[mn[Cr]];xn.zoom>ot&&(Dr+=xn.numPoints||1)}if(Dr>=lt){for(var lr=yt.x*Zr,An=yt.y*Zr,On=Ke&&Zr>1?this._map(yt,!0):null,Mt=(qe<<5)+(ot+1)+this.points.length,er=0,$t=Er;er<$t.length;er+=1){var Tr=qt.points[$t[er]];if(!(Tr.zoom<=ot)){Tr.zoom=ot;var Mr=Tr.numPoints||1;lr+=Tr.x*Mr,An+=Tr.y*Mr,Tr.parentId=Mt,Ke&&(On||(On=this._map(yt,!0)),Ke(On,this._map(Tr)))}}yt.parentId=Mt,xt.push(Fe(lr/Dr,An/Dr,Mt,Dr,On))}else if(xt.push(yt),Dr>1)for(var Hr=0,wr=Er;Hr<wr.length;Hr+=1){var Ur=qt.points[wr[Hr]];Ur.zoom<=ot||(Ur.zoom=ot,xt.push(Ur))}}}return xt},rt.prototype._getOriginId=function(ct){return ct-this.points.length>>5},rt.prototype._getOriginZoom=function(ct){return(ct-this.points.length)%32},rt.prototype._map=function(ct,ot){if(ct.numPoints)return ot?Ae({},ct.properties):ct.properties;var xt=this.points[ct.index].properties,Bt=this.options.map(xt);return ot&&Bt===xt?Ae({},Bt):Bt},it.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},it.prototype.splitTile=function(ct,ot,xt,Bt,Ke,lt,mt){for(var qe=[ct,ot,xt,Bt],yt=this.options,qt=yt.debug;qe.length;){Bt=qe.pop(),xt=qe.pop(),ot=qe.pop(),ct=qe.pop();var Er=1<<ot,Zr=zt(ot,xt,Bt),Dr=this.tiles[Zr];if(!Dr&&(qt>1&&console.time("creation"),Dr=this.tiles[Zr]=st(ct,ot,xt,Bt,yt),this.tileCoords.push({z:ot,x:xt,y:Bt}),qt)){qt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ot,xt,Bt,Dr.numFeatures,Dr.numPoints,Dr.numSimplified),console.timeEnd("creation"));var Cr="z"+ot;this.stats[Cr]=(this.stats[Cr]||0)+1,this.total++}if(Dr.source=ct,Ke){if(ot===yt.maxZoom||ot===Ke)continue;var mn=1<<Ke-ot;if(xt!==Math.floor(lt/mn)||Bt!==Math.floor(mt/mn))continue}else if(ot===yt.indexMaxZoom||Dr.numPoints<=yt.indexMaxPoints)continue;if(Dr.source=null,ct.length!==0){qt>1&&console.time("clipping");var xn,lr,An,On,Mt,er,$t=.5*yt.buffer/yt.extent,Tr=.5-$t,Mr=.5+$t,Hr=1+$t;xn=lr=An=On=null,Mt=De(ct,Er,xt-$t,xt+Mr,0,Dr.minX,Dr.maxX,yt),er=De(ct,Er,xt+Tr,xt+Hr,0,Dr.minX,Dr.maxX,yt),ct=null,Mt&&(xn=De(Mt,Er,Bt-$t,Bt+Mr,1,Dr.minY,Dr.maxY,yt),lr=De(Mt,Er,Bt+Tr,Bt+Hr,1,Dr.minY,Dr.maxY,yt),Mt=null),er&&(An=De(er,Er,Bt-$t,Bt+Mr,1,Dr.minY,Dr.maxY,yt),On=De(er,Er,Bt+Tr,Bt+Hr,1,Dr.minY,Dr.maxY,yt),er=null),qt>1&&console.timeEnd("clipping"),qe.push(xn||[],ot+1,2*xt,2*Bt),qe.push(lr||[],ot+1,2*xt,2*Bt+1),qe.push(An||[],ot+1,2*xt+1,2*Bt),qe.push(On||[],ot+1,2*xt+1,2*Bt+1)}}},it.prototype.getTile=function(ct,ot,xt){var Bt=this.options,Ke=Bt.extent,lt=Bt.debug;if(ct<0||ct>24)return null;var mt=1<<ct,qe=zt(ct,ot=(ot%mt+mt)%mt,xt);if(this.tiles[qe])return tr(this.tiles[qe],Ke);lt>1&&console.log("drilling down to z%d-%d-%d",ct,ot,xt);for(var yt,qt=ct,Er=ot,Zr=xt;!yt&&qt>0;)qt--,Er=Math.floor(Er/2),Zr=Math.floor(Zr/2),yt=this.tiles[zt(qt,Er,Zr)];return yt&&yt.source?(lt>1&&console.log("found parent tile z%d-%d-%d",qt,Er,Zr),lt>1&&console.time("drilling down"),this.splitTile(yt.source,qt,Er,Zr,ct,ot,xt),lt>1&&console.timeEnd("drilling down"),this.tiles[qe]?tr(this.tiles[qe],Ke):null):null};var Ar=function(ct){function ot(xt,Bt,Ke,lt){ct.call(this,xt,Bt,Ke,Qt),lt&&(this.loadGeoJSON=lt)}return ct&&(ot.__proto__=ct),(ot.prototype=Object.create(ct&&ct.prototype)).constructor=ot,ot.prototype.loadData=function(xt,Bt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Bt,this._pendingLoadDataParams=xt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ot.prototype._loadData=function(){var xt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Bt=this._pendingCallback,Ke=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var lt=!!(Ke&&Ke.request&&Ke.request.collectResourceTiming)&&new e.RequestPerformance(Ke.request);this.loadGeoJSON(Ke,function(mt,qe){if(mt||!qe)return Bt(mt);if(typeof qe!="object")return Bt(new Error("Input data given to '"+Ke.source+"' is not a valid GeoJSON object."));(function Dr(Cr,mn){var xn,lr=Cr&&Cr.type;if(lr==="FeatureCollection")for(xn=0;xn<Cr.features.length;xn++)Dr(Cr.features[xn],mn);else if(lr==="GeometryCollection")for(xn=0;xn<Cr.geometries.length;xn++)Dr(Cr.geometries[xn],mn);else if(lr==="Feature")Dr(Cr.geometry,mn);else if(lr==="Polygon")u(Cr.coordinates,mn);else if(lr==="MultiPolygon")for(xn=0;xn<Cr.coordinates.length;xn++)u(Cr.coordinates[xn],mn);return Cr})(qe,!0);try{if(Ke.filter){var yt=e.createExpression(Ke.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(yt.result==="error")throw new Error(yt.value.map(function(Dr){return Dr.key+": "+Dr.message}).join(", "));var qt=qe.features.filter(function(Dr){return yt.value.evaluate({zoom:0},Dr)});qe={type:"FeatureCollection",features:qt}}xt._geoJSONIndex=Ke.cluster?new rt(function(Dr){var Cr=Dr.superclusterOptions,mn=Dr.clusterProperties;if(!mn||!Cr)return Cr;for(var xn={},lr={},An={accumulated:null,zoom:0},On={properties:null},Mt=Object.keys(mn),er=0,$t=Mt;er<$t.length;er+=1){var Tr=$t[er],Mr=mn[Tr],Hr=Mr[0],wr=e.createExpression(Mr[1]),Ur=e.createExpression(typeof Hr=="string"?[Hr,["accumulated"],["get",Tr]]:Hr);xn[Tr]=wr.value,lr[Tr]=Ur.value}return Cr.map=function(fn){On.properties=fn;for(var tn={},Rr=0,Nn=Mt;Rr<Nn.length;Rr+=1){var En=Nn[Rr];tn[En]=xn[En].evaluate(An,On)}return tn},Cr.reduce=function(fn,tn){On.properties=tn;for(var Rr=0,Nn=Mt;Rr<Nn.length;Rr+=1){var En=Nn[Rr];An.accumulated=fn[En],fn[En]=lr[En].evaluate(An,On)}},Cr}(Ke)).load(qe.features):function(Dr,Cr){return new it(Dr,Cr)}(qe,Ke.geojsonVtOptions)}catch(Dr){return Bt(Dr)}xt.loaded={};var Er={};if(lt){var Zr=lt.finish();Zr&&(Er.resourceTiming={},Er.resourceTiming[Ke.source]=JSON.parse(JSON.stringify(Zr)))}Bt(null,Er)})}},ot.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ot.prototype.reloadTile=function(xt,Bt){var Ke=this.loaded;return Ke&&Ke[xt.uid]?ct.prototype.reloadTile.call(this,xt,Bt):this.loadTile(xt,Bt)},ot.prototype.loadGeoJSON=function(xt,Bt){if(xt.request)e.getJSON(xt.request,Bt);else{if(typeof xt.data!="string")return Bt(new Error("Input data given to '"+xt.source+"' is not a valid GeoJSON object."));try{return Bt(null,JSON.parse(xt.data))}catch(Ke){return Bt(new Error("Input data given to '"+xt.source+"' is not a valid GeoJSON object."))}}},ot.prototype.removeSource=function(xt,Bt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Bt()},ot.prototype.getClusterExpansionZoom=function(xt,Bt){try{Bt(null,this._geoJSONIndex.getClusterExpansionZoom(xt.clusterId))}catch(Ke){Bt(Ke)}},ot.prototype.getClusterChildren=function(xt,Bt){try{Bt(null,this._geoJSONIndex.getChildren(xt.clusterId))}catch(Ke){Bt(Ke)}},ot.prototype.getClusterLeaves=function(xt,Bt){try{Bt(null,this._geoJSONIndex.getLeaves(xt.clusterId,xt.limit,xt.offset))}catch(Ke){Bt(Ke)}},ot}(n),zr=function(ot){var xt=this;this.self=ot,this.actor=new e.Actor(ot,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ar},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Bt,Ke){if(xt.workerSourceTypes[Bt])throw new Error('Worker source with name "'+Bt+'" already registered.');xt.workerSourceTypes[Bt]=Ke},this.self.registerRTLTextPlugin=function(Bt){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Bt.applyArabicShaping,e.plugin.processBidirectionalText=Bt.processBidirectionalText,e.plugin.processStyledBidirectionalText=Bt.processStyledBidirectionalText}};return zr.prototype.setReferrer=function(ct,ot){this.referrer=ot},zr.prototype.setImages=function(ct,ot,xt){for(var Bt in this.availableImages[ct]=ot,this.workerSources[ct]){var Ke=this.workerSources[ct][Bt];for(var lt in Ke)Ke[lt].availableImages=ot}xt()},zr.prototype.setLayers=function(ct,ot,xt){this.getLayerIndex(ct).replace(ot),xt()},zr.prototype.updateLayers=function(ct,ot,xt){this.getLayerIndex(ct).update(ot.layers,ot.removedIds),xt()},zr.prototype.loadTile=function(ct,ot,xt){this.getWorkerSource(ct,ot.type,ot.source).loadTile(ot,xt)},zr.prototype.loadDEMTile=function(ct,ot,xt){this.getDEMWorkerSource(ct,ot.source).loadTile(ot,xt)},zr.prototype.reloadTile=function(ct,ot,xt){this.getWorkerSource(ct,ot.type,ot.source).reloadTile(ot,xt)},zr.prototype.abortTile=function(ct,ot,xt){this.getWorkerSource(ct,ot.type,ot.source).abortTile(ot,xt)},zr.prototype.removeTile=function(ct,ot,xt){this.getWorkerSource(ct,ot.type,ot.source).removeTile(ot,xt)},zr.prototype.removeDEMTile=function(ct,ot){this.getDEMWorkerSource(ct,ot.source).removeTile(ot)},zr.prototype.removeSource=function(ct,ot,xt){if(this.workerSources[ct]&&this.workerSources[ct][ot.type]&&this.workerSources[ct][ot.type][ot.source]){var Bt=this.workerSources[ct][ot.type][ot.source];delete this.workerSources[ct][ot.type][ot.source],Bt.removeSource!==void 0?Bt.removeSource(ot,xt):xt()}},zr.prototype.loadWorkerSource=function(ct,ot,xt){try{this.self.importScripts(ot.url),xt()}catch(Bt){xt(Bt.toString())}},zr.prototype.syncRTLPluginState=function(ct,ot,xt){try{e.plugin.setState(ot);var Bt=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Bt!=null){this.self.importScripts(Bt);var Ke=e.plugin.isParsed();xt(Ke?void 0:new Error("RTL Text Plugin failed to import scripts from "+Bt),Ke)}}catch(lt){xt(lt.toString())}},zr.prototype.getAvailableImages=function(ct){var ot=this.availableImages[ct];return ot||(ot=[]),ot},zr.prototype.getLayerIndex=function(ct){var ot=this.layerIndexes[ct];return ot||(ot=this.layerIndexes[ct]=new p),ot},zr.prototype.getWorkerSource=function(ct,ot,xt){var Bt=this;return this.workerSources[ct]||(this.workerSources[ct]={}),this.workerSources[ct][ot]||(this.workerSources[ct][ot]={}),this.workerSources[ct][ot][xt]||(this.workerSources[ct][ot][xt]=new this.workerSourceTypes[ot]({send:function(lt,mt,qe){Bt.actor.send(lt,mt,qe,ct)}},this.getLayerIndex(ct),this.getAvailableImages(ct))),this.workerSources[ct][ot][xt]},zr.prototype.getDEMWorkerSource=function(ct,ot){return this.demWorkerSources[ct]||(this.demWorkerSources[ct]={}),this.demWorkerSources[ct][ot]||(this.demWorkerSources[ct][ot]=new f),this.demWorkerSources[ct][ot]},zr.prototype.enforceCacheSizeLimit=function(ct,ot){e.enforceCacheSizeLimit(ot)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new zr(self)),zr}),o(["./shared"],function(e){"use strict";var g=e.createCommonjsModule(function(X){function k(G){return!F(G)}function F(G){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ce,fe,Pe=new Blob([""],{type:"text/javascript"}),Ie=URL.createObjectURL(Pe);try{fe=new Worker(Ie),ce=!0}catch(ke){ce=!1}return fe&&fe.terminate(),URL.revokeObjectURL(Ie),ce}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ce=document.createElement("canvas");ce.width=ce.height=1;var fe=ce.getContext("2d");if(!fe)return!1;var Pe=fe.getImageData(0,0,1,1);return Pe&&Pe.width===ce.width}()?($[ee=G&&G.failIfMajorPerformanceCaveat]===void 0&&($[ee]=function(ce){var fe=function(Ie){var ke=document.createElement("canvas"),Ge=Object.create(k.webGLContextAttributes);return Ge.failIfMajorPerformanceCaveat=Ie,ke.probablySupportsContext?ke.probablySupportsContext("webgl",Ge)||ke.probablySupportsContext("experimental-webgl",Ge):ke.supportsContext?ke.supportsContext("webgl",Ge)||ke.supportsContext("experimental-webgl",Ge):ke.getContext("webgl",Ge)||ke.getContext("experimental-webgl",Ge)}(ce);if(!fe)return!1;var Pe=fe.createShader(fe.VERTEX_SHADER);return!(!Pe||fe.isContextLost())&&(fe.shaderSource(Pe,"void main() {}"),fe.compileShader(Pe),fe.getShaderParameter(Pe,fe.COMPILE_STATUS)===!0)}(ee)),$[ee]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ee}X.exports?X.exports=k:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=k,window.mapboxgl.notSupportedReason=F);var $={};k.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),v={create:function(k,F,$){var G=e.window.document.createElement(k);return F!==void 0&&(G.className=F),$&&$.appendChild(G),G},createNS:function(k,F){return e.window.document.createElementNS(k,F)}},p=e.window.document&&e.window.document.documentElement.style;function c(X){if(!p)return X[0];for(var k=0;k<X.length;k++)if(X[k]in p)return X[k];return X[0]}var h,i=c(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);v.disableDrag=function(){p&&i&&(h=p[i],p[i]="none")},v.enableDrag=function(){p&&i&&(p[i]=h)};var r=c(["transform","WebkitTransform"]);v.setTransform=function(X,k){X.style[r]=k};var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});e.window.addEventListener("test",s,s),e.window.removeEventListener("test",s,s)}catch(X){n=!1}v.addEventListener=function(X,k,F,$){$===void 0&&($={}),X.addEventListener(k,F,"passive"in $&&n?$:$.capture)},v.removeEventListener=function(X,k,F,$){$===void 0&&($={}),X.removeEventListener(k,F,"passive"in $&&n?$:$.capture)};var f=function X(k){k.preventDefault(),k.stopPropagation(),e.window.removeEventListener("click",X,!0)};function u(X){var k=X.userImage;return!!(k&&k.render&&k.render())&&(X.data.replace(new Uint8Array(k.data.buffer)),!0)}v.suppressClick=function(){e.window.addEventListener("click",f,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",f,!0)},0)},v.mousePos=function(X,k){var F=X.getBoundingClientRect();return new e.Point(k.clientX-F.left-X.clientLeft,k.clientY-F.top-X.clientTop)},v.touchPos=function(X,k){for(var F=X.getBoundingClientRect(),$=[],G=0;G<k.length;G++)$.push(new e.Point(k[G].clientX-F.left-X.clientLeft,k[G].clientY-F.top-X.clientTop));return $},v.mouseButton=function(X){return e.window.InstallTrigger!==void 0&&X.button===2&&X.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:X.button},v.remove=function(X){X.parentNode&&X.parentNode.removeChild(X)};var d=function(X){function k(){X.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.isLoaded=function(){return this.loaded},k.prototype.setLoaded=function(F){if(this.loaded!==F&&(this.loaded=F,F)){for(var $=0,G=this.requestors;$<G.length;$+=1){var ee=G[$];this._notify(ee.ids,ee.callback)}this.requestors=[]}},k.prototype.getImage=function(F){return this.images[F]},k.prototype.addImage=function(F,$){this._validate(F,$)&&(this.images[F]=$)},k.prototype._validate=function(F,$){var G=!0;return this._validateStretch($.stretchX,$.data&&$.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchX" value'))),G=!1),this._validateStretch($.stretchY,$.data&&$.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchY" value'))),G=!1),this._validateContent($.content,$)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "content" value'))),G=!1),G},k.prototype._validateStretch=function(F,$){if(!F)return!0;for(var G=0,ee=0,ce=F;ee<ce.length;ee+=1){var fe=ce[ee];if(fe[0]<G||fe[1]<fe[0]||$<fe[1])return!1;G=fe[1]}return!0},k.prototype._validateContent=function(F,$){return!(F&&(F.length!==4||F[0]<0||$.data.width<F[0]||F[1]<0||$.data.height<F[1]||F[2]<0||$.data.width<F[2]||F[3]<0||$.data.height<F[3]||F[2]<F[0]||F[3]<F[1]))},k.prototype.updateImage=function(F,$){$.version=this.images[F].version+1,this.images[F]=$,this.updatedImages[F]=!0},k.prototype.removeImage=function(F){var $=this.images[F];delete this.images[F],delete this.patterns[F],$.userImage&&$.userImage.onRemove&&$.userImage.onRemove()},k.prototype.listImages=function(){return Object.keys(this.images)},k.prototype.getImages=function(F,$){var G=!0;if(!this.isLoaded())for(var ee=0,ce=F;ee<ce.length;ee+=1)this.images[ce[ee]]||(G=!1);this.isLoaded()||G?this._notify(F,$):this.requestors.push({ids:F,callback:$})},k.prototype._notify=function(F,$){for(var G={},ee=0,ce=F;ee<ce.length;ee+=1){var fe=ce[ee];this.images[fe]||this.fire(new e.Event("styleimagemissing",{id:fe}));var Pe=this.images[fe];Pe?G[fe]={data:Pe.data.clone(),pixelRatio:Pe.pixelRatio,sdf:Pe.sdf,version:Pe.version,stretchX:Pe.stretchX,stretchY:Pe.stretchY,content:Pe.content,hasRenderCallback:Boolean(Pe.userImage&&Pe.userImage.render)}:e.warnOnce('Image "'+fe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}$(null,G)},k.prototype.getPixelSize=function(){var F=this.atlasImage;return{width:F.width,height:F.height}},k.prototype.getPattern=function(F){var $=this.patterns[F],G=this.getImage(F);if(!G)return null;if($&&$.position.version===G.version)return $.position;if($)$.position.version=G.version;else{var ee={w:G.data.width+2,h:G.data.height+2,x:0,y:0},ce=new e.ImagePosition(ee,G);this.patterns[F]={bin:ee,position:ce}}return this._updatePatternAtlas(),this.patterns[F].position},k.prototype.bind=function(F){var $=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(F,this.atlasImage,$.RGBA),this.atlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE)},k.prototype._updatePatternAtlas=function(){var F=[];for(var $ in this.patterns)F.push(this.patterns[$].bin);var G=e.potpack(F),ee=G.w,ce=G.h,fe=this.atlasImage;for(var Pe in fe.resize({width:ee||1,height:ce||1}),this.patterns){var Ie=this.patterns[Pe].bin,ke=Ie.x+1,Ge=Ie.y+1,Je=this.images[Pe].data,vt=Je.width,_t=Je.height;e.RGBAImage.copy(Je,fe,{x:0,y:0},{x:ke,y:Ge},{width:vt,height:_t}),e.RGBAImage.copy(Je,fe,{x:0,y:_t-1},{x:ke,y:Ge-1},{width:vt,height:1}),e.RGBAImage.copy(Je,fe,{x:0,y:0},{x:ke,y:Ge+_t},{width:vt,height:1}),e.RGBAImage.copy(Je,fe,{x:vt-1,y:0},{x:ke-1,y:Ge},{width:1,height:_t}),e.RGBAImage.copy(Je,fe,{x:0,y:0},{x:ke+vt,y:Ge},{width:1,height:_t})}this.dirty=!0},k.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},k.prototype.dispatchRenderCallbacks=function(F){for(var $=0,G=F;$<G.length;$+=1){var ee=G[$];if(!this.callbackDispatchedThisFrame[ee]){this.callbackDispatchedThisFrame[ee]=!0;var ce=this.images[ee];u(ce)&&this.updateImage(ee,ce)}}},k}(e.Evented),b=M,_=M,x=1e20;function M(X,k,F,$,G,ee){this.fontSize=X||24,this.buffer=k===void 0?3:k,this.cutoff=$||.25,this.fontFamily=G||"sans-serif",this.fontWeight=ee||"normal",this.radius=F||8;var ce=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ce,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ce*ce),this.gridInner=new Float64Array(ce*ce),this.f=new Float64Array(ce),this.d=new Float64Array(ce),this.z=new Float64Array(ce+1),this.v=new Int16Array(ce),this.middle=Math.round(ce/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function P(X,k,F,$,G,ee,ce){for(var fe=0;fe<k;fe++){for(var Pe=0;Pe<F;Pe++)$[Pe]=X[Pe*k+fe];for(C($,G,ee,ce,F),Pe=0;Pe<F;Pe++)X[Pe*k+fe]=G[Pe]}for(Pe=0;Pe<F;Pe++){for(fe=0;fe<k;fe++)$[fe]=X[Pe*k+fe];for(C($,G,ee,ce,k),fe=0;fe<k;fe++)X[Pe*k+fe]=Math.sqrt(G[fe])}}function C(X,k,F,$,G){F[0]=0,$[0]=-x,$[1]=+x;for(var ee=1,ce=0;ee<G;ee++){for(var fe=(X[ee]+ee*ee-(X[F[ce]]+F[ce]*F[ce]))/(2*ee-2*F[ce]);fe<=$[ce];)ce--,fe=(X[ee]+ee*ee-(X[F[ce]]+F[ce]*F[ce]))/(2*ee-2*F[ce]);F[++ce]=ee,$[ce]=fe,$[ce+1]=+x}for(ee=0,ce=0;ee<G;ee++){for(;$[ce+1]<ee;)ce++;k[ee]=(ee-F[ce])*(ee-F[ce])+X[F[ce]]}}M.prototype.draw=function(X){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(X,this.buffer,this.middle);for(var k=this.ctx.getImageData(0,0,this.size,this.size),F=new Uint8ClampedArray(this.size*this.size),$=0;$<this.size*this.size;$++){var G=k.data[4*$+3]/255;this.gridOuter[$]=G===1?0:G===0?x:Math.pow(Math.max(0,.5-G),2),this.gridInner[$]=G===1?x:G===0?0:Math.pow(Math.max(0,G-.5),2)}for(P(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),P(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),$=0;$<this.size*this.size;$++)F[$]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[$]-this.gridInner[$])/this.radius+this.cutoff))));return F},b.default=_;var O=function(k,F){this.requestManager=k,this.localIdeographFontFamily=F,this.entries={}};O.prototype.setURL=function(X){this.url=X},O.prototype.getGlyphs=function(X,k){var F=this,$=[];for(var G in X)for(var ee=0,ce=X[G];ee<ce.length;ee+=1)$.push({stack:G,id:ce[ee]});e.asyncAll($,function(fe,Pe){var Ie=fe.stack,ke=fe.id,Ge=F.entries[Ie];Ge||(Ge=F.entries[Ie]={glyphs:{},requests:{},ranges:{}});var Je=Ge.glyphs[ke];if(Je===void 0){if(Je=F._tinySDF(Ge,Ie,ke))return Ge.glyphs[ke]=Je,void Pe(null,{stack:Ie,id:ke,glyph:Je});var vt=Math.floor(ke/256);if(256*vt>65535)Pe(new Error("glyphs > 65535 not supported"));else if(Ge.ranges[vt])Pe(null,{stack:Ie,id:ke,glyph:Je});else{var _t=Ge.requests[vt];_t||(_t=Ge.requests[vt]=[],O.loadGlyphRange(Ie,vt,F.url,F.requestManager,function(Rt,Pt){if(Pt){for(var Gt in Pt)F._doesCharSupportLocalGlyph(+Gt)||(Ge.glyphs[+Gt]=Pt[+Gt]);Ge.ranges[vt]=!0}for(var ur=0,hr=_t;ur<hr.length;ur+=1)(0,hr[ur])(Rt,Pt);delete Ge.requests[vt]})),_t.push(function(Rt,Pt){Rt?Pe(Rt):Pt&&Pe(null,{stack:Ie,id:ke,glyph:Pt[ke]||null})})}}else Pe(null,{stack:Ie,id:ke,glyph:Je})},function(fe,Pe){if(fe)k(fe);else if(Pe){for(var Ie={},ke=0,Ge=Pe;ke<Ge.length;ke+=1){var Je=Ge[ke],vt=Je.stack,_t=Je.id,Rt=Je.glyph;(Ie[vt]||(Ie[vt]={}))[_t]=Rt&&{id:Rt.id,bitmap:Rt.bitmap.clone(),metrics:Rt.metrics}}k(null,Ie)}})},O.prototype._doesCharSupportLocalGlyph=function(X){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](X)||e.isChar["Hangul Syllables"](X)||e.isChar.Hiragana(X)||e.isChar.Katakana(X))},O.prototype._tinySDF=function(X,k,F){var $=this.localIdeographFontFamily;if($&&this._doesCharSupportLocalGlyph(F)){var G=X.tinySDF;if(!G){var ee="400";/bold/i.test(k)?ee="900":/medium/i.test(k)?ee="500":/light/i.test(k)&&(ee="200"),G=X.tinySDF=new O.TinySDF(24,3,8,.25,$,ee)}return{id:F,bitmap:new e.AlphaImage({width:30,height:30},G.draw(String.fromCharCode(F))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},O.loadGlyphRange=function(X,k,F,$,G){var ee=256*k,ce=ee+255,fe=$.transformRequest($.normalizeGlyphsURL(F).replace("{fontstack}",X).replace("{range}",ee+"-"+ce),e.ResourceType.Glyphs);e.getArrayBuffer(fe,function(Pe,Ie){if(Pe)G(Pe);else if(Ie){for(var ke={},Ge=0,Je=e.parseGlyphPBF(Ie);Ge<Je.length;Ge+=1){var vt=Je[Ge];ke[vt.id]=vt}G(null,ke)}})},O.TinySDF=b;var w=function(){this.specification=e.styleSpec.light.position};w.prototype.possiblyEvaluate=function(X,k){return e.sphericalToCartesian(X.expression.evaluate(k))},w.prototype.interpolate=function(X,k,F){return{x:e.number(X.x,k.x,F),y:e.number(X.y,k.y,F),z:e.number(X.z,k.z,F)}};var S=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new w,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),I=function(X){function k(F){X.call(this),this._transitionable=new e.Transitionable(S),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getLight=function(){return this._transitionable.serialize()},k.prototype.setLight=function(F,$){if($===void 0&&($={}),!this._validate(e.validateLight,F,$))for(var G in F){var ee=F[G];e.endsWith(G,"-transition")?this._transitionable.setTransition(G.slice(0,-"-transition".length),ee):this._transitionable.setValue(G,ee)}},k.prototype.updateTransitions=function(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)},k.prototype.hasTransition=function(){return this._transitioning.hasTransition()},k.prototype.recalculate=function(F){this.properties=this._transitioning.possiblyEvaluate(F)},k.prototype._validate=function(F,$,G){return(!G||G.validate!==!1)&&e.emitValidationErrors(this,F.call(e.validateStyle,e.extend({value:$,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},k}(e.Evented),j=function(k,F){this.width=k,this.height=F,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};j.prototype.getDash=function(X,k){var F=X.join(",")+String(k);return this.dashEntry[F]||(this.dashEntry[F]=this.addDash(X,k)),this.dashEntry[F]},j.prototype.getDashRanges=function(X,k,F){var $=[],G=X.length%2==1?-X[X.length-1]*F:0,ee=X[0]*F,ce=!0;$.push({left:G,right:ee,isDash:ce,zeroLength:X[0]===0});for(var fe=X[0],Pe=1;Pe<X.length;Pe++){var Ie=X[Pe];$.push({left:G=fe*F,right:ee=(fe+=Ie)*F,isDash:ce=!ce,zeroLength:Ie===0})}return $},j.prototype.addRoundDash=function(X,k,F){for(var $=k/2,G=-F;G<=F;G++)for(var ee=this.width*(this.nextRow+F+G),ce=0,fe=X[ce],Pe=0;Pe<this.width;Pe++){Pe/fe.right>1&&(fe=X[++ce]);var Ie=Math.abs(Pe-fe.left),ke=Math.abs(Pe-fe.right),Ge=Math.min(Ie,ke),Je=void 0,vt=G/F*($+1);if(fe.isDash){var _t=$-Math.abs(vt);Je=Math.sqrt(Ge*Ge+_t*_t)}else Je=$-Math.sqrt(Ge*Ge+vt*vt);this.data[ee+Pe]=Math.max(0,Math.min(255,Je+128))}},j.prototype.addRegularDash=function(X){for(var k=X.length-1;k>=0;--k){var F=X[k],$=X[k+1];F.zeroLength?X.splice(k,1):$&&$.isDash===F.isDash&&($.left=F.left,X.splice(k,1))}var G=X[0],ee=X[X.length-1];G.isDash===ee.isDash&&(G.left=ee.left-this.width,ee.right=G.right+this.width);for(var ce=this.width*this.nextRow,fe=0,Pe=X[fe],Ie=0;Ie<this.width;Ie++){Ie/Pe.right>1&&(Pe=X[++fe]);var ke=Math.abs(Ie-Pe.left),Ge=Math.abs(Ie-Pe.right),Je=Math.min(ke,Ge);this.data[ce+Ie]=Math.max(0,Math.min(255,(Pe.isDash?Je:-Je)+128))}},j.prototype.addDash=function(X,k){var F=k?7:0,$=2*F+1;if(this.nextRow+$>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var G=0,ee=0;ee<X.length;ee++)G+=X[ee];if(G!==0){var ce=this.width/G,fe=this.getDashRanges(X,this.width,ce);k?this.addRoundDash(fe,ce,F):this.addRegularDash(fe)}var Pe={y:(this.nextRow+F+.5)/this.height,height:2*F/this.height,width:G};return this.nextRow+=$,this.dirty=!0,Pe},j.prototype.bind=function(X){var k=X.gl;this.texture?(k.bindTexture(k.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,k.texSubImage2D(k.TEXTURE_2D,0,0,0,this.width,this.height,k.ALPHA,k.UNSIGNED_BYTE,this.data))):(this.texture=k.createTexture(),k.bindTexture(k.TEXTURE_2D,this.texture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR),k.texImage2D(k.TEXTURE_2D,0,k.ALPHA,this.width,this.height,0,k.ALPHA,k.UNSIGNED_BYTE,this.data))};var N=function X(k,F){this.workerPool=k,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var $=this.workerPool.acquire(this.id),G=0;G<$.length;G++){var ee=new X.Actor($[G],F,this.id);ee.name="Worker "+G,this.actors.push(ee)}};function W(X,k,F){var $=function(ee,ce){if(ee)return F(ee);if(ce){var fe=e.pick(e.extend(ce,X),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ce.vector_layers&&(fe.vectorLayers=ce.vector_layers,fe.vectorLayerIds=fe.vectorLayers.map(function(Pe){return Pe.id})),fe.tiles=k.canonicalizeTileset(fe,X.url),F(null,fe)}};return X.url?e.getJSON(k.transformRequest(k.normalizeSourceURL(X.url),e.ResourceType.Source),$):e.browser.frame(function(){return $(null,X)})}N.prototype.broadcast=function(X,k,F){e.asyncAll(this.actors,function($,G){$.send(X,k,G)},F=F||function(){})},N.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},N.prototype.remove=function(){this.actors.forEach(function(X){X.remove()}),this.actors=[],this.workerPool.release(this.id)},N.Actor=e.Actor;var H=function(k,F,$){this.bounds=e.LngLatBounds.convert(this.validateBounds(k)),this.minzoom=F||0,this.maxzoom=$||24};H.prototype.validateBounds=function(X){return Array.isArray(X)&&X.length===4?[Math.max(-180,X[0]),Math.max(-90,X[1]),Math.min(180,X[2]),Math.min(90,X[3])]:[-180,-90,180,90]},H.prototype.contains=function(X){var k=Math.pow(2,X.z),F=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*k),$=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*k),G=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*k),ee=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*k);return X.x>=F&&X.x<G&&X.y>=$&&X.y<ee};var J=function(X){function k(F,$,G,ee){if(X.call(this),this.id=F,this.dispatcher=G,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick($,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},$),this._collectResourceTiming=$.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ee)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,function($,G){F._tileJSONRequest=null,F._loaded=!0,$?F.fire(new e.ErrorEvent($)):G&&(e.extend(F,G),G.bounds&&(F.tileBounds=new H(G.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(G.tiles,F.map._requestManager._customAccessToken),e.postMapLoadEvent(G.tiles,F.map._getMapId(),F.map._requestManager._skuToken,F.map._requestManager._customAccessToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},k.prototype.loaded=function(){return this._loaded},k.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},k.prototype.onAdd=function(F){this.map=F,this.load()},k.prototype.setSourceProperty=function(F){this._tileJSONRequest&&this._tileJSONRequest.cancel(),F(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},k.prototype.setTiles=function(F){var $=this;return this.setSourceProperty(function(){$._options.tiles=F}),this},k.prototype.setUrl=function(F){var $=this;return this.setSourceProperty(function(){$.url=F,$._options.url=F}),this},k.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},k.prototype.serialize=function(){return e.extend({},this._options)},k.prototype.loadTile=function(F,$){var G=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme)),ee={request:this.map._requestManager.transformRequest(G,e.ResourceType.Tile),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ce(fe,Pe){return delete F.request,F.aborted?$(null):fe&&fe.status!==404?$(fe):(Pe&&Pe.resourceTiming&&(F.resourceTiming=Pe.resourceTiming),this.map._refreshExpiredTiles&&Pe&&F.setExpiryData(Pe),F.loadVectorData(Pe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),$(null),void(F.reloadCallback&&(this.loadTile(F,F.reloadCallback),F.reloadCallback=null)))}ee.request.collectResourceTiming=this._collectResourceTiming,F.actor&&F.state!=="expired"?F.state==="loading"?F.reloadCallback=$:F.request=F.actor.send("reloadTile",ee,ce.bind(this)):(F.actor=this.dispatcher.getActor(),F.request=F.actor.send("loadTile",ee,ce.bind(this)))},k.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.actor&&F.actor.send("abortTile",{uid:F.uid,type:this.type,source:this.id},void 0)},k.prototype.unloadTile=function(F){F.unloadVectorData(),F.actor&&F.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id},void 0)},k.prototype.hasTransition=function(){return!1},k}(e.Evented),Q=function(X){function k(F,$,G,ee){X.call(this),this.id=F,this.dispatcher=G,this.setEventedParent(ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},$),e.extend(this,e.pick($,["url","scheme","tileSize"]))}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,function($,G){F._tileJSONRequest=null,F._loaded=!0,$?F.fire(new e.ErrorEvent($)):G&&(e.extend(F,G),G.bounds&&(F.tileBounds=new H(G.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(G.tiles),e.postMapLoadEvent(G.tiles,F.map._getMapId(),F.map._requestManager._skuToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},k.prototype.loaded=function(){return this._loaded},k.prototype.onAdd=function(F){this.map=F,this.load()},k.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},k.prototype.serialize=function(){return e.extend({},this._options)},k.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},k.prototype.loadTile=function(F,$){var G=this,ee=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);F.request=e.getImage(this.map._requestManager.transformRequest(ee,e.ResourceType.Tile),function(ce,fe){if(delete F.request,F.aborted)F.state="unloaded",$(null);else if(ce)F.state="errored",$(ce);else if(fe){G.map._refreshExpiredTiles&&F.setExpiryData(fe),delete fe.cacheControl,delete fe.expires;var Pe=G.map.painter.context,Ie=Pe.gl;F.texture=G.map.painter.getTileTexture(fe.width),F.texture?F.texture.update(fe,{useMipmap:!0}):(F.texture=new e.Texture(Pe,fe,Ie.RGBA,{useMipmap:!0}),F.texture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),Pe.extTextureFilterAnisotropic&&Ie.texParameterf(Ie.TEXTURE_2D,Pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Pe.extTextureFilterAnisotropicMax)),F.state="loaded",e.cacheEntryPossiblyAdded(G.dispatcher),$(null)}})},k.prototype.abortTile=function(F,$){F.request&&(F.request.cancel(),delete F.request),$()},k.prototype.unloadTile=function(F,$){F.texture&&this.map.painter.saveTileTexture(F.texture),$()},k.prototype.hasTransition=function(){return!1},k}(e.Evented),ne=function(X){function k(F,$,G,ee){X.call(this,F,$,G,ee),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},$),this.encoding=$.encoding||"mapbox"}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},k.prototype.loadTile=function(F,$){var G=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ee(ce,fe){ce&&(F.state="errored",$(ce)),fe&&(F.dem=fe,F.needsHillshadePrepare=!0,F.state="loaded",$(null))}F.request=e.getImage(this.map._requestManager.transformRequest(G,e.ResourceType.Tile),function(ce,fe){if(delete F.request,F.aborted)F.state="unloaded",$(null);else if(ce)F.state="errored",$(ce);else if(fe){this.map._refreshExpiredTiles&&F.setExpiryData(fe),delete fe.cacheControl,delete fe.expires;var Pe=e.window.ImageBitmap&&fe instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?fe:e.browser.getImageData(fe,1),Ie={uid:F.uid,coord:F.tileID,source:this.id,rawImageData:Pe,encoding:this.encoding};F.actor&&F.state!=="expired"||(F.actor=this.dispatcher.getActor(),F.actor.send("loadDEMTile",Ie,ee.bind(this)))}}.bind(this)),F.neighboringTiles=this._getNeighboringTiles(F.tileID)},k.prototype._getNeighboringTiles=function(F){var $=F.canonical,G=Math.pow(2,$.z),ee=($.x-1+G)%G,ce=$.x===0?F.wrap-1:F.wrap,fe=($.x+1+G)%G,Pe=$.x+1===G?F.wrap+1:F.wrap,Ie={};return Ie[new e.OverscaledTileID(F.overscaledZ,ce,$.z,ee,$.y).key]={backfilled:!1},Ie[new e.OverscaledTileID(F.overscaledZ,Pe,$.z,fe,$.y).key]={backfilled:!1},$.y>0&&(Ie[new e.OverscaledTileID(F.overscaledZ,ce,$.z,ee,$.y-1).key]={backfilled:!1},Ie[new e.OverscaledTileID(F.overscaledZ,F.wrap,$.z,$.x,$.y-1).key]={backfilled:!1},Ie[new e.OverscaledTileID(F.overscaledZ,Pe,$.z,fe,$.y-1).key]={backfilled:!1}),$.y+1<G&&(Ie[new e.OverscaledTileID(F.overscaledZ,ce,$.z,ee,$.y+1).key]={backfilled:!1},Ie[new e.OverscaledTileID(F.overscaledZ,F.wrap,$.z,$.x,$.y+1).key]={backfilled:!1},Ie[new e.OverscaledTileID(F.overscaledZ,Pe,$.z,fe,$.y+1).key]={backfilled:!1}),Ie},k.prototype.unloadTile=function(F){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&F.actor.send("removeDEMTile",{uid:F.uid,source:this.id})},k}(Q),K=function(X){function k(F,$,G,ee){X.call(this),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=G.getActor(),this.setEventedParent(ee),this._data=$.data,this._options=e.extend({},$),this._collectResourceTiming=$.collectResourceTiming,this._resourceTiming=[],$.maxzoom!==void 0&&(this.maxzoom=$.maxzoom),$.type&&(this.type=$.type),$.attribution&&(this.attribution=$.attribution),this.promoteId=$.promoteId;var ce=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:$.cluster||!1,geojsonVtOptions:{buffer:($.buffer!==void 0?$.buffer:128)*ce,tolerance:($.tolerance!==void 0?$.tolerance:.375)*ce,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:$.lineMetrics||!1,generateId:$.generateId||!1},superclusterOptions:{maxZoom:$.clusterMaxZoom!==void 0?Math.min($.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,$.clusterMinPoints||2),extent:e.EXTENT,radius:($.clusterRadius||50)*ce,log:!1,generateId:$.generateId||!1},clusterProperties:$.clusterProperties,filter:$.filter},$.workerOptions)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.load=function(){var F=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function($){if($)F.fire(new e.ErrorEvent($));else{var G={dataType:"source",sourceDataType:"metadata"};F._collectResourceTiming&&F._resourceTiming&&F._resourceTiming.length>0&&(G.resourceTiming=F._resourceTiming,F._resourceTiming=[]),F.fire(new e.Event("data",G))}})},k.prototype.onAdd=function(F){this.map=F,this.load()},k.prototype.setData=function(F){var $=this;return this._data=F,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(G){if(G)$.fire(new e.ErrorEvent(G));else{var ee={dataType:"source",sourceDataType:"content"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(ee.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new e.Event("data",ee))}}),this},k.prototype.getClusterExpansionZoom=function(F,$){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:F,source:this.id},$),this},k.prototype.getClusterChildren=function(F,$){return this.actor.send("geojson.getClusterChildren",{clusterId:F,source:this.id},$),this},k.prototype.getClusterLeaves=function(F,$,G,ee){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:F,limit:$,offset:G},ee),this},k.prototype._updateWorkerData=function(F){var $=this;this._loaded=!1;var G=e.extend({},this.workerOptions),ee=this._data;typeof ee=="string"?(G.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ee),e.ResourceType.Source),G.request.collectResourceTiming=this._collectResourceTiming):G.data=JSON.stringify(ee),this.actor.send(this.type+".loadData",G,function(ce,fe){$._removed||fe&&fe.abandoned||($._loaded=!0,fe&&fe.resourceTiming&&fe.resourceTiming[$.id]&&($._resourceTiming=fe.resourceTiming[$.id].slice(0)),$.actor.send($.type+".coalesce",{source:G.source},null),F(ce))})},k.prototype.loaded=function(){return this._loaded},k.prototype.loadTile=function(F,$){var G=this,ee=F.actor?"reloadTile":"loadTile";F.actor=this.actor,F.request=this.actor.send(ee,{type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ce,fe){return delete F.request,F.unloadVectorData(),F.aborted?$(null):ce?$(ce):(F.loadVectorData(fe,G.map.painter,ee==="reloadTile"),$(null))})},k.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.aborted=!0},k.prototype.unloadTile=function(F){F.unloadVectorData(),this.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id})},k.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},k.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},k.prototype.hasTransition=function(){return!1},k}(e.Evented),ie=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),de=function(X){function k(F,$,G,ee){X.call(this),this.id=F,this.dispatcher=G,this.coordinates=$.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ee),this.options=$}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.load=function(F,$){var G=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ee,ce){G._loaded=!0,ee?G.fire(new e.ErrorEvent(ee)):ce&&(G.image=ce,F&&(G.coordinates=F),$&&$(),G._finishLoading())})},k.prototype.loaded=function(){return this._loaded},k.prototype.updateImage=function(F){var $=this;return this.image&&F.url?(this.options.url=F.url,this.load(F.coordinates,function(){$.texture=null}),this):this},k.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},k.prototype.onAdd=function(F){this.map=F,this.load()},k.prototype.setCoordinates=function(F){var $=this;this.coordinates=F;var G=F.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(ce){for(var fe=1/0,Pe=1/0,Ie=-1/0,ke=-1/0,Ge=0,Je=ce;Ge<Je.length;Ge+=1){var vt=Je[Ge];fe=Math.min(fe,vt.x),Pe=Math.min(Pe,vt.y),Ie=Math.max(Ie,vt.x),ke=Math.max(ke,vt.y)}var _t=Math.max(Ie-fe,ke-Pe),Rt=Math.max(0,Math.floor(-Math.log(_t)/Math.LN2)),Pt=Math.pow(2,Rt);return new e.CanonicalTileID(Rt,Math.floor((fe+Ie)/2*Pt),Math.floor((Pe+ke)/2*Pt))}(G),this.minzoom=this.maxzoom=this.tileID.z;var ee=G.map(function(ce){return $.tileID.getTilePoint(ce)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ee[0].x,ee[0].y,0,0),this._boundsArray.emplaceBack(ee[1].x,ee[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ee[3].x,ee[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ee[2].x,ee[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},k.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var F=this.map.painter.context,$=F.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,ie.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(F,this.image,$.RGBA),this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE)),this.tiles){var ee=this.tiles[G];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},k.prototype.loadTile=function(F,$){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={},$(null)):(F.state="errored",$(null))},k.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},k.prototype.hasTransition=function(){return!1},k}(e.Evented),we=function(X){function k(F,$,G,ee){X.call(this,F,$,G,ee),this.roundZoom=!0,this.type="video",this.options=$}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.load=function(){var F=this;this._loaded=!1;var $=this.options;this.urls=[];for(var G=0,ee=$.urls;G<ee.length;G+=1)this.urls.push(this.map._requestManager.transformRequest(ee[G],e.ResourceType.Source).url);e.getVideo(this.urls,function(ce,fe){F._loaded=!0,ce?F.fire(new e.ErrorEvent(ce)):fe&&(F.video=fe,F.video.loop=!0,F.video.setAttribute("playsinline",""),F.video.addEventListener("playing",function(){F.map.triggerRepaint()}),F.map&&F.video.play(),F._finishLoading())})},k.prototype.pause=function(){this.video&&this.video.pause()},k.prototype.play=function(){this.video&&this.video.play()},k.prototype.seek=function(F){if(this.video){var $=this.video.seekable;F<$.start(0)||F>$.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+$.start(0)+" and "+$.end(0)+"-second mark."))):this.video.currentTime=F}},k.prototype.getVideo=function(){return this.video},k.prototype.onAdd=function(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},k.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var F=this.map.painter.context,$=F.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,ie.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE),$.texSubImage2D($.TEXTURE_2D,0,0,0,$.RGBA,$.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(F,this.video,$.RGBA),this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE)),this.tiles){var ee=this.tiles[G];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},k.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},k.prototype.hasTransition=function(){return this.video&&!this.video.paused},k}(de),Re=function(X){function k(F,$,G,ee){X.call(this,F,$,G,ee),$.coordinates?Array.isArray($.coordinates)&&$.coordinates.length===4&&!$.coordinates.some(function(ce){return!Array.isArray(ce)||ce.length!==2||ce.some(function(fe){return typeof fe!="number"})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "coordinates"'))),$.animate&&typeof $.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'optional "animate" property must be a boolean value'))),$.canvas?typeof $.canvas=="string"||$.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "canvas"'))),this.options=$,this.animate=$.animate===void 0||$.animate}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},k.prototype.getCanvas=function(){return this.canvas},k.prototype.onAdd=function(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()},k.prototype.onRemove=function(){this.pause()},k.prototype.prepare=function(){var F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var $=this.map.painter.context,G=$.gl;for(var ee in this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,ie.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture($,this.canvas,G.RGBA,{premultiply:!0}),this.tiles){var ce=this.tiles[ee];ce.state!=="loaded"&&(ce.state="loaded",ce.texture=this.texture)}}},k.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},k.prototype.hasTransition=function(){return this._playing},k.prototype._hasInvalidDimensions=function(){for(var F=0,$=[this.canvas.width,this.canvas.height];F<$.length;F+=1){var G=$[F];if(isNaN(G)||G<=0)return!0}return!1},k}(de),_e={vector:J,raster:Q,"raster-dem":ne,geojson:K,video:we,image:de,canvas:Re};function Ue(X,k){var F=e.identity([]);return e.translate(F,F,[1,1,0]),e.scale(F,F,[.5*X.width,.5*X.height,1]),e.multiply(F,F,X.calculatePosMatrix(k.toUnwrapped()))}function rt(X,k,F,$,G,ee){var ce=function(Rt,Pt,Gt){if(Rt)for(var ur=0,hr=Rt;ur<hr.length;ur+=1){var nn=Pt[hr[ur]];if(nn&&nn.source===Gt&&nn.type==="fill-extrusion")return!0}else for(var Yr in Pt){var Tn=Pt[Yr];if(Tn.source===Gt&&Tn.type==="fill-extrusion")return!0}return!1}(G&&G.layers,k,X.id),fe=ee.maxPitchScaleFactor(),Pe=X.tilesIn($,fe,ce);Pe.sort(Fe);for(var Ie=[],ke=0,Ge=Pe;ke<Ge.length;ke+=1){var Je=Ge[ke];Ie.push({wrappedTileID:Je.tileID.wrapped().key,queryResults:Je.tile.queryRenderedFeatures(k,F,X._state,Je.queryGeometry,Je.cameraQueryGeometry,Je.scale,G,ee,fe,Ue(X.transform,Je.tileID))})}var vt=function(Rt){for(var Pt={},Gt={},ur=0,hr=Rt;ur<hr.length;ur+=1){var nn=hr[ur],Yr=nn.queryResults,Tn=nn.wrappedTileID,In=Gt[Tn]=Gt[Tn]||{};for(var si in Yr)for(var ni=Yr[si],Ci=In[si]=In[si]||{},Ji=Pt[si]=Pt[si]||[],ha=0,ya=ni;ha<ya.length;ha+=1){var to=ya[ha];Ci[to.featureIndex]||(Ci[to.featureIndex]=!0,Ji.push(to))}}return Pt}(Ie);for(var _t in vt)vt[_t].forEach(function(Rt){var Pt=Rt.feature,Gt=X.getFeatureState(Pt.layer["source-layer"],Pt.id);Pt.source=Pt.layer.source,Pt.layer["source-layer"]&&(Pt.sourceLayer=Pt.layer["source-layer"]),Pt.state=Gt});return vt}function Fe(X,k){var F=X.tileID,$=k.tileID;return F.overscaledZ-$.overscaledZ||F.canonical.y-$.canonical.y||F.wrap-$.wrap||F.canonical.x-$.canonical.x}var Se=function(k,F){this.max=k,this.onRemove=F,this.reset()};Se.prototype.reset=function(){for(var X in this.data)for(var k=0,F=this.data[X];k<F.length;k+=1){var $=F[k];$.timeout&&clearTimeout($.timeout),this.onRemove($.value)}return this.data={},this.order=[],this},Se.prototype.add=function(X,k,F){var $=this,G=X.wrapped().key;this.data[G]===void 0&&(this.data[G]=[]);var ee={value:k,timeout:void 0};if(F!==void 0&&(ee.timeout=setTimeout(function(){$.remove(X,ee)},F)),this.data[G].push(ee),this.order.push(G),this.order.length>this.max){var ce=this._getAndRemoveByKey(this.order[0]);ce&&this.onRemove(ce)}return this},Se.prototype.has=function(X){return X.wrapped().key in this.data},Se.prototype.getAndRemove=function(X){return this.has(X)?this._getAndRemoveByKey(X.wrapped().key):null},Se.prototype._getAndRemoveByKey=function(X){var k=this.data[X].shift();return k.timeout&&clearTimeout(k.timeout),this.data[X].length===0&&delete this.data[X],this.order.splice(this.order.indexOf(X),1),k.value},Se.prototype.getByKey=function(X){var k=this.data[X];return k?k[0].value:null},Se.prototype.get=function(X){return this.has(X)?this.data[X.wrapped().key][0].value:null},Se.prototype.remove=function(X,k){if(!this.has(X))return this;var F=X.wrapped().key,$=k===void 0?0:this.data[F].indexOf(k),G=this.data[F][$];return this.data[F].splice($,1),G.timeout&&clearTimeout(G.timeout),this.data[F].length===0&&delete this.data[F],this.onRemove(G.value),this.order.splice(this.order.indexOf(F),1),this},Se.prototype.setMaxSize=function(X){for(this.max=X;this.order.length>this.max;){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},Se.prototype.filter=function(X){var k=[];for(var F in this.data)for(var $=0,G=this.data[F];$<G.length;$+=1){var ee=G[$];X(ee.value)||k.push(ee)}for(var ce=0,fe=k;ce<fe.length;ce+=1){var Pe=fe[ce];this.remove(Pe.value.tileID,Pe)}};var ye=function(k,F,$){this.context=k;var G=k.gl;this.buffer=G.createBuffer(),this.dynamicDraw=Boolean($),this.context.unbindVAO(),k.bindElementBuffer.set(this.buffer),G.bufferData(G.ELEMENT_ARRAY_BUFFER,F.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete F.arrayBuffer};ye.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ye.prototype.updateData=function(X){var k=this.context.gl;this.context.unbindVAO(),this.bind(),k.bufferSubData(k.ELEMENT_ARRAY_BUFFER,0,X.arrayBuffer)},ye.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ue=function(k,F,$,G){this.length=F.length,this.attributes=$,this.itemSize=F.bytesPerElement,this.dynamicDraw=G,this.context=k;var ee=k.gl;this.buffer=ee.createBuffer(),k.bindVertexBuffer.set(this.buffer),ee.bufferData(ee.ARRAY_BUFFER,F.arrayBuffer,this.dynamicDraw?ee.DYNAMIC_DRAW:ee.STATIC_DRAW),this.dynamicDraw||delete F.arrayBuffer};ue.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ue.prototype.updateData=function(X){var k=this.context.gl;this.bind(),k.bufferSubData(k.ARRAY_BUFFER,0,X.arrayBuffer)},ue.prototype.enableAttributes=function(X,k){for(var F=0;F<this.attributes.length;F++){var $=k.attributes[this.attributes[F].name];$!==void 0&&X.enableVertexAttribArray($)}},ue.prototype.setVertexAttribPointers=function(X,k,F){for(var $=0;$<this.attributes.length;$++){var G=this.attributes[$],ee=k.attributes[G.name];ee!==void 0&&X.vertexAttribPointer(ee,G.components,X[Oe[G.type]],!1,this.itemSize,G.offset+this.itemSize*(F||0))}},ue.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var xe=function(k){this.gl=k.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};xe.prototype.get=function(){return this.current},xe.prototype.set=function(X){},xe.prototype.getDefault=function(){return this.default},xe.prototype.setDefault=function(){this.set(this.default)};var Ae=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return e.Color.transparent},k.prototype.set=function(F){var $=this.current;(F.r!==$.r||F.g!==$.g||F.b!==$.b||F.a!==$.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},k}(xe),pe=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return 1},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)},k}(xe),be=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return 0},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)},k}(xe),le=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return[!0,!0,!0,!0]},k.prototype.set=function(F){var $=this.current;(F[0]!==$[0]||F[1]!==$[1]||F[2]!==$[2]||F[3]!==$[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},k}(xe),z=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!0},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)},k}(xe),ae=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return 255},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)},k}(xe),V=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},k.prototype.set=function(F){var $=this.current;(F.func!==$.func||F.ref!==$.ref||F.mask!==$.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)},k}(xe),re=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){var F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]},k.prototype.set=function(F){var $=this.current;(F[0]!==$[0]||F[1]!==$[1]||F[2]!==$[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)},k}(xe),te=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!1},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;F?$.enable($.STENCIL_TEST):$.disable($.STENCIL_TEST),this.current=F,this.dirty=!1}},k}(xe),q=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return[0,1]},k.prototype.set=function(F){var $=this.current;(F[0]!==$[0]||F[1]!==$[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)},k}(xe),ve=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!1},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;F?$.enable($.DEPTH_TEST):$.disable($.DEPTH_TEST),this.current=F,this.dirty=!1}},k}(xe),Me=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return this.gl.LESS},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)},k}(xe),De=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!1},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;F?$.enable($.BLEND):$.disable($.BLEND),this.current=F,this.dirty=!1}},k}(xe),ze=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){var F=this.gl;return[F.ONE,F.ZERO]},k.prototype.set=function(F){var $=this.current;(F[0]!==$[0]||F[1]!==$[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)},k}(xe),We=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return e.Color.transparent},k.prototype.set=function(F){var $=this.current;(F.r!==$.r||F.g!==$.g||F.b!==$.b||F.a!==$.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},k}(xe),He=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return this.gl.FUNC_ADD},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)},k}(xe),$e=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!1},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;F?$.enable($.CULL_FACE):$.disable($.CULL_FACE),this.current=F,this.dirty=!1}},k}(xe),It=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return this.gl.BACK},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)},k}(xe),Yt=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return this.gl.CCW},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)},k}(xe),rr=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)},k}(xe),ir=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return this.gl.TEXTURE0},k.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)},k}(xe),Br=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){var F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]},k.prototype.set=function(F){var $=this.current;(F[0]!==$[0]||F[1]!==$[1]||F[2]!==$[2]||F[3]!==$[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},k}(xe),tr=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.bindFramebuffer($.FRAMEBUFFER,F),this.current=F,this.dirty=!1}},k}(xe),ft=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.bindRenderbuffer($.RENDERBUFFER,F),this.current=F,this.dirty=!1}},k}(xe),st=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.bindTexture($.TEXTURE_2D,F),this.current=F,this.dirty=!1}},k}(xe),Tt=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.bindBuffer($.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}},k}(xe),Qe=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){var $=this.gl;$.bindBuffer($.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1},k}(xe),it=function(X){function k(F){X.call(this,F),this.vao=F.extVertexArrayObject}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k.prototype.set=function(F){this.vao&&(F!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(F),this.current=F,this.dirty=!1)},k}(xe),zt=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return 4},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}},k}(xe),Qt=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!1},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}},k}(xe),Ar=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return!1},k.prototype.set=function(F){if(F!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}},k}(xe),zr=function(X){function k(F,$){X.call(this,F),this.context=F,this.parent=$}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getDefault=function(){return null},k}(xe),ct=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.setDirty=function(){this.dirty=!0},k.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var $=this.gl;$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}},k}(zr),ot=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var $=this.gl;$.framebufferRenderbuffer($.FRAMEBUFFER,$.DEPTH_ATTACHMENT,$.RENDERBUFFER,F),this.current=F,this.dirty=!1}},k}(zr),xt=function(k,F,$,G){this.context=k,this.width=F,this.height=$;var ee=this.framebuffer=k.gl.createFramebuffer();this.colorAttachment=new ct(k,ee),G&&(this.depthAttachment=new ot(k,ee))};xt.prototype.destroy=function(){var X=this.context.gl,k=this.colorAttachment.get();if(k&&X.deleteTexture(k),this.depthAttachment){var F=this.depthAttachment.get();F&&X.deleteRenderbuffer(F)}X.deleteFramebuffer(this.framebuffer)};var Bt=function(k,F,$){this.func=k,this.mask=F,this.range=$};Bt.ReadOnly=!1,Bt.ReadWrite=!0,Bt.disabled=new Bt(519,Bt.ReadOnly,[0,1]);var Ke=function(k,F,$,G,ee,ce){this.test=k,this.ref=F,this.mask=$,this.fail=G,this.depthFail=ee,this.pass=ce};Ke.disabled=new Ke({func:519,mask:0},0,0,7680,7680,7680);var lt=function(k,F,$){this.blendFunction=k,this.blendColor=F,this.mask=$};lt.disabled=new lt(lt.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),lt.unblended=new lt(lt.Replace,e.Color.transparent,[!0,!0,!0,!0]),lt.alphaBlended=new lt([1,771],e.Color.transparent,[!0,!0,!0,!0]);var mt=function(k,F,$){this.enable=k,this.mode=F,this.frontFace=$};mt.disabled=new mt(!1,1029,2305),mt.backCCW=new mt(!0,1029,2305);var qe=function(k){this.gl=k,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ae(this),this.clearDepth=new pe(this),this.clearStencil=new be(this),this.colorMask=new le(this),this.depthMask=new z(this),this.stencilMask=new ae(this),this.stencilFunc=new V(this),this.stencilOp=new re(this),this.stencilTest=new te(this),this.depthRange=new q(this),this.depthTest=new ve(this),this.depthFunc=new Me(this),this.blend=new De(this),this.blendFunc=new ze(this),this.blendColor=new We(this),this.blendEquation=new He(this),this.cullFace=new $e(this),this.cullFaceSide=new It(this),this.frontFace=new Yt(this),this.program=new rr(this),this.activeTexture=new ir(this),this.viewport=new Br(this),this.bindFramebuffer=new tr(this),this.bindRenderbuffer=new ft(this),this.bindTexture=new st(this),this.bindVertexBuffer=new Tt(this),this.bindElementBuffer=new Qe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new it(this),this.pixelStoreUnpack=new zt(this),this.pixelStoreUnpackPremultiplyAlpha=new Qt(this),this.pixelStoreUnpackFlipY=new Ar(this),this.extTextureFilterAnisotropic=k.getExtension("EXT_texture_filter_anisotropic")||k.getExtension("MOZ_EXT_texture_filter_anisotropic")||k.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=k.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=k.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(k.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=k.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=k.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=k.getParameter(k.MAX_TEXTURE_SIZE)};qe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},qe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},qe.prototype.createIndexBuffer=function(X,k){return new ye(this,X,k)},qe.prototype.createVertexBuffer=function(X,k,F){return new ue(this,X,k,F)},qe.prototype.createRenderbuffer=function(X,k,F){var $=this.gl,G=$.createRenderbuffer();return this.bindRenderbuffer.set(G),$.renderbufferStorage($.RENDERBUFFER,X,k,F),this.bindRenderbuffer.set(null),G},qe.prototype.createFramebuffer=function(X,k,F){return new xt(this,X,k,F)},qe.prototype.clear=function(X){var k=X.color,F=X.depth,$=this.gl,G=0;k&&(G|=$.COLOR_BUFFER_BIT,this.clearColor.set(k),this.colorMask.set([!0,!0,!0,!0])),F!==void 0&&(G|=$.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(F),this.depthMask.set(!0)),$.clear(G)},qe.prototype.setCullFace=function(X){X.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(X.mode),this.frontFace.set(X.frontFace))},qe.prototype.setDepthMode=function(X){X.func!==this.gl.ALWAYS||X.mask?(this.depthTest.set(!0),this.depthFunc.set(X.func),this.depthMask.set(X.mask),this.depthRange.set(X.range)):this.depthTest.set(!1)},qe.prototype.setStencilMode=function(X){X.test.func!==this.gl.ALWAYS||X.mask?(this.stencilTest.set(!0),this.stencilMask.set(X.mask),this.stencilOp.set([X.fail,X.depthFail,X.pass]),this.stencilFunc.set({func:X.test.func,ref:X.ref,mask:X.test.mask})):this.stencilTest.set(!1)},qe.prototype.setColorMode=function(X){e.deepEqual(X.blendFunction,lt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(X.blendFunction),this.blendColor.set(X.blendColor)),this.colorMask.set(X.mask)},qe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var yt=function(X){function k(F,$,G){var ee=this;X.call(this),this.id=F,this.dispatcher=G,this.on("data",function(ce){ce.dataType==="source"&&ce.sourceDataType==="metadata"&&(ee._sourceLoaded=!0),ee._sourceLoaded&&!ee._paused&&ce.dataType==="source"&&ce.sourceDataType==="content"&&(ee.reload(),ee.transform&&ee.update(ee.transform))}),this.on("error",function(){ee._sourceErrored=!0}),this._source=function(ce,fe,Pe,Ie){var ke=new _e[fe.type](ce,fe,Pe,Ie);if(ke.id!==ce)throw new Error("Expected Source id to be "+ce+" instead of "+ke.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ke),ke}(F,$,G,this),this._tiles={},this._cache=new Se(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.onAdd=function(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(F)},k.prototype.onRemove=function(F){this._source&&this._source.onRemove&&this._source.onRemove(F)},k.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var F in this._tiles){var $=this._tiles[F];if($.state!=="loaded"&&$.state!=="errored")return!1}return!0},k.prototype.getSource=function(){return this._source},k.prototype.pause=function(){this._paused=!0},k.prototype.resume=function(){if(this._paused){var F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform)}},k.prototype._loadTile=function(F,$){return this._source.loadTile(F,$)},k.prototype._unloadTile=function(F){if(this._source.unloadTile)return this._source.unloadTile(F,function(){})},k.prototype._abortTile=function(F){if(this._source.abortTile)return this._source.abortTile(F,function(){})},k.prototype.serialize=function(){return this._source.serialize()},k.prototype.prepare=function(F){for(var $ in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var G=this._tiles[$];G.upload(F),G.prepare(this.map.style.imageManager)}},k.prototype.getIds=function(){return e.values(this._tiles).map(function(F){return F.tileID}).sort(qt).map(function(F){return F.key})},k.prototype.getRenderableIds=function(F){var $=this,G=[];for(var ee in this._tiles)this._isIdRenderable(ee,F)&&G.push(this._tiles[ee]);return F?G.sort(function(ce,fe){var Pe=ce.tileID,Ie=fe.tileID,ke=new e.Point(Pe.canonical.x,Pe.canonical.y)._rotate($.transform.angle),Ge=new e.Point(Ie.canonical.x,Ie.canonical.y)._rotate($.transform.angle);return Pe.overscaledZ-Ie.overscaledZ||Ge.y-ke.y||Ge.x-ke.x}).map(function(ce){return ce.tileID.key}):G.map(function(ce){return ce.tileID}).sort(qt).map(function(ce){return ce.key})},k.prototype.hasRenderableParent=function(F){var $=this.findLoadedParent(F,0);return!!$&&this._isIdRenderable($.tileID.key)},k.prototype._isIdRenderable=function(F,$){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&($||!this._tiles[F].holdingForFade())},k.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var F in this._cache.reset(),this._tiles)this._tiles[F].state!=="errored"&&this._reloadTile(F,"reloading")},k.prototype._reloadTile=function(F,$){var G=this._tiles[F];G&&(G.state!=="loading"&&(G.state=$),this._loadTile(G,this._tileLoaded.bind(this,G,F,$)))},k.prototype._tileLoaded=function(F,$,G,ee){if(ee)return F.state="errored",void(ee.status!==404?this._source.fire(new e.ErrorEvent(ee,{tile:F})):this.update(this.transform));F.timeAdded=e.browser.now(),G==="expired"&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer($,F),this.getSource().type==="raster-dem"&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:F,coord:F.tileID}))},k.prototype._backfillDEM=function(F){for(var $=this.getRenderableIds(),G=0;G<$.length;G++){var ee=$[G];if(F.neighboringTiles&&F.neighboringTiles[ee]){var ce=this.getTileByID(ee);fe(F,ce),fe(ce,F)}}function fe(Pe,Ie){Pe.needsHillshadePrepare=!0;var ke=Ie.tileID.canonical.x-Pe.tileID.canonical.x,Ge=Ie.tileID.canonical.y-Pe.tileID.canonical.y,Je=Math.pow(2,Pe.tileID.canonical.z),vt=Ie.tileID.key;ke===0&&Ge===0||Math.abs(Ge)>1||(Math.abs(ke)>1&&(Math.abs(ke+Je)===1?ke+=Je:Math.abs(ke-Je)===1&&(ke-=Je)),Ie.dem&&Pe.dem&&(Pe.dem.backfillBorder(Ie.dem,ke,Ge),Pe.neighboringTiles&&Pe.neighboringTiles[vt]&&(Pe.neighboringTiles[vt].backfilled=!0)))}},k.prototype.getTile=function(F){return this.getTileByID(F.key)},k.prototype.getTileByID=function(F){return this._tiles[F]},k.prototype._retainLoadedChildren=function(F,$,G,ee){for(var ce in this._tiles){var fe=this._tiles[ce];if(!(ee[ce]||!fe.hasData()||fe.tileID.overscaledZ<=$||fe.tileID.overscaledZ>G)){for(var Pe=fe.tileID;fe&&fe.tileID.overscaledZ>$+1;){var Ie=fe.tileID.scaledTo(fe.tileID.overscaledZ-1);(fe=this._tiles[Ie.key])&&fe.hasData()&&(Pe=Ie)}for(var ke=Pe;ke.overscaledZ>$;)if(F[(ke=ke.scaledTo(ke.overscaledZ-1)).key]){ee[Pe.key]=Pe;break}}}},k.prototype.findLoadedParent=function(F,$){if(F.key in this._loadedParentTiles){var G=this._loadedParentTiles[F.key];return G&&G.tileID.overscaledZ>=$?G:null}for(var ee=F.overscaledZ-1;ee>=$;ee--){var ce=F.scaledTo(ee),fe=this._getLoadedTile(ce);if(fe)return fe}},k.prototype._getLoadedTile=function(F){var $=this._tiles[F.key];return $&&$.hasData()?$:this._cache.getByKey(F.wrapped().key)},k.prototype.updateCacheSize=function(F){var $=Math.ceil(F.width/this._source.tileSize)+1,G=Math.ceil(F.height/this._source.tileSize)+1,ee=Math.floor($*G*5),ce=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ee):ee;this._cache.setMaxSize(ce)},k.prototype.handleWrapJump=function(F){var $=Math.round((F-(this._prevLng===void 0?F:this._prevLng))/360);if(this._prevLng=F,$){var G={};for(var ee in this._tiles){var ce=this._tiles[ee];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+$),G[ce.tileID.key]=ce}for(var fe in this._tiles=G,this._timers)clearTimeout(this._timers[fe]),delete this._timers[fe];for(var Pe in this._tiles)this._setTileReloadTimer(Pe,this._tiles[Pe])}},k.prototype.update=function(F){var $=this;if(this.transform=F,this._sourceLoaded&&!this._paused){var G;this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?G=F.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(In){return new e.OverscaledTileID(In.canonical.z,In.wrap,In.canonical.z,In.canonical.x,In.canonical.y)}):(G=F.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(G=G.filter(function(In){return $._source.hasTile(In)}))):G=[];var ee=F.coveringZoomLevel(this._source),ce=Math.max(ee-k.maxOverzooming,this._source.minzoom),fe=Math.max(ee+k.maxUnderzooming,this._source.minzoom),Pe=this._updateRetainedTiles(G,ee);if(Er(this._source.type)){for(var Ie={},ke={},Ge=0,Je=Object.keys(Pe);Ge<Je.length;Ge+=1){var vt=Je[Ge],_t=Pe[vt],Rt=this._tiles[vt];if(Rt&&!(Rt.fadeEndTime&&Rt.fadeEndTime<=e.browser.now())){var Pt=this.findLoadedParent(_t,ce);Pt&&(this._addTile(Pt.tileID),Ie[Pt.tileID.key]=Pt.tileID),ke[vt]=_t}}for(var Gt in this._retainLoadedChildren(ke,ee,fe,Pe),Ie)Pe[Gt]||(this._coveredTiles[Gt]=!0,Pe[Gt]=Ie[Gt])}for(var ur in Pe)this._tiles[ur].clearFadeHold();for(var hr=0,nn=e.keysDifference(this._tiles,Pe);hr<nn.length;hr+=1){var Yr=nn[hr],Tn=this._tiles[Yr];Tn.hasSymbolBuckets&&!Tn.holdingForFade()?Tn.setHoldDuration(this.map._fadeDuration):Tn.hasSymbolBuckets&&!Tn.symbolFadeFinished()||this._removeTile(Yr)}this._updateLoadedParentTileCache()}},k.prototype.releaseSymbolFadeTiles=function(){for(var F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)},k.prototype._updateRetainedTiles=function(F,$){for(var G={},ee={},ce=Math.max($-k.maxOverzooming,this._source.minzoom),fe=Math.max($+k.maxUnderzooming,this._source.minzoom),Pe={},Ie=0,ke=F;Ie<ke.length;Ie+=1){var Ge=ke[Ie],Je=this._addTile(Ge);G[Ge.key]=Ge,Je.hasData()||$<this._source.maxzoom&&(Pe[Ge.key]=Ge)}this._retainLoadedChildren(Pe,$,fe,G);for(var vt=0,_t=F;vt<_t.length;vt+=1){var Rt=_t[vt],Pt=this._tiles[Rt.key];if(!Pt.hasData()){if($+1>this._source.maxzoom){var Gt=Rt.children(this._source.maxzoom)[0],ur=this.getTile(Gt);if(ur&&ur.hasData()){G[Gt.key]=Gt;continue}}else{var hr=Rt.children(this._source.maxzoom);if(G[hr[0].key]&&G[hr[1].key]&&G[hr[2].key]&&G[hr[3].key])continue}for(var nn=Pt.wasRequested(),Yr=Rt.overscaledZ-1;Yr>=ce;--Yr){var Tn=Rt.scaledTo(Yr);if(ee[Tn.key]||(ee[Tn.key]=!0,!(Pt=this.getTile(Tn))&&nn&&(Pt=this._addTile(Tn)),Pt&&(G[Tn.key]=Tn,nn=Pt.wasRequested(),Pt.hasData())))break}}}return G},k.prototype._updateLoadedParentTileCache=function(){for(var F in this._loadedParentTiles={},this._tiles){for(var $=[],G=void 0,ee=this._tiles[F].tileID;ee.overscaledZ>0;){if(ee.key in this._loadedParentTiles){G=this._loadedParentTiles[ee.key];break}$.push(ee.key);var ce=ee.scaledTo(ee.overscaledZ-1);if(G=this._getLoadedTile(ce))break;ee=ce}for(var fe=0,Pe=$;fe<Pe.length;fe+=1)this._loadedParentTiles[Pe[fe]]=G}},k.prototype._addTile=function(F){var $=this._tiles[F.key];if($)return $;($=this._cache.getAndRemove(F))&&(this._setTileReloadTimer(F.key,$),$.tileID=F,this._state.initializeTileState($,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,$)));var G=Boolean($);return G||($=new e.Tile(F,this._source.tileSize*F.overscaleFactor()),this._loadTile($,this._tileLoaded.bind(this,$,F.key,$.state))),$?($.uses++,this._tiles[F.key]=$,G||this._source.fire(new e.Event("dataloading",{tile:$,coord:$.tileID,dataType:"source"})),$):null},k.prototype._setTileReloadTimer=function(F,$){var G=this;F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);var ee=$.getExpiryTimeout();ee&&(this._timers[F]=setTimeout(function(){G._reloadTile(F,"expired"),delete G._timers[F]},ee))},k.prototype._removeTile=function(F){var $=this._tiles[F];$&&($.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),$.uses>0||($.hasData()&&$.state!=="reloading"?this._cache.add($.tileID,$,$.getExpiryTimeout()):($.aborted=!0,this._abortTile($),this._unloadTile($))))},k.prototype.clearTiles=function(){for(var F in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(F);this._cache.reset()},k.prototype.tilesIn=function(F,$,G){var ee=this,ce=[],fe=this.transform;if(!fe)return ce;for(var Pe=G?fe.getCameraQueryGeometry(F):F,Ie=F.map(function(Yr){return fe.pointCoordinate(Yr)}),ke=Pe.map(function(Yr){return fe.pointCoordinate(Yr)}),Ge=this.getIds(),Je=1/0,vt=1/0,_t=-1/0,Rt=-1/0,Pt=0,Gt=ke;Pt<Gt.length;Pt+=1){var ur=Gt[Pt];Je=Math.min(Je,ur.x),vt=Math.min(vt,ur.y),_t=Math.max(_t,ur.x),Rt=Math.max(Rt,ur.y)}for(var hr=function(Tn){var In=ee._tiles[Ge[Tn]];if(!In.holdingForFade()){var si=In.tileID,ni=Math.pow(2,fe.zoom-In.tileID.overscaledZ),Ci=$*In.queryPadding*e.EXTENT/In.tileSize/ni,Ji=[si.getTilePoint(new e.MercatorCoordinate(Je,vt)),si.getTilePoint(new e.MercatorCoordinate(_t,Rt))];if(Ji[0].x-Ci<e.EXTENT&&Ji[0].y-Ci<e.EXTENT&&Ji[1].x+Ci>=0&&Ji[1].y+Ci>=0){var ha=Ie.map(function(to){return si.getTilePoint(to)}),ya=ke.map(function(to){return si.getTilePoint(to)});ce.push({tile:In,tileID:si,queryGeometry:ha,cameraQueryGeometry:ya,scale:ni})}}},nn=0;nn<Ge.length;nn++)hr(nn);return ce},k.prototype.getVisibleCoordinates=function(F){for(var $=this,G=this.getRenderableIds(F).map(function(Pe){return $._tiles[Pe].tileID}),ee=0,ce=G;ee<ce.length;ee+=1){var fe=ce[ee];fe.posMatrix=this.transform.calculatePosMatrix(fe.toUnwrapped())}return G},k.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Er(this._source.type))for(var F in this._tiles){var $=this._tiles[F];if($.fadeEndTime!==void 0&&$.fadeEndTime>=e.browser.now())return!0}return!1},k.prototype.setFeatureState=function(F,$,G){this._state.updateState(F=F||"_geojsonTileLayer",$,G)},k.prototype.removeFeatureState=function(F,$,G){this._state.removeFeatureState(F=F||"_geojsonTileLayer",$,G)},k.prototype.getFeatureState=function(F,$){return this._state.getState(F=F||"_geojsonTileLayer",$)},k.prototype.setDependencies=function(F,$,G){var ee=this._tiles[F];ee&&ee.setDependencies($,G)},k.prototype.reloadTilesForDependencies=function(F,$){for(var G in this._tiles)this._tiles[G].hasDependency(F,$)&&this._reloadTile(G,"reloading");this._cache.filter(function(ee){return!ee.hasDependency(F,$)})},k}(e.Evented);function qt(X,k){var F=Math.abs(2*X.wrap)-+(X.wrap<0),$=Math.abs(2*k.wrap)-+(k.wrap<0);return X.overscaledZ-k.overscaledZ||$-F||k.canonical.y-X.canonical.y||k.canonical.x-X.canonical.x}function Er(X){return X==="raster"||X==="image"||X==="video"}function Zr(){return new e.window.Worker(ul.workerUrl)}yt.maxOverzooming=10,yt.maxUnderzooming=3;var Dr="mapboxgl_preloaded_worker_pool",Cr=function(){this.active={}};Cr.prototype.acquire=function(X){if(!this.workers)for(this.workers=[];this.workers.length<Cr.workerCount;)this.workers.push(new Zr);return this.active[X]=!0,this.workers.slice()},Cr.prototype.release=function(X){delete this.active[X],this.numActive()===0&&(this.workers.forEach(function(k){k.terminate()}),this.workers=null)},Cr.prototype.isPreloaded=function(){return!!this.active[Dr]},Cr.prototype.numActive=function(){return Object.keys(this.active).length};var mn,xn=Math.floor(e.browser.hardwareConcurrency/2);function lr(){return mn||(mn=new Cr),mn}function An(X,k){var F={};for(var $ in X)$!=="ref"&&(F[$]=X[$]);return e.refProperties.forEach(function(G){G in k&&(F[G]=k[G])}),F}function On(X){X=X.slice();for(var k=Object.create(null),F=0;F<X.length;F++)k[X[F].id]=X[F];for(var $=0;$<X.length;$++)"ref"in X[$]&&(X[$]=An(X[$],k[X[$].ref]));return X}Cr.workerCount=Math.max(Math.min(xn,6),1);var Mt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function er(X,k,F){F.push({command:Mt.addSource,args:[X,k[X]]})}function $t(X,k,F){k.push({command:Mt.removeSource,args:[X]}),F[X]=!0}function Tr(X,k,F,$){$t(X,F,$),er(X,k,F)}function Mr(X,k,F){var $;for($ in X[F])if(X[F].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(X[F][$],k[F][$]))return!1;for($ in k[F])if(k[F].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(X[F][$],k[F][$]))return!1;return!0}function Hr(X,k,F,$,G,ee){var ce;for(ce in k=k||{},X=X||{})X.hasOwnProperty(ce)&&(e.deepEqual(X[ce],k[ce])||F.push({command:ee,args:[$,ce,k[ce],G]}));for(ce in k)k.hasOwnProperty(ce)&&!X.hasOwnProperty(ce)&&(e.deepEqual(X[ce],k[ce])||F.push({command:ee,args:[$,ce,k[ce],G]}))}function wr(X){return X.id}function Ur(X,k){return X[k.id]=k,X}var fn=function(k,F){this.reset(k,F)};fn.prototype.reset=function(X,k){this.points=X||[],this._distances=[0];for(var F=1;F<this.points.length;F++)this._distances[F]=this._distances[F-1]+this.points[F].dist(this.points[F-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(k||0,.5*this.length),this.paddedLength=this.length-2*this.padding},fn.prototype.lerp=function(X){if(this.points.length===1)return this.points[0];X=e.clamp(X,0,1);for(var k=1,F=this._distances[k],$=X*this.paddedLength+this.padding;F<$&&k<this._distances.length;)F=this._distances[++k];var G=k-1,ee=this._distances[G],ce=F-ee,fe=ce>0?($-ee)/ce:0;return this.points[G].mult(1-fe).add(this.points[k].mult(fe))};var tn=function(k,F,$){var G=this.boxCells=[],ee=this.circleCells=[];this.xCellCount=Math.ceil(k/$),this.yCellCount=Math.ceil(F/$);for(var ce=0;ce<this.xCellCount*this.yCellCount;ce++)G.push([]),ee.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=k,this.height=F,this.xScale=this.xCellCount/k,this.yScale=this.yCellCount/F,this.boxUid=0,this.circleUid=0};function Rr(X,k,F,$,G){var ee=e.create();return k?(e.scale(ee,ee,[1/G,1/G,1]),F||e.rotateZ(ee,ee,$.angle)):e.multiply(ee,$.labelPlaneMatrix,X),ee}function Nn(X,k,F,$,G){if(k){var ee=e.clone(X);return e.scale(ee,ee,[G,G,1]),F||e.rotateZ(ee,ee,-$.angle),ee}return $.glCoordMatrix}function En(X,k){var F=[X.x,X.y,0,1];Ao(F,F,k);var $=F[3];return{point:new e.Point(F[0]/$,F[1]/$),signedDistanceFromCamera:$}}function Yn(X,k){return .5+X/k*.5}function wi(X,k){var F=X[0]/X[3],$=X[1]/X[3];return F>=-k[0]&&F<=k[0]&&$>=-k[1]&&$<=k[1]}function $a(X,k,F,$,G,ee,ce,fe){var Pe=$?X.textSizeData:X.iconSizeData,Ie=e.evaluateSizeForZoom(Pe,F.transform.zoom),ke=[256/F.width*2+1,256/F.height*2+1],Ge=$?X.text.dynamicLayoutVertexArray:X.icon.dynamicLayoutVertexArray;Ge.clear();for(var Je=X.lineVertexArray,vt=$?X.text.placedSymbolArray:X.icon.placedSymbolArray,_t=F.transform.width/F.transform.height,Rt=!1,Pt=0;Pt<vt.length;Pt++){var Gt=vt.get(Pt);if(Gt.hidden||Gt.writingMode===e.WritingMode.vertical&&!Rt)ps(Gt.numGlyphs,Ge);else{Rt=!1;var ur=[Gt.anchorX,Gt.anchorY,0,1];if(e.transformMat4(ur,ur,k),wi(ur,ke)){var hr=Yn(F.transform.cameraToCenterDistance,ur[3]),nn=e.evaluateSizeForFeature(Pe,Ie,Gt),Yr=ce?nn/hr:nn*hr,Tn=new e.Point(Gt.anchorX,Gt.anchorY),In=En(Tn,G).point,si={},ni=Ro(Gt,Yr,!1,fe,k,G,ee,X.glyphOffsetArray,Je,Ge,In,Tn,si,_t);Rt=ni.useVertical,(ni.notEnoughRoom||Rt||ni.needsFlipping&&Ro(Gt,Yr,!0,fe,k,G,ee,X.glyphOffsetArray,Je,Ge,In,Tn,si,_t).notEnoughRoom)&&ps(Gt.numGlyphs,Ge)}else ps(Gt.numGlyphs,Ge)}}$?X.text.dynamicLayoutVertexBuffer.updateData(Ge):X.icon.dynamicLayoutVertexBuffer.updateData(Ge)}function so(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke){var Ge=fe.glyphStartIndex+fe.numGlyphs,Je=fe.lineStartIndex,vt=fe.lineStartIndex+fe.lineLength,_t=k.getoffsetX(fe.glyphStartIndex),Rt=k.getoffsetX(Ge-1),Pt=Va(X*_t,F,$,G,ee,ce,fe.segment,Je,vt,Pe,Ie,ke);if(!Pt)return null;var Gt=Va(X*Rt,F,$,G,ee,ce,fe.segment,Je,vt,Pe,Ie,ke);return Gt?{first:Pt,last:Gt}:null}function Po(X,k,F,$){return X===e.WritingMode.horizontal&&Math.abs(F.y-k.y)>Math.abs(F.x-k.x)*$?{useVertical:!0}:(X===e.WritingMode.vertical?k.y<F.y:k.x>F.x)?{needsFlipping:!0}:null}function Ro(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge,Je,vt){var _t,Rt=k/24,Pt=X.lineOffsetX*Rt,Gt=X.lineOffsetY*Rt;if(X.numGlyphs>1){var ur=X.glyphStartIndex+X.numGlyphs,hr=X.lineStartIndex,nn=X.lineStartIndex+X.lineLength,Yr=so(Rt,fe,Pt,Gt,F,ke,Ge,X,Pe,ee,Je);if(!Yr)return{notEnoughRoom:!0};var Tn=En(Yr.first.point,ce).point,In=En(Yr.last.point,ce).point;if($&&!F){var si=Po(X.writingMode,Tn,In,vt);if(si)return si}_t=[Yr.first];for(var ni=X.glyphStartIndex+1;ni<ur-1;ni++)_t.push(Va(Rt*fe.getoffsetX(ni),Pt,Gt,F,ke,Ge,X.segment,hr,nn,Pe,ee,Je));_t.push(Yr.last)}else{if($&&!F){var Ci=En(Ge,G).point,Ji=X.lineStartIndex+X.segment+1,ha=new e.Point(Pe.getx(Ji),Pe.gety(Ji)),ya=En(ha,G),to=ya.signedDistanceFromCamera>0?ya.point:So(Ge,ha,Ci,1,G),wo=Po(X.writingMode,Ci,to,vt);if(wo)return wo}var ta=Va(Rt*fe.getoffsetX(X.glyphStartIndex),Pt,Gt,F,ke,Ge,X.segment,X.lineStartIndex,X.lineStartIndex+X.lineLength,Pe,ee,Je);if(!ta)return{notEnoughRoom:!0};_t=[ta]}for(var Ka=0,Ga=_t;Ka<Ga.length;Ka+=1){var ua=Ga[Ka];e.addDynamicAttributes(Ie,ua.point,ua.angle)}return{}}function So(X,k,F,$,G){var ee=En(X.add(X.sub(k)._unit()),G).point,ce=F.sub(ee);return F.add(ce._mult($/ce.mag()))}function Va(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge){var Je=$?X-k:X+k,vt=Je>0?1:-1,_t=0;$&&(vt*=-1,_t=Math.PI),vt<0&&(_t+=Math.PI);for(var Rt=vt>0?fe+ce:fe+ce+1,Pt=G,Gt=G,ur=0,hr=0,nn=Math.abs(Je),Yr=[];ur+hr<=nn;){if((Rt+=vt)<fe||Rt>=Pe)return null;if(Gt=Pt,Yr.push(Pt),(Pt=Ge[Rt])===void 0){var Tn=new e.Point(Ie.getx(Rt),Ie.gety(Rt)),In=En(Tn,ke);if(In.signedDistanceFromCamera>0)Pt=Ge[Rt]=In.point;else{var si=Rt-vt;Pt=So(ur===0?ee:new e.Point(Ie.getx(si),Ie.gety(si)),Tn,Gt,nn-ur+1,ke)}}ur+=hr,hr=Gt.dist(Pt)}var ni=(nn-ur)/hr,Ci=Pt.sub(Gt),Ji=Ci.mult(ni)._add(Gt);Ji._add(Ci._unit()._perp()._mult(F*vt));var ha=_t+Math.atan2(Pt.y-Gt.y,Pt.x-Gt.x);return Yr.push(Ji),{point:Ji,angle:ha,path:Yr}}tn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},tn.prototype.insert=function(X,k,F,$,G){this._forEachCell(k,F,$,G,this._insertBoxCell,this.boxUid++),this.boxKeys.push(X),this.bboxes.push(k),this.bboxes.push(F),this.bboxes.push($),this.bboxes.push(G)},tn.prototype.insertCircle=function(X,k,F,$){this._forEachCell(k-$,F-$,k+$,F+$,this._insertCircleCell,this.circleUid++),this.circleKeys.push(X),this.circles.push(k),this.circles.push(F),this.circles.push($)},tn.prototype._insertBoxCell=function(X,k,F,$,G,ee){this.boxCells[G].push(ee)},tn.prototype._insertCircleCell=function(X,k,F,$,G,ee){this.circleCells[G].push(ee)},tn.prototype._query=function(X,k,F,$,G,ee){if(F<0||X>this.width||$<0||k>this.height)return!G&&[];var ce=[];if(X<=0&&k<=0&&this.width<=F&&this.height<=$){if(G)return!0;for(var fe=0;fe<this.boxKeys.length;fe++)ce.push({key:this.boxKeys[fe],x1:this.bboxes[4*fe],y1:this.bboxes[4*fe+1],x2:this.bboxes[4*fe+2],y2:this.bboxes[4*fe+3]});for(var Pe=0;Pe<this.circleKeys.length;Pe++){var Ie=this.circles[3*Pe],ke=this.circles[3*Pe+1],Ge=this.circles[3*Pe+2];ce.push({key:this.circleKeys[Pe],x1:Ie-Ge,y1:ke-Ge,x2:Ie+Ge,y2:ke+Ge})}return ee?ce.filter(ee):ce}return this._forEachCell(X,k,F,$,this._queryCell,ce,{hitTest:G,seenUids:{box:{},circle:{}}},ee),G?ce.length>0:ce},tn.prototype._queryCircle=function(X,k,F,$,G){var ee=X-F,ce=X+F,fe=k-F,Pe=k+F;if(ce<0||ee>this.width||Pe<0||fe>this.height)return!$&&[];var Ie=[];return this._forEachCell(ee,fe,ce,Pe,this._queryCellCircle,Ie,{hitTest:$,circle:{x:X,y:k,radius:F},seenUids:{box:{},circle:{}}},G),$?Ie.length>0:Ie},tn.prototype.query=function(X,k,F,$,G){return this._query(X,k,F,$,!1,G)},tn.prototype.hitTest=function(X,k,F,$,G){return this._query(X,k,F,$,!0,G)},tn.prototype.hitTestCircle=function(X,k,F,$){return this._queryCircle(X,k,F,!0,$)},tn.prototype._queryCell=function(X,k,F,$,G,ee,ce,fe){var Pe=ce.seenUids,Ie=this.boxCells[G];if(Ie!==null)for(var ke=this.bboxes,Ge=0,Je=Ie;Ge<Je.length;Ge+=1){var vt=Je[Ge];if(!Pe.box[vt]){Pe.box[vt]=!0;var _t=4*vt;if(X<=ke[_t+2]&&k<=ke[_t+3]&&F>=ke[_t+0]&&$>=ke[_t+1]&&(!fe||fe(this.boxKeys[vt]))){if(ce.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[vt],x1:ke[_t],y1:ke[_t+1],x2:ke[_t+2],y2:ke[_t+3]})}}}var Rt=this.circleCells[G];if(Rt!==null)for(var Pt=this.circles,Gt=0,ur=Rt;Gt<ur.length;Gt+=1){var hr=ur[Gt];if(!Pe.circle[hr]){Pe.circle[hr]=!0;var nn=3*hr;if(this._circleAndRectCollide(Pt[nn],Pt[nn+1],Pt[nn+2],X,k,F,$)&&(!fe||fe(this.circleKeys[hr]))){if(ce.hitTest)return ee.push(!0),!0;var Yr=Pt[nn],Tn=Pt[nn+1],In=Pt[nn+2];ee.push({key:this.circleKeys[hr],x1:Yr-In,y1:Tn-In,x2:Yr+In,y2:Tn+In})}}}},tn.prototype._queryCellCircle=function(X,k,F,$,G,ee,ce,fe){var Pe=ce.circle,Ie=ce.seenUids,ke=this.boxCells[G];if(ke!==null)for(var Ge=this.bboxes,Je=0,vt=ke;Je<vt.length;Je+=1){var _t=vt[Je];if(!Ie.box[_t]){Ie.box[_t]=!0;var Rt=4*_t;if(this._circleAndRectCollide(Pe.x,Pe.y,Pe.radius,Ge[Rt+0],Ge[Rt+1],Ge[Rt+2],Ge[Rt+3])&&(!fe||fe(this.boxKeys[_t])))return ee.push(!0),!0}}var Pt=this.circleCells[G];if(Pt!==null)for(var Gt=this.circles,ur=0,hr=Pt;ur<hr.length;ur+=1){var nn=hr[ur];if(!Ie.circle[nn]){Ie.circle[nn]=!0;var Yr=3*nn;if(this._circlesCollide(Gt[Yr],Gt[Yr+1],Gt[Yr+2],Pe.x,Pe.y,Pe.radius)&&(!fe||fe(this.circleKeys[nn])))return ee.push(!0),!0}}},tn.prototype._forEachCell=function(X,k,F,$,G,ee,ce,fe){for(var Pe=this._convertToXCellCoord(X),Ie=this._convertToYCellCoord(k),ke=this._convertToXCellCoord(F),Ge=this._convertToYCellCoord($),Je=Pe;Je<=ke;Je++)for(var vt=Ie;vt<=Ge;vt++)if(G.call(this,X,k,F,$,this.xCellCount*vt+Je,ee,ce,fe))return},tn.prototype._convertToXCellCoord=function(X){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(X*this.xScale)))},tn.prototype._convertToYCellCoord=function(X){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(X*this.yScale)))},tn.prototype._circlesCollide=function(X,k,F,$,G,ee){var ce=$-X,fe=G-k,Pe=F+ee;return Pe*Pe>ce*ce+fe*fe},tn.prototype._circleAndRectCollide=function(X,k,F,$,G,ee,ce){var fe=(ee-$)/2,Pe=Math.abs(X-($+fe));if(Pe>fe+F)return!1;var Ie=(ce-G)/2,ke=Math.abs(k-(G+Ie));if(ke>Ie+F)return!1;if(Pe<=fe||ke<=Ie)return!0;var Ge=Pe-fe,Je=ke-Ie;return Ge*Ge+Je*Je<=F*F};var ws=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ps(X,k){for(var F=0;F<X;F++){var $=k.length;k.resize($+4),k.float32.set(ws,3*$)}}function Ao(X,k,F){var $=k[0],G=k[1];return X[0]=F[0]*$+F[4]*G+F[12],X[1]=F[1]*$+F[5]*G+F[13],X[3]=F[3]*$+F[7]*G+F[15],X}var zs=function(k,F,$){F===void 0&&(F=new tn(k.width+200,k.height+200,25)),$===void 0&&($=new tn(k.width+200,k.height+200,25)),this.transform=k,this.grid=F,this.ignoredGrid=$,this.pitchfactor=Math.cos(k._pitch)*k.cameraToCenterDistance,this.screenRightBoundary=k.width+100,this.screenBottomBoundary=k.height+100,this.gridRightBoundary=k.width+200,this.gridBottomBoundary=k.height+200};function Qa(X,k,F){return k*(e.EXTENT/(X.tileSize*Math.pow(2,F-X.tileID.overscaledZ)))}zs.prototype.placeCollisionBox=function(X,k,F,$,G){var ee=this.projectAndGetPerspectiveRatio($,X.anchorPointX,X.anchorPointY),ce=F*ee.perspectiveRatio,fe=X.x1*ce+ee.point.x,Pe=X.y1*ce+ee.point.y,Ie=X.x2*ce+ee.point.x,ke=X.y2*ce+ee.point.y;return!this.isInsideGrid(fe,Pe,Ie,ke)||!k&&this.grid.hitTest(fe,Pe,Ie,ke,G)?{box:[],offscreen:!1}:{box:[fe,Pe,Ie,ke],offscreen:this.isOffscreen(fe,Pe,Ie,ke)}},zs.prototype.placeCollisionCircles=function(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge,Je){var vt=[],_t=new e.Point(k.anchorX,k.anchorY),Rt=En(_t,ee),Pt=Yn(this.transform.cameraToCenterDistance,Rt.signedDistanceFromCamera),Gt=(Ie?G/Pt:G*Pt)/e.ONE_EM,ur=En(_t,ce).point,hr=so(Gt,$,k.lineOffsetX*Gt,k.lineOffsetY*Gt,!1,ur,_t,k,F,ce,{}),nn=!1,Yr=!1,Tn=!0;if(hr){for(var In=.5*Ge*Pt+Je,si=new e.Point(-100,-100),ni=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Ci=new fn,Ji=hr.first,ha=hr.last,ya=[],to=Ji.path.length-1;to>=1;to--)ya.push(Ji.path[to]);for(var wo=1;wo<ha.path.length;wo++)ya.push(ha.path[wo]);var ta=2.5*In;if(fe){var Ka=ya.map(function(dc){return En(dc,fe)});ya=Ka.some(function(dc){return dc.signedDistanceFromCamera<=0})?[]:Ka.map(function(dc){return dc.point})}var Ga=[];if(ya.length>0){for(var ua=ya[0].clone(),Xa=ya[0].clone(),Ea=1;Ea<ya.length;Ea++)ua.x=Math.min(ua.x,ya[Ea].x),ua.y=Math.min(ua.y,ya[Ea].y),Xa.x=Math.max(Xa.x,ya[Ea].x),Xa.y=Math.max(Xa.y,ya[Ea].y);Ga=ua.x>=si.x&&Xa.x<=ni.x&&ua.y>=si.y&&Xa.y<=ni.y?[ya]:Xa.x<si.x||ua.x>ni.x||Xa.y<si.y||ua.y>ni.y?[]:e.clipLine([ya],si.x,si.y,ni.x,ni.y)}for(var ro=0,Co=Ga;ro<Co.length;ro+=1){var iu;Ci.reset(Co[ro],.25*In),iu=Ci.length<=.5*In?1:Math.ceil(Ci.paddedLength/ta)+1;for(var $s=0;$s<iu;$s++){var Eu=$s/Math.max(iu-1,1),Ds=Ci.lerp(Eu),qs=Ds.x+100,vl=Ds.y+100;vt.push(qs,vl,In,0);var Xu=qs-In,pc=vl-In,Rc=qs+In,Ll=vl+In;if(Tn=Tn&&this.isOffscreen(Xu,pc,Rc,Ll),Yr=Yr||this.isInsideGrid(Xu,pc,Rc,Ll),!X&&this.grid.hitTestCircle(qs,vl,In,ke)&&(nn=!0,!Pe))return{circles:[],offscreen:!1,collisionDetected:nn}}}}return{circles:!Pe&&nn||!Yr?[]:vt,offscreen:Tn,collisionDetected:nn}},zs.prototype.queryRenderedSymbols=function(X){if(X.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var k=[],F=1/0,$=1/0,G=-1/0,ee=-1/0,ce=0,fe=X;ce<fe.length;ce+=1){var Pe=fe[ce],Ie=new e.Point(Pe.x+100,Pe.y+100);F=Math.min(F,Ie.x),$=Math.min($,Ie.y),G=Math.max(G,Ie.x),ee=Math.max(ee,Ie.y),k.push(Ie)}for(var ke={},Ge={},Je=0,vt=this.grid.query(F,$,G,ee).concat(this.ignoredGrid.query(F,$,G,ee));Je<vt.length;Je+=1){var _t=vt[Je],Rt=_t.key;if(ke[Rt.bucketInstanceId]===void 0&&(ke[Rt.bucketInstanceId]={}),!ke[Rt.bucketInstanceId][Rt.featureIndex]){var Pt=[new e.Point(_t.x1,_t.y1),new e.Point(_t.x2,_t.y1),new e.Point(_t.x2,_t.y2),new e.Point(_t.x1,_t.y2)];e.polygonIntersectsPolygon(k,Pt)&&(ke[Rt.bucketInstanceId][Rt.featureIndex]=!0,Ge[Rt.bucketInstanceId]===void 0&&(Ge[Rt.bucketInstanceId]=[]),Ge[Rt.bucketInstanceId].push(Rt.featureIndex))}}return Ge},zs.prototype.insertCollisionBox=function(X,k,F,$,G){(k?this.ignoredGrid:this.grid).insert({bucketInstanceId:F,featureIndex:$,collisionGroupID:G},X[0],X[1],X[2],X[3])},zs.prototype.insertCollisionCircles=function(X,k,F,$,G){for(var ee=k?this.ignoredGrid:this.grid,ce={bucketInstanceId:F,featureIndex:$,collisionGroupID:G},fe=0;fe<X.length;fe+=4)ee.insertCircle(ce,X[fe],X[fe+1],X[fe+2])},zs.prototype.projectAndGetPerspectiveRatio=function(X,k,F){var $=[k,F,0,1];return Ao($,$,X),{point:new e.Point(($[0]/$[3]+1)/2*this.transform.width+100,(-$[1]/$[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/$[3]*.5}},zs.prototype.isOffscreen=function(X,k,F,$){return F<100||X>=this.screenRightBoundary||$<100||k>this.screenBottomBoundary},zs.prototype.isInsideGrid=function(X,k,F,$){return F>=0&&X<this.gridRightBoundary&&$>=0&&k<this.gridBottomBoundary},zs.prototype.getViewportMatrix=function(){var X=e.identity([]);return e.translate(X,X,[-100,-100,0]),X};var fs=function(k,F,$,G){this.opacity=k?Math.max(0,Math.min(1,k.opacity+(k.placed?F:-F))):G&&$?1:0,this.placed=$};fs.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Vs=function(k,F,$,G,ee){this.text=new fs(k?k.text:null,F,$,ee),this.icon=new fs(k?k.icon:null,F,G,ee)};Vs.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ju=function(k,F,$){this.text=k,this.icon=F,this.skipFade=$},ts=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Zs=function(k,F,$,G,ee){this.bucketInstanceId=k,this.featureIndex=F,this.sourceLayerIndex=$,this.bucketIndex=G,this.tileID=ee},ys=function(k){this.crossSourceCollisions=k,this.maxGroupID=0,this.collisionGroups={}};function Lt(X,k,F,$,G){var ee=e.getAnchorAlignment(X),ce=-(ee.horizontalAlign-.5)*k,fe=-(ee.verticalAlign-.5)*F,Pe=e.evaluateVariableOffset(X,$);return new e.Point(ce+Pe[0]*G,fe+Pe[1]*G)}function at(X,k,F,$,G,ee){var ce=X.x1,fe=X.x2,Pe=X.y1,Ie=X.y2,ke=X.anchorPointX,Ge=X.anchorPointY,Je=new e.Point(k,F);return $&&Je._rotate(G?ee:-ee),{x1:ce+Je.x,y1:Pe+Je.y,x2:fe+Je.x,y2:Ie+Je.y,anchorPointX:ke,anchorPointY:Ge}}ys.prototype.get=function(X){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[X]){var k=++this.maxGroupID;this.collisionGroups[X]={ID:k,predicate:function($){return $.collisionGroupID===k}}}return this.collisionGroups[X]};var Ye=function(k,F,$,G){this.transform=k.clone(),this.collisionIndex=new zs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=F,this.retainedQueryData={},this.collisionGroups=new ys($),this.collisionCircleArrays={},this.prevPlacement=G,G&&(G.prevPlacement=void 0),this.placedOrientations={}};function St(X,k,F,$,G){X.emplaceBack(k?1:0,F?1:0,$||0,G||0),X.emplaceBack(k?1:0,F?1:0,$||0,G||0),X.emplaceBack(k?1:0,F?1:0,$||0,G||0),X.emplaceBack(k?1:0,F?1:0,$||0,G||0)}Ye.prototype.getBucketParts=function(X,k,F,$){var G=F.getBucket(k),ee=F.latestFeatureIndex;if(G&&ee&&k.id===G.layerIds[0]){var ce=F.collisionBoxArray,fe=G.layers[0].layout,Pe=Math.pow(2,this.transform.zoom-F.tileID.overscaledZ),Ie=F.tileSize/e.EXTENT,ke=this.transform.calculatePosMatrix(F.tileID.toUnwrapped()),Ge=fe.get("text-pitch-alignment")==="map",Je=fe.get("text-rotation-alignment")==="map",vt=Qa(F,1,this.transform.zoom),_t=Rr(ke,Ge,Je,this.transform,vt),Rt=null;if(Ge){var Pt=Nn(ke,Ge,Je,this.transform,vt);Rt=e.multiply([],this.transform.labelPlaneMatrix,Pt)}this.retainedQueryData[G.bucketInstanceId]=new Zs(G.bucketInstanceId,ee,G.sourceLayerIndex,G.index,F.tileID);var Gt={bucket:G,layout:fe,posMatrix:ke,textLabelPlaneMatrix:_t,labelToScreenMatrix:Rt,scale:Pe,textPixelRatio:Ie,holdingForFade:F.holdingForFade(),collisionBoxArray:ce,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(G.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(G.sourceID)};if($)for(var ur=0,hr=G.sortKeyRanges;ur<hr.length;ur+=1){var nn=hr[ur];X.push({sortKey:nn.sortKey,symbolInstanceStart:nn.symbolInstanceStart,symbolInstanceEnd:nn.symbolInstanceEnd,parameters:Gt})}else X.push({symbolInstanceStart:0,symbolInstanceEnd:G.symbolInstances.length,parameters:Gt})}},Ye.prototype.attemptAnchorPlacement=function(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge,Je,vt,_t){var Rt,Pt=[Ge.textOffset0,Ge.textOffset1],Gt=Lt(X,F,$,Pt,G),ur=this.collisionIndex.placeCollisionBox(at(k,Gt.x,Gt.y,ee,ce,this.transform.angle),ke,fe,Pe,Ie.predicate);if(!_t||this.collisionIndex.placeCollisionBox(at(_t,Gt.x,Gt.y,ee,ce,this.transform.angle),ke,fe,Pe,Ie.predicate).box.length!==0)return ur.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ge.crossTileID]&&this.prevPlacement.placements[Ge.crossTileID]&&this.prevPlacement.placements[Ge.crossTileID].text&&(Rt=this.prevPlacement.variableOffsets[Ge.crossTileID].anchor),this.variableOffsets[Ge.crossTileID]={textOffset:Pt,width:F,height:$,anchor:X,textBoxScale:G,prevAnchor:Rt},this.markUsedJustification(Je,X,Ge,vt),Je.allowVerticalPlacement&&(this.markUsedOrientation(Je,vt,Ge),this.placedOrientations[Ge.crossTileID]=vt),{shift:Gt,placedGlyphBoxes:ur}):void 0},Ye.prototype.placeLayerBucketPart=function(X,k,F){var $=this,G=X.parameters,ee=G.bucket,ce=G.layout,fe=G.posMatrix,Pe=G.textLabelPlaneMatrix,Ie=G.labelToScreenMatrix,ke=G.textPixelRatio,Ge=G.holdingForFade,Je=G.collisionBoxArray,vt=G.partiallyEvaluatedTextSize,_t=G.collisionGroup,Rt=ce.get("text-optional"),Pt=ce.get("icon-optional"),Gt=ce.get("text-allow-overlap"),ur=ce.get("icon-allow-overlap"),hr=ce.get("text-rotation-alignment")==="map",nn=ce.get("text-pitch-alignment")==="map",Yr=ce.get("icon-text-fit")!=="none",Tn=ce.get("symbol-z-order")==="viewport-y",In=Gt&&(ur||!ee.hasIconData()||Pt),si=ur&&(Gt||!ee.hasTextData()||Rt);!ee.collisionArrays&&Je&&ee.deserializeCollisionBoxes(Je);var ni=function(ta,Ka){if(!k[ta.crossTileID])if(Ge)$.placements[ta.crossTileID]=new Ju(!1,!1,!1);else{var Ga,ua=!1,Xa=!1,Ea=!0,ro=null,Co={box:null,offscreen:null},iu={box:null,offscreen:null},$s=null,Eu=null,Ds=0,qs=0,vl=0;Ka.textFeatureIndex?Ds=Ka.textFeatureIndex:ta.useRuntimeCollisionCircles&&(Ds=ta.featureIndex),Ka.verticalTextFeatureIndex&&(qs=Ka.verticalTextFeatureIndex);var Xu=Ka.textBox;if(Xu){var pc=function(Su){var Xl=e.WritingMode.horizontal;if(ee.allowVerticalPlacement&&!Su&&$.prevPlacement){var ql=$.prevPlacement.placedOrientations[ta.crossTileID];ql&&($.placedOrientations[ta.crossTileID]=ql,$.markUsedOrientation(ee,Xl=ql,ta))}return Xl},Rc=function(Su,Xl){if(ee.allowVerticalPlacement&&ta.numVerticalGlyphVertices>0&&Ka.verticalTextBox)for(var ql=0,Dc=ee.writingModes;ql<Dc.length&&(Dc[ql]===e.WritingMode.vertical?(Co=Xl(),iu=Co):Co=Su(),!(Co&&Co.box&&Co.box.length));ql+=1);else Co=Su()};if(ce.get("text-variable-anchor")){var Ll=ce.get("text-variable-anchor");if($.prevPlacement&&$.prevPlacement.variableOffsets[ta.crossTileID]){var dc=$.prevPlacement.variableOffsets[ta.crossTileID];Ll.indexOf(dc.anchor)>0&&(Ll=Ll.filter(function(fl){return fl!==dc.anchor})).unshift(dc.anchor)}var _f=function(Su,Xl,ql){for(var Dc=Su.x2-Su.x1,fh=Su.y2-Su.y1,wh=ta.textBoxScale,xf=Yr&&!ur?Xl:null,gc={box:[],offscreen:!1},Rh=Gt?2*Ll.length:Ll.length,jf=0;jf<Rh;++jf){var Vc=$.attemptAnchorPlacement(Ll[jf%Ll.length],Su,Dc,fh,wh,hr,nn,ke,fe,_t,jf>=Ll.length,ta,ee,ql,xf);if(Vc&&(gc=Vc.placedGlyphBoxes)&&gc.box&&gc.box.length){ua=!0,ro=Vc.shift;break}}return gc};Rc(function(){return _f(Xu,Ka.iconBox,e.WritingMode.horizontal)},function(){var fl=Ka.verticalTextBox;return ee.allowVerticalPlacement&&!(Co&&Co.box&&Co.box.length)&&ta.numVerticalGlyphVertices>0&&fl?_f(fl,Ka.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Co&&(ua=Co.box,Ea=Co.offscreen);var bf=pc(Co&&Co.box);if(!ua&&$.prevPlacement){var Ic=$.prevPlacement.variableOffsets[ta.crossTileID];Ic&&($.variableOffsets[ta.crossTileID]=Ic,$.markUsedJustification(ee,Ic.anchor,ta,bf))}}else{var Kc=function(Su,Xl){var ql=$.collisionIndex.placeCollisionBox(Su,Gt,ke,fe,_t.predicate);return ql&&ql.box&&ql.box.length&&($.markUsedOrientation(ee,Xl,ta),$.placedOrientations[ta.crossTileID]=Xl),ql};Rc(function(){return Kc(Xu,e.WritingMode.horizontal)},function(){var fl=Ka.verticalTextBox;return ee.allowVerticalPlacement&&ta.numVerticalGlyphVertices>0&&fl?Kc(fl,e.WritingMode.vertical):{box:null,offscreen:null}}),pc(Co&&Co.box&&Co.box.length)}}if(ua=(Ga=Co)&&Ga.box&&Ga.box.length>0,Ea=Ga&&Ga.offscreen,ta.useRuntimeCollisionCircles){var kc=ee.text.placedSymbolArray.get(ta.centerJustifiedTextSymbolIndex),zc=e.evaluateSizeForFeature(ee.textSizeData,vt,kc),af=ce.get("text-padding");$s=$.collisionIndex.placeCollisionCircles(Gt,kc,ee.lineVertexArray,ee.glyphOffsetArray,zc,fe,Pe,Ie,F,nn,_t.predicate,ta.collisionCircleDiameter,af),ua=Gt||$s.circles.length>0&&!$s.collisionDetected,Ea=Ea&&$s.offscreen}if(Ka.iconFeatureIndex&&(vl=Ka.iconFeatureIndex),Ka.iconBox){var Gl=function(Su){var Xl=Yr&&ro?at(Su,ro.x,ro.y,hr,nn,$.transform.angle):Su;return $.collisionIndex.placeCollisionBox(Xl,ur,ke,fe,_t.predicate)};Xa=iu&&iu.box&&iu.box.length&&Ka.verticalIconBox?(Eu=Gl(Ka.verticalIconBox)).box.length>0:(Eu=Gl(Ka.iconBox)).box.length>0,Ea=Ea&&Eu.offscreen}var ll=Rt||ta.numHorizontalGlyphVertices===0&&ta.numVerticalGlyphVertices===0,ac=Pt||ta.numIconVertices===0;if(ll||ac?ac?ll||(Xa=Xa&&ua):ua=Xa&&ua:Xa=ua=Xa&&ua,ua&&Ga&&Ga.box&&$.collisionIndex.insertCollisionBox(Ga.box,ce.get("text-ignore-placement"),ee.bucketInstanceId,iu&&iu.box&&qs?qs:Ds,_t.ID),Xa&&Eu&&$.collisionIndex.insertCollisionBox(Eu.box,ce.get("icon-ignore-placement"),ee.bucketInstanceId,vl,_t.ID),$s&&(ua&&$.collisionIndex.insertCollisionCircles($s.circles,ce.get("text-ignore-placement"),ee.bucketInstanceId,Ds,_t.ID),F)){var of=ee.bucketInstanceId,Lc=$.collisionCircleArrays[of];Lc===void 0&&(Lc=$.collisionCircleArrays[of]=new ts);for(var cl=0;cl<$s.circles.length;cl+=4)Lc.circles.push($s.circles[cl+0]),Lc.circles.push($s.circles[cl+1]),Lc.circles.push($s.circles[cl+2]),Lc.circles.push($s.collisionDetected?1:0)}$.placements[ta.crossTileID]=new Ju(ua||In,Xa||si,Ea||ee.justReloaded),k[ta.crossTileID]=!0}};if(Tn)for(var Ci=ee.getSortedSymbolIndexes(this.transform.angle),Ji=Ci.length-1;Ji>=0;--Ji){var ha=Ci[Ji];ni(ee.symbolInstances.get(ha),ee.collisionArrays[ha])}else for(var ya=X.symbolInstanceStart;ya<X.symbolInstanceEnd;ya++)ni(ee.symbolInstances.get(ya),ee.collisionArrays[ya]);if(F&&ee.bucketInstanceId in this.collisionCircleArrays){var to=this.collisionCircleArrays[ee.bucketInstanceId];e.invert(to.invProjMatrix,fe),to.viewportMatrix=this.collisionIndex.getViewportMatrix()}ee.justReloaded=!1},Ye.prototype.markUsedJustification=function(X,k,F,$){var G;G=$===e.WritingMode.vertical?F.verticalPlacedTextSymbolIndex:{left:F.leftJustifiedTextSymbolIndex,center:F.centerJustifiedTextSymbolIndex,right:F.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(k)];for(var ee=0,ce=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex,F.verticalPlacedTextSymbolIndex];ee<ce.length;ee+=1){var fe=ce[ee];fe>=0&&(X.text.placedSymbolArray.get(fe).crossTileID=G>=0&&fe!==G?0:F.crossTileID)}},Ye.prototype.markUsedOrientation=function(X,k,F){for(var $=k===e.WritingMode.horizontal||k===e.WritingMode.horizontalOnly?k:0,G=k===e.WritingMode.vertical?k:0,ee=0,ce=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex];ee<ce.length;ee+=1)X.text.placedSymbolArray.get(ce[ee]).placedOrientation=$;F.verticalPlacedTextSymbolIndex&&(X.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).placedOrientation=G)},Ye.prototype.commit=function(X){this.commitTime=X,this.zoomAtLastRecencyCheck=this.transform.zoom;var k=this.prevPlacement,F=!1;this.prevZoomAdjustment=k?k.zoomAdjustment(this.transform.zoom):0;var $=k?k.symbolFadeChange(X):1,G=k?k.opacities:{},ee=k?k.variableOffsets:{},ce=k?k.placedOrientations:{};for(var fe in this.placements){var Pe=this.placements[fe],Ie=G[fe];Ie?(this.opacities[fe]=new Vs(Ie,$,Pe.text,Pe.icon),F=F||Pe.text!==Ie.text.placed||Pe.icon!==Ie.icon.placed):(this.opacities[fe]=new Vs(null,$,Pe.text,Pe.icon,Pe.skipFade),F=F||Pe.text||Pe.icon)}for(var ke in G){var Ge=G[ke];if(!this.opacities[ke]){var Je=new Vs(Ge,$,!1,!1);Je.isHidden()||(this.opacities[ke]=Je,F=F||Ge.text.placed||Ge.icon.placed)}}for(var vt in ee)this.variableOffsets[vt]||!this.opacities[vt]||this.opacities[vt].isHidden()||(this.variableOffsets[vt]=ee[vt]);for(var _t in ce)this.placedOrientations[_t]||!this.opacities[_t]||this.opacities[_t].isHidden()||(this.placedOrientations[_t]=ce[_t]);F?this.lastPlacementChangeTime=X:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=k?k.lastPlacementChangeTime:X)},Ye.prototype.updateLayerOpacities=function(X,k){for(var F={},$=0,G=k;$<G.length;$+=1){var ee=G[$],ce=ee.getBucket(X);ce&&ee.latestFeatureIndex&&X.id===ce.layerIds[0]&&this.updateBucketOpacities(ce,F,ee.collisionBoxArray)}},Ye.prototype.updateBucketOpacities=function(X,k,F){var $=this;X.hasTextData()&&X.text.opacityVertexArray.clear(),X.hasIconData()&&X.icon.opacityVertexArray.clear(),X.hasIconCollisionBoxData()&&X.iconCollisionBox.collisionVertexArray.clear(),X.hasTextCollisionBoxData()&&X.textCollisionBox.collisionVertexArray.clear();var G=X.layers[0].layout,ee=new Vs(null,0,!1,!1,!0),ce=G.get("text-allow-overlap"),fe=G.get("icon-allow-overlap"),Pe=G.get("text-variable-anchor"),Ie=G.get("text-rotation-alignment")==="map",ke=G.get("text-pitch-alignment")==="map",Ge=G.get("icon-text-fit")!=="none",Je=new Vs(null,0,ce&&(fe||!X.hasIconData()||G.get("icon-optional")),fe&&(ce||!X.hasTextData()||G.get("text-optional")),!0);!X.collisionArrays&&F&&(X.hasIconCollisionBoxData()||X.hasTextCollisionBoxData())&&X.deserializeCollisionBoxes(F);for(var vt=function(ur,hr,nn){for(var Yr=0;Yr<hr/4;Yr++)ur.opacityVertexArray.emplaceBack(nn)},_t=function(ur){var hr=X.symbolInstances.get(ur),nn=hr.numHorizontalGlyphVertices,Yr=hr.numVerticalGlyphVertices,Tn=hr.crossTileID,In=$.opacities[Tn];k[Tn]?In=ee:In||($.opacities[Tn]=In=Je),k[Tn]=!0;var si=hr.numIconVertices>0,ni=$.placedOrientations[hr.crossTileID],Ci=ni===e.WritingMode.vertical,Ji=ni===e.WritingMode.horizontal||ni===e.WritingMode.horizontalOnly;if(nn>0||Yr>0){var ha=na(In.text);vt(X.text,nn,Ci?Oa:ha),vt(X.text,Yr,Ji?Oa:ha);var ya=In.text.isHidden();[hr.rightJustifiedTextSymbolIndex,hr.centerJustifiedTextSymbolIndex,hr.leftJustifiedTextSymbolIndex].forEach(function(Co){Co>=0&&(X.text.placedSymbolArray.get(Co).hidden=ya||Ci?1:0)}),hr.verticalPlacedTextSymbolIndex>=0&&(X.text.placedSymbolArray.get(hr.verticalPlacedTextSymbolIndex).hidden=ya||Ji?1:0);var to=$.variableOffsets[hr.crossTileID];to&&$.markUsedJustification(X,to.anchor,hr,ni);var wo=$.placedOrientations[hr.crossTileID];wo&&($.markUsedJustification(X,"left",hr,wo),$.markUsedOrientation(X,wo,hr))}if(si){var ta=na(In.icon),Ka=!(Ge&&hr.verticalPlacedIconSymbolIndex&&Ci);hr.placedIconSymbolIndex>=0&&(vt(X.icon,hr.numIconVertices,Ka?ta:Oa),X.icon.placedSymbolArray.get(hr.placedIconSymbolIndex).hidden=In.icon.isHidden()),hr.verticalPlacedIconSymbolIndex>=0&&(vt(X.icon,hr.numVerticalIconVertices,Ka?Oa:ta),X.icon.placedSymbolArray.get(hr.verticalPlacedIconSymbolIndex).hidden=In.icon.isHidden())}if(X.hasIconCollisionBoxData()||X.hasTextCollisionBoxData()){var Ga=X.collisionArrays[ur];if(Ga){var ua=new e.Point(0,0);if(Ga.textBox||Ga.verticalTextBox){var Xa=!0;if(Pe){var Ea=$.variableOffsets[Tn];Ea?(ua=Lt(Ea.anchor,Ea.width,Ea.height,Ea.textOffset,Ea.textBoxScale),Ie&&ua._rotate(ke?$.transform.angle:-$.transform.angle)):Xa=!1}Ga.textBox&&St(X.textCollisionBox.collisionVertexArray,In.text.placed,!Xa||Ci,ua.x,ua.y),Ga.verticalTextBox&&St(X.textCollisionBox.collisionVertexArray,In.text.placed,!Xa||Ji,ua.x,ua.y)}var ro=Boolean(!Ji&&Ga.verticalIconBox);Ga.iconBox&&St(X.iconCollisionBox.collisionVertexArray,In.icon.placed,ro,Ge?ua.x:0,Ge?ua.y:0),Ga.verticalIconBox&&St(X.iconCollisionBox.collisionVertexArray,In.icon.placed,!ro,Ge?ua.x:0,Ge?ua.y:0)}}},Rt=0;Rt<X.symbolInstances.length;Rt++)_t(Rt);if(X.sortFeatures(this.transform.angle),this.retainedQueryData[X.bucketInstanceId]&&(this.retainedQueryData[X.bucketInstanceId].featureSortOrder=X.featureSortOrder),X.hasTextData()&&X.text.opacityVertexBuffer&&X.text.opacityVertexBuffer.updateData(X.text.opacityVertexArray),X.hasIconData()&&X.icon.opacityVertexBuffer&&X.icon.opacityVertexBuffer.updateData(X.icon.opacityVertexArray),X.hasIconCollisionBoxData()&&X.iconCollisionBox.collisionVertexBuffer&&X.iconCollisionBox.collisionVertexBuffer.updateData(X.iconCollisionBox.collisionVertexArray),X.hasTextCollisionBoxData()&&X.textCollisionBox.collisionVertexBuffer&&X.textCollisionBox.collisionVertexBuffer.updateData(X.textCollisionBox.collisionVertexArray),X.bucketInstanceId in this.collisionCircleArrays){var Pt=this.collisionCircleArrays[X.bucketInstanceId];X.placementInvProjMatrix=Pt.invProjMatrix,X.placementViewportMatrix=Pt.viewportMatrix,X.collisionCircleArray=Pt.circles,delete this.collisionCircleArrays[X.bucketInstanceId]}},Ye.prototype.symbolFadeChange=function(X){return this.fadeDuration===0?1:(X-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ye.prototype.zoomAdjustment=function(X){return Math.max(0,(this.transform.zoom-X)/1.5)},Ye.prototype.hasTransitions=function(X){return this.stale||X-this.lastPlacementChangeTime<this.fadeDuration},Ye.prototype.stillRecent=function(X,k){var F=this.zoomAtLastRecencyCheck===k?1-this.zoomAdjustment(k):1;return this.zoomAtLastRecencyCheck=k,this.commitTime+this.fadeDuration*F>X},Ye.prototype.setStale=function(){this.stale=!0};var fr=Math.pow(2,25),Gr=Math.pow(2,24),hn=Math.pow(2,17),un=Math.pow(2,16),Qn=Math.pow(2,9),Ai=Math.pow(2,8),bi=Math.pow(2,1);function na(X){if(X.opacity===0&&!X.placed)return 0;if(X.opacity===1&&X.placed)return 4294967295;var k=X.placed?1:0,F=Math.floor(127*X.opacity);return F*fr+k*Gr+F*hn+k*un+F*Qn+k*Ai+F*bi+k}var Oa=0,fo=function(k){this._sortAcrossTiles=k.layout.get("symbol-z-order")!=="viewport-y"&&k.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};fo.prototype.continuePlacement=function(X,k,F,$,G){for(var ee=this._bucketParts;this._currentTileIndex<X.length;)if(k.getBucketParts(ee,$,X[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,G())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort(function(ce,fe){return ce.sortKey-fe.sortKey}));this._currentPartIndex<ee.length;)if(k.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,F),this._currentPartIndex++,G())return!0;return!1};var uo=function(k,F,$,G,ee,ce,fe){this.placement=new Ye(k,ee,ce,fe),this._currentPlacementIndex=F.length-1,this._forceFullPlacement=$,this._showCollisionBoxes=G,this._done=!1};uo.prototype.isDone=function(){return this._done},uo.prototype.continuePlacement=function(X,k,F){for(var $=this,G=e.browser.now(),ee=function(){var Ie=e.browser.now()-G;return!$._forceFullPlacement&&Ie>2};this._currentPlacementIndex>=0;){var ce=k[X[this._currentPlacementIndex]],fe=this.placement.collisionIndex.transform.zoom;if(ce.type==="symbol"&&(!ce.minzoom||ce.minzoom<=fe)&&(!ce.maxzoom||ce.maxzoom>fe)){if(this._inProgressLayer||(this._inProgressLayer=new fo(ce)),this._inProgressLayer.continuePlacement(F[ce.source],this.placement,this._showCollisionBoxes,ce,ee))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},uo.prototype.commit=function(X){return this.placement.commit(X),this.placement};var Uo=512/e.EXTENT/2,lo=function(k,F,$){this.tileID=k,this.indexedSymbolInstances={},this.bucketInstanceId=$;for(var G=0;G<F.length;G++){var ee=F.get(G),ce=ee.key;this.indexedSymbolInstances[ce]||(this.indexedSymbolInstances[ce]=[]),this.indexedSymbolInstances[ce].push({crossTileID:ee.crossTileID,coord:this.getScaledCoordinates(ee,k)})}};lo.prototype.getScaledCoordinates=function(X,k){var F=Uo/Math.pow(2,k.canonical.z-this.tileID.canonical.z);return{x:Math.floor((k.canonical.x*e.EXTENT+X.anchorX)*F),y:Math.floor((k.canonical.y*e.EXTENT+X.anchorY)*F)}},lo.prototype.findMatches=function(X,k,F){for(var $=this.tileID.canonical.z<k.canonical.z?1:Math.pow(2,this.tileID.canonical.z-k.canonical.z),G=0;G<X.length;G++){var ee=X.get(G);if(!ee.crossTileID){var ce=this.indexedSymbolInstances[ee.key];if(ce)for(var fe=this.getScaledCoordinates(ee,k),Pe=0,Ie=ce;Pe<Ie.length;Pe+=1){var ke=Ie[Pe];if(Math.abs(ke.coord.x-fe.x)<=$&&Math.abs(ke.coord.y-fe.y)<=$&&!F[ke.crossTileID]){F[ke.crossTileID]=!0,ee.crossTileID=ke.crossTileID;break}}}}};var go=function(){this.maxCrossTileID=0};go.prototype.generate=function(){return++this.maxCrossTileID};var Ho=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ho.prototype.handleWrapJump=function(X){var k=Math.round((X-this.lng)/360);if(k!==0)for(var F in this.indexes){var $=this.indexes[F],G={};for(var ee in $){var ce=$[ee];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+k),G[ce.tileID.key]=ce}this.indexes[F]=G}this.lng=X},Ho.prototype.addBucket=function(X,k,F){if(this.indexes[X.overscaledZ]&&this.indexes[X.overscaledZ][X.key]){if(this.indexes[X.overscaledZ][X.key].bucketInstanceId===k.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(X.overscaledZ,this.indexes[X.overscaledZ][X.key])}for(var $=0;$<k.symbolInstances.length;$++)k.symbolInstances.get($).crossTileID=0;this.usedCrossTileIDs[X.overscaledZ]||(this.usedCrossTileIDs[X.overscaledZ]={});var G=this.usedCrossTileIDs[X.overscaledZ];for(var ee in this.indexes){var ce=this.indexes[ee];if(Number(ee)>X.overscaledZ)for(var fe in ce){var Pe=ce[fe];Pe.tileID.isChildOf(X)&&Pe.findMatches(k.symbolInstances,X,G)}else{var Ie=ce[X.scaledTo(Number(ee)).key];Ie&&Ie.findMatches(k.symbolInstances,X,G)}}for(var ke=0;ke<k.symbolInstances.length;ke++){var Ge=k.symbolInstances.get(ke);Ge.crossTileID||(Ge.crossTileID=F.generate(),G[Ge.crossTileID]=!0)}return this.indexes[X.overscaledZ]===void 0&&(this.indexes[X.overscaledZ]={}),this.indexes[X.overscaledZ][X.key]=new lo(X,k.symbolInstances,k.bucketInstanceId),!0},Ho.prototype.removeBucketCrossTileIDs=function(X,k){for(var F in k.indexedSymbolInstances)for(var $=0,G=k.indexedSymbolInstances[F];$<G.length;$+=1)delete this.usedCrossTileIDs[X][G[$].crossTileID]},Ho.prototype.removeStaleBuckets=function(X){var k=!1;for(var F in this.indexes){var $=this.indexes[F];for(var G in $)X[$[G].bucketInstanceId]||(this.removeBucketCrossTileIDs(F,$[G]),delete $[G],k=!0)}return k};var Qo=function(){this.layerIndexes={},this.crossTileIDs=new go,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qo.prototype.addLayer=function(X,k,F){var $=this.layerIndexes[X.id];$===void 0&&($=this.layerIndexes[X.id]=new Ho);var G=!1,ee={};$.handleWrapJump(F);for(var ce=0,fe=k;ce<fe.length;ce+=1){var Pe=fe[ce],Ie=Pe.getBucket(X);Ie&&X.id===Ie.layerIds[0]&&(Ie.bucketInstanceId||(Ie.bucketInstanceId=++this.maxBucketInstanceId),$.addBucket(Pe.tileID,Ie,this.crossTileIDs)&&(G=!0),ee[Ie.bucketInstanceId]=!0)}return $.removeStaleBuckets(ee)&&(G=!0),G},Qo.prototype.pruneUnusedLayers=function(X){var k={};for(var F in X.forEach(function($){k[$]=!0}),this.layerIndexes)k[F]||delete this.layerIndexes[F]};var Go=function(k,F){return e.emitValidationErrors(k,F&&F.filter(function($){return $.identifier!=="source.canvas"}))},_s=e.pick(Mt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),bs=e.pick(Mt,["setCenter","setZoom","setBearing","setPitch"]),Ks=function(){var X={},k=e.styleSpec.$version;for(var F in e.styleSpec.$root){var $,G=e.styleSpec.$root[F];G.required&&($=F==="version"?k:G.type==="array"?[]:{})!=null&&(X[F]=$)}return X}(),Yo=function(X){function k(F,$){var G=this;$===void 0&&($={}),X.call(this),this.map=F,this.dispatcher=new N(lr(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new O(F._requestManager,$.localIdeographFontFamily),this.lineAtlas=new j(256,512),this.crossTileSymbolIndex=new Qo,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ee=this;this._rtlTextPluginCallback=k.registerForPluginStateChange(function(ce){ee.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ce.pluginStatus,pluginURL:ce.pluginURL},function(fe,Pe){if(e.triggerPluginCompletionEvent(fe),Pe&&Pe.every(function(ke){return ke}))for(var Ie in ee.sourceCaches)ee.sourceCaches[Ie].reload()})}),this.on("data",function(ce){if(ce.dataType==="source"&&ce.sourceDataType==="metadata"){var fe=G.sourceCaches[ce.sourceId];if(fe){var Pe=fe.getSource();if(Pe&&Pe.vectorLayerIds)for(var Ie in G._layers){var ke=G._layers[Ie];ke.source===Pe.id&&G._validateLayer(ke)}}}})}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.loadURL=function(F,$){var G=this;$===void 0&&($={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ee=typeof $.validate=="boolean"?$.validate:!e.isMapboxURL(F);F=this.map._requestManager.normalizeStyleURL(F,$.accessToken);var ce=this.map._requestManager.transformRequest(F,e.ResourceType.Style);this._request=e.getJSON(ce,function(fe,Pe){G._request=null,fe?G.fire(new e.ErrorEvent(fe)):Pe&&G._load(Pe,ee)})},k.prototype.loadJSON=function(F,$){var G=this;$===void 0&&($={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){G._request=null,G._load(F,$.validate!==!1)})},k.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ks,!1)},k.prototype._load=function(F,$){if(!$||!Go(this,e.validateStyle(F))){for(var G in this._loaded=!0,this.stylesheet=F,F.sources)this.addSource(G,F.sources[G],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs);var ee=On(this.stylesheet.layers);this._order=ee.map(function(Ie){return Ie.id}),this._layers={},this._serializedLayers={};for(var ce=0,fe=ee;ce<fe.length;ce+=1){var Pe=fe[ce];(Pe=e.createStyleLayer(Pe)).setEventedParent(this,{layer:{id:Pe.id}}),this._layers[Pe.id]=Pe,this._serializedLayers[Pe.id]=Pe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},k.prototype._loadSprite=function(F){var $=this;this._spriteRequest=function(G,ee,ce){var fe,Pe,Ie,ke=e.browser.devicePixelRatio>1?"@2x":"",Ge=e.getJSON(ee.transformRequest(ee.normalizeSpriteURL(G,ke,".json"),e.ResourceType.SpriteJSON),function(_t,Rt){Ge=null,Ie||(Ie=_t,fe=Rt,vt())}),Je=e.getImage(ee.transformRequest(ee.normalizeSpriteURL(G,ke,".png"),e.ResourceType.SpriteImage),function(_t,Rt){Je=null,Ie||(Ie=_t,Pe=Rt,vt())});function vt(){if(Ie)ce(Ie);else if(fe&&Pe){var _t=e.browser.getImageData(Pe),Rt={};for(var Pt in fe){var Gt=fe[Pt],ur=Gt.width,hr=Gt.height,nn=Gt.x,Yr=Gt.y,Tn=Gt.sdf,In=Gt.pixelRatio,si=Gt.stretchX,ni=Gt.stretchY,Ci=Gt.content,Ji=new e.RGBAImage({width:ur,height:hr});e.RGBAImage.copy(_t,Ji,{x:nn,y:Yr},{x:0,y:0},{width:ur,height:hr}),Rt[Pt]={data:Ji,pixelRatio:In,sdf:Tn,stretchX:si,stretchY:ni,content:Ci}}ce(null,Rt)}}return{cancel:function(){Ge&&(Ge.cancel(),Ge=null),Je&&(Je.cancel(),Je=null)}}}(F,this.map._requestManager,function(G,ee){if($._spriteRequest=null,G)$.fire(new e.ErrorEvent(G));else if(ee)for(var ce in ee)$.imageManager.addImage(ce,ee[ce]);$.imageManager.setLoaded(!0),$._availableImages=$.imageManager.listImages(),$.dispatcher.broadcast("setImages",$._availableImages),$.fire(new e.Event("data",{dataType:"style"}))})},k.prototype._validateLayer=function(F){var $=this.sourceCaches[F.source];if($){var G=F.sourceLayer;if(G){var ee=$.getSource();(ee.type==="geojson"||ee.vectorLayerIds&&ee.vectorLayerIds.indexOf(G)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+G+'" does not exist on source "'+ee.id+'" as specified by style layer "'+F.id+'"')))}}},k.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()},k.prototype._serializeLayers=function(F){for(var $=[],G=0,ee=F;G<ee.length;G+=1){var ce=this._layers[ee[G]];ce.type!=="custom"&&$.push(ce.serialize())}return $},k.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(var $ in this._layers)if(this._layers[$].hasTransition())return!0;return!1},k.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},k.prototype.update=function(F){if(this._loaded){var $=this._changed;if(this._changed){var G=Object.keys(this._updatedLayers),ee=Object.keys(this._removedLayers);for(var ce in(G.length||ee.length)&&this._updateWorkerLayers(G,ee),this._updatedSources){var fe=this._updatedSources[ce];fe==="reload"?this._reloadSource(ce):fe==="clear"&&this._clearSource(ce)}for(var Pe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Pe].updateTransitions(F);this.light.updateTransitions(F),this._resetUpdates()}var Ie={};for(var ke in this.sourceCaches){var Ge=this.sourceCaches[ke];Ie[ke]=Ge.used,Ge.used=!1}for(var Je=0,vt=this._order;Je<vt.length;Je+=1){var _t=this._layers[vt[Je]];_t.recalculate(F,this._availableImages),!_t.isHidden(F.zoom)&&_t.source&&(this.sourceCaches[_t.source].used=!0)}for(var Rt in Ie){var Pt=this.sourceCaches[Rt];Ie[Rt]!==Pt.used&&Pt.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Rt}))}this.light.recalculate(F),this.z=F.zoom,$&&this.fire(new e.Event("data",{dataType:"style"}))}},k.prototype._updateTilesForChangedImages=function(){var F=Object.keys(this._changedImages);if(F.length){for(var $ in this.sourceCaches)this.sourceCaches[$].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}},k.prototype._updateWorkerLayers=function(F,$){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(F),removedIds:$})},k.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},k.prototype.setState=function(F){var $=this;if(this._checkLoaded(),Go(this,e.validateStyle(F)))return!1;(F=e.clone$1(F)).layers=On(F.layers);var G=function(ce,fe){if(!ce)return[{command:Mt.setStyle,args:[fe]}];var Pe=[];try{if(!e.deepEqual(ce.version,fe.version))return[{command:Mt.setStyle,args:[fe]}];e.deepEqual(ce.center,fe.center)||Pe.push({command:Mt.setCenter,args:[fe.center]}),e.deepEqual(ce.zoom,fe.zoom)||Pe.push({command:Mt.setZoom,args:[fe.zoom]}),e.deepEqual(ce.bearing,fe.bearing)||Pe.push({command:Mt.setBearing,args:[fe.bearing]}),e.deepEqual(ce.pitch,fe.pitch)||Pe.push({command:Mt.setPitch,args:[fe.pitch]}),e.deepEqual(ce.sprite,fe.sprite)||Pe.push({command:Mt.setSprite,args:[fe.sprite]}),e.deepEqual(ce.glyphs,fe.glyphs)||Pe.push({command:Mt.setGlyphs,args:[fe.glyphs]}),e.deepEqual(ce.transition,fe.transition)||Pe.push({command:Mt.setTransition,args:[fe.transition]}),e.deepEqual(ce.light,fe.light)||Pe.push({command:Mt.setLight,args:[fe.light]});var Ie={},ke=[];(function(Je,vt,_t,Rt){var Pt;for(Pt in vt=vt||{},Je=Je||{})Je.hasOwnProperty(Pt)&&(vt.hasOwnProperty(Pt)||$t(Pt,_t,Rt));for(Pt in vt)vt.hasOwnProperty(Pt)&&(Je.hasOwnProperty(Pt)?e.deepEqual(Je[Pt],vt[Pt])||(Je[Pt].type==="geojson"&&vt[Pt].type==="geojson"&&Mr(Je,vt,Pt)?_t.push({command:Mt.setGeoJSONSourceData,args:[Pt,vt[Pt].data]}):Tr(Pt,vt,_t,Rt)):er(Pt,vt,_t))})(ce.sources,fe.sources,ke,Ie);var Ge=[];ce.layers&&ce.layers.forEach(function(Je){Ie[Je.source]?Pe.push({command:Mt.removeLayer,args:[Je.id]}):Ge.push(Je)}),Pe=Pe.concat(ke),function(Je,vt,_t){vt=vt||[];var Rt,Pt,Gt,ur,hr,nn,Yr,Tn=(Je=Je||[]).map(wr),In=vt.map(wr),si=Je.reduce(Ur,{}),ni=vt.reduce(Ur,{}),Ci=Tn.slice(),Ji=Object.create(null);for(Rt=0,Pt=0;Rt<Tn.length;Rt++)ni.hasOwnProperty(Gt=Tn[Rt])?Pt++:(_t.push({command:Mt.removeLayer,args:[Gt]}),Ci.splice(Ci.indexOf(Gt,Pt),1));for(Rt=0,Pt=0;Rt<In.length;Rt++)Ci[Ci.length-1-Rt]!==(Gt=In[In.length-1-Rt])&&(si.hasOwnProperty(Gt)?(_t.push({command:Mt.removeLayer,args:[Gt]}),Ci.splice(Ci.lastIndexOf(Gt,Ci.length-Pt),1)):Pt++,_t.push({command:Mt.addLayer,args:[ni[Gt],nn=Ci[Ci.length-Rt]]}),Ci.splice(Ci.length-Rt,0,Gt),Ji[Gt]=!0);for(Rt=0;Rt<In.length;Rt++)if(ur=si[Gt=In[Rt]],hr=ni[Gt],!Ji[Gt]&&!e.deepEqual(ur,hr))if(e.deepEqual(ur.source,hr.source)&&e.deepEqual(ur["source-layer"],hr["source-layer"])&&e.deepEqual(ur.type,hr.type)){for(Yr in Hr(ur.layout,hr.layout,_t,Gt,null,Mt.setLayoutProperty),Hr(ur.paint,hr.paint,_t,Gt,null,Mt.setPaintProperty),e.deepEqual(ur.filter,hr.filter)||_t.push({command:Mt.setFilter,args:[Gt,hr.filter]}),e.deepEqual(ur.minzoom,hr.minzoom)&&e.deepEqual(ur.maxzoom,hr.maxzoom)||_t.push({command:Mt.setLayerZoomRange,args:[Gt,hr.minzoom,hr.maxzoom]}),ur)ur.hasOwnProperty(Yr)&&Yr!=="layout"&&Yr!=="paint"&&Yr!=="filter"&&Yr!=="metadata"&&Yr!=="minzoom"&&Yr!=="maxzoom"&&(Yr.indexOf("paint.")===0?Hr(ur[Yr],hr[Yr],_t,Gt,Yr.slice(6),Mt.setPaintProperty):e.deepEqual(ur[Yr],hr[Yr])||_t.push({command:Mt.setLayerProperty,args:[Gt,Yr,hr[Yr]]}));for(Yr in hr)hr.hasOwnProperty(Yr)&&!ur.hasOwnProperty(Yr)&&Yr!=="layout"&&Yr!=="paint"&&Yr!=="filter"&&Yr!=="metadata"&&Yr!=="minzoom"&&Yr!=="maxzoom"&&(Yr.indexOf("paint.")===0?Hr(ur[Yr],hr[Yr],_t,Gt,Yr.slice(6),Mt.setPaintProperty):e.deepEqual(ur[Yr],hr[Yr])||_t.push({command:Mt.setLayerProperty,args:[Gt,Yr,hr[Yr]]}))}else _t.push({command:Mt.removeLayer,args:[Gt]}),nn=Ci[Ci.lastIndexOf(Gt)+1],_t.push({command:Mt.addLayer,args:[hr,nn]})}(Ge,fe.layers,Pe)}catch(Je){console.warn("Unable to compute style diff:",Je),Pe=[{command:Mt.setStyle,args:[fe]}]}return Pe}(this.serialize(),F).filter(function(ce){return!(ce.command in bs)});if(G.length===0)return!1;var ee=G.filter(function(ce){return!(ce.command in _s)});if(ee.length>0)throw new Error("Unimplemented: "+ee.map(function(ce){return ce.command}).join(", ")+".");return G.forEach(function(ce){ce.command!=="setTransition"&&$[ce.command].apply($,ce.args)}),this.stylesheet=F,!0},k.prototype.addImage=function(F,$){if(this.getImage(F))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(F,$),this._afterImageUpdated(F)},k.prototype.updateImage=function(F,$){this.imageManager.updateImage(F,$)},k.prototype.getImage=function(F){return this.imageManager.getImage(F)},k.prototype.removeImage=function(F){if(!this.getImage(F))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(F),this._afterImageUpdated(F)},k.prototype._afterImageUpdated=function(F){this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))},k.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},k.prototype.addSource=function(F,$,G){var ee=this;if(G===void 0&&(G={}),this._checkLoaded(),this.sourceCaches[F]!==void 0)throw new Error("There is already a source with this ID");if(!$.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys($).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf($.type)>=0&&this._validate(e.validateStyle.source,"sources."+F,$,null,G))){this.map&&this.map._collectResourceTiming&&($.collectResourceTiming=!0);var ce=this.sourceCaches[F]=new yt(F,$,this.dispatcher);ce.style=this,ce.setEventedParent(this,function(){return{isSourceLoaded:ee.loaded(),source:ce.serialize(),sourceId:F}}),ce.onAdd(this.map),this._changed=!0}},k.prototype.removeSource=function(F){if(this._checkLoaded(),this.sourceCaches[F]===void 0)throw new Error("There is no source with this ID");for(var $ in this._layers)if(this._layers[$].source===F)return this.fire(new e.ErrorEvent(new Error('Source "'+F+'" cannot be removed while layer "'+$+'" is using it.')));var G=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],G.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),G.setEventedParent(null),G.clearTiles(),G.onRemove&&G.onRemove(this.map),this._changed=!0},k.prototype.setGeoJSONSourceData=function(F,$){this._checkLoaded(),this.sourceCaches[F].getSource().setData($),this._changed=!0},k.prototype.getSource=function(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()},k.prototype.addLayer=function(F,$,G){G===void 0&&(G={}),this._checkLoaded();var ee=F.id;if(this.getLayer(ee))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ee+'" already exists on this map')));else{var ce;if(F.type==="custom"){if(Go(this,e.validateCustomStyleLayer(F)))return;ce=e.createStyleLayer(F)}else{if(typeof F.source=="object"&&(this.addSource(ee,F.source),F=e.clone$1(F),F=e.extend(F,{source:ee})),this._validate(e.validateStyle.layer,"layers."+ee,F,{arrayIndex:-1},G))return;ce=e.createStyleLayer(F),this._validateLayer(ce),ce.setEventedParent(this,{layer:{id:ee}}),this._serializedLayers[ce.id]=ce.serialize()}var fe=$?this._order.indexOf($):this._order.length;if($&&fe===-1)this.fire(new e.ErrorEvent(new Error('Layer with id "'+$+'" does not exist on this map.')));else{if(this._order.splice(fe,0,ee),this._layerOrderChanged=!0,this._layers[ee]=ce,this._removedLayers[ee]&&ce.source&&ce.type!=="custom"){var Pe=this._removedLayers[ee];delete this._removedLayers[ee],Pe.type!==ce.type?this._updatedSources[ce.source]="clear":(this._updatedSources[ce.source]="reload",this.sourceCaches[ce.source].pause())}this._updateLayer(ce),ce.onAdd&&ce.onAdd(this.map)}}},k.prototype.moveLayer=function(F,$){if(this._checkLoaded(),this._changed=!0,this._layers[F]){if(F!==$){var G=this._order.indexOf(F);this._order.splice(G,1);var ee=$?this._order.indexOf($):this._order.length;$&&ee===-1?this.fire(new e.ErrorEvent(new Error('Layer with id "'+$+'" does not exist on this map.'))):(this._order.splice(ee,0,F),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be moved.")))},k.prototype.removeLayer=function(F){this._checkLoaded();var $=this._layers[F];if($){$.setEventedParent(null);var G=this._order.indexOf(F);this._order.splice(G,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=$,delete this._layers[F],delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],$.onRemove&&$.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be removed.")))},k.prototype.getLayer=function(F){return this._layers[F]},k.prototype.hasLayer=function(F){return F in this._layers},k.prototype.setLayerZoomRange=function(F,$,G){this._checkLoaded();var ee=this.getLayer(F);ee?ee.minzoom===$&&ee.maxzoom===G||($!=null&&(ee.minzoom=$),G!=null&&(ee.maxzoom=G),this._updateLayer(ee)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot have zoom extent.")))},k.prototype.setFilter=function(F,$,G){G===void 0&&(G={}),this._checkLoaded();var ee=this.getLayer(F);if(ee){if(!e.deepEqual(ee.filter,$))return $==null?(ee.filter=void 0,void this._updateLayer(ee)):void(this._validate(e.validateStyle.filter,"layers."+ee.id+".filter",$,null,G)||(ee.filter=e.clone$1($),this._updateLayer(ee)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be filtered.")))},k.prototype.getFilter=function(F){return e.clone$1(this.getLayer(F).filter)},k.prototype.setLayoutProperty=function(F,$,G,ee){ee===void 0&&(ee={}),this._checkLoaded();var ce=this.getLayer(F);ce?e.deepEqual(ce.getLayoutProperty($),G)||(ce.setLayoutProperty($,G,ee),this._updateLayer(ce)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},k.prototype.getLayoutProperty=function(F,$){var G=this.getLayer(F);if(G)return G.getLayoutProperty($);this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style.")))},k.prototype.setPaintProperty=function(F,$,G,ee){ee===void 0&&(ee={}),this._checkLoaded();var ce=this.getLayer(F);ce?e.deepEqual(ce.getPaintProperty($),G)||(ce.setPaintProperty($,G,ee)&&this._updateLayer(ce),this._changed=!0,this._updatedPaintProps[F]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},k.prototype.getPaintProperty=function(F,$){return this.getLayer(F).getPaintProperty($)},k.prototype.setFeatureState=function(F,$){this._checkLoaded();var G=F.source,ee=F.sourceLayer,ce=this.sourceCaches[G];if(ce!==void 0){var fe=ce.getSource().type;fe==="geojson"&&ee?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):fe!=="vector"||ee?(F.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ce.setFeatureState(ee,F.id,$)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},k.prototype.removeFeatureState=function(F,$){this._checkLoaded();var G=F.source,ee=this.sourceCaches[G];if(ee!==void 0){var ce=ee.getSource().type,fe=ce==="vector"?F.sourceLayer:void 0;ce!=="vector"||fe?$&&typeof F.id!="string"&&typeof F.id!="number"?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):ee.removeFeatureState(fe,F.id,$):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},k.prototype.getFeatureState=function(F){this._checkLoaded();var $=F.source,G=F.sourceLayer,ee=this.sourceCaches[$];if(ee!==void 0){if(ee.getSource().type!=="vector"||G)return F.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.getFeatureState(G,F.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+$+"' does not exist in the map's style.")))},k.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},k.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(F){return F.serialize()}),layers:this._serializeLayers(this._order)},function(F){return F!==void 0})},k.prototype._updateLayer=function(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&this.sourceCaches[F.source].getSource().type!=="raster"&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._changed=!0},k.prototype._flattenAndSortRenderedFeatures=function(F){for(var $=this,G=function(ni){return $._layers[ni].type==="fill-extrusion"},ee={},ce=[],fe=this._order.length-1;fe>=0;fe--){var Pe=this._order[fe];if(G(Pe)){ee[Pe]=fe;for(var Ie=0,ke=F;Ie<ke.length;Ie+=1){var Ge=ke[Ie][Pe];if(Ge)for(var Je=0,vt=Ge;Je<vt.length;Je+=1)ce.push(vt[Je])}}}ce.sort(function(si,ni){return ni.intersectionZ-si.intersectionZ});for(var _t=[],Rt=this._order.length-1;Rt>=0;Rt--){var Pt=this._order[Rt];if(G(Pt))for(var Gt=ce.length-1;Gt>=0;Gt--){var ur=ce[Gt].feature;if(ee[ur.layer.id]<Rt)break;_t.push(ur),ce.pop()}else for(var hr=0,nn=F;hr<nn.length;hr+=1){var Yr=nn[hr][Pt];if(Yr)for(var Tn=0,In=Yr;Tn<In.length;Tn+=1)_t.push(In[Tn].feature)}}return _t},k.prototype.queryRenderedFeatures=function(F,$,G){$&&$.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",$.filter,null,$);var ee={};if($&&$.layers){if(!Array.isArray($.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ce=0,fe=$.layers;ce<fe.length;ce+=1){var Pe=fe[ce],Ie=this._layers[Pe];if(!Ie)return this.fire(new e.ErrorEvent(new Error("The layer '"+Pe+"' does not exist in the map's style and cannot be queried for features."))),[];ee[Ie.source]=!0}}var ke=[];for(var Ge in $.availableImages=this._availableImages,this.sourceCaches)$.layers&&!ee[Ge]||ke.push(rt(this.sourceCaches[Ge],this._layers,this._serializedLayers,F,$,G));return this.placement&&ke.push(function(Je,vt,_t,Rt,Pt,Gt,ur){for(var hr={},nn=Gt.queryRenderedSymbols(Rt),Yr=[],Tn=0,In=Object.keys(nn).map(Number);Tn<In.length;Tn+=1)Yr.push(ur[In[Tn]]);Yr.sort(Fe);for(var si=function(){var to=Ci[ni],wo=to.featureIndex.lookupSymbolFeatures(nn[to.bucketInstanceId],vt,to.bucketIndex,to.sourceLayerIndex,Pt.filter,Pt.layers,Pt.availableImages,Je);for(var ta in wo){var Ka=hr[ta]=hr[ta]||[],Ga=wo[ta];Ga.sort(function(Ea,ro){var Co=to.featureSortOrder;if(Co){var iu=Co.indexOf(Ea.featureIndex);return Co.indexOf(ro.featureIndex)-iu}return ro.featureIndex-Ea.featureIndex});for(var ua=0,Xa=Ga;ua<Xa.length;ua+=1)Ka.push(Xa[ua])}},ni=0,Ci=Yr;ni<Ci.length;ni+=1)si();var Ji=function(to){hr[to].forEach(function(wo){var ta=wo.feature,Ka=_t[Je[to].source].getFeatureState(ta.layer["source-layer"],ta.id);ta.source=ta.layer.source,ta.layer["source-layer"]&&(ta.sourceLayer=ta.layer["source-layer"]),ta.state=Ka})};for(var ha in hr)Ji(ha);return hr}(this._layers,this._serializedLayers,this.sourceCaches,F,$,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ke)},k.prototype.querySourceFeatures=function(F,$){$&&$.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",$.filter,null,$);var G=this.sourceCaches[F];return G?function(ee,ce){for(var fe=ee.getRenderableIds().map(function(vt){return ee.getTileByID(vt)}),Pe=[],Ie={},ke=0;ke<fe.length;ke++){var Ge=fe[ke],Je=Ge.tileID.canonical.key;Ie[Je]||(Ie[Je]=!0,Ge.querySourceFeatures(Pe,ce))}return Pe}(G,$):[]},k.prototype.addSourceType=function(F,$,G){return k.getSourceType(F)?G(new Error('A source type called "'+F+'" already exists.')):(k.setSourceType(F,$),$.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:F,url:$.workerSourceURL},G):G(null,null))},k.prototype.getLight=function(){return this.light.getLight()},k.prototype.setLight=function(F,$){$===void 0&&($={}),this._checkLoaded();var G=this.light.getLight(),ee=!1;for(var ce in F)if(!e.deepEqual(F[ce],G[ce])){ee=!0;break}if(ee){var fe={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,$),this.light.updateTransitions(fe)}},k.prototype._validate=function(F,$,G,ee,ce){return ce===void 0&&(ce={}),(!ce||ce.validate!==!1)&&Go(this,F.call(e.validateStyle,e.extend({key:$,style:this.serialize(),value:G,styleSpec:e.styleSpec},ee)))},k.prototype._remove=function(){for(var F in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[F].setEventedParent(null);for(var $ in this.sourceCaches)this.sourceCaches[$].clearTiles(),this.sourceCaches[$].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},k.prototype._clearSource=function(F){this.sourceCaches[F].clearTiles()},k.prototype._reloadSource=function(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()},k.prototype._updateSources=function(F){for(var $ in this.sourceCaches)this.sourceCaches[$].update(F)},k.prototype._generateCollisionBoxes=function(){for(var F in this.sourceCaches)this._reloadSource(F)},k.prototype._updatePlacement=function(F,$,G,ee,ce){ce===void 0&&(ce=!1);for(var fe=!1,Pe=!1,Ie={},ke=0,Ge=this._order;ke<Ge.length;ke+=1){var Je=this._layers[Ge[ke]];if(Je.type==="symbol"){if(!Ie[Je.source]){var vt=this.sourceCaches[Je.source];Ie[Je.source]=vt.getRenderableIds(!0).map(function(ur){return vt.getTileByID(ur)}).sort(function(ur,hr){return hr.tileID.overscaledZ-ur.tileID.overscaledZ||(ur.tileID.isLessThan(hr.tileID)?-1:1)})}var _t=this.crossTileSymbolIndex.addLayer(Je,Ie[Je.source],F.center.lng);fe=fe||_t}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ce=ce||this._layerOrderChanged||G===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),F.zoom))&&(this.pauseablePlacement=new uo(F,this._order,ce,$,G,ee,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ie),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Pe=!0),fe&&this.pauseablePlacement.placement.setStale()),Pe||fe)for(var Rt=0,Pt=this._order;Rt<Pt.length;Rt+=1){var Gt=this._layers[Pt[Rt]];Gt.type==="symbol"&&this.placement.updateLayerOpacities(Gt,Ie[Gt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},k.prototype._releaseSymbolFadeTiles=function(){for(var F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()},k.prototype.getImages=function(F,$,G){this.imageManager.getImages($.icons,G),this._updateTilesForChangedImages();var ee=this.sourceCaches[$.source];ee&&ee.setDependencies($.tileID.key,$.type,$.icons)},k.prototype.getGlyphs=function(F,$,G){this.glyphManager.getGlyphs($.stacks,G)},k.prototype.getResource=function(F,$,G){return e.makeRequest($,G)},k}(e.Evented);Yo.getSourceType=function(X){return _e[X]},Yo.setSourceType=function(X,k){_e[X]=k},Yo.registerForPluginStateChange=e.registerForPluginStateChange;var mo=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Rs=To(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),rs=To(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Za=To(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),qa=To(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Fs=To("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ou=To(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ws=To(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),nl=To("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Bu=To("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),su=To("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),zu=To(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),uu=To(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),hu=To(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Qu=To(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),qo=To(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),du=To(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ns=To(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ru=To(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),_u=To(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Hs=To(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ns=To(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Js=To(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Fu=To(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),vu=To(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Vu=To(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Nu=To(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function To(X,k){var F=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,$=k.match(/attribute ([\w]+) ([\w]+)/g),G=X.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=k.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ce=ee?ee.concat(G):G,fe={};return{fragmentSource:X=X.replace(F,function(Pe,Ie,ke,Ge,Je){return fe[Je]=!0,Ie==="define"?`
#ifndef HAS_UNIFORM_u_`+Je+`
varying `+ke+" "+Ge+" "+Je+`;
#else
uniform `+ke+" "+Ge+" u_"+Je+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Je+`
    `+ke+" "+Ge+" "+Je+" = u_"+Je+`;
#endif
`}),vertexSource:k=k.replace(F,function(Pe,Ie,ke,Ge,Je){var vt=Ge==="float"?"vec2":"vec4",_t=Je.match(/color/)?"color":vt;return fe[Je]?Ie==="define"?`
#ifndef HAS_UNIFORM_u_`+Je+`
uniform lowp float u_`+Je+`_t;
attribute `+ke+" "+vt+" a_"+Je+`;
varying `+ke+" "+Ge+" "+Je+`;
#else
uniform `+ke+" "+Ge+" u_"+Je+`;
#endif
`:_t==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Je+`
    `+Je+" = a_"+Je+`;
#else
    `+ke+" "+Ge+" "+Je+" = u_"+Je+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Je+`
    `+Je+" = unpack_mix_"+_t+"(a_"+Je+", u_"+Je+`_t);
#else
    `+ke+" "+Ge+" "+Je+" = u_"+Je+`;
#endif
`:Ie==="define"?`
#ifndef HAS_UNIFORM_u_`+Je+`
uniform lowp float u_`+Je+`_t;
attribute `+ke+" "+vt+" a_"+Je+`;
#else
uniform `+ke+" "+Ge+" u_"+Je+`;
#endif
`:_t==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Je+`
    `+ke+" "+Ge+" "+Je+" = a_"+Je+`;
#else
    `+ke+" "+Ge+" "+Je+" = u_"+Je+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Je+`
    `+ke+" "+Ge+" "+Je+" = unpack_mix_"+_t+"(a_"+Je+", u_"+Je+`_t);
#else
    `+ke+" "+Ge+" "+Je+" = u_"+Je+`;
#endif
`}),staticAttributes:$,staticUniforms:ce}}var Wu=Object.freeze({__proto__:null,prelude:Rs,background:rs,backgroundPattern:Za,circle:qa,clippingMask:Fs,heatmap:Ou,heatmapTexture:Ws,collisionBox:nl,collisionCircle:Bu,debug:su,fill:zu,fillOutline:uu,fillOutlinePattern:hu,fillPattern:Qu,fillExtrusion:qo,fillExtrusionPattern:du,hillshadePrepare:ns,hillshade:ru,line:_u,lineGradient:Hs,linePattern:Ns,lineSDF:Js,raster:Fu,symbolIcon:vu,symbolSDF:Vu,symbolTextAndIcon:Nu}),Hu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ru(X){for(var k=[],F=0;F<X.length;F++)if(X[F]!==null){var $=X[F].split(" ");k.push($.pop())}return k}Hu.prototype.bind=function(X,k,F,$,G,ee,ce,fe){this.context=X;for(var Pe=this.boundPaintVertexBuffers.length!==$.length,Ie=0;!Pe&&Ie<$.length;Ie++)this.boundPaintVertexBuffers[Ie]!==$[Ie]&&(Pe=!0);X.extVertexArrayObject&&this.vao&&this.boundProgram===k&&this.boundLayoutVertexBuffer===F&&!Pe&&this.boundIndexBuffer===G&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===ce&&this.boundDynamicVertexBuffer2===fe?(X.bindVertexArrayOES.set(this.vao),ce&&ce.bind(),G&&G.dynamicDraw&&G.bind(),fe&&fe.bind()):this.freshBind(k,F,$,G,ee,ce,fe)},Hu.prototype.freshBind=function(X,k,F,$,G,ee,ce){var fe,Pe=X.numAttributes,Ie=this.context,ke=Ie.gl;if(Ie.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ie.extVertexArrayObject.createVertexArrayOES(),Ie.bindVertexArrayOES.set(this.vao),fe=0,this.boundProgram=X,this.boundLayoutVertexBuffer=k,this.boundPaintVertexBuffers=F,this.boundIndexBuffer=$,this.boundVertexOffset=G,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=ce;else{fe=Ie.currentNumAttributes||0;for(var Ge=Pe;Ge<fe;Ge++)ke.disableVertexAttribArray(Ge)}k.enableAttributes(ke,X);for(var Je=0,vt=F;Je<vt.length;Je+=1)vt[Je].enableAttributes(ke,X);ee&&ee.enableAttributes(ke,X),ce&&ce.enableAttributes(ke,X),k.bind(),k.setVertexAttribPointers(ke,X,G);for(var _t=0,Rt=F;_t<Rt.length;_t+=1){var Pt=Rt[_t];Pt.bind(),Pt.setVertexAttribPointers(ke,X,G)}ee&&(ee.bind(),ee.setVertexAttribPointers(ke,X,G)),$&&$.bind(),ce&&(ce.bind(),ce.setVertexAttribPointers(ke,X,G)),Ie.currentNumAttributes=Pe},Hu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var $o=function(k,F,$,G,ee,ce){var fe=k.gl;this.program=fe.createProgram();for(var Pe=Ru($.staticAttributes),Ie=G?G.getBinderAttributes():[],ke=Pe.concat(Ie),Ge=$.staticUniforms?Ru($.staticUniforms):[],Je=G?G.getBinderUniforms():[],vt=[],_t=0,Rt=Ge.concat(Je);_t<Rt.length;_t+=1){var Pt=Rt[_t];vt.indexOf(Pt)<0&&vt.push(Pt)}var Gt=G?G.defines():[];ce&&Gt.push("#define OVERDRAW_INSPECTOR;");var ur=Gt.concat(Rs.fragmentSource,$.fragmentSource).join(`
`),hr=Gt.concat(Rs.vertexSource,$.vertexSource).join(`
`),nn=fe.createShader(fe.FRAGMENT_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(nn,ur),fe.compileShader(nn),fe.attachShader(this.program,nn);var Yr=fe.createShader(fe.VERTEX_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(Yr,hr),fe.compileShader(Yr),fe.attachShader(this.program,Yr),this.attributes={};var Tn={};this.numAttributes=ke.length;for(var In=0;In<this.numAttributes;In++)ke[In]&&(fe.bindAttribLocation(this.program,In,ke[In]),this.attributes[ke[In]]=In);fe.linkProgram(this.program),fe.deleteShader(Yr),fe.deleteShader(nn);for(var si=0;si<vt.length;si++){var ni=vt[si];if(ni&&!Tn[ni]){var Ci=fe.getUniformLocation(this.program,ni);Ci&&(Tn[ni]=Ci)}}this.fixedUniforms=ee(k,Tn),this.binderUniforms=G?G.getUniforms(k,Tn):[]}}};function dl(X,k,F){var $=1/Qa(F,1,k.transform.tileZoom),G=Math.pow(2,F.tileID.overscaledZ),ee=F.tileSize*Math.pow(2,k.transform.tileZoom)/G,ce=ee*(F.tileID.canonical.x+F.tileID.wrap*G),fe=ee*F.tileID.canonical.y;return{u_image:0,u_texsize:F.imageAtlasTexture.size,u_scale:[$,X.fromScale,X.toScale],u_fade:X.t,u_pixel_coord_upper:[ce>>16,fe>>16],u_pixel_coord_lower:[65535&ce,65535&fe]}}$o.prototype.draw=function(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge,Je,vt,_t,Rt){var Pt,Gt=X.gl;if(!this.failedToCreate){for(var ur in X.program.set(this.program),X.setDepthMode(F),X.setStencilMode($),X.setColorMode(G),X.setCullFace(ee),this.fixedUniforms)this.fixedUniforms[ur].set(ce[ur]);vt&&vt.setUniforms(X,this.binderUniforms,Ge,{zoom:Je});for(var hr=(Pt={},Pt[Gt.LINES]=2,Pt[Gt.TRIANGLES]=3,Pt[Gt.LINE_STRIP]=1,Pt)[k],nn=0,Yr=ke.get();nn<Yr.length;nn+=1){var Tn=Yr[nn],In=Tn.vaos||(Tn.vaos={});(In[fe]||(In[fe]=new Hu)).bind(X,this,Pe,vt?vt.getPaintVertexBuffers():[],Ie,Tn.vertexOffset,_t,Rt),Gt.drawElements(k,Tn.primitiveLength*hr,Gt.UNSIGNED_SHORT,Tn.primitiveOffset*hr*2)}}};var Gu=function(k,F,$,G){var ee=F.style.light,ce=ee.properties.get("position"),fe=[ce.x,ce.y,ce.z],Pe=e.create$1();ee.properties.get("anchor")==="viewport"&&e.fromRotation(Pe,-F.transform.angle),e.transformMat3(fe,fe,Pe);var Ie=ee.properties.get("color");return{u_matrix:k,u_lightpos:fe,u_lightintensity:ee.properties.get("intensity"),u_lightcolor:[Ie.r,Ie.g,Ie.b],u_vertical_gradient:+$,u_opacity:G}},os=function(k,F,$,G,ee,ce,fe){return e.extend(Gu(k,F,$,G),dl(ce,F,fe),{u_height_factor:-Math.pow(2,ee.overscaledZ)/fe.tileSize/8})},Us=function(k){return{u_matrix:k}},hs=function(k,F,$,G){return e.extend(Us(k),dl($,F,G))},xs=function(k,F){return{u_matrix:k,u_world:F}},il=function(k,F,$,G,ee){return e.extend(hs(k,F,$,G),{u_world:ee})},Tu=function(k,F,$,G){var ee,ce,fe=k.transform;if(G.paint.get("circle-pitch-alignment")==="map"){var Pe=Qa($,1,fe.zoom);ee=!0,ce=[Pe,Pe]}else ee=!1,ce=fe.pixelsToGLUnits;return{u_camera_to_center_distance:fe.cameraToCenterDistance,u_scale_with_map:+(G.paint.get("circle-pitch-scale")==="map"),u_matrix:k.translatePosMatrix(F.posMatrix,$,G.paint.get("circle-translate"),G.paint.get("circle-translate-anchor")),u_pitch_with_map:+ee,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ce}},Is=function(k,F,$){var G=Qa($,1,F.zoom),ee=Math.pow(2,F.zoom-$.tileID.overscaledZ),ce=$.tileID.overscaleFactor();return{u_matrix:k,u_camera_to_center_distance:F.cameraToCenterDistance,u_pixels_to_tile_units:G,u_extrude_scale:[F.pixelsToGLUnits[0]/(G*ee),F.pixelsToGLUnits[1]/(G*ee)],u_overscale_factor:ce}},lu=function(k,F,$){return{u_matrix:k,u_inv_matrix:F,u_camera_to_center_distance:$.cameraToCenterDistance,u_viewport_size:[$.width,$.height]}},bu=function(k,F,$){return $===void 0&&($=1),{u_matrix:k,u_color:F,u_overlay:0,u_overlay_scale:$}},nu=function(k){return{u_matrix:k}},Be=function(k,F,$,G){return{u_matrix:k,u_extrude_scale:Qa(F,1,$),u_intensity:G}},Fr=function(k,F,$){var G=k.transform;return{u_matrix:gr(k,F,$),u_ratio:1/Qa(F,1,G.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},jt=function(k,F,$,G){return e.extend(Fr(k,F,$),{u_image:0,u_image_height:G})},Vt=function(k,F,$,G){var ee=k.transform,ce=ar(F,ee);return{u_matrix:gr(k,F,$),u_texsize:F.imageAtlasTexture.size,u_ratio:1/Qa(F,1,ee.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ce,G.fromScale,G.toScale],u_fade:G.t,u_units_to_pixels:[1/ee.pixelsToGLUnits[0],1/ee.pixelsToGLUnits[1]]}},gt=function(k,F,$,G,ee){var ce=k.lineAtlas,fe=ar(F,k.transform),Pe=$.layout.get("line-cap")==="round",Ie=ce.getDash(G.from,Pe),ke=ce.getDash(G.to,Pe),Ge=Ie.width*ee.fromScale,Je=ke.width*ee.toScale;return e.extend(Fr(k,F,$),{u_patternscale_a:[fe/Ge,-Ie.height/2],u_patternscale_b:[fe/Je,-ke.height/2],u_sdfgamma:ce.width/(256*Math.min(Ge,Je)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ie.y,u_tex_y_b:ke.y,u_mix:ee.t})};function ar(X,k){return 1/Qa(X,1,k.tileZoom)}function gr(X,k,F){return X.translatePosMatrix(k.tileID.posMatrix,k,F.paint.get("line-translate"),F.paint.get("line-translate-anchor"))}var en=function(k,F,$,G,ee){return{u_matrix:k,u_tl_parent:F,u_scale_parent:$,u_buffer_scale:1,u_fade_t:G.mix,u_opacity:G.opacity*ee.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ee.paint.get("raster-brightness-min"),u_brightness_high:ee.paint.get("raster-brightness-max"),u_saturation_factor:(fe=ee.paint.get("raster-saturation"),fe>0?1-1/(1.001-fe):-fe),u_contrast_factor:(ce=ee.paint.get("raster-contrast"),ce>0?1/(1-ce):1+ce),u_spin_weights:Vr(ee.paint.get("raster-hue-rotate"))};var ce,fe};function Vr(X){X*=Math.PI/180;var k=Math.sin(X),F=Math.cos(X);return[(2*F+1)/3,(-Math.sqrt(3)*k-F+1)/3,(Math.sqrt(3)*k-F+1)/3]}var on,Dn=function(k,F,$,G,ee,ce,fe,Pe,Ie,ke){var Ge=ee.transform;return{u_is_size_zoom_constant:+(k==="constant"||k==="source"),u_is_size_feature_constant:+(k==="constant"||k==="camera"),u_size_t:F?F.uSizeT:0,u_size:F?F.uSize:0,u_camera_to_center_distance:Ge.cameraToCenterDistance,u_pitch:Ge.pitch/360*2*Math.PI,u_rotate_symbol:+$,u_aspect_ratio:Ge.width/Ge.height,u_fade_change:ee.options.fadeDuration?ee.symbolFadeChange:1,u_matrix:ce,u_label_plane_matrix:fe,u_coord_matrix:Pe,u_is_text:+Ie,u_pitch_with_map:+G,u_texsize:ke,u_texture:0}},di=function(k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge){var Je=ee.transform;return e.extend(Dn(k,F,$,G,ee,ce,fe,Pe,Ie,ke),{u_gamma_scale:G?Math.cos(Je._pitch)*Je.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Ge})},xi=function(k,F,$,G,ee,ce,fe,Pe,Ie,ke){return e.extend(di(k,F,$,G,ee,ce,fe,Pe,!0,Ie,!0),{u_texsize_icon:ke,u_texture_icon:1})},ji=function(k,F,$){return{u_matrix:k,u_opacity:F,u_color:$}},ia=function(k,F,$,G,ee,ce){return e.extend(function(fe,Pe,Ie,ke){var Ge=Ie.imageManager.getPattern(fe.from.toString()),Je=Ie.imageManager.getPattern(fe.to.toString()),vt=Ie.imageManager.getPixelSize(),_t=vt.width,Rt=vt.height,Pt=Math.pow(2,ke.tileID.overscaledZ),Gt=ke.tileSize*Math.pow(2,Ie.transform.tileZoom)/Pt,ur=Gt*(ke.tileID.canonical.x+ke.tileID.wrap*Pt),hr=Gt*ke.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ge.tl,u_pattern_br_a:Ge.br,u_pattern_tl_b:Je.tl,u_pattern_br_b:Je.br,u_texsize:[_t,Rt],u_mix:Pe.t,u_pattern_size_a:Ge.displaySize,u_pattern_size_b:Je.displaySize,u_scale_a:Pe.fromScale,u_scale_b:Pe.toScale,u_tile_units_to_pixels:1/Qa(ke,1,Ie.transform.tileZoom),u_pixel_coord_upper:[ur>>16,hr>>16],u_pixel_coord_lower:[65535&ur,65535&hr]}}(G,ce,$,ee),{u_matrix:k,u_opacity:F})},ca={fillExtrusion:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_lightpos:new e.Uniform3f(k,F.u_lightpos),u_lightintensity:new e.Uniform1f(k,F.u_lightintensity),u_lightcolor:new e.Uniform3f(k,F.u_lightcolor),u_vertical_gradient:new e.Uniform1f(k,F.u_vertical_gradient),u_opacity:new e.Uniform1f(k,F.u_opacity)}},fillExtrusionPattern:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_lightpos:new e.Uniform3f(k,F.u_lightpos),u_lightintensity:new e.Uniform1f(k,F.u_lightintensity),u_lightcolor:new e.Uniform3f(k,F.u_lightcolor),u_vertical_gradient:new e.Uniform1f(k,F.u_vertical_gradient),u_height_factor:new e.Uniform1f(k,F.u_height_factor),u_image:new e.Uniform1i(k,F.u_image),u_texsize:new e.Uniform2f(k,F.u_texsize),u_pixel_coord_upper:new e.Uniform2f(k,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(k,F.u_pixel_coord_lower),u_scale:new e.Uniform3f(k,F.u_scale),u_fade:new e.Uniform1f(k,F.u_fade),u_opacity:new e.Uniform1f(k,F.u_opacity)}},fill:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix)}},fillPattern:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_image:new e.Uniform1i(k,F.u_image),u_texsize:new e.Uniform2f(k,F.u_texsize),u_pixel_coord_upper:new e.Uniform2f(k,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(k,F.u_pixel_coord_lower),u_scale:new e.Uniform3f(k,F.u_scale),u_fade:new e.Uniform1f(k,F.u_fade)}},fillOutline:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_world:new e.Uniform2f(k,F.u_world)}},fillOutlinePattern:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_world:new e.Uniform2f(k,F.u_world),u_image:new e.Uniform1i(k,F.u_image),u_texsize:new e.Uniform2f(k,F.u_texsize),u_pixel_coord_upper:new e.Uniform2f(k,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(k,F.u_pixel_coord_lower),u_scale:new e.Uniform3f(k,F.u_scale),u_fade:new e.Uniform1f(k,F.u_fade)}},circle:function(k,F){return{u_camera_to_center_distance:new e.Uniform1f(k,F.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(k,F.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(k,F.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(k,F.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(k,F.u_matrix)}},collisionBox:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_camera_to_center_distance:new e.Uniform1f(k,F.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(k,F.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(k,F.u_extrude_scale),u_overscale_factor:new e.Uniform1f(k,F.u_overscale_factor)}},collisionCircle:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_inv_matrix:new e.UniformMatrix4f(k,F.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(k,F.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(k,F.u_viewport_size)}},debug:function(k,F){return{u_color:new e.UniformColor(k,F.u_color),u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_overlay:new e.Uniform1i(k,F.u_overlay),u_overlay_scale:new e.Uniform1f(k,F.u_overlay_scale)}},clippingMask:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix)}},heatmap:function(k,F){return{u_extrude_scale:new e.Uniform1f(k,F.u_extrude_scale),u_intensity:new e.Uniform1f(k,F.u_intensity),u_matrix:new e.UniformMatrix4f(k,F.u_matrix)}},heatmapTexture:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_world:new e.Uniform2f(k,F.u_world),u_image:new e.Uniform1i(k,F.u_image),u_color_ramp:new e.Uniform1i(k,F.u_color_ramp),u_opacity:new e.Uniform1f(k,F.u_opacity)}},hillshade:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_image:new e.Uniform1i(k,F.u_image),u_latrange:new e.Uniform2f(k,F.u_latrange),u_light:new e.Uniform2f(k,F.u_light),u_shadow:new e.UniformColor(k,F.u_shadow),u_highlight:new e.UniformColor(k,F.u_highlight),u_accent:new e.UniformColor(k,F.u_accent)}},hillshadePrepare:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_image:new e.Uniform1i(k,F.u_image),u_dimension:new e.Uniform2f(k,F.u_dimension),u_zoom:new e.Uniform1f(k,F.u_zoom),u_unpack:new e.Uniform4f(k,F.u_unpack)}},line:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_ratio:new e.Uniform1f(k,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(k,F.u_units_to_pixels)}},lineGradient:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_ratio:new e.Uniform1f(k,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(k,F.u_units_to_pixels),u_image:new e.Uniform1i(k,F.u_image),u_image_height:new e.Uniform1f(k,F.u_image_height)}},linePattern:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_texsize:new e.Uniform2f(k,F.u_texsize),u_ratio:new e.Uniform1f(k,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_image:new e.Uniform1i(k,F.u_image),u_units_to_pixels:new e.Uniform2f(k,F.u_units_to_pixels),u_scale:new e.Uniform3f(k,F.u_scale),u_fade:new e.Uniform1f(k,F.u_fade)}},lineSDF:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_ratio:new e.Uniform1f(k,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(k,F.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(k,F.u_patternscale_a),u_patternscale_b:new e.Uniform2f(k,F.u_patternscale_b),u_sdfgamma:new e.Uniform1f(k,F.u_sdfgamma),u_image:new e.Uniform1i(k,F.u_image),u_tex_y_a:new e.Uniform1f(k,F.u_tex_y_a),u_tex_y_b:new e.Uniform1f(k,F.u_tex_y_b),u_mix:new e.Uniform1f(k,F.u_mix)}},raster:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_tl_parent:new e.Uniform2f(k,F.u_tl_parent),u_scale_parent:new e.Uniform1f(k,F.u_scale_parent),u_buffer_scale:new e.Uniform1f(k,F.u_buffer_scale),u_fade_t:new e.Uniform1f(k,F.u_fade_t),u_opacity:new e.Uniform1f(k,F.u_opacity),u_image0:new e.Uniform1i(k,F.u_image0),u_image1:new e.Uniform1i(k,F.u_image1),u_brightness_low:new e.Uniform1f(k,F.u_brightness_low),u_brightness_high:new e.Uniform1f(k,F.u_brightness_high),u_saturation_factor:new e.Uniform1f(k,F.u_saturation_factor),u_contrast_factor:new e.Uniform1f(k,F.u_contrast_factor),u_spin_weights:new e.Uniform3f(k,F.u_spin_weights)}},symbolIcon:function(k,F){return{u_is_size_zoom_constant:new e.Uniform1i(k,F.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(k,F.u_is_size_feature_constant),u_size_t:new e.Uniform1f(k,F.u_size_t),u_size:new e.Uniform1f(k,F.u_size),u_camera_to_center_distance:new e.Uniform1f(k,F.u_camera_to_center_distance),u_pitch:new e.Uniform1f(k,F.u_pitch),u_rotate_symbol:new e.Uniform1i(k,F.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(k,F.u_aspect_ratio),u_fade_change:new e.Uniform1f(k,F.u_fade_change),u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(k,F.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(k,F.u_coord_matrix),u_is_text:new e.Uniform1i(k,F.u_is_text),u_pitch_with_map:new e.Uniform1i(k,F.u_pitch_with_map),u_texsize:new e.Uniform2f(k,F.u_texsize),u_texture:new e.Uniform1i(k,F.u_texture)}},symbolSDF:function(k,F){return{u_is_size_zoom_constant:new e.Uniform1i(k,F.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(k,F.u_is_size_feature_constant),u_size_t:new e.Uniform1f(k,F.u_size_t),u_size:new e.Uniform1f(k,F.u_size),u_camera_to_center_distance:new e.Uniform1f(k,F.u_camera_to_center_distance),u_pitch:new e.Uniform1f(k,F.u_pitch),u_rotate_symbol:new e.Uniform1i(k,F.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(k,F.u_aspect_ratio),u_fade_change:new e.Uniform1f(k,F.u_fade_change),u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(k,F.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(k,F.u_coord_matrix),u_is_text:new e.Uniform1i(k,F.u_is_text),u_pitch_with_map:new e.Uniform1i(k,F.u_pitch_with_map),u_texsize:new e.Uniform2f(k,F.u_texsize),u_texture:new e.Uniform1i(k,F.u_texture),u_gamma_scale:new e.Uniform1f(k,F.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(k,F.u_is_halo)}},symbolTextAndIcon:function(k,F){return{u_is_size_zoom_constant:new e.Uniform1i(k,F.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(k,F.u_is_size_feature_constant),u_size_t:new e.Uniform1f(k,F.u_size_t),u_size:new e.Uniform1f(k,F.u_size),u_camera_to_center_distance:new e.Uniform1f(k,F.u_camera_to_center_distance),u_pitch:new e.Uniform1f(k,F.u_pitch),u_rotate_symbol:new e.Uniform1i(k,F.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(k,F.u_aspect_ratio),u_fade_change:new e.Uniform1f(k,F.u_fade_change),u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(k,F.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(k,F.u_coord_matrix),u_is_text:new e.Uniform1i(k,F.u_is_text),u_pitch_with_map:new e.Uniform1i(k,F.u_pitch_with_map),u_texsize:new e.Uniform2f(k,F.u_texsize),u_texsize_icon:new e.Uniform2f(k,F.u_texsize_icon),u_texture:new e.Uniform1i(k,F.u_texture),u_texture_icon:new e.Uniform1i(k,F.u_texture_icon),u_gamma_scale:new e.Uniform1f(k,F.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(k,F.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(k,F.u_is_halo)}},background:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_opacity:new e.Uniform1f(k,F.u_opacity),u_color:new e.UniformColor(k,F.u_color)}},backgroundPattern:function(k,F){return{u_matrix:new e.UniformMatrix4f(k,F.u_matrix),u_opacity:new e.Uniform1f(k,F.u_opacity),u_image:new e.Uniform1i(k,F.u_image),u_pattern_tl_a:new e.Uniform2f(k,F.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(k,F.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(k,F.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(k,F.u_pattern_br_b),u_texsize:new e.Uniform2f(k,F.u_texsize),u_mix:new e.Uniform1f(k,F.u_mix),u_pattern_size_a:new e.Uniform2f(k,F.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(k,F.u_pattern_size_b),u_scale_a:new e.Uniform1f(k,F.u_scale_a),u_scale_b:new e.Uniform1f(k,F.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(k,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(k,F.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(k,F.u_tile_units_to_pixels)}}};function ea(X,k,F,$,G,ee,ce){for(var fe=X.context,Pe=fe.gl,Ie=X.useProgram("collisionBox"),ke=[],Ge=0,Je=0,vt=0;vt<$.length;vt++){var _t=$[vt],Rt=k.getTile(_t),Pt=Rt.getBucket(F);if(Pt){var Gt=_t.posMatrix;G[0]===0&&G[1]===0||(Gt=X.translatePosMatrix(_t.posMatrix,Rt,G,ee));var ur=ce?Pt.textCollisionBox:Pt.iconCollisionBox,hr=Pt.collisionCircleArray;if(hr.length>0){var nn=e.create(),Yr=Gt;e.mul(nn,Pt.placementInvProjMatrix,X.transform.glCoordMatrix),e.mul(nn,nn,Pt.placementViewportMatrix),ke.push({circleArray:hr,circleOffset:Je,transform:Yr,invTransform:nn}),Je=Ge+=hr.length/4}ur&&Ie.draw(fe,Pe.LINES,Bt.disabled,Ke.disabled,X.colorModeForRenderPass(),mt.disabled,Is(Gt,X.transform,Rt),F.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,null,X.transform.zoom,null,null,ur.collisionVertexBuffer)}}if(ce&&ke.length){var Tn=X.useProgram("collisionCircle"),In=new e.StructArrayLayout2f1f2i16;In.resize(4*Ge),In._trim();for(var si=0,ni=0,Ci=ke;ni<Ci.length;ni+=1)for(var Ji=Ci[ni],ha=0;ha<Ji.circleArray.length/4;ha++){var ya=4*ha,to=Ji.circleArray[ya+0],wo=Ji.circleArray[ya+1],ta=Ji.circleArray[ya+2],Ka=Ji.circleArray[ya+3];In.emplace(si++,to,wo,ta,Ka,0),In.emplace(si++,to,wo,ta,Ka,1),In.emplace(si++,to,wo,ta,Ka,2),In.emplace(si++,to,wo,ta,Ka,3)}(!on||on.length<2*Ge)&&(on=function(iu){var $s=2*iu,Eu=new e.StructArrayLayout3ui6;Eu.resize($s),Eu._trim();for(var Ds=0;Ds<$s;Ds++){var qs=6*Ds;Eu.uint16[qs+0]=4*Ds+0,Eu.uint16[qs+1]=4*Ds+1,Eu.uint16[qs+2]=4*Ds+2,Eu.uint16[qs+3]=4*Ds+2,Eu.uint16[qs+4]=4*Ds+3,Eu.uint16[qs+5]=4*Ds+0}return Eu}(Ge));for(var Ga=fe.createIndexBuffer(on,!0),ua=fe.createVertexBuffer(In,e.collisionCircleLayout.members,!0),Xa=0,Ea=ke;Xa<Ea.length;Xa+=1){var ro=Ea[Xa],Co=lu(ro.transform,ro.invTransform,X.transform);Tn.draw(fe,Pe.TRIANGLES,Bt.disabled,Ke.disabled,X.colorModeForRenderPass(),mt.disabled,Co,F.id,ua,Ga,e.SegmentVector.simpleSegment(0,2*ro.circleOffset,ro.circleArray.length,ro.circleArray.length/2),null,X.transform.zoom,null,null,null)}ua.destroy(),Ga.destroy()}}var ma=e.identity(new Float32Array(16));function Ia(X,k,F,$,G,ee){var ce=e.getAnchorAlignment(X),fe=-(ce.horizontalAlign-.5)*k,Pe=-(ce.verticalAlign-.5)*F,Ie=e.evaluateVariableOffset(X,$);return new e.Point((fe/G+Ie[0])*ee,(Pe/G+Ie[1])*ee)}function Fa(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke){var Ge=X.text.placedSymbolArray,Je=X.text.dynamicLayoutVertexArray,vt=X.icon.dynamicLayoutVertexArray,_t={};Je.clear();for(var Rt=0;Rt<Ge.length;Rt++){var Pt=Ge.get(Rt),Gt=Pt.hidden||!Pt.crossTileID||X.allowVerticalPlacement&&!Pt.placedOrientation?null:$[Pt.crossTileID];if(Gt){var ur=new e.Point(Pt.anchorX,Pt.anchorY),hr=En(ur,F?fe:ce),nn=Yn(ee.cameraToCenterDistance,hr.signedDistanceFromCamera),Yr=G.evaluateSizeForFeature(X.textSizeData,Ie,Pt)*nn/e.ONE_EM;F&&(Yr*=X.tilePixelRatio/Pe);for(var Tn=Ia(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale,Yr),In=F?En(ur.add(Tn),ce).point:hr.point.add(k?Tn.rotate(-ee.angle):Tn),si=X.allowVerticalPlacement&&Pt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,ni=0;ni<Pt.numGlyphs;ni++)e.addDynamicAttributes(Je,In,si);ke&&Pt.associatedIconIndex>=0&&(_t[Pt.associatedIconIndex]={shiftedAnchor:In,angle:si})}else ps(Pt.numGlyphs,Je)}if(ke){vt.clear();for(var Ci=X.icon.placedSymbolArray,Ji=0;Ji<Ci.length;Ji++){var ha=Ci.get(Ji);if(ha.hidden)ps(ha.numGlyphs,vt);else{var ya=_t[Ji];if(ya)for(var to=0;to<ha.numGlyphs;to++)e.addDynamicAttributes(vt,ya.shiftedAnchor,ya.angle);else ps(ha.numGlyphs,vt)}}X.icon.dynamicLayoutVertexBuffer.updateData(vt)}X.text.dynamicLayoutVertexBuffer.updateData(Je)}function Io(X,k,F){return F.iconsInText&&k?"symbolTextAndIcon":X?"symbolSDF":"symbolIcon"}function ho(X,k,F,$,G,ee,ce,fe,Pe,Ie,ke,Ge){for(var Je=X.context,vt=Je.gl,_t=X.transform,Rt=fe==="map",Pt=Pe==="map",Gt=Rt&&F.layout.get("symbol-placement")!=="point",ur=Rt&&!Pt&&!Gt,hr=F.layout.get("symbol-sort-key").constantOr(1)!==void 0,nn=!1,Yr=X.depthModeForSublayer(0,Bt.ReadOnly),Tn=F.layout.get("text-variable-anchor"),In=[],si=0,ni=$;si<ni.length;si+=1){var Ci=ni[si],Ji=k.getTile(Ci),ha=Ji.getBucket(F);if(ha){var ya=G?ha.text:ha.icon;if(ya&&ya.segments.get().length){var to=ya.programConfigurations.get(F.id),wo=G||ha.sdfIcons,ta=G?ha.textSizeData:ha.iconSizeData,Ka=Pt||_t.pitch!==0,Ga=X.useProgram(Io(wo,G,ha),to),ua=e.evaluateSizeForZoom(ta,_t.zoom),Xa=void 0,Ea=[0,0],ro=void 0,Co=void 0,iu=null,$s=void 0;if(G)ro=Ji.glyphAtlasTexture,Co=vt.LINEAR,Xa=Ji.glyphAtlasTexture.size,ha.iconsInText&&(Ea=Ji.imageAtlasTexture.size,iu=Ji.imageAtlasTexture,$s=Ka||X.options.rotating||X.options.zooming||ta.kind==="composite"||ta.kind==="camera"?vt.LINEAR:vt.NEAREST);else{var Eu=F.layout.get("icon-size").constantOr(0)!==1||ha.iconsNeedLinear;ro=Ji.imageAtlasTexture,Co=wo||X.options.rotating||X.options.zooming||Eu||Ka?vt.LINEAR:vt.NEAREST,Xa=Ji.imageAtlasTexture.size}var Ds=Qa(Ji,1,X.transform.zoom),qs=Rr(Ci.posMatrix,Pt,Rt,X.transform,Ds),vl=Nn(Ci.posMatrix,Pt,Rt,X.transform,Ds),Xu=Tn&&ha.hasTextData(),pc=F.layout.get("icon-text-fit")!=="none"&&Xu&&ha.hasIconData();Gt&&$a(ha,Ci.posMatrix,X,G,qs,vl,Pt,Ie);var Rc=X.translatePosMatrix(Ci.posMatrix,Ji,ee,ce),Ll=Gt||G&&Tn||pc?ma:qs,dc=X.translatePosMatrix(vl,Ji,ee,ce,!0),_f=wo&&F.paint.get(G?"text-halo-width":"icon-halo-width").constantOr(1)!==0,bf={program:Ga,buffers:ya,uniformValues:wo?ha.iconsInText?xi(ta.kind,ua,ur,Pt,X,Rc,Ll,dc,Xa,Ea):di(ta.kind,ua,ur,Pt,X,Rc,Ll,dc,G,Xa,!0):Dn(ta.kind,ua,ur,Pt,X,Rc,Ll,dc,G,Xa),atlasTexture:ro,atlasTextureIcon:iu,atlasInterpolation:Co,atlasInterpolationIcon:$s,isSDF:wo,hasHalo:_f};if(hr&&ha.canOverlap){nn=!0;for(var Ic=0,Kc=ya.segments.get();Ic<Kc.length;Ic+=1){var kc=Kc[Ic];In.push({segments:new e.SegmentVector([kc]),sortKey:kc.sortKey,state:bf})}}else In.push({segments:ya.segments,sortKey:0,state:bf})}}}nn&&In.sort(function(of,Lc){return of.sortKey-Lc.sortKey});for(var zc=0,af=In;zc<af.length;zc+=1){var Gl=af[zc],ll=Gl.state;if(Je.activeTexture.set(vt.TEXTURE0),ll.atlasTexture.bind(ll.atlasInterpolation,vt.CLAMP_TO_EDGE),ll.atlasTextureIcon&&(Je.activeTexture.set(vt.TEXTURE1),ll.atlasTextureIcon&&ll.atlasTextureIcon.bind(ll.atlasInterpolationIcon,vt.CLAMP_TO_EDGE)),ll.isSDF){var ac=ll.uniformValues;ll.hasHalo&&(ac.u_is_halo=1,Ba(ll.buffers,Gl.segments,F,X,ll.program,Yr,ke,Ge,ac)),ac.u_is_halo=0}Ba(ll.buffers,Gl.segments,F,X,ll.program,Yr,ke,Ge,ll.uniformValues)}}function Ba(X,k,F,$,G,ee,ce,fe,Pe){var Ie=$.context;G.draw(Ie,Ie.gl.TRIANGLES,ee,ce,fe,mt.disabled,Pe,F.id,X.layoutVertexBuffer,X.indexBuffer,k,F.paint,$.transform.zoom,X.programConfigurations.get(F.id),X.dynamicLayoutVertexBuffer,X.opacityVertexBuffer)}function Mo(X,k,F,$,G,ee,ce){var fe,Pe,Ie,ke,Ge,Je=X.context.gl,vt=F.paint.get("fill-pattern"),_t=vt&&vt.constantOr(1),Rt=F.getCrossfadeParameters();ce?(Pe=_t&&!F.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=Je.LINES):(Pe=_t?"fillPattern":"fill",fe=Je.TRIANGLES);for(var Pt=0,Gt=$;Pt<Gt.length;Pt+=1){var ur=Gt[Pt],hr=k.getTile(ur);if(!_t||hr.patternsLoaded()){var nn=hr.getBucket(F);if(nn){var Yr=nn.programConfigurations.get(F.id),Tn=X.useProgram(Pe,Yr);_t&&(X.context.activeTexture.set(Je.TEXTURE0),hr.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Yr.updatePaintBuffers(Rt));var In=vt.constantOr(null);if(In&&hr.imageAtlas){var si=hr.imageAtlas,ni=si.patternPositions[In.to.toString()],Ci=si.patternPositions[In.from.toString()];ni&&Ci&&Yr.setConstantPatternPositions(ni,Ci)}var Ji=X.translatePosMatrix(ur.posMatrix,hr,F.paint.get("fill-translate"),F.paint.get("fill-translate-anchor"));if(ce){ke=nn.indexBuffer2,Ge=nn.segments2;var ha=[Je.drawingBufferWidth,Je.drawingBufferHeight];Ie=Pe==="fillOutlinePattern"&&_t?il(Ji,X,Rt,hr,ha):xs(Ji,ha)}else ke=nn.indexBuffer,Ge=nn.segments,Ie=_t?hs(Ji,X,Rt,hr):Us(Ji);Tn.draw(X.context,fe,G,X.stencilModeForClipping(ur),ee,mt.disabled,Ie,F.id,nn.layoutVertexBuffer,ke,Ge,F.paint,X.transform.zoom,Yr)}}}}function _o(X,k,F,$,G,ee,ce){for(var fe=X.context,Pe=fe.gl,Ie=F.paint.get("fill-extrusion-pattern"),ke=Ie.constantOr(1),Ge=F.getCrossfadeParameters(),Je=F.paint.get("fill-extrusion-opacity"),vt=0,_t=$;vt<_t.length;vt+=1){var Rt=_t[vt],Pt=k.getTile(Rt),Gt=Pt.getBucket(F);if(Gt){var ur=Gt.programConfigurations.get(F.id),hr=X.useProgram(ke?"fillExtrusionPattern":"fillExtrusion",ur);ke&&(X.context.activeTexture.set(Pe.TEXTURE0),Pt.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),ur.updatePaintBuffers(Ge));var nn=Ie.constantOr(null);if(nn&&Pt.imageAtlas){var Yr=Pt.imageAtlas,Tn=Yr.patternPositions[nn.to.toString()],In=Yr.patternPositions[nn.from.toString()];Tn&&In&&ur.setConstantPatternPositions(Tn,In)}var si=X.translatePosMatrix(Rt.posMatrix,Pt,F.paint.get("fill-extrusion-translate"),F.paint.get("fill-extrusion-translate-anchor")),ni=F.paint.get("fill-extrusion-vertical-gradient"),Ci=ke?os(si,X,ni,Je,Rt,Ge,Pt):Gu(si,X,ni,Je);hr.draw(fe,fe.gl.TRIANGLES,G,ee,ce,mt.backCCW,Ci,F.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,F.paint,X.transform.zoom,ur)}}}function Da(X,k,F,$,G,ee){var ce=X.context,fe=ce.gl,Pe=k.fbo;if(Pe){var Ie=X.useProgram("hillshade");ce.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Pe.colorAttachment.get());var ke=function(Ge,Je,vt){var _t=vt.paint.get("hillshade-shadow-color"),Rt=vt.paint.get("hillshade-highlight-color"),Pt=vt.paint.get("hillshade-accent-color"),Gt=vt.paint.get("hillshade-illumination-direction")*(Math.PI/180);vt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Gt-=Ge.transform.angle);var ur,hr,nn,Yr=!Ge.options.moving;return{u_matrix:Ge.transform.calculatePosMatrix(Je.tileID.toUnwrapped(),Yr),u_image:0,u_latrange:(ur=Je.tileID,hr=Math.pow(2,ur.canonical.z),nn=ur.canonical.y,[new e.MercatorCoordinate(0,nn/hr).toLngLat().lat,new e.MercatorCoordinate(0,(nn+1)/hr).toLngLat().lat]),u_light:[vt.paint.get("hillshade-exaggeration"),Gt],u_shadow:_t,u_highlight:Rt,u_accent:Pt}}(X,k,F);Ie.draw(ce,fe.TRIANGLES,$,G,ee,mt.disabled,ke,F.id,X.rasterBoundsBuffer,X.quadTriangleIndexBuffer,X.rasterBoundsSegments)}}function ss(X,k,F,$,G,ee){var ce=X.context,fe=ce.gl,Pe=k.dem;if(Pe&&Pe.data){var Ie=Pe.dim,ke=Pe.stride,Ge=Pe.getPixels();if(ce.activeTexture.set(fe.TEXTURE1),ce.pixelStoreUnpackPremultiplyAlpha.set(!1),k.demTexture=k.demTexture||X.getTileTexture(ke),k.demTexture){var Je=k.demTexture;Je.update(Ge,{premultiply:!1}),Je.bind(fe.NEAREST,fe.CLAMP_TO_EDGE)}else k.demTexture=new e.Texture(ce,Ge,fe.RGBA,{premultiply:!1}),k.demTexture.bind(fe.NEAREST,fe.CLAMP_TO_EDGE);ce.activeTexture.set(fe.TEXTURE0);var vt=k.fbo;if(!vt){var _t=new e.Texture(ce,{width:Ie,height:Ie,data:null},fe.RGBA);_t.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),(vt=k.fbo=ce.createFramebuffer(Ie,Ie,!0)).colorAttachment.set(_t.texture)}ce.bindFramebuffer.set(vt.framebuffer),ce.viewport.set([0,0,Ie,Ie]),X.useProgram("hillshadePrepare").draw(ce,fe.TRIANGLES,$,G,ee,mt.disabled,function(Rt,Pt){var Gt=Pt.stride,ur=e.create();return e.ortho(ur,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ur,ur,[0,-e.EXTENT,0]),{u_matrix:ur,u_image:1,u_dimension:[Gt,Gt],u_zoom:Rt.overscaledZ,u_unpack:Pt.getUnpackVector()}}(k.tileID,Pe),F.id,X.rasterBoundsBuffer,X.quadTriangleIndexBuffer,X.rasterBoundsSegments),k.needsHillshadePrepare=!1}}function ko(X,k,F,$,G){var ee=$.paint.get("raster-fade-duration");if(ee>0){var ce=e.browser.now(),fe=(ce-X.timeAdded)/ee,Pe=k?(ce-k.timeAdded)/ee:-1,Ie=F.getSource(),ke=G.coveringZoomLevel({tileSize:Ie.tileSize,roundZoom:Ie.roundZoom}),Ge=!k||Math.abs(k.tileID.overscaledZ-ke)>Math.abs(X.tileID.overscaledZ-ke),Je=Ge&&X.refreshedUponExpiration?1:e.clamp(Ge?fe:1-Pe,0,1);return X.refreshedUponExpiration&&fe>=1&&(X.refreshedUponExpiration=!1),k?{opacity:1,mix:1-Je}:{opacity:Je,mix:0}}return{opacity:1,mix:0}}var bo=new e.Color(1,0,0,1),Zo=new e.Color(0,1,0,1),As=new e.Color(0,0,1,1),us=new e.Color(1,0,1,1),Mu=new e.Color(0,1,1,1);function Qs(X,k,F,$){Es(X,0,k+F/2,X.transform.width,F,$)}function Ls(X,k,F,$){Es(X,k-F/2,0,F,X.transform.height,$)}function Es(X,k,F,$,G,ee){var ce=X.context,fe=ce.gl;fe.enable(fe.SCISSOR_TEST),fe.scissor(k*e.browser.devicePixelRatio,F*e.browser.devicePixelRatio,$*e.browser.devicePixelRatio,G*e.browser.devicePixelRatio),ce.clear({color:ee}),fe.disable(fe.SCISSOR_TEST)}function al(X,k,F){var $=X.context,G=$.gl,ee=F.posMatrix,ce=X.useProgram("debug"),fe=Bt.disabled,Pe=Ke.disabled,Ie=X.colorModeForRenderPass();$.activeTexture.set(G.TEXTURE0),X.emptyTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),ce.draw($,G.LINE_STRIP,fe,Pe,Ie,mt.disabled,bu(ee,e.Color.red),"$debug",X.debugBuffer,X.tileBorderIndexBuffer,X.debugSegments);var ke=k.getTileByID(F.key).latestRawTileData,Ge=Math.floor((ke&&ke.byteLength||0)/1024),Je=k.getTile(F).tileSize,vt=512/Math.min(Je,512)*(F.overscaledZ/X.transform.zoom)*.5,_t=F.canonical.toString();F.overscaledZ!==F.canonical.z&&(_t+=" => "+F.overscaledZ),function(Rt,Pt){Rt.initDebugOverlayCanvas();var Gt=Rt.debugOverlayCanvas,ur=Rt.context.gl,hr=Rt.debugOverlayCanvas.getContext("2d");hr.clearRect(0,0,Gt.width,Gt.height),hr.shadowColor="white",hr.shadowBlur=2,hr.lineWidth=1.5,hr.strokeStyle="white",hr.textBaseline="top",hr.font="bold 36px Open Sans, sans-serif",hr.fillText(Pt,5,5),hr.strokeText(Pt,5,5),Rt.debugOverlayTexture.update(Gt),Rt.debugOverlayTexture.bind(ur.LINEAR,ur.CLAMP_TO_EDGE)}(X,_t+" "+Ge+"kb"),ce.draw($,G.TRIANGLES,fe,Pe,lt.alphaBlended,mt.disabled,bu(ee,e.Color.transparent,vt),"$debug",X.debugBuffer,X.quadTriangleIndexBuffer,X.debugSegments)}var cu={symbol:function(k,F,$,G,ee){if(k.renderPass==="translucent"){var ce=Ke.disabled,fe=k.colorModeForRenderPass();$.layout.get("text-variable-anchor")&&function(Pe,Ie,ke,Ge,Je,vt,_t){for(var Rt=Ie.transform,Pt=Je==="map",Gt=vt==="map",ur=0,hr=Pe;ur<hr.length;ur+=1){var nn=hr[ur],Yr=Ge.getTile(nn),Tn=Yr.getBucket(ke);if(Tn&&Tn.text&&Tn.text.segments.get().length){var In=e.evaluateSizeForZoom(Tn.textSizeData,Rt.zoom),si=Qa(Yr,1,Ie.transform.zoom),ni=Rr(nn.posMatrix,Gt,Pt,Ie.transform,si),Ci=ke.layout.get("icon-text-fit")!=="none"&&Tn.hasIconData();if(In){var Ji=Math.pow(2,Rt.zoom-Yr.tileID.overscaledZ);Fa(Tn,Pt,Gt,_t,e.symbolSize,Rt,ni,nn.posMatrix,Ji,In,Ci)}}}}(G,k,$,F,$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),ee),$.paint.get("icon-opacity").constantOr(1)!==0&&ho(k,F,$,G,!1,$.paint.get("icon-translate"),$.paint.get("icon-translate-anchor"),$.layout.get("icon-rotation-alignment"),$.layout.get("icon-pitch-alignment"),$.layout.get("icon-keep-upright"),ce,fe),$.paint.get("text-opacity").constantOr(1)!==0&&ho(k,F,$,G,!0,$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),$.layout.get("text-keep-upright"),ce,fe),F.map.showCollisionBoxes&&(ea(k,F,$,G,$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),!0),ea(k,F,$,G,$.paint.get("icon-translate"),$.paint.get("icon-translate-anchor"),!1))}},circle:function(k,F,$,G){if(k.renderPass==="translucent"){var ee=$.paint.get("circle-opacity"),ce=$.paint.get("circle-stroke-width"),fe=$.paint.get("circle-stroke-opacity"),Pe=$.layout.get("circle-sort-key").constantOr(1)!==void 0;if(ee.constantOr(1)!==0||ce.constantOr(1)!==0&&fe.constantOr(1)!==0){for(var Ie=k.context,ke=Ie.gl,Ge=k.depthModeForSublayer(0,Bt.ReadOnly),Je=Ke.disabled,vt=k.colorModeForRenderPass(),_t=[],Rt=0;Rt<G.length;Rt++){var Pt=G[Rt],Gt=F.getTile(Pt),ur=Gt.getBucket($);if(ur){var hr=ur.programConfigurations.get($.id),nn={programConfiguration:hr,program:k.useProgram("circle",hr),layoutVertexBuffer:ur.layoutVertexBuffer,indexBuffer:ur.indexBuffer,uniformValues:Tu(k,Pt,Gt,$)};if(Pe)for(var Yr=0,Tn=ur.segments.get();Yr<Tn.length;Yr+=1){var In=Tn[Yr];_t.push({segments:new e.SegmentVector([In]),sortKey:In.sortKey,state:nn})}else _t.push({segments:ur.segments,sortKey:0,state:nn})}}Pe&&_t.sort(function(ha,ya){return ha.sortKey-ya.sortKey});for(var si=0,ni=_t;si<ni.length;si+=1){var Ci=ni[si],Ji=Ci.state;Ji.program.draw(Ie,ke.TRIANGLES,Ge,Je,vt,mt.disabled,Ji.uniformValues,$.id,Ji.layoutVertexBuffer,Ji.indexBuffer,Ci.segments,$.paint,k.transform.zoom,Ji.programConfiguration)}}}},heatmap:function(k,F,$,G){if($.paint.get("heatmap-opacity")!==0)if(k.renderPass==="offscreen"){var ee=k.context,ce=ee.gl,fe=Ke.disabled,Pe=new lt([ce.ONE,ce.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(_t,Rt,Pt){var Gt=_t.gl;_t.activeTexture.set(Gt.TEXTURE1),_t.viewport.set([0,0,Rt.width/4,Rt.height/4]);var ur=Pt.heatmapFbo;if(ur)Gt.bindTexture(Gt.TEXTURE_2D,ur.colorAttachment.get()),_t.bindFramebuffer.set(ur.framebuffer);else{var hr=Gt.createTexture();Gt.bindTexture(Gt.TEXTURE_2D,hr),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_S,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_T,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MIN_FILTER,Gt.LINEAR),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MAG_FILTER,Gt.LINEAR),ur=Pt.heatmapFbo=_t.createFramebuffer(Rt.width/4,Rt.height/4,!1),function(nn,Yr,Tn,In){var si=nn.gl;si.texImage2D(si.TEXTURE_2D,0,si.RGBA,Yr.width/4,Yr.height/4,0,si.RGBA,nn.extRenderToTextureHalfFloat?nn.extTextureHalfFloat.HALF_FLOAT_OES:si.UNSIGNED_BYTE,null),In.colorAttachment.set(Tn)}(_t,Rt,hr,ur)}})(ee,k,$),ee.clear({color:e.Color.transparent});for(var Ie=0;Ie<G.length;Ie++){var ke=G[Ie];if(!F.hasRenderableParent(ke)){var Ge=F.getTile(ke),Je=Ge.getBucket($);if(Je){var vt=Je.programConfigurations.get($.id);k.useProgram("heatmap",vt).draw(ee,ce.TRIANGLES,Bt.disabled,fe,Pe,mt.disabled,Be(ke.posMatrix,Ge,k.transform.zoom,$.paint.get("heatmap-intensity")),$.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,$.paint,k.transform.zoom,vt)}}}ee.viewport.set([0,0,k.width,k.height])}else k.renderPass==="translucent"&&(k.context.setColorMode(k.colorModeForRenderPass()),function(_t,Rt){var Pt=_t.context,Gt=Pt.gl,ur=Rt.heatmapFbo;if(ur){Pt.activeTexture.set(Gt.TEXTURE0),Gt.bindTexture(Gt.TEXTURE_2D,ur.colorAttachment.get()),Pt.activeTexture.set(Gt.TEXTURE1);var hr=Rt.colorRampTexture;hr||(hr=Rt.colorRampTexture=new e.Texture(Pt,Rt.colorRamp,Gt.RGBA)),hr.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),_t.useProgram("heatmapTexture").draw(Pt,Gt.TRIANGLES,Bt.disabled,Ke.disabled,_t.colorModeForRenderPass(),mt.disabled,function(nn,Yr,Tn,In){var si=e.create();e.ortho(si,0,nn.width,nn.height,0,0,1);var ni=nn.context.gl;return{u_matrix:si,u_world:[ni.drawingBufferWidth,ni.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Yr.paint.get("heatmap-opacity")}}(_t,Rt),Rt.id,_t.viewportBuffer,_t.quadTriangleIndexBuffer,_t.viewportSegments,Rt.paint,_t.transform.zoom)}}(k,$))},line:function(k,F,$,G){if(k.renderPass==="translucent"){var ee=$.paint.get("line-opacity"),ce=$.paint.get("line-width");if(ee.constantOr(1)!==0&&ce.constantOr(1)!==0)for(var fe=k.depthModeForSublayer(0,Bt.ReadOnly),Pe=k.colorModeForRenderPass(),Ie=$.paint.get("line-dasharray"),ke=$.paint.get("line-pattern"),Ge=ke.constantOr(1),Je=$.paint.get("line-gradient"),vt=$.getCrossfadeParameters(),_t=Ge?"linePattern":Ie?"lineSDF":Je?"lineGradient":"line",Rt=k.context,Pt=Rt.gl,Gt=!0,ur=0,hr=G;ur<hr.length;ur+=1){var nn=hr[ur],Yr=F.getTile(nn);if(!Ge||Yr.patternsLoaded()){var Tn=Yr.getBucket($);if(Tn){var In=Tn.programConfigurations.get($.id),si=k.context.program.get(),ni=k.useProgram(_t,In),Ci=Gt||ni.program!==si,Ji=ke.constantOr(null);if(Ji&&Yr.imageAtlas){var ha=Yr.imageAtlas,ya=ha.patternPositions[Ji.to.toString()],to=ha.patternPositions[Ji.from.toString()];ya&&to&&In.setConstantPatternPositions(ya,to)}var wo=Ge?Vt(k,Yr,$,vt):Ie?gt(k,Yr,$,Ie,vt):Je?jt(k,Yr,$,Tn.lineClipsArray.length):Fr(k,Yr,$);if(Ge)Rt.activeTexture.set(Pt.TEXTURE0),Yr.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),In.updatePaintBuffers(vt);else if(Ie&&(Ci||k.lineAtlas.dirty))Rt.activeTexture.set(Pt.TEXTURE0),k.lineAtlas.bind(Rt);else if(Je){var ta=Tn.gradients[$.id],Ka=ta.texture;if($.gradientVersion!==ta.version){var Ga=256;if($.stepInterpolant){var ua=F.getSource().maxzoom,Xa=nn.canonical.z===ua?Math.ceil(1<<k.transform.maxZoom-nn.canonical.z):1;Ga=e.clamp(e.nextPowerOfTwo(Tn.maxLineLength/e.EXTENT*1024*Xa),256,Rt.maxTextureSize)}ta.gradient=e.renderColorRamp({expression:$.gradientExpression(),evaluationKey:"lineProgress",resolution:Ga,image:ta.gradient||void 0,clips:Tn.lineClipsArray}),ta.texture?ta.texture.update(ta.gradient):ta.texture=new e.Texture(Rt,ta.gradient,Pt.RGBA),ta.version=$.gradientVersion,Ka=ta.texture}Rt.activeTexture.set(Pt.TEXTURE0),Ka.bind($.stepInterpolant?Pt.NEAREST:Pt.LINEAR,Pt.CLAMP_TO_EDGE)}ni.draw(Rt,Pt.TRIANGLES,fe,k.stencilModeForClipping(nn),Pe,mt.disabled,wo,$.id,Tn.layoutVertexBuffer,Tn.indexBuffer,Tn.segments,$.paint,k.transform.zoom,In,Tn.layoutVertexBuffer2),Gt=!1}}}}},fill:function(k,F,$,G){var ee=$.paint.get("fill-color"),ce=$.paint.get("fill-opacity");if(ce.constantOr(1)!==0){var fe=k.colorModeForRenderPass(),Pe=$.paint.get("fill-pattern"),Ie=k.opaquePassEnabledForLayer()&&!Pe.constantOr(1)&&ee.constantOr(e.Color.transparent).a===1&&ce.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===Ie){var ke=k.depthModeForSublayer(1,k.renderPass==="opaque"?Bt.ReadWrite:Bt.ReadOnly);Mo(k,F,$,G,ke,fe,!1)}if(k.renderPass==="translucent"&&$.paint.get("fill-antialias")){var Ge=k.depthModeForSublayer($.getPaintProperty("fill-outline-color")?2:0,Bt.ReadOnly);Mo(k,F,$,G,Ge,fe,!0)}}},"fill-extrusion":function(k,F,$,G){var ee=$.paint.get("fill-extrusion-opacity");if(ee!==0&&k.renderPass==="translucent"){var ce=new Bt(k.context.gl.LEQUAL,Bt.ReadWrite,k.depthRangeFor3D);if(ee!==1||$.paint.get("fill-extrusion-pattern").constantOr(1))_o(k,F,$,G,ce,Ke.disabled,lt.disabled),_o(k,F,$,G,ce,k.stencilModeFor3D(),k.colorModeForRenderPass());else{var fe=k.colorModeForRenderPass();_o(k,F,$,G,ce,Ke.disabled,fe)}}},hillshade:function(k,F,$,G){if(k.renderPass==="offscreen"||k.renderPass==="translucent"){for(var ee=k.context,ce=k.depthModeForSublayer(0,Bt.ReadOnly),fe=k.colorModeForRenderPass(),Pe=k.renderPass==="translucent"?k.stencilConfigForOverlap(G):[{},G],Ie=Pe[0],ke=0,Ge=Pe[1];ke<Ge.length;ke+=1){var Je=Ge[ke],vt=F.getTile(Je);vt.needsHillshadePrepare&&k.renderPass==="offscreen"?ss(k,vt,$,ce,Ke.disabled,fe):k.renderPass==="translucent"&&Da(k,vt,$,ce,Ie[Je.overscaledZ],fe)}ee.viewport.set([0,0,k.width,k.height])}},raster:function(k,F,$,G){if(k.renderPass==="translucent"&&$.paint.get("raster-opacity")!==0&&G.length)for(var ee=k.context,ce=ee.gl,fe=F.getSource(),Pe=k.useProgram("raster"),Ie=k.colorModeForRenderPass(),ke=fe instanceof de?[{},G]:k.stencilConfigForOverlap(G),Ge=ke[0],Je=ke[1],vt=Je[Je.length-1].overscaledZ,_t=!k.options.moving,Rt=0,Pt=Je;Rt<Pt.length;Rt+=1){var Gt=Pt[Rt],ur=k.depthModeForSublayer(Gt.overscaledZ-vt,$.paint.get("raster-opacity")===1?Bt.ReadWrite:Bt.ReadOnly,ce.LESS),hr=F.getTile(Gt),nn=k.transform.calculatePosMatrix(Gt.toUnwrapped(),_t);hr.registerFadeDuration($.paint.get("raster-fade-duration"));var Yr=F.findLoadedParent(Gt,0),Tn=ko(hr,Yr,F,$,k.transform),In=void 0,si=void 0,ni=$.paint.get("raster-resampling")==="nearest"?ce.NEAREST:ce.LINEAR;ee.activeTexture.set(ce.TEXTURE0),hr.texture.bind(ni,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST),ee.activeTexture.set(ce.TEXTURE1),Yr?(Yr.texture.bind(ni,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST),In=Math.pow(2,Yr.tileID.overscaledZ-hr.tileID.overscaledZ),si=[hr.tileID.canonical.x*In%1,hr.tileID.canonical.y*In%1]):hr.texture.bind(ni,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST);var Ci=en(nn,si||[0,0],In||1,Tn,$);fe instanceof de?Pe.draw(ee,ce.TRIANGLES,ur,Ke.disabled,Ie,mt.disabled,Ci,$.id,fe.boundsBuffer,k.quadTriangleIndexBuffer,fe.boundsSegments):Pe.draw(ee,ce.TRIANGLES,ur,Ge[Gt.overscaledZ],Ie,mt.disabled,Ci,$.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments)}},background:function(k,F,$){var G=$.paint.get("background-color"),ee=$.paint.get("background-opacity");if(ee!==0){var ce=k.context,fe=ce.gl,Pe=k.transform,Ie=Pe.tileSize,ke=$.paint.get("background-pattern");if(!k.isPatternMissing(ke)){var Ge=!ke&&G.a===1&&ee===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass===Ge){var Je=Ke.disabled,vt=k.depthModeForSublayer(0,Ge==="opaque"?Bt.ReadWrite:Bt.ReadOnly),_t=k.colorModeForRenderPass(),Rt=k.useProgram(ke?"backgroundPattern":"background"),Pt=Pe.coveringTiles({tileSize:Ie});ke&&(ce.activeTexture.set(fe.TEXTURE0),k.imageManager.bind(k.context));for(var Gt=$.getCrossfadeParameters(),ur=0,hr=Pt;ur<hr.length;ur+=1){var nn=hr[ur],Yr=k.transform.calculatePosMatrix(nn.toUnwrapped()),Tn=ke?ia(Yr,ee,k,ke,{tileID:nn,tileSize:Ie},Gt):ji(Yr,ee,G);Rt.draw(ce,fe.TRIANGLES,vt,Je,_t,mt.disabled,Tn,$.id,k.tileExtentBuffer,k.quadTriangleIndexBuffer,k.tileExtentSegments)}}}}},debug:function(k,F,$){for(var G=0;G<$.length;G++)al(k,F,$[G])},custom:function(k,F,$){var G=k.context,ee=$.implementation;if(k.renderPass==="offscreen"){var ce=ee.prerender;ce&&(k.setCustomLayerDefaults(),G.setColorMode(k.colorModeForRenderPass()),ce.call(ee,G.gl,k.transform.customLayerMatrix()),G.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),G.setColorMode(k.colorModeForRenderPass()),G.setStencilMode(Ke.disabled);var fe=ee.renderingMode==="3d"?new Bt(k.context.gl.LEQUAL,Bt.ReadWrite,k.depthRangeFor3D):k.depthModeForSublayer(0,Bt.ReadOnly);G.setDepthMode(fe),ee.render(G.gl,k.transform.customLayerMatrix()),G.setDirty(),k.setBaseState(),G.bindFramebuffer.set(null)}}},zo=function(k,F){this.context=new qe(k),this.transform=F,this._tileTextures={},this.setup(),this.numSublayers=yt.maxUnderzooming+yt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qo,this.gpuTimers={}};zo.prototype.resize=function(X,k){if(this.width=X*e.browser.devicePixelRatio,this.height=k*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var F=0,$=this.style._order;F<$.length;F+=1)this.style._layers[$[F]].resize()},zo.prototype.setup=function(){var X=this.context,k=new e.StructArrayLayout2i4;k.emplaceBack(0,0),k.emplaceBack(e.EXTENT,0),k.emplaceBack(0,e.EXTENT),k.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=X.createVertexBuffer(k,mo.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=X.createVertexBuffer(F,mo.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var $=new e.StructArrayLayout4i8;$.emplaceBack(0,0,0,0),$.emplaceBack(e.EXTENT,0,e.EXTENT,0),$.emplaceBack(0,e.EXTENT,0,e.EXTENT),$.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=X.createVertexBuffer($,ie.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var G=new e.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(1,0),G.emplaceBack(0,1),G.emplaceBack(1,1),this.viewportBuffer=X.createVertexBuffer(G,mo.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ee=new e.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=X.createIndexBuffer(ee);var ce=new e.StructArrayLayout3ui6;ce.emplaceBack(0,1,2),ce.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=X.createIndexBuffer(ce),this.emptyTexture=new e.Texture(X,{width:1,height:1,data:new Uint8Array([0,0,0,0])},X.gl.RGBA);var fe=this.context.gl;this.stencilClearMode=new Ke({func:fe.ALWAYS,mask:0},0,255,fe.ZERO,fe.ZERO,fe.ZERO)},zo.prototype.clearStencil=function(){var X=this.context,k=X.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var F=e.create();e.ortho(F,0,this.width,this.height,0,0,1),e.scale(F,F,[k.drawingBufferWidth,k.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(X,k.TRIANGLES,Bt.disabled,this.stencilClearMode,lt.disabled,mt.disabled,nu(F),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},zo.prototype._renderTileClippingMasks=function(X,k){if(this.currentStencilSource!==X.source&&X.isTileClipped()&&k&&k.length){this.currentStencilSource=X.source;var F=this.context,$=F.gl;this.nextStencilID+k.length>256&&this.clearStencil(),F.setColorMode(lt.disabled),F.setDepthMode(Bt.disabled);var G=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ee=0,ce=k;ee<ce.length;ee+=1){var fe=ce[ee],Pe=this._tileClippingMaskIDs[fe.key]=this.nextStencilID++;G.draw(F,$.TRIANGLES,Bt.disabled,new Ke({func:$.ALWAYS,mask:0},Pe,255,$.KEEP,$.KEEP,$.REPLACE),lt.disabled,mt.disabled,nu(fe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},zo.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var X=this.nextStencilID++,k=this.context.gl;return new Ke({func:k.NOTEQUAL,mask:255},X,255,k.KEEP,k.KEEP,k.REPLACE)},zo.prototype.stencilModeForClipping=function(X){var k=this.context.gl;return new Ke({func:k.EQUAL,mask:255},this._tileClippingMaskIDs[X.key],0,k.KEEP,k.KEEP,k.REPLACE)},zo.prototype.stencilConfigForOverlap=function(X){var k,F=this.context.gl,$=X.sort(function(Pe,Ie){return Ie.overscaledZ-Pe.overscaledZ}),G=$[$.length-1].overscaledZ,ee=$[0].overscaledZ-G+1;if(ee>1){this.currentStencilSource=void 0,this.nextStencilID+ee>256&&this.clearStencil();for(var ce={},fe=0;fe<ee;fe++)ce[fe+G]=new Ke({func:F.GEQUAL,mask:255},fe+this.nextStencilID,255,F.KEEP,F.KEEP,F.REPLACE);return this.nextStencilID+=ee,[ce,$]}return[(k={},k[G]=Ke.disabled,k),$]},zo.prototype.colorModeForRenderPass=function(){var X=this.context.gl;return this._showOverdrawInspector?new lt([X.CONSTANT_COLOR,X.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?lt.unblended:lt.alphaBlended},zo.prototype.depthModeForSublayer=function(X,k,F){if(!this.opaquePassEnabledForLayer())return Bt.disabled;var $=1-((1+this.currentLayer)*this.numSublayers+X)*this.depthEpsilon;return new Bt(F||this.context.gl.LEQUAL,k,[$,$])},zo.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},zo.prototype.render=function(X,k){var F=this;this.style=X,this.options=k,this.lineAtlas=X.lineAtlas,this.imageManager=X.imageManager,this.glyphManager=X.glyphManager,this.symbolFadeChange=X.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var $=this.style._order,G=this.style.sourceCaches;for(var ee in G){var ce=G[ee];ce.used&&ce.prepare(this.context)}var fe,Pe,Ie={},ke={},Ge={};for(var Je in G){var vt=G[Je];Ie[Je]=vt.getVisibleCoordinates(),ke[Je]=Ie[Je].slice().reverse(),Ge[Je]=vt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _t=0;_t<$.length;_t++)if(this.style._layers[$[_t]].is3D()){this.opaquePassCutoff=_t;break}this.renderPass="offscreen";for(var Rt=0,Pt=$;Rt<Pt.length;Rt+=1){var Gt=this.style._layers[Pt[Rt]];if(Gt.hasOffscreenPass()&&!Gt.isHidden(this.transform.zoom)){var ur=ke[Gt.source];(Gt.type==="custom"||ur.length)&&this.renderLayer(this,G[Gt.source],Gt,ur)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:k.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=k.showOverdrawInspector,this.depthRangeFor3D=[0,1-(X._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=$.length-1;this.currentLayer>=0;this.currentLayer--){var hr=this.style._layers[$[this.currentLayer]],nn=G[hr.source],Yr=Ie[hr.source];this._renderTileClippingMasks(hr,Yr),this.renderLayer(this,nn,hr,Yr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<$.length;this.currentLayer++){var Tn=this.style._layers[$[this.currentLayer]],In=G[Tn.source],si=(Tn.type==="symbol"?Ge:ke)[Tn.source];this._renderTileClippingMasks(Tn,Ie[Tn.source]),this.renderLayer(this,In,Tn,si)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(ni){ni.source&&!ni.isHidden(F.transform.zoom)&&(ni.source!==(Pe&&Pe.id)&&(Pe=F.style.sourceCaches[ni.source]),(!fe||fe.getSource().maxzoom<Pe.getSource().maxzoom)&&(fe=Pe))}),fe&&cu.debug(this,fe,fe.getVisibleCoordinates())),this.options.showPadding&&function(ni){var Ci=ni.transform.padding;Qs(ni,ni.transform.height-(Ci.top||0),3,bo),Qs(ni,Ci.bottom||0,3,Zo),Ls(ni,Ci.left||0,3,As),Ls(ni,ni.transform.width-(Ci.right||0),3,us);var Ji=ni.transform.centerPoint;(function(ha,ya,to,wo){Es(ha,ya-1,to-10,2,20,wo),Es(ha,ya-10,to-1,20,2,wo)})(ni,Ji.x,ni.transform.height-Ji.y,Mu)}(this),this.context.setDefault()},zo.prototype.renderLayer=function(X,k,F,$){F.isHidden(this.transform.zoom)||(F.type==="background"||F.type==="custom"||$.length)&&(this.id=F.id,this.gpuTimingStart(F),cu[F.type](X,k,F,$,this.style.placement.variableOffsets),this.gpuTimingEnd())},zo.prototype.gpuTimingStart=function(X){if(this.options.gpuTiming){var k=this.context.extTimerQuery,F=this.gpuTimers[X.id];F||(F=this.gpuTimers[X.id]={calls:0,cpuTime:0,query:k.createQueryEXT()}),F.calls++,k.beginQueryEXT(k.TIME_ELAPSED_EXT,F.query)}},zo.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var X=this.context.extTimerQuery;X.endQueryEXT(X.TIME_ELAPSED_EXT)}},zo.prototype.collectGpuTimers=function(){var X=this.gpuTimers;return this.gpuTimers={},X},zo.prototype.queryGpuTimers=function(X){var k={};for(var F in X){var $=X[F],G=this.context.extTimerQuery,ee=G.getQueryObjectEXT($.query,G.QUERY_RESULT_EXT)/1e6;G.deleteQueryEXT($.query),k[F]=ee}return k},zo.prototype.translatePosMatrix=function(X,k,F,$,G){if(!F[0]&&!F[1])return X;var ee=G?$==="map"?this.transform.angle:0:$==="viewport"?-this.transform.angle:0;if(ee){var ce=Math.sin(ee),fe=Math.cos(ee);F=[F[0]*fe-F[1]*ce,F[0]*ce+F[1]*fe]}var Pe=[G?F[0]:Qa(k,F[0],this.transform.zoom),G?F[1]:Qa(k,F[1],this.transform.zoom),0],Ie=new Float32Array(16);return e.translate(Ie,X,Pe),Ie},zo.prototype.saveTileTexture=function(X){var k=this._tileTextures[X.size[0]];k?k.push(X):this._tileTextures[X.size[0]]=[X]},zo.prototype.getTileTexture=function(X){var k=this._tileTextures[X];return k&&k.length>0?k.pop():null},zo.prototype.isPatternMissing=function(X){if(!X)return!1;if(!X.from||!X.to)return!0;var k=this.imageManager.getPattern(X.from.toString()),F=this.imageManager.getPattern(X.to.toString());return!k||!F},zo.prototype.useProgram=function(X,k){this.cache=this.cache||{};var F=""+X+(k?k.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[F]||(this.cache[F]=new $o(this.context,X,Wu[X],k,ca[X],this._showOverdrawInspector)),this.cache[F]},zo.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},zo.prototype.setBaseState=function(){var X=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(X.FUNC_ADD)},zo.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},zo.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var qu=function(k,F){this.points=k,this.planes=F};qu.fromInvProjectionMatrix=function(X,k,F){var $=Math.pow(2,F),G=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ce){return e.transformMat4([],ce,X)}).map(function(ce){return e.scale$1([],ce,1/ce[3]/k*$)}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ce){var fe=e.sub([],G[ce[0]],G[ce[1]]),Pe=e.sub([],G[ce[2]],G[ce[1]]),Ie=e.normalize([],e.cross([],fe,Pe)),ke=-e.dot(Ie,G[ce[1]]);return Ie.concat(ke)});return new qu(G,ee)};var ol=function(k,F){this.min=k,this.max=F,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};ol.prototype.quadrant=function(X){for(var k=[X%2==0,X<2],F=e.clone$2(this.min),$=e.clone$2(this.max),G=0;G<k.length;G++)F[G]=k[G]?this.min[G]:this.center[G],$[G]=k[G]?this.center[G]:this.max[G];return $[2]=this.max[2],new ol(F,$)},ol.prototype.distanceX=function(X){return Math.max(Math.min(this.max[0],X[0]),this.min[0])-X[0]},ol.prototype.distanceY=function(X){return Math.max(Math.min(this.max[1],X[1]),this.min[1])-X[1]},ol.prototype.intersects=function(X){for(var k=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],F=!0,$=0;$<X.planes.length;$++){for(var G=X.planes[$],ee=0,ce=0;ce<k.length;ce++)ee+=e.dot$1(G,k[ce])>=0;if(ee===0)return 0;ee!==k.length&&(F=!1)}if(F)return 2;for(var fe=0;fe<3;fe++){for(var Pe=Number.MAX_VALUE,Ie=-Number.MAX_VALUE,ke=0;ke<X.points.length;ke++){var Ge=X.points[ke][fe]-this.min[fe];Pe=Math.min(Pe,Ge),Ie=Math.max(Ie,Ge)}if(Ie<0||Pe>this.max[fe]-this.min[fe])return 0}return 1};var xu=function(k,F,$,G){if(k===void 0&&(k=0),F===void 0&&(F=0),$===void 0&&($=0),G===void 0&&(G=0),isNaN(k)||k<0||isNaN(F)||F<0||isNaN($)||$<0||isNaN(G)||G<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=k,this.bottom=F,this.left=$,this.right=G};xu.prototype.interpolate=function(X,k,F){return k.top!=null&&X.top!=null&&(this.top=e.number(X.top,k.top,F)),k.bottom!=null&&X.bottom!=null&&(this.bottom=e.number(X.bottom,k.bottom,F)),k.left!=null&&X.left!=null&&(this.left=e.number(X.left,k.left,F)),k.right!=null&&X.right!=null&&(this.right=e.number(X.right,k.right,F)),this},xu.prototype.getCenter=function(X,k){var F=e.clamp((this.left+X-this.right)/2,0,X),$=e.clamp((this.top+k-this.bottom)/2,0,k);return new e.Point(F,$)},xu.prototype.equals=function(X){return this.top===X.top&&this.bottom===X.bottom&&this.left===X.left&&this.right===X.right},xu.prototype.clone=function(){return new xu(this.top,this.bottom,this.left,this.right)},xu.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var xo=function(k,F,$,G,ee){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ee===void 0||ee,this._minZoom=k||0,this._maxZoom=F||22,this._minPitch=$==null?0:$,this._maxPitch=G==null?60:G,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xu,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ko={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xo.prototype.clone=function(){var X=new xo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return X.tileSize=this.tileSize,X.latRange=this.latRange,X.width=this.width,X.height=this.height,X._center=this._center,X.zoom=this.zoom,X.angle=this.angle,X._fov=this._fov,X._pitch=this._pitch,X._unmodified=this._unmodified,X._edgeInsets=this._edgeInsets.clone(),X._calcMatrices(),X},Ko.minZoom.get=function(){return this._minZoom},Ko.minZoom.set=function(X){this._minZoom!==X&&(this._minZoom=X,this.zoom=Math.max(this.zoom,X))},Ko.maxZoom.get=function(){return this._maxZoom},Ko.maxZoom.set=function(X){this._maxZoom!==X&&(this._maxZoom=X,this.zoom=Math.min(this.zoom,X))},Ko.minPitch.get=function(){return this._minPitch},Ko.minPitch.set=function(X){this._minPitch!==X&&(this._minPitch=X,this.pitch=Math.max(this.pitch,X))},Ko.maxPitch.get=function(){return this._maxPitch},Ko.maxPitch.set=function(X){this._maxPitch!==X&&(this._maxPitch=X,this.pitch=Math.min(this.pitch,X))},Ko.renderWorldCopies.get=function(){return this._renderWorldCopies},Ko.renderWorldCopies.set=function(X){X===void 0?X=!0:X===null&&(X=!1),this._renderWorldCopies=X},Ko.worldSize.get=function(){return this.tileSize*this.scale},Ko.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ko.size.get=function(){return new e.Point(this.width,this.height)},Ko.bearing.get=function(){return-this.angle/Math.PI*180},Ko.bearing.set=function(X){var k=-e.wrap(X,-180,180)*Math.PI/180;this.angle!==k&&(this._unmodified=!1,this.angle=k,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ko.pitch.get=function(){return this._pitch/Math.PI*180},Ko.pitch.set=function(X){var k=e.clamp(X,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==k&&(this._unmodified=!1,this._pitch=k,this._calcMatrices())},Ko.fov.get=function(){return this._fov/Math.PI*180},Ko.fov.set=function(X){X=Math.max(.01,Math.min(60,X)),this._fov!==X&&(this._unmodified=!1,this._fov=X/180*Math.PI,this._calcMatrices())},Ko.zoom.get=function(){return this._zoom},Ko.zoom.set=function(X){var k=Math.min(Math.max(X,this.minZoom),this.maxZoom);this._zoom!==k&&(this._unmodified=!1,this._zoom=k,this.scale=this.zoomScale(k),this.tileZoom=Math.floor(k),this.zoomFraction=k-this.tileZoom,this._constrain(),this._calcMatrices())},Ko.center.get=function(){return this._center},Ko.center.set=function(X){X.lat===this._center.lat&&X.lng===this._center.lng||(this._unmodified=!1,this._center=X,this._constrain(),this._calcMatrices())},Ko.padding.get=function(){return this._edgeInsets.toJSON()},Ko.padding.set=function(X){this._edgeInsets.equals(X)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,X,1),this._calcMatrices())},Ko.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},xo.prototype.isPaddingEqual=function(X){return this._edgeInsets.equals(X)},xo.prototype.interpolatePadding=function(X,k,F){this._unmodified=!1,this._edgeInsets.interpolate(X,k,F),this._constrain(),this._calcMatrices()},xo.prototype.coveringZoomLevel=function(X){var k=(X.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/X.tileSize));return Math.max(0,k)},xo.prototype.getVisibleUnwrappedCoordinates=function(X){var k=[new e.UnwrappedTileID(0,X)];if(this._renderWorldCopies)for(var F=this.pointCoordinate(new e.Point(0,0)),$=this.pointCoordinate(new e.Point(this.width,0)),G=this.pointCoordinate(new e.Point(this.width,this.height)),ee=this.pointCoordinate(new e.Point(0,this.height)),ce=Math.floor(Math.min(F.x,$.x,G.x,ee.x)),fe=Math.floor(Math.max(F.x,$.x,G.x,ee.x)),Pe=ce-1;Pe<=fe+1;Pe++)Pe!==0&&k.push(new e.UnwrappedTileID(Pe,X));return k},xo.prototype.coveringTiles=function(X){var k=this.coveringZoomLevel(X),F=k;if(X.minzoom!==void 0&&k<X.minzoom)return[];X.maxzoom!==void 0&&k>X.maxzoom&&(k=X.maxzoom);var $=e.MercatorCoordinate.fromLngLat(this.center),G=Math.pow(2,k),ee=[G*$.x,G*$.y,0],ce=qu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,k),fe=X.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(fe=k);var Pe=function(Ci){return{aabb:new ol([Ci*G,0,0],[(Ci+1)*G,G,0]),zoom:0,x:0,y:0,wrap:Ci,fullyVisible:!1}},Ie=[],ke=[],Ge=k,Je=X.reparseOverscaled?F:k;if(this._renderWorldCopies)for(var vt=1;vt<=3;vt++)Ie.push(Pe(-vt)),Ie.push(Pe(vt));for(Ie.push(Pe(0));Ie.length>0;){var _t=Ie.pop(),Rt=_t.x,Pt=_t.y,Gt=_t.fullyVisible;if(!Gt){var ur=_t.aabb.intersects(ce);if(ur===0)continue;Gt=ur===2}var hr=_t.aabb.distanceX(ee),nn=_t.aabb.distanceY(ee),Yr=Math.max(Math.abs(hr),Math.abs(nn));if(_t.zoom===Ge||Yr>3+(1<<Ge-_t.zoom)-2&&_t.zoom>=fe)ke.push({tileID:new e.OverscaledTileID(_t.zoom===Ge?Je:_t.zoom,_t.wrap,_t.zoom,Rt,Pt),distanceSq:e.sqrLen([ee[0]-.5-Rt,ee[1]-.5-Pt])});else for(var Tn=0;Tn<4;Tn++){var In=(Rt<<1)+Tn%2,si=(Pt<<1)+(Tn>>1);Ie.push({aabb:_t.aabb.quadrant(Tn),zoom:_t.zoom+1,x:In,y:si,wrap:_t.wrap,fullyVisible:Gt})}}return ke.sort(function(ni,Ci){return ni.distanceSq-Ci.distanceSq}).map(function(ni){return ni.tileID})},xo.prototype.resize=function(X,k){this.width=X,this.height=k,this.pixelsToGLUnits=[2/X,-2/k],this._constrain(),this._calcMatrices()},Ko.unmodified.get=function(){return this._unmodified},xo.prototype.zoomScale=function(X){return Math.pow(2,X)},xo.prototype.scaleZoom=function(X){return Math.log(X)/Math.LN2},xo.prototype.project=function(X){var k=e.clamp(X.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(X.lng)*this.worldSize,e.mercatorYfromLat(k)*this.worldSize)},xo.prototype.unproject=function(X){return new e.MercatorCoordinate(X.x/this.worldSize,X.y/this.worldSize).toLngLat()},Ko.point.get=function(){return this.project(this.center)},xo.prototype.setLocationAtPoint=function(X,k){var F=this.pointCoordinate(k),$=this.pointCoordinate(this.centerPoint),G=this.locationCoordinate(X),ee=new e.MercatorCoordinate(G.x-(F.x-$.x),G.y-(F.y-$.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())},xo.prototype.locationPoint=function(X){return this.coordinatePoint(this.locationCoordinate(X))},xo.prototype.pointLocation=function(X){return this.coordinateLocation(this.pointCoordinate(X))},xo.prototype.locationCoordinate=function(X){return e.MercatorCoordinate.fromLngLat(X)},xo.prototype.coordinateLocation=function(X){return X.toLngLat()},xo.prototype.pointCoordinate=function(X){var k=[X.x,X.y,0,1],F=[X.x,X.y,1,1];e.transformMat4(k,k,this.pixelMatrixInverse),e.transformMat4(F,F,this.pixelMatrixInverse);var $=k[3],G=F[3],ee=k[1]/$,ce=F[1]/G,fe=k[2]/$,Pe=F[2]/G,Ie=fe===Pe?0:(0-fe)/(Pe-fe);return new e.MercatorCoordinate(e.number(k[0]/$,F[0]/G,Ie)/this.worldSize,e.number(ee,ce,Ie)/this.worldSize)},xo.prototype.coordinatePoint=function(X){var k=[X.x*this.worldSize,X.y*this.worldSize,0,1];return e.transformMat4(k,k,this.pixelMatrix),new e.Point(k[0]/k[3],k[1]/k[3])},xo.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},xo.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},xo.prototype.setMaxBounds=function(X){X?(this.lngRange=[X.getWest(),X.getEast()],this.latRange=[X.getSouth(),X.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xo.prototype.calculatePosMatrix=function(X,k){k===void 0&&(k=!1);var F=X.key,$=k?this._alignedPosMatrixCache:this._posMatrixCache;if($[F])return $[F];var G=X.canonical,ee=this.worldSize/this.zoomScale(G.z),ce=G.x+Math.pow(2,G.z)*X.wrap,fe=e.identity(new Float64Array(16));return e.translate(fe,fe,[ce*ee,G.y*ee,0]),e.scale(fe,fe,[ee/e.EXTENT,ee/e.EXTENT,1]),e.multiply(fe,k?this.alignedProjMatrix:this.projMatrix,fe),$[F]=new Float32Array(fe),$[F]},xo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var X,k,F,$,G=-90,ee=90,ce=-180,fe=180,Pe=this.size,Ie=this._unmodified;if(this.latRange){var ke=this.latRange;G=e.mercatorYfromLat(ke[1])*this.worldSize,X=(ee=e.mercatorYfromLat(ke[0])*this.worldSize)-G<Pe.y?Pe.y/(ee-G):0}if(this.lngRange){var Ge=this.lngRange;ce=e.mercatorXfromLng(Ge[0])*this.worldSize,k=(fe=e.mercatorXfromLng(Ge[1])*this.worldSize)-ce<Pe.x?Pe.x/(fe-ce):0}var Je=this.point,vt=Math.max(k||0,X||0);if(vt)return this.center=this.unproject(new e.Point(k?(fe+ce)/2:Je.x,X?(ee+G)/2:Je.y)),this.zoom+=this.scaleZoom(vt),this._unmodified=Ie,void(this._constraining=!1);if(this.latRange){var _t=Je.y,Rt=Pe.y/2;_t-Rt<G&&($=G+Rt),_t+Rt>ee&&($=ee-Rt)}if(this.lngRange){var Pt=Je.x,Gt=Pe.x/2;Pt-Gt<ce&&(F=ce+Gt),Pt+Gt>fe&&(F=fe-Gt)}F===void 0&&$===void 0||(this.center=this.unproject(new e.Point(F!==void 0?F:Je.x,$!==void 0?$:Je.y))),this._unmodified=Ie,this._constraining=!1}},xo.prototype._calcMatrices=function(){if(this.height){var X=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var k=Math.PI/2+this._pitch,F=this._fov*(.5+X.y/this.height),$=Math.sin(F)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-k-F,.01,Math.PI-.01)),G=this.point,ee=G.x,ce=G.y,fe=1.01*(Math.cos(Math.PI/2-this._pitch)*$+this.cameraToCenterDistance),Pe=this.height/50,Ie=new Float64Array(16);e.perspective(Ie,this._fov,this.width/this.height,Pe,fe),Ie[8]=2*-X.x/this.width,Ie[9]=2*X.y/this.height,e.scale(Ie,Ie,[1,-1,1]),e.translate(Ie,Ie,[0,0,-this.cameraToCenterDistance]),e.rotateX(Ie,Ie,this._pitch),e.rotateZ(Ie,Ie,this.angle),e.translate(Ie,Ie,[-ee,-ce,0]),this.mercatorMatrix=e.scale([],Ie,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Ie,Ie,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ie,this.invProjMatrix=e.invert([],this.projMatrix);var ke=this.width%2/2,Ge=this.height%2/2,Je=Math.cos(this.angle),vt=Math.sin(this.angle),_t=ee-Math.round(ee)+Je*ke+vt*Ge,Rt=ce-Math.round(ce)+Je*Ge+vt*ke,Pt=new Float64Array(Ie);if(e.translate(Pt,Pt,[_t>.5?_t-1:_t,Rt>.5?Rt-1:Rt,0]),this.alignedProjMatrix=Pt,Ie=e.create(),e.scale(Ie,Ie,[this.width/2,-this.height/2,1]),e.translate(Ie,Ie,[1,-1,0]),this.labelPlaneMatrix=Ie,Ie=e.create(),e.scale(Ie,Ie,[1,-1,1]),e.translate(Ie,Ie,[-1,-1,0]),e.scale(Ie,Ie,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ie,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ie=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ie,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var X=this.pointCoordinate(new e.Point(0,0)),k=[X.x*this.worldSize,X.y*this.worldSize,0,1];return e.transformMat4(k,k,this.pixelMatrix)[3]/this.cameraToCenterDistance},xo.prototype.getCameraPoint=function(){var X=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,X))},xo.prototype.getCameraQueryGeometry=function(X){var k=this.getCameraPoint();if(X.length===1)return[X[0],k];for(var F=k.x,$=k.y,G=k.x,ee=k.y,ce=0,fe=X;ce<fe.length;ce+=1){var Pe=fe[ce];F=Math.min(F,Pe.x),$=Math.min($,Pe.y),G=Math.max(G,Pe.x),ee=Math.max(ee,Pe.y)}return[new e.Point(F,$),new e.Point(G,$),new e.Point(G,ee),new e.Point(F,ee),new e.Point(F,$)]},Object.defineProperties(xo.prototype,Ko);var Iu=function(k){var F,$,G,ee;this._hashName=k&&encodeURIComponent(k),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(F=this._updateHashUnthrottled.bind(this),$=!1,G=null,ee=function(){G=null,$&&(F(),G=setTimeout(ee,300),$=!1)},function(){return $=!0,G||ee(),G})};Iu.prototype.addTo=function(X){return this._map=X,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Iu.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Iu.prototype.getHashString=function(X){var k=this._map.getCenter(),F=Math.round(100*this._map.getZoom())/100,$=Math.ceil((F*Math.LN2+Math.log(512/360/.5))/Math.LN10),G=Math.pow(10,$),ee=Math.round(k.lng*G)/G,ce=Math.round(k.lat*G)/G,fe=this._map.getBearing(),Pe=this._map.getPitch(),Ie="";if(Ie+=X?"/"+ee+"/"+ce+"/"+F:F+"/"+ce+"/"+ee,(fe||Pe)&&(Ie+="/"+Math.round(10*fe)/10),Pe&&(Ie+="/"+Math.round(Pe)),this._hashName){var ke=this._hashName,Ge=!1,Je=e.window.location.hash.slice(1).split("&").map(function(vt){var _t=vt.split("=")[0];return _t===ke?(Ge=!0,_t+"="+Ie):vt}).filter(function(vt){return vt});return Ge||Je.push(ke+"="+Ie),"#"+Je.join("&")}return"#"+Ie},Iu.prototype._getCurrentHash=function(){var X,k=this,F=e.window.location.hash.replace("#","");return this._hashName?(F.split("&").map(function($){return $.split("=")}).forEach(function($){$[0]===k._hashName&&(X=$)}),(X&&X[1]||"").split("/")):F.split("/")},Iu.prototype._onHashChange=function(){var X=this._getCurrentHash();if(X.length>=3&&!X.some(function(F){return isNaN(F)})){var k=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(X[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+X[2],+X[1]],zoom:+X[0],bearing:k,pitch:+(X[4]||0)}),!0}return!1},Iu.prototype._updateHashUnthrottled=function(){var X=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,X)}catch(k){}};var Hl={linearity:.3,easing:e.bezier(0,0,.3,1)},xl=e.extend({deceleration:2500,maxSpeed:1400},Hl),yl=e.extend({deceleration:20,maxSpeed:1400},Hl),Tc=e.extend({deceleration:1e3,maxSpeed:360},Hl),El=e.extend({deceleration:1e3,maxSpeed:90},Hl),_l=function(k){this._map=k,this.clear()};function sl(X,k){(!X.duration||X.duration<k.duration)&&(X.duration=k.duration,X.easing=k.easing)}function ls(X,k,F){var $=F.maxSpeed,G=F.linearity,ee=F.deceleration,ce=e.clamp(X*G/(k/1e3),-$,$),fe=Math.abs(ce)/(ee*G);return{easing:F.easing,duration:1e3*fe,amount:ce*(fe/2)}}_l.prototype.clear=function(){this._inertiaBuffer=[]},_l.prototype.record=function(X){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:X})},_l.prototype._drainInertiaBuffer=function(){for(var X=this._inertiaBuffer,k=e.browser.now();X.length>0&&k-X[0].time>160;)X.shift()},_l.prototype._onMoveEnd=function(X){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var k={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},F=0,$=this._inertiaBuffer;F<$.length;F+=1){var G=$[F].settings;k.zoom+=G.zoomDelta||0,k.bearing+=G.bearingDelta||0,k.pitch+=G.pitchDelta||0,G.panDelta&&k.pan._add(G.panDelta),G.around&&(k.around=G.around),G.pinchAround&&(k.pinchAround=G.pinchAround)}var ee=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ce={};if(k.pan.mag()){var fe=ls(k.pan.mag(),ee,e.extend({},xl,X||{}));ce.offset=k.pan.mult(fe.amount/k.pan.mag()),ce.center=this._map.transform.center,sl(ce,fe)}if(k.zoom){var Pe=ls(k.zoom,ee,yl);ce.zoom=this._map.transform.zoom+Pe.amount,sl(ce,Pe)}if(k.bearing){var Ie=ls(k.bearing,ee,Tc);ce.bearing=this._map.transform.bearing+e.clamp(Ie.amount,-179,179),sl(ce,Ie)}if(k.pitch){var ke=ls(k.pitch,ee,El);ce.pitch=this._map.transform.pitch+ke.amount,sl(ce,ke)}if(ce.zoom||ce.bearing){var Ge=k.pinchAround===void 0?k.around:k.pinchAround;ce.around=Ge?this._map.unproject(Ge):this._map.getCenter()}return this.clear(),e.extend(ce,{noMoveStart:!0})}};var gs=function(X){function k($,G,ee,ce){ce===void 0&&(ce={});var fe=v.mousePos(G.getCanvasContainer(),ee),Pe=G.unproject(fe);X.call(this,$,e.extend({point:fe,lngLat:Pe,originalEvent:ee},ce)),this._defaultPrevented=!1,this.target=G}X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k;var F={defaultPrevented:{configurable:!0}};return k.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(k.prototype,F),k}(e.Event),ht=function(X){function k($,G,ee){var ce=$==="touchend"?ee.changedTouches:ee.touches,fe=v.touchPos(G.getCanvasContainer(),ce),Pe=fe.map(function(Ge){return G.unproject(Ge)}),Ie=fe.reduce(function(Ge,Je,vt,_t){return Ge.add(Je.div(_t.length))},new e.Point(0,0)),ke=G.unproject(Ie);X.call(this,$,{points:fe,point:Ie,lngLats:Pe,lngLat:ke,originalEvent:ee}),this._defaultPrevented=!1}X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k;var F={defaultPrevented:{configurable:!0}};return k.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(k.prototype,F),k}(e.Event),Ut=function(X){function k($,G,ee){X.call(this,$,{originalEvent:ee}),this._defaultPrevented=!1}X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k;var F={defaultPrevented:{configurable:!0}};return k.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(k.prototype,F),k}(e.Event),Ht=function(k,F){this._map=k,this._clickTolerance=F.clickTolerance};Ht.prototype.reset=function(){delete this._mousedownPos},Ht.prototype.wheel=function(X){return this._firePreventable(new Ut(X.type,this._map,X))},Ht.prototype.mousedown=function(X,k){return this._mousedownPos=k,this._firePreventable(new gs(X.type,this._map,X))},Ht.prototype.mouseup=function(X){this._map.fire(new gs(X.type,this._map,X))},Ht.prototype.click=function(X,k){this._mousedownPos&&this._mousedownPos.dist(k)>=this._clickTolerance||this._map.fire(new gs(X.type,this._map,X))},Ht.prototype.dblclick=function(X){return this._firePreventable(new gs(X.type,this._map,X))},Ht.prototype.mouseover=function(X){this._map.fire(new gs(X.type,this._map,X))},Ht.prototype.mouseout=function(X){this._map.fire(new gs(X.type,this._map,X))},Ht.prototype.touchstart=function(X){return this._firePreventable(new ht(X.type,this._map,X))},Ht.prototype.touchmove=function(X){this._map.fire(new ht(X.type,this._map,X))},Ht.prototype.touchend=function(X){this._map.fire(new ht(X.type,this._map,X))},Ht.prototype.touchcancel=function(X){this._map.fire(new ht(X.type,this._map,X))},Ht.prototype._firePreventable=function(X){if(this._map.fire(X),X.defaultPrevented)return{}},Ht.prototype.isEnabled=function(){return!0},Ht.prototype.isActive=function(){return!1},Ht.prototype.enable=function(){},Ht.prototype.disable=function(){};var Kt=function(k){this._map=k};Kt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Kt.prototype.mousemove=function(X){this._map.fire(new gs(X.type,this._map,X))},Kt.prototype.mousedown=function(){this._delayContextMenu=!0},Kt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new gs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Kt.prototype.contextmenu=function(X){this._delayContextMenu?this._contextMenuEvent=X:this._map.fire(new gs(X.type,this._map,X)),this._map.listens("contextmenu")&&X.preventDefault()},Kt.prototype.isEnabled=function(){return!0},Kt.prototype.isActive=function(){return!1},Kt.prototype.enable=function(){},Kt.prototype.disable=function(){};var pr=function(k,F){this._map=k,this._el=k.getCanvasContainer(),this._container=k.getContainer(),this._clickTolerance=F.clickTolerance||1};function ln(X,k){for(var F={},$=0;$<X.length;$++)F[X[$].identifier]=k[$];return F}pr.prototype.isEnabled=function(){return!!this._enabled},pr.prototype.isActive=function(){return!!this._active},pr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},pr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pr.prototype.mousedown=function(X,k){this.isEnabled()&&X.shiftKey&&X.button===0&&(v.disableDrag(),this._startPos=this._lastPos=k,this._active=!0)},pr.prototype.mousemoveWindow=function(X,k){if(this._active){var F=k;if(!(this._lastPos.equals(F)||!this._box&&F.dist(this._startPos)<this._clickTolerance)){var $=this._startPos;this._lastPos=F,this._box||(this._box=v.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",X));var G=Math.min($.x,F.x),ee=Math.max($.x,F.x),ce=Math.min($.y,F.y),fe=Math.max($.y,F.y);v.setTransform(this._box,"translate("+G+"px,"+ce+"px)"),this._box.style.width=ee-G+"px",this._box.style.height=fe-ce+"px"}}},pr.prototype.mouseupWindow=function(X,k){var F=this;if(this._active&&X.button===0){var $=this._startPos,G=k;if(this.reset(),v.suppressClick(),$.x!==G.x||$.y!==G.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:X})),{cameraAnimation:function(ce){return ce.fitScreenCoordinates($,G,F._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",X)}},pr.prototype.keydown=function(X){this._active&&X.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",X))},pr.prototype.blur=function(){this.reset()},pr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos},pr.prototype._fireEvent=function(X,k){return this._map.fire(new e.Event(X,{originalEvent:k}))};var Rn=function(k){this.reset(),this.numTouches=k.numTouches};Rn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Rn.prototype.touchstart=function(X,k,F){(this.centroid||F.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=X.timeStamp),F.length===this.numTouches&&(this.centroid=function($){for(var G=new e.Point(0,0),ee=0,ce=$;ee<ce.length;ee+=1)G._add(ce[ee]);return G.div($.length)}(k),this.touches=ln(F,k)))},Rn.prototype.touchmove=function(X,k,F){if(!this.aborted&&this.centroid){var $=ln(F,k);for(var G in this.touches){var ee=$[G];(!ee||ee.dist(this.touches[G])>30)&&(this.aborted=!0)}}},Rn.prototype.touchend=function(X,k,F){if((!this.centroid||X.timeStamp-this.startTime>500)&&(this.aborted=!0),F.length===0){var $=!this.aborted&&this.centroid;if(this.reset(),$)return $}};var Fn=function(k){this.singleTap=new Rn(k),this.numTaps=k.numTaps,this.reset()};Fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Fn.prototype.touchstart=function(X,k,F){this.singleTap.touchstart(X,k,F)},Fn.prototype.touchmove=function(X,k,F){this.singleTap.touchmove(X,k,F)},Fn.prototype.touchend=function(X,k,F){var $=this.singleTap.touchend(X,k,F);if($){var G=X.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist($)<30;if(G&&ee||this.reset(),this.count++,this.lastTime=X.timeStamp,this.lastTap=$,this.count===this.numTaps)return this.reset(),$}};var li=function(){this._zoomIn=new Fn({numTouches:1,numTaps:2}),this._zoomOut=new Fn({numTouches:2,numTaps:1}),this.reset()};li.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},li.prototype.touchstart=function(X,k,F){this._zoomIn.touchstart(X,k,F),this._zoomOut.touchstart(X,k,F)},li.prototype.touchmove=function(X,k,F){this._zoomIn.touchmove(X,k,F),this._zoomOut.touchmove(X,k,F)},li.prototype.touchend=function(X,k,F){var $=this,G=this._zoomIn.touchend(X,k,F),ee=this._zoomOut.touchend(X,k,F);return G?(this._active=!0,X.preventDefault(),setTimeout(function(){return $.reset()},0),{cameraAnimation:function(fe){return fe.easeTo({duration:300,zoom:fe.getZoom()+1,around:fe.unproject(G)},{originalEvent:X})}}):ee?(this._active=!0,X.preventDefault(),setTimeout(function(){return $.reset()},0),{cameraAnimation:function(fe){return fe.easeTo({duration:300,zoom:fe.getZoom()-1,around:fe.unproject(ee)},{originalEvent:X})}}):void 0},li.prototype.touchcancel=function(){this.reset()},li.prototype.enable=function(){this._enabled=!0},li.prototype.disable=function(){this._enabled=!1,this.reset()},li.prototype.isEnabled=function(){return this._enabled},li.prototype.isActive=function(){return this._active};var qi={0:1,2:2},Wn=function(k){this.reset(),this._clickTolerance=k.clickTolerance||1};Wn.prototype.blur=function(){this.reset()},Wn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Wn.prototype._correctButton=function(X,k){return!1},Wn.prototype._move=function(X,k){return{}},Wn.prototype.mousedown=function(X,k){if(!this._lastPoint){var F=v.mouseButton(X);this._correctButton(X,F)&&(this._lastPoint=k,this._eventButton=F)}},Wn.prototype.mousemoveWindow=function(X,k){var F=this._lastPoint;if(F){if(X.preventDefault(),function($,G){var ee=qi[G];return $.buttons===void 0||($.buttons&ee)!==ee}(X,this._eventButton))this.reset();else if(this._moved||!(k.dist(F)<this._clickTolerance))return this._moved=!0,this._lastPoint=k,this._move(F,k)}},Wn.prototype.mouseupWindow=function(X){this._lastPoint&&v.mouseButton(X)===this._eventButton&&(this._moved&&v.suppressClick(),this.reset())},Wn.prototype.enable=function(){this._enabled=!0},Wn.prototype.disable=function(){this._enabled=!1,this.reset()},Wn.prototype.isEnabled=function(){return this._enabled},Wn.prototype.isActive=function(){return this._active};var ga=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.mousedown=function(F,$){X.prototype.mousedown.call(this,F,$),this._lastPoint&&(this._active=!0)},k.prototype._correctButton=function(F,$){return $===0&&!F.ctrlKey},k.prototype._move=function(F,$){return{around:$,panDelta:$.sub(F)}},k}(Wn),ao=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype._correctButton=function(F,$){return $===0&&F.ctrlKey||$===2},k.prototype._move=function(F,$){var G=.8*($.x-F.x);if(G)return this._active=!0,{bearingDelta:G}},k.prototype.contextmenu=function(F){F.preventDefault()},k}(Wn),is=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype._correctButton=function(F,$){return $===0&&F.ctrlKey||$===2},k.prototype._move=function(F,$){var G=-.5*($.y-F.y);if(G)return this._active=!0,{pitchDelta:G}},k.prototype.contextmenu=function(F){F.preventDefault()},k}(Wn),vo=function(k){this._minTouches=1,this._clickTolerance=k.clickTolerance||1,this.reset()};vo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},vo.prototype.touchstart=function(X,k,F){return this._calculateTransform(X,k,F)},vo.prototype.touchmove=function(X,k,F){if(this._active&&!(F.length<this._minTouches))return X.preventDefault(),this._calculateTransform(X,k,F)},vo.prototype.touchend=function(X,k,F){this._calculateTransform(X,k,F),this._active&&F.length<this._minTouches&&this.reset()},vo.prototype.touchcancel=function(){this.reset()},vo.prototype._calculateTransform=function(X,k,F){F.length>0&&(this._active=!0);var $=ln(F,k),G=new e.Point(0,0),ee=new e.Point(0,0),ce=0;for(var fe in $){var Pe=$[fe],Ie=this._touches[fe];Ie&&(G._add(Pe),ee._add(Pe.sub(Ie)),ce++,$[fe]=Pe)}if(this._touches=$,!(ce<this._minTouches)&&ee.mag()){var ke=ee.div(ce);if(this._sum._add(ke),!(this._sum.mag()<this._clickTolerance))return{around:G.div(ce),panDelta:ke}}},vo.prototype.enable=function(){this._enabled=!0},vo.prototype.disable=function(){this._enabled=!1,this.reset()},vo.prototype.isEnabled=function(){return this._enabled},vo.prototype.isActive=function(){return this._active};var Et=function(){this.reset()};function bt(X,k,F){for(var $=0;$<X.length;$++)if(X[$].identifier===F)return k[$]}function mr(X,k){return Math.log(X/k)/Math.LN2}Et.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Et.prototype._start=function(X){},Et.prototype._move=function(X,k,F){return{}},Et.prototype.touchstart=function(X,k,F){this._firstTwoTouches||F.length<2||(this._firstTwoTouches=[F[0].identifier,F[1].identifier],this._start([k[0],k[1]]))},Et.prototype.touchmove=function(X,k,F){if(this._firstTwoTouches){X.preventDefault();var $=this._firstTwoTouches,G=$[1],ee=bt(F,k,$[0]),ce=bt(F,k,G);if(ee&&ce){var fe=this._aroundCenter?null:ee.add(ce).div(2);return this._move([ee,ce],fe,X)}}},Et.prototype.touchend=function(X,k,F){if(this._firstTwoTouches){var $=this._firstTwoTouches,G=$[1],ee=bt(F,k,$[0]),ce=bt(F,k,G);ee&&ce||(this._active&&v.suppressClick(),this.reset())}},Et.prototype.touchcancel=function(){this.reset()},Et.prototype.enable=function(X){this._enabled=!0,this._aroundCenter=!!X&&X.around==="center"},Et.prototype.disable=function(){this._enabled=!1,this.reset()},Et.prototype.isEnabled=function(){return this._enabled},Et.prototype.isActive=function(){return this._active};var or=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.reset=function(){X.prototype.reset.call(this),delete this._distance,delete this._startDistance},k.prototype._start=function(F){this._startDistance=this._distance=F[0].dist(F[1])},k.prototype._move=function(F,$){var G=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(mr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mr(this._distance,G),pinchAround:$}},k}(Et);function Ir(X,k){return 180*X.angleWith(k)/Math.PI}var yn=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.reset=function(){X.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},k.prototype._start=function(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])},k.prototype._move=function(F,$){var G=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ir(this._vector,G),pinchAround:$}},k.prototype._isBelowThreshold=function(F){this._minDiameter=Math.min(this._minDiameter,F.mag());var $=25/(Math.PI*this._minDiameter)*360,G=Ir(F,this._startVector);return Math.abs(G)<$},k}(Et);function jn(X){return Math.abs(X.y)>Math.abs(X.x)}var qn=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.reset=function(){X.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},k.prototype._start=function(F){this._lastPoints=F,jn(F[0].sub(F[1]))&&(this._valid=!1)},k.prototype._move=function(F,$,G){var ee=F[0].sub(this._lastPoints[0]),ce=F[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ee,ce,G.timeStamp),this._valid)return this._lastPoints=F,this._active=!0,{pitchDelta:(ee.y+ce.y)/2*-.5}},k.prototype.gestureBeginsVertically=function(F,$,G){if(this._valid!==void 0)return this._valid;var ee=F.mag()>=2,ce=$.mag()>=2;if(ee||ce){if(!ee||!ce)return this._firstMove===void 0&&(this._firstMove=G),G-this._firstMove<100&&void 0;var fe=F.y>0==$.y>0;return jn(F)&&jn($)&&fe}},k}(Et),ui={panStep:100,bearingStep:15,pitchStep:10},kn=function(){var k=ui;this._panStep=k.panStep,this._bearingStep=k.bearingStep,this._pitchStep=k.pitchStep,this._rotationDisabled=!1};function oi(X){return X*(2-X)}kn.prototype.blur=function(){this.reset()},kn.prototype.reset=function(){this._active=!1},kn.prototype.keydown=function(X){var k=this;if(!(X.altKey||X.ctrlKey||X.metaKey)){var F=0,$=0,G=0,ee=0,ce=0;switch(X.keyCode){case 61:case 107:case 171:case 187:F=1;break;case 189:case 109:case 173:F=-1;break;case 37:X.shiftKey?$=-1:(X.preventDefault(),ee=-1);break;case 39:X.shiftKey?$=1:(X.preventDefault(),ee=1);break;case 38:X.shiftKey?G=1:(X.preventDefault(),ce=-1);break;case 40:X.shiftKey?G=-1:(X.preventDefault(),ce=1);break;default:return}return this._rotationDisabled&&($=0,G=0),{cameraAnimation:function(Pe){var Ie=Pe.getZoom();Pe.easeTo({duration:300,easeId:"keyboardHandler",easing:oi,zoom:F?Math.round(Ie)+F*(X.shiftKey?2:1):Ie,bearing:Pe.getBearing()+$*k._bearingStep,pitch:Pe.getPitch()+G*k._pitchStep,offset:[-ee*k._panStep,-ce*k._panStep],center:Pe.getCenter()},{originalEvent:X})}}}},kn.prototype.enable=function(){this._enabled=!0},kn.prototype.disable=function(){this._enabled=!1,this.reset()},kn.prototype.isEnabled=function(){return this._enabled},kn.prototype.isActive=function(){return this._active},kn.prototype.disableRotation=function(){this._rotationDisabled=!0},kn.prototype.enableRotation=function(){this._rotationDisabled=!1};var bn=function(k,F){this._map=k,this._el=k.getCanvasContainer(),this._handler=F,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)};bn.prototype.setZoomRate=function(X){this._defaultZoomRate=X},bn.prototype.setWheelZoomRate=function(X){this._wheelZoomRate=X},bn.prototype.isEnabled=function(){return!!this._enabled},bn.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},bn.prototype.isZooming=function(){return!!this._zooming},bn.prototype.enable=function(X){this.isEnabled()||(this._enabled=!0,this._aroundCenter=X&&X.around==="center")},bn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},bn.prototype.wheel=function(X){if(this.isEnabled()){var k=X.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*X.deltaY:X.deltaY,F=e.browser.now(),$=F-(this._lastWheelEventTime||0);this._lastWheelEventTime=F,k!==0&&k%4.000244140625==0?this._type="wheel":k!==0&&Math.abs(k)<4?this._type="trackpad":$>400?(this._type=null,this._lastValue=k,this._timeout=setTimeout(this._onTimeout,40,X)):this._type||(this._type=Math.abs($*k)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,k+=this._lastValue)),X.shiftKey&&k&&(k/=4),this._type&&(this._lastWheelEvent=X,this._delta-=k,this._active||this._start(X)),X.preventDefault()}},bn.prototype._onTimeout=function(X){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(X)},bn.prototype._start=function(X){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var k=v.mousePos(this._el,X);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(k)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},bn.prototype.renderFrame=function(){var X=this;if(this._frameId&&(this._frameId=null,this.isActive())){var k=this._map.transform;if(this._delta!==0){var F=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,$=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&$!==0&&($=1/$);var G=typeof this._targetZoom=="number"?k.zoomScale(this._targetZoom):k.scale;this._targetZoom=Math.min(k.maxZoom,Math.max(k.minZoom,k.scaleZoom(G*$))),this._type==="wheel"&&(this._startZoom=k.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ee,ce=typeof this._targetZoom=="number"?this._targetZoom:k.zoom,fe=this._startZoom,Pe=this._easing,Ie=!1;if(this._type==="wheel"&&fe&&Pe){var ke=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),Ge=Pe(ke);ee=e.number(fe,ce,Ge),ke<1?this._frameId||(this._frameId=!0):Ie=!0}else ee=ce,Ie=!0;return this._active=!0,Ie&&(this._active=!1,this._finishTimeout=setTimeout(function(){X._zooming=!1,X._handler._triggerRenderFrame(),delete X._targetZoom,delete X._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ie,zoomDelta:ee-k.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},bn.prototype._smoothOutEasing=function(X){var k=e.ease;if(this._prevEase){var F=this._prevEase,$=(e.browser.now()-F.start)/F.duration,G=F.easing($+.01)-F.easing($),ee=.27/Math.sqrt(G*G+1e-4)*.01,ce=Math.sqrt(.0729-ee*ee);k=e.bezier(ee,ce,.25,1)}return this._prevEase={start:e.browser.now(),duration:X,easing:k},k},bn.prototype.blur=function(){this.reset()},bn.prototype.reset=function(){this._active=!1};var Xe=function(k,F){this._clickZoom=k,this._tapZoom=F};Xe.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Xe.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Xe.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Xe.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var et=function(){this.reset()};et.prototype.reset=function(){this._active=!1},et.prototype.blur=function(){this.reset()},et.prototype.dblclick=function(X,k){return X.preventDefault(),{cameraAnimation:function($){$.easeTo({duration:300,zoom:$.getZoom()+(X.shiftKey?-1:1),around:$.unproject(k)},{originalEvent:X})}}},et.prototype.enable=function(){this._enabled=!0},et.prototype.disable=function(){this._enabled=!1,this.reset()},et.prototype.isEnabled=function(){return this._enabled},et.prototype.isActive=function(){return this._active};var Ct=function(){this._tap=new Fn({numTouches:1,numTaps:1}),this.reset()};Ct.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ct.prototype.touchstart=function(X,k,F){this._swipePoint||(this._tapTime&&X.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?F.length>0&&(this._swipePoint=k[0],this._swipeTouch=F[0].identifier):this._tap.touchstart(X,k,F))},Ct.prototype.touchmove=function(X,k,F){if(this._tapTime){if(this._swipePoint){if(F[0].identifier!==this._swipeTouch)return;var $=k[0],G=$.y-this._swipePoint.y;return this._swipePoint=$,X.preventDefault(),this._active=!0,{zoomDelta:G/128}}}else this._tap.touchmove(X,k,F)},Ct.prototype.touchend=function(X,k,F){this._tapTime?this._swipePoint&&F.length===0&&this.reset():this._tap.touchend(X,k,F)&&(this._tapTime=X.timeStamp)},Ct.prototype.touchcancel=function(){this.reset()},Ct.prototype.enable=function(){this._enabled=!0},Ct.prototype.disable=function(){this._enabled=!1,this.reset()},Ct.prototype.isEnabled=function(){return this._enabled},Ct.prototype.isActive=function(){return this._active};var At=function(k,F,$){this._el=k,this._mousePan=F,this._touchPan=$};At.prototype.enable=function(X){this._inertiaOptions=X||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},At.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},At.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},At.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Le=function(k,F,$){this._pitchWithRotate=k.pitchWithRotate,this._mouseRotate=F,this._mousePitch=$};Le.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Le.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Le.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Le.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ne=function(k,F,$,G){this._el=k,this._touchZoom=F,this._touchRotate=$,this._tapDragZoom=G,this._rotationDisabled=!1,this._enabled=!0};Ne.prototype.enable=function(X){this._touchZoom.enable(X),this._rotationDisabled||this._touchRotate.enable(X),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ne.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ne.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ne.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ne.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ne.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var nt=function(k){return k.zoom||k.drag||k.pitch||k.rotate},tt=function(X){function k(){X.apply(this,arguments)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k}(e.Event);function dt(X){return X.panDelta&&X.panDelta.mag()||X.zoomDelta||X.bearingDelta||X.pitchDelta}var Dt=function(k,F){this._map=k,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _l(k),this._bearingSnap=F.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(F),e.bindAll(["handleEvent","handleWindowEvent"],this);var $=this._el;this._listeners=[[$,"touchstart",{passive:!0}],[$,"touchmove",{passive:!1}],[$,"touchend",void 0],[$,"touchcancel",void 0],[$,"mousedown",void 0],[$,"mousemove",void 0],[$,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[$,"mouseover",void 0],[$,"mouseout",void 0],[$,"dblclick",void 0],[$,"click",void 0],[$,"keydown",{capture:!1}],[$,"keyup",void 0],[$,"wheel",{passive:!1}],[$,"contextmenu",void 0],[e.window,"blur",void 0]];for(var G=0,ee=this._listeners;G<ee.length;G+=1){var ce=ee[G],fe=ce[0];v.addEventListener(fe,ce[1],fe===e.window.document?this.handleWindowEvent:this.handleEvent,ce[2])}};Dt.prototype.destroy=function(){for(var X=0,k=this._listeners;X<k.length;X+=1){var F=k[X],$=F[0];v.removeEventListener($,F[1],$===e.window.document?this.handleWindowEvent:this.handleEvent,F[2])}},Dt.prototype._addDefaultHandlers=function(X){var k=this._map,F=k.getCanvasContainer();this._add("mapEvent",new Ht(k,X));var $=k.boxZoom=new pr(k,X);this._add("boxZoom",$);var G=new li,ee=new et;k.doubleClickZoom=new Xe(ee,G),this._add("tapZoom",G),this._add("clickZoom",ee);var ce=new Ct;this._add("tapDragZoom",ce);var fe=k.touchPitch=new qn;this._add("touchPitch",fe);var Pe=new ao(X),Ie=new is(X);k.dragRotate=new Le(X,Pe,Ie),this._add("mouseRotate",Pe,["mousePitch"]),this._add("mousePitch",Ie,["mouseRotate"]);var ke=new ga(X),Ge=new vo(X);k.dragPan=new At(F,ke,Ge),this._add("mousePan",ke),this._add("touchPan",Ge,["touchZoom","touchRotate"]);var Je=new yn,vt=new or;k.touchZoomRotate=new Ne(F,vt,Je,ce),this._add("touchRotate",Je,["touchPan","touchZoom"]),this._add("touchZoom",vt,["touchPan","touchRotate"]);var _t=k.scrollZoom=new bn(k,this);this._add("scrollZoom",_t,["mousePan"]);var Rt=k.keyboard=new kn;this._add("keyboard",Rt),this._add("blockableMapEvent",new Kt(k));for(var Pt=0,Gt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Pt<Gt.length;Pt+=1){var ur=Gt[Pt];X.interactive&&X[ur]&&k[ur].enable(X[ur])}},Dt.prototype._add=function(X,k,F){this._handlers.push({handlerName:X,handler:k,allowed:F}),this._handlersById[X]=k},Dt.prototype.stop=function(X){if(!this._updatingCamera){for(var k=0,F=this._handlers;k<F.length;k+=1)F[k].handler.reset();this._inertia.clear(),this._fireEvents({},{},X),this._changes=[]}},Dt.prototype.isActive=function(){for(var X=0,k=this._handlers;X<k.length;X+=1)if(k[X].handler.isActive())return!0;return!1},Dt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Dt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Dt.prototype.isMoving=function(){return Boolean(nt(this._eventsInProgress))||this.isZooming()},Dt.prototype._blockedByActive=function(X,k,F){for(var $ in X)if($!==F&&(!k||k.indexOf($)<0))return!0;return!1},Dt.prototype.handleWindowEvent=function(X){this.handleEvent(X,X.type+"Window")},Dt.prototype._getMapTouches=function(X){for(var k=[],F=0,$=X;F<$.length;F+=1){var G=$[F];this._el.contains(G.target)&&k.push(G)}return k},Dt.prototype.handleEvent=function(X,k){this._updatingCamera=!0;for(var F=X.type==="renderFrame"?void 0:X,$={needsRenderFrame:!1},G={},ee={},ce=X.touches?this._getMapTouches(X.touches):void 0,fe=ce?v.touchPos(this._el,ce):v.mousePos(this._el,X),Pe=0,Ie=this._handlers;Pe<Ie.length;Pe+=1){var ke=Ie[Pe],Ge=ke.handlerName,Je=ke.handler,vt=ke.allowed;if(Je.isEnabled()){var _t=void 0;this._blockedByActive(ee,vt,Ge)?Je.reset():Je[k||X.type]&&(_t=Je[k||X.type](X,fe,ce),this.mergeHandlerResult($,G,_t,Ge,F),_t&&_t.needsRenderFrame&&this._triggerRenderFrame()),(_t||Je.isActive())&&(ee[Ge]=Je)}}var Rt={};for(var Pt in this._previousActiveHandlers)ee[Pt]||(Rt[Pt]=F);this._previousActiveHandlers=ee,(Object.keys(Rt).length||dt($))&&(this._changes.push([$,G,Rt]),this._triggerRenderFrame()),(Object.keys(ee).length||dt($))&&this._map._stop(!0),this._updatingCamera=!1;var Gt=$.cameraAnimation;Gt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Gt(this._map))},Dt.prototype.mergeHandlerResult=function(X,k,F,$,G){if(F){e.extend(X,F);var ee={handlerName:$,originalEvent:F.originalEvent||G};F.zoomDelta!==void 0&&(k.zoom=ee),F.panDelta!==void 0&&(k.drag=ee),F.pitchDelta!==void 0&&(k.pitch=ee),F.bearingDelta!==void 0&&(k.rotate=ee)}},Dt.prototype._applyChanges=function(){for(var X={},k={},F={},$=0,G=this._changes;$<G.length;$+=1){var ee=G[$],ce=ee[0],fe=ee[1],Pe=ee[2];ce.panDelta&&(X.panDelta=(X.panDelta||new e.Point(0,0))._add(ce.panDelta)),ce.zoomDelta&&(X.zoomDelta=(X.zoomDelta||0)+ce.zoomDelta),ce.bearingDelta&&(X.bearingDelta=(X.bearingDelta||0)+ce.bearingDelta),ce.pitchDelta&&(X.pitchDelta=(X.pitchDelta||0)+ce.pitchDelta),ce.around!==void 0&&(X.around=ce.around),ce.pinchAround!==void 0&&(X.pinchAround=ce.pinchAround),ce.noInertia&&(X.noInertia=ce.noInertia),e.extend(k,fe),e.extend(F,Pe)}this._updateMapTransform(X,k,F),this._changes=[]},Dt.prototype._updateMapTransform=function(X,k,F){var $=this._map,G=$.transform;if(!dt(X))return this._fireEvents(k,F,!0);var ee=X.panDelta,ce=X.zoomDelta,fe=X.bearingDelta,Pe=X.pitchDelta,Ie=X.around,ke=X.pinchAround;ke!==void 0&&(Ie=ke),$._stop(!0),Ie=Ie||$.transform.centerPoint;var Ge=G.pointLocation(ee?Ie.sub(ee):Ie);fe&&(G.bearing+=fe),Pe&&(G.pitch+=Pe),ce&&(G.zoom+=ce),G.setLocationAtPoint(Ge,Ie),this._map._update(),X.noInertia||this._inertia.record(X),this._fireEvents(k,F,!0)},Dt.prototype._fireEvents=function(X,k,F){var $=this,G=nt(this._eventsInProgress),ee=nt(X),ce={};for(var fe in X)this._eventsInProgress[fe]||(ce[fe+"start"]=X[fe].originalEvent),this._eventsInProgress[fe]=X[fe];for(var Pe in!G&&ee&&this._fireEvent("movestart",ee.originalEvent),ce)this._fireEvent(Pe,ce[Pe]);for(var Ie in ee&&this._fireEvent("move",ee.originalEvent),X)this._fireEvent(Ie,X[Ie].originalEvent);var ke,Ge={};for(var Je in this._eventsInProgress){var vt=this._eventsInProgress[Je],_t=vt.handlerName,Rt=vt.originalEvent;this._handlersById[_t].isActive()||(delete this._eventsInProgress[Je],Ge[Je+"end"]=ke=k[_t]||Rt)}for(var Pt in Ge)this._fireEvent(Pt,Ge[Pt]);var Gt=nt(this._eventsInProgress);if(F&&(G||ee)&&!Gt){this._updatingCamera=!0;var ur=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),hr=function(Yr){return Yr!==0&&-$._bearingSnap<Yr&&Yr<$._bearingSnap};ur?(hr(ur.bearing||this._map.getBearing())&&(ur.bearing=0),this._map.easeTo(ur,{originalEvent:ke})):(this._map.fire(new e.Event("moveend",{originalEvent:ke})),hr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Dt.prototype._fireEvent=function(X,k){this._map.fire(new e.Event(X,k?{originalEvent:k}:{}))},Dt.prototype._requestFrame=function(){var X=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(k){delete X._frameId,X.handleEvent(new tt("renderFrame",{timeStamp:k})),X._applyChanges()})},Dt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Zt=function(X){function k(F,$){X.call(this),this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=$.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},k.prototype.setCenter=function(F,$){return this.jumpTo({center:F},$)},k.prototype.panBy=function(F,$,G){return F=e.Point.convert(F).mult(-1),this.panTo(this.transform.center,e.extend({offset:F},$),G)},k.prototype.panTo=function(F,$,G){return this.easeTo(e.extend({center:F},$),G)},k.prototype.getZoom=function(){return this.transform.zoom},k.prototype.setZoom=function(F,$){return this.jumpTo({zoom:F},$),this},k.prototype.zoomTo=function(F,$,G){return this.easeTo(e.extend({zoom:F},$),G)},k.prototype.zoomIn=function(F,$){return this.zoomTo(this.getZoom()+1,F,$),this},k.prototype.zoomOut=function(F,$){return this.zoomTo(this.getZoom()-1,F,$),this},k.prototype.getBearing=function(){return this.transform.bearing},k.prototype.setBearing=function(F,$){return this.jumpTo({bearing:F},$),this},k.prototype.getPadding=function(){return this.transform.padding},k.prototype.setPadding=function(F,$){return this.jumpTo({padding:F},$),this},k.prototype.rotateTo=function(F,$,G){return this.easeTo(e.extend({bearing:F},$),G)},k.prototype.resetNorth=function(F,$){return this.rotateTo(0,e.extend({duration:1e3},F),$),this},k.prototype.resetNorthPitch=function(F,$){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},F),$),this},k.prototype.snapToNorth=function(F,$){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,$):this},k.prototype.getPitch=function(){return this.transform.pitch},k.prototype.setPitch=function(F,$){return this.jumpTo({pitch:F},$),this},k.prototype.cameraForBounds=function(F,$){F=e.LngLatBounds.convert(F);var G=$&&$.bearing||0;return this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),G,$)},k.prototype._cameraForBoxAndBearing=function(F,$,G,ee){var ce={top:0,bottom:0,right:0,left:0};if(typeof(ee=e.extend({padding:ce,offset:[0,0],maxZoom:this.transform.maxZoom},ee)).padding=="number"){var fe=ee.padding;ee.padding={top:fe,bottom:fe,right:fe,left:fe}}ee.padding=e.extend(ce,ee.padding);var Pe=this.transform,Ie=Pe.padding,ke=Pe.project(e.LngLat.convert(F)),Ge=Pe.project(e.LngLat.convert($)),Je=ke.rotate(-G*Math.PI/180),vt=Ge.rotate(-G*Math.PI/180),_t=new e.Point(Math.max(Je.x,vt.x),Math.max(Je.y,vt.y)),Rt=new e.Point(Math.min(Je.x,vt.x),Math.min(Je.y,vt.y)),Pt=_t.sub(Rt),Gt=(Pe.width-(Ie.left+Ie.right+ee.padding.left+ee.padding.right))/Pt.x,ur=(Pe.height-(Ie.top+Ie.bottom+ee.padding.top+ee.padding.bottom))/Pt.y;if(!(ur<0||Gt<0)){var hr=Math.min(Pe.scaleZoom(Pe.scale*Math.min(Gt,ur)),ee.maxZoom),nn=typeof ee.offset.x=="number"?new e.Point(ee.offset.x,ee.offset.y):e.Point.convert(ee.offset),Yr=new e.Point((ee.padding.left-ee.padding.right)/2,(ee.padding.top-ee.padding.bottom)/2).rotate(G*Math.PI/180),Tn=nn.add(Yr).mult(Pe.scale/Pe.zoomScale(hr));return{center:Pe.unproject(ke.add(Ge).div(2).sub(Tn)),zoom:hr,bearing:G}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},k.prototype.fitBounds=function(F,$,G){return this._fitInternal(this.cameraForBounds(F,$),$,G)},k.prototype.fitScreenCoordinates=function(F,$,G,ee,ce){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(F)),this.transform.pointLocation(e.Point.convert($)),G,ee),ee,ce)},k.prototype._fitInternal=function(F,$,G){return F?(delete($=e.extend(F,$)).padding,$.linear?this.easeTo($,G):this.flyTo($,G)):this},k.prototype.jumpTo=function(F,$){this.stop();var G=this.transform,ee=!1,ce=!1,fe=!1;return"zoom"in F&&G.zoom!==+F.zoom&&(ee=!0,G.zoom=+F.zoom),F.center!==void 0&&(G.center=e.LngLat.convert(F.center)),"bearing"in F&&G.bearing!==+F.bearing&&(ce=!0,G.bearing=+F.bearing),"pitch"in F&&G.pitch!==+F.pitch&&(fe=!0,G.pitch=+F.pitch),F.padding==null||G.isPaddingEqual(F.padding)||(G.padding=F.padding),this.fire(new e.Event("movestart",$)).fire(new e.Event("move",$)),ee&&this.fire(new e.Event("zoomstart",$)).fire(new e.Event("zoom",$)).fire(new e.Event("zoomend",$)),ce&&this.fire(new e.Event("rotatestart",$)).fire(new e.Event("rotate",$)).fire(new e.Event("rotateend",$)),fe&&this.fire(new e.Event("pitchstart",$)).fire(new e.Event("pitch",$)).fire(new e.Event("pitchend",$)),this.fire(new e.Event("moveend",$))},k.prototype.easeTo=function(F,$){var G=this;this._stop(!1,F.easeId),((F=e.extend({offset:[0,0],duration:500,easing:e.ease},F)).animate===!1||!F.essential&&e.browser.prefersReducedMotion)&&(F.duration=0);var ee=this.transform,ce=this.getZoom(),fe=this.getBearing(),Pe=this.getPitch(),Ie=this.getPadding(),ke="zoom"in F?+F.zoom:ce,Ge="bearing"in F?this._normalizeBearing(F.bearing,fe):fe,Je="pitch"in F?+F.pitch:Pe,vt="padding"in F?F.padding:ee.padding,_t=e.Point.convert(F.offset),Rt=ee.centerPoint.add(_t),Pt=ee.pointLocation(Rt),Gt=e.LngLat.convert(F.center||Pt);this._normalizeCenter(Gt);var ur,hr,nn=ee.project(Pt),Yr=ee.project(Gt).sub(nn),Tn=ee.zoomScale(ke-ce);F.around&&(ur=e.LngLat.convert(F.around),hr=ee.locationPoint(ur));var In={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ke!==ce,this._rotating=this._rotating||fe!==Ge,this._pitching=this._pitching||Je!==Pe,this._padding=!ee.isPaddingEqual(vt),this._easeId=F.easeId,this._prepareEase($,F.noMoveStart,In),this._ease(function(si){if(G._zooming&&(ee.zoom=e.number(ce,ke,si)),G._rotating&&(ee.bearing=e.number(fe,Ge,si)),G._pitching&&(ee.pitch=e.number(Pe,Je,si)),G._padding&&(ee.interpolatePadding(Ie,vt,si),Rt=ee.centerPoint.add(_t)),ur)ee.setLocationAtPoint(ur,hr);else{var ni=ee.zoomScale(ee.zoom-ce),Ci=ke>ce?Math.min(2,Tn):Math.max(.5,Tn),Ji=Math.pow(Ci,1-si),ha=ee.unproject(nn.add(Yr.mult(si*Ji)).mult(ni));ee.setLocationAtPoint(ee.renderWorldCopies?ha.wrap():ha,Rt)}G._fireMoveEvents($)},function(si){G._afterEase($,si)},F),this},k.prototype._prepareEase=function(F,$,G){G===void 0&&(G={}),this._moving=!0,$||G.moving||this.fire(new e.Event("movestart",F)),this._zooming&&!G.zooming&&this.fire(new e.Event("zoomstart",F)),this._rotating&&!G.rotating&&this.fire(new e.Event("rotatestart",F)),this._pitching&&!G.pitching&&this.fire(new e.Event("pitchstart",F))},k.prototype._fireMoveEvents=function(F){this.fire(new e.Event("move",F)),this._zooming&&this.fire(new e.Event("zoom",F)),this._rotating&&this.fire(new e.Event("rotate",F)),this._pitching&&this.fire(new e.Event("pitch",F))},k.prototype._afterEase=function(F,$){if(!this._easeId||!$||this._easeId!==$){delete this._easeId;var G=this._zooming,ee=this._rotating,ce=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,G&&this.fire(new e.Event("zoomend",F)),ee&&this.fire(new e.Event("rotateend",F)),ce&&this.fire(new e.Event("pitchend",F)),this.fire(new e.Event("moveend",F))}},k.prototype.flyTo=function(F,$){var G=this;if(!F.essential&&e.browser.prefersReducedMotion){var ee=e.pick(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ee,$)}this.stop(),F=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},F);var ce=this.transform,fe=this.getZoom(),Pe=this.getBearing(),Ie=this.getPitch(),ke=this.getPadding(),Ge="zoom"in F?e.clamp(+F.zoom,ce.minZoom,ce.maxZoom):fe,Je="bearing"in F?this._normalizeBearing(F.bearing,Pe):Pe,vt="pitch"in F?+F.pitch:Ie,_t="padding"in F?F.padding:ce.padding,Rt=ce.zoomScale(Ge-fe),Pt=e.Point.convert(F.offset),Gt=ce.centerPoint.add(Pt),ur=ce.pointLocation(Gt),hr=e.LngLat.convert(F.center||ur);this._normalizeCenter(hr);var nn=ce.project(ur),Yr=ce.project(hr).sub(nn),Tn=F.curve,In=Math.max(ce.width,ce.height),si=In/Rt,ni=Yr.mag();if("minZoom"in F){var Ci=e.clamp(Math.min(F.minZoom,fe,Ge),ce.minZoom,ce.maxZoom),Ji=In/ce.zoomScale(Ci-fe);Tn=Math.sqrt(Ji/ni*2)}var ha=Tn*Tn;function ya(Ea){var ro=(si*si-In*In+(Ea?-1:1)*ha*ha*ni*ni)/(2*(Ea?si:In)*ha*ni);return Math.log(Math.sqrt(ro*ro+1)-ro)}function to(Ea){return(Math.exp(Ea)-Math.exp(-Ea))/2}function wo(Ea){return(Math.exp(Ea)+Math.exp(-Ea))/2}var ta=ya(0),Ka=function(ro){return wo(ta)/wo(ta+Tn*ro)},Ga=function(ro){return In*((wo(ta)*(to(Co=ta+Tn*ro)/wo(Co))-to(ta))/ha)/ni;var Co},ua=(ya(1)-ta)/Tn;if(Math.abs(ni)<1e-6||!isFinite(ua)){if(Math.abs(In-si)<1e-6)return this.easeTo(F,$);var Xa=si<In?-1:1;ua=Math.abs(Math.log(si/In))/Tn,Ga=function(){return 0},Ka=function(ro){return Math.exp(Xa*Tn*ro)}}return F.duration="duration"in F?+F.duration:1e3*ua/("screenSpeed"in F?+F.screenSpeed/Tn:+F.speed),F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=Pe!==Je,this._pitching=vt!==Ie,this._padding=!ce.isPaddingEqual(_t),this._prepareEase($,!1),this._ease(function(Ea){var ro=Ea*ua,Co=1/Ka(ro);ce.zoom=Ea===1?Ge:fe+ce.scaleZoom(Co),G._rotating&&(ce.bearing=e.number(Pe,Je,Ea)),G._pitching&&(ce.pitch=e.number(Ie,vt,Ea)),G._padding&&(ce.interpolatePadding(ke,_t,Ea),Gt=ce.centerPoint.add(Pt));var iu=Ea===1?hr:ce.unproject(nn.add(Yr.mult(Ga(ro))).mult(Co));ce.setLocationAtPoint(ce.renderWorldCopies?iu.wrap():iu,Gt),G._fireMoveEvents($)},function(){return G._afterEase($)},F),this},k.prototype.isEasing=function(){return!!this._easeFrameId},k.prototype.stop=function(){return this._stop()},k.prototype._stop=function(F,$){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var G=this._onEaseEnd;delete this._onEaseEnd,G.call(this,$)}if(!F){var ee=this.handlers;ee&&ee.stop(!1)}return this},k.prototype._ease=function(F,$,G){G.animate===!1||G.duration===0?(F(1),$()):(this._easeStart=e.browser.now(),this._easeOptions=G,this._onEaseFrame=F,this._onEaseEnd=$,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},k.prototype._renderFrameCallback=function(){var F=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},k.prototype._normalizeBearing=function(F,$){F=e.wrap(F,-180,180);var G=Math.abs(F-$);return Math.abs(F-360-$)<G&&(F-=360),Math.abs(F+360-$)<G&&(F+=360),F},k.prototype._normalizeCenter=function(F){var $=this.transform;if($.renderWorldCopies&&!$.lngRange){var G=F.lng-$.center.lng;F.lng+=G>180?-360:G<-180?360:0}},k}(e.Evented),cr=function(k){k===void 0&&(k={}),this.options=k,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};cr.prototype.getDefaultPosition=function(){return"bottom-right"},cr.prototype.onAdd=function(X){var k=this.options&&this.options.compact;return this._map=X,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=v.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),k&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),k===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},cr.prototype.onRemove=function(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},cr.prototype._setElementTitle=function(X,k){var F=this._map._getUIString("AttributionControl."+k);X.title=F,X.setAttribute("aria-label",F)},cr.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},cr.prototype._updateEditLink=function(){var X=this._editLink;X||(X=this._editLink=this._container.querySelector(".mapbox-improve-map"));var k=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(X){var F=k.reduce(function($,G,ee){return G.value&&($+=G.key+"="+G.value+(ee<k.length-1?"&":"")),$},"?");X.href=e.config.FEEDBACK_URL+"/"+F+(this._map._hash?this._map._hash.getHashString(!0):""),X.rel="noopener nofollow",this._setElementTitle(X,"MapFeedback")}},cr.prototype._updateData=function(X){!X||X.sourceDataType!=="metadata"&&X.sourceDataType!=="visibility"&&X.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},cr.prototype._updateAttributions=function(){if(this._map.style){var X=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?X=X.concat(this.options.customAttribution.map(function(fe){return typeof fe!="string"?"":fe})):typeof this.options.customAttribution=="string"&&X.push(this.options.customAttribution)),this._map.style.stylesheet){var k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}var F=this._map.style.sourceCaches;for(var $ in F){var G=F[$];if(G.used){var ee=G.getSource();ee.attribution&&X.indexOf(ee.attribution)<0&&X.push(ee.attribution)}}X.sort(function(fe,Pe){return fe.length-Pe.length});var ce=(X=X.filter(function(fe,Pe){for(var Ie=Pe+1;Ie<X.length;Ie++)if(X[Ie].indexOf(fe)>=0)return!1;return!0})).join(" | ");ce!==this._attribHTML&&(this._attribHTML=ce,X.length?(this._innerContainer.innerHTML=ce,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},cr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Jt=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Jt.prototype.onAdd=function(X){this._map=X,this._container=v.create("div","mapboxgl-ctrl");var k=v.create("a","mapboxgl-ctrl-logo");return k.target="_blank",k.rel="noopener nofollow",k.href="https://www.mapbox.com/",k.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),k.setAttribute("rel","noopener nofollow"),this._container.appendChild(k),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Jt.prototype.onRemove=function(){v.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Jt.prototype.getDefaultPosition=function(){return"bottom-left"},Jt.prototype._updateLogo=function(X){X&&X.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Jt.prototype._logoRequired=function(){if(this._map.style){var X=this._map.style.sourceCaches;for(var k in X)if(X[k].getSource().mapbox_logo)return!0;return!1}},Jt.prototype._updateCompact=function(){var X=this._container.children;if(X.length){var k=X[0];this._map.getCanvasContainer().offsetWidth<250?k.classList.add("mapboxgl-compact"):k.classList.remove("mapboxgl-compact")}};var xr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xr.prototype.add=function(X){var k=++this._id;return this._queue.push({callback:X,id:k,cancelled:!1}),k},xr.prototype.remove=function(X){for(var k=this._currentlyRunning,F=0,$=k?this._queue.concat(k):this._queue;F<$.length;F+=1){var G=$[F];if(G.id===X)return void(G.cancelled=!0)}},xr.prototype.run=function(X){X===void 0&&(X=0);var k=this._currentlyRunning=this._queue;this._queue=[];for(var F=0,$=k;F<$.length;F+=1){var G=$[F];if(!G.cancelled&&(G.callback(X),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var yr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},rn=e.window.HTMLImageElement,Kr=e.window.HTMLElement,an=e.window.ImageBitmap,Qr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},_n=function(X){function k($){var G=this;if(($=e.extend({},Qr,$)).minZoom!=null&&$.maxZoom!=null&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if($.minPitch!=null&&$.maxPitch!=null&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if($.minPitch!=null&&$.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if($.maxPitch!=null&&$.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ee=new xo($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies);if(X.call(this,ee,$),this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new xr,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},yr,$.locale),this._clickTolerance=$.clickTolerance,this._requestManager=new e.RequestManager($.transformRequest,$.accessToken),typeof $.container=="string"){if(this._container=e.window.document.getElementById($.container),!this._container)throw new Error("Container '"+$.container+"' not found.")}else{if(!($.container instanceof Kr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=$.container}if($.maxBounds&&this.setMaxBounds($.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return G._update(!1)}),this.on("moveend",function(){return G._update(!1)}),this.on("zoom",function(){return G._update(!0)}),e.window!==void 0&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Dt(this,$),this._hash=$.hash&&new Iu(typeof $.hash=="string"&&$.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,e.extend({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new cr({customAttribution:$.customAttribution})),this.addControl(new Jt,$.logoPosition),this.on("style.load",function(){G.transform.unmodified&&G.jumpTo(G.style.stylesheet)}),this.on("data",function(ce){G._update(ce.dataType==="style"),G.fire(new e.Event(ce.dataType+"data",ce))}),this.on("dataloading",function(ce){G.fire(new e.Event(ce.dataType+"dataloading",ce))})}X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k;var F={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return k.prototype._getMapId=function(){return this._mapId},k.prototype.addControl=function($,G){if(G===void 0&&(G=$.getDefaultPosition?$.getDefaultPosition():"top-right"),!$||!$.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ee=$.onAdd(this);this._controls.push($);var ce=this._controlPositions[G];return G.indexOf("bottom")!==-1?ce.insertBefore(ee,ce.firstChild):ce.appendChild(ee),this},k.prototype.removeControl=function($){if(!$||!$.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var G=this._controls.indexOf($);return G>-1&&this._controls.splice(G,1),$.onRemove(this),this},k.prototype.hasControl=function($){return this._controls.indexOf($)>-1},k.prototype.resize=function($){var G=this._containerDimensions(),ee=G[0],ce=G[1];if(ee===this.transform.width&&ce===this.transform.height)return this;this._resizeCanvas(ee,ce),this.transform.resize(ee,ce),this.painter.resize(ee,ce);var fe=!this._moving;return fe&&this.fire(new e.Event("movestart",$)).fire(new e.Event("move",$)),this.fire(new e.Event("resize",$)),fe&&this.fire(new e.Event("moveend",$)),this},k.prototype.getBounds=function(){return this.transform.getBounds()},k.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},k.prototype.setMaxBounds=function($){return this.transform.setMaxBounds(e.LngLatBounds.convert($)),this._update()},k.prototype.setMinZoom=function($){if(($=$==null?-2:$)>=-2&&$<=this.transform.maxZoom)return this.transform.minZoom=$,this._update(),this.getZoom()<$&&this.setZoom($),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},k.prototype.getMinZoom=function(){return this.transform.minZoom},k.prototype.setMaxZoom=function($){if(($=$==null?22:$)>=this.transform.minZoom)return this.transform.maxZoom=$,this._update(),this.getZoom()>$&&this.setZoom($),this;throw new Error("maxZoom must be greater than the current minZoom")},k.prototype.getMaxZoom=function(){return this.transform.maxZoom},k.prototype.setMinPitch=function($){if(($=$==null?0:$)<0)throw new Error("minPitch must be greater than or equal to 0");if($>=0&&$<=this.transform.maxPitch)return this.transform.minPitch=$,this._update(),this.getPitch()<$&&this.setPitch($),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},k.prototype.getMinPitch=function(){return this.transform.minPitch},k.prototype.setMaxPitch=function($){if(($=$==null?60:$)>60)throw new Error("maxPitch must be less than or equal to 60");if($>=this.transform.minPitch)return this.transform.maxPitch=$,this._update(),this.getPitch()>$&&this.setPitch($),this;throw new Error("maxPitch must be greater than the current minPitch")},k.prototype.getMaxPitch=function(){return this.transform.maxPitch},k.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},k.prototype.setRenderWorldCopies=function($){return this.transform.renderWorldCopies=$,this._update()},k.prototype.project=function($){return this.transform.locationPoint(e.LngLat.convert($))},k.prototype.unproject=function($){return this.transform.pointLocation(e.Point.convert($))},k.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},k.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},k.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},k.prototype._createDelegatedListener=function($,G,ee){var ce,fe=this;if($==="mouseenter"||$==="mouseover"){var Pe=!1;return{layer:G,listener:ee,delegates:{mousemove:function(Ge){var Je=fe.getLayer(G)?fe.queryRenderedFeatures(Ge.point,{layers:[G]}):[];Je.length?Pe||(Pe=!0,ee.call(fe,new gs($,fe,Ge.originalEvent,{features:Je}))):Pe=!1},mouseout:function(){Pe=!1}}}}if($==="mouseleave"||$==="mouseout"){var Ie=!1;return{layer:G,listener:ee,delegates:{mousemove:function(Ge){(fe.getLayer(G)?fe.queryRenderedFeatures(Ge.point,{layers:[G]}):[]).length?Ie=!0:Ie&&(Ie=!1,ee.call(fe,new gs($,fe,Ge.originalEvent)))},mouseout:function(Ge){Ie&&(Ie=!1,ee.call(fe,new gs($,fe,Ge.originalEvent)))}}}}return{layer:G,listener:ee,delegates:(ce={},ce[$]=function(ke){var Ge=fe.getLayer(G)?fe.queryRenderedFeatures(ke.point,{layers:[G]}):[];Ge.length&&(ke.features=Ge,ee.call(fe,ke),delete ke.features)},ce)}},k.prototype.on=function($,G,ee){if(ee===void 0)return X.prototype.on.call(this,$,G);var ce=this._createDelegatedListener($,G,ee);for(var fe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[$]=this._delegatedListeners[$]||[],this._delegatedListeners[$].push(ce),ce.delegates)this.on(fe,ce.delegates[fe]);return this},k.prototype.once=function($,G,ee){if(ee===void 0)return X.prototype.once.call(this,$,G);var ce=this._createDelegatedListener($,G,ee);for(var fe in ce.delegates)this.once(fe,ce.delegates[fe]);return this},k.prototype.off=function($,G,ee){var ce=this;return ee===void 0?X.prototype.off.call(this,$,G):(this._delegatedListeners&&this._delegatedListeners[$]&&function(fe){for(var Pe=fe[$],Ie=0;Ie<Pe.length;Ie++){var ke=Pe[Ie];if(ke.layer===G&&ke.listener===ee){for(var Ge in ke.delegates)ce.off(Ge,ke.delegates[Ge]);return Pe.splice(Ie,1),ce}}}(this._delegatedListeners),this)},k.prototype.queryRenderedFeatures=function($,G){if(!this.style)return[];var ee;if(G!==void 0||$===void 0||$ instanceof e.Point||Array.isArray($)||(G=$,$=void 0),G=G||{},($=$||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||typeof $[0]=="number")ee=[e.Point.convert($)];else{var ce=e.Point.convert($[0]),fe=e.Point.convert($[1]);ee=[ce,new e.Point(fe.x,ce.y),fe,new e.Point(ce.x,fe.y),ce]}return this.style.queryRenderedFeatures(ee,G,this.transform)},k.prototype.querySourceFeatures=function($,G){return this.style.querySourceFeatures($,G)},k.prototype.setStyle=function($,G){return(G=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},G)).diff!==!1&&G.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&$?(this._diffStyle($,G),this):(this._localIdeographFontFamily=G.localIdeographFontFamily,this._updateStyle($,G))},k.prototype._getUIString=function($){var G=this._locale[$];if(G==null)throw new Error("Missing UI string '"+$+"'");return G},k.prototype._updateStyle=function($,G){return this.style&&(this.style.setEventedParent(null),this.style._remove()),$?(this.style=new Yo(this,G||{}),this.style.setEventedParent(this,{style:this.style}),typeof $=="string"?this.style.loadURL($):this.style.loadJSON($),this):(delete this.style,this)},k.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Yo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},k.prototype._diffStyle=function($,G){var ee=this;if(typeof $=="string"){var ce=this._requestManager.normalizeStyleURL($),fe=this._requestManager.transformRequest(ce,e.ResourceType.Style);e.getJSON(fe,function(Pe,Ie){Pe?ee.fire(new e.ErrorEvent(Pe)):Ie&&ee._updateDiff(Ie,G)})}else typeof $=="object"&&this._updateDiff($,G)},k.prototype._updateDiff=function($,G){try{this.style.setState($)&&this._update(!0)}catch(ee){e.warnOnce("Unable to perform style diff: "+(ee.message||ee.error||ee)+".  Rebuilding the style from scratch."),this._updateStyle($,G)}},k.prototype.getStyle=function(){if(this.style)return this.style.serialize()},k.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},k.prototype.addSource=function($,G){return this._lazyInitEmptyStyle(),this.style.addSource($,G),this._update(!0)},k.prototype.isSourceLoaded=function($){var G=this.style&&this.style.sourceCaches[$];if(G!==void 0)return G.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+$+"'")))},k.prototype.areTilesLoaded=function(){var $=this.style&&this.style.sourceCaches;for(var G in $){var ee=$[G]._tiles;for(var ce in ee){var fe=ee[ce];if(fe.state!=="loaded"&&fe.state!=="errored")return!1}}return!0},k.prototype.addSourceType=function($,G,ee){return this._lazyInitEmptyStyle(),this.style.addSourceType($,G,ee)},k.prototype.removeSource=function($){return this.style.removeSource($),this._update(!0)},k.prototype.getSource=function($){return this.style.getSource($)},k.prototype.addImage=function($,G,ee){ee===void 0&&(ee={});var ce=ee.pixelRatio;ce===void 0&&(ce=1);var fe=ee.sdf;fe===void 0&&(fe=!1);var Pe=ee.stretchX,Ie=ee.stretchY,ke=ee.content;if(this._lazyInitEmptyStyle(),G instanceof rn||an&&G instanceof an){var Ge=e.browser.getImageData(G);this.style.addImage($,{data:new e.RGBAImage({width:Ge.width,height:Ge.height},Ge.data),pixelRatio:ce,stretchX:Pe,stretchY:Ie,content:ke,sdf:fe,version:0})}else{if(G.width===void 0||G.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Je=G;this.style.addImage($,{data:new e.RGBAImage({width:G.width,height:G.height},new Uint8Array(G.data)),pixelRatio:ce,stretchX:Pe,stretchY:Ie,content:ke,sdf:fe,version:0,userImage:Je}),Je.onAdd&&Je.onAdd(this,$)}},k.prototype.updateImage=function($,G){var ee=this.style.getImage($);if(!ee)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ce=G instanceof rn||an&&G instanceof an?e.browser.getImageData(G):G,fe=ce.width,Pe=ce.height,Ie=ce.data;return fe===void 0||Pe===void 0?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):fe!==ee.data.width||Pe!==ee.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ee.data.replace(Ie,!(G instanceof rn||an&&G instanceof an)),void this.style.updateImage($,ee))},k.prototype.hasImage=function($){return $?!!this.style.getImage($):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},k.prototype.removeImage=function($){this.style.removeImage($)},k.prototype.loadImage=function($,G){e.getImage(this._requestManager.transformRequest($,e.ResourceType.Image),G)},k.prototype.listImages=function(){return this.style.listImages()},k.prototype.addLayer=function($,G){return this._lazyInitEmptyStyle(),this.style.addLayer($,G),this._update(!0)},k.prototype.moveLayer=function($,G){return this.style.moveLayer($,G),this._update(!0)},k.prototype.removeLayer=function($){return this.style.removeLayer($),this._update(!0)},k.prototype.getLayer=function($){return this.style.getLayer($)},k.prototype.setLayerZoomRange=function($,G,ee){return this.style.setLayerZoomRange($,G,ee),this._update(!0)},k.prototype.setFilter=function($,G,ee){return ee===void 0&&(ee={}),this.style.setFilter($,G,ee),this._update(!0)},k.prototype.getFilter=function($){return this.style.getFilter($)},k.prototype.setPaintProperty=function($,G,ee,ce){return ce===void 0&&(ce={}),this.style.setPaintProperty($,G,ee,ce),this._update(!0)},k.prototype.getPaintProperty=function($,G){return this.style.getPaintProperty($,G)},k.prototype.setLayoutProperty=function($,G,ee,ce){return ce===void 0&&(ce={}),this.style.setLayoutProperty($,G,ee,ce),this._update(!0)},k.prototype.getLayoutProperty=function($,G){return this.style.getLayoutProperty($,G)},k.prototype.setLight=function($,G){return G===void 0&&(G={}),this._lazyInitEmptyStyle(),this.style.setLight($,G),this._update(!0)},k.prototype.getLight=function(){return this.style.getLight()},k.prototype.setFeatureState=function($,G){return this.style.setFeatureState($,G),this._update()},k.prototype.removeFeatureState=function($,G){return this.style.removeFeatureState($,G),this._update()},k.prototype.getFeatureState=function($){return this.style.getFeatureState($)},k.prototype.getContainer=function(){return this._container},k.prototype.getCanvasContainer=function(){return this._canvasContainer},k.prototype.getCanvas=function(){return this._canvas},k.prototype._containerDimensions=function(){var $=0,G=0;return this._container&&($=this._container.clientWidth||400,G=this._container.clientHeight||300),[$,G]},k.prototype._detectMissingCSS=function(){e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},k.prototype._setupContainer=function(){var $=this._container;$.classList.add("mapboxgl-map"),(this._missingCSSCanary=v.create("div","mapboxgl-canary",$)).style.visibility="hidden",this._detectMissingCSS();var G=this._canvasContainer=v.create("div","mapboxgl-canvas-container",$);this._interactive&&G.classList.add("mapboxgl-interactive"),this._canvas=v.create("canvas","mapboxgl-canvas",G),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ee=this._containerDimensions();this._resizeCanvas(ee[0],ee[1]);var ce=this._controlContainer=v.create("div","mapboxgl-control-container",$),fe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Pe){fe[Pe]=v.create("div","mapboxgl-ctrl-"+Pe,ce)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},k.prototype._resizeCanvas=function($,G){var ee=e.browser.devicePixelRatio||1;this._canvas.width=ee*$,this._canvas.height=ee*G,this._canvas.style.width=$+"px",this._canvas.style.height=G+"px"},k.prototype._setupPainter=function(){var $=e.extend({},g.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),G=this._canvas.getContext("webgl",$)||this._canvas.getContext("experimental-webgl",$);G?(this.painter=new zo(G,this.transform),e.webpSupported.testSupport(G)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},k.prototype._contextLost=function($){$.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:$}))},k.prototype._contextRestored=function($){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:$}))},k.prototype._onMapScroll=function($){if($.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},k.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},k.prototype._update=function($){return this.style?(this._styleDirty=this._styleDirty||$,this._sourcesDirty=!0,this.triggerRepaint(),this):this},k.prototype._requestRenderFrame=function($){return this._update(),this._renderTaskQueue.add($)},k.prototype._cancelRenderFrame=function($){this._renderTaskQueue.remove($)},k.prototype._render=function($){var G,ee=this,ce=0,fe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(G=fe.createQueryEXT(),fe.beginQueryEXT(fe.TIME_ELAPSED_EXT,G),ce=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run($),!this._removed){var Pe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ie=this.transform.zoom,ke=e.browser.now();this.style.zoomHistory.update(Ie,ke);var Ge=new e.EvaluationParameters(Ie,{now:ke,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Je=Ge.crossFadingFactor();Je===1&&Je===this._crossFadingFactor||(Pe=!0,this._crossFadingFactor=Je),this.style.update(Ge)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Pe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var vt=e.browser.now()-ce;fe.endQueryEXT(fe.TIME_ELAPSED_EXT,G),setTimeout(function(){var Pt=fe.getQueryObjectEXT(G,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(G),ee.fire(new e.Event("gpu-timing-frame",{cpuTime:vt,gpuTime:Pt}))},50)}if(this.listens("gpu-timing-layer")){var _t=this.painter.collectGpuTimers();setTimeout(function(){var Pt=ee.painter.queryGpuTimers(_t);ee.fire(new e.Event("gpu-timing-layer",{layerTimes:Pt}))},50)}var Rt=this._sourcesDirty||this._styleDirty||this._placementDirty;return Rt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||Rt||(this._fullyLoaded=!0),this}},k.prototype.remove=function(){this._hash&&this._hash.remove();for(var $=0,G=this._controls;$<G.length;$+=1)G[$].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),e.window!==void 0&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ee=this.painter.context.gl.getExtension("WEBGL_lose_context");ee&&ee.loseContext(),Pn(this._canvasContainer),Pn(this._controlContainer),Pn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},k.prototype.triggerRepaint=function(){var $=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(G){$._frame=null,$._render(G)}))},k.prototype._onWindowOnline=function(){this._update()},k.prototype._onWindowResize=function($){this._trackResize&&this.resize({originalEvent:$})._update()},F.showTileBoundaries.get=function(){return!!this._showTileBoundaries},F.showTileBoundaries.set=function($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())},F.showPadding.get=function(){return!!this._showPadding},F.showPadding.set=function($){this._showPadding!==$&&(this._showPadding=$,this._update())},F.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},F.showCollisionBoxes.set=function($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())},F.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},F.showOverdrawInspector.set=function($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())},F.repaint.get=function(){return!!this._repaint},F.repaint.set=function($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())},F.vertices.get=function(){return!!this._vertices},F.vertices.set=function($){this._vertices=$,this._update()},k.prototype._setCacheLimits=function($,G){e.setCacheLimits($,G)},F.version.get=function(){return e.version},Object.defineProperties(k.prototype,F),k}(Zt);function Pn(X){X.parentNode&&X.parentNode.removeChild(X)}var ri={showCompass:!0,showZoom:!0,visualizePitch:!1},Ei=function(k){var F=this;this.options=e.extend({},ri,k),this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function($){return F._map.zoomIn({},{originalEvent:$})}),v.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function($){return F._map.zoomOut({},{originalEvent:$})}),v.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function($){F.options.visualizePitch?F._map.resetNorthPitch({},{originalEvent:$}):F._map.resetNorth({},{originalEvent:$})}),this._compassIcon=v.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ei.prototype._updateZoomButtons=function(){var X=this._map.getZoom(),k=X===this._map.getMaxZoom(),F=X===this._map.getMinZoom();this._zoomInButton.disabled=k,this._zoomOutButton.disabled=F,this._zoomInButton.setAttribute("aria-disabled",k.toString()),this._zoomOutButton.setAttribute("aria-disabled",F.toString())},Ei.prototype._rotateCompassArrow=function(){var X=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=X},Ei.prototype.onAdd=function(X){return this._map=X,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zn(this._map,this._compass,this.options.visualizePitch)),this._container},Ei.prototype.onRemove=function(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ei.prototype._createButton=function(X,k){var F=v.create("button",X,this._container);return F.type="button",F.addEventListener("click",k),F},Ei.prototype._setButtonTitle=function(X,k){var F=this._map._getUIString("NavigationControl."+k);X.title=F,X.setAttribute("aria-label",F)};var zn=function(k,F,$){$===void 0&&($=!1),this._clickTolerance=10,this.element=F,this.mouseRotate=new ao({clickTolerance:k.dragRotate._mouseRotate._clickTolerance}),this.map=k,$&&(this.mousePitch=new is({clickTolerance:k.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),v.addEventListener(F,"mousedown",this.mousedown),v.addEventListener(F,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(F,"touchmove",this.touchmove),v.addEventListener(F,"touchend",this.touchend),v.addEventListener(F,"touchcancel",this.reset)};function gi(X,k,F){if(X=new e.LngLat(X.lng,X.lat),k){var $=new e.LngLat(X.lng-360,X.lat),G=new e.LngLat(X.lng+360,X.lat),ee=F.locationPoint(X).distSqr(k);F.locationPoint($).distSqr(k)<ee?X=$:F.locationPoint(G).distSqr(k)<ee&&(X=G)}for(;Math.abs(X.lng-F.center.lng)>180;){var ce=F.locationPoint(X);if(ce.x>=0&&ce.y>=0&&ce.x<=F.width&&ce.y<=F.height)break;X.lng>F.center.lng?X.lng-=360:X.lng+=360}return X}zn.prototype.down=function(X,k){this.mouseRotate.mousedown(X,k),this.mousePitch&&this.mousePitch.mousedown(X,k),v.disableDrag()},zn.prototype.move=function(X,k){var F=this.map,$=this.mouseRotate.mousemoveWindow(X,k);if($&&$.bearingDelta&&F.setBearing(F.getBearing()+$.bearingDelta),this.mousePitch){var G=this.mousePitch.mousemoveWindow(X,k);G&&G.pitchDelta&&F.setPitch(F.getPitch()+G.pitchDelta)}},zn.prototype.off=function(){var X=this.element;v.removeEventListener(X,"mousedown",this.mousedown),v.removeEventListener(X,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(X,"touchmove",this.touchmove),v.removeEventListener(X,"touchend",this.touchend),v.removeEventListener(X,"touchcancel",this.reset),this.offTemp()},zn.prototype.offTemp=function(){v.enableDrag(),v.removeEventListener(e.window,"mousemove",this.mousemove),v.removeEventListener(e.window,"mouseup",this.mouseup)},zn.prototype.mousedown=function(X){this.down(e.extend({},X,{ctrlKey:!0,preventDefault:function(){return X.preventDefault()}}),v.mousePos(this.element,X)),v.addEventListener(e.window,"mousemove",this.mousemove),v.addEventListener(e.window,"mouseup",this.mouseup)},zn.prototype.mousemove=function(X){this.move(X,v.mousePos(this.element,X))},zn.prototype.mouseup=function(X){this.mouseRotate.mouseupWindow(X),this.mousePitch&&this.mousePitch.mouseupWindow(X),this.offTemp()},zn.prototype.touchstart=function(X){X.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,X.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return X.preventDefault()}},this._startPos))},zn.prototype.touchmove=function(X){X.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,X.targetTouches)[0],this.move({preventDefault:function(){return X.preventDefault()}},this._lastPos))},zn.prototype.touchend=function(X){X.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},zn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ti={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function la(X,k,F){var $=X.classList;for(var G in Ti)$.remove("mapboxgl-"+F+"-anchor-"+G);$.add("mapboxgl-"+F+"-anchor-"+k)}var Vi,Ha=function(X){function k(F,$){if(X.call(this),(F instanceof e.window.HTMLElement||$)&&(F=e.extend({element:F},$)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._scale=F&&F.scale||1,this._draggable=F&&F.draggable||!1,this._clickTolerance=F&&F.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&F.pitchAlignment!=="auto"?F.pitchAlignment:this._rotationAlignment,F&&F.element)this._element=F.element,this._offset=e.Point.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div"),this._element.setAttribute("aria-label","Map marker");var G=v.createNS("http://www.w3.org/2000/svg","svg");G.setAttributeNS(null,"display","block"),G.setAttributeNS(null,"height","41px"),G.setAttributeNS(null,"width","27px"),G.setAttributeNS(null,"viewBox","0 0 27 41");var ee=v.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");var ce=v.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"fill-rule","nonzero");var fe=v.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),fe.setAttributeNS(null,"fill","#000000");for(var Pe=0,Ie=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Pe<Ie.length;Pe+=1){var ke=Ie[Pe],Ge=v.createNS("http://www.w3.org/2000/svg","ellipse");Ge.setAttributeNS(null,"opacity","0.04"),Ge.setAttributeNS(null,"cx","10.5"),Ge.setAttributeNS(null,"cy","5.80029008"),Ge.setAttributeNS(null,"rx",ke.rx),Ge.setAttributeNS(null,"ry",ke.ry),fe.appendChild(Ge)}var Je=v.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"fill",this._color);var vt=v.createNS("http://www.w3.org/2000/svg","path");vt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Je.appendChild(vt);var _t=v.createNS("http://www.w3.org/2000/svg","g");_t.setAttributeNS(null,"opacity","0.25"),_t.setAttributeNS(null,"fill","#000000");var Rt=v.createNS("http://www.w3.org/2000/svg","path");Rt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),_t.appendChild(Rt);var Pt=v.createNS("http://www.w3.org/2000/svg","g");Pt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pt.setAttributeNS(null,"fill","#FFFFFF");var Gt=v.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ur=v.createNS("http://www.w3.org/2000/svg","circle");ur.setAttributeNS(null,"fill","#000000"),ur.setAttributeNS(null,"opacity","0.25"),ur.setAttributeNS(null,"cx","5.5"),ur.setAttributeNS(null,"cy","5.5"),ur.setAttributeNS(null,"r","5.4999962");var hr=v.createNS("http://www.w3.org/2000/svg","circle");hr.setAttributeNS(null,"fill","#FFFFFF"),hr.setAttributeNS(null,"cx","5.5"),hr.setAttributeNS(null,"cy","5.5"),hr.setAttributeNS(null,"r","5.4999962"),Gt.appendChild(ur),Gt.appendChild(hr),ce.appendChild(fe),ce.appendChild(Je),ce.appendChild(_t),ce.appendChild(Pt),ce.appendChild(Gt),G.appendChild(ce),G.setAttributeNS(null,"height",41*this._scale+"px"),G.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(G),this._offset=e.Point.convert(F&&F.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(nn){nn.preventDefault()}),this._element.addEventListener("mousedown",function(nn){nn.preventDefault()}),la(this._element,this._anchor,"marker"),this._popup=null}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.addTo=function(F){return this.remove(),this._map=F,F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},k.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this},k.prototype.getLngLat=function(){return this._lngLat},k.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},k.prototype.getElement=function(){return this._element},k.prototype.setPopup=function(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){var $=Math.sqrt(Math.pow(13.5,2)/2);F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[$,-1*(24.6+$)],"bottom-right":[-$,-1*(24.6+$)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=F,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},k.prototype._onKeyPress=function(F){var $=F.code,G=F.charCode||F.keyCode;$!=="Space"&&$!=="Enter"&&G!==32&&G!==13||this.togglePopup()},k.prototype._onMapClick=function(F){var $=F.originalEvent.target,G=this._element;this._popup&&($===G||G.contains($))&&this.togglePopup()},k.prototype.getPopup=function(){return this._popup},k.prototype.togglePopup=function(){var F=this._popup;return F?(F.isOpen()?F.remove():F.addTo(this._map),this):this},k.prototype._update=function(F){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=gi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var $="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?$="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&($="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var G="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?G="rotateX(0deg)":this._pitchAlignment==="map"&&(G="rotateX("+this._map.getPitch()+"deg)"),F&&F.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,Ti[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+G+" "+$)}},k.prototype.getOffset=function(){return this._offset},k.prototype.setOffset=function(F){return this._offset=e.Point.convert(F),this._update(),this},k.prototype._onMove=function(F){if(!this._isDragging){var $=this._clickTolerance||this._map._clickTolerance;this._isDragging=F.point.dist(this._pointerdownPos)>=$}this._isDragging&&(this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))},k.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},k.prototype._addDragHandler=function(F){this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._pointerdownPos=F.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},k.prototype.setDraggable=function(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},k.prototype.isDraggable=function(){return this._draggable},k.prototype.setRotation=function(F){return this._rotation=F||0,this._update(),this},k.prototype.getRotation=function(){return this._rotation},k.prototype.setRotationAlignment=function(F){return this._rotationAlignment=F||"auto",this._update(),this},k.prototype.getRotationAlignment=function(){return this._rotationAlignment},k.prototype.setPitchAlignment=function(F){return this._pitchAlignment=F&&F!=="auto"?F:this._rotationAlignment,this._update(),this},k.prototype.getPitchAlignment=function(){return this._pitchAlignment},k}(e.Evented),Na={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Wa=0,mi=!1,eo=function(X){function k(F){X.call(this),this.options=e.extend({},Na,F),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.onAdd=function(F){var $;return this._map=F,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),$=this._setupUI,Vi!==void 0?$(Vi):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(G){$(Vi=G.state!=="denied")}):$(Vi=!!e.window.navigator.geolocation),this._container},k.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wa=0,mi=!1},k.prototype._isOutOfMapMaxBounds=function(F){var $=this._map.getMaxBounds(),G=F.coords;return $&&(G.longitude<$.getWest()||G.longitude>$.getEast()||G.latitude<$.getSouth()||G.latitude>$.getNorth())},k.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},k.prototype._onSuccess=function(F){if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(F),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",F)),this._finish()}},k.prototype._updateCamera=function(F){var $=new e.LngLat(F.coords.longitude,F.coords.latitude),G=F.coords.accuracy,ee=this._map.getBearing(),ce=e.extend({bearing:ee},this.options.fitBoundsOptions);this._map.fitBounds($.toBounds(G),ce,{geolocateSource:!0})},k.prototype._updateMarker=function(F){if(F){var $=new e.LngLat(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat($).addTo(this._map),this._userLocationDotMarker.setLngLat($).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},k.prototype._updateCircleRadius=function(){var F=this._map._container.clientHeight/2,$=this._map.unproject([0,F]),G=this._map.unproject([1,F]),ee=$.distanceTo(G),ce=Math.ceil(2*this._accuracy/ee);this._circleElement.style.width=ce+"px",this._circleElement.style.height=ce+"px"},k.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},k.prototype._onError=function(F){if(this._map){if(this.options.trackUserLocation)if(F.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var $=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(F.code===3&&mi)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",F)),this._finish()}},k.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},k.prototype._setupUI=function(F){var $=this;if(this._container.addEventListener("contextmenu",function(ce){return ce.preventDefault()}),this._geolocateButton=v.create("button","mapboxgl-ctrl-geolocate",this._container),v.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",F===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var G=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}else{var ee=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ee,this._geolocateButton.setAttribute("aria-label",ee)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ha(this._dotElement),this._circleElement=v.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ha({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ce){ce.geolocateSource||$._watchState!=="ACTIVE_LOCK"||ce.originalEvent&&ce.originalEvent.type==="resize"||($._watchState="BACKGROUND",$._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),$._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),$.fire(new e.Event("trackuserlocationend")))})},k.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wa--,mi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var F;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Wa>1?(F={maximumAge:6e5,timeout:0},mi=!0):(F=this.options.positionOptions,mi=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},k.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},k}(e.Evented),Lo={maxWidth:100,unit:"metric"},po=function(k){this.options=e.extend({},Lo,k),e.bindAll(["_onMove","setUnit"],this)};function Wi(X,k,F){var $=F&&F.maxWidth||100,G=X._container.clientHeight/2,ee=X.unproject([0,G]),ce=X.unproject([$,G]),fe=ee.distanceTo(ce);if(F&&F.unit==="imperial"){var Pe=3.2808*fe;Pe>5280?Oo(k,$,Pe/5280,X._getUIString("ScaleControl.Miles")):Oo(k,$,Pe,X._getUIString("ScaleControl.Feet"))}else F&&F.unit==="nautical"?Oo(k,$,fe/1852,X._getUIString("ScaleControl.NauticalMiles")):fe>=1e3?Oo(k,$,fe/1e3,X._getUIString("ScaleControl.Kilometers")):Oo(k,$,fe,X._getUIString("ScaleControl.Meters"))}function Oo(X,k,F,$){var G,ee,ce,fe=(G=F,(ee=Math.pow(10,(""+Math.floor(G)).length-1))*(ce=(ce=G/ee)>=10?10:ce>=5?5:ce>=3?3:ce>=2?2:ce>=1?1:function(Pe){var Ie=Math.pow(10,Math.ceil(-Math.log(Pe)/Math.LN10));return Math.round(Pe*Ie)/Ie}(ce)));X.style.width=k*(fe/F)+"px",X.innerHTML=fe+"&nbsp;"+$}po.prototype.getDefaultPosition=function(){return"bottom-left"},po.prototype._onMove=function(){Wi(this._map,this._container,this.options)},po.prototype.onAdd=function(X){return this._map=X,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",X.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},po.prototype.onRemove=function(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},po.prototype.setUnit=function(X){this.options.unit=X,Wi(this._map,this._container,this.options)};var as=function(k){this._fullscreen=!1,k&&k.container&&(k.container instanceof e.window.HTMLElement?this._container=k.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};as.prototype.onAdd=function(X){return this._map=X,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},as.prototype.onRemove=function(){v.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},as.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},as.prototype._setupUI=function(){var X=this._fullscreenButton=v.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);v.create("span","mapboxgl-ctrl-icon",X).setAttribute("aria-hidden",!0),X.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},as.prototype._updateTitle=function(){var X=this._getTitle();this._fullscreenButton.setAttribute("aria-label",X),this._fullscreenButton.title=X},as.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},as.prototype._isFullscreen=function(){return this._fullscreen},as.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},as.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var pu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},gu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Sl=function(X){function k(F){X.call(this),this.options=e.extend(Object.create(pu),F),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return X&&(k.__proto__=X),(k.prototype=Object.create(X&&X.prototype)).constructor=k,k.prototype.addTo=function(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},k.prototype.isOpen=function(){return!!this._map},k.prototype.remove=function(){return this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},k.prototype.getLngLat=function(){return this._lngLat},k.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},k.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},k.prototype.getElement=function(){return this._container},k.prototype.setText=function(F){return this.setDOMContent(e.window.document.createTextNode(F))},k.prototype.setHTML=function(F){var $,G=e.window.document.createDocumentFragment(),ee=e.window.document.createElement("body");for(ee.innerHTML=F;$=ee.firstChild;)G.appendChild($);return this.setDOMContent(G)},k.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},k.prototype.setMaxWidth=function(F){return this.options.maxWidth=F,this._update(),this},k.prototype.setDOMContent=function(F){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(F),this._createCloseButton(),this._update(),this._focusFirstElement(),this},k.prototype.addClassName=function(F){this._container&&this._container.classList.add(F)},k.prototype.removeClassName=function(F){this._container&&this._container.classList.remove(F)},k.prototype.setOffset=function(F){return this.options.offset=F,this._update(),this},k.prototype.toggleClassName=function(F){if(this._container)return this._container.classList.toggle(F)},k.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=v.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},k.prototype._onMouseUp=function(F){this._update(F.point)},k.prototype._onMouseMove=function(F){this._update(F.point)},k.prototype._onDrag=function(F){this._update(F.point)},k.prototype._update=function(F){var $=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=v.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=v.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ge){return $._container.classList.add(Ge)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||F)){var G=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat),ee=this.options.anchor,ce=function Ge(Je){if(Je){if(typeof Je=="number"){var vt=Math.round(Math.sqrt(.5*Math.pow(Je,2)));return{center:new e.Point(0,0),top:new e.Point(0,Je),"top-left":new e.Point(vt,vt),"top-right":new e.Point(-vt,vt),bottom:new e.Point(0,-Je),"bottom-left":new e.Point(vt,-vt),"bottom-right":new e.Point(-vt,-vt),left:new e.Point(Je,0),right:new e.Point(-Je,0)}}if(Je instanceof e.Point||Array.isArray(Je)){var _t=e.Point.convert(Je);return{center:_t,top:_t,"top-left":_t,"top-right":_t,bottom:_t,"bottom-left":_t,"bottom-right":_t,left:_t,right:_t}}return{center:e.Point.convert(Je.center||[0,0]),top:e.Point.convert(Je.top||[0,0]),"top-left":e.Point.convert(Je["top-left"]||[0,0]),"top-right":e.Point.convert(Je["top-right"]||[0,0]),bottom:e.Point.convert(Je.bottom||[0,0]),"bottom-left":e.Point.convert(Je["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Je["bottom-right"]||[0,0]),left:e.Point.convert(Je.left||[0,0]),right:e.Point.convert(Je.right||[0,0])}}return Ge(new e.Point(0,0))}(this.options.offset);if(!ee){var fe,Pe=this._container.offsetWidth,Ie=this._container.offsetHeight;fe=G.y+ce.bottom.y<Ie?["top"]:G.y>this._map.transform.height-Ie?["bottom"]:[],G.x<Pe/2?fe.push("left"):G.x>this._map.transform.width-Pe/2&&fe.push("right"),ee=fe.length===0?"bottom":fe.join("-")}var ke=G.add(ce[ee]).round();v.setTransform(this._container,Ti[ee]+" translate("+ke.x+"px,"+ke.y+"px)"),la(this._container,ee,"popup")}},k.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var F=this._container.querySelector(gu);F&&F.focus()}},k.prototype._onClose=function(){this.remove()},k}(e.Evented),ul={version:e.version,supported:g,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:_n,NavigationControl:Ei,GeolocateControl:eo,AttributionControl:cr,ScaleControl:po,FullscreenControl:as,Popup:Sl,Marker:Ha,Style:Yo,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){lr().acquire(Dr)},clearPrewarmedResources:function(){var k=mn;k&&(k.isPreloaded()&&k.numActive()===1?(k.release(Dr),mn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(X){e.config.ACCESS_TOKEN=X},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(X){e.config.API_URL=X},get workerCount(){return Cr.workerCount},set workerCount(X){Cr.workerCount=X},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(X){e.config.MAX_PARALLEL_IMAGE_REQUESTS=X},clearStorage:function(k){e.clearTileCache(k)},workerUrl:""};return ul}),L})},"4qC0":function(br,Ot,Ee){var he=Ee("NykK"),B=Ee("Z0cm"),L=Ee("ExA7"),o="[object String]";function e(g){return typeof g=="string"||!B(g)&&L(g)&&he(g)==o}br.exports=e},"4uTw":function(br,Ot,Ee){var he=Ee("Z0cm"),B=Ee("9ggG"),L=Ee("GNiM"),o=Ee("dt0z");function e(g,v){return he(g)?g:B(g,v)?[g]:L(o(g))}br.exports=e},"5Tg0":function(br,Ot,Ee){(function(he){var B=Ee("Kz5y"),L=Ot&&!Ot.nodeType&&Ot,o=L&&typeof he=="object"&&he&&!he.nodeType&&he,e=o&&o.exports===L,g=e?B.Buffer:void 0,v=g?g.allocUnsafe:void 0;function p(c,h){if(h)return c.slice();var i=c.length,r=v?v(i):new c.constructor(i);return c.copy(r),r}he.exports=p}).call(this,Ee("hOG+")(br))},"5gLl":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return u});var he=Ee("rAM+"),B=Ee("RwN2"),L=Ee("Nwvx"),o=Ee("0cpV"),e=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,i=function(b,_,x){return _ in b?e(b,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):b[_]=x},r=function(b,_){for(var x in _||(_={}))c.call(_,x)&&i(b,x,_[x]);if(p){var M=Object(he.a)(p(_)),P;try{for(M.s();!(P=M.n()).done;){var x=P.value;h.call(_,x)&&i(b,x,_[x])}}catch(C){M.e(C)}finally{M.f()}}return b},n=function(b,_){return g(b,v(_))};function s(d){for(var b=d.toString(),_=5381,x=b.length;x;)_=_*33^b.charCodeAt(--x);return _>>>0}function f(d,b){return b===void 0?null:typeof(d.properties[b]*1)=="number"?d.properties[b]*1:d.properties&&d.properties[b]?s(d.properties[b]+"")%1000019:null}function u(d,b){var _=[],x={};return d.features?(d.features=d.features.filter(function(M){var P=M.geometry;return M!=null&&P&&P.type&&P.coordinates&&P.coordinates.length>0}),d=Object(o.b)(d),d.features.length===0?{dataArray:[],featureKeys:x}:(Object(L.b)(d,function(M,P){var C=f(M,b==null?void 0:b.featureId);C===null&&(C=P);var O=C,w=Object(B.a)(M),S=n(r({},M.properties),{coordinates:w,_id:O});_.push(S)}),{dataArray:_,featureKeys:x})):(d.features=[],{dataArray:[]})}},"5zYK":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return s});var he=Ee("rAM+"),B=Ee("RwN2"),L=Ee("Nwvx"),o=Ee("0cpV"),e=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,i=function(u,d,b){return d in u?e(u,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):u[d]=b},r=function(u,d){for(var b in d||(d={}))c.call(d,b)&&i(u,b,d[b]);if(p){var _=Object(he.a)(p(d)),x;try{for(_.s();!(x=_.n()).done;){var b=x.value;h.call(d,b)&&i(u,b,d[b])}}catch(M){_.e(M)}finally{_.f()}}return u},n=function(u,d){return g(u,v(d))};function s(f,u){var d=u.x,b=u.y,_=u.x1,x=u.y1,M=u.coordinates,P=u.geometry,C=[];if(!Array.isArray(f))return{dataArray:[]};if(P)return f.filter(function(J){return J[P]&&J[P].type&&J[P].coordinates&&J[P].coordinates.length>0}).forEach(function(J,Q){var ne=Object(o.b)(J[P]);Object(L.b)(ne,function(K){var ie=Object(B.a)(K),de=n(r({},J),{_id:Q,coordinates:ie});C.push(de)})}),{dataArray:C};for(var O=0;O<f.length;O++){var w=f[O],S=[];if(M){var I="Polygon";Array.isArray(M[0])||(I="Point"),Array.isArray(M[0])&&!Array.isArray(M[0][0])&&(I="LineString");var j=Object(o.b)({type:I,coordinates:w[M]});S=j.coordinates}else if(d&&b&&_&&x){var N=[parseFloat(w[d]),parseFloat(w[b])],W=[parseFloat(w[_]),parseFloat(w[x])];S=[N,W]}else d&&b&&(S=[parseFloat(w[d]),parseFloat(w[b])]);var H=n(r({},w),{_id:O,coordinates:S});C.push(H)}return{dataArray:C}}},"68d/":function(br,Ot,Ee){"use strict";Ee.d(Ot,"b",function(){return T2}),Ee.d(Ot,"c",function(){return qS}),Ee.d(Ot,"a",function(){return eA});var he=Ee("q1tI"),B=Ee.n(he),L=Object(he.createContext)({});function o(){return Object(he.useContext)(L)}var e=Ee("rlAn"),g=Ee("fWQN"),v=Ee("mtLc"),p=Ee("tS8v"),c=Ee("yKVA"),h=Ee("879j"),i=Ee("VTBJ"),r=Ee("rePB"),n=Ee("Hel2"),s=Ee("uhBA"),f=Ee.n(s),u=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;return Object(g.a)(this,l),a=y.call(this),Object(r.a)(Object(p.a)(a),"markerOption",void 0),Object(r.a)(Object(p.a)(a),"popup",void 0),Object(r.a)(Object(p.a)(a),"mapsService",void 0),Object(r.a)(Object(p.a)(a),"lngLat",void 0),Object(r.a)(Object(p.a)(a),"scene",void 0),Object(r.a)(Object(p.a)(a),"added",!1),Object(r.a)(Object(p.a)(a),"preLngLat",{lng:0,lat:0}),Object(r.a)(Object(p.a)(a),"onMarkerDragStart",function(T){var R=a.mapsService.getContainer();if(!!R){a.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});var U=R.getClientRects()[0],Y=U.left,oe=U.top,me=T.x,Ce=T.y;a.preLngLat=a.mapsService.containerToLngLat([me-Y,Ce-oe]),a.mapsService.on("mousemove",a.onMarkerDragMove),document.addEventListener("mouseup",a.onMarkerDragEnd),a.emit("dragstart",a.lngLat)}}),Object(r.a)(Object(p.a)(a),"onMarkerDragMove",function(T){var R=T.lngLat||T.lnglat,U=a.preLngLat,Y=U.lng,oe=U.lat,me=R.lng,Ce=R.lat,Ve={lng:a.lngLat.lng+me-Y,lat:a.lngLat.lat+Ce-oe};a.setLnglat(Ve),a.preLngLat=R,a.emit("dragging",Ve)}),Object(r.a)(Object(p.a)(a),"onMarkerDragEnd",function(){a.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),a.mapsService.off("mousemove",a.onMarkerDragMove),document.removeEventListener("mouseup",a.onMarkerDragEnd),a.emit("dragend",a.lngLat)}),Object(r.a)(Object(p.a)(a),"eventHandle",function(T){a.polyfillEvent(T),a.emit(T.type,{target:T,data:a.markerOption.extData,lngLat:a.lngLat})}),Object(r.a)(Object(p.a)(a),"touchStartTime",void 0),a.markerOption=Object(i.a)(Object(i.a)({},a.getDefault()),m),Object(n.l)(["update","onMove","onMapClick","updatePositionWhenZoom"],Object(p.a)(a)),a.init(),a}return Object(v.a)(l,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:n.i.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1,overflowHide:!0}}},{key:"addTo",value:function(a){this.scene=a,this.mapsService=a.mapService;var T=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(T),this.registerMarkerEvent(T),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var a=this.markerOption.element;return a&&n.a.remove(a),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(a){return this.lngLat=a,Array.isArray(a)&&(this.lngLat={lng:a[0],lat:a[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(a){var T=this;if(!this.added)return this.once("added",function(){T.setElement(a)}),this;var R=this.markerOption.element;return R&&n.a.remove(R),this.markerOption.element=a,this.init(),this.mapsService.getMarkerContainer().appendChild(a),this.registerMarkerEvent(a),this.updateDraggable(),this.update(),this}},{key:"openPopup",value:function(){var a=this;if(!this.added)return this.once("added",function(){a.openPopup()}),this;var T=this.popup;return T?(T.isOpen()||T.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var a=this;this.added||this.once("added",function(){a.closePopup()});var T=this.popup;return T&&T.remove(),this}},{key:"setPopup",value:function(a){return this.popup=a,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var a=this.popup;if(a)a.isOpen()?a.remove():a.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(a){this.markerOption.draggable=a,this.updateDraggable()}},{key:"getDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(a){this.markerOption.extData=a}},{key:"update",value:function(){if(!!this.mapsService){var a=this.markerOption,T=a.element,R=a.anchor;this.updatePosition(),n.a.setTransform(T,"".concat(n.h[R]))}}},{key:"updatePositionWhenZoom",value:function(a){if(!!this.mapsService){var T=this.markerOption,R=T.element,U=T.offsets,Y=this.lngLat,oe=Y.lng,me=Y.lat;if(R){R.style.display="block",R.style.whiteSpace="nowrap";var Ce=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),Ve=Ce.containerHeight,ut=Ce.containerWidth,Ft=Ce.bounds;if(!Ft)return;var Nt=a.map,vr=a.center,_r=a.zoom,Sr=Nt.DE(this.lngLat,_r,vr);if(Sr.x=Math.round(Sr.x+U[0]),Sr.y=Math.round(Sr.y-U[1]),Math.abs(Ft[0][0])>180||Math.abs(Ft[1][0])>180){if(Sr.x>ut){var cn=this.mapsService.lngLatToContainer([oe-360,me]);Sr.x=cn.x}if(Sr.x<0){var Bn=this.mapsService.lngLatToContainer([oe+360,me]);Sr.x=Bn.x}}(Sr.x>ut||Sr.x<0||Sr.y>Ve||Sr.y<0)&&(R.style.display="none"),R.style.left=Sr.x+"px",R.style.top=Sr.y+"px",R.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}}},{key:"onMapClick",value:function(a){var T=this.markerOption.element;this.popup&&T&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var a=this.mapsService.getContainer();return{containerHeight:(a==null?void 0:a.scrollHeight)||0,containerWidth:(a==null?void 0:a.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updateDraggable",value:function(){var a=this.markerOption.element;a==null||a.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(a==null||a.addEventListener("mousedown",this.onMarkerDragStart))}},{key:"updatePosition",value:function(){if(!!this.mapsService){var a=this.markerOption,T=a.element,R=a.offsets,U=this.lngLat,Y=U.lng,oe=U.lat,me=this.mapsService.lngLatToContainer([Y,oe]);if(T){T.style.display="block",T.style.whiteSpace="nowrap";var Ce=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),Ve=Ce.containerHeight,ut=Ce.containerWidth,Ft=Ce.bounds;if(!Ft)return;if(Math.abs(Ft[0][0])>180||Math.abs(Ft[1][0])>180){if(me.x>ut){var Nt=this.mapsService.lngLatToContainer([Y-360,oe]);me.x=Nt.x}if(me.x<0){var vr=this.mapsService.lngLatToContainer([Y+360,oe]);me.x=vr.x}}this.markerOption.overflowHide&&(me.x>ut||me.x<0||me.y>Ve||me.y<0)&&(T.style.display="none"),T.style.left=me.x+R[0]+"px",T.style.top=me.y-R[1]+"px"}}}},{key:"init",value:function(){var a=this,T=this.markerOption.element,R=this.markerOption,U=R.color,Y=R.anchor;if(!T){T=n.a.create("div"),this.markerOption.element=T;var oe=document.createElementNS("http://www.w3.org/2000/svg","svg");oe.setAttributeNS(null,"display","block"),oe.setAttributeNS(null,"height","48px"),oe.setAttributeNS(null,"width","48px"),oe.setAttributeNS(null,"viewBox","0 0 1024 1024");var me=document.createElementNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),me.setAttributeNS(null,"fill",U),oe.appendChild(me),T.appendChild(oe)}n.a.addClass(T,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(Ce){var Ve,ut,Ft=((Ve=a.markerOption)===null||Ve===void 0?void 0:Ve.style)&&((ut=a.markerOption)===null||ut===void 0?void 0:ut.style[Ce]);T&&(T.style[Ce]=Ft)}),Object(n.j)(T,Y,"marker")}},{key:"registerMarkerEvent",value:function(a){a.addEventListener("click",this.onMapClick),a.addEventListener("mousemove",this.eventHandle),a.addEventListener("click",this.eventHandle),a.addEventListener("mousedown",this.eventHandle),a.addEventListener("mouseup",this.eventHandle),a.addEventListener("dblclick",this.eventHandle),a.addEventListener("contextmenu",this.eventHandle),a.addEventListener("mouseover",this.eventHandle),a.addEventListener("mouseout",this.eventHandle),a.addEventListener("touchstart",this.eventHandle),a.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var a=this.getElement();a.removeEventListener("click",this.onMapClick),a.removeEventListener("mousemove",this.eventHandle),a.removeEventListener("click",this.eventHandle),a.removeEventListener("mousedown",this.eventHandle),a.removeEventListener("mouseup",this.eventHandle),a.removeEventListener("dblclick",this.eventHandle),a.removeEventListener("contextmenu",this.eventHandle),a.removeEventListener("mouseover",this.eventHandle),a.removeEventListener("mouseout",this.eventHandle),a.removeEventListener("touchstart",this.eventHandle),a.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(a){!this.mapsService||this.mapsService.getType()!=="amap"||Object(n.J)()||(a.type==="touchstart"&&(this.touchStartTime=Date.now()),a.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:a,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(a){return null}},{key:"onUp",value:function(a){throw new Error("Method not implemented.")}}]),l}(s.EventEmitter),d=Ee("jrin"),b=Ee("mpbz"),_=Ee.n(b),x=n.N.merge,M=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;Object(g.a)(this,l);var T;return a=y.call(this),Object(r.a)(Object(p.a)(a),"markers",[]),Object(r.a)(Object(p.a)(a),"markerLayerOption",void 0),Object(r.a)(Object(p.a)(a),"clusterIndex",void 0),Object(r.a)(Object(p.a)(a),"points",[]),Object(r.a)(Object(p.a)(a),"clusterMarkers",[]),Object(r.a)(Object(p.a)(a),"mapsService",void 0),Object(r.a)(Object(p.a)(a),"scene",void 0),Object(r.a)(Object(p.a)(a),"zoom",void 0),Object(r.a)(Object(p.a)(a),"bbox",void 0),Object(r.a)(Object(p.a)(a),"inited",void 0),Object(r.a)(Object(p.a)(a),"containerSize",void 0),a.markerLayerOption=x(a.getDefault(),m),Object(n.l)(["update"],Object(p.a)(a)),a.zoom=((T=a.markerLayerOption.clusterOption)===null||T===void 0?void 0:T.zoom)||-99,a}return Object(v.a)(l,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(a){return this.scene=a,this.mapsService=a.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}},{key:"setContainerSize",value:function(){if(!!this.mapsService){var a=this.mapsService.getContainer();this.containerSize={containerWidth:(a==null?void 0:a.scrollWidth)||0,containerHeight:(a==null?void 0:a.scrollHeight)||0,bounds:this.mapsService.getBounds()}}}},{key:"getContainerSize",value:function(){return this.containerSize}},{key:"addMarker",value:function(a){var T=this.markerLayerOption.cluster;if(a.getMarkerLayerContainerSize=this.getContainerSize.bind(this),T&&(this.addPoint(a,this.markers.length),this.mapsService)){var R=this.mapsService.getZoom(),U=this.mapsService.getBounds();this.bbox=Object(n.Q)(U,.5),this.zoom=Math.floor(R),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(a)}},{key:"removeMarker",value:function(a){this.markers.indexOf(a);var T=this.markers.indexOf(a);T>-1&&(this.markers.splice(T,1),this.markerLayerOption.cluster&&(this.removePoint(T),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}},{key:"hide",value:function(){this.markers.map(function(a){a.getElement().style.opacity="0"}),this.clusterMarkers.map(function(a){a.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(a){a.getElement().style.opacity="1"}),this.clusterMarkers.map(function(a){a.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var a=this.markerLayerOption.cluster;return a?this.clusterMarkers:this.markers}},{key:"getOriginMarkers",value:function(){return this.markers}},{key:"addMarkers",value:function(){var a=this;this.getMarkers().forEach(function(T){T.addTo(a.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(a){a.remove()}),this.clusterMarkers.forEach(function(a){a.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}},{key:"addPoint",value:function(a,T){var R=a.getLnglat(),U=R.lng,Y=R.lat,oe={geometry:{type:"Point",coordinates:[U,Y]},properties:Object(i.a)(Object(i.a)({},a.getExtData()),{},{marker_id:T})};this.points.push(oe),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"removePoint",value:function(a){var T=this.points.findIndex(function(R){return R.properties.marker_id===a});T>-1&&this.points.splice(T,1),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var a=this.markerLayerOption.clusterOption,T=a.radius,R=a.minZoom,U=R===void 0?0:R,Y=a.maxZoom;this.clusterIndex=new _.a({radius:T,minZoom:U,maxZoom:Y}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(a,T){var R=this,U=a[0].concat(a[1]),Y=this.clusterIndex.getClusters(U,T);this.clusterMarkers.forEach(function(oe){oe.remove()}),this.clusterMarkers=[],Y.forEach(function(oe){var me,Ce=R.markerLayerOption.clusterOption,Ve=Ce.field,ut=Ce.method;if((me=oe.properties)!==null&&me!==void 0&&me.cluster_id){var Ft,Nt=R.getLeaves((Ft=oe.properties)===null||Ft===void 0?void 0:Ft.cluster_id);if(oe.properties.clusterData=Nt,Ve&&ut){var vr=Nt==null?void 0:Nt.map(function(Kn){var wn=Object(d.a)({},Ve,Kn.properties[Ve]);return wn}),_r=n.c.getColumn(vr,Ve),Sr=n.c.getSatByColumn(ut,_r),cn="point_"+ut;oe.properties[cn]=Sr.toFixed(2)}}var Bn=R.clusterMarker(oe);R.clusterMarkers.push(Bn),Bn.addTo(R.scene)})}},{key:"getLeaves",value:function(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return a?this.clusterIndex.getLeaves(a,T,R):null}},{key:"clusterMarker",value:function(a){var T=this.markerLayerOption.clusterOption,R=T.element,U=R===void 0?this.generateElement.bind(this):R,Y=new u({element:U(a)}).setLnglat({lng:a.geometry.coordinates[0],lat:a.geometry.coordinates[1]});return Y}},{key:"normalMarker",value:function(a){var T=a.properties.marker_id;return this.markers[T]}},{key:"update",value:function(){if(!!this.mapsService&&this.markers.length!==0){var a=this.mapsService.getZoom(),T=this.mapsService.getBounds();(!this.bbox||Math.abs(a-this.zoom)>=1||!Object(n.m)(this.bbox,T))&&(this.bbox=Object(n.Q)(T,.5),this.zoom=Math.floor(a),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(a){var T=n.a.create("div","l7-marker-cluster"),R=n.a.create("div","",T),U=n.a.create("span","",R),Y=this.markerLayerOption.clusterOption,oe=Y.field,me=Y.method;a.properties.point_count=a.properties.point_count||1;var Ce=oe&&me?a.properties["point_"+me]||a.properties[oe]:a.properties.point_count;return U.textContent=Ce,T}}]),l}(s.EventEmitter),P=Ee("bpoo"),C=Ee("w4Tj"),O=Ee("oZsa"),w=Ee("tJVT"),S=Ee("h1nZ"),I=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;return Object(g.a)(this,l),a=y.call(this),Object(r.a)(Object(p.a)(a),"controlOption",void 0),Object(r.a)(Object(p.a)(a),"container",void 0),Object(r.a)(Object(p.a)(a),"isShow",void 0),Object(r.a)(Object(p.a)(a),"sceneContainer",void 0),Object(r.a)(Object(p.a)(a),"scene",void 0),Object(r.a)(Object(p.a)(a),"mapsService",void 0),Object(r.a)(Object(p.a)(a),"renderService",void 0),Object(r.a)(Object(p.a)(a),"layerService",void 0),Object(r.a)(Object(p.a)(a),"controlService",void 0),Object(r.a)(Object(p.a)(a),"configService",void 0),l.controlCount++,a.controlOption=Object(i.a)(Object(i.a)({},a.getDefault(m)),m||{}),a}return Object(v.a)(l,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(a){var T=this.getDefault(a);Object.entries(a).forEach(function(R){var U=Object(w.a)(R,2),Y=U[0],oe=U[1];oe===void 0&&(a[Y]=T[Y])}),"position"in a&&this.setPosition(a.position),"className"in a&&this.setClassName(a.className),"style"in a&&this.setStyle(a.style),this.controlOption=Object(i.a)(Object(i.a)({},this.controlOption),a)}},{key:"addTo",value:function(a){this.mapsService=a.mapService,this.renderService=a.rendererService,this.layerService=a.layerService,this.controlService=a.controlService,this.configService=a.globalConfigService,this.scene=a.sceneService,this.sceneContainer=a,this.isShow=!0,this.container=this.onAdd(),n.a.addClass(this.container,"l7-control");var T=this.controlOption,R=T.className,U=T.style;return R&&this.setClassName(R),U&&this.setStyle(U),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;n.a.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return n.a.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var a=this.container;n.a.removeClass(a,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var a=this.container;n.a.addClass(a,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(a){return{position:S.j.TOPRIGHT,name:"".concat(l.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(a){if(this.mapsService&&a&&a.screenX>0&&a.screenY>0){var T=this.mapsService.getContainer();T!==null&&T.focus()}}},{key:"setPosition",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S.j.TOPLEFT,T=this.controlService;return T&&T.removeControl(this),this.controlOption.position=a,T&&T.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(a){var T=this.container,R=this.controlOption.className;R&&n.a.removeClass(T,R),a&&n.a.addClass(T,a)}},{key:"setStyle",value:function(a){var T=this.container;a?T.setAttribute("style",a):T.removeAttribute("style")}},{key:"insertContainer",value:function(){var a=this.controlOption.position,T=this.container;if(a instanceof Element)a.appendChild(T);else{var R=this.controlService.controlCorners[a];["bottomleft","bottomright","righttop","rightbottom"].includes(a)?R.insertBefore(T,R.firstChild):R.appendChild(T)}}},{key:"checkUpdateOption",value:function(a,T){return T.some(function(R){return R in a})}}]),l}(f.a);Object(r.a)(I,"controlCount",0);var j=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"isDisable",!1),Object(r.a)(Object(p.a)(m),"button",void 0),Object(r.a)(Object(p.a)(m),"buttonText",void 0),Object(r.a)(Object(p.a)(m),"buttonIcon",void 0),m}return Object(v.a)(l,[{key:"setIsDisable",value:function(a){if(this.isDisable=a,a){var T;(T=this.button)===null||T===void 0||T.setAttribute("disabled","true")}else{var R;(R=this.button)===null||R===void 0||R.removeAttribute("disabled")}}},{key:"createButton",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n.a.create("button","l7-button-control ".concat(a))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var a=this.controlOption,T=a.title,R=a.btnText,U=a.btnIcon;return this.setBtnTitle(T),this.setBtnText(R),this.setBtnIcon(U),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(a){var T=a.title,R=a.btnText,U=a.btnIcon;this.checkUpdateOption(a,["title"])&&this.setBtnTitle(T),this.checkUpdateOption(a,["btnIcon"])&&this.setBtnIcon(U),this.checkUpdateOption(a,["btnText"])&&this.setBtnText(R),Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a)}},{key:"setBtnTitle",value:function(a){var T;(T=this.button)===null||T===void 0||T.setAttribute("title",a!=null?a:"")}},{key:"setBtnIcon",value:function(a){if(this.buttonIcon&&n.a.remove(this.buttonIcon),a){var T,R=(T=this.button)===null||T===void 0?void 0:T.firstChild;if(R){var U;(U=this.button)===null||U===void 0||U.insertBefore(a,R)}else{var Y;(Y=this.button)===null||Y===void 0||Y.appendChild(a)}this.buttonIcon=a}}},{key:"setBtnText",value:function(a){if(!!this.button)if(n.a.removeClass(this.button,"l7-button-control--row"),n.a.removeClass(this.button,"l7-button-control--column"),a){var T=this.buttonText;if(!T){var R;T=n.a.create("div","l7-button-control__text"),(R=this.button)===null||R===void 0||R.appendChild(T),this.buttonText=T}T.innerText=a,n.a.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!a&&this.buttonText&&(n.a.remove(this.buttonText),this.buttonText=void 0)}}]),l}(I),N=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a){var T;return Object(g.a)(this,l),T=y.call(this),Object(r.a)(Object(p.a)(T),"popperDOM",void 0),Object(r.a)(Object(p.a)(T),"contentDOM",void 0),Object(r.a)(Object(p.a)(T),"button",void 0),Object(r.a)(Object(p.a)(T),"option",void 0),Object(r.a)(Object(p.a)(T),"isShow",!1),Object(r.a)(Object(p.a)(T),"content",void 0),Object(r.a)(Object(p.a)(T),"timeout",null),Object(r.a)(Object(p.a)(T),"show",function(){return T.isShow||!T.contentDOM.innerHTML||(T.resetPopperPosition(),n.a.removeClass(T.popperDOM,"l7-popper-hide"),T.isShow=!0,T.option.unique&&l.conflictPopperList.forEach(function(R){R!==Object(p.a)(T)&&R.isShow&&R.hide()}),T.emit("show"),window.addEventListener("pointerdown",T.onPopperUnClick)),Object(p.a)(T)}),Object(r.a)(Object(p.a)(T),"hide",function(){return T.isShow&&(n.a.addClass(T.popperDOM,"l7-popper-hide"),T.isShow=!1,T.emit("hide"),window.removeEventListener("pointerdown",T.onPopperUnClick)),Object(p.a)(T)}),Object(r.a)(Object(p.a)(T),"setHideTimeout",function(){T.timeout||(T.timeout=window.setTimeout(function(){!T.isShow||(T.hide(),T.timeout=null)},300))}),Object(r.a)(Object(p.a)(T),"clearHideTimeout",function(){T.timeout&&(window.clearTimeout(T.timeout),T.timeout=null)}),Object(r.a)(Object(p.a)(T),"onBtnClick",function(){T.isShow?T.hide():T.show()}),Object(r.a)(Object(p.a)(T),"onPopperUnClick",function(R){n.a.findParentElement(R.target,[".l7-button-control",".l7-popper-content"])||T.hide()}),Object(r.a)(Object(p.a)(T),"onBtnMouseLeave",function(){T.setHideTimeout()}),Object(r.a)(Object(p.a)(T),"onBtnMouseMove",function(){T.clearHideTimeout(),!T.isShow&&T.show()}),T.button=m,T.option=a,T.init(),a.unique&&l.conflictPopperList.push(Object(p.a)(T)),T}return Object(v.a)(l,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(a){typeof a=="string"?this.contentDOM.innerHTML=a:a instanceof HTMLElement&&(n.a.clearChildren(this.contentDOM),this.contentDOM.appendChild(a)),this.content=a}},{key:"init",value:function(){var a=this.option.trigger;this.popperDOM=this.createPopper(),a==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),n.a.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var a={},T=this.option,R=T.container,U=T.offset,Y=U===void 0?[0,0]:U,oe=T.placement,me=Object(w.a)(Y,2),Ce=me[0],Ve=me[1],ut=this.button.getBoundingClientRect(),Ft=R.getBoundingClientRect(),Nt=n.a.getDiffRect(ut,Ft),vr=Nt.left,_r=Nt.right,Sr=Nt.top,cn=Nt.bottom,Bn=!1,Kn=!1;/^(left|right)/.test(oe)?(oe.includes("left")?a.right="".concat(ut.width+_r,"px"):oe.includes("right")&&(a.left="".concat(ut.width+vr,"px")),oe.includes("start")?a.top="".concat(Sr,"px"):oe.includes("end")?a.bottom="".concat(cn,"px"):(a.top="".concat(Sr+ut.height/2,"px"),Kn=!0,a.transform="translate(".concat(Ce,"px, calc(").concat(Ve,"px - 50%))"))):/^(top|bottom)/.test(oe)&&(oe.includes("top")?a.bottom="".concat(ut.height+cn,"px"):oe.includes("bottom")&&(a.top="".concat(ut.height+Sr,"px")),oe.includes("start")?a.left="".concat(vr,"px"):oe.includes("end")?a.right="".concat(_r,"px"):(a.left="".concat(vr+ut.width/2,"px"),Bn=!0,a.transform="translate(calc(".concat(Ce,"px - 50%), ").concat(Ve,"px)"))),a.transform="translate(calc(".concat(Ce,"px - ").concat(Bn?"50%":"0%","), calc(").concat(Ve,"px - ").concat(Kn?"50%":"0%",")");var wn=oe.split("-");wn.length&&n.a.addClass(this.popperDOM,wn.map(function(vn){return"l7-popper-".concat(vn)}).join(" ")),n.a.addStyle(this.popperDOM,n.a.css2Style(a))}},{key:"createPopper",value:function(){var a=this.option,T=a.container,R=a.className,U=R===void 0?"":R,Y=a.content,oe=n.a.create("div","l7-popper l7-popper-hide ".concat(U)),me=n.a.create("div","l7-popper-content"),Ce=n.a.create("div","l7-popper-arrow");return oe.appendChild(me),oe.appendChild(Ce),T.appendChild(oe),this.popperDOM=oe,this.contentDOM=me,Y&&this.setContent(Y),oe}}]),l}(s.EventEmitter);Object(r.a)(N,"conflictPopperList",[]);var W={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},H=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"popper",void 0),m}return Object(v.a)(l,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),Object(C.a)(Object(O.a)(l.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(a){var T,R=Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a),U=(T=a==null?void 0:a.position)!==null&&T!==void 0?T:R.position;return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{popperPlacement:U instanceof Element?"bottom":W[U],popperTrigger:"click"})}},{key:"onAdd",value:function(){var a=Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this);return this.initPopper(),a}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var a=this,T=this.controlOption,R=T.popperClassName,U=T.popperPlacement,Y=T.popperTrigger,oe=this.mapsService.getMapContainer();return this.popper=new N(this.button,{className:R,placement:U,trigger:Y,container:oe,unique:!0}),this.popper.on("show",function(){a.emit("popperShow",a)}).on("hide",function(){a.emit("popperHide",a)}),this.popper}},{key:"setOptions",value:function(a){if(Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a),this.checkUpdateOption(a,["popperPlacement","popperTrigger","popperClassName"])){var T=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(T)}}}]),l}(j),J=Ee("oBTY"),Q=function(t){return t.ActiveOptionClassName="l7-select-control-item-active",t.OptionValueAttrKey="data-option-value",t.OptionIndexAttrKey="data-option-index",t}(Q||{}),ne=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"selectValue",[]),Object(r.a)(Object(p.a)(m),"optionDOMList",void 0),Object(r.a)(Object(p.a)(m),"createNormalOption",function(U){var Y=m.selectValue.includes(U.value),oe=n.a.create("div","l7-select-control-item ".concat(Y?Q.ActiveOptionClassName:""));m.getIsMultiple()?oe.appendChild(m.createCheckbox(Y)):oe.appendChild(m.createRadio(Y)),U.icon&&oe.appendChild(U.icon);var me=n.a.create("span");return me.innerText=U.text,oe.appendChild(me),oe}),Object(r.a)(Object(p.a)(m),"onItemClick",function(U){if(m.getIsMultiple()){var Y=m.selectValue.findIndex(function(oe){return oe===U.value});Y>-1?m.selectValue.splice(Y,1):m.selectValue=[].concat(Object(J.a)(m.selectValue),[U.value])}else m.selectValue=[U.value];m.setSelectValue(m.selectValue)}),m}return Object(v.a)(l,[{key:"setOptions",value:function(a){Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a);var T=a.options;T&&this.popper.setContent(this.getPopperContent(T))}},{key:"onAdd",value:function(){var a=Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this),T=this.controlOption.defaultValue;return T&&(this.selectValue=this.transSelectValue(T)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),a}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=this.transSelectValue(a);this.optionDOMList.forEach(function(U){var Y=U.getAttribute(Q.OptionValueAttrKey),oe=U.querySelector("input[type=checkbox]"),me=U.querySelector("input[type=radio]"),Ce=R.includes(Y),Ve=function(Ft,Nt){n.a.toggleClass(U,Q.ActiveOptionClassName,Nt),Ft&&n.a.setChecked(Ft,Nt)};Ve(oe,Ce),Ve(me,Ce)}),this.selectValue=R,T&&this.emit("selectChange",this.getIsMultiple()?R:R[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(a){var T=this,R=this.isImageOptions(),U=n.a.create("div",R?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&n.a.addClass(U,"l7-select-control--multiple");var Y=a.map(function(oe,me){var Ce=R?T.createImageOption(oe):T.createNormalOption(oe);return Ce.setAttribute(Q.OptionValueAttrKey,oe.value),Ce.setAttribute(Q.OptionIndexAttrKey,window.String(me)),Ce.addEventListener("click",T.onItemClick.bind(T,oe)),Ce});return U.append.apply(U,Object(J.a)(Y)),this.optionDOMList=Y,U}},{key:"createImageOption",value:function(a){var T=this.selectValue.includes(a.value),R=n.a.create("div","l7-select-control-item ".concat(T?Q.ActiveOptionClassName:"")),U=n.a.create("img");U.setAttribute("src",a.img),n.a.setUnDraggable(U),R.appendChild(U);var Y=n.a.create("div","l7-select-control-item-row");this.getIsMultiple()&&R.appendChild(this.createCheckbox(T));var oe=n.a.create("span");return oe.innerText=a.text,Y.appendChild(oe),R.appendChild(Y),R}},{key:"createCheckbox",value:function(a){var T=n.a.create("input");return T.setAttribute("type","checkbox"),a&&n.a.setChecked(T,!0),T}},{key:"createRadio",value:function(a){var T=n.a.create("input");return T.setAttribute("type","radio"),a&&n.a.setChecked(T,!0),T}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find(function(a){return a.img})}},{key:"transSelectValue",value:function(a){return Array.isArray(a)?a:[a]}}]),l}(H),K=Ee("qLMh"),ie=Ee("HaE+"),de=function(y){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("l7-iconfont"),l.setAttribute("aria-hidden","true");var m=document.createElementNS("http://www.w3.org/2000/svg","use");return m.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(y)),l.appendChild(m),l},we=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a,T=arguments.length,R=new Array(T),U=0;U<T;U++)R[U]=arguments[U];return m=y.call.apply(y,[this].concat(R)),a=Object(p.a)(m),Object(r.a)(Object(p.a)(m),"onClick",Object(ie.a)(Object(K.a)().mark(function Y(){var oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(oe=a.controlOption.onExport,Ce.t0=oe==null,Ce.t0){Ce.next=8;break}return Ce.t1=oe,Ce.next=6,a.getImage();case 6:Ce.t2=Ce.sent,(0,Ce.t1)(Ce.t2);case 8:case"end":return Ce.stop()}},Y)}))),Object(r.a)(Object(p.a)(m),"mergeImage",Object(ie.a)(Object(K.a)().mark(function Y(){var oe,me,Ce,Ve,ut,Ft,Nt,vr,_r,Sr,cn,Bn,Kn,wn,vn=arguments;return Object(K.a)().wrap(function(Mi){for(;;)switch(Mi.prev=Mi.next){case 0:for(Ce=a.controlOption.imageType,Ve=(oe=(me=a.mapsService.getContainer())===null||me===void 0?void 0:me.getBoundingClientRect())!==null&&oe!==void 0?oe:{},ut=Ve.width,Ft=ut===void 0?0:ut,Nt=Ve.height,vr=Nt===void 0?0:Nt,_r=document.createElement("canvas"),_r.width=Ft,_r.height=vr,Sr=_r.getContext("2d"),cn=vn.length,Bn=new Array(cn),Kn=0;Kn<cn;Kn++)Bn[Kn]=vn[Kn];return Mi.next=9,Promise.all(Bn.map(function(Ki){return new Promise(function(Ii){var xa=new Image;xa.onload=function(){Ii(xa)},xa.src=Ki})}));case 9:return wn=Mi.sent,wn.forEach(function(Ki){Sr==null||Sr.drawImage(Ki,0,0,Ft,vr)}),Mi.abrupt("return",_r.toDataURL("image/".concat(Ce)));case 12:case"end":return Mi.stop()}},Y)}))),m}return Object(v.a)(l,[{key:"onAdd",value:function(){var a=Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this);return a.addEventListener("click",this.onClick),a}},{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:de("l7-icon-export-picture"),imageType:"png"})}},{key:"getImage",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U;return Object(K.a)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,a.mapsService.exportMap("png");case 2:return R=oe.sent,oe.next=5,a.scene.exportPng("png");case 5:return U=oe.sent,oe.abrupt("return",a.mergeImage.apply(a,Object(J.a)([R,U].filter(function(me){return me}))));case 7:case"end":return oe.stop()}},T)}))()}}]),l}(j),Re=Ee("rAM+"),_e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ue=function(){if(typeof document=="undefined")return!1;var t=_e[0],y={},l=Object(Re.a)(_e),m;try{for(l.s();!(m=l.n()).done;){var a=m.value,T=a==null?void 0:a[1];if(T in document){var R=Object(Re.a)(a.entries()),U;try{for(R.s();!(U=R.n()).done;){var Y=U.value,oe=Object(w.a)(Y,2),me=oe[0],Ce=oe[1];y[t[me]]=Ce}}catch(Ve){R.e(Ve)}finally{R.f()}return y}}}catch(Ve){l.e(Ve)}finally{l.f()}return!1}(),rt={change:Ue.fullscreenchange,error:Ue.fullscreenerror},Fe={request:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,l=arguments.length>1?arguments[1]:void 0;return new Promise(function(m,a){var T=function U(){Fe.off("change",U),m()};Fe.on("change",T);var R=y[Ue.requestFullscreen](l);R instanceof Promise&&R.then(T).catch(a)})},exit:function(){return new Promise(function(y,l){if(!Fe.isFullscreen){y();return}var m=function T(){Fe.off("change",T),y()};Fe.on("change",m);var a=document[Ue.exitFullscreen]();a instanceof Promise&&a.then(m).catch(l)})},toggle:function(y,l){return Fe.isFullscreen?Fe.exit():Fe.request(y,l)},onchange:function(y){Fe.on("change",y)},onerror:function(y){Fe.on("error",y)},on:function(y,l){var m=rt[y];m&&document.addEventListener(m,l,!1)},off:function(y,l){var m=rt[y];m&&document.removeEventListener(m,l,!1)},raw:Ue};Object.defineProperties(Fe,{isFullscreen:{get:function(){return Boolean(document[Ue.fullscreenElement])}},element:{enumerable:!0,get:function(){var y;return(y=document[Ue.fullscreenElement])!==null&&y!==void 0?y:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[Ue.fullscreenEnabled])}}}),Ue||(Fe={isEnabled:!1});var Se=Fe,ye=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;Object(g.a)(this,l);var T;return a=y.call(this,m),T=Object(p.a)(a),Object(r.a)(Object(p.a)(a),"isFullscreen",!1),Object(r.a)(Object(p.a)(a),"mapContainer",void 0),Object(r.a)(Object(p.a)(a),"toggleFullscreen",Object(ie.a)(Object(K.a)().mark(function R(){return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!Se.isEnabled){Y.next=3;break}return Y.next=3,Se.toggle(T.mapContainer);case 3:case"end":return Y.stop()}},R)}))),Object(r.a)(Object(p.a)(a),"onClick",function(){a.toggleFullscreen()}),Object(r.a)(Object(p.a)(a),"onFullscreenChange",function(){a.isFullscreen=!!document.fullscreenElement;var R=a.controlOption,U=R.btnText,Y=R.btnIcon,oe=R.title,me=R.exitBtnText,Ce=R.exitBtnIcon,Ve=R.exitTitle;a.isFullscreen?(a.setBtnTitle(Ve),a.setBtnText(me),a.setBtnIcon(Ce)):(a.setBtnTitle(oe),a.setBtnText(U),a.setBtnIcon(Y)),a.emit("fullscreenChange",a.isFullscreen)}),Se.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316"),a}return Object(v.a)(l,[{key:"setOptions",value:function(a){var T=a.exitBtnText,R=a.exitBtnIcon,U=a.exitTitle;this.isFullscreen&&(this.checkUpdateOption(a,["exitBtnIcon"])&&this.setBtnIcon(R),this.checkUpdateOption(a,["exitBtnText"])&&this.setBtnText(T),this.checkUpdateOption(a,["exitTitle"])&&this.setBtnTitle(U)),Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a)}},{key:"onAdd",value:function(){var a=Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this);return a.addEventListener("click",this.onClick),this.mapContainer=n.a.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),a}},{key:"onRemove",value:function(){Object(C.a)(Object(O.a)(l.prototype),"onRemove",this).call(this),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}},{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{title:"\u5168\u5C4F",btnIcon:de("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:de("l7-icon-exit-fullscreen")})}}]),l}(j),Oe=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;Object(g.a)(this,l);var T;return a=y.call(this,m),T=Object(p.a)(a),Object(r.a)(Object(p.a)(a),"getGeoLocation",function(){return new Promise(function(R,U){window.navigator.geolocation.getCurrentPosition(function(Y){var oe=Y.coords,me=oe!=null?oe:{},Ce=me.longitude,Ve=me.latitude;!isNaN(Ce)&&!isNaN(Ve)?R([Ce,Ve]):U()},function(Y){U(Y)})})}),Object(r.a)(Object(p.a)(a),"onClick",Object(ie.a)(Object(K.a)().mark(function R(){var U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(window.navigator.geolocation){Ce.next=2;break}return Ce.abrupt("return");case 2:return U=T.controlOption.transform,Ce.next=5,T.getGeoLocation();case 5:if(Y=Ce.sent,oe=T.mapsService.getZoom(),Ce.t0=T.mapsService,Ce.t1=oe>15?oe:15,!U){Ce.next=15;break}return Ce.next=12,U(Y);case 12:Ce.t2=Ce.sent,Ce.next=16;break;case 15:Ce.t2=Y;case 16:Ce.t3=Ce.t2,Ce.t0.setZoomAndCenter.call(Ce.t0,Ce.t1,Ce.t3);case 18:case"end":return Ce.stop()}},R)}))),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D"),a}return Object(v.a)(l,[{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{title:"\u5B9A\u4F4D",btnIcon:de("l7-icon-reposition")})}},{key:"onAdd",value:function(){var a=Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this);return a.addEventListener("click",this.onClick),a}}]),l}(j);function ue(t){return Object.keys(t!=null?t:{}).every(function(y){return["layer","name","img"].includes(y)})}var xe=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"onLayerChange",function(){var U;(U=m.controlOption.layers)!==null&&U!==void 0&&U.length||(m.selectValue=m.getLayerVisible(),m.setOptions({options:m.getLayerOptions()}))}),Object(r.a)(Object(p.a)(m),"onLayerVisibleChane",function(){m.setSelectValue(m.getLayerVisible())}),Object(r.a)(Object(p.a)(m),"onSelectChange",function(){m.layers.forEach(function(U){var Y=m.selectValue.includes(U.name),oe=U.isVisible();Y&&!oe&&U.show(),!Y&&oe&&U.hide()})}),m}return Object(v.a)(l,[{key:"layers",get:function(){var a=this.layerService,T=this.controlOption.layers;if(Array.isArray(T)&&T.length){var R=[];return T.forEach(function(U){if(U instanceof Object&&(ue(U)?R.push(U.layer):R.push(U)),typeof U=="string"){var Y=a.getLayer(U)||a.getLayerByName(U);Y&&R.push(Y)}}),R}return a.getLayers()||[]}},{key:"getDefault",value:function(a){var T;return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:de("l7-icon-layer"),options:[],multiple:(T=a==null?void 0:a.multiple)!==null&&T!==void 0?T:!0})}},{key:"getLayerVisible",value:function(){return this.layers.filter(function(a){return a.isVisible()}).map(function(a){return a.name})}},{key:"getLayerOptions",value:function(){var a=this,T=this.controlOption.layers,R=T==null?void 0:T.every(function(U){return U.img});return T?T==null?void 0:T.map(function(U){if(ue(U))return{text:U.name||U.layer.name,value:U.layer.name,img:R?U.img:void 0};if(typeof U=="string"){var Y=a.layerService.getLayer(U)||a.layerService.getLayerByName(U);return{text:Y==null?void 0:Y.name,value:Y==null?void 0:Y.name}}return{text:U.name,value:U.name}}):this.layers.map(function(U){return{text:U.name,value:U.name}})}},{key:"setOptions",value:function(a){var T=this.checkUpdateOption(a,["layers","multiple"]);Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a),T&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}},{key:"handleSingleSelection",value:function(){this.layers.forEach(function(a,T){T===0?a.show():a.hide()})}},{key:"onAdd",value:function(){var a;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(a=this.controlOption.options)!==null&&a!==void 0&&a.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this)}},{key:"onRemove",value:function(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}},{key:"getIsMultiple",value:function(){return this.controlOption.multiple}}]),l}(ne),Ae=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"getDefault",value:function(){return{position:S.j.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var a=n.a.create("div","l7-control-logo");return this.setLogoContent(a),a}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(a){Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a),this.checkUpdateOption(a,["img","href"])&&(n.a.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(a){var T=this.controlOption,R=T.href,U=T.img,Y=n.a.create("img");if(Y.setAttribute("src",U),Y.setAttribute("aria-label","AntV logo"),n.a.setUnDraggable(Y),R){var oe=n.a.create("a","l7-control-logo-link");oe.target="_blank",oe.href=R,oe.rel="noopener nofollow",oe.setAttribute("rel","noopener nofollow"),oe.appendChild(Y),a.appendChild(oe)}else a.appendChild(Y)}}]),l}(I),pe={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},be={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}},le=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"onMapThemeChange",function(){m.mapsService.setMapStyle(m.selectValue[0])}),m}return Object(v.a)(l,[{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:de("l7-icon-color"),options:[]})}},{key:"getStyleOptions",value:function(){var a=this.mapsService.getType()==="mapbox"?be:pe;return Object.entries(this.mapsService.getMapStyleConfig()).filter(function(T){var R=Object(w.a)(T,2),U=R[0],Y=R[1];return typeof Y=="string"&&U!=="blank"}).map(function(T){var R=Object(w.a)(T,2),U=R[0],Y=R[1],oe,me=(oe=a[U])!==null&&oe!==void 0?oe:{},Ce=me.text,Ve=me.img;return{text:Ce!=null?Ce:U,value:Y,img:Ve,key:U}})}},{key:"getMapStyle",value:function(){return this.mapsService.getMapStyle()}},{key:"onAdd",value:function(){var a=this,T;if((T=this.controlOption.options)!==null&&T!==void 0&&T.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var R,U,Y=this.controlOption.defaultValue;this.controlOption.defaultValue=(R=(U=this.controlOption.options.find(function(me){return me.key===Y}))===null||U===void 0?void 0:U.value)!==null&&R!==void 0?R:Y}else{var oe=this.getMapStyle();oe?this.controlOption.defaultValue=oe:this.mapsService.map.once("styledata",function(){var me=a.mapsService.getMapStyle();a.controlOption.defaultValue=me,a.setSelectValue(me,!1)})}return this.on("selectChange",this.onMapThemeChange),Object(C.a)(Object(O.a)(l.prototype),"onAdd",this).call(this)}},{key:"getIsMultiple",value:function(){return!1}}]),l}(ne),z=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"location",[0,0]),Object(r.a)(Object(p.a)(m),"onMouseMove",function(U){var Y=m.location,oe=U.lngLat||U.lnglat,me=m.controlOption.transform;oe&&(Y=[oe.lng,oe.lat]),m.location=Y,me&&(Y=me(Y)),m.insertLocation2HTML(Y),m.emit("locationChange",Y)}),m}return Object(v.a)(l,[{key:"getLocation",value:function(){return this.location}},{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{position:S.j.BOTTOMLEFT,transform:function(R){var U=Object(w.a)(R,2),Y=U[0],oe=U[1];return[+(+Y).toFixed(6),+(+oe).toFixed(6)]}})}},{key:"onAdd",value:function(){var a=n.a.create("div","l7-control-mouse-location");return a.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),a}},{key:"onRemove",value:function(){this.mapsService.off("mousemove",this.onMouseMove)}},{key:"insertLocation2HTML",value:function(a){this.container.innerText=a.join(", ")}}]),l}(I),ae=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"mScale",void 0),Object(r.a)(Object(p.a)(m),"iScale",void 0),Object(r.a)(Object(p.a)(m),"update",function(){var U=m.mapsService,Y=m.controlOption.maxWidth,oe=U.getSize()[1]/2,me=U.containerToLngLat([0,oe]),Ce=U.containerToLngLat([Y,oe]),Ve=Object(n.M)([me.lng,me.lat],[Ce.lng,Ce.lat]);m.updateScales(Ve)}),m}return Object(v.a)(l,[{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{name:"scale",position:S.j.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var a="l7-control-scale",T=n.a.create("div",a);this.resetScaleLines(T);var R=this.controlOption.updateWhenIdle;return this.mapsService.on(R?"moveend":"mapmove",this.update),this.mapsService.on(R?"zoomend":"zoomchange",this.update),T}},{key:"onRemove",value:function(){var a=this.controlOption.updateWhenIdle;this.mapsService.off(a?"zoomend":"zoomchange",this.update),this.mapsService.off(a?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(a){Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a),this.checkUpdateOption(a,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(a){var T=this.controlOption,R=T.metric,U=T.imperial;R&&a&&this.updateMetric(a),U&&a&&this.updateImperial(a)}},{key:"resetScaleLines",value:function(a){n.a.clearChildren(a);var T=this.controlOption,R=T.metric,U=T.imperial,Y=T.maxWidth,oe=T.lockWidth;oe&&n.a.addStyle(a,"width: ".concat(Y,"px")),R&&(this.mScale=n.a.create("div","l7-control-scale-line",a)),U&&(this.iScale=n.a.create("div","l7-control-scale-line",a)),this.update()}},{key:"updateScale",value:function(a,T,R){var U=this.controlOption.maxWidth;a.style.width=Math.round(U*R)+"px",a.innerHTML=T}},{key:"getRoundNum",value:function(a){var T=Math.pow(10,(Math.floor(a)+"").length-1),R=a/T;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:1,T*R}},{key:"updateMetric",value:function(a){var T=this.getRoundNum(a),R=T<1e3?T+" m":T/1e3+" km";this.updateScale(this.mScale,R,T/a)}},{key:"updateImperial",value:function(a){var T=a*3.2808399,R,U,Y;T>5280?(R=T/5280,U=this.getRoundNum(R),this.updateScale(this.iScale,U+" mi",U/R)):(Y=this.getRoundNum(T),this.updateScale(this.iScale,Y+" ft",Y/T))}}]),l}(I),V=Ee("Ff2n"),re=Ee("xp6e"),te=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"mapService",void 0),Object(r.a)(this,"fontService",void 0)}return Object(v.a)(t,[{key:"apply",value:function(l,m){var a=this,T=m.styleAttributeService,R=m.mapService,U=m.fontService,Y=this;this.mapService=R,this.fontService=U,l.hooks.init.tapPromise("DataMappingPlugin",Object(ie.a)(Object(K.a)().mark(function oe(){return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:l.log(S.f.MappingStart,S.g.INIT),Y.generateMaping(l,{styleAttributeService:T}),l.log(S.f.MappingEnd,S.g.INIT);case 3:case"end":return Ce.stop()}},oe)}))),l.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var oe=Object(ie.a)(Object(K.a)().mark(function me(Ce){var Ve;return Object(K.a)().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:if(Ce){Ft.next=2;break}return Ft.abrupt("return",Ce);case 2:return l.dataState.dataMappingNeedUpdate=!1,l.log(S.f.MappingStart,S.g.UPDATE),Ve=Y.generateMaping(l,{styleAttributeService:T}),l.log(S.f.MappingEnd,S.g.UPDATE),Ft.abrupt("return",Ve);case 7:case"end":return Ft.stop()}},me)}));return function(me){return oe.apply(this,arguments)}}()),l.hooks.beforeRender.tap("DataMappingPlugin",function(){var oe=l.getSource();if(!(l.layerModelNeedUpdate||!oe||!oe.inited)){var me=T.getLayerStyleAttributes()||[],Ce=T.getLayerStyleAttribute("filter"),Ve=oe.data.dataArray;if(!(Array.isArray(Ve)&&Ve.length===0)){var ut=me.filter(function(vr){return vr.needRemapping}),Ft=Ve;if(Ce!=null&&Ce.needRemapping&&Ce!==null&&Ce!==void 0&&Ce.scale&&(Ft=Ve.filter(function(vr){return a.applyAttributeMapping(Ce,vr)[0]})),ut.length){var Nt=a.mapping(l,ut,Ft,l.getEncodedData());l.setEncodedData(Nt)}}}})}},{key:"generateMaping",value:function(l,m){var a=this,T=m.styleAttributeService,R=T.getLayerStyleAttributes()||[],U=T.getLayerStyleAttribute("filter"),Y=l.getSource().data.dataArray,oe=Y;U!=null&&U.scale&&(oe=Y.filter(function(Ce){return a.applyAttributeMapping(U,Ce)[0]})),oe=l.processData(oe);var me=this.mapping(l,R,oe,void 0);return l.setEncodedData(me),l.emit("dataUpdate",null),!0}},{key:"mapping",value:function(l,m,a,T){var R=this,U=m.filter(function(oe){return oe.scale!==void 0}).filter(function(oe){return oe.name!=="filter"}),Y=a.map(function(oe,me){var Ce=T?T[me]:{},Ve=Object(i.a)({id:oe._id,coordinates:oe.coordinates},Ce);return U.forEach(function(ut){var Ft=R.applyAttributeMapping(ut,oe);(ut.name==="color"||ut.name==="stroke")&&(Ft=Ft.map(function(Nt){return Object(n.R)(Nt)})),Ve[ut.name]=Array.isArray(Ft)&&Ft.length===1?Ft[0]:Ft,ut.name==="shape"&&(Ve.shape=R.fontService.getIconFontKey(Ve[ut.name]))}),Ve});return m.forEach(function(oe){oe.needRemapping=!1}),this.adjustData2SimpleCoordinates(Y),Y}},{key:"adjustData2SimpleCoordinates",value:function(l){var m=this;l.length>0&&this.mapService.version==="SIMPLE"&&l.map(function(a){a.simpleCoordinate||(a.coordinates=m.unProjectCoordinates(a.coordinates),a.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(l){var m=this;if(typeof l[0]=="number")return this.mapService.simpleMapCoord.unproject(l);if(l[0]&&l[0][0]instanceof Array){var a=[];return l.map(function(R){var U=[];R.map(function(Y){U.push(m.mapService.simpleMapCoord.unproject(Y))}),a.push(U)}),a}else{var T=[];return l.map(function(R){T.push(m.mapService.simpleMapCoord.unproject(R))}),T}}},{key:"applyAttributeMapping",value:function(l,m){var a;if(!l.scale)return[];var T=(l==null||(a=l.scale)===null||a===void 0?void 0:a.scalers)||[],R=[];T.forEach(function(Y){var oe=Y.field,me;(m.hasOwnProperty(oe)||((me=l.scale)===null||me===void 0?void 0:me.type)==="variable")&&R.push(m[oe])});var U=l.mapping?l.mapping(R):[];return U}},{key:"getArrowPoints",value:function(l,m){var a=[m[0]-l[0],m[1]-l[1]],T=Object(n.P)(a),R=[l[0]+T[0]*1e-4,l[1]+T[1]*1e-4];return R}}]),t}(),q=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"mapService",void 0)}return Object(v.a)(t,[{key:"apply",value:function(l){var m=this;this.mapService=l.getContainer().mapService,l.hooks.init.tapPromise("DataSourcePlugin",Object(ie.a)(Object(K.a)().mark(function a(){var T,R,U,Y;return Object(K.a)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(l.log(S.f.SourceInitStart,S.g.INIT),T=l.getSource(),T||(R=l.sourceOption||l.defaultSourceConfig,U=R.data,Y=R.options,T=new e.default(U,Y),l.setSource(T)),!T.inited){me.next=8;break}m.updateClusterData(l),l.log(S.f.SourceInitEnd,S.g.INIT),me.next=10;break;case 8:return me.next=10,new Promise(function(Ce){T.on("update",function(Ve){Ve.type==="inited"&&(m.updateClusterData(l),l.log(S.f.SourceInitEnd,S.g.INIT)),Ce(null)})});case 10:case"end":return me.stop()}},a)}))),l.hooks.beforeRenderData.tapPromise("DataSourcePlugin",Object(ie.a)(Object(K.a)().mark(function a(){var T,R,U;return Object(K.a)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return T=m.updateClusterData(l),R=l.dataState.dataSourceNeedUpdate,l.dataState.dataSourceNeedUpdate=!1,U=T||R,oe.abrupt("return",U);case 5:case"end":return oe.stop()}},a)})))}},{key:"updateClusterData",value:function(l){if(l.isTileLayer||l.tileLayer||!l.getSource())return!1;var m=l.getSource(),a=m.cluster,T=m.clusterOptions.zoom,R=T===void 0?0:T,U=this.mapService.getZoom()-1,Y=l.dataState.dataSourceNeedUpdate;return a&&Y&&m.updateClusterData(Math.floor(U)),a&&Math.abs(l.clusterZoom-U)>=1?(R!==Math.floor(U)&&m.updateClusterData(Math.floor(U)),l.clusterZoom=U,!0):!1}}]),t}(),ve=function(t,y){var l,m;if(y===void 0){var a=Object(Re.a)(t),T;try{for(a.s();!(T=a.n()).done;){var R=T.value;R!=null&&(l===void 0?R>=R&&(l=m=R):(l>R&&(l=R),m<R&&(m=R)))}}catch(Ce){a.e(Ce)}finally{a.f()}}else{var U=-1,Y=Object(Re.a)(t),oe;try{for(Y.s();!(oe=Y.n()).done;){var me=oe.value;(me=y(me,++U,t))!=null&&(l===void 0?me>=me&&(l=m=me):(l>me&&(l=me),m<me&&(m=me)))}}catch(Ce){Y.e(Ce)}finally{Y.f()}}return[l,m]},Me=Ee("FmoU");function De(t,y,l,m,a){var T=t*t,R=T*t;return((1-3*t+3*T-R)*y+(4-6*T+3*R)*l+(1+3*t+3*T-3*R)*m+R*a)/6}var ze=function(t){var y=t.length-1;return function(l){var m=l<=0?l=0:l>=1?(l=1,y-1):Math.floor(l*y),a=t[m],T=t[m+1],R=m>0?t[m-1]:2*a-T,U=m<y-1?t[m+2]:2*T-a;return De((l-m/y)*y,R,a,T,U)}},We=function(t){var y=t.length;return function(l){var m=Math.floor(((l%=1)<0?++l:l)*y),a=t[(m+y-1)%y],T=t[m%y],R=t[(m+1)%y],U=t[(m+2)%y];return De((l-m/y)*y,a,T,R,U)}},He=function(t){return function(){return t}};function $e(t,y){return function(l){return t+l*y}}function It(t,y,l){return t=Math.pow(t,l),y=Math.pow(y,l)-t,l=1/l,function(m){return Math.pow(t+m*y,l)}}function Yt(t,y){var l=y-t;return l?$e(t,l>180||l<-180?l-360*Math.round(l/360):l):He(isNaN(t)?y:t)}function rr(t){return(t=+t)==1?ir:function(y,l){return l-y?It(y,l,t):He(isNaN(y)?l:y)}}function ir(t,y){var l=y-t;return l?$e(t,l):He(isNaN(t)?y:t)}var Br=function t(y){var l=rr(y);function m(a,T){var R=l((a=Object(Me.b)(a)).r,(T=Object(Me.b)(T)).r),U=l(a.g,T.g),Y=l(a.b,T.b),oe=ir(a.opacity,T.opacity);return function(me){return a.r=R(me),a.g=U(me),a.b=Y(me),a.opacity=oe(me),a+""}}return m.gamma=t,m}(1);function tr(t){return function(y){var l=y.length,m=new Array(l),a=new Array(l),T=new Array(l),R,U;for(R=0;R<l;++R)U=Object(Me.b)(y[R]),m[R]=U.r||0,a[R]=U.g||0,T[R]=U.b||0;return m=t(m),a=t(a),T=t(T),U.opacity=1,function(Y){return U.r=m(Y),U.g=a(Y),U.b=T(Y),U+""}}}var ft=tr(ze),st=tr(We),Tt=function(t,y){return t<y?-1:t>y?1:t>=y?0:NaN},Qe=function(t){return t.length===1&&(t=it(t)),{left:function(l,m,a,T){for(a==null&&(a=0),T==null&&(T=l.length);a<T;){var R=a+T>>>1;t(l[R],m)<0?a=R+1:T=R}return a},right:function(l,m,a,T){for(a==null&&(a=0),T==null&&(T=l.length);a<T;){var R=a+T>>>1;t(l[R],m)>0?T=R:a=R+1}return a}}};function it(t){return function(y,l){return Tt(t(y),l)}}var zt=Qe(Tt),Qt=zt.right,Ar=zt.left,zr=Qt,ct=function(t,y){y==null&&(y=ot);for(var l=0,m=t.length-1,a=t[0],T=new Array(m<0?0:m);l<m;)T[l]=y(a,a=t[++l]);return T};function ot(t,y){return[t,y]}var xt=function(t,y,l){var m=t.length,a=y.length,T=new Array(m*a),R,U,Y,oe;for(l==null&&(l=ot),R=Y=0;R<m;++R)for(oe=t[R],U=0;U<a;++U,++Y)T[Y]=l(oe,y[U]);return T},Bt=function(t,y){return y<t?-1:y>t?1:y>=t?0:NaN},Ke=function(t){return t===null?NaN:+t},lt=function(t,y){var l=t.length,m=0,a=-1,T=0,R,U,Y=0;if(y==null)for(;++a<l;)isNaN(R=Ke(t[a]))||(U=R-T,T+=U/++m,Y+=U*(R-T));else for(;++a<l;)isNaN(R=Ke(y(t[a],a,t)))||(U=R-T,T+=U/++m,Y+=U*(R-T));if(m>1)return Y/(m-1)},mt=function(t,y){var l=lt(t,y);return l&&Math.sqrt(l)},qe=function(t,y){var l=t.length,m=-1,a,T,R;if(y==null){for(;++m<l;)if((a=t[m])!=null&&a>=a)for(T=R=a;++m<l;)(a=t[m])!=null&&(T>a&&(T=a),R<a&&(R=a))}else for(;++m<l;)if((a=y(t[m],m,t))!=null&&a>=a)for(T=R=a;++m<l;)(a=y(t[m],m,t))!=null&&(T>a&&(T=a),R<a&&(R=a));return[T,R]},yt=Array.prototype,qt=yt.slice,Er=yt.map,Zr=function(t){return function(){return t}},Dr=function(t){return t},Cr=function(t,y,l){t=+t,y=+y,l=(a=arguments.length)<2?(y=t,t=0,1):a<3?1:+l;for(var m=-1,a=Math.max(0,Math.ceil((y-t)/l))|0,T=new Array(a);++m<a;)T[m]=t+m*l;return T},mn=Math.sqrt(50),xn=Math.sqrt(10),lr=Math.sqrt(2),An=function(t,y,l){var m,a=-1,T,R,U;if(y=+y,t=+t,l=+l,t===y&&l>0)return[t];if((m=y<t)&&(T=t,t=y,y=T),(U=On(t,y,l))===0||!isFinite(U))return[];if(U>0)for(t=Math.ceil(t/U),y=Math.floor(y/U),R=new Array(T=Math.ceil(y-t+1));++a<T;)R[a]=(t+a)*U;else for(t=Math.floor(t*U),y=Math.ceil(y*U),R=new Array(T=Math.ceil(t-y+1));++a<T;)R[a]=(t-a)/U;return m&&R.reverse(),R};function On(t,y,l){var m=(y-t)/Math.max(0,l),a=Math.floor(Math.log(m)/Math.LN10),T=m/Math.pow(10,a);return a>=0?(T>=mn?10:T>=xn?5:T>=lr?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(T>=mn?10:T>=xn?5:T>=lr?2:1)}function Mt(t,y,l){var m=Math.abs(y-t)/Math.max(0,l),a=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),T=m/a;return T>=mn?a*=10:T>=xn?a*=5:T>=lr&&(a*=2),y<t?-a:a}var er=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},$t=function(){var t=Dr,y=qe,l=er;function m(a){var T,R=a.length,U,Y=new Array(R);for(T=0;T<R;++T)Y[T]=t(a[T],T,a);var oe=y(Y),me=oe[0],Ce=oe[1],Ve=l(Y,me,Ce);Array.isArray(Ve)||(Ve=Mt(me,Ce,Ve),Ve=Cr(Math.ceil(me/Ve)*Ve,Ce,Ve));for(var ut=Ve.length;Ve[0]<=me;)Ve.shift(),--ut;for(;Ve[ut-1]>Ce;)Ve.pop(),--ut;var Ft=new Array(ut+1),Nt;for(T=0;T<=ut;++T)Nt=Ft[T]=[],Nt.x0=T>0?Ve[T-1]:me,Nt.x1=T<ut?Ve[T]:Ce;for(T=0;T<R;++T)U=Y[T],me<=U&&U<=Ce&&Ft[zr(Ve,U,0,ut)].push(a[T]);return Ft}return m.value=function(a){return arguments.length?(t=typeof a=="function"?a:Zr(a),m):t},m.domain=function(a){return arguments.length?(y=typeof a=="function"?a:Zr([a[0],a[1]]),m):y},m.thresholds=function(a){return arguments.length?(l=typeof a=="function"?a:Array.isArray(a)?Zr(qt.call(a)):Zr(a),m):l},m},Tr=function(t,y,l){if(l==null&&(l=Ke),!!(m=t.length)){if((y=+y)<=0||m<2)return+l(t[0],0,t);if(y>=1)return+l(t[m-1],m-1,t);var m,a=(m-1)*y,T=Math.floor(a),R=+l(t[T],T,t),U=+l(t[T+1],T+1,t);return R+(U-R)*(a-T)}},Mr=function(t,y,l){return t=Er.call(t,Ke).sort(Tt),Math.ceil((l-y)/(2*(Tr(t,.75)-Tr(t,.25))*Math.pow(t.length,-1/3)))},Hr=function(t,y,l){return Math.ceil((l-y)/(3.5*mt(t)*Math.pow(t.length,-1/3)))},wr=function(t,y){var l=t.length,m=-1,a,T;if(y==null){for(;++m<l;)if((a=t[m])!=null&&a>=a)for(T=a;++m<l;)(a=t[m])!=null&&a>T&&(T=a)}else for(;++m<l;)if((a=y(t[m],m,t))!=null&&a>=a)for(T=a;++m<l;)(a=y(t[m],m,t))!=null&&a>T&&(T=a);return T},Ur=function(t,y){var l=t.length,m=l,a=-1,T,R=0;if(y==null)for(;++a<l;)isNaN(T=Ke(t[a]))?--m:R+=T;else for(;++a<l;)isNaN(T=Ke(y(t[a],a,t)))?--m:R+=T;if(m)return R/m},fn=function(t,y){var l=t.length,m=-1,a,T=[];if(y==null)for(;++m<l;)isNaN(a=Ke(t[m]))||T.push(a);else for(;++m<l;)isNaN(a=Ke(y(t[m],m,t)))||T.push(a);return Tr(T.sort(Tt),.5)},tn=function(t){for(var y=t.length,l,m=-1,a=0,T,R;++m<y;)a+=t[m].length;for(T=new Array(a);--y>=0;)for(R=t[y],l=R.length;--l>=0;)T[--a]=R[l];return T},Rr=function(t,y){var l=t.length,m=-1,a,T;if(y==null){for(;++m<l;)if((a=t[m])!=null&&a>=a)for(T=a;++m<l;)(a=t[m])!=null&&T>a&&(T=a)}else for(;++m<l;)if((a=y(t[m],m,t))!=null&&a>=a)for(T=a;++m<l;)(a=y(t[m],m,t))!=null&&T>a&&(T=a);return T},Nn=function(t,y){for(var l=y.length,m=new Array(l);l--;)m[l]=t[y[l]];return m},En=function(t,y){if(!!(l=t.length)){var l,m=0,a=0,T,R=t[a];for(y==null&&(y=Tt);++m<l;)(y(T=t[m],R)<0||y(R,R)!==0)&&(R=T,a=m);if(y(R,R)===0)return a}},Yn=function(t,y,l){for(var m=(l==null?t.length:l)-(y=y==null?0:+y),a,T;m;)T=Math.random()*m--|0,a=t[m+y],t[m+y]=t[T+y],t[T+y]=a;return t},wi=function(t,y){var l=t.length,m=-1,a,T=0;if(y==null)for(;++m<l;)(a=+t[m])&&(T+=a);else for(;++m<l;)(a=+y(t[m],m,t))&&(T+=a);return T},$a=function(t){if(!(T=t.length))return[];for(var y=-1,l=Rr(t,so),m=new Array(l);++y<l;)for(var a=-1,T,R=m[y]=new Array(T);++a<T;)R[a]=t[a][y];return m};function so(t){return t.length}var Po=function(){return $a(arguments)};function Ro(t,y){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(y).domain(t);break}return this}function So(t,y){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(y).domain(t);break}return this}var Va="$";function ws(){}ws.prototype=ps.prototype={constructor:ws,has:function(y){return Va+y in this},get:function(y){return this[Va+y]},set:function(y,l){return this[Va+y]=l,this},remove:function(y){var l=Va+y;return l in this&&delete this[l]},clear:function(){for(var y in this)y[0]===Va&&delete this[y]},keys:function(){var y=[];for(var l in this)l[0]===Va&&y.push(l.slice(1));return y},values:function(){var y=[];for(var l in this)l[0]===Va&&y.push(this[l]);return y},entries:function(){var y=[];for(var l in this)l[0]===Va&&y.push({key:l.slice(1),value:this[l]});return y},size:function(){var y=0;for(var l in this)l[0]===Va&&++y;return y},empty:function(){for(var y in this)if(y[0]===Va)return!1;return!0},each:function(y){for(var l in this)l[0]===Va&&y(this[l],l.slice(1),this)}};function ps(t,y){var l=new ws;if(t instanceof ws)t.each(function(U,Y){l.set(Y,U)});else if(Array.isArray(t)){var m=-1,a=t.length,T;if(y==null)for(;++m<a;)l.set(m,t[m]);else for(;++m<a;)l.set(y(T=t[m],m,t),T)}else if(t)for(var R in t)l.set(R,t[R]);return l}var Ao=ps,zs=function(){var t=[],y=[],l,m,a;function T(U,Y,oe,me){if(Y>=t.length)return l!=null&&U.sort(l),m!=null?m(U):U;for(var Ce=-1,Ve=U.length,ut=t[Y++],Ft,Nt,vr=Ao(),_r,Sr=oe();++Ce<Ve;)(_r=vr.get(Ft=ut(Nt=U[Ce])+""))?_r.push(Nt):vr.set(Ft,[Nt]);return vr.each(function(cn,Bn){me(Sr,Bn,T(cn,Y,oe,me))}),Sr}function R(U,Y){if(++Y>t.length)return U;var oe,me=y[Y-1];return m!=null&&Y>=t.length?oe=U.entries():(oe=[],U.each(function(Ce,Ve){oe.push({key:Ve,values:R(Ce,Y)})})),me!=null?oe.sort(function(Ce,Ve){return me(Ce.key,Ve.key)}):oe}return a={object:function(Y){return T(Y,0,Qa,fs)},map:function(Y){return T(Y,0,Vs,Ju)},entries:function(Y){return R(T(Y,0,Vs,Ju),0)},key:function(Y){return t.push(Y),a},sortKeys:function(Y){return y[t.length-1]=Y,a},sortValues:function(Y){return l=Y,a},rollup:function(Y){return m=Y,a}}};function Qa(){return{}}function fs(t,y,l){t[y]=l}function Vs(){return Ao()}function Ju(t,y,l){t.set(y,l)}function ts(){}var Zs=Ao.prototype;ts.prototype=ys.prototype={constructor:ts,has:Zs.has,add:function(y){return y+="",this[Va+y]=y,this},remove:Zs.remove,clear:Zs.clear,values:Zs.keys,size:Zs.size,empty:Zs.empty,each:Zs.each};function ys(t,y){var l=new ts;if(t instanceof ts)t.each(function(T){l.add(T)});else if(t){var m=-1,a=t.length;if(y==null)for(;++m<a;)l.add(t[m]);else for(;++m<a;)l.add(y(t[m],m,t))}return l}var Lt=ys,at=function(t){var y=[];for(var l in t)y.push(l);return y},Ye=function(t){var y=[];for(var l in t)y.push(t[l]);return y},St=function(t){var y=[];for(var l in t)y.push({key:l,value:t[l]});return y},fr=Array.prototype,Gr=fr.map,hn=fr.slice,un={name:"implicit"};function Qn(){var t=Ao(),y=[],l=[],m=un;function a(T){var R=T+"",U=t.get(R);if(!U){if(m!==un)return m;t.set(R,U=y.push(T))}return l[(U-1)%l.length]}return a.domain=function(T){if(!arguments.length)return y.slice();y=[],t=Ao();for(var R=-1,U=T.length,Y,oe;++R<U;)t.has(oe=(Y=T[R])+"")||t.set(oe,y.push(Y));return a},a.range=function(T){return arguments.length?(l=hn.call(T),a):l.slice()},a.unknown=function(T){return arguments.length?(m=T,a):m},a.copy=function(){return Qn(y,l).unknown(m)},Ro.apply(a,arguments),a}function Ai(){var t=Qn().unknown(void 0),y=t.domain,l=t.range,m=[0,1],a,T,R=!1,U=0,Y=0,oe=.5;delete t.unknown;function me(){var Ce=y().length,Ve=m[1]<m[0],ut=m[Ve-0],Ft=m[1-Ve];a=(Ft-ut)/Math.max(1,Ce-U+Y*2),R&&(a=Math.floor(a)),ut+=(Ft-ut-a*(Ce-U))*oe,T=a*(1-U),R&&(ut=Math.round(ut),T=Math.round(T));var Nt=Cr(Ce).map(function(vr){return ut+a*vr});return l(Ve?Nt.reverse():Nt)}return t.domain=function(Ce){return arguments.length?(y(Ce),me()):y()},t.range=function(Ce){return arguments.length?(m=[+Ce[0],+Ce[1]],me()):m.slice()},t.rangeRound=function(Ce){return m=[+Ce[0],+Ce[1]],R=!0,me()},t.bandwidth=function(){return T},t.step=function(){return a},t.round=function(Ce){return arguments.length?(R=!!Ce,me()):R},t.padding=function(Ce){return arguments.length?(U=Math.min(1,Y=+Ce),me()):U},t.paddingInner=function(Ce){return arguments.length?(U=Math.min(1,Ce),me()):U},t.paddingOuter=function(Ce){return arguments.length?(Y=+Ce,me()):Y},t.align=function(Ce){return arguments.length?(oe=Math.max(0,Math.min(1,Ce)),me()):oe},t.copy=function(){return Ai(y(),m).round(R).paddingInner(U).paddingOuter(Y).align(oe)},Ro.apply(me(),arguments)}function bi(t){var y=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return bi(y())},t}function na(){return bi(Ai.apply(null,arguments).paddingInner(1))}var Oa=function(t,y){y||(y=[]);var l=t?Math.min(y.length,t.length):0,m=y.slice(),a;return function(T){for(a=0;a<l;++a)m[a]=t[a]*(1-T)+y[a]*T;return m}};function fo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var uo=function(t,y){return(fo(y)?Oa:Uo)(t,y)};function Uo(t,y){var l=y?y.length:0,m=t?Math.min(l,t.length):0,a=new Array(m),T=new Array(l),R;for(R=0;R<m;++R)a[R]=Yo(t[R],y[R]);for(;R<l;++R)T[R]=y[R];return function(U){for(R=0;R<m;++R)T[R]=a[R](U);return T}}var lo=function(t,y){var l=new Date;return t=+t,y=+y,function(m){return l.setTime(t*(1-m)+y*m),l}},go=function(t,y){return t=+t,y=+y,function(l){return t*(1-l)+y*l}},Ho=function(t,y){var l={},m={},a;(t===null||typeof t!="object")&&(t={}),(y===null||typeof y!="object")&&(y={});for(a in y)a in t?l[a]=Yo(t[a],y[a]):m[a]=y[a];return function(T){for(a in l)m[a]=l[a](T);return m}},Qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Go=new RegExp(Qo.source,"g");function _s(t){return function(){return t}}function bs(t){return function(y){return t(y)+""}}var Ks=function(t,y){var l=Qo.lastIndex=Go.lastIndex=0,m,a,T,R=-1,U=[],Y=[];for(t=t+"",y=y+"";(m=Qo.exec(t))&&(a=Go.exec(y));)(T=a.index)>l&&(T=y.slice(l,T),U[R]?U[R]+=T:U[++R]=T),(m=m[0])===(a=a[0])?U[R]?U[R]+=a:U[++R]=a:(U[++R]=null,Y.push({i:R,x:go(m,a)})),l=Go.lastIndex;return l<y.length&&(T=y.slice(l),U[R]?U[R]+=T:U[++R]=T),U.length<2?Y[0]?bs(Y[0].x):_s(y):(y=Y.length,function(oe){for(var me=0,Ce;me<y;++me)U[(Ce=Y[me]).i]=Ce.x(oe);return U.join("")})},Yo=function(t,y){var l=typeof y,m;return y==null||l==="boolean"?He(y):(l==="number"?go:l==="string"?(m=Object(Me.a)(y))?(y=m,Br):Ks:y instanceof Me.a?Br:y instanceof Date?lo:fo(y)?Oa:Array.isArray(y)?Uo:typeof y.valueOf!="function"&&typeof y.toString!="function"||isNaN(y)?Ho:go)(t,y)},mo=function(t,y){return t=+t,y=+y,function(l){return Math.round(t*(1-l)+y*l)}},Rs=function(t){return function(){return t}},rs=function(t){return+t},Za=[0,1];function qa(t){return t}function Fs(t,y){return(y-=t=+t)?function(l){return(l-t)/y}:Rs(isNaN(y)?NaN:.5)}function Ou(t){var y=t[0],l=t[t.length-1],m;return y>l&&(m=y,y=l,l=m),function(a){return Math.max(y,Math.min(l,a))}}function Ws(t,y,l){var m=t[0],a=t[1],T=y[0],R=y[1];return a<m?(m=Fs(a,m),T=l(R,T)):(m=Fs(m,a),T=l(T,R)),function(U){return T(m(U))}}function nl(t,y,l){var m=Math.min(t.length,y.length)-1,a=new Array(m),T=new Array(m),R=-1;for(t[m]<t[0]&&(t=t.slice().reverse(),y=y.slice().reverse());++R<m;)a[R]=Fs(t[R],t[R+1]),T[R]=l(y[R],y[R+1]);return function(U){var Y=zr(t,U,1,m)-1;return T[Y](a[Y](U))}}function Bu(t,y){return y.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function su(){var t=Za,y=Za,l=Yo,m,a,T,R=qa,U,Y,oe;function me(){return U=Math.min(t.length,y.length)>2?nl:Ws,Y=oe=null,Ce}function Ce(Ve){return isNaN(Ve=+Ve)?T:(Y||(Y=U(t.map(m),y,l)))(m(R(Ve)))}return Ce.invert=function(Ve){return R(a((oe||(oe=U(y,t.map(m),go)))(Ve)))},Ce.domain=function(Ve){return arguments.length?(t=Gr.call(Ve,rs),R===qa||(R=Ou(t)),me()):t.slice()},Ce.range=function(Ve){return arguments.length?(y=hn.call(Ve),me()):y.slice()},Ce.rangeRound=function(Ve){return y=hn.call(Ve),l=mo,me()},Ce.clamp=function(Ve){return arguments.length?(R=Ve?Ou(t):qa,Ce):R!==qa},Ce.interpolate=function(Ve){return arguments.length?(l=Ve,me()):l},Ce.unknown=function(Ve){return arguments.length?(T=Ve,Ce):T},function(Ve,ut){return m=Ve,a=ut,me()}}function zu(t,y){return su()(t,y)}var uu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hu(t){if(!(y=uu.exec(t)))throw new Error("invalid format: "+t);var y;return new Qu({fill:y[1],align:y[2],sign:y[3],symbol:y[4],zero:y[5],width:y[6],comma:y[7],precision:y[8]&&y[8].slice(1),trim:y[9],type:y[10]})}hu.prototype=Qu.prototype;function Qu(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Qu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var qo=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function du(t,y){if((l=(t=y?t.toExponential(y-1):t.toExponential()).indexOf("e"))<0)return null;var l,m=t.slice(0,l);return[m.length>1?m[0]+m.slice(2):m,+t.slice(l+1)]}var ns=function(t){return t=du(Math.abs(t)),t?t[1]:NaN},ru=function(t,y){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ns(y)/3)))*3-ns(Math.abs(t)))},_u=function(t,y){return function(l,m){for(var a=l.length,T=[],R=0,U=t[0],Y=0;a>0&&U>0&&(Y+U+1>m&&(U=Math.max(1,m-Y)),T.push(l.substring(a-=U,a+U)),!((Y+=U+1)>m));)U=t[R=(R+1)%t.length];return T.reverse().join(y)}},Hs=function(t){return function(y){return y.replace(/[0-9]/g,function(l){return t[+l]})}},Ns=function(t){e:for(var y=t.length,l=1,m=-1,a;l<y;++l)switch(t[l]){case".":m=a=l;break;case"0":m===0&&(m=l),a=l;break;default:if(!+t[l])break e;m>0&&(m=0);break}return m>0?t.slice(0,m)+t.slice(a+1):t},Js,Fu=function(t,y){var l=du(t,y);if(!l)return t+"";var m=l[0],a=l[1],T=a-(Js=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,R=m.length;return T===R?m:T>R?m+new Array(T-R+1).join("0"):T>0?m.slice(0,T)+"."+m.slice(T):"0."+new Array(1-T).join("0")+du(t,Math.max(0,y+T-1))[0]},vu=function(t,y){var l=du(t,y);if(!l)return t+"";var m=l[0],a=l[1];return a<0?"0."+new Array(-a).join("0")+m:m.length>a+1?m.slice(0,a+1)+"."+m.slice(a+1):m+new Array(a-m.length+2).join("0")},Vu={"%":function(y,l){return(y*100).toFixed(l)},b:function(y){return Math.round(y).toString(2)},c:function(y){return y+""},d:qo,e:function(y,l){return y.toExponential(l)},f:function(y,l){return y.toFixed(l)},g:function(y,l){return y.toPrecision(l)},o:function(y){return Math.round(y).toString(8)},p:function(y,l){return vu(y*100,l)},r:vu,s:Fu,X:function(y){return Math.round(y).toString(16).toUpperCase()},x:function(y){return Math.round(y).toString(16)}},Nu=function(t){return t},To=Array.prototype.map,Wu=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],Hu=function(t){var y=t.grouping===void 0||t.thousands===void 0?Nu:_u(To.call(t.grouping,Number),t.thousands+""),l=t.currency===void 0?"":t.currency[0]+"",m=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",T=t.numerals===void 0?Nu:Hs(To.call(t.numerals,String)),R=t.percent===void 0?"%":t.percent+"",U=t.minus===void 0?"-":t.minus+"",Y=t.nan===void 0?"NaN":t.nan+"";function oe(Ce){Ce=hu(Ce);var Ve=Ce.fill,ut=Ce.align,Ft=Ce.sign,Nt=Ce.symbol,vr=Ce.zero,_r=Ce.width,Sr=Ce.comma,cn=Ce.precision,Bn=Ce.trim,Kn=Ce.type;Kn==="n"?(Sr=!0,Kn="g"):Vu[Kn]||(cn===void 0&&(cn=12),Bn=!0,Kn="g"),(vr||Ve==="0"&&ut==="=")&&(vr=!0,Ve="0",ut="=");var wn=Nt==="$"?l:Nt==="#"&&/[boxX]/.test(Kn)?"0"+Kn.toLowerCase():"",vn=Nt==="$"?m:/[%p]/.test(Kn)?R:"",ti=Vu[Kn],Mi=/[defgprs%]/.test(Kn);cn=cn===void 0?6:/[gprs]/.test(Kn)?Math.max(1,Math.min(21,cn)):Math.max(0,Math.min(20,cn));function Ki(Ii){var xa=wn,La=vn,Cs,wu,ju;if(Kn==="c")La=ti(Ii)+La,Ii="";else{Ii=+Ii;var Oc=Ii<0||1/Ii<0;if(Ii=isNaN(Ii)?Y:ti(Math.abs(Ii),cn),Bn&&(Ii=Ns(Ii)),Oc&&+Ii==0&&Ft!=="+"&&(Oc=!1),xa=(Oc?Ft==="("?Ft:U:Ft==="-"||Ft==="("?"":Ft)+xa,La=(Kn==="s"?Wu[8+Js/3]:"")+La+(Oc&&Ft==="("?")":""),Mi){for(Cs=-1,wu=Ii.length;++Cs<wu;)if(ju=Ii.charCodeAt(Cs),48>ju||ju>57){La=(ju===46?a+Ii.slice(Cs+1):Ii.slice(Cs))+La,Ii=Ii.slice(0,Cs);break}}}Sr&&!vr&&(Ii=y(Ii,Infinity));var wc=xa.length+Ii.length+La.length,Wl=wc<_r?new Array(_r-wc+1).join(Ve):"";switch(Sr&&vr&&(Ii=y(Wl+Ii,Wl.length?_r-La.length:Infinity),Wl=""),ut){case"<":Ii=xa+Ii+La+Wl;break;case"=":Ii=xa+Wl+Ii+La;break;case"^":Ii=Wl.slice(0,wc=Wl.length>>1)+xa+Ii+La+Wl.slice(wc);break;default:Ii=Wl+xa+Ii+La;break}return T(Ii)}return Ki.toString=function(){return Ce+""},Ki}function me(Ce,Ve){var ut=oe((Ce=hu(Ce),Ce.type="f",Ce)),Ft=Math.max(-8,Math.min(8,Math.floor(ns(Ve)/3)))*3,Nt=Math.pow(10,-Ft),vr=Wu[8+Ft/3];return function(_r){return ut(Nt*_r)+vr}}return{format:oe,formatPrefix:me}},Ru,$o,dl;Gu({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Gu(t){return Ru=Hu(t),$o=Ru.format,dl=Ru.formatPrefix,Ru}var os=function(t,y){return t=Math.abs(t),y=Math.abs(y)-t,Math.max(0,ns(y)-ns(t))+1},Us=function(t){return Math.max(0,-ns(Math.abs(t)))},hs=function(t,y,l,m){var a=Mt(t,y,l),T;switch(m=hu(m==null?",f":m),m.type){case"s":{var R=Math.max(Math.abs(t),Math.abs(y));return m.precision==null&&!isNaN(T=ru(a,R))&&(m.precision=T),dl(m,R)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(T=os(a,Math.max(Math.abs(t),Math.abs(y))))&&(m.precision=T-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(T=Us(a))&&(m.precision=T-(m.type==="%")*2);break}}return $o(m)};function xs(t){var y=t.domain;return t.ticks=function(l){var m=y();return An(m[0],m[m.length-1],l==null?10:l)},t.tickFormat=function(l,m){var a=y();return hs(a[0],a[a.length-1],l==null?10:l,m)},t.nice=function(l){l==null&&(l=10);var m=y(),a=0,T=m.length-1,R=m[a],U=m[T],Y;return U<R&&(Y=R,R=U,U=Y,Y=a,a=T,T=Y),Y=On(R,U,l),Y>0?(R=Math.floor(R/Y)*Y,U=Math.ceil(U/Y)*Y,Y=On(R,U,l)):Y<0&&(R=Math.ceil(R*Y)/Y,U=Math.floor(U*Y)/Y,Y=On(R,U,l)),Y>0?(m[a]=Math.floor(R/Y)*Y,m[T]=Math.ceil(U/Y)*Y,y(m)):Y<0&&(m[a]=Math.ceil(R*Y)/Y,m[T]=Math.floor(U*Y)/Y,y(m)),t},t}function il(){var t=zu(qa,qa);return t.copy=function(){return Bu(t,il())},Ro.apply(t,arguments),xs(t)}function Tu(t){var y;function l(m){return isNaN(m=+m)?y:m}return l.invert=l,l.domain=l.range=function(m){return arguments.length?(t=Gr.call(m,rs),l):t.slice()},l.unknown=function(m){return arguments.length?(y=m,l):y},l.copy=function(){return Tu(t).unknown(y)},t=arguments.length?Gr.call(t,rs):[0,1],xs(l)}var Is=function(t,y){t=t.slice();var l=0,m=t.length-1,a=t[l],T=t[m],R;return T<a&&(R=l,l=m,m=R,R=a,a=T,T=R),t[l]=y.floor(a),t[m]=y.ceil(T),t};function lu(t){return Math.log(t)}function bu(t){return Math.exp(t)}function nu(t){return-Math.log(-t)}function Be(t){return-Math.exp(-t)}function Fr(t){return isFinite(t)?+("1e"+t):t<0?0:t}function jt(t){return t===10?Fr:t===Math.E?Math.exp:function(y){return Math.pow(t,y)}}function Vt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(y){return Math.log(y)/t})}function gt(t){return function(y){return-t(-y)}}function ar(t){var y=t(lu,bu),l=y.domain,m=10,a,T;function R(){return a=Vt(m),T=jt(m),l()[0]<0?(a=gt(a),T=gt(T),t(nu,Be)):t(lu,bu),y}return y.base=function(U){return arguments.length?(m=+U,R()):m},y.domain=function(U){return arguments.length?(l(U),R()):l()},y.ticks=function(U){var Y=l(),oe=Y[0],me=Y[Y.length-1],Ce;(Ce=me<oe)&&(Ve=oe,oe=me,me=Ve);var Ve=a(oe),ut=a(me),Ft,Nt,vr,_r=U==null?10:+U,Sr=[];if(!(m%1)&&ut-Ve<_r){if(Ve=Math.round(Ve)-1,ut=Math.round(ut)+1,oe>0){for(;Ve<ut;++Ve)for(Nt=1,Ft=T(Ve);Nt<m;++Nt)if(vr=Ft*Nt,!(vr<oe)){if(vr>me)break;Sr.push(vr)}}else for(;Ve<ut;++Ve)for(Nt=m-1,Ft=T(Ve);Nt>=1;--Nt)if(vr=Ft*Nt,!(vr<oe)){if(vr>me)break;Sr.push(vr)}}else Sr=An(Ve,ut,Math.min(ut-Ve,_r)).map(T);return Ce?Sr.reverse():Sr},y.tickFormat=function(U,Y){if(Y==null&&(Y=m===10?".0e":","),typeof Y!="function"&&(Y=$o(Y)),U===Infinity)return Y;U==null&&(U=10);var oe=Math.max(1,m*U/y.ticks().length);return function(me){var Ce=me/T(Math.round(a(me)));return Ce*m<m-.5&&(Ce*=m),Ce<=oe?Y(me):""}},y.nice=function(){return l(Is(l(),{floor:function(Y){return T(Math.floor(a(Y)))},ceil:function(Y){return T(Math.ceil(a(Y)))}}))},y}function gr(){var t=ar(su()).domain([1,10]);return t.copy=function(){return Bu(t,gr()).base(t.base())},Ro.apply(t,arguments),t}function en(t){return function(y){return Math.sign(y)*Math.log1p(Math.abs(y/t))}}function Vr(t){return function(y){return Math.sign(y)*Math.expm1(Math.abs(y))*t}}function on(t){var y=1,l=t(en(y),Vr(y));return l.constant=function(m){return arguments.length?t(en(y=+m),Vr(y)):y},xs(l)}function Dn(){var t=on(su());return t.copy=function(){return Bu(t,Dn()).constant(t.constant())},Ro.apply(t,arguments)}function di(t){return function(y){return y<0?-Math.pow(-y,t):Math.pow(y,t)}}function xi(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ji(t){return t<0?-t*t:t*t}function ia(t){var y=t(qa,qa),l=1;function m(){return l===1?t(qa,qa):l===.5?t(xi,ji):t(di(l),di(1/l))}return y.exponent=function(a){return arguments.length?(l=+a,m()):l},xs(y)}function ca(){var t=ia(su());return t.copy=function(){return Bu(t,ca()).exponent(t.exponent())},Ro.apply(t,arguments),t}function ea(){return ca.apply(null,arguments).exponent(.5)}function ma(){var t=[],y=[],l=[],m;function a(){var R=0,U=Math.max(1,y.length);for(l=new Array(U-1);++R<U;)l[R-1]=Tr(t,R/U);return T}function T(R){return isNaN(R=+R)?m:y[zr(l,R)]}return T.invertExtent=function(R){var U=y.indexOf(R);return U<0?[NaN,NaN]:[U>0?l[U-1]:t[0],U<l.length?l[U]:t[t.length-1]]},T.domain=function(R){if(!arguments.length)return t.slice();t=[];for(var U=0,Y=R.length,oe;U<Y;++U)oe=R[U],oe!=null&&!isNaN(oe=+oe)&&t.push(oe);return t.sort(Tt),a()},T.range=function(R){return arguments.length?(y=hn.call(R),a()):y.slice()},T.unknown=function(R){return arguments.length?(m=R,T):m},T.quantiles=function(){return l.slice()},T.copy=function(){return ma().domain(t).range(y).unknown(m)},Ro.apply(T,arguments)}function Ia(){var t=0,y=1,l=1,m=[.5],a=[0,1],T;function R(Y){return Y<=Y?a[zr(m,Y,0,l)]:T}function U(){var Y=-1;for(m=new Array(l);++Y<l;)m[Y]=((Y+1)*y-(Y-l)*t)/(l+1);return R}return R.domain=function(Y){return arguments.length?(t=+Y[0],y=+Y[1],U()):[t,y]},R.range=function(Y){return arguments.length?(l=(a=hn.call(Y)).length-1,U()):a.slice()},R.invertExtent=function(Y){var oe=a.indexOf(Y);return oe<0?[NaN,NaN]:oe<1?[t,m[0]]:oe>=l?[m[l-1],y]:[m[oe-1],m[oe]]},R.unknown=function(Y){return arguments.length&&(T=Y),R},R.thresholds=function(){return m.slice()},R.copy=function(){return Ia().domain([t,y]).range(a).unknown(T)},Ro.apply(xs(R),arguments)}function Fa(){var t=[.5],y=[0,1],l,m=1;function a(T){return T<=T?y[zr(t,T,0,m)]:l}return a.domain=function(T){return arguments.length?(t=hn.call(T),m=Math.min(t.length,y.length-1),a):t.slice()},a.range=function(T){return arguments.length?(y=hn.call(T),m=Math.min(t.length,y.length-1),a):y.slice()},a.invertExtent=function(T){var R=y.indexOf(T);return[t[R-1],t[R]]},a.unknown=function(T){return arguments.length?(l=T,a):l},a.copy=function(){return Fa().domain(t).range(y).unknown(l)},Ro.apply(a,arguments)}var Io=new Date,ho=new Date;function Ba(t,y,l,m){function a(T){return t(T=arguments.length===0?new Date:new Date(+T)),T}return a.floor=function(T){return t(T=new Date(+T)),T},a.ceil=function(T){return t(T=new Date(T-1)),y(T,1),t(T),T},a.round=function(T){var R=a(T),U=a.ceil(T);return T-R<U-T?R:U},a.offset=function(T,R){return y(T=new Date(+T),R==null?1:Math.floor(R)),T},a.range=function(T,R,U){var Y=[],oe;if(T=a.ceil(T),U=U==null?1:Math.floor(U),!(T<R)||!(U>0))return Y;do Y.push(oe=new Date(+T)),y(T,U),t(T);while(oe<T&&T<R);return Y},a.filter=function(T){return Ba(function(R){if(R>=R)for(;t(R),!T(R);)R.setTime(R-1)},function(R,U){if(R>=R)if(U<0)for(;++U<=0;)for(;y(R,-1),!T(R););else for(;--U>=0;)for(;y(R,1),!T(R););})},l&&(a.count=function(T,R){return Io.setTime(+T),ho.setTime(+R),t(Io),t(ho),Math.floor(l(Io,ho))},a.every=function(T){return T=Math.floor(T),!isFinite(T)||!(T>0)?null:T>1?a.filter(m?function(R){return m(R)%T==0}:function(R){return a.count(0,R)%T==0}):a}),a}var Mo=Ba(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,y){t.setFullYear(t.getFullYear()+y)},function(t,y){return y.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Mo.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ba(function(y){y.setFullYear(Math.floor(y.getFullYear()/t)*t),y.setMonth(0,1),y.setHours(0,0,0,0)},function(y,l){y.setFullYear(y.getFullYear()+l*t)})};var _o=Mo,Da=Mo.range,ss=Ba(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,y){t.setMonth(t.getMonth()+y)},function(t,y){return y.getMonth()-t.getMonth()+(y.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),ko=ss,bo=ss.range,Zo=1e3,As=6e4,us=36e5,Mu=864e5,Qs=6048e5;function Ls(t){return Ba(function(y){y.setDate(y.getDate()-(y.getDay()+7-t)%7),y.setHours(0,0,0,0)},function(y,l){y.setDate(y.getDate()+l*7)},function(y,l){return(l-y-(l.getTimezoneOffset()-y.getTimezoneOffset())*As)/Qs})}var Es=Ls(0),al=Ls(1),cu=Ls(2),zo=Ls(3),qu=Ls(4),ol=Ls(5),xu=Ls(6),xo=Es.range,Ko=al.range,Iu=cu.range,Hl=zo.range,xl=qu.range,yl=ol.range,Tc=xu.range,El=Ba(function(t){t.setHours(0,0,0,0)},function(t,y){t.setDate(t.getDate()+y)},function(t,y){return(y-t-(y.getTimezoneOffset()-t.getTimezoneOffset())*As)/Mu},function(t){return t.getDate()-1}),_l=El,sl=El.range,ls=Ba(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Zo-t.getMinutes()*As)},function(t,y){t.setTime(+t+y*us)},function(t,y){return(y-t)/us},function(t){return t.getHours()}),gs=ls,ht=ls.range,Ut=Ba(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Zo)},function(t,y){t.setTime(+t+y*As)},function(t,y){return(y-t)/As},function(t){return t.getMinutes()}),Ht=Ut,Kt=Ut.range,pr=Ba(function(t){t.setTime(t-t.getMilliseconds())},function(t,y){t.setTime(+t+y*Zo)},function(t,y){return(y-t)/Zo},function(t){return t.getUTCSeconds()}),ln=pr,Rn=pr.range,Fn=Ba(function(){},function(t,y){t.setTime(+t+y)},function(t,y){return y-t});Fn.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ba(function(y){y.setTime(Math.floor(y/t)*t)},function(y,l){y.setTime(+y+l*t)},function(y,l){return(l-y)/t}):Fn};var li=Fn,qi=Fn.range;function Wn(t){return Ba(function(y){y.setUTCDate(y.getUTCDate()-(y.getUTCDay()+7-t)%7),y.setUTCHours(0,0,0,0)},function(y,l){y.setUTCDate(y.getUTCDate()+l*7)},function(y,l){return(l-y)/Qs})}var ga=Wn(0),ao=Wn(1),is=Wn(2),vo=Wn(3),Et=Wn(4),bt=Wn(5),mr=Wn(6),or=ga.range,Ir=ao.range,yn=is.range,jn=vo.range,qn=Et.range,ui=bt.range,kn=mr.range,oi=Ba(function(t){t.setUTCHours(0,0,0,0)},function(t,y){t.setUTCDate(t.getUTCDate()+y)},function(t,y){return(y-t)/Mu},function(t){return t.getUTCDate()-1}),bn=oi,Xe=oi.range,et=Ba(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,y){t.setUTCFullYear(t.getUTCFullYear()+y)},function(t,y){return y.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});et.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ba(function(y){y.setUTCFullYear(Math.floor(y.getUTCFullYear()/t)*t),y.setUTCMonth(0,1),y.setUTCHours(0,0,0,0)},function(y,l){y.setUTCFullYear(y.getUTCFullYear()+l*t)})};var Ct=et,At=et.range;function Le(t){if(0<=t.y&&t.y<100){var y=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return y.setFullYear(t.y),y}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ne(t){if(0<=t.y&&t.y<100){var y=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return y.setUTCFullYear(t.y),y}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function nt(t,y,l){return{y:t,m:y,d:l,H:0,M:0,S:0,L:0}}function tt(t){var y=t.dateTime,l=t.date,m=t.time,a=t.periods,T=t.days,R=t.shortDays,U=t.months,Y=t.shortMonths,oe=yr(a),me=rn(a),Ce=yr(T),Ve=rn(T),ut=yr(R),Ft=rn(R),Nt=yr(U),vr=rn(U),_r=yr(Y),Sr=rn(Y),cn={a:Oc,A:wc,b:Wl,B:gf,c:null,d:Oo,e:Oo,f:ul,g:ke,G:Je,H:as,I:pu,j:gu,L:Sl,m:X,M:k,p:Ph,q:lm,Q:ua,s:Xa,S:F,u:$,U:G,V:ce,w:fe,W:Pe,x:null,X:null,y:Ie,Y:Ge,Z:vt,"%":Ga},Bn={a:cm,A:ep,b:s0,B:u0,c:null,d:_t,e:_t,f:hr,g:to,G:ta,H:Rt,I:Pt,j:Gt,L:ur,m:nn,M:Yr,p:Ql,q:mf,Q:ua,s:Xa,S:Tn,u:In,U:si,V:Ci,w:Ji,W:ha,x:null,X:null,y:ya,Y:wo,Z:Ka,"%":Ga},Kn={a:Ki,A:Ii,b:xa,B:La,c:Cs,d:la,e:la,f:eo,g:Ei,G:ri,H:Ha,I:Ha,j:Vi,L:mi,m:Ti,M:Na,p:Mi,q:gi,Q:po,s:Wi,S:Wa,u:an,U:Qr,V:_n,w:Kr,W:Pn,x:wu,X:ju,y:Ei,Y:ri,Z:zn,"%":Lo};cn.x=wn(l,cn),cn.X=wn(m,cn),cn.c=wn(y,cn),Bn.x=wn(l,Bn),Bn.X=wn(m,Bn),Bn.c=wn(y,Bn);function wn(Bo,tu){return function(Ps){var pa=[],yf=-1,Il=0,Lf=Bo.length,Df,ov,g1;for(Ps instanceof Date||(Ps=new Date(+Ps));++yf<Lf;)Bo.charCodeAt(yf)===37&&(pa.push(Bo.slice(Il,yf)),(ov=dt[Df=Bo.charAt(++yf)])!=null?Df=Bo.charAt(++yf):ov=Df==="e"?" ":"0",(g1=tu[Df])&&(Df=g1(Ps,ov)),pa.push(Df),Il=yf+1);return pa.push(Bo.slice(Il,yf)),pa.join("")}}function vn(Bo,tu){return function(Ps){var pa=nt(1900,void 0,1),yf=ti(pa,Bo,Ps+="",0),Il,Lf;if(yf!=Ps.length)return null;if("Q"in pa)return new Date(pa.Q);if("s"in pa)return new Date(pa.s*1e3+("L"in pa?pa.L:0));if(tu&&!("Z"in pa)&&(pa.Z=0),"p"in pa&&(pa.H=pa.H%12+pa.p*12),pa.m===void 0&&(pa.m="q"in pa?pa.q:0),"V"in pa){if(pa.V<1||pa.V>53)return null;"w"in pa||(pa.w=1),"Z"in pa?(Il=Ne(nt(pa.y,0,1)),Lf=Il.getUTCDay(),Il=Lf>4||Lf===0?ao.ceil(Il):ao(Il),Il=bn.offset(Il,(pa.V-1)*7),pa.y=Il.getUTCFullYear(),pa.m=Il.getUTCMonth(),pa.d=Il.getUTCDate()+(pa.w+6)%7):(Il=Le(nt(pa.y,0,1)),Lf=Il.getDay(),Il=Lf>4||Lf===0?al.ceil(Il):al(Il),Il=_l.offset(Il,(pa.V-1)*7),pa.y=Il.getFullYear(),pa.m=Il.getMonth(),pa.d=Il.getDate()+(pa.w+6)%7)}else("W"in pa||"U"in pa)&&("w"in pa||(pa.w="u"in pa?pa.u%7:"W"in pa?1:0),Lf="Z"in pa?Ne(nt(pa.y,0,1)).getUTCDay():Le(nt(pa.y,0,1)).getDay(),pa.m=0,pa.d="W"in pa?(pa.w+6)%7+pa.W*7-(Lf+5)%7:pa.w+pa.U*7-(Lf+6)%7);return"Z"in pa?(pa.H+=pa.Z/100|0,pa.M+=pa.Z%100,Ne(pa)):Le(pa)}}function ti(Bo,tu,Ps,pa){for(var yf=0,Il=tu.length,Lf=Ps.length,Df,ov;yf<Il;){if(pa>=Lf)return-1;if(Df=tu.charCodeAt(yf++),Df===37){if(Df=tu.charAt(yf++),ov=Kn[Df in dt?tu.charAt(yf++):Df],!ov||(pa=ov(Bo,Ps,pa))<0)return-1}else if(Df!=Ps.charCodeAt(pa++))return-1}return pa}function Mi(Bo,tu,Ps){var pa=oe.exec(tu.slice(Ps));return pa?(Bo.p=me[pa[0].toLowerCase()],Ps+pa[0].length):-1}function Ki(Bo,tu,Ps){var pa=ut.exec(tu.slice(Ps));return pa?(Bo.w=Ft[pa[0].toLowerCase()],Ps+pa[0].length):-1}function Ii(Bo,tu,Ps){var pa=Ce.exec(tu.slice(Ps));return pa?(Bo.w=Ve[pa[0].toLowerCase()],Ps+pa[0].length):-1}function xa(Bo,tu,Ps){var pa=_r.exec(tu.slice(Ps));return pa?(Bo.m=Sr[pa[0].toLowerCase()],Ps+pa[0].length):-1}function La(Bo,tu,Ps){var pa=Nt.exec(tu.slice(Ps));return pa?(Bo.m=vr[pa[0].toLowerCase()],Ps+pa[0].length):-1}function Cs(Bo,tu,Ps){return ti(Bo,y,tu,Ps)}function wu(Bo,tu,Ps){return ti(Bo,l,tu,Ps)}function ju(Bo,tu,Ps){return ti(Bo,m,tu,Ps)}function Oc(Bo){return R[Bo.getDay()]}function wc(Bo){return T[Bo.getDay()]}function Wl(Bo){return Y[Bo.getMonth()]}function gf(Bo){return U[Bo.getMonth()]}function Ph(Bo){return a[+(Bo.getHours()>=12)]}function lm(Bo){return 1+~~(Bo.getMonth()/3)}function cm(Bo){return R[Bo.getUTCDay()]}function ep(Bo){return T[Bo.getUTCDay()]}function s0(Bo){return Y[Bo.getUTCMonth()]}function u0(Bo){return U[Bo.getUTCMonth()]}function Ql(Bo){return a[+(Bo.getUTCHours()>=12)]}function mf(Bo){return 1+~~(Bo.getUTCMonth()/3)}return{format:function(tu){var Ps=wn(tu+="",cn);return Ps.toString=function(){return tu},Ps},parse:function(tu){var Ps=vn(tu+="",!1);return Ps.toString=function(){return tu},Ps},utcFormat:function(tu){var Ps=wn(tu+="",Bn);return Ps.toString=function(){return tu},Ps},utcParse:function(tu){var Ps=vn(tu+="",!0);return Ps.toString=function(){return tu},Ps}}}var dt={"-":"",_:" ","0":"0"},Dt=/^\s*\d+/,Zt=/^%/,cr=/[\\^$*+?|[\]().{}]/g;function Jt(t,y,l){var m=t<0?"-":"",a=(m?-t:t)+"",T=a.length;return m+(T<l?new Array(l-T+1).join(y)+a:a)}function xr(t){return t.replace(cr,"\\$&")}function yr(t){return new RegExp("^(?:"+t.map(xr).join("|")+")","i")}function rn(t){for(var y={},l=-1,m=t.length;++l<m;)y[t[l].toLowerCase()]=l;return y}function Kr(t,y,l){var m=Dt.exec(y.slice(l,l+1));return m?(t.w=+m[0],l+m[0].length):-1}function an(t,y,l){var m=Dt.exec(y.slice(l,l+1));return m?(t.u=+m[0],l+m[0].length):-1}function Qr(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.U=+m[0],l+m[0].length):-1}function _n(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.V=+m[0],l+m[0].length):-1}function Pn(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.W=+m[0],l+m[0].length):-1}function ri(t,y,l){var m=Dt.exec(y.slice(l,l+4));return m?(t.y=+m[0],l+m[0].length):-1}function Ei(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.y=+m[0]+(+m[0]>68?1900:2e3),l+m[0].length):-1}function zn(t,y,l){var m=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(y.slice(l,l+6));return m?(t.Z=m[1]?0:-(m[2]+(m[3]||"00")),l+m[0].length):-1}function gi(t,y,l){var m=Dt.exec(y.slice(l,l+1));return m?(t.q=m[0]*3-3,l+m[0].length):-1}function Ti(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.m=m[0]-1,l+m[0].length):-1}function la(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.d=+m[0],l+m[0].length):-1}function Vi(t,y,l){var m=Dt.exec(y.slice(l,l+3));return m?(t.m=0,t.d=+m[0],l+m[0].length):-1}function Ha(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.H=+m[0],l+m[0].length):-1}function Na(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.M=+m[0],l+m[0].length):-1}function Wa(t,y,l){var m=Dt.exec(y.slice(l,l+2));return m?(t.S=+m[0],l+m[0].length):-1}function mi(t,y,l){var m=Dt.exec(y.slice(l,l+3));return m?(t.L=+m[0],l+m[0].length):-1}function eo(t,y,l){var m=Dt.exec(y.slice(l,l+6));return m?(t.L=Math.floor(m[0]/1e3),l+m[0].length):-1}function Lo(t,y,l){var m=Zt.exec(y.slice(l,l+1));return m?l+m[0].length:-1}function po(t,y,l){var m=Dt.exec(y.slice(l));return m?(t.Q=+m[0],l+m[0].length):-1}function Wi(t,y,l){var m=Dt.exec(y.slice(l));return m?(t.s=+m[0],l+m[0].length):-1}function Oo(t,y){return Jt(t.getDate(),y,2)}function as(t,y){return Jt(t.getHours(),y,2)}function pu(t,y){return Jt(t.getHours()%12||12,y,2)}function gu(t,y){return Jt(1+_l.count(_o(t),t),y,3)}function Sl(t,y){return Jt(t.getMilliseconds(),y,3)}function ul(t,y){return Sl(t,y)+"000"}function X(t,y){return Jt(t.getMonth()+1,y,2)}function k(t,y){return Jt(t.getMinutes(),y,2)}function F(t,y){return Jt(t.getSeconds(),y,2)}function $(t){var y=t.getDay();return y===0?7:y}function G(t,y){return Jt(Es.count(_o(t)-1,t),y,2)}function ee(t){var y=t.getDay();return y>=4||y===0?qu(t):qu.ceil(t)}function ce(t,y){return t=ee(t),Jt(qu.count(_o(t),t)+(_o(t).getDay()===4),y,2)}function fe(t){return t.getDay()}function Pe(t,y){return Jt(al.count(_o(t)-1,t),y,2)}function Ie(t,y){return Jt(t.getFullYear()%100,y,2)}function ke(t,y){return t=ee(t),Jt(t.getFullYear()%100,y,2)}function Ge(t,y){return Jt(t.getFullYear()%1e4,y,4)}function Je(t,y){var l=t.getDay();return t=l>=4||l===0?qu(t):qu.ceil(t),Jt(t.getFullYear()%1e4,y,4)}function vt(t){var y=t.getTimezoneOffset();return(y>0?"-":(y*=-1,"+"))+Jt(y/60|0,"0",2)+Jt(y%60,"0",2)}function _t(t,y){return Jt(t.getUTCDate(),y,2)}function Rt(t,y){return Jt(t.getUTCHours(),y,2)}function Pt(t,y){return Jt(t.getUTCHours()%12||12,y,2)}function Gt(t,y){return Jt(1+bn.count(Ct(t),t),y,3)}function ur(t,y){return Jt(t.getUTCMilliseconds(),y,3)}function hr(t,y){return ur(t,y)+"000"}function nn(t,y){return Jt(t.getUTCMonth()+1,y,2)}function Yr(t,y){return Jt(t.getUTCMinutes(),y,2)}function Tn(t,y){return Jt(t.getUTCSeconds(),y,2)}function In(t){var y=t.getUTCDay();return y===0?7:y}function si(t,y){return Jt(ga.count(Ct(t)-1,t),y,2)}function ni(t){var y=t.getUTCDay();return y>=4||y===0?Et(t):Et.ceil(t)}function Ci(t,y){return t=ni(t),Jt(Et.count(Ct(t),t)+(Ct(t).getUTCDay()===4),y,2)}function Ji(t){return t.getUTCDay()}function ha(t,y){return Jt(ao.count(Ct(t)-1,t),y,2)}function ya(t,y){return Jt(t.getUTCFullYear()%100,y,2)}function to(t,y){return t=ni(t),Jt(t.getUTCFullYear()%100,y,2)}function wo(t,y){return Jt(t.getUTCFullYear()%1e4,y,4)}function ta(t,y){var l=t.getUTCDay();return t=l>=4||l===0?Et(t):Et.ceil(t),Jt(t.getUTCFullYear()%1e4,y,4)}function Ka(){return"+0000"}function Ga(){return"%"}function ua(t){return+t}function Xa(t){return Math.floor(+t/1e3)}var Ea,ro,Co,iu,$s;Eu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Eu(t){return Ea=tt(t),ro=Ea.format,Co=Ea.parse,iu=Ea.utcFormat,$s=Ea.utcParse,Ea}var Ds=1e3,qs=Ds*60,vl=qs*60,Xu=vl*24,pc=Xu*7,Rc=Xu*30,Ll=Xu*365;function dc(t){return new Date(t)}function _f(t){return t instanceof Date?+t:+new Date(+t)}function bf(t,y,l,m,a,T,R,U,Y){var oe=zu(qa,qa),me=oe.invert,Ce=oe.domain,Ve=Y(".%L"),ut=Y(":%S"),Ft=Y("%I:%M"),Nt=Y("%I %p"),vr=Y("%a %d"),_r=Y("%b %d"),Sr=Y("%B"),cn=Y("%Y"),Bn=[[R,1,Ds],[R,5,5*Ds],[R,15,15*Ds],[R,30,30*Ds],[T,1,qs],[T,5,5*qs],[T,15,15*qs],[T,30,30*qs],[a,1,vl],[a,3,3*vl],[a,6,6*vl],[a,12,12*vl],[m,1,Xu],[m,2,2*Xu],[l,1,pc],[y,1,Rc],[y,3,3*Rc],[t,1,Ll]];function Kn(vn){return(R(vn)<vn?Ve:T(vn)<vn?ut:a(vn)<vn?Ft:m(vn)<vn?Nt:y(vn)<vn?l(vn)<vn?vr:_r:t(vn)<vn?Sr:cn)(vn)}function wn(vn,ti,Mi,Ki){if(vn==null&&(vn=10),typeof vn=="number"){var Ii=Math.abs(Mi-ti)/vn,xa=Qe(function(La){return La[2]}).right(Bn,Ii);xa===Bn.length?(Ki=Mt(ti/Ll,Mi/Ll,vn),vn=t):xa?(xa=Bn[Ii/Bn[xa-1][2]<Bn[xa][2]/Ii?xa-1:xa],Ki=xa[1],vn=xa[0]):(Ki=Math.max(Mt(ti,Mi,vn),1),vn=U)}return Ki==null?vn:vn.every(Ki)}return oe.invert=function(vn){return new Date(me(vn))},oe.domain=function(vn){return arguments.length?Ce(Gr.call(vn,_f)):Ce().map(dc)},oe.ticks=function(vn,ti){var Mi=Ce(),Ki=Mi[0],Ii=Mi[Mi.length-1],xa=Ii<Ki,La;return xa&&(La=Ki,Ki=Ii,Ii=La),La=wn(vn,Ki,Ii,ti),La=La?La.range(Ki,Ii+1):[],xa?La.reverse():La},oe.tickFormat=function(vn,ti){return ti==null?Kn:Y(ti)},oe.nice=function(vn,ti){var Mi=Ce();return(vn=wn(vn,Mi[0],Mi[Mi.length-1],ti))?Ce(Is(Mi,vn)):oe},oe.copy=function(){return Bu(oe,bf(t,y,l,m,a,T,R,U,Y))},oe}var Ic=function(){return Ro.apply(bf(_o,ko,Es,_l,gs,Ht,ln,li,ro).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Kc=Ba(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,y){t.setUTCMonth(t.getUTCMonth()+y)},function(t,y){return y.getUTCMonth()-t.getUTCMonth()+(y.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),kc=Kc,zc=Kc.range,af=Ba(function(t){t.setUTCMinutes(0,0,0)},function(t,y){t.setTime(+t+y*us)},function(t,y){return(y-t)/us},function(t){return t.getUTCHours()}),Gl=af,ll=af.range,ac=Ba(function(t){t.setUTCSeconds(0,0)},function(t,y){t.setTime(+t+y*As)},function(t,y){return(y-t)/As},function(t){return t.getUTCMinutes()}),of=ac,Lc=ac.range,cl=function(){return Ro.apply(bf(Ct,kc,ga,bn,Gl,of,ln,li,iu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function fl(){var t=0,y=1,l,m,a,T,R=qa,U=!1,Y;function oe(me){return isNaN(me=+me)?Y:R(a===0?.5:(me=(T(me)-l)*a,U?Math.max(0,Math.min(1,me)):me))}return oe.domain=function(me){return arguments.length?(l=T(t=+me[0]),m=T(y=+me[1]),a=l===m?0:1/(m-l),oe):[t,y]},oe.clamp=function(me){return arguments.length?(U=!!me,oe):U},oe.interpolator=function(me){return arguments.length?(R=me,oe):R},oe.unknown=function(me){return arguments.length?(Y=me,oe):Y},function(me){return T=me,l=me(t),m=me(y),a=l===m?0:1/(m-l),oe}}function Su(t,y){return y.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Xl(){var t=xs(fl()(qa));return t.copy=function(){return Su(t,Xl())},So.apply(t,arguments)}function ql(){var t=ar(fl()).domain([1,10]);return t.copy=function(){return Su(t,ql()).base(t.base())},So.apply(t,arguments)}function Dc(){var t=on(fl());return t.copy=function(){return Su(t,Dc()).constant(t.constant())},So.apply(t,arguments)}function fh(){var t=ia(fl());return t.copy=function(){return Su(t,fh()).exponent(t.exponent())},So.apply(t,arguments)}function wh(){return fh.apply(null,arguments).exponent(.5)}function xf(){var t=[],y=qa;function l(m){if(!isNaN(m=+m))return y((zr(t,m)-1)/(t.length-1))}return l.domain=function(m){if(!arguments.length)return t.slice();t=[];for(var a=0,T=m.length,R;a<T;++a)R=m[a],R!=null&&!isNaN(R=+R)&&t.push(R);return t.sort(Tt),l},l.interpolator=function(m){return arguments.length?(y=m,l):y},l.copy=function(){return xf(y).domain(t)},So.apply(l,arguments)}function gc(){var t=0,y=.5,l=1,m,a,T,R,U,Y=qa,oe,me=!1,Ce;function Ve(ut){return isNaN(ut=+ut)?Ce:(ut=.5+((ut=+oe(ut))-a)*(ut<a?R:U),Y(me?Math.max(0,Math.min(1,ut)):ut))}return Ve.domain=function(ut){return arguments.length?(m=oe(t=+ut[0]),a=oe(y=+ut[1]),T=oe(l=+ut[2]),R=m===a?0:.5/(a-m),U=a===T?0:.5/(T-a),Ve):[t,y,l]},Ve.clamp=function(ut){return arguments.length?(me=!!ut,Ve):me},Ve.interpolator=function(ut){return arguments.length?(Y=ut,Ve):Y},Ve.unknown=function(ut){return arguments.length?(Ce=ut,Ve):Ce},function(ut){return oe=ut,m=ut(t),a=ut(y),T=ut(l),R=m===a?0:.5/(a-m),U=a===T?0:.5/(T-a),Ve}}function Rh(){var t=xs(gc()(qa));return t.copy=function(){return Su(t,Rh())},So.apply(t,arguments)}function jf(){var t=ar(gc()).domain([.1,1,10]);return t.copy=function(){return Su(t,jf()).base(t.base())},So.apply(t,arguments)}function Vc(){var t=on(gc());return t.copy=function(){return Su(t,Vc()).constant(t.constant())},So.apply(t,arguments)}function oc(){var t=ia(gc());return t.copy=function(){return Su(t,oc()).exponent(t.exponent())},So.apply(t,arguments)}function tp(){return oc.apply(null,arguments).exponent(.5)}function Cd(t){var y,l=[];function m(a){return a==null?y:a}return m.invert=m,m.domain=m.range=function(a){return a?(l=a,a):l},m.unknown=function(a){return a?(y=a,a):y},m.copy=function(){return Cd(t).unknown(y)},m}var sc,Pd=n.N.isNil,rp=n.N.isString,np=n.N.uniq,Kh=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,ip=(sc={},Object(d.a)(sc,S.l.LINEAR,il),Object(d.a)(sc,S.l.POWER,ca),Object(d.a)(sc,S.l.LOG,gr),Object(d.a)(sc,S.l.IDENTITY,Cd),Object(d.a)(sc,S.l.SEQUENTIAL,Xl),Object(d.a)(sc,S.l.TIME,Ic),Object(d.a)(sc,S.l.QUANTILE,ma),Object(d.a)(sc,S.l.QUANTIZE,Ia),Object(d.a)(sc,S.l.THRESHOLD,Fa),Object(d.a)(sc,S.l.CAT,Qn),Object(d.a)(sc,S.l.DIVERGING,Rh),sc),Jh=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"scaleOptions",{})}return Object(v.a)(t,[{key:"apply",value:function(l,m){var a=this,T=m.styleAttributeService,R=this;l.hooks.init.tapPromise("FeatureScalePlugin",Object(ie.a)(Object(K.a)().mark(function U(){var Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(l.log(S.f.ScaleInitStart,S.g.INIT),R.scaleOptions=l.getScaleOptions(),oe=T.getLayerStyleAttributes(),me=(Y=l.getSource())===null||Y===void 0?void 0:Y.data.dataArray,!(Array.isArray(me)&&me.length===0)){Ve.next=8;break}return Ve.abrupt("return");case 8:R.caculateScalesForAttributes(oe||[],me);case 9:l.log(S.f.ScaleInitEnd,S.g.INIT);case 10:case"end":return Ve.stop()}},U)}))),l.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var U=Object(ie.a)(Object(K.a)().mark(function Y(oe){var me,Ce;return Object(K.a)().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(oe){ut.next=2;break}return ut.abrupt("return",oe);case 2:if(l.log(S.f.ScaleInitStart,S.g.UPDATE),R.scaleOptions=l.getScaleOptions(),me=T.getLayerStyleAttributes(),Ce=l.getSource().data.dataArray,!(Array.isArray(Ce)&&Ce.length===0)){ut.next=8;break}return ut.abrupt("return",!0);case 8:return R.caculateScalesForAttributes(me||[],Ce),l.log(S.f.ScaleInitEnd,S.g.UPDATE),l.layerModelNeedUpdate=!0,ut.abrupt("return",!0);case 12:case"end":return ut.stop()}},Y)}));return function(Y){return U.apply(this,arguments)}}()),l.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!l.layerModelNeedUpdate){a.scaleOptions=l.getScaleOptions();var U=T.getLayerStyleAttributes(),Y=l.getSource().data.dataArray;if(!(Array.isArray(Y)&&Y.length===0)&&U){var oe=U.filter(function(me){return me.needRescale});oe.length&&a.caculateScalesForAttributes(oe,Y)}}})}},{key:"isNumber",value:function(l){return!isNaN(parseFloat(l))&&isFinite(l)}},{key:"caculateScalesForAttributes",value:function(l,m){var a=this;l.forEach(function(T){if(T.scale){var R=T.scale,U=T.scale.field;R.names=a.parseFields(Pd(U)?[]:U);var Y=[];R.names.forEach(function(oe){var me;Y.push(a.createScale(oe,T.name,(me=T.scale)===null||me===void 0?void 0:me.values,m))}),Y.some(function(oe){return oe.type===S.o.VARIABLE})?(R.type=S.o.VARIABLE,Y.forEach(function(oe){if(!R.callback&&R.values!=="text"){var me;switch((me=oe.option)===null||me===void 0?void 0:me.type){case S.l.LOG:case S.l.LINEAR:case S.l.POWER:if(R.values&&R.values.length>2){var Ce=oe.scale.ticks(R.values.length);oe.scale.domain(Ce)}R.values?oe.scale.range(R.values):oe.scale.range(oe.option.domain);break;case S.l.QUANTILE:case S.l.QUANTIZE:case S.l.THRESHOLD:oe.scale.range(R.values);break;case S.l.IDENTITY:break;case S.l.CAT:R.values?oe.scale.range(R.values):oe.scale.range(oe.option.domain);break;case S.l.DIVERGING:case S.l.SEQUENTIAL:oe.scale.interpolator(ft(R.values));break}}if(R.values==="text"){var Ve;oe.scale.range((Ve=oe.option)===null||Ve===void 0?void 0:Ve.domain)}})):(R.type=S.o.CONSTANT,R.defaultValues=Y.map(function(oe,me){return oe.scale(R.names[me])})),R.scalers=Y.map(function(oe){return{field:oe.field,func:oe.scale,option:oe.option}}),T.needRescale=!1}})}},{key:"parseFields",value:function(l){return Array.isArray(l)?l:rp(l)?l.split("*"):[l]}},{key:"createScale",value:function(l,m,a,T){var R,U,Y=this.scaleOptions[m]&&((R=this.scaleOptions[m])===null||R===void 0?void 0:R.field)===l?this.scaleOptions[m]:this.scaleOptions[l],oe={field:l,scale:void 0,type:S.o.VARIABLE,option:Y};if(!T||!T.length)return Y&&Y.type?oe.scale=this.createDefaultScale(Y):(oe.scale=Qn([l]),oe.type=S.o.CONSTANT),oe;var me=(U=T.find(function(ut){return!Pd(ut[l])}))===null||U===void 0?void 0:U[l];if(this.isNumber(l)||Pd(me)&&!Y)oe.scale=Qn([l]),oe.type=S.o.CONSTANT;else{var Ce=Y&&Y.type||this.getDefaultType(me);a==="text"&&(Ce=S.l.CAT),a===void 0&&(Ce=S.l.IDENTITY);var Ve=this.createScaleConfig(Ce,l,Y,T);oe.scale=this.createDefaultScale(Ve),oe.option=Ve}return oe}},{key:"getDefaultType",value:function(l){var m=S.l.LINEAR;return typeof l=="string"&&(m=Kh.test(l)?S.l.TIME:S.l.CAT),m}},{key:"createScaleConfig",value:function(l,m,a,T){var R={type:l},U=[];if(l===S.l.QUANTILE){var Y=new Map;T==null||T.forEach(function(Ce){Y.set(Ce._id,Ce[m])}),U=Array.from(Y.values())}else U=(T==null?void 0:T.map(function(Ce){return Ce[m]}))||[];if(a!=null&&a.domain)R.domain=a==null?void 0:a.domain;else if(l===S.l.CAT||l===S.l.IDENTITY)R.domain=np(U);else if(l===S.l.QUANTILE)R.domain=U;else if(l===S.l.DIVERGING){var oe=ve(U),me=(a==null?void 0:a.neutral)!==void 0?a==null?void 0:a.neutral:(oe[0]+oe[1])/2;R.domain=[oe[0],me,oe[1]]}else R.domain=ve(U);return Object(i.a)(Object(i.a)({},R),a)}},{key:"createDefaultScale",value:function(l){var m=l.type,a=l.domain,T=l.unknown,R=l.clamp,U=l.nice,Y=ip[m]();return a&&Y.domain&&Y.domain(a),T&&Y.unknown(T),R!==void 0&&Y.clamp&&Y.clamp(R),U!==void 0&&Y.nice&&Y.nice(U),Y}}]),t}(),sv=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l){l.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var m=l.animateStatus;m&&l.models.forEach(function(a){a.addUniforms(Object(i.a)({},l.layerModel.getAnimateUniforms()))})})}}]),t}(),Bf=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l){l.hooks.afterInit.tap("LayerMaskPlugin",function(){var m=l.getLayerConfig(),a=m.maskLayers,T=m.enableMask;!l.tileLayer&&a&&a.length>0&&l.updateLayerConfig({mask:T})})}}]),t}(),Ih=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"build",value:function(l){return Object(ie.a)(Object(K.a)().mark(function m(){return Object(K.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return l.prepareBuildModel(),T.next=3,l.buildModels();case 3:case"end":return T.stop()}},m)}))()}},{key:"initLayerModel",value:function(l){var m=this;return Object(ie.a)(Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,m.build(l);case 2:l.styleNeedUpdate=!1;case 3:case"end":return R.stop()}},a)}))()}},{key:"prepareLayerModel",value:function(l){var m=this;return Object(ie.a)(Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,m.build(l);case 2:l.styleNeedUpdate=!1;case 3:case"end":return R.stop()}},a)}))()}},{key:"apply",value:function(l){var m=this;l.hooks.init.tapPromise("LayerModelPlugin",Object(ie.a)(Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!l.getSource().isTile){R.next=3;break}return l.prepareBuildModel(),R.abrupt("return");case 3:return l.log(S.f.BuildModelStart,S.g.INIT),R.next=6,m.initLayerModel(l);case 6:l.log(S.f.BuildModelEnd,S.g.INIT);case 7:case"end":return R.stop()}},a)}))),l.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var a=Object(ie.a)(Object(K.a)().mark(function T(R){return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(R){Y.next=2;break}return Y.abrupt("return",!1);case 2:if(!l.getSource().isTile){Y.next=4;break}return Y.abrupt("return",!1);case 4:return l.log(S.f.BuildModelStart,S.g.UPDATE),Y.next=7,m.prepareLayerModel(l);case 7:return l.log(S.f.BuildModelEnd,S.g.UPDATE),Y.abrupt("return",!0);case 9:case"end":return Y.stop()}},T)}));return function(T){return a.apply(this,arguments)}}())}}]),t}(),ap=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l){l.hooks.afterInit.tap("LayerStylePlugin",function(){var m=l.getLayerConfig(),a=m.autoFit,T=m.fitBoundsOptions;a&&l.fitBounds(T),l.styleNeedUpdate=!1})}}]),t}(),op=["type"],uv={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},sp={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},up={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},wd={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function Qh(t){var y={u_DirectionalLights:new Array(3).fill(Object(i.a)({},up)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Object(i.a)({},wd)),u_NumOfSpotLights:0};return(!t||!t.length)&&(t=[sp]),t.forEach(function(l){var m=l.type,a=m===void 0?"directional":m,T=Object(V.a)(l,op),R=uv[a].lights,U=uv[a].num,Y=y[U];y[R][Y]=Object(i.a)(Object(i.a)({},y[R][Y]),T),y[U]++}),y}var hh=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l){l.hooks.beforeRender.tap("LightingPlugin",function(){var m=l.getLayerConfig(),a=m.enableLighting;a&&l.models.forEach(function(T){return T.addUniforms(Object(i.a)({},Qh()))})})}}]),t}();function Lh(t){return t.map(function(y){return typeof y=="string"&&(y=[y,{}]),y})}function Ef(t,y,l,m){var a=t.multiPassRenderer;return a.add(m("render")),Lh(y).forEach(function(T){var R=Object(w.a)(T,2),U=R[0],Y=R[1];a.add(l(U),Y)}),a.add(l("copy")),a}var qh=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"enabled",void 0)}return Object(v.a)(t,[{key:"apply",value:function(l,m){var a=this,T=m.rendererService,R=m.postProcessingPassFactory,U=m.normalPassFactory;l.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var Y=l.getLayerConfig(),oe=Y.enableMultiPassRenderer,me=Y.passes,Ce=me===void 0?[]:me;a.enabled=!!oe&&l.getLayerConfig().enableMultiPassRenderer!==!1,a.enabled&&(l.multiPassRenderer=Ef(l,Ce,R,U),l.multiPassRenderer.setRenderFlag(!0))}),l.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(a.enabled){var Y=T.getViewportSize(),oe=Y.width,me=Y.height;l.multiPassRenderer.resize(oe,me)}})}}]),t}(),fu={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function Yf(t){switch(t){case"rotation":return{name:"Rotation",type:S.a.Attribute,descriptor:{name:"a_Rotation",shaderLocation:fu.ROTATION,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(l){var m=l.rotation,a=m===void 0?0:m;return Array.isArray(a)?[a[0]]:[a]}}};case"stroke":return{name:"stroke",type:S.a.Attribute,descriptor:{name:"a_Stroke",shaderLocation:fu.STROKE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(l){var m=l.stroke,a=m===void 0?[1,1,1,1]:m;return a}}};case"opacity":return{name:"opacity",type:S.a.Attribute,descriptor:{name:"a_Opacity",shaderLocation:fu.OPACITY,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(l){var m=l.opacity,a=m===void 0?1:m;return[a]}}};case"offsets":return{name:"offsets",type:S.a.Attribute,descriptor:{name:"a_Offsets",shaderLocation:fu.OFFSETS,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(l){var m=l.offsets;return m}}};default:return}}var ed=n.N.isNumber,Wc={NONE:0,ENCODE:1,HIGHLIGHT:2},$f=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"pickingUniformMap",void 0)}return Object(v.a)(t,[{key:"pickOption2Array",value:function(){var l=[];return this.pickingUniformMap.forEach(function(m){ed(m)?l.push(m):l.push.apply(l,Object(J.a)(m))}),l}},{key:"updatePickOption",value:function(l,m){var a=this;Object.keys(l).forEach(function(Y){a.pickingUniformMap.set(Y,l[Y])});var T=m.getLayerConfig().pickingBuffer||0,R=Number(m.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",T),this.pickingUniformMap.set("u_shaderPick",R);var U=m.getPickingUniformBuffer();U.subData({offset:0,data:this.pickOption2Array()})}},{key:"apply",value:function(l,m){var a=this,T=m.styleAttributeService;this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),l.hooks.init.tapPromise("PixelPickingPlugin",function(){var R=l.getLayerConfig(),U=R.enablePicking;T.registerStyleAttribute({name:"pickingColor",type:S.a.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:fu.PICKING_COLOR,buffer:{data:[],type:S.s.FLOAT},size:3,update:function(oe){var me=oe.id;return U?Object(n.r)(me):[0,0,0]}}})}),l.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var R=l.getLayerConfig(),U=R.enablePicking;U&&l.isVisible()&&(a.updatePickOption({u_PickingStage:Wc.ENCODE},l),l.models.forEach(function(Y){return Y.addUniforms({u_PickingStage:Wc.ENCODE})}))}),l.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var R=l.getLayerConfig(),U=R.enablePicking;U&&l.isVisible()&&(a.updatePickOption({u_PickingStage:Wc.HIGHLIGHT},l),l.models.forEach(function(Y){return Y.addUniforms({u_PickingStage:Wc.HIGHLIGHT})}))}),l.hooks.beforeHighlight.tap("PixelPickingPlugin",function(R){var U=l.getLayerConfig(),Y=U.highlightColor,oe=U.activeMix,me=oe===void 0?0:oe,Ce=typeof Y=="string"?Object(n.R)(Y):Y||[1,0,0,1];l.updateLayerConfig({pickedFeatureID:Object(n.p)(new Uint8Array(R))});var Ve={u_PickingStage:Wc.HIGHLIGHT,u_PickingColor:R,u_HighlightColor:Ce.map(function(ut){return ut*255}),u_activeMix:me};a.updatePickOption(Ve,l),l.models.forEach(function(ut){return ut.addUniforms(Ve)})}),l.hooks.beforeSelect.tap("PixelPickingPlugin",function(R){var U=l.getLayerConfig(),Y=U.selectColor,oe=U.selectMix,me=oe===void 0?0:oe,Ce=typeof Y=="string"?Object(n.R)(Y):Y||[1,0,0,1];l.updateLayerConfig({pickedFeatureID:Object(n.p)(new Uint8Array(R))});var Ve={u_PickingStage:Wc.HIGHLIGHT,u_PickingColor:R,u_HighlightColor:Ce.map(function(ut){return ut*255}),u_activeMix:me,u_CurrentSelectedId:R,u_SelectColor:Ce.map(function(ut){return ut*255})};a.updatePickOption(Ve,l),l.models.forEach(function(ut){return ut.addUniforms(Ve)})})}}]),t}(),Ff=["mvt","geojsonvt","testTile"];function dh(t){var y=t.getSource();return Ff.includes(y.parser.type)}var vh=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l,m){var a=this,T=m.styleAttributeService;l.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){dh(l)||a.registerBuiltinAttributes(T,l)})}},{key:"registerBuiltinAttributes",value:function(l,m){if(m.type==="MaskLayer"){this.registerPositionAttribute(l);return}this.registerPositionAttribute(l),this.registerColorAttribute(l)}},{key:"registerPositionAttribute",value:function(l){l.registerStyleAttribute({name:"position",type:S.a.Attribute,descriptor:{name:"a_Position",shaderLocation:fu.POSITION,buffer:{data:[],type:S.s.FLOAT},size:3,update:function(a,T,R){return R.length===2?[R[0],R[1],0]:[R[0],R[1],R[2]]}}})}},{key:"registerColorAttribute",value:function(l){l.registerStyleAttribute({name:"color",type:S.a.Attribute,descriptor:{name:"a_Color",shaderLocation:fu.COLOR,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(a){var T=a.color;return!T||!T.length?[1,1,1,1]:T}}})}}]),t}(),Sf=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"cameraService",void 0),Object(r.a)(this,"coordinateSystemService",void 0),Object(r.a)(this,"rendererService",void 0),Object(r.a)(this,"mapService",void 0),Object(r.a)(this,"layerService",void 0)}return Object(v.a)(t,[{key:"apply",value:function(l,m){var a=this,T=m.rendererService,R=m.mapService,U=m.layerService,Y=m.coordinateSystemService,oe=m.cameraService;this.rendererService=T,this.mapService=R,this.layerService=U,this.coordinateSystemService=Y,this.cameraService=oe;var me;this.rendererService.uniformBuffers[0]||(me=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=me),l.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var Ce=l.getLayerConfig().tileOrigin;a.coordinateSystemService.refresh(Ce);var Ve=a.rendererService.getViewportSize(),ut=Ve.width,Ft=Ve.height,Nt=a.generateUBO(ut,Ft),vr=Nt.data,_r=Nt.uniforms;if(a.layerService.alreadyInRendering&&a.rendererService.uniformBuffers[0]){var Sr=a.rendererService.uniformBuffers[0];Sr.subData({offset:0,data:vr})}var cn=a.rendererService.queryVerdorInfo();cn==="WebGL1"&&l.models.forEach(function(Bn){Bn.addUniforms(Object(i.a)(Object(i.a)({},_r),{},{u_PickingBuffer:l.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(l.getShaderPickStat())}))})})}},{key:"generateUBO",value:function(l,m){var a,T=this.cameraService.getProjectionMatrix(),R=this.cameraService.getViewMatrix(),U=this.cameraService.getViewProjectionMatrix(),Y=this.cameraService.getModelMatrix(),oe=this.coordinateSystemService.getViewportCenterProjection(),me=this.coordinateSystemService.getPixelsPerDegree(),Ce=this.cameraService.getZoom(),Ve=this.coordinateSystemService.getPixelsPerDegree2(),ut=this.cameraService.getZoomScale(),Ft=this.coordinateSystemService.getPixelsPerMeter(),Nt=this.coordinateSystemService.getCoordinateSystem(),vr=this.cameraService.getCameraPosition(),_r=window.devicePixelRatio,Sr=this.coordinateSystemService.getViewportCenter(),cn=[l,m],Bn=this.cameraService.getFocalDistance(),Kn=[].concat(Object(J.a)(R),Object(J.a)(T),Object(J.a)(U),Object(J.a)(Y),Object(J.a)(oe),Object(J.a)(me),[Ce],Object(J.a)(Ve),[ut],Object(J.a)(Ft),[Nt],Object(J.a)(vr),[_r],Object(J.a)(Sr),cn,[Bn,0,0,0]);return{data:Kn,uniforms:(a={},Object(d.a)(a,S.c.ProjectionMatrix,T),Object(d.a)(a,S.c.ViewMatrix,R),Object(d.a)(a,S.c.ViewProjectionMatrix,U),Object(d.a)(a,S.c.Zoom,Ce),Object(d.a)(a,S.c.ZoomScale,ut),Object(d.a)(a,S.c.FocalDistance,Bn),Object(d.a)(a,S.c.CameraPosition,vr),Object(d.a)(a,S.e.CoordinateSystem,Nt),Object(d.a)(a,S.e.ViewportCenter,Sr),Object(d.a)(a,S.e.ViewportCenterProjection,oe),Object(d.a)(a,S.e.PixelsPerDegree,me),Object(d.a)(a,S.e.PixelsPerDegree2,Ve),Object(d.a)(a,S.e.PixelsPerMeter,Ft),Object(d.a)(a,"u_ViewportSize",cn),Object(d.a)(a,"u_ModelMatrix",Y),Object(d.a)(a,"u_DevicePixelRatio",_r),a)}}}]),t}(),Zf=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l){l.hooks.beforeRender.tap("UpdateModelPlugin",function(){l.layerModel&&l.layerModel.needUpdate().then(function(m){m&&l.renderLayers()})}),l.hooks.afterRender.tap("UpdateModelPlugin",function(){l.layerModelNeedUpdate=!1})}}]),t}(),Kf=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"apply",value:function(l,m){var a=this,T=m.styleAttributeService;l.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){a.initStyleAttribute(l,{styleAttributeService:T})}),l.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){l.layerModelNeedUpdate||l.inited&&a.updateStyleAttribute(l,{styleAttributeService:T})})}},{key:"updateStyleAttribute",value:function(l,m){var a=m.styleAttributeService,T=a.getLayerStyleAttributes()||[],R=a.getLayerStyleAttribute("filter");if(R&&R.needRegenerateVertices){l.layerModelNeedUpdate=!0,T.forEach(function(U){return U.needRegenerateVertices=!1});return}T.filter(function(U){return U.needRegenerateVertices}).forEach(function(U){a.updateAttributeByFeatureRange(U.name,l.getEncodedData(),U.featureRange.startIndex,U.featureRange.endIndex,l),U.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(l,m){var a=m.styleAttributeService,T=a.getLayerStyleAttributes()||[];T.filter(function(R){return R.needRegenerateVertices}).forEach(function(R){a.updateAttributeByFeatureRange(R.name,l.getEncodedData(),R.featureRange.startIndex,R.featureRange.endIndex),R.needRegenerateVertices=!1})}}]),t}();function lv(){return[new q,new vh,new Jh,new te,new ap,new Bf,new Kf,new Zf,new qh,new Sf,new sv,new hh,new $f,new Ih]}var mc,Nf=(mc={},Object(d.a)(mc,S.b.additive,{enable:!0,func:{srcRGB:S.s.ONE,dstRGB:S.s.ONE,srcAlpha:1,dstAlpha:1}}),Object(d.a)(mc,S.b.none,{enable:!1}),Object(d.a)(mc,S.b.normal,{enable:!0,func:{srcRGB:S.s.SRC_ALPHA,dstRGB:S.s.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),Object(d.a)(mc,S.b.subtractive,{enable:!0,func:{srcRGB:S.s.ONE,dstRGB:S.s.ONE,srcAlpha:S.s.ZERO,dstAlpha:S.s.ONE_MINUS_SRC_COLOR},equation:{rgb:S.s.FUNC_SUBTRACT,alpha:S.s.FUNC_SUBTRACT}}),Object(d.a)(mc,S.b.max,{enable:!0,func:{srcRGB:S.s.ONE,dstRGB:S.s.ONE},equation:{rgb:S.s.MAX_EXT}}),Object(d.a)(mc,S.b.min,{enable:!0,func:{srcRGB:S.s.ONE,dstRGB:S.s.ONE},equation:{rgb:S.s.MIN_EXT}}),mc),td=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"layer",void 0),this.layer=y}return Object(v.a)(t,[{key:"pickRender",value:function(l){var m=this.layer.getContainer(),a=m.layerService,T=this.layer;if(T.tileLayer)return T.tileLayer.pickRender(l);T.hooks.beforePickingEncode.call(),a.renderTileLayerMask(T),T.renderModels({ispick:!0}),T.hooks.afterPickingEncode.call()}},{key:"pick",value:function(l,m){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U;return Object(K.a)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(R=a.layer.getContainer(),U=R.pickingService,l.type!=="RasterLayer"){oe.next=4;break}return oe.abrupt("return",a.pickRasterLayer(l,m));case 4:return a.pickRender(m),oe.abrupt("return",U.pickFromPickingFBO(l,m));case 6:case"end":return oe.stop()}},T)}))()}},{key:"pickRasterLayer",value:function(l,m,a){var T=this.layer.getContainer(),R=T.pickingService,U=T.mapService,Y=this.layer.getSource().extent,oe=Object(n.K)(m.lngLat,Y),me={x:m.x,y:m.y,type:m.type,lngLat:m.lngLat,target:m,rasterValue:null},Ce=a||l;if(oe){var Ve=this.readRasterValue(l,Y,U,m.x,m.y);return me.rasterValue=Ve,R.triggerHoverOnLayer(Ce,me),!0}else return me.type=m.type==="mousemove"?"mouseout":"un"+m.type,R.triggerHoverOnLayer(Ce,Object(i.a)(Object(i.a)({},me),{},{type:"unpick"})),R.triggerHoverOnLayer(Ce,me),!1}},{key:"readRasterValue",value:function(l,m,a,T,R){var U=l.getSource().data.dataArray[0],Y=Object(w.a)(m,4),oe=Y[0],me=oe===void 0?0:oe,Ce=Y[1],Ve=Ce===void 0?0:Ce,ut=Y[2],Ft=ut===void 0?10:ut,Nt=Y[3],vr=Nt===void 0?-10:Nt,_r=a.lngLatToContainer([me,Ve]),Sr=a.lngLatToContainer([Ft,vr]),cn=Sr.x-_r.x,Bn=_r.y-Sr.y,Kn=[(T-_r.x)/cn,(R-Sr.y)/Bn],wn=U.width||1,vn=U.height||1,ti=Math.floor(Kn[0]*wn),Mi=Math.floor(Kn[1]*vn),Ki=Math.max(0,Mi-1)*wn+ti,Ii=U.data[Ki];return Ii}},{key:"selectFeature",value:function(l){var m=this.layer,a=Object(w.a)(l,3),T=a[0],R=a[1],U=a[2];m.hooks.beforeSelect.call([T,R,U])}},{key:"highlightPickedFeature",value:function(l){var m=Object(w.a)(l,3),a=m[0],T=m[1],R=m[2];this.layer.hooks.beforeHighlight.call([a,T,R])}},{key:"getFeatureById",value:function(l){return this.layer.getSource().getFeatureById(l)}}]),t}(),Rd=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"layer",void 0),Object(r.a)(this,"rendererService",void 0),Object(r.a)(this,"colorTexture",void 0),Object(r.a)(this,"key",void 0),this.layer=y;var l=this.layer.getContainer();this.rendererService=l.rendererService}return Object(v.a)(t,[{key:"getColorTexture",value:function(l,m){var a=this.getTextureKey(l,m);return this.key===a?this.colorTexture:(this.createColorTexture(l,m),this.key=a,this.colorTexture)}},{key:"createColorTexture",value:function(l,m){var a=this.rendererService.createTexture2D,T=this.getColorRampBar(l,m),R=a({data:new Uint8Array(T.data),width:T.width,height:T.height,flipY:!1,unorm:!0});return this.colorTexture=R,R}},{key:"setColorTexture",value:function(l,m,a){this.key=this.getTextureKey(m,a),this.colorTexture=l}},{key:"destroy",value:function(){var l;(l=this.colorTexture)===null||l===void 0||l.destroy()}},{key:"getColorRampBar",value:function(l,m){switch(l.type){case"cat":return Object(n.v)(l);case"quantize":return Object(n.z)(l);case"custom":return Object(n.x)(l,m);case"linear":return Object(n.y)(l,m);default:return Object(n.w)(l)}}},{key:"getTextureKey",value:function(l,m){var a;return"".concat(l.colors.join("_"),"_").concat(l==null||(a=l.positions)===null||a===void 0?void 0:a.join("_"),"_").concat(l.type,"_").concat(m==null?void 0:m.join("_"))}}]),t}(),Id=["passes"],Ld=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],jc=n.N.isEqual,Af=n.N.isFunction,Dd=n.N.isNumber,uc=n.N.isObject,cv=n.N.isPlainObject,fv=n.N.isUndefined,Uf=0,kf=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(g.a)(this,l),m=y.call(this),Object(r.a)(Object(p.a)(m),"id","".concat(Uf++)),Object(r.a)(Object(p.a)(m),"name","".concat(Uf)),Object(r.a)(Object(p.a)(m),"parent",void 0),Object(r.a)(Object(p.a)(m),"coordCenter",void 0),Object(r.a)(Object(p.a)(m),"type",void 0),Object(r.a)(Object(p.a)(m),"visible",!0),Object(r.a)(Object(p.a)(m),"zIndex",0),Object(r.a)(Object(p.a)(m),"minZoom",void 0),Object(r.a)(Object(p.a)(m),"maxZoom",void 0),Object(r.a)(Object(p.a)(m),"inited",!1),Object(r.a)(Object(p.a)(m),"layerModelNeedUpdate",!1),Object(r.a)(Object(p.a)(m),"pickedFeatureID",null),Object(r.a)(Object(p.a)(m),"selectedFeatureID",null),Object(r.a)(Object(p.a)(m),"styleNeedUpdate",!1),Object(r.a)(Object(p.a)(m),"rendering",void 0),Object(r.a)(Object(p.a)(m),"forceRender",!1),Object(r.a)(Object(p.a)(m),"clusterZoom",0),Object(r.a)(Object(p.a)(m),"layerType",void 0),Object(r.a)(Object(p.a)(m),"triangulation",void 0),Object(r.a)(Object(p.a)(m),"layerPickService",void 0),Object(r.a)(Object(p.a)(m),"textureService",void 0),Object(r.a)(Object(p.a)(m),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),Object(r.a)(Object(p.a)(m),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),Object(r.a)(Object(p.a)(m),"hooks",{init:new re.a,afterInit:new re.d,beforeRender:new re.d,beforeRenderData:new re.c,afterRender:new re.e,beforePickingEncode:new re.e,afterPickingEncode:new re.e,beforeHighlight:new re.e(["pickedColor"]),afterHighlight:new re.e,beforeSelect:new re.e(["pickedColor"]),afterSelect:new re.e,beforeDestroy:new re.e,afterDestroy:new re.e}),Object(r.a)(Object(p.a)(m),"models",[]),Object(r.a)(Object(p.a)(m),"multiPassRenderer",void 0),Object(r.a)(Object(p.a)(m),"plugins",void 0),Object(r.a)(Object(p.a)(m),"startInit",!1),Object(r.a)(Object(p.a)(m),"sourceOption",void 0),Object(r.a)(Object(p.a)(m),"layerModel",void 0),Object(r.a)(Object(p.a)(m),"shapeOption",void 0),Object(r.a)(Object(p.a)(m),"tileLayer",void 0),Object(r.a)(Object(p.a)(m),"layerChildren",[]),Object(r.a)(Object(p.a)(m),"masks",[]),Object(r.a)(Object(p.a)(m),"configService",S.t),Object(r.a)(Object(p.a)(m),"styleAttributeService",void 0),Object(r.a)(Object(p.a)(m),"layerSource",void 0),Object(r.a)(Object(p.a)(m),"postProcessingPassFactory",void 0),Object(r.a)(Object(p.a)(m),"animateOptions",{enable:!1}),Object(r.a)(Object(p.a)(m),"container",void 0),Object(r.a)(Object(p.a)(m),"encodedData",void 0),Object(r.a)(Object(p.a)(m),"currentPickId",null),Object(r.a)(Object(p.a)(m),"rawConfig",void 0),Object(r.a)(Object(p.a)(m),"needUpdateConfig",void 0),Object(r.a)(Object(p.a)(m),"encodeStyleAttribute",{}),Object(r.a)(Object(p.a)(m),"enableShaderEncodeStyles",[]),Object(r.a)(Object(p.a)(m),"enableDataEncodeStyles",[]),Object(r.a)(Object(p.a)(m),"pendingStyleAttributes",[]),Object(r.a)(Object(p.a)(m),"scaleOptions",{}),Object(r.a)(Object(p.a)(m),"animateStartTime",void 0),Object(r.a)(Object(p.a)(m),"animateStatus",!1),Object(r.a)(Object(p.a)(m),"isDestroyed",!1),Object(r.a)(Object(p.a)(m),"uniformBuffers",[]),Object(r.a)(Object(p.a)(m),"encodeDataLength",0),Object(r.a)(Object(p.a)(m),"sourceEvent",function(){m.dataState.dataSourceNeedUpdate=!0;var T=m.getLayerConfig();T&&T.autoFit&&m.fitBounds(T.fitBoundsOptions);var R=m.layerSource.getSourceCfg().autoRender;R&&setTimeout(function(){m.reRender()},10)}),m.name=a.name||m.id,m.zIndex=a.zIndex||0,m.rawConfig=a,m.masks=a.maskLayers||[],m}return Object(v.a)(l,[{key:"shaderModuleService",get:function(){return this.container.shaderModuleService}},{key:"cameraService",get:function(){return this.container.cameraService}},{key:"coordinateService",get:function(){return this.container.coordinateSystemService}},{key:"iconService",get:function(){return this.container.iconService}},{key:"fontService",get:function(){return this.container.fontService}},{key:"pickingService",get:function(){return this.container.pickingService}},{key:"rendererService",get:function(){return this.container.rendererService}},{key:"layerService",get:function(){return this.container.layerService}},{key:"debugService",get:function(){return this.container.debugService}},{key:"interactionService",get:function(){return this.container.interactionService}},{key:"mapService",get:function(){var a;return(a=this.container)===null||a===void 0?void 0:a.mapService}},{key:"normalPassFactory",get:function(){return this.container.normalPassFactory}},{key:"addMask",value:function(a){this.masks.push(a),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}},{key:"removeMask",value:function(a){var T=this.masks.indexOf(a);T>-1&&this.masks.splice(T,1),this.updateLayerConfig({maskLayers:this.masks})}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(a){this.masks.push(a)}},{key:"removeMaskLayer",value:function(a){var T=this.masks.indexOf(a);T>-1&&this.masks.splice(T,1),a.destroy()}},{key:"getAttribute",value:function(a){return this.styleAttributeService.getLayerStyleAttribute(a)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(a){var T=this;if(Object.keys(a).map(function(U){U in T.rawConfig&&(T.rawConfig[U]=a[U])}),!this.startInit)this.needUpdateConfig=Object(i.a)(Object(i.a)({},this.needUpdateConfig),a);else{var R=this.container.id;this.configService.setLayerConfig(R,this.id,Object(i.a)(Object(i.a)(Object(i.a)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),a)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(a){this.container=a}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(a){return this.plugins.push(a),this}},{key:"init",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve;return Object(K.a)().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:R=a.container.id,a.startInit=!0,a.configService.setLayerConfig(R,a.id,a.rawConfig),a.layerType=a.rawConfig.layerType,U=a.getLayerConfig(),Y=U.enableMultiPassRenderer,oe=U.passes,Y&&oe!==null&&oe!==void 0&&oe.length&&oe.length>0&&a.mapService.on("mapAfterFrameChange",function(){a.renderLayers()}),a.postProcessingPassFactory=a.container.postProcessingPassFactory,a.styleAttributeService=a.container.styleAttributeService,Y&&(a.multiPassRenderer=a.container.multiPassRenderer,a.multiPassRenderer.setLayer(a)),a.pendingStyleAttributes.forEach(function(Nt){var vr=Nt.attributeName,_r=Nt.attributeField,Sr=Nt.attributeValues,cn=Nt.updateOptions;a.styleAttributeService.updateStyleAttribute(vr,{scale:Object(i.a)({field:_r},a.splitValuesAndCallbackInAttribute(Sr,_r?void 0:a.getLayerConfig()[vr]))},cn)}),a.pendingStyleAttributes=[],a.plugins=lv(),me=Object(Re.a)(a.plugins);try{for(me.s();!(Ce=me.n()).done;)Ve=Ce.value,Ve.apply(a,a.container)}catch(Nt){me.e(Nt)}finally{me.f()}return a.layerPickService=new td(a),a.textureService=new Rd(a),a.log(S.f.LayerInitStart),Ft.next=19,a.hooks.init.promise();case 19:a.log(S.f.LayerInitEnd),a.inited=!0,a.emit("inited",{target:a,type:"inited"}),a.emit("add",{target:a,type:"add"}),a.hooks.afterInit.call();case 24:case"end":return Ft.stop()}},T)}))()}},{key:"log",value:function(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init",R;if(!(this.tileLayer||this.isTileLayer)){var U="".concat(this.id,".").concat(T,".").concat(a),Y={id:this.id,type:this.type};(R=this.debugService)===null||R===void 0||R.log(U,Y)}}},{key:"updateModelData",value:function(a){a.attributes&&a.elements?this.models.map(function(T){T.updateAttributesAndElements(a.attributes,a.elements)}):console.warn("data error")}},{key:"setLayerPickService",value:function(a){this.layerPickService=a}},{key:"prepareBuildModel",value:function(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});var a=this.getLayerConfig(),T=a.animateOption;T!=null&&T.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(a,T,R){return this.updateStyleAttribute("color",a,T,R),this}},{key:"texture",value:function(a,T,R){return this.updateStyleAttribute("texture",a,T,R),this}},{key:"rotate",value:function(a,T,R){return this.updateStyleAttribute("rotate",a,T,R),this}},{key:"size",value:function(a,T,R){return this.updateStyleAttribute("size",a,T,R),this}},{key:"filter",value:function(a,T,R){var U=this.updateStyleAttribute("filter",a,T,R);return this.dataState.dataSourceNeedUpdate=U&&this.inited,this}},{key:"shape",value:function(a,T,R){this.shapeOption={field:a,values:T};var U=this.updateStyleAttribute("shape",a,T,R);return this.dataState.dataSourceNeedUpdate=U&&this.inited,this}},{key:"label",value:function(a,T,R){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:a,attributeValues:T,updateOptions:R}),this}},{key:"animate",value:function(a){var T={};return uc(a)?(T.enable=!0,T=Object(i.a)(Object(i.a)({},T),a)):T.enable=a,this.updateLayerConfig({animateOption:T}),this}},{key:"source",value:function(a,T){return(a==null?void 0:a.type)==="source"?(this.setSource(a),this):(this.sourceOption={data:a,options:T},this.clusterZoom=0,this)}},{key:"setData",value:function(a,T){var R=this;return this.inited?(this.dataUpdatelog(),this.layerSource.setData(a,T)):this.on("inited",function(){R.dataUpdatelog(),R.layerSource.setData(a,T)}),this}},{key:"dataUpdatelog",value:function(){var a=this;this.log(S.f.SourceInitStart,S.g.UPDATE),this.layerSource.once("update",function(){a.log(S.f.SourceInitEnd,S.g.UPDATE)})}},{key:"style",value:function(a){var T=this,R=a.passes,U=Object(V.a)(a,Id);R&&Lh(R).forEach(function(oe){var me=T.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(oe[0]);me&&me.updateOptions(oe[1])}),U.borderColor&&(U.stroke=U.borderColor),U.borderWidth&&(U.strokeWidth=U.borderWidth);var Y=U;return Object.keys(U).forEach(function(oe){var me=U[oe];Array.isArray(me)&&me.length===2&&!Dd(me[0])&&!Dd(me[1])&&(Y[oe]={field:me[0],value:me[1]})}),this.encodeStyle(Y),this.updateLayerConfig(Y),this}},{key:"encodeStyle",value:function(a){var T=this;Object.keys(a).forEach(function(R){[].concat(Object(J.a)(T.enableShaderEncodeStyles),Object(J.a)(T.enableDataEncodeStyles)).includes(R)&&cv(a[R])&&(a[R].field||a[R].value)&&!jc(T.encodeStyleAttribute[R],a[R])?(T.encodeStyleAttribute[R]=a[R],T.updateStyleAttribute(R,a[R].field,a[R].value),T.inited&&(T.dataState.dataMappingNeedUpdate=!0)):T.encodeStyleAttribute[R]&&(delete T.encodeStyleAttribute[R],T.dataState.dataSourceNeedUpdate=!0)})}},{key:"scale",value:function(a,T){var R=Object(i.a)({},this.scaleOptions);if(uc(a)?this.scaleOptions=Object(i.a)(Object(i.a)({},this.scaleOptions),a):this.scaleOptions[a]=T,this.styleAttributeService&&!jc(R,this.scaleOptions)){var U=uc(a)?a:Object(d.a)({},a,T);this.styleAttributeService.updateScaleAttribute(U)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"prerender",value:function(){}},{key:"render",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(a),this))}},{key:"renderMultiPass",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(a.encodeDataLength<=0&&!a.forceRender)){U.next=2;break}return U.abrupt("return");case 2:if(!(a.multiPassRenderer&&a.multiPassRenderer.getRenderFlag())){U.next=7;break}return U.next=5,a.multiPassRenderer.render();case 5:U.next=8;break;case 7:a.renderModels();case 8:case"end":return U.stop()}},T)}))()}},{key:"active",value:function(a){var T={};return T.enableHighlight=uc(a)?!0:a,uc(a)?(T.enableHighlight=!0,a.color&&(T.highlightColor=a.color),a.mix&&(T.activeMix=a.mix)):T.enableHighlight=!!a,this.updateLayerConfig(T),this}},{key:"setActive",value:function(a,T){var R=this;if(uc(a)){var U=a.x,Y=U===void 0?0:U,oe=a.y,me=oe===void 0?0:oe;this.updateLayerConfig({highlightColor:uc(T)?T.color:this.getLayerConfig().highlightColor,activeMix:uc(T)?T.mix:this.getLayerConfig().activeMix}),this.pick({x:Y,y:me})}else this.updateLayerConfig({pickedFeatureID:a,highlightColor:uc(T)?T.color:this.getLayerConfig().highlightColor,activeMix:uc(T)?T.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(Object(n.r)(a)).then(function(){setTimeout(function(){R.reRender()},1)})}},{key:"select",value:function(a){var T={};return T.enableSelect=uc(a)?!0:a,uc(a)?(T.enableSelect=!0,a.color&&(T.selectColor=a.color),a.mix&&(T.selectMix=a.mix)):T.enableSelect=!!a,this.updateLayerConfig(T),this}},{key:"setSelect",value:function(a,T){var R=this;if(uc(a)){var U=a.x,Y=U===void 0?0:U,oe=a.y,me=oe===void 0?0:oe;this.updateLayerConfig({selectColor:uc(T)?T.color:this.getLayerConfig().selectColor,selectMix:uc(T)?T.mix:this.getLayerConfig().selectMix}),this.pick({x:Y,y:me})}else this.updateLayerConfig({pickedFeatureID:a,selectColor:uc(T)?T.color:this.getLayerConfig().selectColor,selectMix:uc(T)?T.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Object(n.r)(a)).then(function(){setTimeout(function(){R.reRender()},1)})}},{key:"setBlend",value:function(a){return this.updateLayerConfig({blend:a}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(a){return this.zIndex=a,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(a){this.currentPickId=a}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(a){this.selectedFeatureID=a}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var a=this.mapService.getZoom(),T=this.getLayerConfig(),R=T.visible,U=T.minZoom,Y=U===void 0?-Infinity:U,oe=T.maxZoom,me=oe===void 0?Infinity:oe;return!!R&&a>=Y&&a<me}},{key:"setMultiPass",value:function(a,T){if(this.updateLayerConfig({enableMultiPassRenderer:a}),T&&this.updateLayerConfig({passes:T}),a){var R=this.getLayerConfig(),U=R.passes,Y=U===void 0?[]:U;this.multiPassRenderer=Ef(this,Y,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var oe=this.rendererService.getViewportSize(),me=oe.width,Ce=oe.height;this.multiPassRenderer.resize(me,Ce)}return this}},{key:"setMinZoom",value:function(a){return this.updateLayerConfig({minZoom:a}),this}},{key:"getMinZoom",value:function(){var a=this.getLayerConfig(),T=a.minZoom;return T}},{key:"getMaxZoom",value:function(){var a=this.getLayerConfig(),T=a.maxZoom;return T}},{key:"get",value:function(a){var T=this.getLayerConfig();return T[a]}},{key:"setMaxZoom",value:function(a){return this.updateLayerConfig({maxZoom:a}),this}},{key:"setAutoFit",value:function(a){return this.updateLayerConfig({autoFit:a}),this}},{key:"fitBounds",value:function(a){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var T=this.getSource(),R=T.extent,U=R.some(function(Y){return Math.abs(Y)===Infinity});return U?this:(this.mapService.fitBounds([[R[0],R[1]],[R[2],R[3]]],a),this)}},{key:"destroy",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,T,R,U,Y,oe;if(!this.isDestroyed){(T=this.layerModel)===null||T===void 0||T.uniformBuffers.forEach(function(Ve){Ve.destroy()}),this.layerChildren.map(function(Ve){return Ve.destroy(!1)}),this.layerChildren=[];var me=this.getLayerConfig(),Ce=me.maskfence;Ce&&(this.masks.map(function(Ve){return Ve.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(R=this.multiPassRenderer)===null||R===void 0||R.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(U=this.layerModel)===null||U===void 0||U.clearModels(a),(Y=this.tileLayer)===null||Y===void 0||Y.destroy(),this.models=[],(oe=this.debugService)===null||oe===void 0||oe.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var a;this.models.forEach(function(T){return T.destroy()}),(a=this.layerModel)===null||a===void 0||a.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(a){return a.needRescale||a.needRemapping||a.needRegenerateVertices}).length}},{key:"setSource",value:function(a){var T=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=a,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var R=this.mapService.getZoom();this.layerSource.updateClusterData(R)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(U){var Y=U.type;if(T.coordCenter===void 0){var oe=T.layerSource.center;T.coordCenter=oe}if(Y==="update"){if(T.tileLayer){T.tileLayer.reload();return}T.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(a){this.encodedData=a,this.encodeDataLength=a.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(a){return this.styleAttributeService.getLayerAttributeScale(a)}},{key:"getLegend",value:function(a){var T,R,U,Y=this.styleAttributeService.getLayerStyleAttribute(a),oe=(Y==null||(T=Y.scale)===null||T===void 0?void 0:T.scalers)||[];return{type:(R=oe[0])===null||R===void 0||(R=R.option)===null||R===void 0?void 0:R.type,field:Y==null||(U=Y.scale)===null||U===void 0?void 0:U.field,items:this.getLegendItems(a)}}},{key:"getLegendItems",value:function(a){var T=this.styleAttributeService.getLayerAttributeScale(a);if(!T)return[];if(T.invertExtent){var R=T.range().map(function(oe){return Object(d.a)({value:T.invertExtent(oe)},a,oe)});return R}else if(T.ticks){var U=T.ticks().map(function(oe){return Object(d.a)({value:oe},a,T(oe))});return U}else if(T!=null&&T.domain){var Y=T.domain().filter(function(oe){return!fv(oe)}).map(function(oe){return Object(d.a)({value:oe},a,T(oe))});return Y}return[]}},{key:"pick",value:function(a){var T=a.x,R=a.y;this.interactionService.triggerHover({x:T,y:R})}},{key:"boxSelect",value:function(a,T){this.pickingService.boxPickLayer(this,a,T)}},{key:"buildLayerModel",value:function(a){var T=this;return Object(ie.a)(Object(K.a)().mark(function R(){var U,Y,oe,me,Ce,Ve,ut,Ft,Nt,vr,_r,Sr,cn,Bn,Kn;return Object(K.a)().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return U=a.moduleName,Y=a.vertexShader,oe=a.fragmentShader,me=a.defines,Ce=a.inject,Ve=a.triangulation,ut=a.styleOption,Ft=a.pickingEnabled,Nt=Ft===void 0?!0:Ft,vr=Object(V.a)(a,Ld),T.shaderModuleService.registerModule(U,{vs:Y,fs:oe,defines:me,inject:Ce}),_r=T.shaderModuleService.getModule(U),Sr=_r.vs,cn=_r.fs,Bn=_r.uniforms,Kn=T.rendererService.createModel,vn.abrupt("return",new Promise(function(ti){var Mi=T.styleAttributeService.createAttributesAndIndices(T.encodedData,Ve,ut,T),Ki=Mi.attributes,Ii=Mi.elements,xa=Mi.count,La=[].concat(Object(J.a)(T.layerModel.uniformBuffers),Object(J.a)(T.rendererService.uniformBuffers));Nt&&La.push(T.getPickingUniformBuffer());var Cs=Object(i.a)({attributes:Ki,uniforms:Bn,fs:cn,vs:Sr,elements:Ii,blend:Nf[S.b.normal],uniformBuffers:La,textures:T.layerModel.textures},vr);xa&&(Cs.count=xa);var wu=Kn(Cs);ti(wu)}));case 5:case"end":return vn.stop()}},R)}))()}},{key:"createAttributes",value:function(a){var T=a.triangulation,R=this.styleAttributeService.createAttributes(this.encodedData,T),U=R.attributes;return U}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(a){var T=this.getLayerConfig(),R=T.enableHighlight,U=R===void 0?!0:R,Y=T.enableSelect,oe=Y===void 0?!0:Y,me=this.eventNames().indexOf(a)!==-1||this.eventNames().indexOf("un"+a)!==-1;return(a==="click"||a==="dblclick")&&oe&&(me=!0),a==="mousemove"&&(U||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(me=!0),this.isVisible()&&me}},{key:"buildModels",value:function(){return Object(ie.a)(Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return R.stop()}},a)}))()}},{key:"rebuildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,a.buildModels();case 2:case"end":return U.stop()}},T)}))()}},{key:"renderMulPass",value:function(a){return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,a.render();case 2:case"end":return U.stop()}},T)}))()}},{key:"renderModels",value:function(){var a=this,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(R){R.draw({uniforms:a.layerModel.getUninforms(),blend:a.layerModel.getBlend(),stencil:a.layerModel.getStencil(T),textures:a.layerModel.textures},(T==null?void 0:T.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(a,T,R,U){var Y=this.configService.getAttributeConfig(this.id)||{};return jc(Y[a],{field:T,values:R})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(a)!==-1&&this.configService.setAttributeConfig(this.id,Object(d.a)({},a,{field:T,values:R})),this.startInit?this.styleAttributeService.updateStyleAttribute(a,{scale:Object(i.a)({field:T},this.splitValuesAndCallbackInAttribute(R,this.getLayerConfig()[T]))},U):this.pendingStyleAttributes.push({attributeName:a,attributeField:T,attributeValues:R,updateOptions:U}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(a){console.warn("empty fn")}},{key:"processData",value:function(a){return a}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.models.forEach(function(oe){return oe.destroy()}),a.models=[],a.uniformBuffers.forEach(function(oe){oe.destroy()}),a.uniformBuffers=[],R=a.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"}),a.uniformBuffers.push(R),Y.next=8,a.layerModel.initModels();case 8:a.models=Y.sent;case 9:case"end":return Y.stop()}},T)}))()}},{key:"getPickingUniformBuffer",value:function(){return this.uniformBuffers[0]}},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(a){return{values:Af(a)?void 0:a,callback:Af(a)?a:void 0}}}]),l}(s.EventEmitter);function sf(t,y){return{enable:t,mask:255,func:{cmp:S.s.EQUAL,ref:y?1:0,mask:1}}}function rd(t){return t.maskOperation===S.i.OR?{enable:!0,mask:255,func:{cmp:S.s.ALWAYS,ref:1,mask:255},opFront:{fail:S.s.KEEP,zfail:S.s.REPLACE,zpass:S.s.REPLACE}}:{enable:!0,mask:255,func:{cmp:t.stencilType===S.n.SINGLE||t.stencilIndex===0?S.s.ALWAYS:S.s.LESS,ref:t.stencilType===S.n.SINGLE?1:t.stencilIndex===0?2:1,mask:255},opFront:{fail:S.s.KEEP,zfail:S.s.REPLACE,zpass:S.s.REPLACE}}}var Jf={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},Jc={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"},hv=Ee("VmRL"),yc=Ee.n(hv);function Dh(t){return Math.max(Math.ceil(t/4)*4,4)}function jh(t,y,l){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=l===3;if(m){t=t.slice();for(var T=[],R=0;R<t.length;R+=l){T[0]=t[R],T[1]=t[R+1],a&&(T[2]=t[R+2]);var U=Object(n.L)(T,!0,{enable:!1,decimal:1});t[R]=U[0],t[R+1]=U[1],a&&(t[R+2]=U[2])}}var Y=yc()(t,y,l);return Y}var lc="ATTRIBUTE_LOCATION_",Xo=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"triangulation",void 0),Object(r.a)(this,"uniformBuffers",[]),Object(r.a)(this,"textures",[]),Object(r.a)(this,"createTexture2D",void 0),Object(r.a)(this,"preStyleAttribute",{}),Object(r.a)(this,"encodeStyleAttribute",{}),Object(r.a)(this,"layer",void 0),Object(r.a)(this,"dataTexture",void 0),Object(r.a)(this,"DATA_TEXTURE_WIDTH",void 0),Object(r.a)(this,"dataTextureTest",void 0),Object(r.a)(this,"configService",void 0),Object(r.a)(this,"shaderModuleService",void 0),Object(r.a)(this,"rendererService",void 0),Object(r.a)(this,"iconService",void 0),Object(r.a)(this,"fontService",void 0),Object(r.a)(this,"styleAttributeService",void 0),Object(r.a)(this,"mapService",void 0),Object(r.a)(this,"cameraService",void 0),Object(r.a)(this,"layerService",void 0),Object(r.a)(this,"pickingService",void 0),Object(r.a)(this,"attributeUnifoms",void 0),Object(r.a)(this,"commonUnifoms",void 0),this.layer=y,this.configService=y.getContainer().globalConfigService,this.rendererService=y.getContainer().rendererService,this.pickingService=y.getContainer().pickingService,this.shaderModuleService=y.getContainer().shaderModuleService,this.styleAttributeService=y.getContainer().styleAttributeService,this.mapService=y.getContainer().mapService,this.iconService=y.getContainer().iconService,this.fontService=y.getContainer().fontService,this.cameraService=y.getContainer().cameraService,this.layerService=y.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var l=this.rendererService.createTexture2D;this.createTexture2D=l}return Object(v.a)(t,[{key:"attributeLocation",get:function(){return Object(i.a)({},fu)}},{key:"getBlend",value:function(){var l=this.layer.getLayerConfig(),m=l.blend,a=m===void 0?"normal":m;return Nf[S.b[a]]}},{key:"getStencil",value:function(l){var m=this.layer.getLayerConfig(),a=m.mask,T=a===void 0?!1:a,R=m.maskInside,U=R===void 0?!0:R,Y=m.enableMask,oe=m.maskOperation,me=oe===void 0?S.i.AND:oe;if(this.layer.type==="MaskLayer")return rd({isStencil:!0,stencilType:S.n.SINGLE});if(l.isStencil)return rd(Object(i.a)(Object(i.a)({},l),{},{maskOperation:me}));var Ce=T||Y&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return sf(Ce,U)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){var l=this.getCommonUniformsInfo(),m=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();var a=Object(i.a)(Object(i.a)({},m.uniformsOption),l.uniformsOption);return Object.keys(a).forEach(function(T){typeof a[T]=="boolean"&&(a[T]=a[T]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(a.u_texture=this.textures[0]),a}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return Object(ie.a)(Object(K.a)().mark(function l(){return Object(K.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",!1);case 1:case"end":return a.stop()}},l)}))()}},{key:"buildModels",value:function(){return Object(ie.a)(Object(K.a)().mark(function l(){return Object(K.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return a.stop()}},l)}))()}},{key:"initModels",value:function(){return Object(ie.a)(Object(K.a)().mark(function l(){return Object(K.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return a.stop()}},l)}))()}},{key:"clearModels",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"prerender",value:function(){}},{key:"render",value:function(l){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(l){return[l.enable?0:1,l.duration||4,l.interval||.2,l.trailLength||.1]}},{key:"startModelAnimate",value:function(){var l=this.layer.getLayerConfig(),m=l.animateOption;m.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var l=Al(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute);return l}},{key:"getDefines",value:function(){var l=this,m=Object.keys(this.attributeLocation).reduce(function(a,T){var R=lc+T;return a[R]=l.attributeLocation[T],a},{});return Object(i.a)({},m)}},{key:"getStyleAttribute",value:function(){var l=this,m={};return this.layer.enableShaderEncodeStyles.forEach(function(a){if(!l.layer.encodeStyleAttribute[a]){var T=l.layer.getLayerConfig()[a],R=typeof T=="undefined"?Jf[a]:T;a==="stroke"&&(R=Object(n.R)(R)),m["u_"+a]=R}}),m}},{key:"registerStyleAttribute",value:function(){var l=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(m){var a=Yf(m);a&&l.styleAttributeService.registerStyleAttribute(a)})}},{key:"registerPosition64LowAttribute",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:S.a.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:S.s.FLOAT},size:2,update:function(a,T,R){return l?[Object(n.u)(R[0]),Object(n.u)(R[1])]:[0,0]}}})}},{key:"updateEncodeAttribute",value:function(l,m){this.encodeStyleAttribute[l]=m}},{key:"initUniformsBuffer",value:function(){var l=this.getUniformsBufferInfo(this.getStyleAttribute()),m=this.getCommonUniformsInfo();l.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(Dh(l.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),m.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(Dh(m.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}},{key:"getUniformsBufferInfo",value:function(l){var m=0,a=[];return Object.values(l).forEach(function(T){Array.isArray(T)?(a.push.apply(a,Object(J.a)(T)),m+=T.length):typeof T=="number"?(a.push(T),m+=1):typeof T=="boolean"&&(a.push(Number(T)),m+=1)}),{uniformsOption:l,uniformsLength:m,uniformsArray:a}}},{key:"getCommonUniformsInfo",value:function(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}},{key:"updateStyleUnifoms",value:function(){var l,m,a=this.getUniformsBufferInfo(this.getStyleAttribute()),T=a.uniformsArray,R=this.getCommonUniformsInfo(),U=R.uniformsArray;(l=this.attributeUnifoms)===null||l===void 0||l.subData({offset:0,data:new Uint8Array(new Float32Array(T).buffer)}),(m=this.commonUnifoms)===null||m===void 0||m.subData({offset:0,data:new Uint8Array(new Float32Array(U).buffer)})}}]),t}();function Al(t,y){var l=[],m="";t.forEach(function(R){var U=R.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),Y=lc+U;y[R]?m+="#define USE_ATTRIBUTE_".concat(U,` 0.0 
`):l.push("  ".concat(Jc[R]," u_").concat(R,";")),m+=`
#ifdef USE_ATTRIBUTE_`.concat(U,`
layout(location = `).concat(Y,") in ").concat(Jc[R]," a_").concat(R.charAt(0).toUpperCase()+R.slice(1),`;
#endif 
`)});var a=l.length?`
layout(std140) uniform AttributeUniforms {
  `.concat(l.join(`
`),`
};
`):"";m+=a;var T="";return t.forEach(function(R){var U=R.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();T+=`
  #ifdef USE_ATTRIBUTE_`.concat(U,`
    `).concat(Jc[R]," ").concat(R," = a_").concat(R.charAt(0).toUpperCase()+R.slice(1),`;
  #else
    `).concat(Jc[R]," ").concat(R," = u_").concat(R,`;
  #endif
  `)}),{"vs:#decl":m,"fs:#decl":a,"vs:#main-start":T}}var ei=Ee("IOcx"),Bh=100,ph=36,dv=40;function vv(t){return t/180*Math.acos(-1)}function pv(t){var y=vv(t[0])+Math.PI/2,l=vv(t[1]),m=Bh+Math.random()*.4,a=m*Math.cos(l)*Math.cos(y),T=m*Math.cos(l)*Math.sin(y),R=m*Math.sin(l);return[T,R,a]}function jd(t,y){var l=ei.b.create(),m=ei.b.create(),a=ei.d.fromValues(0,1,0),T=ei.d.fromValues(0,0,0);y=y||{},t=typeof t!="undefined"?t:1;for(var R=typeof y.segments!="undefined"?y.segments:32,U=2+R,Y=2*U,oe=[],me=[],Ce=[],Ve=[],ut=[],Ft=[],Nt=0;Nt<=U;Nt++){for(var vr=Nt/U,_r=vr*Math.PI,Sr=0;Sr<=Y;Sr++){var cn=Sr/Y,Bn=cn*Math.PI*2;ei.b.identity(m),ei.b.rotateZ(m,m,-_r),ei.b.identity(l),ei.b.rotateY(l,l,Bn),ei.d.transformMat4(T,a,m),ei.d.transformMat4(T,T,l),ei.d.scale(T,T,-t),Ce.push(T.slice()),Ve.push.apply(Ve,Object(J.a)(T.slice())),ei.d.normalize(T,T),ut.push.apply(ut,Object(J.a)(T.slice())),Ft.push([cn,1-vr]),Ve.push(cn,1-vr)}if(Nt>0)for(var Kn=Ce.length,wn=Kn-2*(Y+1);wn+Y+2<Kn;wn++)oe.push([wn,wn+1,wn+Y+1]),me.push(wn,wn+1,wn+Y+1),oe.push([wn+Y+1,wn+1,wn+Y+2]),me.push(wn+Y+1,wn+1,wn+Y+2)}return{cells:oe,positions:Ce,uvs:Ft,positionsArr:Ve,indicesArr:me,normalArr:ut}}var gv=ei.c.create(),lp=ei.c.create(),Uu=ei.c.create(),Fh=ei.c.create(),Nh=ei.c.create();function nd(t,y,l,m,a){ei.c.add(t,l,m),ei.c.normalize(t,t),y=ei.c.fromValues(-t[1],t[0]);var T=ei.c.fromValues(-l[1],l[0]);return[a/ei.c.dot(y,T),y]}function gh(t,y){return ei.c.set(t,-y[1],y[0])}function mh(t,y,l){return ei.c.sub(t,y,l),ei.c.normalize(t,t),t}function mv(t,y){return t[0]===y[0]&&t[1]===y[1]}function $p(t){for(var y=new Map,l=0;l<t.length;l++){var m=t[0].toString()+"-"+t[1].toString();y.get(m)?(t.splice(l,1),l++):y.set(m,m)}return t}var yv=function(){function t(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(g.a)(this,t),Object(r.a)(this,"complex",void 0),Object(r.a)(this,"join",void 0),Object(r.a)(this,"cap",void 0),Object(r.a)(this,"miterLimit",void 0),Object(r.a)(this,"thickness",void 0),Object(r.a)(this,"normal",void 0),Object(r.a)(this,"lastFlip",-1),Object(r.a)(this,"miter",ei.c.fromValues(0,0)),Object(r.a)(this,"started",!1),Object(r.a)(this,"dash",!1),Object(r.a)(this,"totalDistance",0),Object(r.a)(this,"currentIndex",0),this.join=y.join||"miter",this.cap=y.cap||"butt",this.miterLimit=y.miterLimit||10,this.thickness=y.thickness||1,this.dash=y.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(v.a)(t,[{key:"simpleExtrude",value:function(l){var m=this.complex;if(l.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var a=l.length,T=m.startIndex,R=1;R<a;R++){var U=l[R-1],Y=l[R],oe=R<l.length-1?l[R+1]:null,me=this.simpleSegment(m,T,U,Y,oe);T+=me}if(this.dash)for(var Ce=0;Ce<m.positions.length/6;Ce++)m.positions[Ce*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}},{key:"extrude",value:function(l){var m=this.complex;if(l.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var a=l.length,T=m.startIndex,R=1;R<a;R++){var U=l[R-1],Y=l[R],oe=R<l.length-1?l[R+1]:null,me=this.segment(m,T,U,Y,oe);T+=me}if(this.dash)for(var Ce=0;Ce<m.positions.length/6;Ce++)m.positions[Ce*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}},{key:"simpleSegment",value:function(l,m,a,T,R){var U=0,Y=l.indices,oe=l.positions,me=l.normals,Ce=Object(n.f)([T[0],T[1]]),Ve=Object(n.f)([a[0],a[1]]);mh(Uu,Ce,Ve);var ut=0;if(this.dash&&(ut=this.lineSegmentDistance(Ce,Ve),this.totalDistance+=ut),this.normal||(this.normal=ei.c.create(),gh(this.normal,Uu)),this.started||(this.started=!0,this.extrusions(oe,me,a,this.normal,this.thickness,this.totalDistance-ut)),Y.push(m+0,m+1,m+2),!R)gh(this.normal,Uu),this.extrusions(oe,me,T,this.normal,this.thickness,this.totalDistance),Y.push.apply(Y,Object(J.a)(this.lastFlip===1?[m,m+2,m+3]:[m+2,m+1,m+3])),U+=2;else{var Ft=Object(n.f)([R[0],R[1]]);mv(Ce,Ft)&&ei.c.add(Ft,Ce,ei.c.normalize(Ft,ei.c.subtract(Ft,Ce,Ve))),mh(Fh,Ft,Ce);var Nt=nd(Nh,ei.c.create(),Uu,Fh,this.thickness),vr=Object(w.a)(Nt,2),_r=vr[0],Sr=vr[1],cn=ei.c.dot(Nh,this.normal)<0?-1:1;this.extrusions(oe,me,T,Sr,_r,this.totalDistance),Y.push.apply(Y,Object(J.a)(this.lastFlip===1?[m,m+2,m+3]:[m+2,m+1,m+3])),cn=-1,ei.c.copy(this.normal,Sr),U+=2,this.lastFlip=cn}return U}},{key:"segment",value:function(l,m,a,T,R){var U=0,Y=l.indices,oe=l.positions,me=l.normals,Ce=this.cap==="square",Ve=this.join==="bevel",ut=Object(n.f)([T[0],T[1]]),Ft=Object(n.f)([a[0],a[1]]);mh(Uu,ut,Ft);var Nt=0;if(this.dash&&(Nt=this.lineSegmentDistance(ut,Ft),this.totalDistance+=Nt),this.normal||(this.normal=ei.c.create(),gh(this.normal,Uu)),!this.started)if(this.started=!0,Ce){var vr=ei.c.create(),_r=ei.c.create();ei.c.add(vr,this.normal,Uu),ei.c.add(_r,this.normal,Uu),me.push(_r[0],_r[1],0),me.push(vr[0],vr[1],0),oe.push(a[0],a[1],a[2]|0,this.totalDistance-Nt,-this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),oe.push(a[0],a[1],a[2]|0,this.totalDistance-Nt,this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(oe,me,a,this.normal,this.thickness,this.totalDistance-Nt);if(Y.push(m+0,m+1,m+2),R){var Bn=Object(n.f)([R[0],R[1]]);mv(ut,Bn)&&ei.c.add(Bn,ut,ei.c.normalize(Bn,ei.c.subtract(Bn,ut,Ft))),mh(Fh,Bn,ut);var Kn=nd(Nh,ei.c.create(),Uu,Fh,this.thickness),wn=Object(w.a)(Kn,2),vn=wn[0],ti=wn[1],Mi=ei.c.dot(Nh,this.normal)<0?-1:1,Ki=Ve;if(!Ki&&this.join==="miter"){var Ii=vn;Ii>this.miterLimit&&(Ki=!0)}Ki?(me.push(this.normal[0],this.normal[1],0),me.push(ti[0],ti[1],0),oe.push(T[0],T[1],T[2]|0,this.totalDistance,-this.thickness*Mi,T[2]|0),this.complex.indexes.push(this.currentIndex),oe.push(T[0],T[1],T[2]|0,this.totalDistance,this.thickness*Mi,T[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Y.push.apply(Y,Object(J.a)(this.lastFlip!==-Mi?[m,m+2,m+3]:[m+2,m+1,m+3])),Y.push(m+2,m+3,m+4),gh(gv,Fh),ei.c.copy(this.normal,gv),me.push(this.normal[0],this.normal[1],0),oe.push(T[0],T[1],T[2]|0,this.totalDistance,-this.thickness*Mi,T[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,U+=3):(this.extrusions(oe,me,T,ti,vn,this.totalDistance),Y.push.apply(Y,Object(J.a)(this.lastFlip===1?[m,m+2,m+3]:[m+2,m+1,m+3])),Mi=-1,ei.c.copy(this.normal,ti),U+=2),this.lastFlip=Mi}else{if(gh(this.normal,Uu),Ce){var Sr=ei.c.create(),cn=ei.c.create();ei.c.sub(cn,Uu,this.normal),ei.c.add(Sr,Uu,this.normal),me.push(cn[0],cn[1],0),me.push(Sr[0],Sr[1],0),oe.push(T[0],T[1],T[2]|0,this.totalDistance,this.thickness,T[2]|0),this.complex.indexes.push(this.currentIndex),oe.push(T[0],T[1],T[2]|0,this.totalDistance,this.thickness,T[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(oe,me,T,this.normal,this.thickness,this.totalDistance);Y.push.apply(Y,Object(J.a)(this.lastFlip===1?[m,m+2,m+3]:[m+2,m+1,m+3])),U+=2}return U}},{key:"extrusions",value:function(l,m,a,T,R,U){m.push(T[0],T[1],0),m.push(T[0],T[1],0),l.push(a[0],a[1],a[2]|0,U,-R,a[2]|0),this.complex.indexes.push(this.currentIndex),l.push(a[0],a[1],a[2]|0,U,R,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(l,m){var a=m[0]-l[0],T=m[1]-l[1];return Math.sqrt(a*a+T*T)}}]),t}(),Bc,kt=function(t){return t.CYLINDER="cylinder",t.SQUARECOLUMN="squareColumn",t.TRIANGLECOLUMN="triangleColumn",t.HEXAGONCOLUMN="hexagonColumn",t.PENTAGONCOLUMN="pentagonColumn",t}({}),nr=function(t){return t.CIRCLE="circle",t.SQUARE="square",t.TRIANGLE="triangle",t.HEXAGON="hexagon",t.PENTAGON="pentagon",t}({});function Xr(t){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=Math.PI*2/t,m=[],a=0;a<t;a++)m.push(l*a+y*Math.PI/12);var T=m.map(function(R){var U=Math.sin(R+Math.PI/4),Y=Math.cos(R+Math.PI/4);return[U,Y,0]});return T}function Gn(){return Xr(30)}function vi(){return Xr(4)}function fi(){return Xr(3)}function Ln(){return Xr(6,1)}function Li(){return Xr(5)}var Bi=(Bc={},Object(d.a)(Bc,nr.CIRCLE,Gn),Object(d.a)(Bc,nr.HEXAGON,Ln),Object(d.a)(Bc,nr.TRIANGLE,fi),Object(d.a)(Bc,nr.SQUARE,vi),Object(d.a)(Bc,nr.PENTAGON,Li),Object(d.a)(Bc,kt.CYLINDER,Gn),Object(d.a)(Bc,kt.HEXAGONCOLUMN,Ln),Object(d.a)(Bc,kt.TRIANGLECOLUMN,fi),Object(d.a)(Bc,kt.SQUARECOLUMN,vi),Object(d.a)(Bc,kt.PENTAGONCOLUMN,Li),Bc);function Hi(t){var y=t[0][0],l=t[0][t[0].length-1];y[0]===l[0]&&y[1]===l[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var m=t[0].length,a=yc.a.flatten(t),T=a.vertices,R=a.dimensions,U=[],Y=[],oe=0;oe<T.length/R;oe++)R===2?U.push(T[oe*2],T[oe*2+1],1):U.push(T[oe*3],T[oe*3+1],1);var me=yc()(a.vertices,a.holes,a.dimensions);Y.push.apply(Y,Object(J.a)(me));for(var Ce=function(Ft){var Nt=a.vertices.slice(Ft*R,(Ft+1)*R),vr=a.vertices.slice((Ft+1)*R,(Ft+2)*R);vr.length===0&&(vr=a.vertices.slice(0,R));var _r=U.length/3;U.push(Nt[0],Nt[1],1,vr[0],vr[1],1,Nt[0],Nt[1],0,vr[0],vr[1],0),Y.push.apply(Y,Object(J.a)([0,2,1,2,3,1].map(function(Sr){return Sr+_r})))},Ve=0;Ve<m;Ve++)Ce(Ve);return{positions:U,index:Y}}function zi(t){var y=yc.a.flatten(t),l=yc()(y.vertices,y.holes,y.dimensions);return{positions:y.vertices,index:l}}function Gi(t){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=t[0][0],m=t[0][t[0].length-1];l[0]===m[0]&&l[1]===m[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var a=t[0].length,T=yc.a.flatten(t),R=T.vertices,U=T.dimensions,Y=T.holes,oe=[],me=[],Ce=[],Ve=0;Ve<R.length/U;Ve++)oe.push(R[Ve*U],R[Ve*U+1],1,-1,-1),Ce.push(0,0,1);var ut=jh(R,Y,U,y);me.push.apply(me,Object(J.a)(ut));for(var Ft=function(_r){var Sr=T.vertices.slice(_r*U,(_r+1)*U),cn=T.vertices.slice((_r+1)*U,(_r+2)*U);cn.length===0&&(cn=T.vertices.slice(0,U));var Bn=oe.length/5;oe.push(Sr[0],Sr[1],1,0,0,cn[0],cn[1],1,.1,0,Sr[0],Sr[1],0,0,.8,cn[0],cn[1],0,.1,.8);var Kn=aa([cn[0],cn[1],1],[Sr[0],Sr[1],0],[Sr[0],Sr[1],1],y);Ce.push.apply(Ce,Object(J.a)(Kn).concat(Object(J.a)(Kn),Object(J.a)(Kn),Object(J.a)(Kn))),me.push.apply(me,Object(J.a)([1,2,0,3,2,1].map(function(wn){return wn+Bn})))},Nt=0;Nt<a;Nt++)Ft(Nt);return{positions:oe,index:me,normals:Ce}}function aa(t,y,l){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=ei.d.create(),T=ei.d.create(),R=ei.d.create();m&&(t=Object(n.L)(t),y=Object(n.L)(y),l=Object(n.L)(l));var U=ei.d.fromValues.apply(ei.d,Object(J.a)(t)),Y=ei.d.fromValues.apply(ei.d,Object(J.a)(y)),oe=ei.d.fromValues.apply(ei.d,Object(J.a)(l));ei.d.sub(a,oe,Y),ei.d.sub(T,U,Y),ei.d.cross(R,a,T);var me=ei.d.create();return ei.d.normalize(me,R),me}var Yi={};function Fi(t){var y=Object(n.n)(t.coordinates);return{vertices:[].concat(Object(J.a)(y),Object(J.a)(y),Object(J.a)(y),Object(J.a)(y)),indices:[0,1,2,2,3,0],size:y.length}}function $n(t){var y=Object(n.n)(t.coordinates),l=pv(y);return{vertices:[].concat(Object(J.a)(l),Object(J.a)(l),Object(J.a)(l),Object(J.a)(l)),indices:[0,1,2,2,3,0],size:l.length}}function Xn(t){var y=t.shape,l=Eo(y,!1),m=l.positions,a=l.index,T=l.normals;return{vertices:m,indices:a,normals:T,size:5}}function Ui(t){var y=Object(n.n)(t.coordinates);return{vertices:Object(J.a)(y),indices:[0],size:y.length}}function oa(t){var y=t.coordinates,l=new yv({dash:!0,join:"bevel"}),m=y;m[0]&&!Array.isArray(m[0][0])&&(m=[y]),m.forEach(function(T){l.extrude(T)});var a=l.complex;return{vertices:a.positions,indices:a.indices,normals:a.normals,indexes:a.indexes,size:6}}function pi(t){var y=t.coordinates.flat(),l=1,m=1;return{vertices:[1,0,0].concat(Object(J.a)(y),[1,2,-3],Object(J.a)(y),[1,1,-3],Object(J.a)(y),[0,1,0],Object(J.a)(y),[0,0,0],Object(J.a)(y),[1,0,0],Object(J.a)(y),[1,2,-3],Object(J.a)(y),[1,1,-3],Object(J.a)(y),[0,1,0],Object(J.a)(y),[0,0,0],Object(J.a)(y)),normals:[-l,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-l,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function wa(t){var y=t.coordinates,l=[];if(!Array.isArray(y[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var m=Qi(y),a=m.results,T=m.totalDistance;return a.map(function(R){l.push(R[0],R[1],R[2],R[3],0,T)}),{vertices:l,indices:[],normals:[],size:6,count:a.length}}function Di(t){var y=t.coordinates,l=[];if(!Array.isArray(y[0]))return{vertices:[],indices:[],size:4,count:0};var m=Ra(y),a=m.results;return a.map(function(T){l.push(T[0],T[1],T[2],T[3])}),{vertices:l,indices:[],size:4,count:a.length}}function $i(t,y){var l=y[0]-t[0],m=y[1]-t[1];return Math.sqrt(l*l+m*m)}function Si(t,y){return t.length<3&&t.push(0),y!==void 0&&t.push(y),t}function Qi(t){var y=t;Array.isArray(y)&&Array.isArray(y[0])&&Array.isArray(y[0][0])&&(y=t.flat());var l=0;if(y.length<2)return{results:y,totalDistance:0};var m=[],a=Si(y[0],l);m.push(a);for(var T=1;T<y.length-1;T++){var R=$i(Object(n.f)(y[T-1]),Object(n.f)(y[T]));l+=R;var U=Si(y[T],l);m.push(U),m.push(U)}var Y=$i(Object(n.f)(y[y.length-2]),Object(n.f)(y[y.length-1]));return l+=Y,m.push(Si(y[y.length-1],l)),{results:m,totalDistance:l}}function Ra(t){if(t.length<2)return{results:t};var y=[],l=Si(t[0]);y.push(l);for(var m=1;m<t.length-1;m++){var a=Si(t[m]);y.push(a),y.push(a)}return y.push(Si(t[t.length-1])),{results:y}}function co(t){var y=t.coordinates,l=yc.a.flatten(y),m=l.vertices,a=l.dimensions,T=l.holes,R=jh(m,T,a);return{indices:R,vertices:m,size:a}}function ra(t){var y=co(t),l=y.indices,m=y.vertices,a=y.size;return{indices:l,vertices:ki(m),size:a+4}}function ki(t){for(var y=[],l=Object(n.o)(t),m=l.center,a=l.radius,T=0;T<t.length;T+=2){var R=t[T],U=t[T+1];y.push.apply(y,[R,U,0].concat(Object(J.a)(m),[a]))}return y}function _i(t){var y=t.coordinates,l=Gi(y,!0),m=l.positions,a=l.index,T=l.normals;return{vertices:m,indices:a,normals:T,size:5}}function Ua(t){var y=t.shape,l=Yl(y),m=l.positions,a=l.index;return{vertices:m,indices:a,size:3}}function Vo(t){var y=t.coordinates,l=[].concat(Object(J.a)(y[0]),[0,0,0],Object(J.a)(y[1]),[0,1,0],Object(J.a)(y[2]),[0,1,1],Object(J.a)(y[3]),[0,0,1]),m=[0,1,2,0,2,3];return{vertices:l,indices:m,size:5}}function sa(t,y){for(var l=y.segmentNumber,m=l===void 0?30:l,a=t.coordinates,T=[],R=[],U=function(me){T.push(me,1,me,a[0][0],a[0][1],a[1][0],a[1][1],me,-1,me,a[0][0],a[0][1],a[1][0],a[1][1]),me!==m-1&&R.push.apply(R,Object(J.a)([0,1,2,1,3,2].map(function(Ce){return me*2+Ce})))},Y=0;Y<m;Y++)U(Y);return{vertices:T,indices:R,size:7}}function Fo(t){var y=t.coordinates;y.length===2&&y.push(0);var l=Jo(-1,1),m=Jo(1,1),a=Jo(-1,-1),T=Jo(1,-1),R=[].concat(Object(J.a)(y),Object(J.a)(l),Object(J.a)(y),Object(J.a)(a),Object(J.a)(y),Object(J.a)(T),Object(J.a)(y),Object(J.a)(m)),U=[0,1,2,3,0,2];return{vertices:R,indices:U,size:5}}function Eo(t){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Yi&&Yi[t])return Yi[t];var l=Bi[t]?Bi[t]():Bi.cylinder(),m=Gi([l],y);return Yi[t]=m,m}function oo(t,y){for(var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=new Float32Array(t.length/l*3),T,R,U,Y=ei.d.create(),oe=ei.d.create(),me=ei.d.create(),Ce=0,Ve=y.length;Ce<Ve;Ce+=3){T=y[Ce+0]*3,R=y[Ce+1]*3,U=y[Ce+2]*3;var ut=[t[T],t[T+1]],Ft=[t[R],t[R+1]],Nt=[t[U],t[U+1]];m&&(ut=Object(n.L)(ut),Ft=Object(n.L)(Ft),Nt=Object(n.L)(Nt));var vr=ut,_r=Object(w.a)(vr,2),Sr=_r[0],cn=_r[1],Bn=ei.d.fromValues(Sr,cn,t[T+2]),Kn=Ft,wn=Object(w.a)(Kn,2),vn=wn[0],ti=wn[1],Mi=ei.d.fromValues(vn,ti,t[R+2]),Ki=Nt,Ii=Object(w.a)(Ki,2),xa=Ii[0],La=Ii[1],Cs=ei.d.fromValues(xa,La,t[U+2]);ei.d.sub(Y,Cs,Mi),ei.d.sub(oe,Bn,Mi),ei.d.cross(me,Y,oe),a[T]+=Y[0],a[T+1]+=Y[1],a[T+2]+=Y[2],a[R]+=Y[0],a[R+1]+=Y[1],a[R+2]+=Y[2],a[U]+=Y[0],a[U+1]+=Y[1],a[U+2]+=Y[2]}return js(a),a}function js(t){for(var y=0,l=t.length;y<l;y+=3){var m=ei.d.fromValues(t[y],t[y+1],t[y+2]),a=ei.d.create();ei.d.normalize(a,m),t.set(a,y)}}function Ol(t){var y=t[0][0],l=t[0][t[0].length-1];return y[0]===l[0]&&y[1]===l[1]}function Yl(t){var y=["cylinder","triangleColumn","hexagonColumn","squareColumn"],l=Bi[t]?Bi[t]():Bi.circle(),m=y.indexOf(t)===-1?zi([l]):Hi([l]);return m}function Jo(t,y){var l=(t+1)/2,m=(y+1)/2;return[l,m]}function Tl(){var t=jd(Bh,{segments:ph}),y=t.positionsArr,l=t.indicesArr,m=t.normalArr;return{vertices:y,indices:l,size:5,normals:m}}function Lu(){var t=jd(Bh+dv,{segments:ph}),y=t.positionsArr,l=t.indicesArr,m=t.normalArr;return{vertices:y,indices:l,size:5,normals:m}}var Ml=`precision highp float;
layout(std140) uniform commonUniforms {
  vec4 u_baseColor: [ 1.0, 0, 0, 1.0 ];
  vec4 u_brightColor: [ 1.0, 0, 0, 1.0 ];
  vec4 u_windowColor: [ 1.0, 0, 0, 1.0 ];
  vec4 u_circleSweepColor;
  vec2 u_cityCenter;
  float u_circleSweep;
  float u_cityMinSize;
  float u_circleSweepSpeed;
  float u_opacity: 1.0;
  float u_near: 0;
  float u_far: 1;
  float u_time;
};
in vec4 v_Color;
in vec2 v_texCoord;
in float v_worldDis;
out vec4 outputColor;

#pragma include "picking"
#pragma include "scene_uniforms"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  outputColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       outputColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        outputColor = vec4(foggedColor,1.0);
  }


  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {
    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);
    outputColor.rgb += r * r * u_circleSweepColor.rgb;
  }

  outputColor.a *= u_opacity;
  outputColor = filterColor(outputColor);
}
`,Cl=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

out vec2 v_texCoord;
out vec4 v_Color;
out float v_worldDis;

layout(std140) uniform commonUniforms {
  vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
  vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
  vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
  vec4 u_circleSweepColor;
  vec2 u_cityCenter;
  float u_circleSweep;
  float u_cityMinSize;
  float u_circleSweepSpeed;
  float u_opacity: 1.0;
  float u_near : 0;
  float u_far : 1;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"


void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

   v_texCoord = a_Uv;

  if(u_circleSweep > 0.0) {
     vec2 lnglatscale = vec2(0.0);
    lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);
    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,el=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"cityCenter",void 0),Object(r.a)(Object(p.a)(m),"cityMinSize",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,NORMAL:10,UV:11})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=T===void 0?1:T,U=a.baseColor,Y=U===void 0?"rgb(16,16,16)":U,oe=a.brightColor,me=oe===void 0?"rgb(255,176,38)":oe,Ce=a.windowColor,Ve=Ce===void 0?"rgb(30,60,89)":Ce,ut=a.time,Ft=ut===void 0?0:ut,Nt=a.sweep,vr=Nt===void 0?{enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}:Nt,_r={u_baseColor:Object(n.R)(Y),u_brightColor:Object(n.R)(me),u_windowColor:Object(n.R)(Ve),u_circleSweepColor:[].concat(Object(J.a)(Object(n.R)(vr.sweepColor).slice(0,3)),[1]),u_cityCenter:vr.sweepCenter||this.cityCenter,u_circleSweep:vr.enable?1:0,u_cityMinSize:this.cityMinSize*vr.sweepRadius,u_circleSweepSpeed:vr.sweepSpeed,u_opacity:R,u_near:0,u_far:1,u_time:this.layer.getLayerAnimateTime()||Ft},Sr=this.getUniformsBufferInfo(_r);return Sr}},{key:"calCityGeo",value:function(){var a=Object(w.a)(this.layer.getSource().extent,4),T=a[0],R=a[1],U=a[2],Y=a[3],oe=U-T,me=Y-R;this.cityCenter=[(U+T)/2,(Y+R)/2],this.cityMinSize=Math.sqrt(Math.pow(oe,2)+Math.pow(me,2))/4}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.calCityGeo(),a.initUniformsBuffer(),a.startModelAnimate(),U.abrupt("return",a.buildModels());case 4:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,a.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:Cl,fragmentShader:Ml,triangulation:_i,depth:{enable:!0},defines:a.getDefines(),inject:a.getInject(),cull:{enable:!0,face:S.s.BACK}});case 2:return R=Y.sent,Y.abrupt("return",[R]);case 4:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y,oe){return oe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?10:R;return Array.isArray(U)?[U[0]]:[U]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}})}}]),l}(Xo),Dl=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","CityBuildingLayer"),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.layerModel=new el(a),U.next=3,a.initLayerModels();case 3:case"end":return U.stop()}},T)}))()}},{key:"setLight",value:function(a){this.updateLayerConfig({time:a})}},{key:"getModelType",value:function(){return"citybuilding"}}]),l}(kf);function ec(t,y){return{type:t.type,field:"value",items:t.positions.map(function(l,m){var a;return a={},Object(d.a)(a,y,m>=t.colors.length?null:t.colors[m]),Object(d.a)(a,"value",l),a})}}var Pl=`in vec4 v_color;

#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Wo=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location =  ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;

layout(std140) uniform commonUniforms {
    vec2 u_radius;
    float u_opacity;
    float u_coverage;
    float u_angle;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_color.a *= u_opacity;

  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage;

  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(project_pos);

  setPickingColor(a_PickingColor);
}
`,tc=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,POS:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=a.coverage,U=a.angle,Y={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:T||1,u_coverage:R||.9,u_angle:U||0},oe=this.getUniformsBufferInfo(Y);return oe}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:Wo,fragmentShader:Pl,defines:a.getDefines(),triangulation:Ua,primitive:S.s.TRIANGLES,depth:{enable:!1}});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:S.a.Attribute,descriptor:{shaderLocation:this.attributeLocation.POS,name:"a_Pos",buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T){var R=T.coordinates;return[R[0],R[1],0]}}})}}]),l}(Xo),Gs=`in vec4 v_color;

layout(std140) uniform commonUniforms {
  vec2 u_radius;
  float u_opacity;
  float u_coverage;
  float u_angle;
};

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,no=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  vec2 u_radius;
  float u_opacity;
  float u_coverage;
  float u_angle;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"

void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset = vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage);

  vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));

  float lightWeight = calc_lighting(project_pos);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(project_pos);

  setPickingColor(a_PickingColor);
}
`,No=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,POS:10,NORMAL:11})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=a.coverage,U=a.angle,Y={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:T||1,u_coverage:R||.9,u_angle:U||0},oe=this.getUniformsBufferInfo(Y);return oe}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:no,fragmentShader:Gs,defines:a.getDefines(),triangulation:Xn,primitive:S.s.TRIANGLES,depth:{enable:!0}});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size;return Array.isArray(R)?[R[0]]:[R]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y,oe){return oe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:S.a.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T){var R=T.coordinates;return[R[0],R[1],0]}}})}}]),l}(Xo);function Os(t,y){for(var l=[],m=[],a=[],T=t+1,R=y+1,U=t/2,Y=y/2,oe=0;oe<R;oe++)for(var me=oe-Y,Ce=0;Ce<T;Ce++){var Ve=Ce-U;m.push(Ve/U,-me/Y,0),a.push(Ce/t),a.push(1-oe/y)}for(var ut=0;ut<y;ut++)for(var Ft=0;Ft<t;Ft++){var Nt=Ft+T*ut,vr=Ft+T*(ut+1),_r=Ft+1+T*(ut+1),Sr=Ft+1+T*ut;l.push(Nt,vr,Sr),l.push(vr,_r,Sr)}return{vertices:m,indices:l,uvs:a}}var rc=`layout(std140) uniform commonUniforms {
  mat4 u_ViewProjectionMatrixUncentered;
  mat4 u_InverseViewProjectionMatrix;
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;
in float v_intensity;
out vec4 outputColor;

void main(){
   
    float intensity = texture(SAMPLER_2D(u_texture), v_texCoord).r;
    vec4 color = texture(SAMPLER_2D(u_colorTexture),vec2(intensity, 0));
    outputColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
   outputColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,_c=`layout(location = 0) in vec3 a_Position;
layout(location = 10) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  mat4 u_ViewProjectionMatrixUncentered;
  mat4 u_InverseViewProjectionMatrix;
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

out vec2 v_texCoord;
out float v_intensity;

vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
  float t2 = t * t;
  float one_minus_t = 1.0 - t;
  float one_minus_t2 = one_minus_t * one_minus_t;
  return P0 * one_minus_t2 * one_minus_t +
  P1 * 3.0 * t * one_minus_t2 +
  P2 * 3.0 * t2 * one_minus_t +
  P3 * t2 * t;
}
vec2 toBezier(float t, vec4 p) {
  return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}

#pragma include "projection"
#pragma include "project"

void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9
  vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9

  vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09
  vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09
  inverseP2 = inverseP2 / inverseP2.w;

  float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
  vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b = vec4(0.5, 0.0, 1.0, 0.5);
  float fh;

  v_intensity = texture(SAMPLER_2D(u_texture), v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.0), 1.0);

}
`,kr=`uniform sampler2D u_texture;        // \u70ED\u529B\u5F3A\u5EA6\u56FE
uniform sampler2D u_colorTexture;   // \u6839\u636E\u5F3A\u5EA6\u5206\u5E03\u7684\u8272\u5E26

layout(std140) uniform commonUniforms {
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};
in vec2 v_texCoord;
out vec4 outputColor;

#pragma include "scene_uniforms"

float getBlurIndusty() {
    float vW = 2.0/ u_ViewportSize.x;
    float vH = 2.0/ u_ViewportSize.y;
    vec2 vUv = v_texCoord;
    float i11 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 1.0 * vW, vUv.y + 1.0 * vH) ).r;
    float i12 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 0.0 * vW, vUv.y + 1.0 * vH) ).r;
    float i13 = texture(SAMPLER_2D(u_texture), vec2( vUv.x + 1.0 * vW, vUv.y + 1.0 * vH) ).r;

    float i21 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 1.0 * vW, vUv.y) ).r;
    float i22 = texture(SAMPLER_2D(u_texture), vec2( vUv.x , vUv.y) ).r;
    float i23 = texture(SAMPLER_2D(u_texture), vec2( vUv.x + 1.0 * vW, vUv.y) ).r;

    float i31 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 1.0 * vW, vUv.y-1.0*vH) ).r;
    float i32 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 0.0 * vW, vUv.y-1.0*vH) ).r;
    float i33 = texture(SAMPLER_2D(u_texture), vec2( vUv.x + 1.0 * vW, vUv.y-1.0*vH) ).r;

    return(
        i11 + 
        i12 + 
        i13 + 
        i21 + 
        i21 + 
        i22 + 
        i23 + 
        i31 + 
        i32 + 
        i33
        )/9.0;
}


void main(){
    // float intensity = texture(u_texture, v_texCoord).r;
    float intensity = getBlurIndusty();
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(intensity, 0.0));
    outputColor = color;
    outputColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,ii=`layout(location = 0) in vec3 a_Position;
layout(location = 10) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};

#pragma include "scene_uniforms"

out vec2 v_texCoord;
void main() {
  v_texCoord = a_Uv;
  #ifdef VIEWPORT_ORIGIN_TL
  v_texCoord.y = 1.0 - v_texCoord.y;
  #endif

  gl_Position = vec4(a_Position.xy, 0, 1.0);
}
`,Hn=`layout(std140) uniform commonUniforms {
  float u_radius;
  float u_intensity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
};

in vec2 v_extrude;
in float v_weight;
out vec4 outputColor;
#define GAUSS_COEF  0.3989422804014327

void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    outputColor = vec4(val, 1., 1., 1.);
}
`,fa=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_DIR) in vec2 a_Dir;

layout(std140) uniform commonUniforms {
  float u_radius;
  float u_intensity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
};

out vec2 v_extrude;
out float v_weight;

#define GAUSS_COEF (0.3989422804014327)

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 picking_color_placeholder = u_PickingColor;

  v_weight = a_Size;
  float ZERO = 1.0 / 255.0 / 16.0;
  float extrude_x = a_Dir.x * 2.0 - 1.0;
  float extrude_y = a_Dir.y * 2.0 - 1.0;
  vec2 extrude_dir = normalize(vec2(extrude_x, extrude_y));
  float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;
  v_extrude = extrude_dir * S;

  vec2 offset = project_pixel(v_extrude * u_radius);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

}
`,Do=n.N.isEqual,au=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"colorTexture",void 0),Object(r.a)(Object(p.a)(m),"heatmapFramerBuffer",void 0),Object(r.a)(Object(p.a)(m),"heatmapTexture",void 0),Object(r.a)(Object(p.a)(m),"intensityModel",void 0),Object(r.a)(Object(p.a)(m),"colorModel",void 0),Object(r.a)(Object(p.a)(m),"shapeType",void 0),Object(r.a)(Object(p.a)(m),"preRampColors",void 0),Object(r.a)(Object(p.a)(m),"colorModelUniformBuffer",[]),Object(r.a)(Object(p.a)(m),"heat3DModelUniformBuffer",[]),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,UV:10,DIR:11})}},{key:"prerender",value:function(){var a=this,T=this.rendererService,R=T.clear,U=T.useFramebuffer;U(this.heatmapFramerBuffer,function(){R({color:[0,0,0,0],depth:1,stencil:0,framebuffer:a.heatmapFramerBuffer}),a.drawIntensityMode()})}},{key:"render",value:function(a){var T=this.layer.getLayerConfig(),R=T.rampColors;Do(this.preRampColors,R)||this.updateColorTexture(),this.shapeType==="heatmap"?this.drawHeatMap(a):this.draw3DHeatMap(a)}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut,Ft,Nt;return Object(K.a)().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return U=a.rendererService,Y=U.createFramebuffer,oe=U.getViewportSize,me=U.createTexture2D,Ce=a.styleAttributeService.getLayerStyleAttribute("shape"),Ve=(Ce==null||(R=Ce.scale)===null||R===void 0?void 0:R.field)||"heatmap",a.shapeType=Ve,_r.next=6,a.buildHeatMapIntensity();case 6:return a.intensityModel=_r.sent,a.colorModel=Ve==="heatmap"?a.buildHeatmap():a.build3dHeatMap(),ut=oe(),Ft=ut.width,Nt=ut.height,a.heatmapTexture=me({width:Math.floor(Ft/4),height:Math.floor(Nt/4),wrapS:S.s.CLAMP_TO_EDGE,wrapT:S.s.CLAMP_TO_EDGE,min:S.s.LINEAR,mag:S.s.LINEAR,usage:S.p.RENDER_TARGET}),a.heatmapFramerBuffer=Y({color:a.heatmapTexture,depth:!0,width:Math.floor(Ft/4),height:Math.floor(Nt/4)}),a.updateColorTexture(),_r.abrupt("return",[a.intensityModel,a.colorModel]);case 13:case"end":return _r.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.initModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:S.a.Attribute,descriptor:{name:"a_Dir",shaderLocation:this.attributeLocation.DIR,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?1:R;return[U]}}})}},{key:"buildHeatMapIntensity",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.uniformBuffers=[a.rendererService.createBuffer({data:new Float32Array(4).fill(0),isUBO:!0})],a.layer.triangulation=Fo,Y.next=4,a.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:fa,fragmentShader:Hn,triangulation:Fo,defines:a.getDefines(),depth:{enable:!1},cull:{enable:!0,face:S.s.FRONT}});case 4:return R=Y.sent,Y.abrupt("return",R);case 6:case"end":return Y.stop()}},T)}))()}},{key:"buildHeatmap",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:ii,fs:kr}),this.colorModelUniformBuffer=[this.rendererService.createBuffer({data:new Float32Array(4).fill(0),isUBO:!0})];var a=this.shaderModuleService.getModule("heatmapColor"),T=a.vs,R=a.fs,U=a.uniforms,Y=this.rendererService,oe=Y.createAttribute,me=Y.createElements,Ce=Y.createBuffer,Ve=Y.createModel;return Ve({vs:T,fs:R,uniformBuffers:[].concat(Object(J.a)(this.colorModelUniformBuffer),Object(J.a)(this.rendererService.uniformBuffers)),attributes:{a_Position:oe({shaderLocation:this.attributeLocation.POSITION,buffer:Ce({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:S.s.FLOAT}),size:3}),a_Uv:oe({shaderLocation:this.attributeLocation.UV,buffer:Ce({data:[0,1,1,1,0,0,1,0],type:S.s.FLOAT}),size:2})},uniforms:Object(i.a)({},U),depth:{enable:!1},elements:me({data:[0,2,1,2,3,1],type:S.s.UNSIGNED_INT,count:6})})}},{key:"build3dHeatMap",value:function(){var a=this.rendererService.getViewportSize,T=a(),R=T.width,U=T.height,Y=Os(R/4,U/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:_c,fs:rc}),this.heat3DModelUniformBuffer=[this.rendererService.createBuffer({data:new Float32Array(16*2+4).fill(0),isUBO:!0})];var oe=this.shaderModuleService.getModule("heatmap3dColor"),me=oe.vs,Ce=oe.fs,Ve=oe.uniforms,ut=this.rendererService,Ft=ut.createAttribute,Nt=ut.createElements,vr=ut.createBuffer,_r=ut.createModel;return _r({vs:me,fs:Ce,attributes:{a_Position:Ft({shaderLocation:this.attributeLocation.POSITION,buffer:vr({data:Y.vertices,type:S.s.FLOAT}),size:3}),a_Uv:Ft({shaderLocation:this.attributeLocation.UV,buffer:vr({data:Y.uvs,type:S.s.FLOAT}),size:2})},primitive:S.s.TRIANGLES,uniformBuffers:[].concat(Object(J.a)(this.heat3DModelUniformBuffer),Object(J.a)(this.rendererService.uniformBuffers)),uniforms:Object(i.a)({},Ve),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:S.s.SRC_ALPHA,srcAlpha:1,dstRGB:S.s.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Nt({data:Y.indices,type:S.s.UNSIGNED_INT,count:Y.indices.length})})}},{key:"drawIntensityMode",value:function(){var a,T=this.layer.getLayerConfig(),R=T.intensity,U=R===void 0?10:R,Y=T.radius,oe=Y===void 0?5:Y,me={u_radius:oe,u_intensity:U};this.uniformBuffers[0].subData({offset:0,data:[oe,U]}),this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),(a=this.intensityModel)===null||a===void 0||a.draw({uniforms:me,blend:{enable:!0,func:{srcRGB:S.s.ONE,srcAlpha:1,dstRGB:S.s.ONE,dstAlpha:1}},stencil:{enable:!1,mask:255,func:{cmp:514,ref:1,mask:255}}}),this.layer.hooks.afterRender.call()}},{key:"drawHeatMap",value:function(a){var T,R=this.layer.getLayerConfig(),U=R.opacity,Y=U===void 0?1:U,oe={u_opacity:Y,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer},me=[this.heatmapTexture,this.colorTexture];this.colorModelUniformBuffer[0].subData({offset:0,data:[Y]}),(T=this.colorModel)===null||T===void 0||T.draw({uniforms:oe,textures:me,blend:this.getBlend(),stencil:this.getStencil(a)})}},{key:"draw3DHeatMap",value:function(a){var T,R=this.layer.getLayerConfig(),U=R.opacity,Y=U===void 0?1:U,oe=ei.b.create();ei.b.invert(oe,this.cameraService.getViewProjectionMatrixUncentered());var me={u_opacity:Y,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Object(J.a)(oe)};this.heat3DModelUniformBuffer[0].subData({offset:0,data:[].concat(Object(J.a)(me.u_ViewProjectionMatrixUncentered),Object(J.a)(me.u_InverseViewProjectionMatrix),[Y])});var Ce=[this.heatmapTexture,this.colorTexture];(T=this.colorModel)===null||T===void 0||T.draw({uniforms:me,textures:Ce,blend:{enable:!0,func:{srcRGB:S.s.SRC_ALPHA,srcAlpha:1,dstRGB:S.s.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},stencil:this.getStencil(a)})}},{key:"updateColorTexture",value:function(){var a=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var T=this.layer.getLayerConfig(),R=T.rampColors,U=Object(n.w)(R);this.colorTexture=a({data:U.data,usage:S.p.SAMPLED,width:U.width,height:U.height,wrapS:S.s.CLAMP_TO_EDGE,wrapT:S.s.CLAMP_TO_EDGE,min:S.s.NEAREST,mag:S.s.NEAREST,flipY:!1,unorm:!0}),this.preRampColors=R}}]),l}(Xo),sr=`in vec4 v_color;

#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Pr=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;

layout(std140) uniform commonUniforms {
  vec2 u_radius;
  float u_opacity;
  float u_coverage;
  float u_angle;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_color.a *= u_opacity;

  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset = vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage);
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);

  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,$r=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,POS:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=a.coverage,U=a.angle,Y={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:T||1,u_coverage:R||.9,u_angle:U||0},oe=this.getUniformsBufferInfo(Y);return oe}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:Pr,fragmentShader:sr,defines:a.getDefines(),triangulation:Ua,depth:{enable:!1},primitive:S.s.TRIANGLES});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:S.a.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T){var R=T.coordinates;return[R[0],R[1],0]}}})}}]),l}(Xo),Zn={heatmap:au,heatmap3d:au,grid:tc,grid3d:No,hexagon:$r},Vn=Zn,sn=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","HeatMapLayer"),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel=new Vn[R](a),Y.next=4,a.initLayerModels();case 4:case"end":return Y.stop()}},T)}))()}},{key:"prerender",value:function(){var a=this.getModelType();a==="heatmap"&&this.layerModel&&this.layerModel.prerender()}},{key:"renderModels",value:function(){var a=this,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=this.getModelType();return R==="heatmap"?(this.layerModel&&this.layerModel.render(T),this):this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(U){return U.draw({uniforms:a.layerModel.getUninforms(),blend:a.layerModel.getBlend(),stencil:a.layerModel.getStencil(T)})}),this.hooks.afterRender.call(),this)}},{key:"updateModelData",value:function(a){a.attributes&&a.elements?this.models[0].updateAttributesAndElements(a.attributes,a.elements):console.warn("data error")}},{key:"getModelType",value:function(){var a,T=this.styleAttributeService.getLayerStyleAttribute("shape"),R=this.getLayerConfig(),U=R.shape3d,Y=this.getSource(),oe=Y.data.type,me=(T==null||(a=T.scale)===null||a===void 0?void 0:a.field)||"heatmap";return me==="heatmap"||me==="heatmap3d"?"heatmap":oe==="hexagon"?(U==null?void 0:U.indexOf(me))===-1?"hexagon":"grid3d":oe==="grid"?(U==null?void 0:U.indexOf(me))===-1?"grid":"grid3d":"heatmap"}},{key:"getLegend",value:function(a){if(this.getModelType()==="heatmap"){if(a!=="color")return{type:void 0,field:void 0,items:[]};var T=this.getLayerConfig().rampColors;return ec(T,a)}else return Object(C.a)(Object(O.a)(l.prototype),"getLegend",this).call(this,a)}}]),l}(kf),gn=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,Sn=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`,Nr=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,UV:9})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=a.brightness,U=a.contrast,Y=a.saturation,oe=a.gamma,me={u_opacity:Object(n.q)(T,1),u_brightness:Object(n.q)(R,1),u_contrast:Object(n.q)(U,1),u_saturation:Object(n.q)(Y,1),u_gamma:Object(n.q)(oe,1)};this.textures=[this.texture];var Ce=this.getUniformsBufferInfo(me);return Ce}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,a.loadTexture();case 2:return U.abrupt("return",a.buildModels());case 3:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy()}},{key:"loadTexture",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y;return Object(K.a)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return R=a.rendererService.createTexture2D,U=a.layer.getSource(),me.next=4,U.data.images;case 4:Y=me.sent,a.texture=R({data:Y[0],width:Y[0].width,height:Y[0].height,mag:S.s.LINEAR,min:S.s.LINEAR});case 6:case"end":return me.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Sn,fragmentShader:gn,defines:a.getDefines(),triangulation:Vo,primitive:S.s.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}})}}]),l}(Xo),dn={image:Nr},Or=dn,pn=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","ImageLayer"),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel=new Or[R](a),Y.next=4,a.initLayerModels();case 4:case"end":return Y.stop()}},T)}))()}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),T={image:{}};return T[a]}},{key:"getModelType",value:function(){return"image"}}]),l}(kf),ai=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,ci=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // \u6B63\u5411
    return mid;
  } else {
    // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // \u8D77\u59CB\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // \u8BA1\u7B97 dashArray \u548C distanceRatio \u8F93\u51FA\u5230\u7247\u5143
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F
    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance / pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Ri={solid:0,dash:1},Oi=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.texture){m.texture.update({data:m.iconService.getCanvas()}),m.layer.render();return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.NEAREST,min:S.s.NEAREST,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128}),m.textures=[m.texture]}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.sourceColor,R=a.targetColor,U=a.textureBlend,Y=U===void 0?"normal":U,oe=a.lineType,me=oe===void 0?"solid":oe,Ce=a.dashArray,Ve=Ce===void 0?[10,5]:Ce,ut=a.forward,Ft=ut===void 0?!0:ut,Nt=a.lineTexture,vr=Nt===void 0?!1:Nt,_r=a.iconStep,Sr=_r===void 0?100:_r,cn=a.segmentNumber,Bn=cn===void 0?30:cn,Kn=this.layer.getLayerConfig(),wn=Kn.animateOption,vn=Ve;me!=="dash"&&(vn=[0,0]),vn.length===2&&vn.push(0,0);var ti=0,Mi=[0,0,0,0],Ki=[0,0,0,0];if(T&&R&&(Mi=Object(n.R)(T),Ki=Object(n.R)(R),ti=1),this.rendererService.getDirty()){var Ii;(Ii=this.texture)===null||Ii===void 0||Ii.bind()}var xa={u_animate:this.animateOption2Array(wn),u_dash_array:vn,u_sourceColor:Mi,u_targetColor:Ki,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:Bn,u_lineDir:Ft?1:-1,u_icon_step:Sr,u_line_texture:vr?1:0,u_textureBlend:Y==="normal"?0:1,u_blur:.9,u_line_type:Ri[me||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:ti},La=this.getUniformsBufferInfo(xa);return La}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.updateTexture(),a.iconService.on("imageUpdate",a.updateTexture),U.abrupt("return",a.buildModels());case 3:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:ai,vert:ci,type:""}}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut;return Object(K.a)().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return a.initUniformsBuffer(),R=a.layer.getLayerConfig(),U=R.segmentNumber,Y=U===void 0?30:U,oe=a.getShaders(),me=oe.frag,Ce=oe.vert,Ve=oe.type,Nt.next=5,a.layer.buildLayerModel({moduleName:"lineArc2d"+Ve,vertexShader:Ce,fragmentShader:me,defines:a.getDefines(),inject:a.getInject(),triangulation:sa,depth:{enable:!1},styleOption:{segmentNumber:Y}});case 5:return ut=Nt.sent,Nt.abrupt("return",[ut]);case 7:case"end":return Nt.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?1:U;return Array.isArray(Y)?[Y[0]]:[Y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:S.a.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y){return[Y[3],Y[4],Y[5],Y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:S.a.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y){return[Object(n.u)(Y[3]),Object(n.u)(Y[4]),Object(n.u)(Y[5]),Object(n.u)(Y[6])]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.texture,oe=U[Y]||{x:0,y:0},me=oe.x,Ce=oe.y;return[me,Ce]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:S.a.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.thetaOffset,Y=U===void 0?1:U;return[Y]}}})}}]),l}(Xo),Ni=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,Ta=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,_a={solid:0,dash:1},Sa=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.texture){m.texture.update({data:m.iconService.getCanvas()}),m.layer.render();return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.NEAREST,min:S.s.NEAREST,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128}),m.textures=[m.texture]}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.sourceColor,R=a.targetColor,U=a.textureBlend,Y=U===void 0?"normal":U,oe=a.lineType,me=oe===void 0?"solid":oe,Ce=a.dashArray,Ve=Ce===void 0?[10,5]:Ce,ut=a.lineTexture,Ft=ut===void 0?!1:ut,Nt=a.iconStep,vr=Nt===void 0?100:Nt,_r=a.segmentNumber,Sr=_r===void 0?30:_r,cn=a.globalArcHeight,Bn=cn===void 0?10:cn,Kn=this.layer.getLayerConfig(),wn=Kn.animateOption;Ve.length===2&&Ve.push(0,0);var vn=0,ti=[0,0,0,0],Mi=[0,0,0,0];if(T&&R&&(ti=Object(n.R)(T),Mi=Object(n.R)(R),vn=1),this.rendererService.getDirty()){var Ki;(Ki=this.texture)===null||Ki===void 0||Ki.bind()}var Ii={u_animate:this.animateOption2Array(wn),u_dash_array:Ve,u_sourceColor:ti,u_targetColor:Mi,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:Bh,u_global_height:Bn,segmentNumber:Sr,u_line_type:_a[me]||0,u_icon_step:vr,u_line_texture:Ft?1:0,u_textureBlend:Y==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:vn},xa=this.getUniformsBufferInfo(Ii);return xa}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),a.updateTexture(),a.iconService.on("imageUpdate",a.updateTexture),U.abrupt("return",a.buildModels());case 4:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:Ni,vert:Ta,type:""}}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut;return Object(K.a)().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return R=a.layer.getLayerConfig(),U=R.segmentNumber,Y=U===void 0?30:U,oe=a.getShaders(),me=oe.frag,Ce=oe.vert,Ve=oe.type,Nt.next=4,a.layer.buildLayerModel({moduleName:"lineArc3d"+Ve,vertexShader:Ce,fragmentShader:me,defines:a.getDefines(),inject:a.getInject(),triangulation:sa,styleOption:{segmentNumber:Y}});case 4:return ut=Nt.sent,Nt.abrupt("return",[ut]);case 6:case"end":return Nt.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?1:U;return Array.isArray(Y)?[Y[0]]:[Y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:S.a.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y){return[Y[3],Y[4],Y[5],Y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:S.a.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y){return[Object(n.u)(Y[3]),Object(n.u)(Y[4]),Object(n.u)(Y[5]),Object(n.u)(Y[6])]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.texture,oe=U[Y]||{x:0,y:0},me=oe.x,Ce=oe.y;return[me,Ce]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:S.a.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.thetaOffset,Y=U===void 0?1:U;return[Y]}}})}}]),l}(Xo),Ya={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},ja=1/2;function Xs(t,y){var l=y.width,m=l===void 0?2:l,a=y.height,T=a===void 0?1:a;return{vertices:[0,ja*t,1*t*m,-(T+ja)*t,1*t*m,(T-ja)*t,0,ja*t,1*t*m,-(T+ja)*t,1*t*m,(T-ja)*t],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*t,-2*t,1,-2*t,1.5*t,1,1*t,1.5*t,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function wl(t,y){var l=y.width,m=l===void 0?2:l,a=y.height,T=a===void 0?3:a;return{vertices:[0,0,1*t*m,1*T,1*t*m,-1*T,0,0,1*t*m,1*T,1*t*m,-1*T],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*t,1,2,1*t,1,-2,1*t,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Qc(t,y){var l=y.width,m=l===void 0?2:l,a=y.height,T=a===void 0?2:a;return{vertices:[0,T/2,t*m*1,T/2,t*m*1,-T/2,0,-T/2,0,T/2,t*m*1,T/2,t*m*1,-T/2,0,-T/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-t,1,1,0,1,0,-t,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Bd(t,y){var l=y.width,m=l===void 0?2:l,a=y.height,T=a===void 0?3:a;return{vertices:[0,0,1*m*t,.5*T,2*m*t,0,1*m*t,-.5*T,0,0,1*m*t,.5*T,2*m*t,0,1*m*t,-.5*T],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-t,1,1,0,1,0,-t,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Hc(t,y){var l=y.width,m=l===void 0?2:l,a=y.height,T=a===void 0?3:a;return{vertices:[0,0,2*t*m,1*T,1.5*t*m,0,2*t*m,-1*T,0,0,2*t*m,1*T,1.5*t*m,0,2*t*m,-1*T],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-t,1,1,0,1,0,-t,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function _v(t,y){var l=y.width,m=l===void 0?2:l,a=y.height,T=a===void 0?2:a,R=Gn(),U=yc.a.flatten([R]),Y=yc()(U.vertices,U.holes,U.dimensions),oe=R.map(function(me){return[me[0]*m*t,me[1]*T]}).flat();return{vertices:[].concat(Object(J.a)(oe),Object(J.a)(oe)),dimensions:2,indices:Y.map(function(me){return me+R.length}),outLineIndices:Y,normals:[].concat(Object(J.a)(R.map(function(me){return[me[1]*T,me[0]*m*t,1]}).flat()),Object(J.a)(new Array(R.length*3).fill(0)))}}function Of(t){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=arguments.length>2?arguments[2]:void 0,m=typeof l.source=="object"?l.source.type:l.source,a=typeof l.target=="object"?l.target.type:l.target,T=typeof l.source=="object"?l.source:{},R=T.width,U=R===void 0?m?Ya[m]:0:R,Y=typeof l.target=="object"?l.target:{},oe=Y.width,me=oe===void 0?a?Ya[a]:0:oe;return{vertices:[0,ja,1*U].concat(Object(J.a)(t),[1,ja,-1*me],Object(J.a)(t),[1,-ja,-1*me],Object(J.a)(t),[0,-ja,1*U],Object(J.a)(t),[0,ja,1*U],Object(J.a)(t),[1,ja,-1*me],Object(J.a)(t),[1,-ja,-1*me],Object(J.a)(t),[0,-ja,1*U],Object(J.a)(t)),outLineIndices:[0,1,2,0,2,3].map(function(Ce){return Ce+y}),indices:[4,5,6,4,6,7].map(function(Ce){return Ce+y}),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function id(t,y){var l=typeof t=="object"?t.type:t,m=y==="source"?1:-1,a=typeof t=="object"?t:{};switch(l){case"circle":return _v(m,a);case"triangle":return wl(m,a);case"diamond":return Bd(m,a);case"rect":return Qc(m,a);case"classic":return Hc(m,a);case"halfTriangle":return Xs(m,a);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function Zp(t){var y=t.coordinates.flat(),l=1,m=1;return{vertices:[1,0,0].concat(Object(J.a)(y),[1,2,-3],Object(J.a)(y),[1,1,-3],Object(J.a)(y),[0,1,0],Object(J.a)(y),[0,0,0],Object(J.a)(y),[1,0,0],Object(J.a)(y),[1,2,-3],Object(J.a)(y),[1,1,-3],Object(J.a)(y),[0,1,0],Object(J.a)(y),[0,0,0],Object(J.a)(y)),normals:[-l,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-l,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function Kp(t,y){return y?Jp(t,y):Zp(t)}function Jp(t,y){var l=t.coordinates.flat(),m=y.target,a=m===void 0?"classic":m,T=y.source,R=T===void 0?"circle":T,U=Fd(id(R,"source"),l,0,0),Y=Of(l,U.vertices.length/7,y),oe=Fd(id(a,"target"),l,1,U.vertices.length/7+Y.vertices.length/7),me={vertices:[].concat(Object(J.a)(U.vertices),Object(J.a)(Y.vertices),Object(J.a)(oe.vertices)),indices:[].concat(Object(J.a)(U.outLineIndices),Object(J.a)(Y.outLineIndices),Object(J.a)(oe.outLineIndices),Object(J.a)(U.indices),Object(J.a)(Y.indices),Object(J.a)(oe.indices)),normals:[].concat(Object(J.a)(U.normals),Object(J.a)(Y.normals),Object(J.a)(oe.normals)),size:7};return me}function Fd(t,y){for(var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=[],T=t.vertices,R=t.indices,U=t.dimensions,Y=t.outLineIndices,oe=0;oe<T.length;oe+=U)a.push.apply(a,[l,T[oe+1],T[oe]].concat(Object(J.a)(y)));return Object(i.a)(Object(i.a)({},t),{},{vertices:a,indices:R.map(function(me){return me+m}),outLineIndices:Y.map(function(me){return me+m})})}var Uh=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,cp=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source_world = a_Instance.rg; // \u8D77\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`,ad=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.gapWidth,R=T===void 0?2:T,U=a.strokeWidth,Y=U===void 0?1:U,oe=a.strokeOpacity,me=oe===void 0?1:oe,Ce={u_gap_width:R,u_stroke_width:Y,u_stroke_opacity:me},Ve=this.getUniformsBufferInfo(Ce);return Ve}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),U.abrupt("return",a.buildModels());case 2:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,a.layer.buildLayerModel({moduleName:"flow_line",vertexShader:cp,fragmentShader:Uh,defines:a.getDefines(),inject:a.getInject(),triangulation:Kp,styleOption:a.layer.getLayerConfig().symbol,primitive:S.s.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return R=Y.sent,Y.abrupt("return",[R]);case 4:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T){var R=T.size,U=R===void 0?1:R;return Array.isArray(U)?[U[0],U[1]]:[U,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:S.a.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(T,R,U){return[U[3],U[4],U[5],U[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:S.a.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(T,R,U){return[Object(n.u)(U[3]),Object(n.u)(U[4]),Object(n.u)(U[5]),Object(n.u)(U[6])]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y,oe){return oe}}})}}]),l}(Xo),Qp=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,jl=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,Yu={solid:0,dash:1},qp=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.texture){m.texture.update({data:m.iconService.getCanvas()}),m.layer.render();return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.NEAREST,min:S.s.NEAREST,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128}),m.textures=[m.texture]}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.sourceColor,R=a.targetColor,U=a.textureBlend,Y=U===void 0?"normal":U,oe=a.lineType,me=oe===void 0?"solid":oe,Ce=a.dashArray,Ve=Ce===void 0?[10,5]:Ce,ut=a.lineTexture,Ft=ut===void 0?!1:ut,Nt=a.iconStep,vr=Nt===void 0?100:Nt,_r=a.segmentNumber,Sr=_r===void 0?30:_r,cn=this.layer.getLayerConfig(),Bn=cn.animateOption;if(Ve.length===2&&Ve.push(0,0),this.rendererService.getDirty()){var Kn;(Kn=this.texture)===null||Kn===void 0||Kn.bind()}var wn=0,vn=[0,0,0,0],ti=[0,0,0,0];T&&R&&(vn=Object(n.R)(T),ti=Object(n.R)(R),wn=1);var Mi=this.layer.getLayerAnimateTime();isNaN(Mi)&&(Mi=0);var Ki={u_animate:this.animateOption2Array(Bn),u_dash_array:Ve,u_sourceColor:vn,u_targetColor:ti,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:Sr,u_line_type:Yu[me]||0,u_icon_step:vr,u_line_texture:Ft?1:0,u_textureBlend:Y==="normal"?0:1,u_time:Mi,u_linearColor:wn},Ii=this.getUniformsBufferInfo(Ki);return Ii}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),a.updateTexture(),a.iconService.on("imageUpdate",a.updateTexture),U.abrupt("return",a.buildModels());case 4:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.layer.getLayerConfig(),U=R.segmentNumber,Y=U===void 0?30:U,Ce.next=3,a.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:jl,fragmentShader:Qp,triangulation:sa,styleOption:{segmentNumber:Y},defines:a.getDefines(),inject:a.getInject(),depth:{enable:!1}});case 3:return oe=Ce.sent,Ce.abrupt("return",[oe]);case 5:case"end":return Ce.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?1:U;return Array.isArray(Y)?[Y[0]]:[Y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:S.a.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y){return[Y[3],Y[4],Y[5],Y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:S.a.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y){return[Object(n.u)(Y[3]),Object(n.u)(Y[4]),Object(n.u)(Y[5]),Object(n.u)(Y[6])]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.texture,oe=U[Y]||{x:0,y:0},me=oe.x,Ce=oe.y;return[me,Ce]}}})}}]),l}(Xo),fm=function(t){return t[t.solid=0]="solid",t[t.dash=1]="dash",t}({}),fp=function(t){return t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t}({}),eg=function(t){return t.NORMAL="normal",t.REPLACE="replace",t}({}),bv=function(t){return t[t.pixel=0]="pixel",t[t.meter=1]="meter",t}({}),tg=function(t){return t.ALWAYS="always",t.DRAGEND="dragend",t}({}),kh=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,zh=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`,hp=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"textureEventFlag",!1),Object(r.a)(Object(p.a)(m),"texture",m.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.textures.length===0&&(m.textures=[m.texture]),m.texture){m.texture.update({data:m.iconService.getCanvas()}),m.layer.render();return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.NEAREST,min:S.s.NEAREST,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128})}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.sourceColor,R=a.targetColor,U=a.textureBlend,Y=U===void 0?"normal":U,oe=a.lineType,me=oe===void 0?"solid":oe,Ce=a.dashArray,Ve=Ce===void 0?[10,5,0,0]:Ce,ut=a.lineTexture,Ft=ut===void 0?!1:ut,Nt=a.iconStep,vr=Nt===void 0?100:Nt,_r=a.vertexHeightScale,Sr=_r===void 0?20:_r,cn=a.strokeWidth,Bn=cn===void 0?0:cn,Kn=a.raisingHeight,wn=Kn===void 0?0:Kn,vn=a.heightfixed,ti=vn===void 0?!1:vn,Mi=a.linearDir,Ki=Mi===void 0?fp.VERTICAL:Mi,Ii=a.blur,xa=Ii===void 0?[1,1,1,0]:Ii,La=Ve;if(me!=="dash"&&(La=[0,0,0,0]),La.length===2&&La.push(0,0),this.rendererService.getDirty()&&this.texture){var Cs;(Cs=this.texture)===null||Cs===void 0||Cs.bind()}var wu=this.layer.getLayerConfig(),ju=wu.animateOption,Oc=0,wc=[0,0,0,0],Wl=[0,0,0,0];T&&R&&(wc=Object(n.R)(T),Wl=Object(n.R)(R),Oc=1);var gf={u_animate:this.animateOption2Array(ju),u_dash_array:La,u_blur:xa,u_sourceColor:wc,u_targetColor:Wl,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:vr,u_heightfixed:Number(ti),u_vertexScale:Sr,u_raisingHeight:Number(wn),u_strokeWidth:Bn,u_textureBlend:Y===eg.NORMAL?0:1,u_line_texture:Ft?1:0,u_linearDir:Ki===fp.VERTICAL?1:0,u_linearColor:Oc,u_time:this.layer.getLayerAnimateTime()||0},Ph=this.getUniformsBufferInfo(gf);return Ph}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),a.textureEventFlag||(a.textureEventFlag=!0,a.updateTexture(),a.iconService.on("imageUpdate",a.updateTexture)),U.abrupt("return",a.buildModels());case 3:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut;return Object(K.a)().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return R=a.layer.getLayerConfig(),U=R.depth,Y=U===void 0?!1:U,oe=a.getShaders(),me=oe.frag,Ce=oe.vert,Ve=oe.type,a.layer.triangulation=oa,Nt.next=5,a.layer.buildLayerModel({moduleName:"line"+Ve,vertexShader:Ce,fragmentShader:me,triangulation:oa,defines:a.getDefines(),inject:a.getInject(),depth:{enable:Y}});case 5:return ut=Nt.sent,Nt.abrupt("return",[ut]);case 7:case"end":return Nt.stop()}},T)}))()}},{key:"getShaders",value:function(){return{frag:kh,vert:zh,type:""}}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:S.a.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(R,U,Y,oe,me,Ce){return Ce===void 0?[Y[3],10,Y[4]]:[Y[3],Ce,Y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=R.size,Y=U===void 0?1:U;return Array.isArray(Y)?[Y[0],Y[1]]:[Y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:S.a.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(R,U,Y,oe,me){return[].concat(Object(J.a)(me),[Y[5]])}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.texture,oe=U[Y]||{x:0,y:0},me=oe.x,Ce=oe.y;return[me,Ce]}}})}}]),l}(Xo),Bl=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,Nd=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`,Qf=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.sourceColor,R=a.targetColor,U=a.lineType,Y=U===void 0?"solid":U,oe=a.dashArray,me=oe===void 0?[10,5,0,0]:oe,Ce=a.vertexHeightScale,Ve=Ce===void 0?20:Ce,ut=me;Y!=="dash"&&(ut=[0,0,0,0]),ut.length===2&&ut.push(0,0);var Ft=0,Nt=[0,0,0,0],vr=[0,0,0,0];T&&R&&(Nt=Object(n.R)(T),vr=Object(n.R)(R),Ft=1);var _r={u_sourceColor:Nt,u_targetColor:vr,u_dash_array:ut,u_vertexScale:Ve,u_linearColor:Ft},Sr=this.getUniformsBufferInfo(_r);return Sr}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"getShaders",value:function(){return{frag:Bl,vert:Nd,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return a.initUniformsBuffer(),R=a.getShaders(),U=R.frag,Y=R.vert,oe=R.type,Ve.next=4,a.layer.buildLayerModel({moduleName:oe,vertexShader:Y,fragmentShader:U,triangulation:wa,defines:a.getDefines(),inject:a.getInject(),primitive:S.s.LINES,depth:{enable:!1},pick:!1});case 4:return me=Ve.sent,Ve.abrupt("return",[me]);case 6:case"end":return Ve.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:S.a.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(T,R,U){var Y=T.size,oe=Y===void 0?1:Y,me=Array.isArray(oe)?[oe[0],oe[1]]:[oe,0];return[me[0],me[1],U[3],U[5]]}}})}}]),l}(Xo),xv=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,Ev=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance; // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // \u56FA\u5B9A\u9AD8\u5EA6
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,dp=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.texture){m.texture.update({data:m.iconService.getCanvas()}),m.layer.render();return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.NEAREST,min:S.s.NEAREST,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128}),m.textures=[m.texture]}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.sourceColor,R=a.targetColor,U=a.textureBlend,Y=U===void 0?"normal":U,oe=a.heightfixed,me=oe===void 0?!1:oe,Ce=a.lineTexture,Ve=Ce===void 0?!1:Ce,ut=a.iconStep,Ft=ut===void 0?100:ut,Nt=a.iconStepCount,vr=Nt===void 0?1:Nt,_r=this.layer.getLayerConfig(),Sr=_r.animateOption;if(this.rendererService.getDirty()){var cn;(cn=this.texture)===null||cn===void 0||cn.bind()}var Bn=0,Kn=[0,0,0,0],wn=[0,0,0,0];T&&R&&(Kn=Object(n.R)(T),wn=Object(n.R)(R),Bn=1);var vn={u_animate:this.animateOption2Array(Sr),u_sourceColor:Kn,u_targetColor:wn,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:Ft,u_heightfixed:Number(me),u_linearColor:Bn,u_line_texture:Ve?1:0,u_textureBlend:Y==="normal"?0:1,u_iconStepCount:vr,u_time:this.layer.getLayerAnimateTime()||0},ti=this.getUniformsBufferInfo(vn);return ti}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),a.updateTexture(),a.iconService.on("imageUpdate",a.updateTexture),U.abrupt("return",a.buildModels());case 4:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,a.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Ev,fragmentShader:xv,triangulation:oa,defines:a.getDefines(),inject:a.getInject(),depth:{enable:!1},blend:a.getBlend()});case 2:return R=Y.sent,Y.abrupt("return",[R]);case 4:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=R.size,Y=U===void 0?1:U;return Array.isArray(Y)?[Y[0],Y[1]]:[Y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(R,U,Y,oe,me){return me}}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:S.a.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(R,U,Y){return[Y[3],Y[4],Y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.texture,oe=U[Y]||{x:0,y:0},me=oe.x,Ce=oe.y;return[me,Ce]}}})}}]),l}(Xo),od={arc:Oi,arc3d:Sa,greatcircle:qp,wall:dp,line:hp,simple:Qf,flowline:ad,earthArc3d:Sa},qf=od,Sv=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","LineLayer"),Object(r.a)(Object(p.a)(m),"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),Object(r.a)(Object(p.a)(m),"arrowInsertCount",0),Object(r.a)(Object(p.a)(m),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel=new qf[R](a),Y.next=4,a.initLayerModels();case 4:case"end":return Y.stop()}},T)}))()}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),T={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}};return T[a]}},{key:"getModelType",value:function(){var a;if(this.layerType)return this.layerType;var T=this.styleAttributeService.getLayerStyleAttribute("shape"),R=T==null||(a=T.scale)===null||a===void 0?void 0:a.field;return R||"line"}},{key:"processData",value:function(a){if(this.getModelType()!=="simple")return a;var T=[];return a.map(function(R){if(Array.isArray(R.coordinates)&&Array.isArray(R.coordinates[0])&&Array.isArray(R.coordinates[0][0])){var U=Object(i.a)({},R);R.coordinates.map(function(Y){T.push(Object(i.a)(Object(i.a)({},U),{},{coordinates:Y}))})}else T.push(R)}),T}}]),l}(kf),rg=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,hm=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function $l(t){var y=t.coordinates;return{vertices:Object(J.a)(y),indices:[0],size:y.length}}var yh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9})}},{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.blend,R=a.strokeOpacity,U=R===void 0?1:R,Y=a.strokeWidth,oe=Y===void 0?0:Y,me=a.stroke,Ce=me===void 0?"#fff":me,Ve={u_stroke_color:Object(n.R)(Ce),u_additive:T==="additive"?1:0,u_stroke_opacity:U,u_stroke_width:oe},ut=this.getUniformsBufferInfo(Ve);return ut}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.layer.triangulation=$l,a.initUniformsBuffer(),Y.next=4,a.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:hm,fragmentShader:rg,defines:a.getDefines(),inject:a.getInject(),triangulation:$l,depth:{enable:!1},primitive:S.s.POINTS});case 4:return R=Y.sent,Y.abrupt("return",[R]);case 6:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?1:R;return Array.isArray(U)?[U[0]]:[U]}}})}}]),l}(Xo),ng=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,E=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    //
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,A=n.N.isNumber,D=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"raiseCount",0),Object(r.a)(Object(p.a)(m),"raiseRepeat",0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,POS:10,NORMAL:11})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.animateOption,R=T===void 0?{enable:!1,speed:.01,repeat:!1}:T,U=a.opacity,Y=U===void 0?1:U,oe=a.sourceColor,me=a.targetColor,Ce=a.pickLight,Ve=Ce===void 0?!1:Ce,ut=a.heightfixed,Ft=ut===void 0?!0:ut,Nt=a.opacityLinear,vr=Nt===void 0?{enable:!1,dir:"up"}:Nt,_r=a.lightEnable,Sr=_r===void 0?!0:_r,cn=0,Bn=[0,0,0,0],Kn=[0,0,0,0];if(oe&&me&&(Bn=Object(n.R)(oe),Kn=Object(n.R)(me),cn=1),this.raiseCount<1&&this.raiseRepeat>0&&R.enable){var wn=R.speed,vn=wn===void 0?.01:wn;this.raiseCount+=vn,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var ti={u_sourceColor:Bn,u_targetColor:Kn,u_linearColor:cn,u_pickLight:Number(Ve),u_heightfixed:Number(Ft),u_r:R.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:A(Y)?Y:1,u_opacitylinear:Number(vr.enable),u_opacitylinear_dir:vr.dir==="up"?1:0,u_lightEnable:Number(Sr)},Mi=this.getUniformsBufferInfo(ti);return Mi}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),U.abrupt("return",a.buildModels());case 2:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.layer.getLayerConfig(),U=R.animateOption.repeat,Y=U===void 0?1:U,a.raiseRepeat=Y,Ce.next=4,a.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:E,fragmentShader:ng,triangulation:Xn,depth:{enable:!0},defines:a.getDefines(),inject:a.getInject(),cull:{enable:!0,face:S.s.FRONT},blend:a.getBlend()});case 4:return oe=Ce.sent,Ce.abrupt("return",[oe]);case 6:case"end":return Ce.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T){var R=T.size;if(R){var U=[];return Array.isArray(R)&&(U=R.length===2?[R[0],R[0],R[1]]:R),Array.isArray(R)||(U=[R,R,R]),U}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y,oe){return oe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:S.a.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T){var R=Object(n.n)(T.coordinates);return pv([R[0],R[1]])}}})}}]),l}(Xo),Z=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,se=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`,ge=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.strokeOpacity,R=T===void 0?1:T,U=a.strokeWidth,Y=U===void 0?0:U,oe=a.blend,me=a.blur,Ce=me===void 0?0:me;this.layer.getLayerConfig();var Ve={u_additive:oe==="additive"?1:0,u_stroke_opacity:R,u_stroke_width:Y,u_blur:Ce},ut=this.getUniformsBufferInfo(Ve);return ut}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.initUniformsBuffer(),U.abrupt("return",a.buildModels());case 2:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.layer.triangulation=$n,Y.next=3,a.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:se,fragmentShader:Z,triangulation:$n,defines:a.getDefines(),inject:a.getInject(),depth:{enable:!0},blend:a.getBlend()});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:S.a.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(R,U,Y,oe){var me=Object(w.a)(Y,3),Ce=me[0],Ve=me[1],ut=me[2],Ft=ei.d.fromValues(0,0,1),Nt=ei.d.fromValues(Ce,0,ut),vr=Ce>=0?ei.d.angle(Ft,Nt):Math.PI*2-ei.d.angle(Ft,Nt),_r=Math.PI*2-Math.asin(Ve/100),Sr=ei.b.create();ei.b.rotateY(Sr,Sr,vr),ei.b.rotateX(Sr,Sr,_r);var cn=ei.d.fromValues(1,1,0);ei.d.transformMat4(cn,cn,Sr),ei.d.normalize(cn,cn);var Bn=ei.d.fromValues(-1,1,0);ei.d.transformMat4(Bn,Bn,Sr),ei.d.normalize(Bn,Bn);var Kn=ei.d.fromValues(-1,-1,0);ei.d.transformMat4(Kn,Kn,Sr),ei.d.normalize(Kn,Kn);var wn=ei.d.fromValues(1,-1,0);ei.d.transformMat4(wn,wn,Sr),ei.d.normalize(wn,wn);var vn=[].concat(Object(J.a)(cn),Object(J.a)(Bn),Object(J.a)(Kn),Object(J.a)(wn)),ti=oe%4*3;return[vn[ti],vn[ti+1],vn[ti+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?5:U;return Array.isArray(Y)?[Y[0]]:[Y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:S.a.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.shape,Y=U===void 0?2:U,oe=a.layer.getLayerConfig().shape2d,me=oe.indexOf(Y);return[me]}}})}}]),l}(Xo),Te=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,je=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if (u_heightfixed < 1.0) {
    // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
  } else {
    // \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if (u_linearColor == 1.0) {
    // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`,Ze=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"raiseCount",0),Object(r.a)(Object(p.a)(m),"raiseRepeat",0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.animateOption,R=T===void 0?{enable:!1,speed:.01,repeat:!1}:T,U=a.sourceColor,Y=a.targetColor,oe=a.pickLight,me=oe===void 0?!1:oe,Ce=a.heightfixed,Ve=Ce===void 0?!1:Ce,ut=a.opacityLinear,Ft=ut===void 0?{enable:!1,dir:"up"}:ut,Nt=a.lightEnable,vr=Nt===void 0?!0:Nt,_r=0,Sr=[0,0,0,0],cn=[0,0,0,0];if(U&&Y&&(Sr=Object(n.R)(U),cn=Object(n.R)(Y),_r=1),this.raiseCount<1&&this.raiseRepeat>0&&R.enable){var Bn=R.speed,Kn=Bn===void 0?.01:Bn;this.raiseCount+=Kn,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var wn={u_pickLight:Number(me),u_heightfixed:Number(Ve),u_r:R.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:_r,u_sourceColor:Sr,u_targetColor:cn,u_opacitylinear:Number(Ft.enable),u_opacitylinear_dir:Ft.dir==="up"?1:0,u_lightEnable:Number(vr)},vn=this.getUniformsBufferInfo(wn);return vn}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce;return Object(K.a)().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return R=a.layer.getLayerConfig(),U=R.depth,Y=U===void 0?!0:U,oe=R.animateOption.repeat,me=oe===void 0?1:oe,a.raiseRepeat=me,a.initUniformsBuffer(),ut.next=5,a.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:je,fragmentShader:Te,triangulation:Xn,defines:a.getDefines(),inject:a.getInject(),cull:{enable:!0,face:S.s.FRONT},depth:{enable:Y}});case 5:return Ce=ut.sent,ut.abrupt("return",[Ce]);case 7:case"end":return ut.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T){var R=T.size;if(R){var U=[];return Array.isArray(R)&&(U=R.length===2?[R[0],R[0],R[1]]:R),Array.isArray(R)||(U=[R,R,R]),U}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y,oe){return oe}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:S.a.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:4,update:function(T){var R=Object(n.n)(T.coordinates);return[R[0],R[1],Object(n.u)(R[0]),Object(n.u)(R[1])]}}})}}]),l}(Xo),pt=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,wt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,Wt=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.strokeOpacity,R=T===void 0?1:T,U=a.strokeWidth,Y=U===void 0?0:U,oe=a.blend,me=a.blur,Ce=me===void 0?0:me,Ve=a.raisingHeight,ut=Ve===void 0?0:Ve,Ft=a.heightfixed,Nt=Ft===void 0?!1:Ft,vr=a.unit,_r=vr===void 0?"pixel":vr,Sr=this.getAnimateUniforms().u_time;isNaN(Sr)&&(Sr=-1);var cn={u_blur_height_fixed:[Ce,Number(ut),Number(Nt)],u_stroke_width:Y,u_additive:oe==="additive"?1:0,u_stroke_opacity:R,u_size_unit:bv[_r],u_time:Sr,u_animate:this.getAnimateUniforms().u_animate},Bn=this.getUniformsBufferInfo(cn);return Bn}},{key:"getAnimateUniforms",value:function(){var a=this.layer.getLayerConfig(),T=a.animateOption,R=T===void 0?{enable:!1}:T;return{u_animate:this.animateOption2Array(R),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Fi)}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return R=a.getShaders(),U=R.frag,Y=R.vert,oe=R.type,a.layer.triangulation=Fi,a.initUniformsBuffer(),Ve.next=5,a.layer.buildLayerModel({moduleName:oe,vertexShader:Y,fragmentShader:U,defines:a.getDefines(),inject:a.getInject(),triangulation:Fi,depth:{enable:!1}});case 5:return me=Ve.sent,Ve.abrupt("return",[me]);case 7:case"end":return Ve.stop()}},T)}))()}},{key:"getShaders",value:function(){return{frag:pt,vert:wt,type:"pointFill"}}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var a=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:S.a.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(R,U,Y,oe){var me=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],Ce=oe%4*3;return[me[Ce],me[Ce+1],me[Ce+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?5:U;return Array.isArray(Y)?[Y[0]]:[Y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:S.a.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.shape,Y=U===void 0?2:U,oe=a.indexOf(Y);return[oe]}}})}}]),l}(Xo),Xt=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,dr=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,jr=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"meter2coord",1),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"isMeter",!1),Object(r.a)(Object(p.a)(m),"radian",0),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.texture){m.texture.update({data:m.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),m.layerService.throttleRenderLayers();return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.LINEAR,min:S.s.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128,mipmap:!0}),m.textures=[m.texture]}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,EXTRUDE:10,UV:11})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.raisingHeight,R=T===void 0?0:T,U=a.heightfixed,Y=U===void 0?!1:U,oe=a.unit,me=oe===void 0?"pixel":oe;if(this.rendererService.getDirty()){var Ce;(Ce=this.texture)===null||Ce===void 0||Ce.bind()}var Ve={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(Y),u_raisingHeight:Number(R),u_size_unit:bv[me]},ut=this.getUniformsBufferInfo(Ve);return ut}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Fi)}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.iconService.on("imageUpdate",a.updateTexture),a.updateTexture(),U.abrupt("return",a.buildModels());case 3:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:dr,fragmentShader:Xt,triangulation:Fi,depth:{enable:!1},defines:a.getDefines(),inject:a.getInject(),cull:{enable:!0,face:S.s.FRONT}});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;this.iconService.off("imageUpdate",this.updateTexture),(a=this.texture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.shape,oe=U[Y]||{x:-64,y:-64},me=oe.x,Ce=oe.y;return[me,Ce]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:S.a.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(R,U,Y,oe){var me=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],Ce=oe%4*3;return[me[Ce],me[Ce+1],me[Ce+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?5:U;return Array.isArray(Y)?[Y[0]]:[Y]}}})}}]),l}(Xo),Lr=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,qr=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,Jr=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"updateTexture",function(){var U=m.rendererService.createTexture2D;if(m.texture){m.texture.update({data:m.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){m.layerService.throttleRenderLayers()});return}m.texture=U({data:m.iconService.getCanvas(),mag:S.s.LINEAR,min:S.s.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:m.iconService.canvasHeight||128,mipmap:!0})}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,UV:10})}},{key:"getUninforms",value:function(){if(this.rendererService.getDirty()){var a;(a=this.texture)===null||a===void 0||a.bind()}var T=this.getCommonUniformsInfo(),R=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},T.uniformsOption),R.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.raisingHeight,R=T===void 0?0:T,U=a.heightfixed,Y=U===void 0?!1:U,oe={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(R),u_heightfixed:Number(Y),u_texture:this.texture};this.textures=[this.texture];var me=this.getUniformsBufferInfo(oe);return me}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.iconService.on("imageUpdate",a.updateTexture),a.updateTexture(),U.abrupt("return",a.buildModels());case 3:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"pointImage",vertexShader:qr,fragmentShader:Lr,triangulation:Ui,defines:a.getDefines(),inject:a.getInject(),depth:{enable:!1},primitive:S.s.POINTS});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(R){var U=R.size,Y=U===void 0?5:U;return Array.isArray(Y)?[Y[0]]:[Y]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(R){var U=a.iconService.getIconMap(),Y=R.shape,oe=U[Y]||{x:-64,y:-64},me=oe.x,Ce=oe.y;return[me,Ce]}}})}}]),l}(Xo),Cn=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,Un=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function Jn(t){var y=t.coordinates;return{vertices:Object(J.a)(y),indices:[0],size:y.length}}var yi=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9})}},{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var a={u_size_scale:.5},T=this.getUniformsBufferInfo(a);return T}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.layer.triangulation=Jn,a.initUniformsBuffer(),Y.next=4,a.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:Un,fragmentShader:Cn,triangulation:Jn,defines:a.getDefines(),inject:a.getInject(),depth:{enable:!1},primitive:S.s.POINTS,pick:!1});case 4:return R=Y.sent,Y.abrupt("return",[R]);case 6:case"end":return Y.stop()}},T)}))()}},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?1:R;return Array.isArray(U)?[U[0]]:[U]}}})}}]),l}(Xo),hi=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,Xi=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`,Zi=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,EXTRUDE:10})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.blend,R=a.speed,U=R===void 0?1:R,Y=a.unit,oe=Y===void 0?"pixel":Y,me={u_additive:T==="additive"?1:0,u_size_unit:bv[oe],u_speed:U,u_time:this.layer.getLayerAnimateTime()},Ce=this.getUniformsBufferInfo(me);return Ce}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Fi)}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:Xi,fragmentShader:hi,triangulation:Fi,defines:a.getDefines(),inject:a.getInject(),depth:{enable:!1}});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:S.a.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y){var oe=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],me=Y%4*3;return[oe[me],oe[me+1],oe[me+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?5:R;return Array.isArray(U)?[U[0]]:[U]}}})}}]),l}(Xo),ba=function(){function t(y,l,m){Object(g.a)(this,t),Object(r.a)(this,"boxCells",[]),Object(r.a)(this,"xCellCount",void 0),Object(r.a)(this,"yCellCount",void 0),Object(r.a)(this,"boxKeys",void 0),Object(r.a)(this,"bboxes",void 0),Object(r.a)(this,"width",void 0),Object(r.a)(this,"height",void 0),Object(r.a)(this,"xScale",void 0),Object(r.a)(this,"yScale",void 0),Object(r.a)(this,"boxUid",void 0);var a=this.boxCells;this.xCellCount=Math.ceil(y/m),this.yCellCount=Math.ceil(l/m);for(var T=0;T<this.xCellCount*this.yCellCount;T++)a.push([]);this.boxKeys=[],this.bboxes=[],this.width=y,this.height=l,this.xScale=this.xCellCount/y,this.yScale=this.yCellCount/l,this.boxUid=0}return Object(v.a)(t,[{key:"insert",value:function(l,m,a,T,R){this.forEachCell(m,a,T,R,this.insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(m),this.bboxes.push(a),this.bboxes.push(T),this.bboxes.push(R)}},{key:"query",value:function(l,m,a,T,R){return this.queryHitTest(l,m,a,T,!1,R)}},{key:"hitTest",value:function(l,m,a,T,R){return this.queryHitTest(l,m,a,T,!0,R)}},{key:"insertBoxCell",value:function(l,m,a,T,R,U){this.boxCells[R].push(U)}},{key:"queryHitTest",value:function(l,m,a,T,R,U){if(a<0||l>this.width||T<0||m>this.height)return R?!1:[];var Y=[];if(l<=0&&m<=0&&this.width<=a&&this.height<=T){if(R)return!0;for(var oe=0;oe<this.boxKeys.length;oe++)Y.push({key:this.boxKeys[oe],x1:this.bboxes[oe*4],y1:this.bboxes[oe*4+1],x2:this.bboxes[oe*4+2],y2:this.bboxes[oe*4+3]});return U?Y.filter(U):Y}var me={hitTest:R,seenUids:{box:{},circle:{}}};return this.forEachCell(l,m,a,T,this.queryCell,Y,me,U),R?Y.length>0:Y}},{key:"queryCell",value:function(l,m,a,T,R,U,Y,oe){var me=Y.seenUids,Ce=this.boxCells[R];if(Ce!==null){var Ve=this.bboxes,ut=Object(Re.a)(Ce),Ft;try{for(ut.s();!(Ft=ut.n()).done;){var Nt=Ft.value;if(!me.box[Nt]){me.box[Nt]=!0;var vr=Nt*4;if(l<=Ve[vr+2]&&m<=Ve[vr+3]&&a>=Ve[vr+0]&&T>=Ve[vr+1]&&(!oe||oe(this.boxKeys[Nt]))){if(Y.hitTest)return U.push(!0),!0;U.push({key:this.boxKeys[Nt],x1:Ve[vr],y1:Ve[vr+1],x2:Ve[vr+2],y2:Ve[vr+3]})}}}}catch(_r){ut.e(_r)}finally{ut.f()}}return!1}},{key:"forEachCell",value:function(l,m,a,T,R,U,Y,oe){for(var me=this.convertToXCellCoord(l),Ce=this.convertToYCellCoord(m),Ve=this.convertToXCellCoord(a),ut=this.convertToYCellCoord(T),Ft=me;Ft<=Ve;Ft++)for(var Nt=Ce;Nt<=ut;Nt++){var vr=this.xCellCount*Nt+Ft;if(R.call(this,l,m,a,T,vr,U,Y,oe))return}}},{key:"convertToXCellCoord",value:function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}},{key:"convertToYCellCoord",value:function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}}]),t}(),Ma=ba,Aa=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"width",void 0),Object(r.a)(this,"height",void 0),Object(r.a)(this,"grid",void 0),Object(r.a)(this,"viewportPadding",100),Object(r.a)(this,"screenRightBoundary",void 0),Object(r.a)(this,"screenBottomBoundary",void 0),Object(r.a)(this,"gridRightBoundary",void 0),Object(r.a)(this,"gridBottomBoundary",void 0),this.width=y,this.height=l,this.viewportPadding=Math.max(y,l),this.grid=new Ma(y+this.viewportPadding,l+this.viewportPadding,25),this.screenRightBoundary=y+this.viewportPadding,this.screenBottomBoundary=l+this.viewportPadding,this.gridRightBoundary=y+2*this.viewportPadding,this.gridBottomBoundary=l+2*this.viewportPadding}return Object(v.a)(t,[{key:"placeCollisionBox",value:function(l){var m=l.x1+l.anchorPointX+this.viewportPadding,a=l.y1+l.anchorPointY+this.viewportPadding,T=l.x2+l.anchorPointX+this.viewportPadding,R=l.y2+l.anchorPointY+this.viewportPadding;return!this.isInsideGrid(m,a,T,R)||this.grid.hitTest(m,a,T,R)?{box:[]}:{box:[m,a,T,R]}}},{key:"insertCollisionBox",value:function(l,m){var a={featureIndex:m};this.grid.insert(a,l[0],l[1],l[2],l[3])}},{key:"project",value:function(l,m,a){var T=ei.e.fromValues(m,a,0,1),R=ei.e.create(),U=ei.b.fromValues.apply(ei.b,Object(J.a)(l));return ei.e.transformMat4(R,T,U),{x:(R[0]/R[3]+1)/2*this.width+this.viewportPadding,y:(-R[1]/R[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(l,m,a,T){return a>=0&&l<this.gridRightBoundary&&T>=0&&m<this.gridBottomBoundary}}]),t}();function da(t){var y=.5,l=.5;switch(t){case"right":case"top-right":case"bottom-right":y=1;break;case"left":case"top-left":case"bottom-left":y=0;break;default:y=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0;break;default:l=.5}return{horizontalAlign:y,verticalAlign:l}}function yo(t,y,l,m,a){if(!!a){var T=t[m],R=T.glyph;if(R)for(var U=y[R].advance*T.scale,Y=(t[m].x+U)*a,oe=l;oe<=m;oe++)t[oe].x-=Y}}function ka(t,y,l,m,a,T,R){var U=(y-l)*a,Y=(-m*R+.5)*T,oe=Object(Re.a)(t),me;try{for(oe.s();!(me=oe.n()).done;){var Ce=me.value;Ce.x+=U,Ce.y+=Y}}catch(Ve){oe.e(Ve)}finally{oe.f()}}function Ca(t,y,l,m,a,T,R){var U=-8,Y=0,oe=U,me=0,Ce=t.positionedGlyphs,Ve=T==="right"?1:T==="left"?0:.5,ut=Ce.length;l.forEach(function(Sr){if(Sr.split("").forEach(function(Bn){var Kn=y[Bn],wn=0;Kn&&(Ce.push({glyph:Bn,x:Y,y:oe+wn,vertical:!1,scale:1,metrics:Kn}),Y+=Kn.advance+R)}),Ce.length!==ut){var cn=Y-R;me=Math.max(cn,me),yo(Ce,y,ut,Ce.length-1,Ve)}Y=0,oe-=m+5});var Ft=da(a),Nt=Ft.horizontalAlign,vr=Ft.verticalAlign;ka(Ce,Ve,Nt,vr,me,m,l.length);var _r=oe-U;t.top+=-vr*_r,t.bottom=t.top-_r,t.left+=-Nt*me,t.right=t.left+me}function cs(t,y,l,m,a,T,R){var U=-8,Y=0,oe=U,me=0,Ce=t.positionedGlyphs,Ve=T==="right"?1:T==="left"?0:.5,ut=Ce.length;l.forEach(function(Sr){var cn=y[Sr],Bn=0;if(cn&&(Ce.push({glyph:Sr,x:cn.advance/2,y:oe+Bn,vertical:!1,scale:1,metrics:cn}),Y+=cn.advance+R),Ce.length!==ut){var Kn=Y-R;me=Math.max(Kn,me),yo(Ce,y,ut,Ce.length-1,Ve)}Y=0,oe-=m+5});var Ft=da(a),Nt=Ft.horizontalAlign,vr=Ft.verticalAlign;ka(Ce,Ve,Nt,vr,me,m,l.length);var _r=oe-U;t.top+=-vr*_r,t.bottom=t.top-_r,t.left+=-Nt*me,t.right=t.left+me}function jo(t,y,l,m,a,T){var R=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],U=arguments.length>7?arguments[7]:void 0,Y=t.split(`
`),oe=[],me={positionedGlyphs:oe,top:R[1],bottom:R[1],left:R[0],right:R[0],lineCount:Y.length,text:t};return U?cs(me,y,Y,l,m,a,T):Ca(me,y,Y,l,m,a,T),oe.length?me:!1}function eu(t){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],l=arguments.length>2?arguments[2]:void 0,m=t.positionedGlyphs,a=m===void 0?[]:m,T=[],R=Object(Re.a)(a),U;try{for(R.s();!(U=R.n()).done;){var Y=U.value,oe=Y.metrics,me=4,Ce=oe.advance*Y.scale/2,Ve=l?[Y.x+Ce,Y.y]:[0,0],ut=l?[0,0]:[Y.x+Ce+y[0],Y.y+y[1]],Ft=(0-me)*Y.scale-Ce+ut[0],Nt=(0-me)*Y.scale+ut[1],vr=Ft+oe.width*Y.scale,_r=Nt+oe.height*Y.scale,Sr={x:Ft,y:Nt},cn={x:vr,y:Nt},Bn={x:Ft,y:_r},Kn={x:vr,y:_r};T.push({tl:Sr,tr:cn,bl:Bn,br:Kn,tex:oe,glyphOffset:Ve})}}catch(wn){R.e(wn)}finally{R.f()}return T}var io=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,ds=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,mu=n.N.isEqual;function Cu(t){var y=this,l=t.id,m=[],a=[];if(!y.glyphInfoMap||!y.glyphInfoMap[l])return{vertices:[],indices:[],size:7};var T=y.glyphInfoMap[l].centroid,R=T.length===2?[T[0],T[1],0]:T;return y.glyphInfoMap[l].glyphQuads.forEach(function(U,Y){m.push.apply(m,Object(J.a)(R).concat([U.tex.x,U.tex.y+U.tex.height,U.tl.x,U.tl.y],Object(J.a)(R),[U.tex.x+U.tex.width,U.tex.y+U.tex.height,U.tr.x,U.tr.y],Object(J.a)(R),[U.tex.x+U.tex.width,U.tex.y,U.br.x,U.br.y],Object(J.a)(R),[U.tex.x,U.tex.y,U.bl.x,U.bl.y])),a.push(0+Y*4,1+Y*4,2+Y*4,2+Y*4,3+Y*4,0+Y*4)}),{vertices:m,indices:a,size:7}}var $u=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a,T=arguments.length,R=new Array(T),U=0;U<T;U++)R[U]=arguments[U];return m=y.call.apply(y,[this].concat(R)),a=Object(p.a)(m),Object(r.a)(Object(p.a)(m),"glyphInfo",void 0),Object(r.a)(Object(p.a)(m),"glyphInfoMap",{}),Object(r.a)(Object(p.a)(m),"rawEncodeData",void 0),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"currentZoom",-1),Object(r.a)(Object(p.a)(m),"extent",void 0),Object(r.a)(Object(p.a)(m),"textureHeight",0),Object(r.a)(Object(p.a)(m),"textCount",0),Object(r.a)(Object(p.a)(m),"preTextStyle",{}),Object(r.a)(Object(p.a)(m),"mapping",Object(ie.a)(Object(K.a)().mark(function Y(){return Object(K.a)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return a.initGlyph(),a.updateTexture(),me.next=4,a.reBuildModel();case 4:case"end":return me.stop()}},Y)}))),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption),{u_sdf_map:this.textures[0]})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.stroke,R=T===void 0?"#fff":T,U=a.strokeWidth,Y=U===void 0?0:U,oe=a.halo,me=oe===void 0?.5:oe,Ce=a.gamma,Ve=Ce===void 0?2:Ce,ut=a.raisingHeight,Ft=ut===void 0?0:ut,Nt=this.getFontServiceMapping(),vr=this.getFontServiceCanvas();Nt&&Object.keys(Nt).length!==this.textCount&&vr&&(this.updateTexture(),this.textCount=Object.keys(Nt).length),this.preTextStyle=this.getTextStyle();var _r={u_stroke_color:Object(n.R)(R),u_sdf_map_size:[(vr==null?void 0:vr.width)||1,(vr==null?void 0:vr.height)||1],u_raisingHeight:Number(Ft),u_stroke_width:Y,u_gamma_scale:Ve,u_halo_blur:me},Sr=this.getUniformsBufferInfo(_r);return Sr}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.bindEvent(),a.extent=a.textExtent(),a.rawEncodeData=a.layer.getEncodedData(),a.preTextStyle=a.getTextStyle(),a.initUniformsBuffer(),U.abrupt("return",a.buildModels());case 6:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.layer.getLayerConfig(),U=R.textAllowOverlap,Y=U===void 0?!1:U,a.initGlyph(),a.updateTexture(),Y||a.filterGlyphs(),Ce.next=6,a.layer.buildLayerModel({moduleName:"pointText",vertexShader:ds,fragmentShader:io,defines:a.getDefines(),inject:a.getInject(),triangulation:Cu.bind(a),depth:{enable:!1}});case 6:return oe=Ce.sent,Ce.abrupt("return",[oe]);case 8:case"end":return Ce.stop()}},T)}))()}},{key:"needUpdate",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut,Ft,Nt,vr,_r;return Object(K.a)().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(R=a.getTextStyle(),U=R.textAllowOverlap,Y=U===void 0?!1:U,oe=R.textAnchor,me=oe===void 0?"center":oe,Ce=R.textOffset,Ve=R.padding,ut=R.fontFamily,Ft=R.fontWeight,!(!mu(Ve,a.preTextStyle.padding)||!mu(Ce,a.preTextStyle.textOffset)||!mu(me,a.preTextStyle.textAnchor)||!mu(ut,a.preTextStyle.fontFamily)||!mu(Ft,a.preTextStyle.fontWeight))){cn.next=5;break}return cn.next=4,a.mapping();case 4:return cn.abrupt("return",!0);case 5:if(!Y){cn.next=7;break}return cn.abrupt("return",!1);case 7:if(Nt=a.mapService.getZoom(),vr=a.mapService.getBounds(),_r=Object(n.m)(a.extent,vr),!(Math.abs(a.currentZoom-Nt)>.5||!_r||Y!==a.preTextStyle.textAllowOverlap)){cn.next=14;break}return cn.next=13,a.reBuildModel();case 13:return cn.abrupt("return",!0);case 14:return cn.abrupt("return",!1);case 15:case"end":return cn.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:S.a.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[5],U[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:S.a.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?12:R;return Array.isArray(U)?[U[0]]:[U]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var a=this.mapService.getBounds();return Object(n.Q)(a,.5)}},{key:"initTextFont",value:function(){var a=this.getTextStyle(),T=a.fontWeight,R=a.fontFamily,U=this.rawEncodeData,Y=[];U.forEach(function(oe){var me=oe.shape,Ce=me===void 0?"":me;Ce=Ce.toString();var Ve=Object(Re.a)(Ce),ut;try{for(Ve.s();!(ut=Ve.n()).done;){var Ft=ut.value;Y.indexOf(Ft)===-1&&Y.push(Ft)}}catch(Nt){Ve.e(Nt)}finally{Ve.f()}}),this.fontService.setFontOptions({characterSet:Y,fontWeight:T,fontFamily:R,iconfont:!1})}},{key:"initIconFontTex",value:function(){var a=this.getTextStyle(),T=a.fontWeight,R=a.fontFamily,U=this.rawEncodeData,Y=[];U.forEach(function(oe){var me=oe.shape,Ce=me===void 0?"":me;Ce="".concat(Ce),Y.indexOf(Ce)===-1&&Y.push(Ce)}),this.fontService.setFontOptions({characterSet:Y,fontWeight:T,fontFamily:R,iconfont:!0})}},{key:"getTextStyle",value:function(){var a=this.layer.getLayerConfig(),T=a.fontWeight,R=T===void 0?"400":T,U=a.fontFamily,Y=U===void 0?"sans-serif":U,oe=a.textAllowOverlap,me=oe===void 0?!1:oe,Ce=a.padding,Ve=Ce===void 0?[0,0]:Ce,ut=a.textAnchor,Ft=ut===void 0?"center":ut,Nt=a.textOffset,vr=Nt===void 0?[0,0]:Nt,_r=a.opacity,Sr=_r===void 0?1:_r,cn=a.strokeOpacity,Bn=cn===void 0?1:cn,Kn=a.strokeWidth,wn=Kn===void 0?0:Kn,vn=a.stroke,ti=vn===void 0?"#000":vn;return{fontWeight:R,fontFamily:Y,textAllowOverlap:me,padding:Ve,textAnchor:Ft,textOffset:vr,opacity:Sr,strokeOpacity:Bn,strokeWidth:wn,stroke:ti}}},{key:"generateGlyphLayout",value:function(a){var T=this,R=this.getFontServiceMapping(),U=this.layer.getLayerConfig(),Y=U.spacing,oe=Y===void 0?2:Y,me=U.textAnchor,Ce=me===void 0?"center":me,Ve=U.textOffset,ut=this.rawEncodeData;this.glyphInfo=ut.map(function(Ft){var Nt=Ft.shape,vr=Nt===void 0?"":Nt,_r=Ft.id,Sr=Ft.size,cn=Sr===void 0?1:Sr,Bn=Ft.textOffset?Ft.textOffset:Ve||[0,0],Kn=Ft.textAnchor?Ft.textAnchor:Ce||"center",wn=jo(vr.toString(),R,cn,Kn,"left",oe,Bn,a),vn=eu(wn,Bn,!1);return Ft.shaping=wn,Ft.glyphQuads=vn,Ft.centroid=Object(n.n)(Ft.coordinates),T.glyphInfoMap[_r]={shaping:wn,glyphQuads:vn,centroid:Object(n.n)(Ft.coordinates)},Ft})}},{key:"getFontServiceMapping",value:function(){var a=this.layer.getLayerConfig(),T=a.fontWeight,R=T===void 0?"400":T,U=a.fontFamily,Y=U===void 0?"sans-serif":U;return this.fontService.getMappingByKey("".concat(Y,"_").concat(R))}},{key:"getFontServiceCanvas",value:function(){var a=this.layer.getLayerConfig(),T=a.fontWeight,R=T===void 0?"400":T,U=a.fontFamily,Y=U===void 0?"sans-serif":U;return this.fontService.getCanvasByKey("".concat(Y,"_").concat(R))}},{key:"filterGlyphs",value:function(){var a=this,T=this.layer.getLayerConfig(),R=T.padding,U=R===void 0?[0,0]:R,Y=T.textAllowOverlap,oe=Y===void 0?!1:Y;if(!oe){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var me=this.rendererService.getViewportSize(),Ce=me.width,Ve=me.height,ut=new Aa(Ce,Ve),Ft=this.glyphInfo.filter(function(Nt){var vr=Nt.shaping,_r=Nt.id,Sr=_r===void 0?0:_r,cn=Nt.centroid,Bn=Nt.size,Kn=Bn/16,wn=a.mapService.lngLatToContainer(cn),vn=ut.placeCollisionBox({x1:vr.left*Kn-U[0],x2:vr.right*Kn+U[0],y1:vr.top*Kn-U[1],y2:vr.bottom*Kn+U[1],anchorPointX:wn.x,anchorPointY:wn.y}),ti=vn.box;return ti&&ti.length?(ut.insertCollisionBox(ti,Sr),!0):!1});Ft.forEach(function(Nt){a.glyphInfoMap[Nt.id]=Nt})}}},{key:"initGlyph",value:function(){var a=this.layer.getLayerConfig(),T=a.iconfont,R=T===void 0?!1:T;R?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(R)}},{key:"updateTexture",value:function(){var a=this.rendererService.createTexture2D,T=this.getFontServiceCanvas();this.textureHeight=T.height,this.texture&&this.texture.destroy(),this.texture=a({data:T,mag:S.s.LINEAR,min:S.s.LINEAR,width:T.width,height:T.height}),this.textures=[this.texture]}},{key:"reBuildModel",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.filterGlyphs(),Y.next=3,a.layer.buildLayerModel({moduleName:"pointText",vertexShader:ds,fragmentShader:io,triangulation:Cu.bind(a),defines:a.getDefines(),inject:a.getInject(),depth:{enable:!1}});case 3:R=Y.sent,a.layer.models=[R];case 5:case"end":return Y.stop()}},T)}))()}}]),l}(Xo),tl={fillImage:jr,fill:Wt,radar:Zi,image:Jr,normal:yi,simplePoint:yh,extrude:Ze,text:$u,earthFill:ge,earthExtrude:D},pl=tl,Fl=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","PointLayer"),Object(r.a)(Object(p.a)(m),"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),Object(r.a)(Object(p.a)(m),"enableDataEncodeStyles",["textOffset","textAnchor"]),Object(r.a)(Object(p.a)(m),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel&&a.layerModel.clearModels(),a.layerModel=new pl[R](a),Y.next=5,a.initLayerModels();case 5:case"end":return Y.stop()}},T)}))()}},{key:"rebuildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,a.buildModels();case 2:case"end":return U.stop()}},T)}))()}},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var a=this.shapeOption,T=a.field,R=a.values,U=this.getLayerConfig(),Y=U.shape2d,oe=this.iconService.getIconMap();if(T&&(Y==null?void 0:Y.indexOf(T))!==-1)return"fill";if(R==="text")return"text";if(R&&R instanceof Array){var me=Object(Re.a)(R),Ce;try{for(me.s();!(Ce=me.n()).done;){var Ve=Ce.value;if(typeof Ve=="string"&&oe.hasOwnProperty(Ve))return"image"}}catch(ut){me.e(ut)}finally{me.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),T={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return T[a]}},{key:"getModelType",value:function(){var a=this.getEncodedData(),T=this.getLayerConfig(),R=T.shape2d,U=T.shape3d,Y=T.billboard,oe=Y===void 0?!0:Y,me=this.iconService.getIconMap(),Ce=a.find(function(ut){return ut.hasOwnProperty("shape")});if(Ce){var Ve=Ce.shape;return Ve==="dot"?"normal":Ve==="simple"?"simplePoint":Ve==="radar"?"radar":this.layerType==="fillImage"||oe===!1?"fillImage":(R==null?void 0:R.indexOf(Ve))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(U==null?void 0:U.indexOf(Ve))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":me.hasOwnProperty(Ve)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),l}(kf);function Rl(t){return cc.apply(this,arguments)}function cc(){return cc=Object(ie.a)(Object(K.a)().mark(function t(y){var l,m,a;return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!window.createImageBitmap){R.next=14;break}return R.next=3,fetch(y);case 3:return l=R.sent,R.t0=createImageBitmap,R.next=7,l.blob();case 7:return R.t1=R.sent,R.next=10,(0,R.t0)(R.t1);case 10:return m=R.sent,R.abrupt("return",m);case 14:return a=new window.Image,R.abrupt("return",new Promise(function(U){a.onload=function(){return U(a)},a.src=y,a.crossOrigin="Anonymous"}));case 16:case"end":return R.stop()}},t)})),cc.apply(this,arguments)}var nc=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,bc=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,Zl=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,Nl=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,Kl=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,Bs=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,ms=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,NORMAL:10,UV:11})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.mapTexture,R=a.heightfixed,U=R===void 0?!1:R,Y=a.raisingHeight,oe=Y===void 0?0:Y,me=a.topsurface,Ce=me===void 0?!0:me,Ve=a.sidesurface,ut=Ve===void 0?!0:Ve,Ft=a.sourceColor,Nt=a.targetColor,vr=0,_r=[1,1,1,1],Sr=[1,1,1,1];Ft&&Nt&&(_r=Object(n.R)(Ft),Sr=Object(n.R)(Nt),vr=1);var cn={u_sourceColor:_r,u_targetColor:Sr,u_linearColor:vr,u_topsurface:Number(Ce),u_sidesurface:Number(ut),u_heightfixed:Number(U),u_raisingHeight:Number(oe)};T&&this.texture&&(cn.u_texture=this.texture,this.textures=[this.texture]);var Bn=this.getUniformsBufferInfo(cn);return Bn}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,a.loadTexture();case 2:return U.abrupt("return",a.buildModels());case 3:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return R=a.getShaders(),U=R.frag,Y=R.vert,oe=R.type,a.initUniformsBuffer(),Ve.next=4,a.layer.buildLayerModel({moduleName:oe,vertexShader:Y,fragmentShader:U,depth:{enable:!0},defines:a.getDefines(),inject:a.getInject(),triangulation:_i});case 4:return me=Ve.sent,Ve.abrupt("return",[me]);case 6:case"end":return Ve.stop()}},T)}))()}},{key:"getShaders",value:function(){var a=this.layer.getLayerConfig(),T=a.pickLight,R=a.mapTexture;return R?{frag:Kl,vert:Bs,type:"polygonExtrudeTexture"}:T?{frag:bc,vert:Zl,type:"polygonExtrudePickLight"}:{frag:nc,vert:Nl,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy(),this.textures=[]}},{key:"registerBuiltinAttributes",value:function(){var a=this.layer.getSource().extent,T=a[2]-a[0],R=a[3]-a[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:S.a.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(Y,oe,me){var Ce=me[0],Ve=me[1];return[(Ce-a[0])/T,(Ve-a[1])/R,me[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(Y,oe,me,Ce,Ve){return Ve}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(Y){var oe=Y.size,me=oe===void 0?10:oe;return Array.isArray(me)?[me[0]]:[me]}}})}},{key:"loadTexture",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(R=a.layer.getLayerConfig(),U=R.mapTexture,Y=a.rendererService.createTexture2D,a.texture=Y({height:1,width:1}),!U){Ce.next=8;break}return Ce.next=6,Rl(U);case 6:oe=Ce.sent,a.texture=Y({data:oe,width:oe.width,height:oe.height,wrapS:S.s.CLAMP_TO_EDGE,wrapT:S.s.CLAMP_TO_EDGE,min:S.s.LINEAR,mag:S.s.LINEAR});case 8:case"end":return Ce.stop()}},T)}))()}}]),l}(Xo),Au=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,Du=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,xc=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a={},T=this.getUniformsBufferInfo(a);return T}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return R=a.getShaders(),U=R.frag,Y=R.vert,oe=R.type,a.initUniformsBuffer(),Ve.next=4,a.layer.buildLayerModel({moduleName:oe,vertexShader:Y,fragmentShader:U,defines:a.getDefines(),inject:a.getInject(),triangulation:_i,depth:{enable:!0}});case 4:return me=Ve.sent,Ve.abrupt("return",[me]);case 6:case"end":return Ve.stop()}},T)}))()}},{key:"getShaders",value:function(){return{frag:Au,vert:Du,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:S.a.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(T,R,U,Y,oe){return oe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:S.a.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.size,U=R===void 0?10:R;return Array.isArray(U)?[U[0]]:[U]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:S.a.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:1,update:function(T){var R=T.extrusionBase,U=R===void 0?0:R;return[U]}}})}}]),l}(Xo),ku=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,rl=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,vc=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,Ts=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,eh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,LINEAR:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.raisingHeight,R=T===void 0?0:T,U=a.opacityLinear,Y=U===void 0?{enable:!1,dir:"in"}:U,oe={u_raisingHeight:Number(R),u_opacitylinear:Number(Y.enable),u_dir:Y.dir==="in"?1:0},me=this.getUniformsBufferInfo(oe);return me}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce;return Object(K.a)().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return R=a.getModelParams(),U=R.frag,Y=R.vert,oe=R.triangulation,me=R.type,a.initUniformsBuffer(),a.layer.triangulation=oe,ut.next=5,a.layer.buildLayerModel({moduleName:me,vertexShader:Y,fragmentShader:U,defines:a.getDefines(),inject:a.getInject(),triangulation:oe,primitive:S.s.TRIANGLES,depth:{enable:!1}});case 5:return Ce=ut.sent,ut.abrupt("return",[Ce]);case 7:case"end":return ut.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute();var a=this.layer.getLayerConfig(),T=a.opacityLinear,R=T===void 0?{enable:!1,dir:"in"}:T;R.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:S.a.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:3,update:function(Y,oe,me){return[me[3],me[4],me[5]]}}})}},{key:"getModelParams",value:function(){var a=this.layer.getLayerConfig(),T=a.opacityLinear,R=T===void 0?{enable:!1}:T;return R.enable?{frag:rl,vert:vc,type:"polygonLinear",triangulation:ra}:{frag:ku,vert:Ts,type:"polygonFill",triangulation:co}}}]),l}(Xo),qc=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,Tf=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`,Gc=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture1",void 0),Object(r.a)(Object(p.a)(m),"texture2",void 0),Object(r.a)(Object(p.a)(m),"texture3",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,UV:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.watercolor,R=T===void 0?"#6D99A8":T,U=a.watercolor2,Y=U===void 0?"#0F121C":U,oe={u_watercolor:Object(n.R)(R),u_watercolor2:Object(n.R)(Y),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};this.textures=[this.texture1,this.texture2,this.texture3];var me=this.getUniformsBufferInfo(oe);return me}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.loadTexture(),U.abrupt("return",a.buildModels());case 2:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:Tf,fragmentShader:qc,defines:a.getDefines(),inject:a.getInject(),triangulation:co,primitive:S.s.TRIANGLES,depth:{enable:!1}});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"clearModels",value:function(){var a,T,R;(a=this.texture1)===null||a===void 0||a.destroy(),(T=this.texture2)===null||T===void 0||T.destroy(),(R=this.texture3)===null||R===void 0||R.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this.layer.getSource().extent,T=Object(w.a)(a,4),R=T[0],U=T[1],Y=T[2],oe=T[3],me=Y-R,Ce=oe-U;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:S.a.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(ut,Ft,Nt){var vr=Object(w.a)(Nt,2),_r=vr[0],Sr=vr[1];return[(_r-R)/me,(Sr-U)/Ce]}}})}},{key:"loadTexture",value:function(){var a=this,T=this.rendererService.createTexture2D,R={height:0,width:0};this.texture1=T(R),this.texture2=T(R),this.texture3=T(R),U(function(oe){a.texture1=Y(oe[0]),a.texture2=Y(oe[1]),a.texture3=Y(oe[2]),a.layerService.reRender()});function U(oe){var me=0,Ce=[],Ve=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];Ve.map(function(ut){var Ft=new Image;Ft.crossOrigin="",Ft.src=ut,Ce.push(Ft),Ft.onload=function(){me++,me===3&&oe(Ce)}})}function Y(oe){return T({data:oe,width:oe.width,height:oe.height,wrapS:S.s.MIRRORED_REPEAT,wrapT:S.s.MIRRORED_REPEAT,min:S.s.LINEAR,mag:S.s.LINEAR})}}}]),l}(Xo),fc=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,th=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`,rh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,UV:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.speed,R=T===void 0?.5:T,U={u_speed:R,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};this.textures=[this.texture];var Y=this.getUniformsBufferInfo(U);return Y}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a.loadTexture(),U.abrupt("return",a.buildModels());case 2:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:th,fragmentShader:fc,triangulation:co,defines:a.getDefines(),inject:a.getInject(),primitive:S.s.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this.layer.getSource().extent,T=Object(w.a)(a,4),R=T[0],U=T[1],Y=T[2],oe=T[3],me=Y-R,Ce=oe-U;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:S.a.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.STATIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(ut,Ft,Nt){var vr=Object(w.a)(Nt,2),_r=vr[0],Sr=vr[1];return[(_r-R)/me,(Sr-U)/Ce]}}})}},{key:"loadTexture",value:function(){var a=this,T=this.layer.getLayerConfig(),R=T.waterTexture,U=this.rendererService.createTexture2D;this.texture=U({height:1,width:1});var Y=new Image;Y.crossOrigin="",R?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),Y.src=R):Y.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",Y.onload=function(){a.texture=U({data:Y,width:Y.width,height:Y.height,wrapS:S.s.MIRRORED_REPEAT,wrapT:S.s.MIRRORED_REPEAT,min:S.s.LINEAR,mag:S.s.LINEAR}),a.layerService.reRender()}}}]),l}(Xo),nh={fill:eh,line:hp,extrude:ms,text:$u,point_fill:Wt,point_image:Jr,point_normal:yi,point_extrude:Ze,water:rh,ocean:Gc,extrusion:xc},Ud=nh,Xc=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","PolygonLayer"),Object(r.a)(Object(p.a)(m),"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel=new Ud[R](a),Y.next=4,a.initLayerModels();case 4:case"end":return Y.stop()}},T)}))()}},{key:"getModelType",value:function(){var a,T=this.styleAttributeService.getLayerStyleAttribute("shape"),R=T==null||(a=T.scale)===null||a===void 0?void 0:a.field;return R==="fill"||!R?"fill":R==="extrude"?"extrude":R==="extrusion"?"extrusion":R==="water"?"water":R==="ocean"?"ocean":R==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var a=this.getEncodedData(),T=this.getLayerConfig(),R=T.shape2d,U=T.shape3d,Y=this.iconService.getIconMap(),oe=a.find(function(Ce){return Ce.hasOwnProperty("shape")});if(oe){var me=oe.shape;return me==="dot"?"point_normal":(R==null?void 0:R.indexOf(me))!==-1?"point_fill":(U==null?void 0:U.indexOf(me))!==-1?"point_extrude":Y.hasOwnProperty(me)?"point_image":"text"}else return"fill"}}]),l}(kf),kd=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,zd=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`,Vh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"colorTexture",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,UV:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=T===void 0?1:T,U=a.clampLow,Y=U===void 0?!0:U,oe=a.clampHigh,me=oe===void 0?!0:oe,Ce=a.noDataValue,Ve=Ce===void 0?-9999999:Ce,ut=a.domain,Ft=a.rampColors,Nt=ut||Object(n.D)(Ft);this.colorTexture=this.layer.textureService.getColorTexture(Ft,Nt);var vr={u_domain:Nt,u_opacity:R||1,u_noDataValue:Ve,u_clampLow:Y?1:0,u_clampHigh:(typeof me!="undefined"?me:Y)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};this.textures=[this.texture,this.colorTexture];var _r=this.getUniformsBufferInfo(vr);return _r}},{key:"getRasterData",value:function(a){return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!Array.isArray(a.data)){Ce.next=4;break}return Ce.abrupt("return",{data:a.data,width:a.width,height:a.height});case 4:return Ce.next=6,a.data;case 6:return R=Ce.sent,U=R.rasterData,Y=R.width,oe=R.height,Ce.abrupt("return",{data:Array.from(U),width:Y,height:oe});case 11:case"end":return Ce.stop()}},T)}))()}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut,Ft,Nt;return Object(K.a)().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return a.initUniformsBuffer(),R=a.layer.getSource(),U=a.rendererService,Y=U.createTexture2D,oe=U.queryVerdorInfo,me=R.data.dataArray[0],_r.next=6,a.getRasterData(me);case 6:return Ce=_r.sent,Ve=Ce.data,ut=Ce.width,Ft=Ce.height,a.texture=Y({data:new Float32Array(Ve),width:ut,height:Ft,format:oe()==="WebGL1"?S.s.LUMINANCE:S.s.RED,type:S.s.FLOAT,alignment:1}),_r.next=13,a.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:zd,fragmentShader:kd,defines:a.getDefines(),triangulation:Vo,primitive:S.s.TRIANGLES,depth:{enable:!1},pickingEnabled:!1});case 13:return Nt=_r.sent,_r.abrupt("return",[Nt]);case 15:case"end":return _r.stop()}},T)}))()}},{key:"clearModels",value:function(){var a,T;(a=this.texture)===null||a===void 0||a.destroy(),(T=this.colorTexture)===null||T===void 0||T.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}})}}]),l}(Xo),Av=["data"],Vd=["rasterData"],Ov=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,_h=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`,sd=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),Object(r.a)(Object(p.a)(m),"dataOption",{}),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,UV:9})}},{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=T===void 0?1:T,U=a.noDataValue,Y=U===void 0?0:U,oe=this.dataOption,me=oe.rMinMax,Ce=me===void 0?[0,255]:me,Ve=oe.gMinMax,ut=Ve===void 0?[0,255]:Ve,Ft=oe.bMinMax,Nt=Ft===void 0?[0,255]:Ft,vr={u_rminmax:Ce,u_gminmax:ut,u_bminmax:Nt,u_opacity:R||1,u_noDataValue:Y,u_texture:this.texture};this.textures=[this.texture];var _r=this.getUniformsBufferInfo(vr);return _r}},{key:"getRasterData",value:function(a){var T=this;return Object(ie.a)(Object(K.a)().mark(function R(){var U,Y,oe,me,Ce;return Object(K.a)().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(!Array.isArray(a.data)){ut.next=4;break}return U=a.data,Y=Object(V.a)(a,Av),T.dataOption=Y,ut.abrupt("return",Object(i.a)({data:U},Y));case 4:return ut.next=6,a.data;case 6:if(oe=ut.sent,me=oe.rasterData,Ce=Object(V.a)(oe,Vd),T.dataOption=Ce,!Array.isArray(me)){ut.next=14;break}return ut.abrupt("return",Object(i.a)({data:me},Ce));case 14:return ut.abrupt("return",Object(i.a)({data:Array.from(me)},Ce));case 15:case"end":return ut.stop()}},R)}))()}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut;return Object(K.a)().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return a.initUniformsBuffer(),R=a.layer.getSource(),U=a.rendererService.createTexture2D,Y=R.data.dataArray[0],Nt.next=6,a.getRasterData(Y);case 6:return oe=Nt.sent,me=oe.data,Ce=oe.width,Ve=oe.height,a.texture=U({data:new Float32Array(me),width:Ce,height:Ve,format:S.s.RGB,type:S.s.FLOAT}),Nt.next=13,a.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:_h,fragmentShader:Ov,defines:a.getDefines(),triangulation:Vo,primitive:S.s.TRIANGLES,depth:{enable:!1},pickingEnabled:!1});case 13:return ut=Nt.sent,Nt.abrupt("return",[ut]);case 15:case"end":return Nt.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.initModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}})}}]),l}(Xo),Tv=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,ud=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`,bh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"texture",void 0),m}return Object(v.a)(l,[{key:"attributeLocation",get:function(){return Object.assign(Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this),{MAX:Object(C.a)(Object(O.a)(l.prototype),"attributeLocation",this).MAX,UV:9})}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=a.clampLow,U=R===void 0?!0:R,Y=a.clampHigh,oe=Y===void 0?!0:Y,me=a.noDataValue,Ce=me===void 0?-9999999:me,Ve=a.domain,ut=a.rampColors,Ft=a.colorTexture,Nt=a.rScaler,vr=Nt===void 0?6553.6:Nt,_r=a.gScaler,Sr=_r===void 0?25.6:_r,cn=a.bScaler,Bn=cn===void 0?.1:cn,Kn=a.offset,wn=Kn===void 0?1e4:Kn,vn=Ve||Object(n.D)(ut),ti=Ft;Ft?this.layer.textureService.setColorTexture(Ft,ut,vn):ti=this.layer.textureService.getColorTexture(ut,vn);var Mi={u_unpack:[vr,Sr,Bn,wn],u_domain:vn,u_opacity:T||1,u_noDataValue:Ce,u_clampLow:U,u_clampHigh:typeof oe!="undefined"?oe:U,u_texture:this.texture,u_colorTexture:ti};this.textures=[this.texture,ti];var Ki=this.getUniformsBufferInfo(Mi);return Ki}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return a.initUniformsBuffer(),R=a.layer.getSource(),U=a.rendererService.createTexture2D,Ce.next=5,R.data.images;case 5:return Y=Ce.sent,a.texture=U({data:Y[0],width:Y[0].width,height:Y[0].height,min:S.s.LINEAR,mag:S.s.LINEAR}),Ce.next=9,a.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:ud,fragmentShader:Tv,defines:a.getDefines(),triangulation:Vo,primitive:S.s.TRIANGLES,depth:{enable:!1}});case 9:return oe=Ce.sent,Ce.abrupt("return",[oe]);case 11:case"end":return Ce.stop()}},T)}))()}},{key:"clearModels",value:function(){var a;(a=this.texture)===null||a===void 0||a.destroy()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.initModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"registerBuiltinAttributes",value:function(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:S.a.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:S.s.DYNAMIC_DRAW,data:[],type:S.s.FLOAT},size:2,update:function(T,R,U){return[U[3],U[4]]}}})}}]),l}(Xo),Wd={raster:Vh,rasterRgb:sd,raster3d:Vh,rasterTerrainRgb:bh},Mv=Wd,Wh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","RasterLayer"),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel=new Mv[R](a),Y.next=4,a.initLayerModels();case 4:case"end":return Y.stop()}},T)}))()}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),T={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return T[a]}},{key:"getModelType",value:function(){var a=this.layerSource.getParserType();switch(a){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}},{key:"getLegend",value:function(a){if(a!=="color")return{type:void 0,field:void 0,items:[]};var T=this.getLayerConfig().rampColors;return ec(T,a)}}]),l}(kf),ld=function(){function t(y){var l=y.rendererService,m=y.layerService,a=y.parent;Object(g.a)(this,t),Object(r.a)(this,"tileResource",new Map),Object(r.a)(this,"rendererService",void 0),Object(r.a)(this,"layerService",void 0),Object(r.a)(this,"parent",void 0),Object(r.a)(this,"layerTiles",[]),this.rendererService=l,this.layerService=m,this.parent=a}return Object(v.a)(t,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(l){return this.layerTiles.some(function(m){return m.key===l})}},{key:"addTile",value:function(l){this.layerTiles.push(l)}},{key:"getTile",value:function(l){return this.layerTiles.find(function(m){return m.key===l})}},{key:"getVisibleTileBylngLat",value:function(l){return this.layerTiles.find(function(m){return m.isLoaded&&m.visible&&m.lnglatInBounds(l)})}},{key:"removeTile",value:function(l){var m=this.layerTiles.findIndex(function(T){return T.key===l}),a=this.layerTiles.splice(m,1);a[0]&&a[0].destroy()}},{key:"updateTileVisible",value:function(l){var m=this.getTile(l.key);if(l.isVisible)if(l.parent){var a=this.isChildrenLoaded(l.parent);m==null||m.updateVisible(a)}else m==null||m.updateVisible(!0);else if(l.parent){var T=this.isChildrenLoaded(l.parent);m==null||m.updateVisible(!T)}else m==null||m.updateVisible(!1)}},{key:"isParentLoaded",value:function(l){var m=l.parent;if(!m)return!0;var a=this.getTile(m==null?void 0:m.key);return!!(a!=null&&a.isLoaded)}},{key:"isChildrenLoaded",value:function(l){var m=this,a=l==null?void 0:l.children;return a.length===0?!0:a.every(function(T){var R=m.getTile(T==null?void 0:T.key);return R?(R==null?void 0:R.isLoaded)===!0:!0})}},{key:"render",value:function(){var l=this;return Object(ie.a)(Object(K.a)().mark(function m(){var a,T;return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a=l.getRenderLayers(),T=a.map(function(){var Y=Object(ie.a)(Object(K.a)().mark(function oe(me){return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,l.layerService.renderTileLayer(me);case 2:case"end":return Ve.stop()}},oe)}));return function(oe){return Y.apply(this,arguments)}}()),U.next=4,Promise.all(T);case 4:case"end":return U.stop()}},m)}))()}},{key:"getRenderLayers",value:function(){var l=this.layerTiles.filter(function(a){return a.visible&&a.isLoaded}),m=[];return l.map(function(a){return m.push.apply(m,Object(J.a)(a.getLayers()))}),m}},{key:"getLayers",value:function(){var l=this.layerTiles.filter(function(a){return a.isLoaded}),m=[];return l.map(function(a){return m.push.apply(m,Object(J.a)(a.getLayers()))}),m}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(l){return l.destroy()}),this.tileResource.clear()}}]),t}(),cd=Ee("0wsv"),Cv=Ee("3L5V"),fd=Ee.n(Cv),Hd=Ee("RwN2");function Gd(t,y,l){l===void 0&&(l={});var m=Object(Hd.b)(t),a=Object(Hd.b)(y),T=fd.a.union(m.coordinates,a.coordinates);return T.length===0?null:T.length===1?Object(cd.i)(T[0],l.properties):Object(cd.g)(T,l.properties)}var Xd=Gd,Yd=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"getCombineFeature",value:function(l){var m=null,a=l[0];return l.map(function(T){var R=cd.i(T.coordinates);m===null?m=R:m=Xd(m,R)}),a&&(m.properties=Object(i.a)({},a)),m}}]),t}(),zf="select",ih="active",hd=function(){function t(y){var l=y.layerService,m=y.tileLayerService,a=y.parent;Object(g.a)(this,t),Object(r.a)(this,"layerService",void 0),Object(r.a)(this,"tileLayerService",void 0),Object(r.a)(this,"tileSourceService",void 0),Object(r.a)(this,"parent",void 0),Object(r.a)(this,"tilePickID",new Map),this.layerService=l,this.tileLayerService=m,this.parent=a,this.tileSourceService=new Yd}return Object(v.a)(t,[{key:"pickRender",value:function(l){var m=this.tileLayerService.getVisibleTileBylngLat(l.lngLat);if(m){var a=m.getMainLayer();a==null||a.layerPickService.pickRender(l)}}},{key:"pick",value:function(l,m){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(R=a.parent.getContainer(),U=R.pickingService,l.type!=="RasterLayer"){Ce.next=8;break}if(Y=a.tileLayerService.getVisibleTileBylngLat(m.lngLat),!(Y&&Y.getMainLayer()!==void 0)){Ce.next=7;break}return oe=Y.getMainLayer(),Ce.abrupt("return",oe.layerPickService.pickRasterLayer(oe,m,a.parent));case 7:return Ce.abrupt("return",!1);case 8:return a.pickRender(m),Ce.abrupt("return",U.pickFromPickingFBO(l,m));case 10:case"end":return Ce.stop()}},T)}))()}},{key:"selectFeature",value:function(l){var m=Object(w.a)(l,3),a=m[0],T=m[1],R=m[2],U=this.color2PickId(a,T,R);this.tilePickID.set(zf,U),this.updateHighLight(a,T,R,zf)}},{key:"highlightPickedFeature",value:function(l){var m=Object(w.a)(l,3),a=m[0],T=m[1],R=m[2],U=this.color2PickId(a,T,R);this.tilePickID.set(ih,U),this.updateHighLight(a,T,R,ih)}},{key:"updateHighLight",value:function(l,m,a,T){this.tileLayerService.tiles.map(function(R){var U=R.getMainLayer();switch(T){case zf:U==null||U.hooks.beforeSelect.call([l,m,a]);break;case ih:U==null||U.hooks.beforeHighlight.call([l,m,a]);break}})}},{key:"setPickState",value:function(){var l=this.tilePickID.get(zf),m=this.tilePickID.get(ih);if(l){var a=this.pickId2Color(l),T=Object(w.a)(a,3),R=T[0],U=T[1],Y=T[2];this.updateHighLight(R,U,Y,zf);return}if(m){var oe=this.pickId2Color(m),me=Object(w.a)(oe,3),Ce=me[0],Ve=me[1],ut=me[2];this.updateHighLight(Ce,Ve,ut,ih);return}}},{key:"color2PickId",value:function(l,m,a){return Object(n.p)(new Uint8Array([l,m,a]))}},{key:"pickId2Color",value:function(l){return Object(n.r)(l)}},{key:"getFeatureById",value:function(l){var m=this.tileLayerService.getTiles().filter(function(T){return T.visible}),a=[];return m.forEach(function(T){a.push.apply(a,Object(J.a)(T.getFeatureById(l)))}),a}},{key:"pickRasterLayer",value:function(){return!1}}]),t}();function dd(t){return t==="PolygonLayer"?Xc:t==="LineLayer"?Sv:Fl}function $d(t){return["PolygonLayer","LineLayer"].indexOf(t)!==-1}var ah=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a){var T;return Object(g.a)(this,l),T=y.call(this),Object(r.a)(Object(p.a)(T),"x",void 0),Object(r.a)(Object(p.a)(T),"y",void 0),Object(r.a)(Object(p.a)(T),"z",void 0),Object(r.a)(Object(p.a)(T),"key",void 0),Object(r.a)(Object(p.a)(T),"parent",void 0),Object(r.a)(Object(p.a)(T),"sourceTile",void 0),Object(r.a)(Object(p.a)(T),"visible",!0),Object(r.a)(Object(p.a)(T),"layers",[]),Object(r.a)(Object(p.a)(T),"isLoaded",!1),Object(r.a)(Object(p.a)(T),"tileMaskLayers",[]),Object(r.a)(Object(p.a)(T),"tileMask",void 0),T.parent=a,T.sourceTile=m,T.x=m.x,T.y=m.y,T.z=m.z,T.key="".concat(T.x,"_").concat(T.y,"_").concat(T.z),T}return Object(v.a)(l,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(a){var T=Object(w.a)(this.sourceTile.bounds,4),R=T[0],U=T[1],Y=T[2],oe=T[3],me=a.lng,Ce=a.lat;return me>=R&&me<=Y&&Ce>=U&&Ce<=oe}},{key:"getLayerOptions",value:function(){var a,T=this.parent.getLayerConfig();return Object(i.a)(Object(i.a)({},T),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:$d(this.parent.type),mask:T.mask||((a=T.maskLayers)===null||a===void 0?void 0:a.length)!==0&&T.enableMask})}},{key:"getMaskLayer",value:function(){var a=this,T=this.parent.getLayerConfig(),R=T.maskLayers,U=[];return R==null||R.forEach(function(Y){if(!Y.tileLayer)return U.push(Y),Y;var oe=Y.tileLayer,me=oe.getTile(a.sourceTile.key),Ce=me==null?void 0:me.getLayers()[0];Ce&&U.push(Ce)}),U}},{key:"addTileMask",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y;return Object(K.a)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return R=new Xc({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[a.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),U=Object(S.q)(a.parent.container),R.setContainer(U),me.next=5,R.init();case 5:return a.tileMask=R,Y=a.getMainLayer(),Y!==void 0&&(Y.tileMask=R),me.abrupt("return",R);case 9:case"end":return me.stop()}},T)}))()}},{key:"addMask",value:function(a,T){var R=this;return Object(ie.a)(Object(K.a)().mark(function U(){var Y;return Object(K.a)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return Y=Object(S.q)(R.parent.container),T.setContainer(Y),me.next=4,T.init();case 4:a.addMask(T),R.tileMaskLayers.push(T);case 6:case"end":return me.stop()}},U)}))()}},{key:"addLayer",value:function(a){var T=this;return Object(ie.a)(Object(K.a)().mark(function R(){var U;return Object(K.a)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return a.isTileLayer=!0,U=Object(S.q)(T.parent.container),a.setContainer(U),T.layers.push(a),oe.next=6,a.init();case 6:case"end":return oe.stop()}},R)}))()}},{key:"updateVisible",value:function(a){this.visible=a,this.updateOptions("visible",a)}},{key:"updateOptions",value:function(a,T){this.layers.forEach(function(R){R.updateLayerConfig(Object(d.a)({},a,T))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(a){return[]}},{key:"getFeatureById",value:function(a){return[]}},{key:"destroy",value:function(){var a;(a=this.tileMask)===null||a===void 0||a.destroy(),this.layers.forEach(function(T){return T.destroy()})}}]),l}(s.EventEmitter),vp=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.getSourceOption(),U=R.data.features[0].properties,Y=new Sv().source(R.data,R.options).size(1).shape("line").color("red"),oe=new Fl({minZoom:a.z-1,maxZoom:a.z+1,textAllowOverlap:!0}).source([U],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(a.key).style({stroke:"#fff",strokeWidth:2}),Ce.next=6,a.addLayer(Y);case 6:return Ce.next=8,a.addLayer(oe);case 8:a.isLoaded=!0;case 9:case"end":return Ce.stop()}},T)}))()}},{key:"getSourceOption",value:function(){var a=this.parent.getSource(),T=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:T},options:{parser:{type:"geojson"},transforms:a.transforms}}}}]),l}(ah),ig=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.parent.getLayerAttributeConfig(),U=a.getLayerOptions(),Y=a.getSourceOption(),oe=new pn(Object(i.a)({},U)).source(Y.data,Y.options),R&&Object.keys(R).forEach(function(Ve){var ut,Ft,Nt=Ve;oe[Nt]((ut=R[Nt])===null||ut===void 0?void 0:ut.field,(Ft=R[Nt])===null||Ft===void 0?void 0:Ft.values)}),Ce.next=7,a.addLayer(oe);case 7:a.isLoaded=!0;case 8:case"end":return Ce.stop()}},T)}))()}},{key:"getSourceOption",value:function(){var a=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:a.transforms}}}}]),l}(ah),pp=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,ag=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`,gp=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"getUninforms",value:function(){var a=this.getCommonUniformsInfo(),T=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Object(i.a)(Object(i.a)({},a.uniformsOption),T.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var a=this.layer.getLayerConfig(),T=a.opacity,R=T===void 0?1:T,U=a.color,Y=U===void 0?"#000":U,oe={u_color:Object(n.R)(Y),u_opacity:R||1},me=this.getUniformsBufferInfo(oe);return me}},{key:"initModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",a.buildModels());case 1:case"end":return U.stop()}},T)}))()}},{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.initUniformsBuffer(),Y.next=3,a.layer.buildLayerModel({moduleName:"mask",vertexShader:ag,fragmentShader:pp,defines:a.getDefines(),triangulation:co,depth:{enable:!1},pick:!1});case 3:return R=Y.sent,Y.abrupt("return",[R]);case 5:case"end":return Y.stop()}},T)}))()}},{key:"clearModels",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),l}(Xo),l0={fill:gp},dm=l0,vd=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"type","MaskLayer"),m}return Object(v.a)(l,[{key:"buildModels",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return R=a.getModelType(),a.layerModel=new dm[R](a),Y.next=4,a.initLayerModels();case 4:case"end":return Y.stop()}},T)}))()}},{key:"getModelType",value:function(){return"fill"}}]),l}(kf),bl=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.parent.getLayerAttributeConfig(),U=a.getLayerOptions(),Y=a.getSourceOption(),oe=new vd(Object(i.a)({},U)).source(Y.data,Y.options),R&&Object.keys(R).forEach(function(Ve){var ut,Ft,Nt=Ve;oe[Nt]((ut=R[Nt])===null||ut===void 0?void 0:ut.field,(Ft=R[Nt])===null||Ft===void 0?void 0:Ft.values)}),Ce.next=7,a.addLayer(oe);case 7:a.isLoaded=!0;case 8:case"end":return Ce.stop()}},T)}))()}},{key:"getFeatures",value:function(a){if(!a)return[];var T=this.sourceTile.data;return T.getTileData(a)}},{key:"getSourceOption",value:function(){var a=this.parent.getSource(),T=this.parent.getLayerConfig(),R=T.sourceLayer,U=T.featureId,Y=this.getFeatures(R);return{data:{type:"FeatureCollection",features:Y},options:{parser:{type:"geojson",featureId:U},transforms:a.transforms}}}}]),l}(ah),Mf=["rasterData"],vm=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.parent.getLayerAttributeConfig(),U=a.getLayerOptions(),Y=a.getSourceOption(),oe=new Wh(Object(i.a)({},U)).source(Y.data,Y.options),R&&Object.keys(R).forEach(function(Ve){var ut,Ft,Nt=Ve;oe[Nt]((ut=R[Nt])===null||ut===void 0?void 0:ut.field,(Ft=R[Nt])===null||Ft===void 0?void 0:Ft.values)}),Ce.next=7,a.addLayer(oe);case 7:a.isLoaded=!0;case 8:case"end":return Ce.stop()}},T)}))()}},{key:"getSourceOption",value:function(){var a=this.parent.getSource(),T=this.sourceTile.data.data,R=T.rasterData,U=Object(V.a)(T,Mf);return{data:R,options:{parser:Object(i.a)({type:"rasterRgb",extent:this.sourceTile.bounds},U),transforms:a.transforms}}}}]),l}(ah),xh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe;return Object(K.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return R=a.parent.getLayerAttributeConfig(),U=a.getLayerOptions(),Y=a.getSourceOption(),oe=new Wh(Object(i.a)({},U)).source(Y.data,Y.options),R&&Object.keys(R).forEach(function(Ve){var ut,Ft,Nt=Ve;oe[Nt]((ut=R[Nt])===null||ut===void 0?void 0:ut.field,(Ft=R[Nt])===null||Ft===void 0?void 0:Ft.values)}),Ce.next=7,a.addLayer(oe);case 7:a.isLoaded=!0;case 8:case"end":return Ce.stop()}},T)}))()}},{key:"getSourceOption",value:function(){var a=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:a.transforms}}}}]),l}(ah),mp=["rasterData"],og={positions:[0,1],colors:["#000","#fff"]},Pv=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"colorTexture",void 0),m}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve;return Object(K.a)().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return R=a.parent.getLayerAttributeConfig(),U=a.getLayerOptions(),Y=a.getSourceOption(),oe=a.getLayerOptions(),me=oe.rampColors,Ce=oe.domain,a.colorTexture=a.parent.textureService.getColorTexture(me,Ce),Ve=new Wh(Object(i.a)(Object(i.a)({},U),{},{colorTexture:a.colorTexture})).source(Y.data,Y.options),R&&Object.keys(R).forEach(function(Nt){var vr,_r,Sr=Nt;Ve[Sr]((vr=R[Sr])===null||vr===void 0?void 0:vr.field,(_r=R[Sr])===null||_r===void 0?void 0:_r.values)}),Ft.next=9,a.addLayer(Ve);case 9:a.isLoaded=!0;case 10:case"end":return Ft.stop()}},T)}))()}},{key:"getSourceOption",value:function(){var a=this.parent.getSource(),T=this.sourceTile.data.data,R=T.rasterData,U=Object(V.a)(T,mp);return{data:R,options:{parser:Object(i.a)({type:"raster",extent:this.sourceTile.bounds},U),transforms:a.transforms}}}},{key:"styleUpdate",value:function(){for(var a=this,T=arguments.length,R=new Array(T),U=0;U<T;U++)R[U]=arguments[U];var Y=R.rampColors,oe=Y===void 0?og:Y,me=R.domain;this.colorTexture=this.parent.textureService.getColorTexture(oe,me||Object(n.D)(oe)),this.layers.forEach(function(Ce){return Ce.style({colorTexture:a.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(a){return a.destroy()})}}]),l}(ah),ef=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"initTileLayer",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(R=a.parent.getLayerAttributeConfig(),U=a.getLayerOptions(),Y=dd(a.parent.type),oe=a.getSourceOption(),oe){Ve.next=8;break}return a.isLoaded=!0,a.emit("loaded"),Ve.abrupt("return");case 8:return me=new Y(Object(i.a)({},U)).source(oe.data,oe.options),Object.keys(R).forEach(function(ut){var Ft,Nt,vr=ut;me[vr]((Ft=R[vr])===null||Ft===void 0?void 0:Ft.field,(Nt=R[vr])===null||Nt===void 0?void 0:Nt.values)}),Ve.next=12,a.addLayer(me);case 12:if(!U.tileMask){Ve.next=15;break}return Ve.next=15,a.addTileMask();case 15:a.setLayerMinMaxZoom(me),a.isLoaded=!0,a.emit("loaded");case 18:case"end":return Ve.stop()}},T)}))()}},{key:"getSourceOption",value:function(){var a=this.parent.getSource(),T=this.parent.getLayerConfig(),R=T.sourceLayer,U=R===void 0?"defaultLayer":R,Y=T.featureId,oe=Y===void 0?"id":Y,me=this.getFeatures(U);return{data:{type:"FeatureCollection",features:me},options:{parser:{type:"geojson",featureId:oe},transforms:a.transforms}}}},{key:"setLayerMinMaxZoom",value:function(a){a.getModelType()==="text"&&a.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(a){var T=this.sourceTile.data;return T.getTileData(a)}},{key:"getFeatureById",value:function(a){var T=this.getMainLayer();if(!T)return[];var R=T.getSource().data.dataArray.filter(function(U){return U._id===a});return R}}]),l}(ah);function wv(t){var y=t.type;switch(y){case"PolygonLayer":return ef;case"LineLayer":return ef;case"PointLayer":return ef;case"TileDebugLayer":return vp;case"MaskLayer":return bl;case"RasterLayer":var l=t.getSource().parser.dataType;switch(l){case S.k.RGB:case S.k.CUSTOMRGB:return vm;case S.k.ARRAYBUFFER:case S.k.CUSTOMARRAYBUFFER:return Pv;case S.k.TERRAINRGB:case S.k.CUSTOMTERRAINRGB:return xh;default:return ig}default:return ef}}var Zd=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],Rv=n.N.debounce,Iv=function(){function t(y){var l=this;Object(g.a)(this,t),Object(r.a)(this,"parent",void 0),Object(r.a)(this,"tileLayerService",void 0),Object(r.a)(this,"mapService",void 0),Object(r.a)(this,"layerService",void 0),Object(r.a)(this,"rendererService",void 0),Object(r.a)(this,"pickingService",void 0),Object(r.a)(this,"tilePickService",void 0),Object(r.a)(this,"tilesetManager",void 0),Object(r.a)(this,"initedTileset",!1),Object(r.a)(this,"lastViewStates",void 0),Object(r.a)(this,"mapchange",function(){var a;if(l.parent.isVisible()!==!1){var T=l.getCurrentView(),R=T.latLonBounds,U=T.zoom;l.lastViewStates&&l.lastViewStates.zoom===U&&l.lastViewStates.latLonBounds.toString()===R.toString()||(l.lastViewStates={zoom:U,latLonBounds:R},(a=l.tilesetManager)===null||a===void 0||a.throttleUpdate(U,R))}}),Object(r.a)(this,"viewchange",Rv(this.mapchange,24)),this.parent=y;var m=this.parent.getContainer();this.rendererService=m.rendererService,this.layerService=m.layerService,this.mapService=m.mapService,this.pickingService=m.pickingService,this.tileLayerService=new ld({rendererService:this.rendererService,layerService:this.layerService,parent:y}),this.tilePickService=new hd({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:y}),this.parent.setLayerPickService(this.tilePickService),this.proxy(y),this.initTileSetManager()}return Object(v.a)(t,[{key:"initTileSetManager",value:function(){var l,m=this.parent.getSource();if(this.tilesetManager=m.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()!==!1){var a=this.getCurrentView(),T=a.latLonBounds,R=a.zoom;(l=this.tilesetManager)===null||l===void 0||l.update(R,T)}}},{key:"getCurrentView",value:function(){var l=this.mapService.getBounds(),m=[l[0][0],l[0][1],l[1][0],l[1][1]],a=this.mapService.getZoom();return{latLonBounds:m,zoom:a}}},{key:"bindTilesetEvent",value:function(){var l=this;this.tilesetManager.on("tile-loaded",function(m){}),this.tilesetManager.on("tile-unload",function(m){l.tileUnLoad(m)}),this.tilesetManager.on("tile-error",function(m,a){l.tileError(m)}),this.tilesetManager.on("tile-update",function(){l.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(l){return this.tileLayerService.getTile(l)}},{key:"tileLoaded",value:function(l){}},{key:"tileError",value:function(l){console.warn("error:",l)}},{key:"destroy",value:function(){var l;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(l=this.tilesetManager)===null||l===void 0||l.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var l;this.tilesetManager.clear();var m=this.getCurrentView(),a=m.latLonBounds,T=m.zoom;(l=this.tilesetManager)===null||l===void 0||l.update(T,a)}},{key:"tileUnLoad",value:function(l){this.tileLayerService.removeTile(l.key)}},{key:"tileUpdate",value:function(){var l=this;return Object(ie.a)(Object(K.a)().mark(function m(){var a,T,R;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(l.tilesetManager){Y.next=2;break}return Y.abrupt("return");case 2:return a=l.parent.getMinZoom(),T=l.parent.getMaxZoom(),R=l.tilesetManager.tiles.filter(function(oe){return oe.isLoaded}).filter(function(oe){return oe.isVisibleChange}).filter(function(oe){return oe.data}).filter(function(oe){return oe.z>=a&&oe.z<T}),Y.next=7,Promise.all(R.map(function(){var oe=Object(ie.a)(Object(K.a)().mark(function me(Ce){var Ve,ut;return Object(K.a)().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(l.tileLayerService.hasTile(Ce.key)){Nt.next=9;break}return Ve=wv(l.parent),ut=new Ve(Ce,l.parent),Nt.next=5,ut.initTileLayer();case 5:l.tilePickService.setPickState(),ut.getLayers().length!==0&&(l.tileLayerService.addTile(ut),l.tileLayerService.updateTileVisible(Ce),l.layerService.reRender()),Nt.next=12;break;case 9:l.tileLayerService.updateTileVisible(Ce),l.tilePickService.setPickState(),l.layerService.reRender();case 12:case"end":return Nt.stop()}},me)}));return function(me){return oe.apply(this,arguments)}}()));case 7:l.tilesetManager.isLoaded&&l.parent.emit("tiles-loaded",l.tilesetManager.currentTiles);case 8:case"end":return Y.stop()}},m)}))()}},{key:"setPickState",value:function(l){}},{key:"pickRender",value:function(l){this.tilePickService.pickRender(l)}},{key:"selectFeature",value:function(l){this.tilePickService.selectFeature(l)}},{key:"highlightPickedFeature",value:function(l){this.tilePickService.highlightPickedFeature(l)}},{key:"proxy",value:function(l){var m=this;Zd.forEach(function(a){var T=l[a].bind(l);l[a]=function(){for(var R=arguments.length,U=new Array(R),Y=0;Y<R;Y++)U[Y]=arguments[Y];return T.apply(void 0,U),m.getLayers().map(function(oe){oe[a].apply(oe,U)}),a==="style"&&m.getTiles().forEach(function(oe){return oe.styleUpdate.apply(oe,U)}),l}})}}]),t}(),sg=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"isMoving",!1),Object(r.a)(Object(p.a)(m),"maskLayer",void 0),Object(r.a)(Object(p.a)(m),"move",function(U){switch(U.stopPropagation(),U.type){case"touchcancel":case"touchend":case"mouseup":{var Y;m.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(Mi){document.removeEventListener(Mi,m.move)}),(Y=m.scene)===null||Y===void 0||Y.render();break}case"mousedown":case"touchstart":m.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(Mi){document.addEventListener(Mi,m.move)});case"mousemove":case"touchmove":{if(m.isMoving)if(m.controlOption.orientation==="vertical"){var oe;if("pageX"in U?oe=U.pageX:U.touches&&U.touches.length&&U.touches[0].pageX?oe=U.touches[0].pageX:U.changedTouches&&U.changedTouches.length&&(oe=U.changedTouches[0].pageX),!oe)break;var me=m.getContainerDOMRect(),Ce=m.getContainerSize(),Ve=Ce[0],ut=(me==null?void 0:me.left)||0,Ft=oe-ut+window.scrollX-document.documentElement.clientLeft,Nt=Ve-Math.min(Math.max(0,Ve-Ft),Ve),vr=Nt/Ve;m.setOptions({ratio:vr}),m.emit("moving",{size:[Nt,Ce[1]],ratio:[vr,0]})}else{var _r;if("pageY"in U?_r=U.pageY:U.touches&&U.touches.length&&U.touches[0].pageY?_r=U.touches[0].pageY:U.changedTouches&&U.changedTouches.length&&(_r=U.changedTouches[0].pageY),!_r)break;var Sr=m.getContainerDOMRect(),cn=m.getContainerSize(),Bn=cn[1],Kn=(Sr==null?void 0:Sr.top)||0,wn=_r-Kn+window.scrollY-document.documentElement.clientTop,vn=Bn-Math.min(Math.max(0,Bn-wn),Bn),ti=vn/Bn;m.setOptions({ratio:ti}),m.emit("moving",{size:[cn[0],vn],ratio:[0,ti]})}break}default:break}}),Object(r.a)(Object(p.a)(m),"getMaskLayer",function(){return console.log(m.getMaskGeoData()),new Xc({visible:!1}).source(m.getMaskGeoData()).shape("fill").color("red").style({opacity:.1})}),Object(r.a)(Object(p.a)(m),"updateMask",function(){var U;if(!!m.mapsService){var Y=m.getMaskGeoData();(U=m.maskLayer)===null||U===void 0||U.setData(Y)}}),m}return Object(v.a)(l,[{key:"getDefault",value:function(){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this)),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}},{key:"onAdd",value:function(){var a=n.a.create("div","l7-control-swipe");n.a.create("button","l7-control-swipe__button",a);var T=this.controlOption,R=T.orientation,U=R===void 0?"vertical":R,Y=T.ratio,oe=Y===void 0?.5:Y;return U==="horizontal"?(a.style.top=oe*100+"%",a.style.left=""):(a.style.left=oe*100+"%",a.style.top=""),a.classList.add(U),a}},{key:"addTo",value:function(a){this.mapsService=a.mapService,this.renderService=a.rendererService,this.layerService=a.layerService,this.controlService=a.controlService,this.configService=a.globalConfigService,this.scene=a.sceneService,this.sceneContainer=a,this.isShow=!0,this.container=this.onAdd();var T=this.controlOption,R=T.className,U=T.style,Y=T.layers,oe=T.rightLayers;R&&this.setClassName(R),U&&this.setStyle(U),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();var me=Object(S.q)(a);return this.maskLayer.setContainer(me),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(Y,!1),this.addMaskToLayers(oe,!0),this.emit("add",this),this}},{key:"onRemove",value:function(){if(this.maskLayer){var a,T=this.controlOption,R=T.layers,U=T.rightLayers;this.removeMaskFromLayers(R),this.removeMaskFromLayers(U),(a=this.layerService)===null||a===void 0||a.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}},{key:"show",value:function(){var a,T=this.container;n.a.removeClass(T,"l7-control-swipe_hide");var R=this.controlOption,U=R.layers,Y=R.rightLayers;U.forEach(function(oe){return oe.enableMask()}),Y.forEach(function(oe){return oe.enableMask()}),(a=this.scene)===null||a===void 0||a.render(),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var a,T=this.container;n.a.addClass(T,"l7-control-swipe_hide");var R=this.controlOption,U=R.layers,Y=R.rightLayers;U.forEach(function(oe){return oe.disableMask()}),Y.forEach(function(oe){return oe.disableMask()}),(a=this.scene)===null||a===void 0||a.render(),this.isShow=!1,this.emit("hide",this)}},{key:"setOptions",value:function(a){var T=Object(i.a)(Object(i.a)({},this.controlOption),a);if(a.className&&this.setClassName(a.className),a.style&&this.setStyle(a.style),(a.orientation||a.ratio!==void 0)&&this.setOrientationAndRatio(T.orientation,T.ratio),a.layers){var R=a.layers,U=this.controlOption.layers;this.setLayers(R,U,!1)}if(a.rightLayers){var Y=a.rightLayers,oe=this.controlOption.rightLayers;this.setLayers(Y,oe,!0)}this.controlOption=T,this.updateMask()}},{key:"registerEvent",value:function(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}},{key:"unRegisterEvent",value:function(){var a;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(a=this.mapsService)===null||a===void 0||a.off("camerachange",this.updateMask)}},{key:"setOrientationAndRatio",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"vertical",T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;this.container.classList.remove("horizontal","vertical"),this.container.classList.add(a),a==="horizontal"?(this.container.style.top=T*100+"%",this.container.style.left=""):(this.container.style.left=T*100+"%",this.container.style.top="")}},{key:"setLayers",value:function(a,T){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,U=a.filter(function(oe){return T.includes(oe)===!1}),Y=T.filter(function(oe){return a.includes(oe)===!1});this.addMaskToLayers(U,R),this.removeMaskFromLayers(Y)}},{key:"addMaskToLayers",value:function(a,T){var R=this;a.forEach(function(U){U.updateLayerConfig({maskInside:!T}),U.addMask(R.maskLayer)})}},{key:"removeMaskFromLayers",value:function(a){var T=this;a.forEach(function(R){R.updateLayerConfig({maskInside:!0}),R.removeMask(T.maskLayer)})}},{key:"getMaskGeoData",value:function(){var a=this.controlOption,T=a.ratio,R=T===void 0?.5:T,U=a.orientation,Y=U===void 0?"vertical":U,oe=Y==="vertical",me=this.getBounds(),Ce=Object(w.a)(me,2),Ve=Ce[0],ut=Ce[1],Ft=Object(w.a)(Ve,2),Nt=Ft[0],vr=Ft[1],_r=Object(w.a)(ut,2),Sr=_r[0],cn=_r[1],Bn;if(oe){var Kn=Nt+(Sr-Nt)*R;Bn=[[Nt,cn],[Kn,cn],[Kn,vr],Ve,[Nt,cn]]}else{var wn=this.getContainerSize(),vn=this.mapsService.containerToLngLat([wn[0],wn[1]*R]),ti=vn.lat;Bn=[[Nt,cn],ut,[Sr,ti],[Nt,ti],[Nt,cn]]}var Mi={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Bn]}}]};return Mi}},{key:"getContainerDOMRect",value:function(){var a,T=(a=this.mapsService.getContainer())===null||a===void 0?void 0:a.getBoundingClientRect();return T}},{key:"getContainerSize",value:function(){var a=this.mapsService.getSize();return a}},{key:"getBounds",value:function(){var a=this.mapsService.getBounds();return a}},{key:"addLayer",value:function(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=Array.isArray(a)?a:[a];if(T){var U,Y=(U=this.controlOption.rightLayers).concat.apply(U,Object(J.a)(R));this.setOptions({rightLayers:Y})}else{var oe,me=(oe=this.controlOption.layers).concat.apply(oe,Object(J.a)(R));this.setOptions({layers:me})}}},{key:"removeLayer",value:function(a){var T=Array.isArray(a)?a:[a],R=this.controlOption.layers.filter(function(Y){return T.includes(Y)}),U=this.controlOption.rightLayers.filter(function(Y){return T.includes(Y)});this.setOptions({layers:R,rightLayers:U})}},{key:"removeLayers",value:function(){this.setOptions({layers:[],rightLayers:[]})}}]),l}(I),ug=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"disabled",void 0),Object(r.a)(Object(p.a)(m),"zoomInButton",void 0),Object(r.a)(Object(p.a)(m),"zoomOutButton",void 0),Object(r.a)(Object(p.a)(m),"zoomNumDiv",void 0),Object(r.a)(Object(p.a)(m),"zoomIn",function(){!m.disabled&&m.mapsService.getZoom()<m.mapsService.getMaxZoom()&&m.mapsService.zoomIn()}),Object(r.a)(Object(p.a)(m),"zoomOut",function(){!m.disabled&&m.mapsService.getZoom()>m.mapsService.getMinZoom()&&m.mapsService.zoomOut()}),Object(r.a)(Object(p.a)(m),"updateDisabled",function(){var U=m.mapsService;m.zoomInButton.removeAttribute("disabled"),m.zoomOutButton.removeAttribute("disabled"),(m.disabled||U.getZoom()<=U.getMinZoom())&&m.zoomOutButton.setAttribute("disabled","true"),m.controlOption.showZoom&&m.zoomNumDiv&&(m.zoomNumDiv.innerText=String(Math.floor(U.getZoom()))),(m.disabled||U.getZoom()>=U.getMaxZoom())&&m.zoomInButton.setAttribute("disabled","true")}),m}return Object(v.a)(l,[{key:"getDefault",value:function(a){return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{position:S.j.BOTTOMRIGHT,name:"zoom",zoomInText:de("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:de("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}},{key:"setOptions",value:function(a){Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,a),this.checkUpdateOption(a,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var a=n.a.create("div","l7-control-zoom");return this.resetButtonGroup(a),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),a}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(a){n.a.clearChildren(a),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",a,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",a)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",a,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(a,T,R,U,Y){var oe=n.a.create("button",R,U);return typeof a=="string"?oe.innerHTML=a:oe.append(a),oe.title=T,Y&&oe.addEventListener("click",Y),oe}}]),l}(I),Hh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;Object(g.a)(this,l),a=y.call(this),Object(r.a)(Object(p.a)(a),"popupOption",void 0),Object(r.a)(Object(p.a)(a),"mapsService",void 0),Object(r.a)(Object(p.a)(a),"sceneService",void 0),Object(r.a)(Object(p.a)(a),"layerService",void 0),Object(r.a)(Object(p.a)(a),"scene",void 0),Object(r.a)(Object(p.a)(a),"closeButton",void 0),Object(r.a)(Object(p.a)(a),"container",void 0),Object(r.a)(Object(p.a)(a),"content",void 0),Object(r.a)(Object(p.a)(a),"contentTitle",void 0),Object(r.a)(Object(p.a)(a),"contentPanel",void 0),Object(r.a)(Object(p.a)(a),"tip",void 0),Object(r.a)(Object(p.a)(a),"isShow",!0),Object(r.a)(Object(p.a)(a),"onMouseMove",function(R){var U,Y=a.mapsService.getMapContainer(),oe=(U=Y==null?void 0:Y.getBoundingClientRect())!==null&&U!==void 0?U:{},me=oe.left,Ce=me===void 0?0:me,Ve=oe.top,ut=Ve===void 0?0:Ve;a.setPopupPosition(R.clientX-Ce,R.clientY-ut)}),Object(r.a)(Object(p.a)(a),"updateLngLatPosition",function(){if(!(!a.mapsService||a.popupOption.followCursor)){var R=a.lngLat,U=R.lng,Y=R.lat,oe=a.mapsService.lngLatToContainer([U,Y]),me=oe.x,Ce=oe.y;a.setPopupPosition(me,Ce)}}),Object(r.a)(Object(p.a)(a),"updateLngLatPositionWhenZoom",function(R){if(!(!a.mapsService||a.popupOption.followCursor)){var U=R.map,Y=U.getSize();Y.x=Y.x/2,Y.y=Y.y/2;var oe=R.center,me=R.zoom,Ce=U.DE(a.lngLat,me,oe);Ce.x=Math.round(Ce.x),Ce.y=Math.round(Ce.y),a.setPopupPosition(Ce.x,Ce.y,!0)}}),Object(r.a)(Object(p.a)(a),"onKeyDown",function(R){R.keyCode===27&&a.remove()}),Object(r.a)(Object(p.a)(a),"onCloseButtonClick",function(R){R.stopPropagation&&R.stopPropagation(),a.hide()}),Object(r.a)(Object(p.a)(a),"updatePosition",function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Y=!!a.lngLat,oe=a.popupOption,me=oe.className,Ce=oe.style,Ve=oe.maxWidth,ut=oe.anchor,Ft=oe.stopPropagation;if(!(!a.mapsService||!Y||!a.content)){var Nt=a.mapsService.getMarkerContainer();if(!a.container&&Nt&&(a.container=n.a.create("div","l7-popup ".concat(me!=null?me:""," ").concat(a.isShow?"":"l7-popup-hide"),Nt),Ce&&a.container.setAttribute("style",Ce),a.tip=n.a.create("div","l7-popup-tip",a.container),a.container.appendChild(a.content),Ft&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Sr){a.container.addEventListener(Sr,function(cn){cn.stopPropagation()})}),a.container.style.whiteSpace="nowrap"),U?a.updateLngLatPositionWhenZoom(R):a.updateLngLatPosition(),n.a.setTransform(a.container,"".concat(n.h[ut])),Object(n.j)(a.container,ut,"popup"),Ve){var vr=a.container.getBoundingClientRect(),_r=vr.width;_r>parseFloat(Ve)&&(a.container.style.width=Ve)}else a.container.style.removeProperty("width")}}),Object(r.a)(Object(p.a)(a),"updateWhenZoom",function(R){a.updatePosition(R,!0)}),Object(r.a)(Object(p.a)(a),"update",function(){a.updatePosition(null,!1)}),a.popupOption=Object(i.a)(Object(i.a)({},a.getDefault(m!=null?m:{})),m);var T=a.popupOption.lngLat;return T&&(a.lngLat=T),a}return Object(v.a)(l,[{key:"lngLat",get:function(){var a;return(a=this.popupOption.lngLat)!==null&&a!==void 0?a:{lng:0,lat:0}},set:function(a){this.popupOption.lngLat=a}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(a){this.mapsService=a.mapService,this.sceneService=a.sceneService,this.layerService=a.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=a,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var T=this.popupOption,R=T.html,U=T.text,Y=T.title;return R?this.setHTML(R):U&&this.setText(U),Y&&this.setTitle(Y),this.emit("open"),this}},{key:"remove",value:function(){if(!!(this!==null&&this!==void 0&&this.isOpen()))return this.content&&n.a.remove(this.content),this.container&&(n.a.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(a){this.show();var T=this.popupOption.className;if(this.popupOption=Object(i.a)(Object(i.a)({},this.popupOption),a),this.checkUpdateOption(a,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(n.a.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(a,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(a,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(a,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(a,["html"])&&a.html?this.setHTML(a.html):this.checkUpdateOption(a,["text"])&&a.text&&this.setText(a.text),this.checkUpdateOption(a,["className"])){var R;T&&this.container.classList.remove(T!=null?T:""),this.container.classList.add((R=a.className)!==null&&R!==void 0?R:"")}if(this.checkUpdateOption(a,["style"])){var U;n.a.addStyle(this.container,(U=a.style)!==null&&U!==void 0?U:"")}return this.checkUpdateOption(a,["lngLat"])&&a.lngLat&&this.setLnglat(a.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&n.a.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(!!this.isShow)return this.container&&n.a.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(a){return this.popupOption.html=a,this.setDOMContent(a)}},{key:"setText",value:function(a){return this.popupOption.text=a,this.setDOMContent(window.document.createTextNode(a))}},{key:"setTitle",value:function(a){this.show(),this.popupOption.title=a,a?(this.contentTitle||(this.contentTitle=n.a.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),n.a.clearChildren(this.contentTitle),n.a.appendElementType(this.contentTitle,a)):this.contentTitle&&(n.a.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var a=this.lngLat,T=a.lng,R=a.lat;return this.popupOption.autoPan&&this.mapsService.panTo([T,R]),this}},{key:"setLngLat",value:function(a){return this.setLnglat(a)}},{key:"setLnglat",value:function(a){var T=this;return this.show(),this.lngLat=a,Array.isArray(a)&&(this.lngLat={lng:a[0],lat:a[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){T.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(a){return this.popupOption.maxWidth=a,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(a){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:n.i.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(a){return this.show(),this.createContent(),n.a.appendElementType(this.contentPanel,a),this.update(),this}},{key:"updateCloseOnClick",value:function(a){var T=this,R=this.mapsService;R&&(R==null||R.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!a&&requestAnimationFrame(function(){R==null||R.on("click",T.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(a){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!a&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(a){var T,R=(T=this.mapsService)===null||T===void 0?void 0:T.getContainer();R&&(R==null||R.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!a&&(R==null||R.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var a=this;if(this.content&&n.a.remove(this.content),this.contentTitle=void 0,this.content=n.a.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var T=de("l7-icon-guanbi");n.a.addClass(T,"l7-popup-close-button"),this.content.appendChild(T),this.popupOption.closeButtonOffsets&&(T.style.right=this.popupOption.closeButtonOffsets[0]+"px",T.style.top=this.popupOption.closeButtonOffsets[1]+"px"),T.setAttribute("aria-label","Close popup"),T.addEventListener("click",function(){a.hide()}),T.addEventListener("pointerup",function(R){R.stopPropagation()}),T.addEventListener("pointerdown",function(R){R.stopPropagation()}),this.closeButton=T}else this.closeButton=void 0;this.contentPanel=n.a.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(a,T){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.container){var U=this.popupOption.offsets;this.container.style.left=a+U[0]+"px",this.container.style.top=T-U[1]+"px",R?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}},{key:"checkUpdateOption",value:function(a,T){return T.some(function(R){return R in a})}}]),l}(s.EventEmitter),lg=n.N.get,pm=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"layerClickCountByFrame",0),Object(r.a)(Object(p.a)(m),"layerConfigMap",new WeakMap),Object(r.a)(Object(p.a)(m),"displayFeatureInfo",void 0),Object(r.a)(Object(p.a)(m),"onLayerClick",function(U,Y){requestAnimationFrame(function(){if(m.popupOption.closeOnClick&&m.layerClickCountByFrame++,m.isShow&&m.isSameFeature(U,Y.featureId))m.hide();else{var oe=m.getLayerInfoFrag(U,Y),me=oe.title,Ce=oe.content;m.setDOMContent(Ce),m.setLnglat(Y.lngLat),m.setTitle(me),m.setDisplayFeatureInfo({layer:U,featureId:Y.featureId}),m.show()}})}),Object(r.a)(Object(p.a)(m),"onSceneClick",function(){m.layerClickCountByFrame=0,requestAnimationFrame(function(){m.layerClickCountByFrame||m.hide()})}),Object(r.a)(Object(p.a)(m),"onLayerHide",function(){m.hide(),m.setDisplayFeatureInfo(void 0)}),Object(r.a)(Object(p.a)(m),"updateCloseOnClick",function(){}),m}return Object(v.a)(l,[{key:"layerConfigItems",get:function(){var a,T=this.popupOption,R=T.config,U=T.items;return(a=R!=null?R:U)!==null&&a!==void 0?a:[]}},{key:"addTo",value:function(a){return Object(C.a)(Object(O.a)(l.prototype),"addTo",this).call(this,a),this.bindLayerEvent(),this.hide(),this}},{key:"remove",value:function(){return Object(C.a)(Object(O.a)(l.prototype),"remove",this).call(this),this.unbindLayerEvent(),this}},{key:"setOptions",value:function(a){this.unbindLayerEvent();var T=Object(i.a)({},a),R=T.trigger||this.popupOption.trigger,U=T.items||this.popupOption.items,Y=(U==null?void 0:U.length)===0;T.followCursor=R==="hover"&&!Y;var oe=this.isShow;return Object(C.a)(Object(O.a)(l.prototype),"setOptions",this).call(this,T),this.bindLayerEvent(),(Y||!oe)&&this.hide(),this}},{key:"getDefault",value:function(a){var T=a.trigger!=="click";return Object(i.a)(Object(i.a)({},Object(C.a)(Object(O.a)(l.prototype),"getDefault",this).call(this,a)),{},{trigger:"hover",followCursor:T,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}},{key:"bindLayerEvent",value:function(){var a=this,T=this.popupOption,R=T.trigger,U=T.closeOnClick;this.layerConfigItems.forEach(function(Y){var oe,me=a.getLayerByConfig(Y);if(!!me){var Ce=Object(i.a)({},Y);if(R==="hover"){var Ve=a.onLayerMouseMove.bind(a,me),ut=a.onLayerMouseOut.bind(a,me);Ce.onMouseMove=Ve,Ce.onMouseOut=ut,me==null||me.on("mousemove",Ve),me==null||me.on("mouseout",ut)}else{var Ft,Nt=a.onLayerClick.bind(a,me);Ce.onClick=Nt,me==null||me.on("click",Nt);var vr=(Ft=a.mapsService)===null||Ft===void 0?void 0:Ft.getMapContainer();vr&&U&&vr.addEventListener("click",a.onSceneClick)}var _r=me==null||(oe=me.getSource)===null||oe===void 0?void 0:oe.call(me),Sr=a.onSourceUpdate.bind(a);_r==null||_r.on("update",Sr),Ce.onSourceUpdate=Sr,a.layerConfigMap.set(me,Ce)}})}},{key:"unbindLayerEvent",value:function(){var a=this;this.layerConfigItems.forEach(function(T){var R,U=a.getLayerByConfig(T),Y=U&&a.layerConfigMap.get(U);if(!!Y){var oe=Y.onMouseMove,me=Y.onMouseOut,Ce=Y.onClick,Ve=Y.onSourceUpdate;if(oe&&U.off("mousemove",oe),me&&U.off("mouseout",me),Ce&&U.off("click",Ce),Ve){var ut;U==null||(ut=U.getSource())===null||ut===void 0||ut.off("update",Ve)}var Ft=(R=a.mapsService)===null||R===void 0?void 0:R.getMapContainer();Ft&&Ft.removeEventListener("click",a.onSceneClick)}})}},{key:"onLayerMouseMove",value:function(a,T){if(!this.isSameFeature(a,T.featureId)){var R=this.getLayerInfoFrag(a,T),U=R.title,Y=R.content;this.setDOMContent(Y),this.setTitle(U),this.setDisplayFeatureInfo({layer:a,featureId:T.featureId}),this.show()}}},{key:"onLayerMouseOut",value:function(a,T){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}},{key:"onSourceUpdate",value:function(){this.hide(),this.setDisplayFeatureInfo(void 0)}},{key:"getLayerInfoFrag",value:function(a,T){var R=this.layerConfigMap.get(a),U,Y=document.createDocumentFragment();if(R){var oe=T.feature;oe.type==="Feature"&&"properties"in oe&&"geometry"in oe&&(oe=oe.properties);var me=R.title,Ce=R.fields,Ve=R.customContent;if(me){U=document.createDocumentFragment();var ut=me instanceof Function?me(oe):me;n.a.appendElementType(U,ut)}if(Ve){var Ft=Ve instanceof Function?Ve(oe):Ve;n.a.appendElementType(Y,Ft)}else Ce!=null&&Ce.length&&(Ce==null||Ce.forEach(function(Nt){var vr,_r,Sr=typeof Nt=="string"?{field:Nt}:Nt,cn=Sr.field,Bn=Sr.formatField,Kn=Sr.formatValue,wn=Sr.getValue,vn=n.a.create("div","l7-layer-popup__row"),ti=wn?wn(T.feature):lg(oe,cn),Mi=(vr=Bn instanceof Function?Bn(cn,oe):Bn)!==null&&vr!==void 0?vr:cn,Ki=(_r=Kn instanceof Function?Kn(ti,oe):Kn)!==null&&_r!==void 0?_r:ti,Ii=n.a.create("span","l7-layer-popup__key",vn);n.a.appendElementType(Ii,Mi),n.a.appendElementType(Ii,document.createTextNode("\uFF1A"));var xa=n.a.create("span","l7-layer-popup__value",vn);Array.isArray(Ki)&&Ki.every(function(La){return!(La instanceof Object)})&&(Ki=Ki.map(function(La){return String(La)}).join(",")),n.a.appendElementType(xa,Ki),Y.appendChild(vn)}))}return{title:U,content:Y}}},{key:"getLayerByConfig",value:function(a){var T=a.layer;if(T instanceof Object)return T;if(typeof T=="string")return this.layerService.getLayer(T)||this.layerService.getLayerByName(T)}},{key:"isSameFeature",value:function(a,T){var R=this.displayFeatureInfo;return R&&a===R.layer&&T===R.featureId}},{key:"setDisplayFeatureInfo",value:function(a){var T=this.displayFeatureInfo;T&&T.layer.off("hide",this.onLayerHide),a&&a.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=a}}]),l}(Hh);function cg(t,y){var l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(l||m)&&(y||(y=document),!!y)){var a=y.head||y.getElementsByTagName("head")[0];if(!a){a=y.createElement("head");var T=y.body||y.getElementsByTagName("body")[0];T?T.parentNode.insertBefore(a,T):y.documentElement.appendChild(a)}var R=y.createElement("style");return R.type="text/css",R.styleSheet?R.styleSheet.cssText=t:R.appendChild(y.createTextNode(t)),a.appendChild(R),R}}cg(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var fg=Ee("fbvF"),hg=Ee.n(fg),Yc=function(){function t(y,l){Object(g.a)(this,t);var m=l.buffer,a=l.offset,T=l.stride,R=l.normalized,U=l.size,Y=l.divisor;this.buffer=m,this.attribute={buffer:m.get(),offset:a||0,stride:T||0,normalized:R||!1,divisor:Y||0},U&&(this.attribute.size=U)}return Object(v.a)(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(l){this.buffer.subData(l)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),uf,pd,Mc,lf,gd,$c,Vf,oh,Fc,cf,Ec,Cf,Pf,Kd,yp=(uf={},Object(d.a)(uf,S.s.POINTS,"points"),Object(d.a)(uf,S.s.LINES,"lines"),Object(d.a)(uf,S.s.LINE_LOOP,"line loop"),Object(d.a)(uf,S.s.LINE_STRIP,"line strip"),Object(d.a)(uf,S.s.TRIANGLES,"triangles"),Object(d.a)(uf,S.s.TRIANGLE_FAN,"triangle fan"),Object(d.a)(uf,S.s.TRIANGLE_STRIP,"triangle strip"),uf),Lv=(pd={},Object(d.a)(pd,S.s.STATIC_DRAW,"static"),Object(d.a)(pd,S.s.DYNAMIC_DRAW,"dynamic"),Object(d.a)(pd,S.s.STREAM_DRAW,"stream"),pd),wf=(Mc={},Object(d.a)(Mc,S.s.BYTE,"int8"),Object(d.a)(Mc,S.s.INT,"int32"),Object(d.a)(Mc,S.s.UNSIGNED_BYTE,"uint8"),Object(d.a)(Mc,S.s.UNSIGNED_SHORT,"uint16"),Object(d.a)(Mc,S.s.UNSIGNED_INT,"uint32"),Object(d.a)(Mc,S.s.FLOAT,"float"),Mc),dg=(lf={},Object(d.a)(lf,S.s.ALPHA,"alpha"),Object(d.a)(lf,S.s.LUMINANCE,"luminance"),Object(d.a)(lf,S.s.LUMINANCE_ALPHA,"luminance alpha"),Object(d.a)(lf,S.s.RGB,"rgb"),Object(d.a)(lf,S.s.RGBA,"rgba"),Object(d.a)(lf,S.s.RGBA4,"rgba4"),Object(d.a)(lf,S.s.RGB5_A1,"rgb5 a1"),Object(d.a)(lf,S.s.RGB565,"rgb565"),Object(d.a)(lf,S.s.DEPTH_COMPONENT,"depth"),Object(d.a)(lf,S.s.DEPTH_STENCIL,"depth stencil"),lf),_p=(gd={},Object(d.a)(gd,S.s.DONT_CARE,"dont care"),Object(d.a)(gd,S.s.NICEST,"nice"),Object(d.a)(gd,S.s.FASTEST,"fast"),gd),Dv=($c={},Object(d.a)($c,S.s.NEAREST,"nearest"),Object(d.a)($c,S.s.LINEAR,"linear"),Object(d.a)($c,S.s.LINEAR_MIPMAP_LINEAR,"mipmap"),Object(d.a)($c,S.s.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Object(d.a)($c,S.s.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Object(d.a)($c,S.s.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),$c),bp=(Vf={},Object(d.a)(Vf,S.s.REPEAT,"repeat"),Object(d.a)(Vf,S.s.CLAMP_TO_EDGE,"clamp"),Object(d.a)(Vf,S.s.MIRRORED_REPEAT,"mirror"),Vf),xp=(oh={},Object(d.a)(oh,S.s.NONE,"none"),Object(d.a)(oh,S.s.BROWSER_DEFAULT_WEBGL,"browser"),oh),vg=(Fc={},Object(d.a)(Fc,S.s.NEVER,"never"),Object(d.a)(Fc,S.s.ALWAYS,"always"),Object(d.a)(Fc,S.s.LESS,"less"),Object(d.a)(Fc,S.s.LEQUAL,"lequal"),Object(d.a)(Fc,S.s.GREATER,"greater"),Object(d.a)(Fc,S.s.GEQUAL,"gequal"),Object(d.a)(Fc,S.s.EQUAL,"equal"),Object(d.a)(Fc,S.s.NOTEQUAL,"notequal"),Fc),Ep=(cf={},Object(d.a)(cf,S.s.FUNC_ADD,"add"),Object(d.a)(cf,S.s.MIN_EXT,"min"),Object(d.a)(cf,S.s.MAX_EXT,"max"),Object(d.a)(cf,S.s.FUNC_SUBTRACT,"subtract"),Object(d.a)(cf,S.s.FUNC_REVERSE_SUBTRACT,"reverse subtract"),cf),md=(Ec={},Object(d.a)(Ec,S.s.ZERO,"zero"),Object(d.a)(Ec,S.s.ONE,"one"),Object(d.a)(Ec,S.s.SRC_COLOR,"src color"),Object(d.a)(Ec,S.s.ONE_MINUS_SRC_COLOR,"one minus src color"),Object(d.a)(Ec,S.s.SRC_ALPHA,"src alpha"),Object(d.a)(Ec,S.s.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Object(d.a)(Ec,S.s.DST_COLOR,"dst color"),Object(d.a)(Ec,S.s.ONE_MINUS_DST_COLOR,"one minus dst color"),Object(d.a)(Ec,S.s.DST_ALPHA,"dst alpha"),Object(d.a)(Ec,S.s.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Object(d.a)(Ec,S.s.CONSTANT_COLOR,"constant color"),Object(d.a)(Ec,S.s.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Object(d.a)(Ec,S.s.CONSTANT_ALPHA,"constant alpha"),Object(d.a)(Ec,S.s.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Object(d.a)(Ec,S.s.SRC_ALPHA_SATURATE,"src alpha saturate"),Ec),pg=(Cf={},Object(d.a)(Cf,S.s.NEVER,"never"),Object(d.a)(Cf,S.s.ALWAYS,"always"),Object(d.a)(Cf,S.s.LESS,"less"),Object(d.a)(Cf,S.s.LEQUAL,"lequal"),Object(d.a)(Cf,S.s.GREATER,"greater"),Object(d.a)(Cf,S.s.GEQUAL,"gequal"),Object(d.a)(Cf,S.s.EQUAL,"equal"),Object(d.a)(Cf,S.s.NOTEQUAL,"notequal"),Cf),Wf=(Pf={},Object(d.a)(Pf,S.s.ZERO,"zero"),Object(d.a)(Pf,S.s.KEEP,"keep"),Object(d.a)(Pf,S.s.REPLACE,"replace"),Object(d.a)(Pf,S.s.INVERT,"invert"),Object(d.a)(Pf,S.s.INCR,"increment"),Object(d.a)(Pf,S.s.DECR,"decrement"),Object(d.a)(Pf,S.s.INCR_WRAP,"increment wrap"),Object(d.a)(Pf,S.s.DECR_WRAP,"decrement wrap"),Pf),gg=(Kd={},Object(d.a)(Kd,S.s.FRONT,"front"),Object(d.a)(Kd,S.s.BACK,"back"),Kd),jv=function(){function t(y,l){Object(g.a)(this,t),this.isDestroyed=!1;var m=l.data,a=l.usage,T=l.type;this.buffer=y.buffer({data:m,usage:Lv[a||S.s.STATIC_DRAW],type:wf[T||S.s.UNSIGNED_BYTE]})}return Object(v.a)(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(l){var m=l.data,a=l.offset;this.buffer.subdata(m,a)}}]),t}(),gm=function(){function t(y,l){Object(g.a)(this,t);var m=l.data,a=l.usage,T=l.type,R=l.count;this.elements=y.elements({data:m,usage:Lv[a||S.s.STATIC_DRAW],type:wf[T||S.s.UNSIGNED_BYTE],count:R})}return Object(v.a)(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(l){var m=l.data;this.elements.subdata(m)}},{key:"destroy",value:function(){}}]),t}(),mg=function(){function t(y,l){Object(g.a)(this,t);var m=l.width,a=l.height,T=l.color,R=l.colors,U={width:m,height:a};Array.isArray(R)&&(U.colors=R.map(function(Y){return Y.get()})),T&&typeof T!="boolean"&&(U.color=T.get()),this.framebuffer=y.framebuffer(U)}return Object(v.a)(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(l){var m=l.width,a=l.height;this.framebuffer.resize(m,a)}}]),t}(),yg=Ee("9og8");function ff(t){return t==null}function yd(t){return typeof t=="number"}var mm=function(y,l,m){return y<l?l:y>m?m:y},ym=mm,Sp=function(y,l){return Sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,a){m.__proto__=a}||function(m,a){for(var T in a)Object.prototype.hasOwnProperty.call(a,T)&&(m[T]=a[T])},Sp(y,l)};function gl(t,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");Sp(t,y);function l(){this.constructor=t}t.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)}var ml=function(){return ml=Object.assign||function(l){for(var m,a=1,T=arguments.length;a<T;a++){m=arguments[a];for(var R in m)Object.prototype.hasOwnProperty.call(m,R)&&(l[R]=m[R])}return l},ml.apply(this,arguments)};function Rf(t,y){var l={};for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&y.indexOf(m)<0&&(l[m]=t[m]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,m=Object.getOwnPropertySymbols(t);a<m.length;a++)y.indexOf(m[a])<0&&Object.prototype.propertyIsEnumerable.call(t,m[a])&&(l[m[a]]=t[m[a]]);return l}function Bv(t,y,l,m){var a=arguments.length,T=a<3?y:m===null?m=Object.getOwnPropertyDescriptor(y,l):m,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(t,y,l,m);else for(var U=t.length-1;U>=0;U--)(R=t[U])&&(T=(a<3?R(T):a>3?R(y,l,T):R(y,l))||T);return a>3&&T&&Object.defineProperty(y,l,T),T}function _g(t,y){return function(l,m){y(l,m,t)}}function _m(t,y,l,m,a,T){function R(_r){if(_r!==void 0&&typeof _r!="function")throw new TypeError("Function expected");return _r}for(var U=m.kind,Y=U==="getter"?"get":U==="setter"?"set":"value",oe=!y&&t?m.static?t:t.prototype:null,me=y||(oe?Object.getOwnPropertyDescriptor(oe,m.name):{}),Ce,Ve=!1,ut=l.length-1;ut>=0;ut--){var Ft={};for(var Nt in m)Ft[Nt]=Nt==="access"?{}:m[Nt];for(var Nt in m.access)Ft.access[Nt]=m.access[Nt];Ft.addInitializer=function(_r){if(Ve)throw new TypeError("Cannot add initializers after decoration has completed");T.push(R(_r||null))};var vr=(0,l[ut])(U==="accessor"?{get:me.get,set:me.set}:me[Y],Ft);if(U==="accessor"){if(vr===void 0)continue;if(vr===null||typeof vr!="object")throw new TypeError("Object expected");(Ce=R(vr.get))&&(me.get=Ce),(Ce=R(vr.set))&&(me.set=Ce),(Ce=R(vr.init))&&a.unshift(Ce)}else(Ce=R(vr))&&(U==="field"?a.unshift(Ce):me[Y]=Ce)}oe&&Object.defineProperty(oe,m.name,me),Ve=!0}function bg(t,y,l){for(var m=arguments.length>2,a=0;a<y.length;a++)l=m?y[a].call(t,l):y[a].call(t);return m?l:void 0}function bm(t){return typeof t=="symbol"?t:"".concat(t)}function SA(t,y,l){return typeof y=="symbol"&&(y=y.description?"[".concat(y.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:l?"".concat(l," ",y):y})}function m1(t,y){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,y)}function Jd(t,y,l,m){function a(T){return T instanceof l?T:new l(function(R){R(T)})}return new(l||(l=Promise))(function(T,R){function U(me){try{oe(m.next(me))}catch(Ce){R(Ce)}}function Y(me){try{oe(m.throw(me))}catch(Ce){R(Ce)}}function oe(me){me.done?T(me.value):a(me.value).then(U,Y)}oe((m=m.apply(t,y||[])).next())})}function Qd(t,y){var l={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},m,a,T,R=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return R.next=U(0),R.throw=U(1),R.return=U(2),typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function U(oe){return function(me){return Y([oe,me])}}function Y(oe){if(m)throw new TypeError("Generator is already executing.");for(;R&&(R=0,oe[0]&&(l=0)),l;)try{if(m=1,a&&(T=oe[0]&2?a.return:oe[0]?a.throw||((T=a.return)&&T.call(a),0):a.next)&&!(T=T.call(a,oe[1])).done)return T;switch(a=0,T&&(oe=[oe[0]&2,T.value]),oe[0]){case 0:case 1:T=oe;break;case 4:return l.label++,{value:oe[1],done:!1};case 5:l.label++,a=oe[1],oe=[0];continue;case 7:oe=l.ops.pop(),l.trys.pop();continue;default:if(T=l.trys,!(T=T.length>0&&T[T.length-1])&&(oe[0]===6||oe[0]===2)){l=0;continue}if(oe[0]===3&&(!T||oe[1]>T[0]&&oe[1]<T[3])){l.label=oe[1];break}if(oe[0]===6&&l.label<T[1]){l.label=T[1],T=oe;break}if(T&&l.label<T[2]){l.label=T[2],l.ops.push(oe);break}T[2]&&l.ops.pop(),l.trys.pop();continue}oe=y.call(t,l)}catch(me){oe=[6,me],a=0}finally{m=T=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}var xm=Object.create?function(t,y,l,m){m===void 0&&(m=l);var a=Object.getOwnPropertyDescriptor(y,l);(!a||("get"in a?!y.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return y[l]}}),Object.defineProperty(t,m,a)}:function(t,y,l,m){m===void 0&&(m=l),t[m]=y[l]};function y1(t,y){for(var l in t)l!=="default"&&!Object.prototype.hasOwnProperty.call(y,l)&&xm(y,t,l)}function Eh(t){var y=typeof Symbol=="function"&&Symbol.iterator,l=y&&t[y],m=0;if(l)return l.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&m>=t.length&&(t=void 0),{value:t&&t[m++],done:!t}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")}function hf(t,y){var l=typeof Symbol=="function"&&t[Symbol.iterator];if(!l)return t;var m=l.call(t),a,T=[],R;try{for(;(y===void 0||y-- >0)&&!(a=m.next()).done;)T.push(a.value)}catch(U){R={error:U}}finally{try{a&&!a.done&&(l=m.return)&&l.call(m)}finally{if(R)throw R.error}}return T}function _1(){for(var t=[],y=0;y<arguments.length;y++)t=t.concat(hf(arguments[y]));return t}function b1(){for(var t=0,y=0,l=arguments.length;y<l;y++)t+=arguments[y].length;for(var m=Array(t),a=0,y=0;y<l;y++)for(var T=arguments[y],R=0,U=T.length;R<U;R++,a++)m[a]=T[R];return m}function Fv(t,y,l){if(l||arguments.length===2)for(var m=0,a=y.length,T;m<a;m++)(T||!(m in y))&&(T||(T=Array.prototype.slice.call(y,0,m)),T[m]=y[m]);return t.concat(T||Array.prototype.slice.call(y))}function Ap(t){return this instanceof Ap?(this.v=t,this):new Ap(t)}function x1(t,y,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=l.apply(t,y||[]),a,T=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),U("next"),U("throw"),U("return",R),a[Symbol.asyncIterator]=function(){return this},a;function R(ut){return function(Ft){return Promise.resolve(Ft).then(ut,Ce)}}function U(ut,Ft){m[ut]&&(a[ut]=function(Nt){return new Promise(function(vr,_r){T.push([ut,Nt,vr,_r])>1||Y(ut,Nt)})},Ft&&(a[ut]=Ft(a[ut])))}function Y(ut,Ft){try{oe(m[ut](Ft))}catch(Nt){Ve(T[0][3],Nt)}}function oe(ut){ut.value instanceof Ap?Promise.resolve(ut.value.v).then(me,Ce):Ve(T[0][2],ut)}function me(ut){Y("next",ut)}function Ce(ut){Y("throw",ut)}function Ve(ut,Ft){ut(Ft),T.shift(),T.length&&Y(T[0][0],T[0][1])}}function E1(t){var y,l;return y={},m("next"),m("throw",function(a){throw a}),m("return"),y[Symbol.iterator]=function(){return this},y;function m(a,T){y[a]=t[a]?function(R){return(l=!l)?{value:Ap(t[a](R)),done:!1}:T?T(R):R}:T}}function S1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y=t[Symbol.asyncIterator],l;return y?y.call(t):(t=typeof Eh=="function"?Eh(t):t[Symbol.iterator](),l={},m("next"),m("throw"),m("return"),l[Symbol.asyncIterator]=function(){return this},l);function m(T){l[T]=t[T]&&function(R){return new Promise(function(U,Y){R=t[T](R),a(U,Y,R.done,R.value)})}}function a(T,R,U,Y){Promise.resolve(Y).then(function(oe){T({value:oe,done:U})},R)}}function A1(t,y){return Object.defineProperty?Object.defineProperty(t,"raw",{value:y}):t.raw=y,t}var O1=Object.create?function(t,y){Object.defineProperty(t,"default",{enumerable:!0,value:y})}:function(t,y){t.default=y};function T1(t){if(t&&t.__esModule)return t;var y={};if(t!=null)for(var l in t)l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)&&xm(y,t,l);return O1(y,t),y}function M1(t){return t&&t.__esModule?t:{default:t}}function C1(t,y,l,m){if(l==="a"&&!m)throw new TypeError("Private accessor was defined without a getter");if(typeof y=="function"?t!==y||!m:!y.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?m:l==="a"?m.call(t):m?m.value:y.get(t)}function P1(t,y,l,m,a){if(m==="m")throw new TypeError("Private method is not writable");if(m==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof y=="function"?t!==y||!a:!y.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return m==="a"?a.call(t,l):a?a.value=l:y.set(t,l),l}function w1(t,y){if(y===null||typeof y!="object"&&typeof y!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?y===t:t.has(y)}function R1(t,y,l){if(y!=null){if(typeof y!="object"&&typeof y!="function")throw new TypeError("Object expected.");var m,a;if(l){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");m=y[Symbol.asyncDispose]}if(m===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");m=y[Symbol.dispose],l&&(a=m)}if(typeof m!="function")throw new TypeError("Object not disposable.");a&&(m=function(){try{a.call(this)}catch(R){return Promise.reject(R)}}),t.stack.push({value:y,dispose:m,async:l})}else l&&t.stack.push({async:!0});return y}var I1=typeof SuppressedError=="function"?SuppressedError:function(t,y,l){var m=new Error(l);return m.name="SuppressedError",m.error=t,m.suppressed=y,m};function L1(t){function y(T){t.error=t.hasError?new I1(T,t.error,"An error was suppressed during disposal."):T,t.hasError=!0}var l,m=0;function a(){for(;l=t.stack.pop();)try{if(!l.async&&m===1)return m=0,t.stack.push(l),Promise.resolve().then(a);if(l.dispose){var T=l.dispose.call(l.value);if(l.async)return m|=2,Promise.resolve(T).then(a,function(R){return y(R),a()})}else m|=1}catch(R){y(R)}if(m===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}var AA={__extends:gl,__assign:ml,__rest:Rf,__decorate:Bv,__param:_g,__metadata:m1,__awaiter:Jd,__generator:Qd,__createBinding:xm,__exportStar:y1,__values:Eh,__read:hf,__spread:_1,__spreadArrays:b1,__spreadArray:Fv,__await:Ap,__asyncGenerator:x1,__asyncDelegator:E1,__asyncValues:S1,__makeTemplateObject:A1,__importStar:T1,__importDefault:M1,__classPrivateFieldGet:C1,__classPrivateFieldSet:P1,__classPrivateFieldIn:w1,__addDisposableResource:R1,__disposeResources:L1},D1=Ee("veWP"),c0=Ee.n(D1),Wr;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.ALWAYS=519]="ALWAYS",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.GEQUAL=518]="GEQUAL",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",t[t.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",t[t.RGBA32F_EXT=34836]="RGBA32F_EXT",t[t.RGB32F_EXT=34837]="RGB32F_EXT",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",t[t.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.SRGB_EXT=35904]="SRGB_EXT",t[t.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",t[t.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",t[t.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",t[t.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",t[t.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",t[t.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",t[t.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",t[t.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",t[t.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",t[t.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",t[t.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",t[t.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",t[t.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",t[t.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",t[t.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",t[t.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",t[t.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",t[t.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",t[t.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",t[t.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",t[t.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",t[t.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",t[t.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",t[t.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",t[t.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",t[t.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",t[t.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",t[t.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",t[t.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",t[t.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",t[t.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",t[t.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",t[t.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",t[t.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",t[t.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",t[t.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",t[t.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Wr||(Wr={}));var ou;(function(t){t[t.Buffer=0]="Buffer",t[t.Texture=1]="Texture",t[t.RenderTarget=2]="RenderTarget",t[t.Sampler=3]="Sampler",t[t.Program=4]="Program",t[t.Bindings=5]="Bindings",t[t.InputLayout=6]="InputLayout",t[t.RenderPipeline=7]="RenderPipeline",t[t.ComputePipeline=8]="ComputePipeline",t[t.Readback=9]="Readback",t[t.QueryPool=10]="QueryPool",t[t.RenderBundle=11]="RenderBundle"})(ou||(ou={}));var vs;(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(vs||(vs={}));var Op;(function(t){t[t.CCW=2305]="CCW",t[t.CW=2304]="CW"})(Op||(Op={}));var df;(function(t){t[t.NONE=0]="NONE",t[t.FRONT=1]="FRONT",t[t.BACK=2]="BACK",t[t.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(df||(df={}));var Ms;(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC=768]="SRC",t[t.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",t[t.DST=774]="DST",t[t.ONE_MINUS_DST=775]="ONE_MINUS_DST",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.CONST=32769]="CONST",t[t.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Ms||(Ms={}));var Cc;(function(t){t[t.ADD=32774]="ADD",t[t.SUBSTRACT=32778]="SUBSTRACT",t[t.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX"})(Cc||(Cc={}));var tf;(function(t){t[t.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",t[t.REPEAT=1]="REPEAT",t[t.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(tf||(tf={}));var Jl;(function(t){t[t.POINT=0]="POINT",t[t.BILINEAR=1]="BILINEAR"})(Jl||(Jl={}));var Sc;(function(t){t[t.NO_MIP=0]="NO_MIP",t[t.NEAREST=1]="NEAREST",t[t.LINEAR=2]="LINEAR"})(Sc||(Sc={}));var hc;(function(t){t[t.POINTS=0]="POINTS",t[t.TRIANGLES=1]="TRIANGLES",t[t.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",t[t.LINES=3]="LINES",t[t.LINE_STRIP=4]="LINE_STRIP"})(hc||(hc={}));var Zu;(function(t){t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(Zu||(Zu={}));var sh;(function(t){t[t.STATIC=1]="STATIC",t[t.DYNAMIC=2]="DYNAMIC"})(sh||(sh={}));var qd;(function(t){t[t.VERTEX=1]="VERTEX",t[t.INSTANCE=2]="INSTANCE"})(qd||(qd={}));var f0;(function(t){t.LOADED="loaded"})(f0||(f0={}));var Ss;(function(t){t[t.TEXTURE_2D=0]="TEXTURE_2D",t[t.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",t[t.TEXTURE_3D=2]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Ss||(Ss={}));var Nc;(function(t){t[t.SAMPLED=1]="SAMPLED",t[t.RENDER_TARGET=2]="RENDER_TARGET",t[t.STORAGE=4]="STORAGE"})(Nc||(Nc={}));var Pc;(function(t){t[t.NONE=0]="NONE",t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t[t.RGB=7]="RGB",t[t.ALL=15]="ALL"})(Pc||(Pc={}));var Ul;(function(t){t[t.KEEP=7680]="KEEP",t[t.ZERO=0]="ZERO",t[t.REPLACE=7681]="REPLACE",t[t.INVERT=5386]="INVERT",t[t.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",t[t.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",t[t.INCREMENT_WRAP=34055]="INCREMENT_WRAP",t[t.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Ul||(Ul={}));function OA(t,y,l,m){var a=Ss.TEXTURE_2D,T=1,R=Nc.SAMPLED;return{dimension:a,format:t,width:y,height:l,depthOrArrayLayers:T,mipLevelCount:m,usage:R}}var kl;(function(t){t[t.Float=0]="Float",t[t.UnfilterableFloat=1]="UnfilterableFloat",t[t.Uint=2]="Uint",t[t.Sint=3]="Sint",t[t.Depth=4]="Depth"})(kl||(kl={}));var uh;(function(t){t[t.LOWER_LEFT=0]="LOWER_LEFT",t[t.UPPER_LEFT=1]="UPPER_LEFT"})(uh||(uh={}));var Nv;(function(t){t[t.NEGATIVE_ONE=0]="NEGATIVE_ONE",t[t.ZERO=1]="ZERO"})(Nv||(Nv={}));var xg;(function(t){t[t.OcclusionConservative=0]="OcclusionConservative"})(xg||(xg={}));var Pi;(function(t){t[t.U8=1]="U8",t[t.U16=2]="U16",t[t.U32=3]="U32",t[t.S8=4]="S8",t[t.S16=5]="S16",t[t.S32=6]="S32",t[t.F16=7]="F16",t[t.F32=8]="F32",t[t.BC1=65]="BC1",t[t.BC2=66]="BC2",t[t.BC3=67]="BC3",t[t.BC4_UNORM=68]="BC4_UNORM",t[t.BC4_SNORM=69]="BC4_SNORM",t[t.BC5_UNORM=70]="BC5_UNORM",t[t.BC5_SNORM=71]="BC5_SNORM",t[t.U16_PACKED_5551=97]="U16_PACKED_5551",t[t.U16_PACKED_565=98]="U16_PACKED_565",t[t.D24=129]="D24",t[t.D32F=130]="D32F",t[t.D24S8=131]="D24S8",t[t.D32FS8=132]="D32FS8"})(Pi||(Pi={}));var Pa;(function(t){t[t.R=1]="R",t[t.RG=2]="RG",t[t.RGB=3]="RGB",t[t.RGBA=4]="RGBA",t[t.A=5]="A"})(Pa||(Pa={}));function h0(t){return t}var va;(function(t){t[t.None=0]="None",t[t.Normalized=1]="Normalized",t[t.sRGB=2]="sRGB",t[t.Depth=4]="Depth",t[t.Stencil=8]="Stencil",t[t.RenderTarget=16]="RenderTarget",t[t.Luminance=32]="Luminance"})(va||(va={}));function Ja(t,y,l){return t<<16|y<<8|l}var Mn;(function(t){t[t.ALPHA=Ja(Pi.U8,Pa.A,va.None)]="ALPHA",t[t.U8_LUMINANCE=Ja(Pi.U8,Pa.A,va.Luminance)]="U8_LUMINANCE",t[t.F16_LUMINANCE=Ja(Pi.F16,Pa.A,va.Luminance)]="F16_LUMINANCE",t[t.F32_LUMINANCE=Ja(Pi.F32,Pa.A,va.Luminance)]="F32_LUMINANCE",t[t.F16_R=Ja(Pi.F16,Pa.R,va.None)]="F16_R",t[t.F16_RG=Ja(Pi.F16,Pa.RG,va.None)]="F16_RG",t[t.F16_RGB=Ja(Pi.F16,Pa.RGB,va.None)]="F16_RGB",t[t.F16_RGBA=Ja(Pi.F16,Pa.RGBA,va.None)]="F16_RGBA",t[t.F32_R=Ja(Pi.F32,Pa.R,va.None)]="F32_R",t[t.F32_RG=Ja(Pi.F32,Pa.RG,va.None)]="F32_RG",t[t.F32_RGB=Ja(Pi.F32,Pa.RGB,va.None)]="F32_RGB",t[t.F32_RGBA=Ja(Pi.F32,Pa.RGBA,va.None)]="F32_RGBA",t[t.U8_R=Ja(Pi.U8,Pa.R,va.None)]="U8_R",t[t.U8_R_NORM=Ja(Pi.U8,Pa.R,va.Normalized)]="U8_R_NORM",t[t.U8_RG=Ja(Pi.U8,Pa.RG,va.None)]="U8_RG",t[t.U8_RG_NORM=Ja(Pi.U8,Pa.RG,va.Normalized)]="U8_RG_NORM",t[t.U8_RGB=Ja(Pi.U8,Pa.RGB,va.None)]="U8_RGB",t[t.U8_RGB_NORM=Ja(Pi.U8,Pa.RGB,va.Normalized)]="U8_RGB_NORM",t[t.U8_RGB_SRGB=Ja(Pi.U8,Pa.RGB,va.sRGB|va.Normalized)]="U8_RGB_SRGB",t[t.U8_RGBA=Ja(Pi.U8,Pa.RGBA,va.None)]="U8_RGBA",t[t.U8_RGBA_NORM=Ja(Pi.U8,Pa.RGBA,va.Normalized)]="U8_RGBA_NORM",t[t.U8_RGBA_SRGB=Ja(Pi.U8,Pa.RGBA,va.sRGB|va.Normalized)]="U8_RGBA_SRGB",t[t.U16_R=Ja(Pi.U16,Pa.R,va.None)]="U16_R",t[t.U16_R_NORM=Ja(Pi.U16,Pa.R,va.Normalized)]="U16_R_NORM",t[t.U16_RG_NORM=Ja(Pi.U16,Pa.RG,va.Normalized)]="U16_RG_NORM",t[t.U16_RGBA_NORM=Ja(Pi.U16,Pa.RGBA,va.Normalized)]="U16_RGBA_NORM",t[t.U16_RGBA=Ja(Pi.U16,Pa.RGBA,va.None)]="U16_RGBA",t[t.U16_RGB=Ja(Pi.U16,Pa.RGB,va.None)]="U16_RGB",t[t.U16_RG=Ja(Pi.U16,Pa.RG,va.None)]="U16_RG",t[t.U32_R=Ja(Pi.U32,Pa.R,va.None)]="U32_R",t[t.U32_RG=Ja(Pi.U32,Pa.RG,va.None)]="U32_RG",t[t.U32_RGB=Ja(Pi.U32,Pa.RGB,va.None)]="U32_RGB",t[t.U32_RGBA=Ja(Pi.U32,Pa.RGBA,va.None)]="U32_RGBA",t[t.S8_R=Ja(Pi.S8,Pa.R,va.None)]="S8_R",t[t.S8_R_NORM=Ja(Pi.S8,Pa.R,va.Normalized)]="S8_R_NORM",t[t.S8_RG_NORM=Ja(Pi.S8,Pa.RG,va.Normalized)]="S8_RG_NORM",t[t.S8_RGB_NORM=Ja(Pi.S8,Pa.RGB,va.Normalized)]="S8_RGB_NORM",t[t.S8_RGBA_NORM=Ja(Pi.S8,Pa.RGBA,va.Normalized)]="S8_RGBA_NORM",t[t.S16_R=Ja(Pi.S16,Pa.R,va.None)]="S16_R",t[t.S16_RG=Ja(Pi.S16,Pa.RG,va.None)]="S16_RG",t[t.S16_RG_NORM=Ja(Pi.S16,Pa.RG,va.Normalized)]="S16_RG_NORM",t[t.S16_RGB_NORM=Ja(Pi.S16,Pa.RGB,va.Normalized)]="S16_RGB_NORM",t[t.S16_RGBA=Ja(Pi.S16,Pa.RGBA,va.None)]="S16_RGBA",t[t.S16_RGBA_NORM=Ja(Pi.S16,Pa.RGBA,va.Normalized)]="S16_RGBA_NORM",t[t.S32_R=Ja(Pi.S32,Pa.R,va.None)]="S32_R",t[t.S32_RG=Ja(Pi.S32,Pa.RG,va.None)]="S32_RG",t[t.S32_RGB=Ja(Pi.S32,Pa.RGB,va.None)]="S32_RGB",t[t.S32_RGBA=Ja(Pi.S32,Pa.RGBA,va.None)]="S32_RGBA",t[t.U16_RGBA_5551=Ja(Pi.U16_PACKED_5551,Pa.RGBA,va.Normalized)]="U16_RGBA_5551",t[t.U16_RGB_565=Ja(Pi.U16_PACKED_565,Pa.RGB,va.Normalized)]="U16_RGB_565",t[t.BC1=Ja(Pi.BC1,Pa.RGBA,va.Normalized)]="BC1",t[t.BC1_SRGB=Ja(Pi.BC1,Pa.RGBA,va.Normalized|va.sRGB)]="BC1_SRGB",t[t.BC2=Ja(Pi.BC2,Pa.RGBA,va.Normalized)]="BC2",t[t.BC2_SRGB=Ja(Pi.BC2,Pa.RGBA,va.Normalized|va.sRGB)]="BC2_SRGB",t[t.BC3=Ja(Pi.BC3,Pa.RGBA,va.Normalized)]="BC3",t[t.BC3_SRGB=Ja(Pi.BC3,Pa.RGBA,va.Normalized|va.sRGB)]="BC3_SRGB",t[t.BC4_UNORM=Ja(Pi.BC4_UNORM,Pa.R,va.Normalized)]="BC4_UNORM",t[t.BC4_SNORM=Ja(Pi.BC4_SNORM,Pa.R,va.Normalized)]="BC4_SNORM",t[t.BC5_UNORM=Ja(Pi.BC5_UNORM,Pa.RG,va.Normalized)]="BC5_UNORM",t[t.BC5_SNORM=Ja(Pi.BC5_SNORM,Pa.RG,va.Normalized)]="BC5_SNORM",t[t.D24=Ja(Pi.D24,Pa.R,va.Depth)]="D24",t[t.D24_S8=Ja(Pi.D24S8,Pa.RG,va.Depth|va.Stencil)]="D24_S8",t[t.D32F=Ja(Pi.D32F,Pa.R,va.Depth)]="D32F",t[t.D32F_S8=Ja(Pi.D32FS8,Pa.RG,va.Depth|va.Stencil)]="D32F_S8",t[t.U8_RGB_RT=Ja(Pi.U8,Pa.RGB,va.RenderTarget|va.Normalized)]="U8_RGB_RT",t[t.U8_RGBA_RT=Ja(Pi.U8,Pa.RGBA,va.RenderTarget|va.Normalized)]="U8_RGBA_RT",t[t.U8_RGBA_RT_SRGB=Ja(Pi.U8,Pa.RGBA,va.RenderTarget|va.Normalized|va.sRGB)]="U8_RGBA_RT_SRGB"})(Mn||(Mn={}));function Eg(t){return t>>>8&255}function Sh(t){return t>>>16&255}function Uv(t){return t&255}function d0(t){switch(t){case Pi.F32:case Pi.U32:case Pi.S32:return 4;case Pi.U16:case Pi.S16:case Pi.F16:return 2;case Pi.U8:case Pi.S8:return 1;default:throw new Error("whoops")}}function v0(t){return d0(Sh(t))}function TA(t){return h0(Eg(t))}function j1(t){var y=d0(Sh(t)),l=h0(Eg(t));return y*l}function MA(t,y){return t&4294967040|y}function CA(t,y){return t&4294902015|y<<8}function p0(t){var y=Uv(t);if(y&va.Depth)return kl.Depth;if(y&va.Normalized)return kl.Float;var l=Sh(t);if(l===Pi.F16||l===Pi.F32)return kl.Float;if(l===Pi.U8||l===Pi.U16||l===Pi.U32)return kl.Uint;if(l===Pi.S8||l===Pi.S16||l===Pi.S32)return kl.Sint;throw new Error("whoops")}function es(t,y){if(y===void 0&&(y=""),!t)throw new Error("Assert fail: ".concat(y))}function ev(t){if(t!=null)return t;throw new Error("Missing object")}function g0(t,y){return t.r===y.r&&t.g===y.g&&t.b===y.b&&t.a===y.a}function m0(t,y){t.r=y.r,t.g=y.g,t.b=y.b,t.a=y.a}function y0(t){var y=t.r,l=t.g,m=t.b,a=t.a;return{r:y,g:l,b:m,a}}function Tp(t,y,l,m){return m===void 0&&(m=1),{r:t,g:y,b:l,a:m}}var Sg=Tp(0,0,0,0),PA=Tp(0,0,0,1),B1=Tp(1,1,1,0),wA=Tp(1,1,1,1),kv=!0;function RA(t,y){y===void 0&&(y=kv),y&&(t[10]=-t[10],t[14]=-t[14])}function IA(t,y){y===void 0&&(y=kv),y&&(t[10]=-t[10],t[14]=-t[14]+1)}function F1(t,y){if(y===void 0&&(y=kv),y)switch(t){case vs.LESS:return vs.GREATER;case vs.LEQUAL:return vs.GEQUAL;case vs.GEQUAL:return vs.LEQUAL;case vs.GREATER:return vs.LESS;default:return t}else return t}function LA(t,y){return y===void 0&&(y=kv),y?1-t:t}function DA(t,y){return y===void 0&&(y=kv),y?-t:t}function jA(t,y,l,m){if(m===void 0&&(m=kv),l=F1(l,m),l===vs.LESS)return t<y;if(l===vs.LEQUAL)return t<=y;if(l===vs.GREATER)return t>y;if(l===vs.GEQUAL)return t>=y;throw new Error("whoops")}function Ag(t){return!!(t&&(t&t-1)==0)}function _d(t,y){return t!=null?t:y}function N1(t){return t===void 0?null:t}function BA(t,y,l){t.length=y,t.fill(l)}function Og(t,y){var l=y-1;return t+l&~l}function FA(t,y){return((t+y-1)/y|0)*y}function U1(t,y,l){for(var m=0,a=t.length;m<a;){var T=m+(a-m>>>1),R=l(y,t[T]);R<0?a=T:m=T+1}return m}function NA(t,y,l){var m=U1(t,y,l);t.splice(m,0,y)}function UA(t,y,l){return l?t|=y:t&=~y,t}function k1(t,y){for(var l=new Array(t),m=0;m<t;m++)l[m]=y();return l}function z1(t,y){y===void 0&&(y=1);var l=t.split(`
`);return l.map(function(m,a){return"".concat(V1(""+(y+a),4," "),"  ").concat(m)}).join(`
`)}function V1(t,y,l){for(l===void 0&&(l="0");t.length<y;)t="".concat(l).concat(t);return t}function kA(t,y){for(var l=[],m=t;m<t+y;m++)l.push(m);return l}function _0(t,y){t.blendDstFactor=y.blendDstFactor,t.blendSrcFactor=y.blendSrcFactor,t.blendMode=y.blendMode}function Tg(t,y){return t===void 0&&(t={}),t.compare=y.compare,t.depthFailOp=y.depthFailOp,t.passOp=y.passOp,t.failOp=y.failOp,t.mask=y.mask,t}function b0(t,y){return t===void 0&&(t={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),_0(t.rgbBlendState,y.rgbBlendState),_0(t.alphaBlendState,y.alphaBlendState),t.channelWriteMask=y.channelWriteMask,t}function Em(t,y){t.length!==y.length&&(t.length=y.length);for(var l=0;l<y.length;l++)t[l]=b0(t[l],y[l])}function W1(t,y){y.attachmentsState!==void 0&&Em(t.attachmentsState,y.attachmentsState),t.blendConstant&&y.blendConstant&&m0(t.blendConstant,y.blendConstant),t.depthCompare=_d(y.depthCompare,t.depthCompare),t.depthWrite=_d(y.depthWrite,t.depthWrite),t.stencilWrite=_d(y.stencilWrite,t.stencilWrite),t.stencilFront&&y.stencilFront&&Tg(t.stencilFront,y.stencilFront),t.stencilBack&&y.stencilBack&&Tg(t.stencilBack,y.stencilBack),t.cullMode=_d(y.cullMode,t.cullMode),t.frontFace=_d(y.frontFace,t.frontFace),t.polygonOffset=_d(y.polygonOffset,t.polygonOffset),t.polygonOffsetFactor=_d(y.polygonOffsetFactor,t.polygonOffsetFactor),t.polygonOffsetUnits=_d(y.polygonOffsetUnits,t.polygonOffsetUnits)}function zv(t){var y=Object.assign({},t);return y.attachmentsState=[],Em(y.attachmentsState,t.attachmentsState),y.blendConstant=y.blendConstant&&y0(y.blendConstant),y.stencilFront=Tg(void 0,t.stencilFront),y.stencilBack=Tg(void 0,t.stencilBack),y}function H1(t,y){y.channelWriteMask!==void 0&&(t.channelWriteMask=y.channelWriteMask),y.rgbBlendMode!==void 0&&(t.rgbBlendState.blendMode=y.rgbBlendMode),y.alphaBlendMode!==void 0&&(t.alphaBlendState.blendMode=y.alphaBlendMode),y.rgbBlendSrcFactor!==void 0&&(t.rgbBlendState.blendSrcFactor=y.rgbBlendSrcFactor),y.alphaBlendSrcFactor!==void 0&&(t.alphaBlendState.blendSrcFactor=y.alphaBlendSrcFactor),y.rgbBlendDstFactor!==void 0&&(t.rgbBlendState.blendDstFactor=y.rgbBlendDstFactor),y.alphaBlendDstFactor!==void 0&&(t.alphaBlendState.blendDstFactor=y.alphaBlendDstFactor)}var x0={blendMode:Cc.ADD,blendSrcFactor:Ms.ONE,blendDstFactor:Ms.ZERO},tv={attachmentsState:[{channelWriteMask:Pc.ALL,rgbBlendState:x0,alphaBlendState:x0}],blendConstant:y0(Sg),depthWrite:!0,depthCompare:vs.LEQUAL,stencilWrite:!1,stencilFront:{compare:vs.ALWAYS,passOp:Ul.KEEP,depthFailOp:Ul.KEEP,failOp:Ul.KEEP},stencilBack:{compare:vs.ALWAYS,passOp:Ul.KEEP,depthFailOp:Ul.KEEP,failOp:Ul.KEEP},cullMode:df.NONE,frontFace:Op.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function G1(t,y){t===void 0&&(t=null),y===void 0&&(y=tv);var l=zv(y);return t!==null&&W1(l,t),l}var zA=G1({depthCompare:vs.ALWAYS,depthWrite:!1},tv);function VA(t,y){return t.attachmentsState===void 0&&(t.attachmentsState=[],Em(t.attachmentsState,tv.attachmentsState)),H1(t.attachmentsState[0],y),t}var E0={texture:null,sampler:null,formatKind:kl.Float,dimension:Ss.TEXTURE_2D};function bd(t,y,l){if(t.length!==y.length)return!1;for(var m=0;m<t.length;m++)if(!l(t[m],y[m]))return!1;return!0}function Vv(t,y){for(var l=Array(t.length),m=0;m<t.length;m++)l[m]=y(t[m]);return l}function X1(t,y){return t.texture===y.texture&&t.binding===y.binding}function S0(t,y){return t.buffer===y.buffer&&t.size===y.size&&t.binding===y.binding&&t.offset===y.offset}function Y1(t,y){return t===null?y===null:y===null?!1:t.sampler===y.sampler&&t.texture===y.texture&&t.dimension===y.dimension&&t.formatKind===y.formatKind&&t.comparison===y.comparison}function $1(t,y){return t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],y.samplerBindings=y.samplerBindings||[],y.uniformBufferBindings=y.uniformBufferBindings||[],y.storageBufferBindings=y.storageBufferBindings||[],y.storageTextureBindings=y.storageTextureBindings||[],!(t.samplerBindings.length!==y.samplerBindings.length||!bd(t.samplerBindings,y.samplerBindings,Y1)||!bd(t.uniformBufferBindings,y.uniformBufferBindings,S0)||!bd(t.storageBufferBindings,y.storageBufferBindings,S0)||!bd(t.storageTextureBindings,y.storageTextureBindings,X1))}function A0(t,y){return t.blendMode==y.blendMode&&t.blendSrcFactor===y.blendSrcFactor&&t.blendDstFactor===y.blendDstFactor}function Z1(t,y){return!(!A0(t.rgbBlendState,y.rgbBlendState)||!A0(t.alphaBlendState,y.alphaBlendState)||t.channelWriteMask!==y.channelWriteMask)}function Mg(t,y){return t.compare==y.compare&&t.depthFailOp===y.depthFailOp&&t.failOp===y.failOp&&t.passOp===y.passOp&&t.mask===y.mask}function K1(t,y){return!bd(t.attachmentsState,y.attachmentsState,Z1)||t.blendConstant&&y.blendConstant&&!g0(t.blendConstant,y.blendConstant)||t.stencilFront&&y.stencilFront&&!Mg(t.stencilFront,y.stencilFront)||t.stencilBack&&y.stencilBack&&!Mg(t.stencilBack,y.stencilBack)?!1:t.depthCompare===y.depthCompare&&t.depthWrite===y.depthWrite&&t.stencilWrite===y.stencilWrite&&t.cullMode===y.cullMode&&t.frontFace===y.frontFace&&t.polygonOffset===y.polygonOffset&&t.polygonOffsetFactor===y.polygonOffsetFactor&&t.polygonOffsetUnits===y.polygonOffsetUnits}function O0(t,y){return t.id===y.id}function J1(t,y){return t===y}function Q1(t,y){return!(t.topology!==y.topology||t.inputLayout!==y.inputLayout||t.sampleCount!==y.sampleCount||t.megaStateDescriptor&&y.megaStateDescriptor&&!K1(t.megaStateDescriptor,y.megaStateDescriptor)||!O0(t.program,y.program)||!bd(t.colorAttachmentFormats,y.colorAttachmentFormats,J1)||t.depthStencilAttachmentFormat!==y.depthStencilAttachmentFormat)}function q1(t,y){return t.offset===y.offset&&t.shaderLocation===y.shaderLocation&&t.format===y.format&&t.divisor===y.divisor}function e_(t,y){return ff(t)?ff(y):ff(y)?!1:t.arrayStride===y.arrayStride&&t.stepMode===y.stepMode&&bd(t.attributes,y.attributes,q1)}function t_(t,y){return!(t.indexBufferFormat!==y.indexBufferFormat||!bd(t.vertexBufferDescriptors,y.vertexBufferDescriptors,e_)||!O0(t.program,y.program))}function WA(t,y){return t.addressModeU===y.addressModeU&&t.addressModeV===y.addressModeV&&t.minFilter===y.minFilter&&t.magFilter===y.magFilter&&t.mipmapFilter===y.mipmapFilter&&t.lodMinClamp===y.lodMinClamp&&t.lodMaxClamp===y.lodMaxClamp&&t.maxAnisotropy===y.maxAnisotropy&&t.compareFunction===y.compareFunction}function r_(t){var y=t.sampler,l=t.texture,m=t.dimension,a=t.formatKind,T=t.comparison;return{sampler:y,texture:l,dimension:m,formatKind:a,comparison:T}}function T0(t){var y=t.buffer,l=t.size,m=t.binding,a=t.offset;return{binding:m,buffer:y,offset:a,size:l}}function n_(t){var y=t.binding,l=t.texture;return{binding:y,texture:l}}function i_(t){var y=t.samplerBindings&&Vv(t.samplerBindings,r_),l=t.uniformBufferBindings&&Vv(t.uniformBufferBindings,T0),m=t.storageBufferBindings&&Vv(t.storageBufferBindings,T0),a=t.storageTextureBindings&&Vv(t.storageTextureBindings,n_);return{samplerBindings:y,uniformBufferBindings:l,storageBufferBindings:m,storageTextureBindings:a,pipeline:t.pipeline}}function a_(t){var y=t.inputLayout,l=t.program,m=t.topology,a=t.megaStateDescriptor&&zv(t.megaStateDescriptor),T=t.colorAttachmentFormats.slice(),R=t.depthStencilAttachmentFormat,U=t.sampleCount;return{inputLayout:y,megaStateDescriptor:a,program:l,topology:m,colorAttachmentFormats:T,depthStencilAttachmentFormat:R,sampleCount:U}}function o_(t){var y=t.shaderLocation,l=t.format,m=t.offset,a=t.divisor;return{shaderLocation:y,format:l,offset:m,divisor:a}}function s_(t){if(ff(t))return t;var y=t.arrayStride,l=t.stepMode,m=Vv(t.attributes,o_);return{arrayStride:y,stepMode:l,attributes:m}}function u_(t){var y=Vv(t.vertexBufferDescriptors,s_),l=t.indexBufferFormat,m=t.program;return{vertexBufferDescriptors:y,indexBufferFormat:l,program:m}}var ks,l_=/([^[]*)(\[[0-9]+\])?/;function c_(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};var y=t.match(l_);if(!y||y.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:y[1],length:Number(y[2])||1,isArray:Boolean(y[2])}}function rf(){var t=null;return function(y,l,m){var a=t!==m;return a&&(y.uniform1i(l,m),t=m),a}}function zl(t,y,l,m){var a=null,T=null;return function(R,U,Y){var oe=y(Y,l),me=oe.length,Ce=!1;if(a===null)a=new Float32Array(me),T=me,Ce=!0;else{es(T===me,"Uniform length cannot change.");for(var Ve=0;Ve<me;++Ve)if(oe[Ve]!==a[Ve]){Ce=!0;break}}return Ce&&(m(R,t,U,oe),a.set(oe)),Ce}}function Zc(t,y,l,m){t[y](l,m)}function Gh(t,y,l,m){t[y](l,!1,m)}var f_={},h_={},d_={},M0=[0];function Sm(t,y,l,m){y===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(M0[0]=t,t=M0);var a=t.length;if(t instanceof l)return t;var T=m[a];T||(T=new l(a),m[a]=T);for(var R=0;R<a;R++)T[R]=t[R];return T}function If(t,y){return Sm(t,y,Float32Array,f_)}function xd(t,y){return Sm(t,y,Int32Array,h_)}function Cg(t,y){return Sm(t,y,Uint32Array,d_)}var v_=(ks={},ks[Wr.FLOAT]=zl.bind(null,"uniform1fv",If,1,Zc),ks[Wr.FLOAT_VEC2]=zl.bind(null,"uniform2fv",If,2,Zc),ks[Wr.FLOAT_VEC3]=zl.bind(null,"uniform3fv",If,3,Zc),ks[Wr.FLOAT_VEC4]=zl.bind(null,"uniform4fv",If,4,Zc),ks[Wr.INT]=zl.bind(null,"uniform1iv",xd,1,Zc),ks[Wr.INT_VEC2]=zl.bind(null,"uniform2iv",xd,2,Zc),ks[Wr.INT_VEC3]=zl.bind(null,"uniform3iv",xd,3,Zc),ks[Wr.INT_VEC4]=zl.bind(null,"uniform4iv",xd,4,Zc),ks[Wr.BOOL]=zl.bind(null,"uniform1iv",xd,1,Zc),ks[Wr.BOOL_VEC2]=zl.bind(null,"uniform2iv",xd,2,Zc),ks[Wr.BOOL_VEC3]=zl.bind(null,"uniform3iv",xd,3,Zc),ks[Wr.BOOL_VEC4]=zl.bind(null,"uniform4iv",xd,4,Zc),ks[Wr.FLOAT_MAT2]=zl.bind(null,"uniformMatrix2fv",If,4,Gh),ks[Wr.FLOAT_MAT3]=zl.bind(null,"uniformMatrix3fv",If,9,Gh),ks[Wr.FLOAT_MAT4]=zl.bind(null,"uniformMatrix4fv",If,16,Gh),ks[Wr.UNSIGNED_INT]=zl.bind(null,"uniform1uiv",Cg,1,Zc),ks[Wr.UNSIGNED_INT_VEC2]=zl.bind(null,"uniform2uiv",Cg,2,Zc),ks[Wr.UNSIGNED_INT_VEC3]=zl.bind(null,"uniform3uiv",Cg,3,Zc),ks[Wr.UNSIGNED_INT_VEC4]=zl.bind(null,"uniform4uiv",Cg,4,Zc),ks[Wr.FLOAT_MAT2x3]=zl.bind(null,"uniformMatrix2x3fv",If,6,Gh),ks[Wr.FLOAT_MAT2x4]=zl.bind(null,"uniformMatrix2x4fv",If,8,Gh),ks[Wr.FLOAT_MAT3x2]=zl.bind(null,"uniformMatrix3x2fv",If,6,Gh),ks[Wr.FLOAT_MAT3x4]=zl.bind(null,"uniformMatrix3x4fv",If,12,Gh),ks[Wr.FLOAT_MAT4x2]=zl.bind(null,"uniformMatrix4x2fv",If,8,Gh),ks[Wr.FLOAT_MAT4x3]=zl.bind(null,"uniformMatrix4x3fv",If,12,Gh),ks[Wr.SAMPLER_2D]=rf,ks[Wr.SAMPLER_CUBE]=rf,ks[Wr.SAMPLER_3D]=rf,ks[Wr.SAMPLER_2D_SHADOW]=rf,ks[Wr.SAMPLER_2D_ARRAY]=rf,ks[Wr.SAMPLER_2D_ARRAY_SHADOW]=rf,ks[Wr.SAMPLER_CUBE_SHADOW]=rf,ks[Wr.INT_SAMPLER_2D]=rf,ks[Wr.INT_SAMPLER_3D]=rf,ks[Wr.INT_SAMPLER_CUBE]=rf,ks[Wr.INT_SAMPLER_2D_ARRAY]=rf,ks[Wr.UNSIGNED_INT_SAMPLER_2D]=rf,ks[Wr.UNSIGNED_INT_SAMPLER_3D]=rf,ks[Wr.UNSIGNED_INT_SAMPLER_CUBE]=rf,ks[Wr.UNSIGNED_INT_SAMPLER_2D_ARRAY]=rf,ks);function C0(t,y,l){var m=v_[l.type];if(!m)throw new Error("Unknown GLSL uniform type ".concat(l.type));return m().bind(null,t,y)}var p_={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function g_(t){return Object.prototype.toString.call(t)in p_}function Mp(t,y){return"#define ".concat(t," ").concat(y)}function m_(t){var y={};return t.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(l,m,a){var T=Number(a);return y[m]=isNaN(T)?a:T,""}),y}function y_(t,y){var l=[];return t.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(m,a,T){var R=Number(a);return l.push({location:isNaN(R)?y[a]:R,name:T}),""}),l}function HA(t){var y=[],l=[];return t.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(m,a,T){var R=[];return T.trim().replace(`\r
`,`
`).split(`
`).forEach(function(U){var Y=hf(U.trim().split(/\s+/),2),oe=Y[0],me=Y[1];R.push({type:oe.trim(),name:me.replace(";","").trim()})}),l.push({type:a.trim(),uniforms:R}),""}),t.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(m,a){return a.trim().replace(`\r
`,`
`).split(`
`).forEach(function(T){var R=T.trim().split(" "),U=R[0]||"",Y=R[1]||"",oe=Y.indexOf("[")>-1;if(Y=Y.replace(";","").replace("[","").trim(),!U.startsWith("#")){if(U){var me=l.find(function(ut){return U===ut.type});if(me)if(oe)for(var Ce=function(Ft){me.uniforms.forEach(function(Nt){y.push("".concat(Y,"[").concat(Ft,"].").concat(Nt.name))})},Ve=0;Ve<5;Ve++)Ce(Ve);else me.uniforms.forEach(function(ut){y.push("".concat(Y,".").concat(ut.name))})}Y&&y.push(Y)}}),""}),y}function P0(t){if(t===void 0)return null;var y=/binding\s*=\s*(\d+)/.exec(t);if(y!==null){var l=parseInt(y[1],10);if(!Number.isNaN(l))return l}return null}function w0(t){var y="",l=t;return[l,y]}function Ed(t,y,l,m,a){var T;m===void 0&&(m=null),a===void 0&&(a=!0);var R=t.glslVersion==="#version 100",U=y==="frag"&&((T=l.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||T===void 0?void 0:T.length)>1,Y=l.replace(`\r
`,`
`).split(`
`).map(function(wn){return wn.replace(/[/][/].*$/,"")}).filter(function(wn){var vn=!wn||/^\s+$/.test(wn);return!vn}),oe="";m!==null&&(oe=Object.keys(m).map(function(wn){return Mp(wn,m[wn])}).join(`
`));var me=Y.find(function(wn){return wn.startsWith("precision")})||"precision mediump float;",Ce=a?Y.filter(function(wn){return!wn.startsWith("precision")}).join(`
`):Y.join(`
`),Ve="";if(t.viewportOrigin===uh.UPPER_LEFT&&(Ve+="".concat(Mp("VIEWPORT_ORIGIN_TL","1"),`
`)),t.clipSpaceNearZ===Nv.ZERO&&(Ve+="".concat(Mp("CLIPSPACE_NEAR_ZERO","1"),`
`)),t.explicitBindingLocations){var ut=0,Ft=0,Nt=0;Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(wn,vn,ti,Mi){var Ki=ti?"".concat(ti,", "):"";return"layout(".concat(Ki,"set = ").concat(ut,", binding = ").concat(Ft++,") uniform ").concat(Mi)}),ut++,Ft=0,es(t.separateSamplerTextures),Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(wn,vn,ti,Mi,Ki){var Ii=P0(ti);Ii===null&&(Ii=Ft++);var xa=hf(w0(Mi),2),La=xa[0],Cs=xa[1];return y==="frag"?`
layout(set = `.concat(ut,", binding = ").concat(Ii*2+0,") uniform texture").concat(La," T_").concat(Ki,`;
layout(set = `).concat(ut,", binding = ").concat(Ii*2+1,") uniform sampler").concat(Cs," S_").concat(Ki,";").trim():""}),Ce=Ce.replace(y==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(wn,vn){return"layout(location = ".concat(Nt++,") ").concat(vn)}),Ve+="".concat(Mp("gl_VertexID","gl_VertexIndex"),`
`),Ve+="".concat(Mp("gl_InstanceID","gl_InstanceIndex"),`
`),me=me.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var vr=0;Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(wn,vn,ti,Mi,Ki){var Ii=P0(ti);return Ii===null&&(Ii=vr++),"uniform sampler".concat(Mi," ").concat(Ki,"; // BINDING=").concat(Ii)})}if(Ce=Ce.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return"SAMPLER_".concat(vn,"(P_").concat(ti,")")}),Ce=Ce.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return"PP_SAMPLER_".concat(vn,"(P_").concat(ti,")")}),Ce=Ce.replace(/\bPU_TEXTURE\((.*?)\)/g,function(wn,vn){return"TEXTURE(P_".concat(vn,")")}),t.separateSamplerTextures)Ce=Ce.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){var Mi=hf(w0(vn),2),Ki=Mi[0],Ii=Mi[1];return"texture".concat(Ki," T_P_").concat(ti,", sampler").concat(Ii," S_P_").concat(ti)}),Ce=Ce.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return"T_".concat(ti,", S_").concat(ti)}),Ce=Ce.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return"sampler".concat(vn,"(T_").concat(ti,", S_").concat(ti,")")}),Ce=Ce.replace(/\bTEXTURE\((.*?)\)/g,function(wn,vn){return"T_".concat(vn)});else{var _r=[];Ce=Ce.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return"sampler".concat(vn," P_").concat(ti)}),Ce=Ce.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return ti}),Ce=Ce.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(wn,vn,ti){return _r.push([ti,vn]),ti}),R&&_r.forEach(function(wn){var vn=hf(wn,2),ti=vn[0],Mi=vn[1];Ce=Ce.replace(new RegExp("texture\\(".concat(ti),"g"),function(){return"texture".concat(Mi,"(").concat(ti)})}),Ce=Ce.replace(/\bTEXTURE\((.*?)\)/g,function(wn,vn){return vn})}var Sr="".concat(R?"":t.glslVersion,`
`).concat(R&&U?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(R&&y==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(a?me:"",`
`).concat(Ve||"").concat(oe?oe+`
`:"",`
`).concat(Ce,`
`).trim();if(t.explicitBindingLocations&&y==="frag"&&(Sr=Sr.replace(/^\b(out)\b/g,function(wn,vn){return"layout(location = 0) ".concat(vn)})),R){if(y==="frag"&&(Sr=Sr.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(wn,vn,ti){return"varying ".concat(vn," ").concat(ti,`;
`)})),y==="vert"&&(Sr=Sr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(wn,vn,ti){return"varying ".concat(vn," ").concat(ti,`;
`)}),Sr=Sr.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(wn,vn,ti){return"attribute ".concat(vn," ").concat(ti,`;
`)})),Sr=Sr.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(wn,vn){return vn.trim().replace(/^.*$/gm,function(ti){var Mi=ti.trim();return Mi.startsWith("#")?Mi:ti?"uniform ".concat(Mi):""})}),y==="frag")if(U){var cn=[];Sr=Sr.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(wn,vn){return cn.push(vn),"vec4 ".concat(vn,`;
`)});var Bn=Sr.lastIndexOf("}");Sr=Sr.substring(0,Bn)+`
    `.concat(cn.map(function(wn,vn){return"gl_FragData[".concat(vn,"] = ").concat(wn,`;
    `)}).join(`
`))+Sr.substring(Bn)}else{var Kn;if(Sr=Sr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(wn,vn,ti){return Kn=ti,"".concat(vn," ").concat(ti,`;
`)}),Kn){var Bn=Sr.lastIndexOf("}");Sr=Sr.substring(0,Bn)+`
  gl_FragColor = vec4(`.concat(Kn,`);
`)+Sr.substring(Bn)}}Sr=Sr.replace(/^\s*layout\((.*)\)/gm,"")}return Sr}function GA(t,y,l,m){m===void 0&&(m=null);var a=Ed(t,"vert",y,m),T=Ed(t,"frag",l,m);return{vert:y,frag:l,preprocessedVert:a,preprocessedFrag:T}}var Hf=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=t.call(this)||this;return T.id=m,T.device=a,T.device.resourceCreationTracker!==null&&T.device.resourceCreationTracker.trackResourceCreated(T),T}return y.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},y}(c0.a),__=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.Bindings;var U=T.uniformBufferBindings,Y=T.samplerBindings;return R.uniformBufferBindings=U||[],R.samplerBindings=Y||[],R.bindingLayouts=R.createBindingLayouts(),R}return y.prototype.createBindingLayouts=function(){var l=0,m=0,a=[],T=this.uniformBufferBindings.length,R=this.samplerBindings.length;return a.push({firstUniformBuffer:l,numUniformBuffers:T,firstSampler:m,numSamplers:R}),l+=T,m+=R,{numUniformBuffers:l,numSamplers:m,bindingLayoutTables:a}},y}(Hf);function za(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function R0(t){var y=Sh(t);switch(y){case Pi.BC1:case Pi.BC2:case Pi.BC3:case Pi.BC4_UNORM:case Pi.BC4_SNORM:case Pi.BC5_UNORM:case Pi.BC5_SNORM:return!0;default:return!1}}function I0(t){var y=Uv(t);if(y&va.Normalized)return!1;var l=Sh(t);return l===Pi.S8||l===Pi.S16||l===Pi.S32||l===Pi.U8||l===Pi.U16||l===Pi.U32}function b_(t){switch(t){case sh.STATIC:return Wr.STATIC_DRAW;case sh.DYNAMIC:return Wr.DYNAMIC_DRAW}}function L0(t){if(t&Zu.INDEX)return Wr.ELEMENT_ARRAY_BUFFER;if(t&Zu.VERTEX)return Wr.ARRAY_BUFFER;if(t&Zu.UNIFORM)return Wr.UNIFORM_BUFFER}function x_(t){switch(t){case hc.TRIANGLES:return Wr.TRIANGLES;case hc.POINTS:return Wr.POINTS;case hc.TRIANGLE_STRIP:return Wr.TRIANGLE_STRIP;case hc.LINES:return Wr.LINES;case hc.LINE_STRIP:return Wr.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function E_(t){switch(t){case Pi.U8:return Wr.UNSIGNED_BYTE;case Pi.U16:return Wr.UNSIGNED_SHORT;case Pi.U32:return Wr.UNSIGNED_INT;case Pi.S8:return Wr.BYTE;case Pi.S16:return Wr.SHORT;case Pi.S32:return Wr.INT;case Pi.F16:return Wr.HALF_FLOAT;case Pi.F32:return Wr.FLOAT;default:throw new Error("whoops")}}function S_(t){switch(t){case Pa.R:return 1;case Pa.RG:return 2;case Pa.RGB:return 3;case Pa.RGBA:return 4;default:return 1}}function A_(t){var y=Sh(t),l=Eg(t),m=Uv(t),a=E_(y),T=S_(l),R=!!(m&va.Normalized);return{size:T,type:a,normalized:R}}function O_(t){switch(t){case Mn.U8_R:return Wr.UNSIGNED_BYTE;case Mn.U16_R:return Wr.UNSIGNED_SHORT;case Mn.U32_R:return Wr.UNSIGNED_INT;default:throw new Error("whoops")}}function Cp(t){switch(t){case tf.CLAMP_TO_EDGE:return Wr.CLAMP_TO_EDGE;case tf.REPEAT:return Wr.REPEAT;case tf.MIRRORED_REPEAT:return Wr.MIRRORED_REPEAT;default:throw new Error("whoops")}}function Pg(t,y){if(y===Sc.LINEAR&&t===Jl.BILINEAR)return Wr.LINEAR_MIPMAP_LINEAR;if(y===Sc.LINEAR&&t===Jl.POINT)return Wr.NEAREST_MIPMAP_LINEAR;if(y===Sc.NEAREST&&t===Jl.BILINEAR)return Wr.LINEAR_MIPMAP_NEAREST;if(y===Sc.NEAREST&&t===Jl.POINT)return Wr.NEAREST_MIPMAP_NEAREST;if(y===Sc.NO_MIP&&t===Jl.BILINEAR)return Wr.LINEAR;if(y===Sc.NO_MIP&&t===Jl.POINT)return Wr.NEAREST;throw new Error("Unknown texture filter mode")}function Wv(t,y){y===void 0&&(y=0);var l=t;return l.gl_buffer_pages[y/l.pageByteSize|0]}function Hv(t){var y=t;return y.gl_texture}function Am(t){var y=t;return y.gl_sampler}function Pp(t,y){t.name=y,t.__SPECTOR_Metadata={name:y}}function D0(t,y){for(var l=[];;){var m=y.exec(t);if(!m)break;l.push(m)}return l}function Sd(t){return t.blendMode==Cc.ADD&&t.blendSrcFactor==Ms.ONE&&t.blendDstFactor===Ms.ZERO}function T_(t){switch(t){case xg.OcclusionConservative:return Wr.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function M_(t){if(t===Ss.TEXTURE_2D)return Wr.TEXTURE_2D;if(t===Ss.TEXTURE_2D_ARRAY)return Wr.TEXTURE_2D_ARRAY;if(t===Ss.TEXTURE_CUBE_MAP)return Wr.TEXTURE_CUBE_MAP;if(t===Ss.TEXTURE_3D)return Wr.TEXTURE_3D;throw new Error("whoops")}function Om(t,y,l,m){return!(t%l!=0||y%m!=0)}var C_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.Buffer;var U=T.viewOrSize,Y=T.usage,oe=T.hint,me=oe===void 0?sh.STATIC:oe,Ce=a.uniformBufferMaxPageByteSize,Ve=a.gl,ut=Y&Zu.UNIFORM;ut||(za(Ve)?Ve.bindVertexArray(null):a.OES_vertex_array_object.bindVertexArrayOES(null));var Ft=yd(U)?Og(U,4):Og(U.byteLength,4);R.gl_buffer_pages=[];var Nt;if(ut){for(var vr=Ft;vr>0;)R.gl_buffer_pages.push(R.createBufferPage(Math.min(vr,Ce),Y,me)),vr-=Ce;Nt=Ce}else R.gl_buffer_pages.push(R.createBufferPage(Ft,Y,me)),Nt=Ft;return R.pageByteSize=Nt,R.byteSize=Ft,R.usage=Y,R.gl_target=L0(Y),yd(U)||R.setSubData(0,new Uint8Array(U.buffer)),ut||(za(Ve)?Ve.bindVertexArray(R.device.currentBoundVAO):a.OES_vertex_array_object.bindVertexArrayOES(R.device.currentBoundVAO)),R}return y.prototype.setSubData=function(l,m,a,T){a===void 0&&(a=0),T===void 0&&(T=m.byteLength-a);for(var R=this.device.gl,U=this.pageByteSize,Y=l+T,oe=l,me=l%U;oe<Y;){var Ce=za(R)?R.COPY_WRITE_BUFFER:this.gl_target,Ve=Wv(this,oe);if(Ve.ubo)return;R.bindBuffer(Ce,Ve),za(R)?R.bufferSubData(Ce,me,m,a,Math.min(Y-oe,U)):R.bufferSubData(Ce,me,m),oe+=U,me=0,a+=U,this.device.debugGroupStatisticsBufferUpload()}},y.prototype.destroy=function(){t.prototype.destroy.call(this);for(var l=0;l<this.gl_buffer_pages.length;l++)this.gl_buffer_pages[l].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[l]);this.gl_buffer_pages=[]},y.prototype.createBufferPage=function(l,m,a){var T=this.device.gl,R=m&Zu.UNIFORM;if(!za(T)&&R)return{ubo:!0};var U=this.device.ensureResourceExists(T.createBuffer()),Y=L0(m),oe=b_(a);return T.bindBuffer(Y,U),T.bufferData(Y,l,oe),U},y}(Hf),P_=function(t){gl(y,t);function y(l){var m,a,T,R,U=l.id,Y=l.device,oe=l.descriptor,me,Ce=t.call(this,{id:U,device:Y})||this;Ce.type=ou.InputLayout;var Ve=oe.vertexBufferDescriptors,ut=oe.indexBufferFormat,Ft=oe.program;es(ut===Mn.U16_R||ut===Mn.U32_R||ut===null);var Nt=ut!==null?O_(ut):null,vr=ut!==null?v0(ut):null,_r=Ce.device.gl,Sr=Ce.device.ensureResourceExists(za(_r)?_r.createVertexArray():Y.OES_vertex_array_object.createVertexArrayOES());za(_r)?_r.bindVertexArray(Sr):Y.OES_vertex_array_object.bindVertexArrayOES(Sr),_r.bindBuffer(_r.ARRAY_BUFFER,Wv(Ce.device.fallbackVertexBuffer));try{for(var cn=Eh(oe.vertexBufferDescriptors),Bn=cn.next();!Bn.done;Bn=cn.next()){var Kn=Bn.value,wn=Kn.stepMode,vn=Kn.attributes;try{for(var ti=(T=void 0,Eh(vn)),Mi=ti.next();!Mi.done;Mi=ti.next()){var Ki=Mi.value,Ii=Ki.shaderLocation,xa=Ki.format,La=Ki.divisor,Cs=La===void 0?1:La,wu=za(_r)?Ii:(me=Ft.attributes[Ii])===null||me===void 0?void 0:me.location,ju=A_(xa);if(Ki.vertexFormat=ju,!ff(wu)){I0(xa);var Oc=ju.size,wc=ju.type,Wl=ju.normalized;_r.vertexAttribPointer(wu,Oc,wc,Wl,0,0),wn===qd.INSTANCE&&(za(_r)?_r.vertexAttribDivisor(wu,Cs):Y.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(wu,Cs)),_r.enableVertexAttribArray(wu)}}}catch(gf){T={error:gf}}finally{try{Mi&&!Mi.done&&(R=ti.return)&&R.call(ti)}finally{if(T)throw T.error}}}}catch(gf){m={error:gf}}finally{try{Bn&&!Bn.done&&(a=cn.return)&&a.call(cn)}finally{if(m)throw m.error}}return za(_r)?_r.bindVertexArray(null):Y.OES_vertex_array_object.bindVertexArrayOES(null),Ce.vertexBufferDescriptors=Ve,Ce.vao=Sr,Ce.indexBufferFormat=ut,Ce.indexBufferType=Nt,Ce.indexBufferCompByteSize=vr,Ce.program=Ft,Ce}return y.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(za(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},y}(Hf),Tm=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=l.fake,U=t.call(this,{id:m,device:a})||this;U.type=ou.Texture,T=ml({dimension:Ss.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},T);var Y=U.device.gl,oe,me,Ce=U.clampmipLevelCount(T);if(U.immutable=T.usage===Nc.RENDER_TARGET,U.pixelStore=T.pixelStore,U.format=T.format,U.dimension=T.dimension,U.formatKind=p0(T.format),U.width=T.width,U.height=T.height,U.depthOrArrayLayers=T.depthOrArrayLayers,U.mipmaps=Ce>=1,!R){me=U.device.ensureResourceExists(Y.createTexture());var Ve=U.device.translateTextureType(T.format),ut=U.device.translateTextureInternalFormat(T.format);if(U.device.setActiveTexture(Y.TEXTURE0),U.device.currentTextures[0]=null,U.preprocessImage(),T.dimension===Ss.TEXTURE_2D){if(oe=Wr.TEXTURE_2D,Y.bindTexture(oe,me),U.immutable)if(za(Y))Y.texStorage2D(oe,Ce,ut,T.width,T.height);else{var Ft=(ut===Wr.DEPTH_COMPONENT||U.isNPOT(),0);(U.format===Mn.D32F||U.format===Mn.D24_S8)&&!za(Y)&&!a.WEBGL_depth_texture||(Y.texImage2D(oe,Ft,ut,T.width,T.height,0,ut,Ve,null),U.mipmaps&&(U.mipmaps=!1,Y.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_MIN_FILTER,Wr.LINEAR),Y.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_WRAP_S,Wr.CLAMP_TO_EDGE),Y.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_WRAP_T,Wr.CLAMP_TO_EDGE)))}es(T.depthOrArrayLayers===1)}else if(T.dimension===Ss.TEXTURE_2D_ARRAY)oe=Wr.TEXTURE_2D_ARRAY,Y.bindTexture(oe,me),U.immutable&&za(Y)&&Y.texStorage3D(oe,Ce,ut,T.width,T.height,T.depthOrArrayLayers);else if(T.dimension===Ss.TEXTURE_3D)oe=Wr.TEXTURE_3D,Y.bindTexture(oe,me),U.immutable&&za(Y)&&Y.texStorage3D(oe,Ce,ut,T.width,T.height,T.depthOrArrayLayers);else if(T.dimension===Ss.TEXTURE_CUBE_MAP)oe=Wr.TEXTURE_CUBE_MAP,Y.bindTexture(oe,me),U.immutable&&za(Y)&&Y.texStorage2D(oe,Ce,ut,T.width,T.height),es(T.depthOrArrayLayers===6);else throw new Error("whoops")}return U.gl_texture=me,U.gl_target=oe,U.mipLevelCount=Ce,U}return y.prototype.setImageData=function(l,m){m===void 0&&(m=0);var a=this.device.gl;R0(this.format);var T=this.gl_target===Wr.TEXTURE_3D||this.gl_target===Wr.TEXTURE_2D_ARRAY,R=this.gl_target===Wr.TEXTURE_CUBE_MAP,U=g_(l[0]);this.device.setActiveTexture(a.TEXTURE0),this.device.currentTextures[0]=null;var Y=l[0],oe,me;U?(oe=this.width,me=this.height):(oe=Y.width,me=Y.height,this.width=oe,this.height=me),a.bindTexture(this.gl_target,this.gl_texture);var Ce=this.device.translateTextureFormat(this.format),Ve=za(a)?this.device.translateInternalTextureFormat(this.format):Ce,ut=this.device.translateTextureType(this.format);this.preprocessImage();for(var Ft=0;Ft<this.depthOrArrayLayers;Ft++){var Nt=l[Ft],vr=this.gl_target;R&&(vr=Wr.TEXTURE_CUBE_MAP_POSITIVE_X+Ft%6),this.immutable?a.texSubImage2D(vr,m,0,0,oe,me,Ce,ut,Nt):za(a)?T?a.texImage3D(vr,m,Ve,oe,me,this.depthOrArrayLayers,0,Ce,ut,Nt):a.texImage2D(vr,m,Ve,oe,me,0,Ce,ut,Nt):U?a.texImage2D(vr,m,Ce,oe,me,0,Ce,ut,Nt):a.texImage2D(vr,m,Ce,Ce,ut,Nt)}this.mipmaps&&this.generateMipmap(T)},y.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.gl.deleteTexture(Hv(this))},y.prototype.clampmipLevelCount=function(l){if(l.dimension===Ss.TEXTURE_2D_ARRAY&&l.depthOrArrayLayers>1){var m=Sh(l.format);if(m===Pi.BC1)for(var a=l.width,T=l.height,R=0;R<l.mipLevelCount;R++){if(a<=2||T<=2)return R-1;a=Math.max(a/2|0,1),T=Math.max(T/2|0,1)}}return l.mipLevelCount},y.prototype.preprocessImage=function(){var l=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&l.pixelStorei(Wr.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&l.pixelStorei(Wr.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&l.pixelStorei(Wr.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},y.prototype.generateMipmap=function(l){l===void 0&&(l=!1);var m=this.device.gl;return!za(m)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(m.bindTexture(this.gl_target,this.gl_texture),l?(m.texParameteri(this.gl_target,Wr.TEXTURE_BASE_LEVEL,0),m.texParameteri(this.gl_target,Wr.TEXTURE_MAX_LEVEL,Math.log2(this.width)),m.texParameteri(this.gl_target,Wr.TEXTURE_MIN_FILTER,Wr.LINEAR_MIPMAP_LINEAR),m.texParameteri(this.gl_target,Wr.TEXTURE_MAG_FILTER,Wr.LINEAR)):m.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_MIN_FILTER,Wr.NEAREST_MIPMAP_LINEAR),m.generateMipmap(this.gl_target),m.bindTexture(this.gl_target,null)),this)},y.prototype.isNPOT=function(){var l=this.device.gl;return za(l)?!1:!Ag(this.width)||!Ag(this.height)},y}(Hf),w_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.RenderTarget,R.gl_renderbuffer=null,R.texture=null;var U=R.device.gl,Y=T.format,oe=T.width,me=T.height,Ce=T.sampleCount,Ve=Ce===void 0?1:Ce,ut=T.texture,Ft=!1;if((Y===Mn.D32F||Y===Mn.D24_S8)&&ut&&!za(U)&&!a.WEBGL_depth_texture&&(ut.destroy(),R.texture=null,Ft=!0),!Ft&&ut)R.texture=ut;else{R.gl_renderbuffer=R.device.ensureResourceExists(U.createRenderbuffer()),U.bindRenderbuffer(U.RENDERBUFFER,R.gl_renderbuffer);var Nt=R.device.translateTextureInternalFormat(Y,!0);za(U)&&Ve>1?U.renderbufferStorageMultisample(Wr.RENDERBUFFER,Ve,Nt,oe,me):U.renderbufferStorage(Wr.RENDERBUFFER,Nt,oe,me)}return R.format=Y,R.width=oe,R.height=me,R.sampleCount=Ve,R}return y.prototype.destroy=function(){t.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},y}(Hf),vf;(function(t){t[t.NeedsCompile=0]="NeedsCompile",t[t.Compiling=1]="Compiling",t[t.NeedsBind=2]="NeedsBind",t[t.ReadyToUse=3]="ReadyToUse"})(vf||(vf={}));var R_=function(t){gl(y,t);function y(l,m){var a=l.id,T=l.device,R=l.descriptor,U=t.call(this,{id:a,device:T})||this;U.rawVertexGLSL=m,U.type=ou.Program,U.uniformSetters={},U.attributes=[];var Y=U.device.gl;return U.descriptor=R,U.gl_program=U.device.ensureResourceExists(Y.createProgram()),U.gl_shader_vert=null,U.gl_shader_frag=null,U.compileState=vf.NeedsCompile,U.tryCompileProgram(),U}return y.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},y.prototype.tryCompileProgram=function(){es(this.compileState===vf.NeedsCompile);var l=this.descriptor,m=l.vertex,a=l.fragment,T=this.device.gl;(m==null?void 0:m.glsl)&&(a==null?void 0:a.glsl)&&(this.gl_shader_vert=this.compileShader(m.postprocess?m.postprocess(m.glsl):m.glsl,T.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(a.postprocess?a.postprocess(a.glsl):a.glsl,T.FRAGMENT_SHADER),T.attachShader(this.gl_program,this.gl_shader_vert),T.attachShader(this.gl_program,this.gl_shader_frag),T.linkProgram(this.gl_program),this.compileState=vf.Compiling,za(T)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},y.prototype.readAttributesFromLinkedProgram=function(){for(var l,m=this.device.gl,a=m.getProgramParameter(this.gl_program,m.ACTIVE_ATTRIBUTES),T=m_(this.descriptor.vertex.glsl),R=y_(this.rawVertexGLSL,T),U=function(Ce){var Ve=m.getActiveAttrib(Y.gl_program,Ce),ut=Ve.name,Ft=Ve.type,Nt=Ve.size,vr=m.getAttribLocation(Y.gl_program,ut),_r=(l=R.find(function(Sr){return Sr.name===ut}))===null||l===void 0?void 0:l.location;vr>=0&&!ff(_r)&&(Y.attributes[_r]={name:ut,location:vr,type:Ft,size:Nt})},Y=this,oe=0;oe<a;oe++)U(oe)},y.prototype.readUniformLocationsFromLinkedProgram=function(){for(var l=this.device.gl,m=l.getProgramParameter(this.gl_program,l.ACTIVE_UNIFORMS),a=0;a<m;a++){var T=l.getActiveUniform(this.gl_program,a),R=c_(T.name).name,U=l.getUniformLocation(this.gl_program,R);if(this.uniformSetters[R]=C0(l,U,T),T&&T.size>1)for(var Y=0;Y<T.size;Y++)U=l.getUniformLocation(this.gl_program,"".concat(R,"[").concat(Y,"]")),this.uniformSetters["".concat(R,"[").concat(Y,"]")]=C0(l,U,T)}},y.prototype.compileShader=function(l,m){var a=this.device.gl,T=this.device.ensureResourceExists(a.createShader(m));return a.shaderSource(T,l),a.compileShader(T),T},y.prototype.setUniformsLegacy=function(l){l===void 0&&(l={});var m=this.device.gl;if(!za(m)){var a=!1;for(var T in l){a||(m.useProgram(this.gl_program),a=!0);var R=l[T],U=this.uniformSetters[T];if(U){var Y=R;Y instanceof Tm&&(Y=Y.textureIndex),U(Y)}}}return this},y}(Hf),I_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.QueryPool;var U=R.device.gl;if(za(U)){var Y=T.elemCount,oe=T.type;R.gl_query=k1(Y,function(){return R.device.ensureResourceExists(U.createQuery())}),R.gl_query_type=T_(oe)}return R}return y.prototype.queryResultOcclusion=function(l){var m=this.device.gl;if(za(m)){var a=this.gl_query[l];return m.getQueryParameter(a,m.QUERY_RESULT_AVAILABLE)?!!m.getQueryParameter(a,m.QUERY_RESULT):null}return null},y.prototype.destroy=function(){t.prototype.destroy.call(this);var l=this.device.gl;if(za(l))for(var m=0;m<this.gl_query.length;m++)l.deleteQuery(this.gl_query[m])},y}(Hf),L_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=t.call(this,{id:m,device:a})||this;return T.type=ou.Readback,T.gl_pbo=null,T.gl_sync=null,T}return y.prototype.clientWaitAsync=function(l,m,a){m===void 0&&(m=0),a===void 0&&(a=10);var T=this.device.gl;return new Promise(function(R,U){function Y(){var oe=T.clientWaitSync(l,m,0);if(oe==T.WAIT_FAILED){U();return}if(oe==T.TIMEOUT_EXPIRED){setTimeout(Y,ym(a,0,T.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}R()}Y()})},y.prototype.getBufferSubDataAsync=function(l,m,a,T,R,U){return Jd(this,void 0,void 0,function(){var Y;return Qd(this,function(oe){switch(oe.label){case 0:return Y=this.device.gl,za(Y)?(this.gl_sync=Y.fenceSync(Y.SYNC_GPU_COMMANDS_COMPLETE,0),Y.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return oe.sent(),Y.bindBuffer(l,m),Y.getBufferSubData(l,a,T,R,U),Y.bindBuffer(l,null),[2,T];case 2:return[2]}})})},y.prototype.readTexture=function(l,m,a,T,R,U,Y,oe){return Y===void 0&&(Y=0),oe===void 0&&(oe=U.byteLength||0),Jd(this,void 0,void 0,function(){var me,Ce,Ve,ut,Ft;return Qd(this,function(Nt){return me=this.device.gl,Ce=l,Ve=this.device.translateTextureFormat(Ce.format),ut=this.device.translateTextureType(Ce.format),Ft=j1(Ce.format),za(me)?(this.gl_pbo=this.device.ensureResourceExists(me.createBuffer()),me.bindBuffer(me.PIXEL_PACK_BUFFER,this.gl_pbo),me.bufferData(me.PIXEL_PACK_BUFFER,oe,me.STREAM_READ),me.bindBuffer(me.PIXEL_PACK_BUFFER,null),me.bindFramebuffer(Wr.READ_FRAMEBUFFER,this.device.readbackFramebuffer),me.framebufferTexture2D(Wr.READ_FRAMEBUFFER,Wr.COLOR_ATTACHMENT0,Wr.TEXTURE_2D,Ce.gl_texture,0),me.bindBuffer(me.PIXEL_PACK_BUFFER,this.gl_pbo),me.readPixels(m,a,T,R,Ve,ut,Y*Ft),me.bindBuffer(me.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(me.PIXEL_PACK_BUFFER,this.gl_pbo,0,U,Y,0)]):[2,this.readTextureSync(l,m,a,T,R,U,Y,oe)]})})},y.prototype.readTextureSync=function(l,m,a,T,R,U,Y,oe){oe===void 0&&(oe=U.byteLength||0);var me=this.device.gl,Ce=l,Ve=this.device.translateTextureType(Ce.format);return me.bindFramebuffer(Wr.FRAMEBUFFER,this.device.readbackFramebuffer),me.framebufferTexture2D(Wr.FRAMEBUFFER,Wr.COLOR_ATTACHMENT0,Wr.TEXTURE_2D,Ce.gl_texture,0),me.pixelStorei(me.PACK_ALIGNMENT,4),me.readPixels(m,a,T,R,me.RGBA,Ve,U),U},y.prototype.readBuffer=function(l,m,a,T,R){return Jd(this,void 0,void 0,function(){var U;return Qd(this,function(Y){return U=this.device.gl,za(U)?[2,this.getBufferSubDataAsync(U.ARRAY_BUFFER,Wv(l,m),m,a,T,R)]:[2,Promise.reject()]})})},y.prototype.destroy=function(){t.prototype.destroy.call(this),za(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},y}(Hf),D_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R,U,Y=t.call(this,{id:m,device:a})||this;return Y.type=ou.RenderPipeline,Y.drawMode=x_((R=T.topology)!==null&&R!==void 0?R:hc.TRIANGLES),Y.program=T.program,Y.inputLayout=T.inputLayout,Y.megaState=ml(ml({},zv(tv)),T.megaStateDescriptor),Y.colorAttachmentFormats=T.colorAttachmentFormats.slice(),Y.depthStencilAttachmentFormat=T.depthStencilAttachmentFormat,Y.sampleCount=(U=T.sampleCount)!==null&&U!==void 0?U:1,Y}return y}(Hf),j_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;return R.type=ou.ComputePipeline,R.descriptor=T,R}return y}(Hf),B_=function(){function t(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return t.prototype.trackResourceCreated=function(y){this.creationStacks.set(y,new Error().stack),this.liveObjects.add(y)},t.prototype.trackResourceDestroyed=function(y){this.deletionStacks.has(y)&&console.warn("Object double freed:",y,`

Creation stack: `,this.creationStacks.get(y),`

Deletion stack: `,this.deletionStacks.get(y),`

This stack: `,new Error().stack),this.deletionStacks.set(y,new Error().stack),this.liveObjects.delete(y)},t.prototype.checkForLeaks=function(){var y,l;try{for(var m=Eh(this.liveObjects.values()),a=m.next();!a.done;a=m.next()){var T=a.value;console.warn("Object leaked:",T,"Creation stack:",this.creationStacks.get(T))}}catch(R){y={error:R}}finally{try{a&&!a.done&&(l=m.return)&&l.call(m)}finally{if(y)throw y.error}}},t.prototype.setResourceLeakCheck=function(y,l){l?this.liveObjects.add(y):this.liveObjects.delete(y)},t}(),F_=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R,U,Y=t.call(this,{id:m,device:a})||this;Y.type=ou.Sampler;var oe=Y.device.gl;if(za(oe)){var me=Y.device.ensureResourceExists(oe.createSampler());oe.samplerParameteri(me,Wr.TEXTURE_WRAP_S,Cp(T.addressModeU)),oe.samplerParameteri(me,Wr.TEXTURE_WRAP_T,Cp(T.addressModeV)),oe.samplerParameteri(me,Wr.TEXTURE_WRAP_R,Cp((R=T.addressModeW)!==null&&R!==void 0?R:T.addressModeU)),oe.samplerParameteri(me,Wr.TEXTURE_MIN_FILTER,Pg(T.minFilter,T.mipmapFilter)),oe.samplerParameteri(me,Wr.TEXTURE_MAG_FILTER,Pg(T.magFilter,Sc.NO_MIP)),T.lodMinClamp!==void 0&&oe.samplerParameterf(me,Wr.TEXTURE_MIN_LOD,T.lodMinClamp),T.lodMaxClamp!==void 0&&oe.samplerParameterf(me,Wr.TEXTURE_MAX_LOD,T.lodMaxClamp),T.compareFunction!==void 0&&(oe.samplerParameteri(me,oe.TEXTURE_COMPARE_MODE,oe.COMPARE_REF_TO_TEXTURE),oe.samplerParameteri(me,oe.TEXTURE_COMPARE_FUNC,T.compareFunction));var Ce=(U=T.maxAnisotropy)!==null&&U!==void 0?U:1;Ce>1&&Y.device.EXT_texture_filter_anisotropic!==null&&(es(T.minFilter===Jl.BILINEAR&&T.magFilter===Jl.BILINEAR&&T.mipmapFilter===Sc.LINEAR),oe.samplerParameterf(me,Y.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce)),Y.gl_sampler=me}else Y.descriptor=T;return Y}return y.prototype.setTextureParameters=function(l,m,a){var T,R=this.device.gl,U=this.descriptor;this.isNPOT(m,a)?R.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_MIN_FILTER,Wr.LINEAR):R.texParameteri(l,Wr.TEXTURE_MIN_FILTER,Pg(U.minFilter,U.mipmapFilter)),R.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_WRAP_S,Cp(U.addressModeU)),R.texParameteri(Wr.TEXTURE_2D,Wr.TEXTURE_WRAP_T,Cp(U.addressModeV)),R.texParameteri(l,Wr.TEXTURE_MAG_FILTER,Pg(U.magFilter,Sc.NO_MIP));var Y=(T=U.maxAnisotropy)!==null&&T!==void 0?T:1;Y>1&&this.device.EXT_texture_filter_anisotropic!==null&&(es(U.minFilter===Jl.BILINEAR&&U.magFilter===Jl.BILINEAR&&U.mipmapFilter===Sc.LINEAR),R.texParameteri(l,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y))},y.prototype.destroy=function(){t.prototype.destroy.call(this),za(this.device.gl)&&this.device.gl.deleteSampler(Am(this))},y.prototype.isNPOT=function(l,m){return!Ag(l)||!Ag(m)},y}(Hf),N_=function(){function t(){}return t.prototype.dispatchWorkgroups=function(y,l,m){},t.prototype.dispatchWorkgroupsIndirect=function(y,l){},t.prototype.setPipeline=function(y){},t.prototype.setBindings=function(y){},t.prototype.pushDebugGroup=function(y){},t.prototype.popDebugGroup=function(){},t.prototype.insertDebugMarker=function(y){},t}(),U_=function(t){gl(y,t);function y(){var l=t!==null&&t.apply(this,arguments)||this;return l.type=ou.RenderBundle,l.commands=[],l}return y.prototype.push=function(l){this.commands.push(l)},y.prototype.replay=function(){this.commands.forEach(function(l){return l()})},y}(Hf),j0=65536,k_=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,z_=function(){function t(y,l){l===void 0&&(l={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=zv(tv),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=uh.LOWER_LEFT,this.clipSpaceNearZ=Nv.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=y,this.contextAttributes=ev(y.getContextAttributes()),za(y)?(this.EXT_texture_norm16=y.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=y.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=y.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=y.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=y.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=y.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=y.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=y.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=y.getExtension("EXT_color_buffer_half_float"),y.getExtension("EXT_frag_depth"),y.getExtension("OES_element_index_uint"),y.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=y.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=y.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=y.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=y.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=y.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=y.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=y.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=y.getExtension("KHR_parallel_shader_compile"),za(y)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new Tm({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Ss.TEXTURE_2D,mipLevelCount:1,usage:Nc.RENDER_TARGET,format:this.contextAttributes.alpha===!1?Mn.U8_RGB_RT:Mn.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=kl.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(y.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(y.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(y.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(y.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(y.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(y.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Ss.TEXTURE_2D,kl.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Ss.TEXTURE_2D,kl.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:Zu.VERTEX,hint:sh.STATIC}),za(y)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Ss.TEXTURE_2D_ARRAY,kl.Float),this.fallbackTexture3D=this.createFallbackTexture(Ss.TEXTURE_3D,kl.Float),this.fallbackTextureCube=this.createFallbackTexture(Ss.TEXTURE_CUBE_MAP,kl.Float)),this.currentMegaState.depthCompare=vs.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Pc.ALL,y.enable(y.DEPTH_TEST),y.enable(y.STENCIL_TEST),this.checkLimits(),l.shaderDebug&&(this.shaderDebug=!0),l.trackResources&&(this.resourceCreationTracker=new B_)}return t.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},t.prototype.createFallbackTexture=function(y,l){var m=y===Ss.TEXTURE_CUBE_MAP?6:1,a=l===kl.Depth?Mn.D32F:Mn.U8_RGBA_NORM,T=this.createTexture({dimension:y,format:a,usage:Nc.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1});return l===kl.Float&&T.setImageData([new Uint8Array(4*m)]),Hv(T)},t.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},t.prototype.checkLimits=function(){var y=this.gl;if(this.maxVertexAttribs=y.getParameter(Wr.MAX_VERTEX_ATTRIBS),za(y)){this.uniformBufferMaxPageByteSize=Math.min(y.getParameter(Wr.MAX_UNIFORM_BLOCK_SIZE),j0),this.uniformBufferWordAlignment=y.getParameter(y.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var l=y.getInternalformatParameter(y.RENDERBUFFER,y.DEPTH32F_STENCIL8,y.SAMPLES);this.supportedSampleCounts=l?Fv([],hf(l),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=j0;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(m,a){return m-a})},t.prototype.configureSwapChain=function(y,l,m){var a=this.scTexture;a.width=y,a.height=l,this.scPlatformFramebuffer=N1(m)},t.prototype.getDevice=function(){return this},t.prototype.getCanvas=function(){return this.gl.canvas},t.prototype.getOnscreenTexture=function(){return this.scTexture},t.prototype.beginFrame=function(){},t.prototype.endFrame=function(){},t.prototype.translateTextureInternalFormat=function(y,l){switch(l===void 0&&(l=!1),y){case Mn.ALPHA:return Wr.ALPHA;case Mn.U8_LUMINANCE:case Mn.F16_LUMINANCE:case Mn.F32_LUMINANCE:return Wr.LUMINANCE;case Mn.F16_R:return Wr.R16F;case Mn.F16_RG:return Wr.RG16F;case Mn.F16_RGB:return Wr.RGB16F;case Mn.F16_RGBA:return Wr.RGBA16F;case Mn.F32_R:return Wr.R32F;case Mn.F32_RG:return Wr.RG32F;case Mn.F32_RGB:return Wr.RGB32F;case Mn.F32_RGBA:return za(this.gl)?Wr.RGBA32F:l?this.WEBGL_color_buffer_float.RGBA32F_EXT:Wr.RGBA;case Mn.U8_R_NORM:return Wr.R8;case Mn.U8_RG_NORM:return Wr.RG8;case Mn.U8_RGB_NORM:case Mn.U8_RGB_RT:return Wr.RGB8;case Mn.U8_RGB_SRGB:return Wr.SRGB8;case Mn.U8_RGBA_NORM:case Mn.U8_RGBA_RT:return za(this.gl)?Wr.RGBA8:l?Wr.RGBA4:Wr.RGBA;case Mn.U8_RGBA:return Wr.RGBA;case Mn.U8_RGBA_SRGB:case Mn.U8_RGBA_RT_SRGB:return Wr.SRGB8_ALPHA8;case Mn.U16_R:return Wr.R16UI;case Mn.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case Mn.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case Mn.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case Mn.U16_RGBA_5551:return Wr.RGB5_A1;case Mn.U16_RGB_565:return Wr.RGB565;case Mn.U32_R:return Wr.R32UI;case Mn.S8_RGBA_NORM:return Wr.RGBA8_SNORM;case Mn.S8_RG_NORM:return Wr.RG8_SNORM;case Mn.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case Mn.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case Mn.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case Mn.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case Mn.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case Mn.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case Mn.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case Mn.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case Mn.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case Mn.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case Mn.D32F_S8:return za(this.gl)?Wr.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Wr.DEPTH_STENCIL:Wr.DEPTH_COMPONENT16;case Mn.D24_S8:return za(this.gl)?Wr.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Wr.DEPTH_STENCIL:Wr.DEPTH_COMPONENT16;case Mn.D32F:return za(this.gl)?Wr.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Wr.DEPTH_COMPONENT:Wr.DEPTH_COMPONENT16;case Mn.D24:return za(this.gl)?Wr.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Wr.DEPTH_COMPONENT:Wr.DEPTH_COMPONENT16;default:throw new Error("whoops")}},t.prototype.translateTextureType=function(y){var l=Sh(y);switch(l){case Pi.U8:return Wr.UNSIGNED_BYTE;case Pi.U16:return Wr.UNSIGNED_SHORT;case Pi.U32:return Wr.UNSIGNED_INT;case Pi.S8:return Wr.BYTE;case Pi.F16:return Wr.HALF_FLOAT;case Pi.F32:return Wr.FLOAT;case Pi.U16_PACKED_5551:return Wr.UNSIGNED_SHORT_5_5_5_1;case Pi.D32F:return za(this.gl)?Wr.FLOAT:this.WEBGL_depth_texture?Wr.UNSIGNED_INT:Wr.UNSIGNED_BYTE;case Pi.D24:return za(this.gl)?Wr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Wr.UNSIGNED_SHORT:Wr.UNSIGNED_BYTE;case Pi.D24S8:return za(this.gl)?Wr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Wr.UNSIGNED_INT_24_8_WEBGL:Wr.UNSIGNED_BYTE;case Pi.D32FS8:return Wr.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},t.prototype.translateInternalTextureFormat=function(y){switch(y){case Mn.F32_R:return Wr.R32F;case Mn.F32_RG:return Wr.RG32F;case Mn.F32_RGB:return Wr.RGB32F;case Mn.F32_RGBA:return Wr.RGBA32F;case Mn.F16_R:return Wr.R16F;case Mn.F16_RG:return Wr.RG16F;case Mn.F16_RGB:return Wr.RGB16F;case Mn.F16_RGBA:return Wr.RGBA16F}return this.translateTextureFormat(y)},t.prototype.translateTextureFormat=function(y){if(R0(y)||y===Mn.F32_LUMINANCE||y===Mn.U8_LUMINANCE)return this.translateTextureInternalFormat(y);var l=za(this.gl)||!za(this.gl)&&!!this.WEBGL_depth_texture;switch(y){case Mn.D24_S8:case Mn.D32F_S8:return l?Wr.DEPTH_STENCIL:Wr.RGBA;case Mn.D24:case Mn.D32F:return l?Wr.DEPTH_COMPONENT:Wr.RGBA}var m=I0(y),a=Eg(y);switch(a){case Pa.A:return Wr.ALPHA;case Pa.R:return m?Wr.RED_INTEGER:Wr.RED;case Pa.RG:return m?Wr.RG_INTEGER:Wr.RG;case Pa.RGB:return m?Wr.RGB_INTEGER:Wr.RGB;case Pa.RGBA:return Wr.RGBA}},t.prototype.setActiveTexture=function(y){this.currentActiveTexture!==y&&(this.gl.activeTexture(y),this.currentActiveTexture=y)},t.prototype.bindVAO=function(y){this.currentBoundVAO!==y&&(za(this.gl)?this.gl.bindVertexArray(y):this.OES_vertex_array_object.bindVertexArrayOES(y),this.currentBoundVAO=y)},t.prototype.programCompiled=function(y){es(y.compileState!==vf.NeedsCompile),y.compileState===vf.Compiling&&(y.compileState=vf.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(y))},t.prototype.useProgram=function(y){this.currentProgram!==y&&(this.programCompiled(y),this.gl.useProgram(y.gl_program),this.currentProgram=y)},t.prototype.ensureResourceExists=function(y){if(y===null){var l=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(l))}else return y},t.prototype.createBuffer=function(y){return new C_({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createTexture=function(y){return new Tm({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createSampler=function(y){return new F_({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createRenderTarget=function(y){return new w_({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createRenderTargetFromTexture=function(y){var l=y,m=l.format,a=l.width,T=l.height,R=l.mipLevelCount;return es(R===1),this.createRenderTarget({format:m,width:a,height:T,sampleCount:1,texture:y})},t.prototype.createProgram=function(y){var l,m,a,T=(l=y.vertex)===null||l===void 0?void 0:l.glsl;return((m=y.vertex)===null||m===void 0?void 0:m.glsl)&&(y.vertex.glsl=Ed(this.queryVendorInfo(),"vert",y.vertex.glsl)),((a=y.fragment)===null||a===void 0?void 0:a.glsl)&&(y.fragment.glsl=Ed(this.queryVendorInfo(),"frag",y.fragment.glsl)),this.createProgramSimple(y,T)},t.prototype.createProgramSimple=function(y,l){var m=new R_({id:this.getNextUniqueId(),device:this,descriptor:y},l);return m},t.prototype.createBindings=function(y){return new __({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createInputLayout=function(y){return new P_({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createRenderPipeline=function(y){return new D_({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createComputePass=function(){return new N_},t.prototype.createComputePipeline=function(y){return new j_({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createReadback=function(){return new L_({id:this.getNextUniqueId(),device:this})},t.prototype.createQueryPool=function(y,l){return new I_({id:this.getNextUniqueId(),device:this,descriptor:{type:y,elemCount:l}})},t.prototype.formatRenderPassDescriptor=function(y){var l,m,a,T,R,U,Y=y.colorAttachment;y.depthClearValue=(l=y.depthClearValue)!==null&&l!==void 0?l:"load",y.stencilClearValue=(m=y.stencilClearValue)!==null&&m!==void 0?m:"load";for(var oe=0;oe<Y.length;oe++)y.colorAttachmentLevel||(y.colorAttachmentLevel=[]),y.colorAttachmentLevel[oe]=(a=y.colorAttachmentLevel[oe])!==null&&a!==void 0?a:0,y.colorResolveToLevel||(y.colorResolveToLevel=[]),y.colorResolveToLevel[oe]=(T=y.colorResolveToLevel[oe])!==null&&T!==void 0?T:0,y.colorClearColor||(y.colorClearColor=[]),y.colorClearColor[oe]=(R=y.colorClearColor[oe])!==null&&R!==void 0?R:"load",y.colorStore||(y.colorStore=[]),y.colorStore[oe]=(U=y.colorStore[oe])!==null&&U!==void 0?U:!1},t.prototype.createRenderBundle=function(){return new U_({id:this.getNextUniqueId(),device:this})},t.prototype.beginBundle=function(y){this.renderBundle=y},t.prototype.endBundle=function(){this.renderBundle=void 0},t.prototype.executeBundles=function(y){y.forEach(function(l){l.replay()})},t.prototype.createRenderPass=function(y){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=y,this.formatRenderPassDescriptor(y);var l=y.colorAttachment,m=y.colorAttachmentLevel,a=y.colorClearColor,T=y.colorResolveTo,R=y.colorResolveToLevel,U=y.depthStencilAttachment,Y=y.depthClearValue,oe=y.stencilClearValue,me=y.depthStencilResolveTo,Ce=T&&T.length===1&&T[0]===this.scTexture;this.setRenderPassParametersBegin(l.length,Ce);for(var Ve=0;Ve<l.length;Ve++)this.setRenderPassParametersColor(Ve,l[Ve],m[Ve],T[Ve],R[Ve],Ce);this.setRenderPassParametersDepthStencil(U,me,Ce),this.validateCurrentAttachments();for(var Ve=0;Ve<l.length;Ve++){var ut=a[Ve];ut!=="load"&&this.setRenderPassParametersClearColor(Ve,ut.r,ut.g,ut.b,ut.a)}return this.setRenderPassParametersClearDepthStencil(Y,oe),this},t.prototype.submitPass=function(y){es(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},t.prototype.copySubTexture2D=function(y,l,m,a,T,R){var U=this.gl,Y=y,oe=a;if(es(oe.mipLevelCount===1),es(Y.mipLevelCount===1),za(U))Y===this.scTexture?U.bindFramebuffer(U.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(U.bindFramebuffer(U.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(U.DRAW_FRAMEBUFFER,U.COLOR_ATTACHMENT0,Y,0)),U.bindFramebuffer(U.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(U.READ_FRAMEBUFFER,U.COLOR_ATTACHMENT0,oe,0),U.blitFramebuffer(T,R,T+oe.width,R+oe.height,l,m,l+oe.width,m+oe.height,U.COLOR_BUFFER_BIT,U.LINEAR),U.bindFramebuffer(U.READ_FRAMEBUFFER,null),U.bindFramebuffer(U.DRAW_FRAMEBUFFER,null);else if(Y===this.scTexture){var me=this.createRenderTargetFromTexture(a);this.submitBlitRenderPass(me,Y)}},t.prototype.queryLimits=function(){return this},t.prototype.queryTextureFormatSupported=function(y,l,m){switch(y){case Mn.BC1_SRGB:case Mn.BC2_SRGB:case Mn.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?Om(l,m,4,4):!1;case Mn.BC1:case Mn.BC2:case Mn.BC3:return this.WEBGL_compressed_texture_s3tc!==null?Om(l,m,4,4):!1;case Mn.BC4_UNORM:case Mn.BC4_SNORM:case Mn.BC5_UNORM:case Mn.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?Om(l,m,4,4):!1;case Mn.U16_R_NORM:case Mn.U16_RG_NORM:case Mn.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case Mn.F32_R:case Mn.F32_RG:case Mn.F32_RGB:case Mn.F32_RGBA:return this.OES_texture_float_linear!==null;case Mn.F16_R:case Mn.F16_RG:case Mn.F16_RGB:case Mn.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},t.prototype.queryProgramReady=function(y){var l=this.gl;if(y.compileState===vf.NeedsCompile)throw new Error("whoops");if(y.compileState===vf.Compiling){var m=void 0;return this.KHR_parallel_shader_compile!==null?m=l.getProgramParameter(y.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):m=!0,m&&this.programCompiled(y),m}return y.compileState===vf.NeedsBind||y.compileState===vf.ReadyToUse},t.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},t.prototype.queryVendorInfo=function(){return this},t.prototype.queryRenderPass=function(y){return this.currentRenderPassDescriptor},t.prototype.queryRenderTarget=function(y){var l=y;return l},t.prototype.setResourceName=function(y,l){if(y.name=l,y.type===ou.Buffer)for(var m=y.gl_buffer_pages,a=0;a<m.length;a++)Pp(m[a],"".concat(l," Page ").concat(a));else if(y.type===ou.Texture)Pp(Hv(y),l);else if(y.type===ou.Sampler)Pp(Am(y),l);else if(y.type===ou.RenderTarget){var T=y.gl_renderbuffer;T!==null&&Pp(T,l)}else y.type===ou.InputLayout&&Pp(y.vao,l)},t.prototype.setResourceLeakCheck=function(y,l){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(y,l)},t.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},t.prototype.pushDebugGroup=function(y){},t.prototype.popDebugGroup=function(){},t.prototype.insertDebugMarker=function(y){},t.prototype.programPatched=function(y,l){es(this.shaderDebug)},t.prototype.getBufferData=function(y,l,m){m===void 0&&(m=0);var a=this.gl;za(a)&&(a.bindBuffer(a.COPY_READ_BUFFER,Wv(y,m*4)),a.getBufferSubData(a.COPY_READ_BUFFER,m*4,l))},t.prototype.debugGroupStatisticsDrawCall=function(y){y===void 0&&(y=1);for(var l=this.debugGroupStack.length-1;l>=0;l--)this.debugGroupStack[l].drawCallCount+=y},t.prototype.debugGroupStatisticsBufferUpload=function(y){y===void 0&&(y=1);for(var l=this.debugGroupStack.length-1;l>=0;l--)this.debugGroupStack[l].bufferUploadCount+=y},t.prototype.debugGroupStatisticsTextureBind=function(y){y===void 0&&(y=1);for(var l=this.debugGroupStack.length-1;l>=0;l--)this.debugGroupStack[l].textureBindCount+=y},t.prototype.debugGroupStatisticsTriangles=function(y){for(var l=this.debugGroupStack.length-1;l>=0;l--)this.debugGroupStack[l].triangleCount+=y},t.prototype.reportShaderError=function(y,l){var m=this.gl,a=m.getShaderParameter(y,m.COMPILE_STATUS);if(!a){console.error(z1(l));var T=m.getExtension("WEBGL_debug_shaders");T&&console.error(T.getTranslatedShaderSource(y)),console.error(m.getShaderInfoLog(y))}return a},t.prototype.checkProgramCompilationForErrors=function(y){var l=this.gl,m=y.gl_program;if(!l.getProgramParameter(m,l.LINK_STATUS)){var a=y.descriptor;if(!this.reportShaderError(y.gl_shader_vert,a.vertex.glsl)||!this.reportShaderError(y.gl_shader_frag,a.fragment.glsl))return;console.error(l.getProgramInfoLog(y.gl_program))}},t.prototype.bindFramebufferAttachment=function(y,l,m,a){var T=this.gl;if(ff(m))T.framebufferRenderbuffer(y,l,T.RENDERBUFFER,null);else if(m.type===ou.RenderTarget)m.gl_renderbuffer!==null?T.framebufferRenderbuffer(y,l,T.RENDERBUFFER,m.gl_renderbuffer):m.texture!==null&&T.framebufferTexture2D(y,l,Wr.TEXTURE_2D,Hv(m.texture),a);else if(m.type===ou.Texture){var R=Hv(m);m.dimension===Ss.TEXTURE_2D?T.framebufferTexture2D(y,l,Wr.TEXTURE_2D,R,a):za(T)&&m.dimension===Ss.TEXTURE_2D_ARRAY}},t.prototype.bindFramebufferDepthStencilAttachment=function(y,l){var m=this.gl,a=ff(l)?va.Depth|va.Stencil:Uv(l.format),T=!!(a&va.Depth),R=!!(a&va.Stencil);if(T&&R){var U=za(this.gl)||!za(this.gl)&&!!this.WEBGL_depth_texture;U?this.bindFramebufferAttachment(y,m.DEPTH_STENCIL_ATTACHMENT,l,0):this.bindFramebufferAttachment(y,m.DEPTH_ATTACHMENT,l,0)}else T?(this.bindFramebufferAttachment(y,m.DEPTH_ATTACHMENT,l,0),this.bindFramebufferAttachment(y,m.STENCIL_ATTACHMENT,null,0)):R&&(this.bindFramebufferAttachment(y,m.STENCIL_ATTACHMENT,l,0),this.bindFramebufferAttachment(y,m.DEPTH_ATTACHMENT,null,0))},t.prototype.validateCurrentAttachments=function(){for(var y=-1,l=-1,m=-1,a=0;a<this.currentColorAttachments.length;a++){var T=this.currentColorAttachments[a];T!==null&&(y===-1?(y=T.sampleCount,l=T.width,m=T.height):(es(y===T.sampleCount),es(l===T.width),es(m===T.height)))}this.currentDepthStencilAttachment&&(y===-1?y=this.currentDepthStencilAttachment.sampleCount:(es(y===this.currentDepthStencilAttachment.sampleCount),es(l===this.currentDepthStencilAttachment.width),es(m===this.currentDepthStencilAttachment.height))),this.currentSampleCount=y},t.prototype.setRenderPassParametersBegin=function(y,l){l===void 0&&(l=!1);var m=this.gl;if(l)m.bindFramebuffer(Wr.FRAMEBUFFER,null);else if(za(m)?m.bindFramebuffer(Wr.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||m.bindFramebuffer(Wr.FRAMEBUFFER,this.renderPassDrawFramebuffer),za(m)?m.drawBuffers([Wr.COLOR_ATTACHMENT0,Wr.COLOR_ATTACHMENT1,Wr.COLOR_ATTACHMENT2,Wr.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Wr.COLOR_ATTACHMENT0_WEBGL,Wr.COLOR_ATTACHMENT1_WEBGL,Wr.COLOR_ATTACHMENT2_WEBGL,Wr.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var a=y;a<this.currentColorAttachments.length;a++){var T=za(m)?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,R=za(m)?Wr.COLOR_ATTACHMENT0:Wr.COLOR_ATTACHMENT0_WEBGL;m.framebufferRenderbuffer(T,R+a,Wr.RENDERBUFFER,null),m.framebufferTexture2D(T,R+a,Wr.TEXTURE_2D,null,0)}this.currentColorAttachments.length=y},t.prototype.setRenderPassParametersColor=function(y,l,m,a,T,R){R===void 0&&(R=!1);var U=this.gl,Y=za(U);(this.currentColorAttachments[y]!==l||this.currentColorAttachmentLevels[y]!==m)&&(this.currentColorAttachments[y]=l,this.currentColorAttachmentLevels[y]=m,!R&&(Y||!Y&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(Y?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,(Y?Wr.COLOR_ATTACHMENT0:Wr.COLOR_ATTACHMENT0_WEBGL)+y,l,m),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[y]!==a||this.currentColorResolveToLevels[y]!==T)&&(this.currentColorResolveTos[y]=a,this.currentColorResolveToLevels[y]=T,a!==null&&(this.resolveColorAttachmentsChanged=!0))},t.prototype.setRenderPassParametersDepthStencil=function(y,l,m){m===void 0&&(m=!1);var a=this.gl;this.currentDepthStencilAttachment!==y&&(this.currentDepthStencilAttachment=y,!m&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(za(a)?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==l&&(this.currentDepthStencilResolveTo=l,l&&(this.resolveDepthStencilAttachmentsChanged=!0))},t.prototype.setRenderPassParametersClearColor=function(y,l,m,a,T){var R=this.gl;if(this.OES_draw_buffers_indexed!==null){var U=this.currentMegaState.attachmentsState[y];U&&U.channelWriteMask!==Pc.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(y,!0,!0,!0,!0),U.channelWriteMask=Pc.ALL)}else{var U=this.currentMegaState.attachmentsState[0];U&&U.channelWriteMask!==Pc.ALL&&(R.colorMask(!0,!0,!0,!0),U.channelWriteMask=Pc.ALL)}this.setScissorRectEnabled(!1),za(R)?R.clearBufferfv(R.COLOR,y,[l,m,a,T]):(R.clearColor(l,m,a,T),R.clear(R.COLOR_BUFFER_BIT))},t.prototype.setRenderPassParametersClearDepthStencil=function(y,l){y===void 0&&(y="load"),l===void 0&&(l="load");var m=this.gl;y!=="load"&&(es(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(m.depthMask(!0),this.currentMegaState.depthWrite=!0),za(m)?m.clearBufferfv(m.DEPTH,0,[y]):(m.clearDepth(y),m.clear(m.DEPTH_BUFFER_BIT))),l!=="load"&&(es(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(m.enable(m.STENCIL_TEST),m.stencilMask(255),this.currentMegaState.stencilWrite=!0),za(m)?m.clearBufferiv(m.STENCIL,0,[l]):(m.clearStencil(l),m.clear(m.STENCIL_BUFFER_BIT)))},t.prototype.setBindings=function(y){var l=this,m;if(this.renderBundle){this.renderBundle.push(function(){return l.setBindings(y)});return}var a=this.gl,T=y,R=T.uniformBufferBindings,U=T.samplerBindings,Y=T.bindingLayouts;es(0<Y.bindingLayoutTables.length);var oe=Y.bindingLayoutTables[0];es(R.length>=oe.numUniformBuffers),es(U.length>=oe.numSamplers);for(var me=0;me<R.length;me++){var Ce=R[me];if(Ce.size!==0){var Ve=oe.firstUniformBuffer+me,ut=Ce.buffer,Ft=Ce.offset||0,Nt=Ce.size||ut.byteSize;if(ut!==this.currentUniformBuffers[Ve]||Ft!==this.currentUniformBufferByteOffsets[Ve]||Nt!==this.currentUniformBufferByteSizes[Ve]){var vr=Ft%ut.pageByteSize,_r=ut.gl_buffer_pages[Ft/ut.pageByteSize|0];es(vr+Nt<=ut.pageByteSize),za(a)&&a.bindBufferRange(a.UNIFORM_BUFFER,Ve,_r,vr,Nt),this.currentUniformBuffers[Ve]=ut,this.currentUniformBufferByteOffsets[Ve]=Ft,this.currentUniformBufferByteSizes[Ve]=Nt}}}for(var me=0;me<oe.numSamplers;me++){var Ce=U[me],Sr=oe.firstSampler+me,cn=Ce!==null&&Ce.sampler!==null?Am(Ce.sampler):null,Bn=Ce!==null&&Ce.texture!==null?Hv(Ce.texture):null;if(this.currentSamplers[Sr]!==cn&&(za(a)&&a.bindSampler(Sr,cn),this.currentSamplers[Sr]=cn),this.currentTextures[Sr]!==Bn){if(this.setActiveTexture(a.TEXTURE0+Sr),Bn!==null){var Kn=ev(Ce).texture,wn=Kn.gl_target,vn=Kn.width,ti=Kn.height;Ce.texture.textureIndex=Sr,a.bindTexture(wn,Bn),za(a)||(m=Ce.sampler)===null||m===void 0||m.setTextureParameters(wn,vn,ti),this.debugGroupStatisticsTextureBind()}else{var Mi=ml(ml({},Ce),E0),Ki=Mi.dimension,Ii=Mi.formatKind,wn=M_(Ki);a.bindTexture(wn,this.getFallbackTexture(ml({gl_target:wn,formatKind:Ii},Mi)))}this.currentTextures[Sr]=Bn}}},t.prototype.setViewport=function(y,l,m,a){var T=this.gl;T.viewport(y,l,m,a)},t.prototype.setScissorRect=function(y,l,m,a){var T=this.gl;this.setScissorRectEnabled(!0),T.scissor(y,l,m,a)},t.prototype.applyAttachmentStateIndexed=function(y,l,m){var a=this.gl,T=this.OES_draw_buffers_indexed;l.channelWriteMask!==m.channelWriteMask&&(T.colorMaskiOES(y,!!(m.channelWriteMask&Pc.RED),!!(m.channelWriteMask&Pc.GREEN),!!(m.channelWriteMask&Pc.BLUE),!!(m.channelWriteMask&Pc.ALPHA)),l.channelWriteMask=m.channelWriteMask);var R=l.rgbBlendState.blendMode!==m.rgbBlendState.blendMode||l.alphaBlendState.blendMode!==m.alphaBlendState.blendMode,U=l.rgbBlendState.blendSrcFactor!==m.rgbBlendState.blendSrcFactor||l.alphaBlendState.blendSrcFactor!==m.alphaBlendState.blendSrcFactor||l.rgbBlendState.blendDstFactor!==m.rgbBlendState.blendDstFactor||l.alphaBlendState.blendDstFactor!==m.alphaBlendState.blendDstFactor;(U||R)&&(Sd(l.rgbBlendState)&&Sd(l.alphaBlendState)?T.enableiOES(y,a.BLEND):Sd(m.rgbBlendState)&&Sd(m.alphaBlendState)&&T.disableiOES(y,a.BLEND)),R&&(T.blendEquationSeparateiOES(y,m.rgbBlendState.blendMode,m.alphaBlendState.blendMode),l.rgbBlendState.blendMode=m.rgbBlendState.blendMode,l.alphaBlendState.blendMode=m.alphaBlendState.blendMode),U&&(T.blendFuncSeparateiOES(y,m.rgbBlendState.blendSrcFactor,m.rgbBlendState.blendDstFactor,m.alphaBlendState.blendSrcFactor,m.alphaBlendState.blendDstFactor),l.rgbBlendState.blendSrcFactor=m.rgbBlendState.blendSrcFactor,l.alphaBlendState.blendSrcFactor=m.alphaBlendState.blendSrcFactor,l.rgbBlendState.blendDstFactor=m.rgbBlendState.blendDstFactor,l.alphaBlendState.blendDstFactor=m.alphaBlendState.blendDstFactor)},t.prototype.applyAttachmentState=function(y,l){var m=this.gl;y.channelWriteMask!==l.channelWriteMask&&(m.colorMask(!!(l.channelWriteMask&Pc.RED),!!(l.channelWriteMask&Pc.GREEN),!!(l.channelWriteMask&Pc.BLUE),!!(l.channelWriteMask&Pc.ALPHA)),y.channelWriteMask=l.channelWriteMask);var a=y.rgbBlendState.blendMode!==l.rgbBlendState.blendMode||y.alphaBlendState.blendMode!==l.alphaBlendState.blendMode,T=y.rgbBlendState.blendSrcFactor!==l.rgbBlendState.blendSrcFactor||y.alphaBlendState.blendSrcFactor!==l.alphaBlendState.blendSrcFactor||y.rgbBlendState.blendDstFactor!==l.rgbBlendState.blendDstFactor||y.alphaBlendState.blendDstFactor!==l.alphaBlendState.blendDstFactor;(T||a)&&(Sd(y.rgbBlendState)&&Sd(y.alphaBlendState)?m.enable(m.BLEND):Sd(l.rgbBlendState)&&Sd(l.alphaBlendState)&&m.disable(m.BLEND)),a&&(m.blendEquationSeparate(l.rgbBlendState.blendMode,l.alphaBlendState.blendMode),y.rgbBlendState.blendMode=l.rgbBlendState.blendMode,y.alphaBlendState.blendMode=l.alphaBlendState.blendMode),T&&(m.blendFuncSeparate(l.rgbBlendState.blendSrcFactor,l.rgbBlendState.blendDstFactor,l.alphaBlendState.blendSrcFactor,l.alphaBlendState.blendDstFactor),y.rgbBlendState.blendSrcFactor=l.rgbBlendState.blendSrcFactor,y.alphaBlendState.blendSrcFactor=l.alphaBlendState.blendSrcFactor,y.rgbBlendState.blendDstFactor=l.rgbBlendState.blendDstFactor,y.alphaBlendState.blendDstFactor=l.alphaBlendState.blendDstFactor)},t.prototype.setMegaState=function(y){var l=this.gl,m=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var a=0;a<y.attachmentsState.length;a++)this.applyAttachmentStateIndexed(a,m.attachmentsState[0],y.attachmentsState[0]);else es(y.attachmentsState.length===1),this.applyAttachmentState(m.attachmentsState[0],y.attachmentsState[0]);g0(m.blendConstant,y.blendConstant)||(l.blendColor(y.blendConstant.r,y.blendConstant.g,y.blendConstant.b,y.blendConstant.a),m0(m.blendConstant,y.blendConstant)),m.depthCompare!==y.depthCompare&&(l.depthFunc(y.depthCompare),m.depthCompare=y.depthCompare),!!m.depthWrite!=!!y.depthWrite&&(l.depthMask(y.depthWrite),m.depthWrite=y.depthWrite),!!m.stencilWrite!=!!y.stencilWrite&&(l.stencilMask(y.stencilWrite?255:0),m.stencilWrite=y.stencilWrite);var T=!1;if(!Mg(m.stencilFront,y.stencilFront)){T=!0;var R=y.stencilFront,U=R.passOp,Y=R.failOp,oe=R.depthFailOp,me=R.compare;(m.stencilFront.passOp!==U||m.stencilFront.failOp!==Y||m.stencilFront.depthFailOp!==oe)&&(l.stencilOpSeparate(l.FRONT,Y,oe,U),m.stencilFront.passOp=U,m.stencilFront.failOp=Y,m.stencilFront.depthFailOp=oe),m.stencilFront.compare!==me&&(this.setStencilReference(0),m.stencilFront.compare=me)}if(!Mg(m.stencilBack,y.stencilBack)){T=!0;var Ce=y.stencilBack,U=Ce.passOp,Y=Ce.failOp,oe=Ce.depthFailOp,me=Ce.compare;(m.stencilBack.passOp!==U||m.stencilBack.failOp!==Y||m.stencilBack.depthFailOp!==oe)&&(l.stencilOpSeparate(l.BACK,Y,oe,U),m.stencilBack.passOp=U,m.stencilBack.failOp=Y,m.stencilBack.depthFailOp=oe),m.stencilBack.compare!==me&&(this.setStencilReference(0),m.stencilBack.compare=me)}(m.stencilFront.mask!==y.stencilFront.mask||m.stencilBack.mask!==y.stencilBack.mask)&&(T=!0,m.stencilFront.mask=y.stencilFront.mask,m.stencilBack.mask=y.stencilBack.mask),T&&this.applyStencil(),m.cullMode!==y.cullMode&&(m.cullMode===df.NONE?l.enable(l.CULL_FACE):y.cullMode===df.NONE&&l.disable(l.CULL_FACE),y.cullMode===df.BACK?l.cullFace(l.BACK):y.cullMode===df.FRONT?l.cullFace(l.FRONT):y.cullMode===df.FRONT_AND_BACK&&l.cullFace(l.FRONT_AND_BACK),m.cullMode=y.cullMode),m.frontFace!==y.frontFace&&(l.frontFace(y.frontFace),m.frontFace=y.frontFace),m.polygonOffset!==y.polygonOffset&&(y.polygonOffset?l.enable(l.POLYGON_OFFSET_FILL):l.disable(l.POLYGON_OFFSET_FILL),m.polygonOffset=y.polygonOffset),(m.polygonOffsetFactor!==y.polygonOffsetFactor||m.polygonOffsetUnits!==y.polygonOffsetUnits)&&(l.polygonOffset(y.polygonOffsetFactor,y.polygonOffsetUnits),m.polygonOffsetFactor=y.polygonOffsetFactor,m.polygonOffsetUnits=y.polygonOffsetUnits)},t.prototype.validatePipelineFormats=function(y){for(var l=0;l<this.currentColorAttachments.length;l++)var m=this.currentColorAttachments[l];this.currentDepthStencilAttachment&&es(this.currentDepthStencilAttachment.format===y.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&es(this.currentSampleCount===y.sampleCount)},t.prototype.setPipeline=function(y){var l=this;if(this.renderBundle){this.renderBundle.push(function(){return l.setPipeline(y)});return}this.currentPipeline=y,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var m=this.currentPipeline.program;if(this.useProgram(m),m.compileState===vf.NeedsBind){var a=this.gl,T=m.gl_program,R=m.descriptor,U=D0(R.vertex.glsl,k_);if(za(a))for(var Y=0;Y<U.length;Y++){var oe=hf(U[Y],2),me=oe[1],Ce=a.getUniformBlockIndex(T,me);Ce!==-1&&Ce!==4294967295&&a.uniformBlockBinding(T,Ce,Y)}for(var Ve=D0(R.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),Y=0;Y<Ve.length;Y++){var ut=hf(Ve[Y],3),Ft=ut[1],Nt=ut[2],vr=a.getUniformLocation(T,Ft);a.uniform1i(vr,parseInt(Nt))}m.compileState=vf.ReadyToUse}},t.prototype.setVertexInput=function(y,l,m){var a,T,R=this,U;if(this.renderBundle){this.renderBundle.push(function(){return R.setVertexInput(y,l,m)});return}if(y!==null){es(this.currentPipeline.inputLayout===y);var Y=y;this.bindVAO(Y.vao);for(var oe=this.gl,me=0;me<Y.vertexBufferDescriptors.length;me++){var Ce=Y.vertexBufferDescriptors[me],Ve=Ce.arrayStride,ut=Ce.attributes;try{for(var Ft=(a=void 0,Eh(ut)),Nt=Ft.next();!Nt.done;Nt=Ft.next()){var vr=Nt.value,_r=vr.shaderLocation,Sr=vr.offset,cn=za(oe)?_r:(U=Y.program.attributes[_r])===null||U===void 0?void 0:U.location;if(!ff(cn)){var Bn=l[me];if(Bn===null)continue;var Kn=vr.vertexFormat;oe.bindBuffer(oe.ARRAY_BUFFER,Wv(Bn.buffer));var wn=(Bn.offset||0)+Sr;oe.vertexAttribPointer(cn,Kn.size,Kn.type,Kn.normalized,Ve,wn)}}}catch(ti){a={error:ti}}finally{try{Nt&&!Nt.done&&(T=Ft.return)&&T.call(Ft)}finally{if(a)throw a.error}}}if(es(m!==null==(Y.indexBufferFormat!==null)),m!==null){var vn=m.buffer;es(vn.usage===Zu.INDEX),oe.bindBuffer(oe.ELEMENT_ARRAY_BUFFER,Wv(vn)),this.currentIndexBufferByteOffset=m.offset||0}else this.currentIndexBufferByteOffset=null}else es(this.currentPipeline.inputLayout===null),es(m===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},t.prototype.setStencilReference=function(y){this.currentStencilRef!==y&&(this.currentStencilRef=y,this.applyStencil())},t.prototype.draw=function(y,l,m,a){var T,R=this;if(this.renderBundle){this.renderBundle.push(function(){return R.draw(y,l,m,a)});return}var U=this.gl,Y=this.currentPipeline;if(l){var oe=[Y.drawMode,m||0,y,l];za(U)?U.drawArraysInstanced.apply(U,Fv([],hf(oe),!1)):(T=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(T,Fv([],hf(oe),!1))}else U.drawArrays(Y.drawMode,m,y);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(y/3*Math.max(l,1))},t.prototype.drawIndexed=function(y,l,m,a,T){var R,U=this;if(this.renderBundle){this.renderBundle.push(function(){return U.drawIndexed(y,l,m,a,T)});return}var Y=this.gl,oe=this.currentPipeline,me=ev(oe.inputLayout),Ce=ev(this.currentIndexBufferByteOffset)+m*me.indexBufferCompByteSize;if(l){var Ve=[oe.drawMode,y,me.indexBufferType,Ce,l];za(Y)?Y.drawElementsInstanced.apply(Y,Fv([],hf(Ve),!1)):(R=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(R,Fv([],hf(Ve),!1))}else Y.drawElements(oe.drawMode,y,me.indexBufferType,Ce);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(y/3*Math.max(l,1))},t.prototype.drawIndirect=function(y,l){},t.prototype.drawIndexedIndirect=function(y,l){},t.prototype.beginOcclusionQuery=function(y){var l=this.gl;if(za(l)){var m=this.currentRenderPassDescriptor.occlusionQueryPool;l.beginQuery(m.gl_query_type,m.gl_query[y])}},t.prototype.endOcclusionQuery=function(){var y=this.gl;if(za(y)){var l=this.currentRenderPassDescriptor.occlusionQueryPool;y.endQuery(l.gl_query_type)}},t.prototype.pipelineQueryReady=function(y){var l=y;return this.queryProgramReady(l.program)},t.prototype.pipelineForceReady=function(y){},t.prototype.endPass=function(){for(var y=this.gl,l=za(y),m=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,a=!1,T=0;T<this.currentColorAttachments.length;T++){var R=this.currentColorAttachments[T];if(R!==null){var U=this.currentColorResolveTos[T],Y=!1;U!==null&&(es(R.width===U.width&&R.height===U.height),this.setScissorRectEnabled(!1),m||(l&&y.bindFramebuffer(y.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&l&&this.bindFramebufferAttachment(y.READ_FRAMEBUFFER,y.COLOR_ATTACHMENT0,R,this.currentColorAttachmentLevels[T])),Y=!0,m||(U===this.scTexture?y.bindFramebuffer(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,this.scPlatformFramebuffer):(y.bindFramebuffer(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&y.framebufferTexture2D(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,U.gl_texture,this.currentColorResolveToLevels[T]))),m||(l?(y.blitFramebuffer(0,0,R.width,R.height,0,0,U.width,U.height,y.COLOR_BUFFER_BIT,y.LINEAR),y.bindFramebuffer(y.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(R,U)),a=!0),this.currentRenderPassDescriptor.colorStore[T]||!m&&!Y&&(y.bindFramebuffer(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,y.COLOR_ATTACHMENT0,R,this.currentColorAttachmentLevels[T])),m||y.bindFramebuffer(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var oe=this.currentDepthStencilAttachment;if(oe){var me=this.currentDepthStencilResolveTo,Y=!1;me&&(es(oe.width===me.width&&oe.height===me.height),this.setScissorRectEnabled(!1),m||(y.bindFramebuffer(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),y.bindFramebuffer(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,oe),this.bindFramebufferDepthStencilAttachment(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,me))),Y=!0,m||(l&&y.blitFramebuffer(0,0,oe.width,oe.height,0,0,me.width,me.height,y.DEPTH_BUFFER_BIT,y.NEAREST),y.bindFramebuffer(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,null)),a=!0),!m&&!this.currentRenderPassDescriptor.depthStencilStore&&(Y||(y.bindFramebuffer(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,oe),Y=!0),l&&y.invalidateFramebuffer(y.READ_FRAMEBUFFER,[y.DEPTH_STENCIL_ATTACHMENT])),!m&&Y&&y.bindFramebuffer(l?Wr.READ_FRAMEBUFFER:Wr.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!m&&!a&&y.bindFramebuffer(l?Wr.DRAW_FRAMEBUFFER:Wr.FRAMEBUFFER,null)},t.prototype.setScissorRectEnabled=function(y){if(this.currentScissorEnabled!==y){var l=this.gl;y?l.enable(l.SCISSOR_TEST):l.disable(l.SCISSOR_TEST),this.currentScissorEnabled=y}},t.prototype.applyStencil=function(){ff(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Wr.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(Wr.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},t.prototype.getFallbackTexture=function(y){var l=y.gl_target,m=y.formatKind;if(l===Wr.TEXTURE_2D)return m===kl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(l===Wr.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(l===Wr.TEXTURE_3D)return this.fallbackTexture3D;if(l===Wr.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},t.prototype.submitBlitRenderPass=function(y,l){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:Zu.VERTEX|Zu.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:qd.VERTEX,attributes:[{format:Mn.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:hc.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[Mn.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:zv(tv)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:y.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:y}));var m=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var a=this.createRenderPass({colorAttachment:[y],colorResolveTo:[l],colorClearColor:[B1]}),T=this.getCanvas(),R=T.width,U=T.height;a.setPipeline(this.blitRenderPipeline),a.setBindings(this.blitBindings),a.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),a.setViewport(0,0,R,U),this.gl.disable(this.gl.BLEND),a.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=m,this.inBlitRenderPass=!1},t}(),V_=function(){function t(y){this.pluginOptions=y}return t.prototype.createSwapChain=function(y){return Jd(this,void 0,void 0,function(){var l,m,a,T,R,U,Y,oe,me,Ce,Ve,ut,Ft;return Qd(this,function(Nt){return l=this.pluginOptions,m=l.targets,a=l.xrCompatible,T=l.antialias,R=T===void 0?!1:T,U=l.preserveDrawingBuffer,Y=U===void 0?!1:U,oe=l.premultipliedAlpha,me=oe===void 0?!0:oe,Ce=l.shaderDebug,Ve=l.trackResources,ut={antialias:R,preserveDrawingBuffer:Y,stencil:!0,premultipliedAlpha:me,xrCompatible:a},this.handleContextEvents(y),m.includes("webgl2")&&(Ft=y.getContext("webgl2",ut)||y.getContext("experimental-webgl2",ut)),!Ft&&m.includes("webgl1")&&(Ft=y.getContext("webgl",ut)||y.getContext("experimental-webgl",ut)),[2,new z_(Ft,{shaderDebug:Ce,trackResources:Ve})]})})},t.prototype.handleContextEvents=function(y){var l=this.pluginOptions,m=l.onContextLost,a=l.onContextRestored,T=l.onContextCreationError;T&&y.addEventListener("webglcontextcreationerror",T,!1),m&&y.addEventListener("webglcontextlost",m,!1),a&&y.addEventListener("webglcontextrestored",a,!1)},t}(),Vl,B0=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:function(){throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&B0.decode();var wp=null;function wg(){return(wp===null||wp.byteLength===0)&&(wp=new Uint8Array(Vl.memory.buffer)),wp}function Rg(t,y){return t=t>>>0,B0.decode(wg().subarray(t,t+y))}var Xh=new Array(128).fill(void 0);Xh.push(void 0,null,!0,!1);var Rp=Xh.length;function W_(t){Rp===Xh.length&&Xh.push(Xh.length+1);var y=Rp;return Rp=Xh[y],Xh[y]=t,y}function Ig(t){return Xh[t]}function H_(t){t<132||(Xh[t]=Rp,Rp=t)}function G_(t){var y=Ig(t);return H_(t),y}var Gv=0,Lg=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:function(){throw Error("TextEncoder not available")}},X_=typeof Lg.encodeInto=="function"?function(t,y){return Lg.encodeInto(t,y)}:function(t,y){var l=Lg.encode(t);return y.set(l),{read:t.length,written:l.length}};function Dg(t,y,l){if(l===void 0){var m=Lg.encode(t),a=y(m.length,1)>>>0;return wg().subarray(a,a+m.length).set(m),Gv=m.length,a}for(var T=t.length,R=y(T,1)>>>0,U=wg(),Y=0;Y<T;Y++){var oe=t.charCodeAt(Y);if(oe>127)break;U[R+Y]=oe}if(Y!==T){Y!==0&&(t=t.slice(Y)),R=l(R,T,T=Y+t.length*3,1)>>>0;var me=wg().subarray(R+Y,R+T),Ce=X_(t,me);Y+=Ce.written}return Gv=Y,R}var Ip=null;function jg(){return(Ip===null||Ip.byteLength===0)&&(Ip=new Int32Array(Vl.memory.buffer)),Ip}function Y_(t,y,l){var m,a;try{var T=Vl.__wbindgen_add_to_stack_pointer(-16),R=Dg(t,Vl.__wbindgen_malloc,Vl.__wbindgen_realloc),U=Gv,Y=Dg(y,Vl.__wbindgen_malloc,Vl.__wbindgen_realloc),oe=Gv;Vl.glsl_compile(T,R,U,Y,oe,l);var me=jg()[T/4+0],Ce=jg()[T/4+1];return m=me,a=Ce,Rg(me,Ce)}finally{Vl.__wbindgen_add_to_stack_pointer(16),Vl.__wbindgen_free(m,a,1)}}var F0=function(){function t(){Object(g.a)(this,t);var y=Vl.wgslcomposer_new();return t.__wrap(y)}return Object(v.a)(t,[{key:"__destroy_into_raw",value:function(){var l=this.__wbg_ptr;return this.__wbg_ptr=0,l}},{key:"free",value:function(){var l=this.__destroy_into_raw();Vl.__wbg_wgslcomposer_free(l)}},{key:"load_composable",value:function(l){var m=Dg(l,Vl.__wbindgen_malloc,Vl.__wbindgen_realloc),a=Gv;Vl.wgslcomposer_load_composable(this.__wbg_ptr,m,a)}},{key:"wgsl_compile",value:function(l){var m,a;try{var T=Vl.__wbindgen_add_to_stack_pointer(-16),R=Dg(l,Vl.__wbindgen_malloc,Vl.__wbindgen_realloc),U=Gv;Vl.wgslcomposer_wgsl_compile(T,this.__wbg_ptr,R,U);var Y=jg()[T/4+0],oe=jg()[T/4+1];return m=Y,a=oe,Rg(Y,oe)}finally{Vl.__wbindgen_add_to_stack_pointer(16),Vl.__wbindgen_free(m,a,1)}}}],[{key:"__wrap",value:function(l){l=l>>>0;var m=Object.create(t.prototype);return m.__wbg_ptr=l,m}}]),t}();function $_(t,y){return Mm.apply(this,arguments)}function Mm(){return Mm=Object(yg.a)(Object(K.a)().mark(function t(y,l){var m,a;return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(typeof Response=="function"&&y instanceof Response)){R.next=23;break}if(typeof WebAssembly.instantiateStreaming!="function"){R.next=15;break}return R.prev=2,R.next=5,WebAssembly.instantiateStreaming(y,l);case 5:return R.abrupt("return",R.sent);case 8:if(R.prev=8,R.t0=R.catch(2),y.headers.get("Content-Type")=="application/wasm"){R.next=14;break}console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",R.t0),R.next=15;break;case 14:throw R.t0;case 15:return R.next=17,y.arrayBuffer();case 17:return m=R.sent,R.next=20,WebAssembly.instantiate(m,l);case 20:return R.abrupt("return",R.sent);case 23:return R.next=25,WebAssembly.instantiate(y,l);case 25:if(a=R.sent,!(a instanceof WebAssembly.Instance)){R.next=30;break}return R.abrupt("return",{instance:a,module:y});case 30:return R.abrupt("return",a);case 31:case"end":return R.stop()}},t,null,[[2,8]])})),Mm.apply(this,arguments)}function Z_(){var t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(y,l){var m=Rg(y,l);return W_(m)},t.wbg.__wbindgen_object_drop_ref=function(y){G_(y)},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(y){console.log(Ig(y))},t.wbg.__wbg_log_576ca876af0d4a77=function(y,l){console.log(Ig(y),Ig(l))},t.wbg.__wbindgen_throw=function(y,l){throw new Error(Rg(y,l))},t}function K_(t,y){return Vl=t.exports,N0.__wbindgen_wasm_module=y,Ip=null,wp=null,Vl}function N0(t){return Cm.apply(this,arguments)}function Cm(){return Cm=Object(yg.a)(Object(K.a)().mark(function t(y){var l,m,a,T;return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Vl===void 0){U.next=2;break}return U.abrupt("return",Vl);case 2:return l=Z_(),(typeof y=="string"||typeof Request=="function"&&y instanceof Request||typeof URL=="function"&&y instanceof URL)&&(y=fetch(y)),U.t0=$_,U.next=7,y;case 7:return U.t1=U.sent,U.t2=l,U.next=11,(0,U.t0)(U.t1,U.t2);case 11:return m=U.sent,a=m.instance,T=m.module,U.abrupt("return",K_(a,T));case 15:case"end":return U.stop()}},t)})),Cm.apply(this,arguments)}var Ac;(function(t){t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.TEXTURE_BINDING=4]="TEXTURE_BINDING",t[t.STORAGE_BINDING=8]="STORAGE_BINDING",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Ac||(Ac={}));var Pm;(function(t){t[t.READ=1]="READ",t[t.WRITE=2]="WRITE"})(Pm||(Pm={}));function J_(t){var y=0;return t&Nc.SAMPLED&&(y|=Ac.TEXTURE_BINDING|Ac.COPY_DST|Ac.COPY_SRC),t&Nc.STORAGE&&(y|=Ac.TEXTURE_BINDING|Ac.STORAGE_BINDING|Ac.COPY_SRC|Ac.COPY_DST),t&Nc.RENDER_TARGET&&(y|=Ac.RENDER_ATTACHMENT|Ac.TEXTURE_BINDING|Ac.COPY_SRC|Ac.COPY_DST),y}function wm(t){if(t===Mn.U8_R_NORM)return"r8unorm";if(t===Mn.S8_R_NORM)return"r8snorm";if(t===Mn.U8_RG_NORM)return"rg8unorm";if(t===Mn.S8_RG_NORM)return"rg8snorm";if(t===Mn.U32_R)return"r32uint";if(t===Mn.S32_R)return"r32sint";if(t===Mn.F32_R)return"r32float";if(t===Mn.U16_RG)return"rg16uint";if(t===Mn.S16_RG)return"rg16sint";if(t===Mn.F16_RG)return"rg16float";if(t===Mn.U8_RGBA_RT)return"bgra8unorm";if(t===Mn.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(t===Mn.U8_RGBA_NORM)return"rgba8unorm";if(t===Mn.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(t===Mn.S8_RGBA_NORM)return"rgba8snorm";if(t===Mn.U32_RG)return"rg32uint";if(t===Mn.S32_RG)return"rg32sint";if(t===Mn.F32_RG)return"rg32float";if(t===Mn.U16_RGBA)return"rgba16uint";if(t===Mn.S16_RGBA)return"rgba16sint";if(t===Mn.F16_RGBA)return"rgba16float";if(t===Mn.F32_RGBA)return"rgba32float";if(t===Mn.U32_RGBA)return"rgba32uint";if(t===Mn.S32_RGBA)return"rgba32sint";if(t===Mn.D24)return"depth24plus";if(t===Mn.D24_S8)return"depth24plus-stencil8";if(t===Mn.D32F)return"depth32float";if(t===Mn.D32F_S8)return"depth32float-stencil8";if(t===Mn.BC1)return"bc1-rgba-unorm";if(t===Mn.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(t===Mn.BC2)return"bc2-rgba-unorm";if(t===Mn.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(t===Mn.BC3)return"bc3-rgba-unorm";if(t===Mn.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(t===Mn.BC4_SNORM)return"bc4-r-snorm";if(t===Mn.BC4_UNORM)return"bc4-r-unorm";if(t===Mn.BC5_SNORM)return"bc5-rg-snorm";if(t===Mn.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function Q_(t){if(t===Ss.TEXTURE_2D)return"2d";if(t===Ss.TEXTURE_CUBE_MAP)return"2d";if(t===Ss.TEXTURE_2D_ARRAY)return"2d";if(t===Ss.TEXTURE_3D)return"3d";throw new Error("whoops")}function q_(t){if(t===Ss.TEXTURE_2D)return"2d";if(t===Ss.TEXTURE_CUBE_MAP)return"cube";if(t===Ss.TEXTURE_2D_ARRAY)return"2d-array";if(t===Ss.TEXTURE_3D)return"3d";throw new Error("whoops")}function eb(t){var y=0;return t&Zu.INDEX&&(y|=GPUBufferUsage.INDEX),t&Zu.VERTEX&&(y|=GPUBufferUsage.VERTEX),t&Zu.UNIFORM&&(y|=GPUBufferUsage.UNIFORM),t&Zu.STORAGE&&(y|=GPUBufferUsage.STORAGE),t&Zu.COPY_SRC&&(y|=GPUBufferUsage.COPY_SRC),t&Zu.INDIRECT&&(y|=GPUBufferUsage.INDIRECT),y|=GPUBufferUsage.COPY_DST,y}function Rm(t){if(t===tf.CLAMP_TO_EDGE)return"clamp-to-edge";if(t===tf.REPEAT)return"repeat";if(t===tf.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function U0(t){if(t===Jl.BILINEAR)return"linear";if(t===Jl.POINT)return"nearest";throw new Error("whoops")}function tb(t){if(t===Sc.LINEAR)return"linear";if(t===Sc.NEAREST)return"nearest";if(t===Sc.NO_MIP)return"nearest";throw new Error("whoops")}function Xv(t){var y=t;return y.gpuBuffer}function rb(t){var y=t;return y.gpuSampler}function nb(t){var y=t;return y.querySet}function ib(t){if(t===xg.OcclusionConservative)return"occlusion";throw new Error("whoops")}function ab(t){switch(t){case hc.TRIANGLES:return"triangle-list";case hc.POINTS:return"point-list";case hc.TRIANGLE_STRIP:return"triangle-strip";case hc.LINES:return"line-list";case hc.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function ob(t){if(t===df.NONE)return"none";if(t===df.FRONT)return"front";if(t===df.BACK)return"back";throw new Error("whoops")}function sb(t){if(t===Op.CCW)return"ccw";if(t===Op.CW)return"cw";throw new Error("whoops")}function ub(t,y){return{topology:ab(t),cullMode:ob(y.cullMode),frontFace:sb(y.frontFace)}}function k0(t){if(t===Ms.ZERO)return"zero";if(t===Ms.ONE)return"one";if(t===Ms.SRC)return"src";if(t===Ms.ONE_MINUS_SRC)return"one-minus-src";if(t===Ms.DST)return"dst";if(t===Ms.ONE_MINUS_DST)return"one-minus-dst";if(t===Ms.SRC_ALPHA)return"src-alpha";if(t===Ms.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(t===Ms.DST_ALPHA)return"dst-alpha";if(t===Ms.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(t===Ms.CONST)return"constant";if(t===Ms.ONE_MINUS_CONSTANT)return"one-minus-constant";if(t===Ms.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function lb(t){if(t===Cc.ADD)return"add";if(t===Cc.SUBSTRACT)return"subtract";if(t===Cc.REVERSE_SUBSTRACT)return"reverse-subtract";if(t===Cc.MIN)return"min";if(t===Cc.MAX)return"max";throw new Error("whoops")}function z0(t){return{operation:lb(t.blendMode),srcFactor:k0(t.blendSrcFactor),dstFactor:k0(t.blendDstFactor)}}function V0(t){return t.blendMode===Cc.ADD&&t.blendSrcFactor===Ms.ONE&&t.blendDstFactor===Ms.ZERO}function cb(t){if(!(V0(t.rgbBlendState)&&V0(t.alphaBlendState)))return{color:z0(t.rgbBlendState),alpha:z0(t.alphaBlendState)}}function fb(t,y){return{format:wm(y),blend:cb(t),writeMask:t.channelWriteMask}}function hb(t,y){return y.attachmentsState.map(function(l,m){return fb(l,t[m])})}function Bg(t){if(t===vs.NEVER)return"never";if(t===vs.LESS)return"less";if(t===vs.EQUAL)return"equal";if(t===vs.LEQUAL)return"less-equal";if(t===vs.GREATER)return"greater";if(t===vs.NOTEQUAL)return"not-equal";if(t===vs.GEQUAL)return"greater-equal";if(t===vs.ALWAYS)return"always";throw new Error("whoops")}function Yv(t){if(t===Ul.KEEP)return"keep";if(t===Ul.REPLACE)return"replace";if(t===Ul.ZERO)return"zero";if(t===Ul.DECREMENT_CLAMP)return"decrement-clamp";if(t===Ul.DECREMENT_WRAP)return"decrement-wrap";if(t===Ul.INCREMENT_CLAMP)return"increment-clamp";if(t===Ul.INCREMENT_WRAP)return"increment-wrap";if(t===Ul.INVERT)return"invert";throw new Error("whoops")}function db(t,y){if(!ff(t))return{format:wm(t),depthWriteEnabled:!!y.depthWrite,depthCompare:Bg(y.depthCompare),depthBias:y.polygonOffset?y.polygonOffsetUnits:0,depthBiasSlopeScale:y.polygonOffset?y.polygonOffsetFactor:0,stencilFront:{compare:Bg(y.stencilFront.compare),passOp:Yv(y.stencilFront.passOp),failOp:Yv(y.stencilFront.failOp),depthFailOp:Yv(y.stencilFront.depthFailOp)},stencilBack:{compare:Bg(y.stencilBack.compare),passOp:Yv(y.stencilBack.passOp),failOp:Yv(y.stencilBack.failOp),depthFailOp:Yv(y.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function vb(t){if(t!==null){if(t===Mn.U16_R)return"uint16";if(t===Mn.U32_R)return"uint32";throw new Error("whoops")}}function pb(t){if(t===qd.VERTEX)return"vertex";if(t===qd.INSTANCE)return"instance";throw new Error("whoops")}function gb(t){if(t===Mn.U8_R)return"uint8x2";if(t===Mn.U8_RG)return"uint8x2";if(t===Mn.U8_RGB)return"uint8x4";if(t===Mn.U8_RGBA)return"uint8x4";if(t===Mn.U8_RG_NORM)return"unorm8x2";if(t===Mn.U8_RGBA_NORM)return"unorm8x4";if(t===Mn.S8_RGB_NORM)return"snorm8x4";if(t===Mn.S8_RGBA_NORM)return"snorm8x4";if(t===Mn.U16_RG_NORM)return"unorm16x2";if(t===Mn.U16_RGBA_NORM)return"unorm16x4";if(t===Mn.S16_RG_NORM)return"snorm16x2";if(t===Mn.S16_RGBA_NORM)return"snorm16x4";if(t===Mn.S16_RG)return"uint16x2";if(t===Mn.F16_RG)return"float16x2";if(t===Mn.F16_RGBA)return"float16x4";if(t===Mn.F32_R)return"float32";if(t===Mn.F32_RG)return"float32x2";if(t===Mn.F32_RGB)return"float32x3";if(t===Mn.F32_RGBA)return"float32x4";throw"whoops"}function mb(t){var y=Sh(t);switch(y){case Pi.BC1:case Pi.BC2:case Pi.BC3:case Pi.BC4_SNORM:case Pi.BC4_UNORM:case Pi.BC5_SNORM:case Pi.BC5_UNORM:return!0;default:return!1}}function yb(t){var y=Sh(t);switch(y){case Pi.BC1:case Pi.BC2:case Pi.BC3:case Pi.BC4_SNORM:case Pi.BC4_UNORM:case Pi.BC5_SNORM:case Pi.BC5_UNORM:return 4;default:return 1}}function W0(t,y,l,m){switch(l===void 0&&(l=!1),t){case Mn.S8_R:case Mn.S8_R_NORM:case Mn.S8_RG_NORM:case Mn.S8_RGB_NORM:case Mn.S8_RGBA_NORM:{var a=y instanceof ArrayBuffer?new Int8Array(y):new Int8Array(y);return m&&a.set(new Int8Array(m)),a}case Mn.U8_R:case Mn.U8_R_NORM:case Mn.U8_RG:case Mn.U8_RG_NORM:case Mn.U8_RGB:case Mn.U8_RGB_NORM:case Mn.U8_RGB_SRGB:case Mn.U8_RGBA:case Mn.U8_RGBA_NORM:case Mn.U8_RGBA_SRGB:{var T=y instanceof ArrayBuffer?new Uint8Array(y):new Uint8Array(y);return m&&T.set(new Uint8Array(m)),T}case Mn.S16_R:case Mn.S16_RG:case Mn.S16_RG_NORM:case Mn.S16_RGB_NORM:case Mn.S16_RGBA:case Mn.S16_RGBA_NORM:{var R=y instanceof ArrayBuffer?new Int16Array(y):new Int16Array(l?y/2:y);return m&&R.set(new Int16Array(m)),R}case Mn.U16_R:case Mn.U16_RGB:case Mn.U16_RGBA_5551:case Mn.U16_RGBA_NORM:case Mn.U16_RG_NORM:case Mn.U16_R_NORM:{var U=y instanceof ArrayBuffer?new Uint16Array(y):new Uint16Array(l?y/2:y);return m&&U.set(new Uint16Array(m)),U}case Mn.S32_R:{var Y=y instanceof ArrayBuffer?new Int32Array(y):new Int32Array(l?y/4:y);return m&&Y.set(new Int32Array(m)),Y}case Mn.U32_R:case Mn.U32_RG:{var oe=y instanceof ArrayBuffer?new Uint32Array(y):new Uint32Array(l?y/4:y);return m&&oe.set(new Uint32Array(m)),oe}case Mn.F32_R:case Mn.F32_RG:case Mn.F32_RGB:case Mn.F32_RGBA:{var me=y instanceof ArrayBuffer?new Float32Array(y):new Float32Array(l?y/4:y);return m&&me.set(new Float32Array(m)),me}}var Ce=y instanceof ArrayBuffer?new Uint8Array(y):new Uint8Array(y);return m&&Ce.set(new Uint8Array(m)),Ce}function _b(t){var y=(t&32768)>>15,l=(t&31744)>>10,m=t&1023;return l===0?(y?-1:1)*Math.pow(2,-14)*(m/Math.pow(2,10)):l==31?m?NaN:(y?-1:1)*Infinity:(y?-1:1)*Math.pow(2,l-15)*(1+m/Math.pow(2,10))}function H0(t){switch(t){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var lh=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=t.call(this)||this;return T.id=m,T.device=a,T}return y.prototype.destroy=function(){},y}(c0.a),bb=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R,U,Y=t.call(this,{id:m,device:a})||this;Y.type=ou.Bindings;var oe=T.pipeline;es(!!oe);var me=T.uniformBufferBindings,Ce=T.storageBufferBindings,Ve=T.samplerBindings,ut=T.storageTextureBindings;Y.numUniformBuffers=(me==null?void 0:me.length)||0;var Ft=[[],[],[],[]],Nt=0;if(me&&me.length)for(var vr=0;vr<me.length;vr++){var _r=T.uniformBufferBindings[vr],Sr=_r.binding,cn=_r.size,Bn=_r.offset,Kn=_r.buffer,wn={buffer:Xv(Kn),offset:Bn!=null?Bn:0,size:cn};Ft[0].push({binding:Sr!=null?Sr:Nt++,resource:wn})}if(Ve&&Ve.length){Nt=0;for(var vr=0;vr<Ve.length;vr++){var vn=ml(ml({},Ve[vr]),E0),Sr=T.samplerBindings[vr],ti=Sr.texture!==null?Sr.texture:Y.device.getFallbackTexture(vn);vn.dimension=ti.dimension,vn.formatKind=p0(ti.format);var Mi=ti.gpuTextureView;if(Ft[1].push({binding:(R=Sr.textureBinding)!==null&&R!==void 0?R:Nt++,resource:Mi}),Sr.samplerBinding!==-1){var Ki=Sr.sampler!==null?Sr.sampler:Y.device.getFallbackSampler(vn),Ii=rb(Ki);Ft[1].push({binding:(U=Sr.samplerBinding)!==null&&U!==void 0?U:Nt++,resource:Ii})}}}if(Ce&&Ce.length){Nt=0;for(var vr=0;vr<Ce.length;vr++){var xa=T.storageBufferBindings[vr],Sr=xa.binding,cn=xa.size,Bn=xa.offset,Kn=xa.buffer,wn={buffer:Xv(Kn),offset:Bn!=null?Bn:0,size:cn};Ft[2].push({binding:Sr!=null?Sr:Nt++,resource:wn})}}if(ut&&ut.length){Nt=0;for(var vr=0;vr<ut.length;vr++){var La=T.storageTextureBindings[vr],Sr=La.binding,ti=La.texture,Mi=ti.gpuTextureView;Ft[3].push({binding:Sr!=null?Sr:Nt++,resource:Mi})}}var Cs=Ft.findLastIndex(function(wu){return!!wu.length});return Y.gpuBindGroup=Ft.map(function(wu,ju){return ju<=Cs&&Y.device.device.createBindGroup({layout:oe.getBindGroupLayout(ju),entries:wu})}),Y}return y}(lh),xb=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.Buffer;var U=T.usage,Y=T.viewOrSize,oe=!!(U&Zu.MAP_READ);R.usage=eb(U),oe&&(R.usage=Zu.MAP_READ|Zu.COPY_DST);var me=!yd(Y);if(R.view=yd(Y)?null:Y,R.size=yd(Y)?Og(Y,4):Og(Y.byteLength,4),yd(Y))R.gpuBuffer=R.device.device.createBuffer({usage:R.usage,size:R.size,mappedAtCreation:oe?me:!1});else{R.gpuBuffer=R.device.device.createBuffer({usage:R.usage,size:R.size,mappedAtCreation:!0});var Ce=Y&&Y.constructor||Float32Array;new Ce(R.gpuBuffer.getMappedRange()).set(Y),R.gpuBuffer.unmap()}return R}return y.prototype.setSubData=function(l,m,a,T){a===void 0&&(a=0),T===void 0&&(T=0);var R=this.gpuBuffer;T=T||m.byteLength,T=Math.min(T,this.size-l);var U=m.byteOffset+a,Y=U+T,oe=T+3&~3;if(oe!==T){var me=new Uint8Array(m.buffer.slice(U,Y));m=new Uint8Array(oe),m.set(me),a=0,U=0,Y=oe,T=oe}for(var Ce=1024*1024*15,Ve=0;Y-(U+Ve)>Ce;)this.device.device.queue.writeBuffer(R,l+Ve,m.buffer,U+Ve,Ce),Ve+=Ce;this.device.device.queue.writeBuffer(R,l+Ve,m.buffer,U+Ve,T-Ve)},y.prototype.destroy=function(){t.prototype.destroy.call(this),this.gpuBuffer.destroy()},y}(lh),G0=function(){function t(){this.gpuComputePassEncoder=null}return t.prototype.dispatchWorkgroups=function(y,l,m){this.gpuComputePassEncoder.dispatchWorkgroups(y,l,m)},t.prototype.dispatchWorkgroupsIndirect=function(y,l){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(y.gpuBuffer,l)},t.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},t.prototype.beginComputePass=function(y){es(this.gpuComputePassEncoder===null),this.frameCommandEncoder=y,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},t.prototype.setPipeline=function(y){var l=y,m=ev(l.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(m)},t.prototype.setBindings=function(y){var l=this,m=y;m.gpuBindGroup.forEach(function(a,T){a&&l.gpuComputePassEncoder.setBindGroup(T,m.gpuBindGroup[T])})},t.prototype.pushDebugGroup=function(y){this.gpuComputePassEncoder.pushDebugGroup(y)},t.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},t.prototype.insertDebugMarker=function(y){this.gpuComputePassEncoder.insertDebugMarker(y)},t}(),Eb=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.ComputePipeline,R.gpuComputePipeline=null,R.descriptor=T;var U=T.program,Y=U.computeStage;if(Y===null)return R;var oe={layout:"auto",compute:ml({},Y)};return R.gpuComputePipeline=R.device.device.createComputePipeline(oe),R.name!==void 0&&(R.gpuComputePipeline.label=R.name),R}return y.prototype.getBindGroupLayout=function(l){return this.gpuComputePipeline.getBindGroupLayout(l)},y}(lh),Sb=function(t){gl(y,t);function y(l){var m,a,T,R,U=l.id,Y=l.device,oe=l.descriptor,me=t.call(this,{id:U,device:Y})||this;me.type=ou.InputLayout;var Ce=[];try{for(var Ve=Eh(oe.vertexBufferDescriptors),ut=Ve.next();!ut.done;ut=Ve.next()){var Ft=ut.value,Nt=Ft.arrayStride,vr=Ft.stepMode,_r=Ft.attributes;Ce.push({arrayStride:Nt,stepMode:pb(vr),attributes:[]});try{for(var Sr=(T=void 0,Eh(_r)),cn=Sr.next();!cn.done;cn=Sr.next()){var Bn=cn.value,Kn=Bn.shaderLocation,wn=Bn.format,vn=Bn.offset;Ce[Ce.length-1].attributes.push({shaderLocation:Kn,format:gb(wn),offset:vn})}}catch(ti){T={error:ti}}finally{try{cn&&!cn.done&&(R=Sr.return)&&R.call(Sr)}finally{if(T)throw T.error}}}}catch(ti){m={error:ti}}finally{try{ut&&!ut.done&&(a=Ve.return)&&a.call(Ve)}finally{if(m)throw m.error}}return me.indexFormat=vb(oe.indexBufferFormat),me.buffers=Ce,me}return y}(lh),X0=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;return R.type=ou.Program,R.vertexStage=null,R.fragmentStage=null,R.computeStage=null,R.descriptor=T,T.vertex&&(R.vertexStage=R.createShaderStage(T.vertex,"vertex")),T.fragment&&(R.fragmentStage=R.createShaderStage(T.fragment,"fragment")),T.compute&&(R.computeStage=R.createShaderStage(T.compute,"compute")),R}return y.prototype.setUniformsLegacy=function(l){},y.prototype.createShaderStage=function(l,m){var a,T,R=l.glsl,U=l.wgsl,Y=l.entryPoint,oe=l.postprocess,me=!1,Ce=U;if(!Ce)try{Ce=this.device.glsl_compile(R,m,me)}catch(_r){throw console.error(_r,R),new Error("whoops")}var Ve=function(Sr){if(!Ce.includes(Sr))return"continue";Ce=Ce.replace("var T_".concat(Sr,": texture_2d<f32>;"),"var T_".concat(Sr,": texture_depth_2d;")),Ce=Ce.replace(new RegExp("textureSample\\(T_".concat(Sr,"(.*)\\);$"),"gm"),function(cn,Bn){return"vec4<f32>(textureSample(T_".concat(Sr).concat(Bn,"), 0.0, 0.0, 0.0);")})};try{for(var ut=Eh(["u_TextureFramebufferDepth"]),Ft=ut.next();!Ft.done;Ft=ut.next()){var Nt=Ft.value;Ve(Nt)}}catch(_r){a={error:_r}}finally{try{Ft&&!Ft.done&&(T=ut.return)&&T.call(ut)}finally{if(a)throw a.error}}oe&&(Ce=oe(Ce));var vr=this.device.device.createShaderModule({code:Ce});return{module:vr,entryPoint:Y||"main"}},y}(lh),Ab=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;R.type=ou.QueryPool;var U=T.elemCount,Y=T.type;return R.querySet=R.device.device.createQuerySet({type:ib(Y),count:U}),R.resolveBuffer=R.device.device.createBuffer({size:U*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),R.cpuBuffer=R.device.device.createBuffer({size:U*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),R.results=null,R}return y.prototype.queryResultOcclusion=function(l){return this.results===null?null:this.results[l]!==BigInt(0)},y.prototype.destroy=function(){t.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},y}(lh),Ob=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=t.call(this,{id:m,device:a})||this;return T.type=ou.Readback,T}return y.prototype.readTexture=function(l,m,a,T,R,U,Y,oe){return Y===void 0&&(Y=0),Jd(this,void 0,void 0,function(){var me,Ce,Ve,ut,Ft,Nt,vr,_r;return Qd(this,function(Sr){return me=l,Ce=0,Ve=H0(me.gpuTextureformat),ut=Math.ceil(T/Ve.width)*Ve.length,Ft=Math.ceil(ut/256)*256,Nt=Ft*R,vr=this.device.createBuffer({usage:Zu.STORAGE|Zu.MAP_READ|Zu.COPY_DST,hint:sh.STATIC,viewOrSize:Nt}),_r=this.device.device.createCommandEncoder(),_r.copyTextureToBuffer({texture:me.gpuTexture,mipLevel:0,origin:{x:m,y:a,z:Math.max(Ce,0)}},{buffer:vr.gpuBuffer,offset:0,bytesPerRow:Ft},{width:T,height:R,depthOrArrayLayers:1}),this.device.device.queue.submit([_r.finish()]),[2,this.readBuffer(vr,0,U.byteLength===Nt?U:null,Y,Nt,me.format,!0,!1,ut,Ft,R)]})})},y.prototype.readTextureSync=function(l,m,a,T,R,U,Y,oe){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},y.prototype.readBuffer=function(l,m,a,T,R,U,Y,oe,me,Ce,Ve){var ut=this;m===void 0&&(m=0),a===void 0&&(a=null),R===void 0&&(R=0),U===void 0&&(U=Mn.U8_RGB),Y===void 0&&(Y=!1),me===void 0&&(me=0),Ce===void 0&&(Ce=0),Ve===void 0&&(Ve=0);var Ft=l,Nt=R||Ft.size,vr=a||Ft.view,_r=vr&&vr.constructor&&vr.constructor.BYTES_PER_ELEMENT||v0(U),Sr=Ft;if(!(Ft.usage&Zu.MAP_READ&&Ft.usage&Zu.COPY_DST)){var cn=this.device.device.createCommandEncoder();Sr=this.device.createBuffer({usage:Zu.STORAGE|Zu.MAP_READ|Zu.COPY_DST,hint:sh.STATIC,viewOrSize:Nt}),cn.copyBufferToBuffer(Ft.gpuBuffer,m,Sr.gpuBuffer,0,Nt),this.device.device.queue.submit([cn.finish()])}return new Promise(function(Bn,Kn){Sr.gpuBuffer.mapAsync(Pm.READ,m,Nt).then(function(){var wn=Sr.gpuBuffer.getMappedRange(m,Nt),vn=vr;if(Y)vn===null?vn=W0(U,Nt,!0,wn):vn=W0(U,vn.buffer,void 0,wn);else if(vn===null)switch(_r){case 1:vn=new Uint8Array(Nt),vn.set(new Uint8Array(wn));break;case 2:vn=ut.getHalfFloatAsFloatRGBAArrayBuffer(Nt/2,wn);break;case 4:vn=new Float32Array(Nt/4),vn.set(new Float32Array(wn));break}else switch(_r){case 1:vn=new Uint8Array(vn.buffer),vn.set(new Uint8Array(wn));break;case 2:vn=ut.getHalfFloatAsFloatRGBAArrayBuffer(Nt/2,wn,vr);break;case 4:var ti=vr&&vr.constructor||Float32Array;vn=new ti(vn.buffer),vn.set(new ti(wn));break}if(me!==Ce){_r===1&&!Y&&(me*=2,Ce*=2);for(var Mi=new Uint8Array(vn.buffer),Ki=me,Ii=0,xa=1;xa<Ve;++xa){Ii=xa*Ce;for(var La=0;La<me;++La)Mi[Ki++]=Mi[Ii++]}_r!==0&&!Y?vn=new Float32Array(Mi.buffer,0,Ki/4):vn=new Uint8Array(Mi.buffer,0,Ki)}Sr.gpuBuffer.unmap(),Bn(vn)},function(wn){return Kn(wn)})})},y.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(l,m,a){a||(a=new Float32Array(l));for(var T=new Uint16Array(m);l--;)a[l]=_b(T[l]);return a},y}(lh),Y0=function(){function t(y){this.device=y,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return t.prototype.getEncoder=function(){var y;return((y=this.renderBundle)===null||y===void 0?void 0:y.renderBundleEncoder)||this.gpuRenderPassEncoder},t.prototype.getTextureView=function(y,l){return es(l<y.mipLevelCount),y.mipLevelCount===1?y.gpuTextureView:y.gpuTexture.createView({baseMipLevel:l,mipLevelCount:1})},t.prototype.setRenderPassDescriptor=function(y){var l,m,a,T,R,U;this.descriptor=y,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var Y=y.colorAttachment.length;this.gfxColorAttachment.length=Y,this.gfxColorResolveTo.length=Y;for(var oe=0;oe<y.colorAttachment.length;oe++){var me=y.colorAttachment[oe],Ce=y.colorResolveTo[oe];if(me===null&&Ce!==null&&(me=Ce,Ce=null),this.gfxColorAttachment[oe]=me,this.gfxColorResolveTo[oe]=Ce,this.gfxColorAttachmentLevel[oe]=((l=y.colorAttachmentLevel)===null||l===void 0?void 0:l[oe])||0,this.gfxColorResolveToLevel[oe]=((m=y.colorResolveToLevel)===null||m===void 0?void 0:m[oe])||0,me!==null){this.gpuColorAttachments[oe]===void 0&&(this.gpuColorAttachments[oe]={});var Ve=this.gpuColorAttachments[oe];Ve.view=this.getTextureView(me,((a=this.gfxColorAttachmentLevel)===null||a===void 0?void 0:a[oe])||0);var ut=(R=(T=y.colorClearColor)===null||T===void 0?void 0:T[oe])!==null&&R!==void 0?R:"load";ut==="load"?Ve.loadOp="load":(Ve.loadOp="clear",Ve.clearValue=ut),Ve.storeOp=((U=y.colorStore)===null||U===void 0?void 0:U[oe])?"store":"discard",Ve.resolveTarget=void 0,Ce!==null&&(me.sampleCount>1?Ve.resolveTarget=this.getTextureView(Ce,this.gfxColorResolveToLevel[oe]):Ve.storeOp="store")}else{this.gpuColorAttachments.length=oe,this.gfxColorAttachment.length=oe,this.gfxColorResolveTo.length=oe;break}}if(this.gfxDepthStencilAttachment=y.depthStencilAttachment,this.gfxDepthStencilResolveTo=y.depthStencilResolveTo,y.depthStencilAttachment){var Ft=y.depthStencilAttachment,Ve=this.gpuDepthStencilAttachment;Ve.view=Ft.gpuTextureView;var Nt=!!(Uv(Ft.format)&va.Depth);Nt?(y.depthClearValue==="load"?Ve.depthLoadOp="load":(Ve.depthLoadOp="clear",Ve.depthClearValue=y.depthClearValue),y.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Ve.depthStoreOp="store":Ve.depthStoreOp="discard"):(Ve.depthLoadOp=void 0,Ve.depthStoreOp=void 0);var vr=!!(Uv(Ft.format)&va.Stencil);vr?(y.stencilClearValue==="load"?Ve.stencilLoadOp="load":(Ve.stencilLoadOp="clear",Ve.stencilClearValue=y.stencilClearValue),y.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Ve.stencilStoreOp="store":Ve.stencilStoreOp="discard"):(Ve.stencilLoadOp=void 0,Ve.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=ff(y.occlusionQueryPool)?void 0:nb(y.occlusionQueryPool)},t.prototype.beginRenderPass=function(y,l){es(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(l),this.frameCommandEncoder=y,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},t.prototype.flipY=function(y,l){var m=this.device.swapChainHeight;return m-y-l},t.prototype.setViewport=function(y,l,m,a,T,R){T===void 0&&(T=0),R===void 0&&(R=1),this.gpuRenderPassEncoder.setViewport(y,this.flipY(l,a),m,a,T,R)},t.prototype.setScissorRect=function(y,l,m,a){this.gpuRenderPassEncoder.setScissorRect(y,this.flipY(l,a),m,a)},t.prototype.setPipeline=function(y){var l=y,m=ev(l.gpuRenderPipeline);this.getEncoder().setPipeline(m)},t.prototype.setVertexInput=function(y,l,m){if(y!==null){var a=this.getEncoder(),T=y;m!==null&&a.setIndexBuffer(Xv(m.buffer),ev(T.indexFormat),m.offset);for(var R=0;R<l.length;R++){var U=l[R];U!==null&&a.setVertexBuffer(R,Xv(U.buffer),U.offset)}}},t.prototype.setBindings=function(y){var l=y,m=this.getEncoder();l.gpuBindGroup.forEach(function(a,T){a&&m.setBindGroup(T,l.gpuBindGroup[T])})},t.prototype.setStencilReference=function(y){this.gpuRenderPassEncoder.setStencilReference(y)},t.prototype.draw=function(y,l,m,a){this.getEncoder().draw(y,l,m,a)},t.prototype.drawIndexed=function(y,l,m,a,T){this.getEncoder().drawIndexed(y,l,m,a,T)},t.prototype.drawIndirect=function(y,l){this.getEncoder().drawIndirect(Xv(y),l)},t.prototype.drawIndexedIndirect=function(y,l){this.getEncoder().drawIndexedIndirect(Xv(y),l)},t.prototype.beginOcclusionQuery=function(y){this.gpuRenderPassEncoder.beginOcclusionQuery(y)},t.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},t.prototype.pushDebugGroup=function(y){this.gpuRenderPassEncoder.pushDebugGroup(y)},t.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},t.prototype.insertDebugMarker=function(y){this.gpuRenderPassEncoder.insertDebugMarker(y)},t.prototype.beginBundle=function(y){this.renderBundle=y},t.prototype.endBundle=function(){this.renderBundle.finish()},t.prototype.executeBundles=function(y){this.gpuRenderPassEncoder.executeBundles(y.map(function(l){return l.renderBundle}))},t.prototype.finish=function(){var y;(y=this.gpuRenderPassEncoder)===null||y===void 0||y.end(),this.gpuRenderPassEncoder=null;for(var l=0;l<this.gfxColorAttachment.length;l++){var m=this.gfxColorAttachment[l],a=this.gfxColorResolveTo[l];m!==null&&a!==null&&m.sampleCount===1&&this.copyAttachment(a,this.gfxColorAttachmentLevel[l],m,this.gfxColorResolveToLevel[l])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},t.prototype.copyAttachment=function(y,l,m,a){es(m.sampleCount===1);var T={texture:m.gpuTexture,mipLevel:a},R={texture:y.gpuTexture,mipLevel:l};es(m.width>>>a==y.width>>>l),es(m.height>>>a==y.height>>>l),es(!!(m.usage&Ac.COPY_SRC)),es(!!(y.usage&Ac.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(T,R,[y.width,y.height,1])},t}(),Tb=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=t.call(this,{id:m,device:a})||this;return R.type=ou.RenderPipeline,R.isCreatingAsync=!1,R.gpuRenderPipeline=null,R.descriptor=T,R.device.createRenderPipelineInternal(R,!1),R}return y.prototype.getBindGroupLayout=function(l){return this.gpuRenderPipeline.getBindGroupLayout(l)},y}(lh),Mb=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R,U,Y=t.call(this,{id:m,device:a})||this;Y.type=ou.Sampler;var oe=T.lodMinClamp,me=T.mipmapFilter===Sc.NO_MIP?T.lodMinClamp:T.lodMaxClamp,Ce=(R=T.maxAnisotropy)!==null&&R!==void 0?R:1;return Ce>1&&es(T.minFilter===Jl.BILINEAR&&T.magFilter===Jl.BILINEAR&&T.mipmapFilter===Sc.LINEAR),Y.gpuSampler=Y.device.device.createSampler({addressModeU:Rm(T.addressModeU),addressModeV:Rm(T.addressModeV),addressModeW:Rm((U=T.addressModeW)!==null&&U!==void 0?U:T.addressModeU),lodMinClamp:oe,lodMaxClamp:me,minFilter:U0(T.minFilter),magFilter:U0(T.magFilter),mipmapFilter:tb(T.mipmapFilter),compare:T.compareFunction!==void 0?Bg(T.compareFunction):void 0,maxAnisotropy:Ce}),Y}return y}(lh),Fg=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=l.descriptor,R=l.skipCreate,U=l.sampleCount,Y=t.call(this,{id:m,device:a})||this;Y.type=ou.Texture,Y.flipY=!1;var oe=T.format,me=T.dimension,Ce=T.width,Ve=T.height,ut=T.depthOrArrayLayers,Ft=T.mipLevelCount,Nt=T.usage,vr=T.pixelStore;return Y.flipY=!!(vr==null?void 0:vr.unpackFlipY),Y.device.createTextureShared({format:oe,dimension:me!=null?me:Ss.TEXTURE_2D,width:Ce,height:Ve,depthOrArrayLayers:ut!=null?ut:1,mipLevelCount:Ft!=null?Ft:1,usage:Nt,sampleCount:U!=null?U:1},Y,R),Y}return y.prototype.textureFromImageBitmapOrCanvas=function(l,m,a){for(var T=m[0].width,R=m[0].height,U={size:{width:T,height:R,depthOrArrayLayers:a},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},Y=l.createTexture(U),oe=0;oe<m.length;oe++)l.queue.copyExternalImageToTexture({source:m[oe],flipY:this.flipY},{texture:Y,origin:[0,0,oe]},[T,R]);return[Y,T,R]},y.prototype.isImageBitmapOrCanvases=function(l){var m=l[0];return m instanceof ImageBitmap||m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas},y.prototype.isVideo=function(l){var m=l[0];return m instanceof HTMLVideoElement},y.prototype.setImageData=function(l,m){var a,T=this,R=this.device.device,U,Y,oe;if(this.isImageBitmapOrCanvases(l))a=hf(this.textureFromImageBitmapOrCanvas(R,l,this.depthOrArrayLayers),3),U=a[0],Y=a[1],oe=a[2];else if(this.isVideo(l))U=R.importExternalTexture({source:l[0]});else{var me=H0(this.gpuTextureformat),Ce=Math.ceil(this.width/me.width)*me.length;l.forEach(function(Ve){R.queue.writeTexture({texture:T.gpuTexture},Ve,{bytesPerRow:Ce},{width:T.width,height:T.height})})}this.width=Y,this.height=oe,U&&(this.gpuTexture=U),this.gpuTextureView=this.gpuTexture.createView({dimension:q_(this.dimension)})},y.prototype.destroy=function(){t.prototype.destroy.call(this),this.gpuTexture.destroy()},y}(lh),Cb=function(t){gl(y,t);function y(l){var m=l.id,a=l.device,T=t.call(this,{id:m,device:a})||this;return T.type=ou.RenderBundle,T.renderBundleEncoder=T.device.device.createRenderBundleEncoder({colorFormats:[T.device.swapChainFormat]}),T}return y.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},y}(lh),Pb=function(){function t(y,l,m,a,T,R){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Ac.RENDER_ATTACHMENT|Ac.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=uh.UPPER_LEFT,this.clipSpaceNearZ=Nv.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=l,this.canvas=m,this.canvasContext=a,this.glsl_compile=T,this.WGSLComposer=R,this.fallbackTexture2D=this.createFallbackTexture(Ss.TEXTURE_2D,kl.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Ss.TEXTURE_2D,kl.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Ss.TEXTURE_2D_ARRAY,kl.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Ss.TEXTURE_3D,kl.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Ss.TEXTURE_CUBE_MAP,kl.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:tf.REPEAT,addressModeV:tf.REPEAT,minFilter:Jl.POINT,magFilter:Jl.POINT,mipmapFilter:Sc.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:tf.REPEAT,addressModeV:tf.REPEAT,minFilter:Jl.POINT,magFilter:Jl.POINT,mipmapFilter:Sc.NEAREST,compareFunction:vs.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(U){console.error(U.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return t.prototype.destroy=function(){},t.prototype.configureSwapChain=function(y,l){this.swapChainWidth===y&&this.swapChainHeight===l||(this.swapChainWidth=y,this.swapChainHeight=l)},t.prototype.getOnscreenTexture=function(){var y=this.canvasContext.getCurrentTexture(),l=y.createView(),m=new Fg({id:0,device:this,descriptor:{format:Mn.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Ss.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return m.depthOrArrayLayers=1,m.sampleCount=1,m.gpuTexture=y,m.gpuTextureView=l,m.name="Onscreen",this.setResourceName(m,"Onscreen Texture"),m},t.prototype.getDevice=function(){return this},t.prototype.getCanvas=function(){return this.canvas},t.prototype.beginFrame=function(){es(this.frameCommandEncoderPool.length===0)},t.prototype.endFrame=function(){es(this.frameCommandEncoderPool.every(function(y){return y!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(y){return y.finish()})),this.frameCommandEncoderPool=[]},t.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},t.prototype.createBuffer=function(y){return new xb({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createTexture=function(y){return new Fg({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createSampler=function(y){return new Mb({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createRenderTarget=function(y){var l=new Fg({id:this.getNextUniqueId(),device:this,descriptor:ml(ml({},y),{dimension:Ss.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Nc.RENDER_TARGET}),sampleCount:y.sampleCount});return l.depthOrArrayLayers=1,l.type=ou.RenderTarget,l},t.prototype.createRenderTargetFromTexture=function(y){var l=y,m=l.format,a=l.width,T=l.height,R=l.depthOrArrayLayers,U=l.sampleCount,Y=l.mipLevelCount,oe=l.gpuTexture,me=l.gpuTextureView,Ce=l.usage;es(!!(Ce&Ac.RENDER_ATTACHMENT));var Ve=new Fg({id:this.getNextUniqueId(),device:this,descriptor:{format:m,width:a,height:T,depthOrArrayLayers:R,dimension:Ss.TEXTURE_2D,mipLevelCount:Y,usage:Ce},skipCreate:!0});return Ve.depthOrArrayLayers=R,Ve.sampleCount=U,Ve.gpuTexture=oe,Ve.gpuTextureView=me,Ve},t.prototype.createProgram=function(y){var l,m;return((l=y.vertex)===null||l===void 0?void 0:l.glsl)&&(y.vertex.glsl=Ed(this.queryVendorInfo(),"vert",y.vertex.glsl)),((m=y.fragment)===null||m===void 0?void 0:m.glsl)&&(y.fragment.glsl=Ed(this.queryVendorInfo(),"frag",y.fragment.glsl)),new X0({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createProgramSimple=function(y){return new X0({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createTextureShared=function(y,l,m){var a={width:y.width,height:y.height,depthOrArrayLayers:y.depthOrArrayLayers},T=y.mipLevelCount,R=wm(y.format),U=Q_(y.dimension),Y=J_(y.usage);if(l.gpuTextureformat=R,l.dimension=y.dimension,l.format=y.format,l.width=y.width,l.height=y.height,l.depthOrArrayLayers=y.depthOrArrayLayers,l.mipLevelCount=T,l.usage=Y,l.sampleCount=y.sampleCount,!m){var oe=this.device.createTexture({size:a,mipLevelCount:T,format:R,dimension:U,sampleCount:y.sampleCount,usage:Y}),me=oe.createView();l.gpuTexture=oe,l.gpuTextureView=me}},t.prototype.getFallbackSampler=function(y){var l=y.formatKind;return l===kl.Depth&&y.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},t.prototype.getFallbackTexture=function(y){var l=y.dimension,m=y.formatKind;if(l===Ss.TEXTURE_2D)return m===kl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(l===Ss.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(l===Ss.TEXTURE_3D)return this.fallbackTexture3D;if(l===Ss.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},t.prototype.createFallbackTexture=function(y,l){var m=y===Ss.TEXTURE_CUBE_MAP?6:1,a=l===kl.Float?Mn.U8_RGBA_NORM:Mn.D24;return this.createTexture({dimension:y,format:a,usage:Nc.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1})},t.prototype.createBindings=function(y){return new bb({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createInputLayout=function(y){return new Sb({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createComputePipeline=function(y){return new Eb({id:this.getNextUniqueId(),device:this,descriptor:y})},t.prototype.createRenderPipeline=function(y){return new Tb({id:this.getNextUniqueId(),device:this,descriptor:ml({},y)})},t.prototype.createQueryPool=function(y,l){return new Ab({id:this.getNextUniqueId(),device:this,descriptor:{type:y,elemCount:l}})},t.prototype.createRenderPipelineInternal=function(y,l){var m;if(y.gpuRenderPipeline===null){var a=y.descriptor,T=a.program,R=T.vertexStage,U=T.fragmentStage;if(!(R===null||U===null)){var Y=a.megaStateDescriptor||{},oe=Y.stencilBack,me=Y.stencilFront,Ce=Rf(Y,["stencilBack","stencilFront"]),Ve=zv(tv);a.megaStateDescriptor=ml(ml(ml({},Ve),{stencilBack:ml(ml({},Ve.stencilBack),oe),stencilFront:ml(ml({},Ve.stencilFront),me)}),Ce);var ut=a.megaStateDescriptor.attachmentsState[0];a.colorAttachmentFormats.forEach(function(Bn,Kn){a.megaStateDescriptor.attachmentsState[Kn]||(a.megaStateDescriptor.attachmentsState[Kn]=b0(void 0,ut))});var Ft=ub((m=a.topology)!==null&&m!==void 0?m:hc.TRIANGLES,a.megaStateDescriptor),Nt=hb(a.colorAttachmentFormats,a.megaStateDescriptor),vr=db(a.depthStencilAttachmentFormat,a.megaStateDescriptor),_r=void 0;a.inputLayout!==null&&(_r=a.inputLayout.buffers);var Sr=a.sampleCount,cn={layout:"auto",vertex:ml(ml({},R),{buffers:_r}),primitive:Ft,depthStencil:vr,multisample:{count:Sr},fragment:ml(ml({},U),{targets:Nt})};y.gpuRenderPipeline=this.device.createRenderPipeline(cn)}}},t.prototype.createReadback=function(){return new Ob({id:this.getNextUniqueId(),device:this})},t.prototype.createRenderBundle=function(){return new Cb({id:this.getNextUniqueId(),device:this})},t.prototype.createRenderPass=function(y){var l=this.renderPassPool.pop();l===void 0&&(l=new Y0(this));var m=this.frameCommandEncoderPool.pop();return m===void 0&&(m=this.device.createCommandEncoder()),l.beginRenderPass(m,y),l},t.prototype.createComputePass=function(){var y=this.computePassPool.pop();y===void 0&&(y=new G0);var l=this.frameCommandEncoderPool.pop();return l===void 0&&(l=this.device.createCommandEncoder()),y.beginComputePass(l),y},t.prototype.submitPass=function(y){var l=y;l instanceof Y0?(this.frameCommandEncoderPool.push(l.frameCommandEncoder),l.finish(),this.renderPassPool.push(l)):l instanceof G0&&(this.frameCommandEncoderPool.push(l.frameCommandEncoder),l.finish(),this.computePassPool.push(l))},t.prototype.copySubTexture2D=function(y,l,m,a,T,R,U){var Y=this.device.createCommandEncoder(),oe=y,me=a,Ce={texture:me.gpuTexture,origin:[T,R,0],mipLevel:0,aspect:"all"},Ve={texture:oe.gpuTexture,origin:[l,m,0],mipLevel:0,aspect:"all"};es(!!(me.usage&Ac.COPY_SRC)),es(!!(oe.usage&Ac.COPY_DST)),Y.copyTextureToTexture(Ce,Ve,[me.width,me.height,U||1]),this.device.queue.submit([Y.finish()])},t.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},t.prototype.queryTextureFormatSupported=function(y,l,m){if(mb(y)){if(!this.featureTextureCompressionBC)return!1;var a=yb(y);return l%a!=0||m%a!=0?!1:this.featureTextureCompressionBC}switch(y){case Mn.U16_RGBA_NORM:return!1;case Mn.F32_RGBA:return!1}return!0},t.prototype.queryPlatformAvailable=function(){return!0},t.prototype.queryVendorInfo=function(){return this},t.prototype.queryRenderPass=function(y){var l=y;return l.descriptor},t.prototype.queryRenderTarget=function(y){var l=y;return l},t.prototype.setResourceName=function(y,l){if(y.name=l,y.type===ou.Buffer){var m=y;m.gpuBuffer.label=l}else if(y.type===ou.Texture){var m=y;m.gpuTexture.label=l,m.gpuTextureView.label=l}else if(y.type===ou.RenderTarget){var m=y;m.gpuTexture.label=l,m.gpuTextureView.label=l}else if(y.type===ou.Sampler){var m=y;m.gpuSampler.label=l}else if(y.type===ou.RenderPipeline){var m=y;m.gpuRenderPipeline!==null&&(m.gpuRenderPipeline.label=l)}},t.prototype.setResourceLeakCheck=function(y,l){},t.prototype.checkForLeaks=function(){},t.prototype.programPatched=function(y){},t.prototype.pipelineQueryReady=function(y){var l=y;return l.gpuRenderPipeline!==null},t.prototype.pipelineForceReady=function(y){var l=y;this.createRenderPipelineInternal(l,!1)},t}(),wb=function(){function t(y){this.pluginOptions=y}return t.prototype.createSwapChain=function(y){return Jd(this,void 0,void 0,function(){var l,m,a,T,R,U,Y,oe;return Qd(this,function(me){switch(me.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];l=null,me.label=1;case 1:return me.trys.push([1,3,,4]),m=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:m})];case 2:return l=me.sent(),[3,4];case 3:return a=me.sent(),console.log(a),[3,4];case 4:return l===null?[2,null]:(T=["depth32float-stencil8","texture-compression-bc","float32-filterable"],R=T.filter(function(Ce){return l.features.has(Ce)}),[4,l.requestDevice({requiredFeatures:R})]);case 5:if(U=me.sent(),U&&(Y=this.pluginOptions.onContextLost,U.lost.then(function(){Y&&Y()})),U===null)return[2,null];if(oe=y.getContext("webgpu"),!oe)return[2,null];me.label=6;case 6:return me.trys.push([6,8,,9]),[4,N0(this.pluginOptions.shaderCompilerPath)];case 7:return me.sent(),[3,9];case 8:return me.sent(),[3,9];case 9:return[2,new Pb(l,U,y,oe,Y_,F0&&new F0)]}})})},t}(),Rb=Object.defineProperty,Ib=Object.defineProperties,Lb=Object.getOwnPropertyDescriptors,$0=Object.getOwnPropertySymbols,Db=Object.prototype.hasOwnProperty,jb=Object.prototype.propertyIsEnumerable,Z0=function(y,l,m){return l in y?Rb(y,l,{enumerable:!0,configurable:!0,writable:!0,value:m}):y[l]=m},Lp=function(y,l){for(var m in l||(l={}))Db.call(l,m)&&Z0(y,m,l[m]);if($0){var a=Object(Re.a)($0(l)),T;try{for(a.s();!(T=a.n()).done;){var m=T.value;jb.call(l,m)&&Z0(y,m,l[m])}}catch(R){a.e(R)}finally{a.f()}}return y},Bb=function(y,l){return Ib(y,Lb(l))},Fb=n.N.isPlainObject,Nb=n.N.isTypedArray,Ub=function(){function t(y,l){Object(g.a)(this,t),this.destroyed=!1,this.uniforms={},this.reGl=y;var m=l.vs,a=l.fs,T=l.attributes,R=l.uniforms,U=l.primitive,Y=l.count,oe=l.elements,me=l.depth,Ce=l.cull,Ve=l.instances,ut={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:uh.LOWER_LEFT,clipSpaceNearZ:Nv.NEGATIVE_ONE,supportMRT:!1},Ft={};this.options=l,R&&(this.uniforms=this.extractUniforms(R),Object.keys(R).forEach(function(cn){Ft[cn]=y.prop(cn)}));var Nt={};Object.keys(T).forEach(function(cn){Nt[cn]=T[cn].get()});var vr=Object(S.u)(Ed(ut,"frag",a,null,!1)),_r=Object(S.u)(Ed(ut,"vert",m,null,!1)),Sr={attributes:Nt,frag:vr,uniforms:Ft,vert:_r,colorMask:y.prop("colorMask"),lineWidth:1,blend:{enable:y.prop("blend.enable"),func:y.prop("blend.func"),equation:y.prop("blend.equation"),color:y.prop("blend.color")},stencil:{enable:y.prop("stencil.enable"),mask:y.prop("stencil.mask"),func:y.prop("stencil.func"),opFront:y.prop("stencil.opFront"),opBack:y.prop("stencil.opBack")},primitive:yp[U===void 0?S.s.TRIANGLES:U]};Ve&&(Sr.instances=Ve),Y?Sr.count=Y:oe&&(Sr.elements=oe.get()),this.initDepthDrawParams({depth:me},Sr),this.initCullDrawParams({cull:Ce},Sr),this.drawCommand=y(Sr),this.drawParams=Sr}return Object(v.a)(t,[{key:"updateAttributesAndElements",value:function(l,m){var a={};Object.keys(l).forEach(function(T){a[T]=l[T].get()}),this.drawParams.attributes=a,this.drawParams.elements=m.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(l){var m={};Object.keys(l).forEach(function(a){m[a]=l[a].get()}),this.drawParams.attributes=m,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(l){this.uniforms=Lp(Lp({},this.uniforms),this.extractUniforms(l))}},{key:"draw",value:function(l,m){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var a=Lp(Lp({},this.uniforms),this.extractUniforms(l.uniforms||{})),T={};Object.keys(a).forEach(function(R){var U=typeof a[R];U==="boolean"||U==="number"||Array.isArray(a[R])||a[R].BYTES_PER_ELEMENT?T[R]=a[R]:T[R]=a[R].get()}),T.blend=m?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(l),T.stencil=this.getStencilDrawParams(l),T.colorMask=this.getColorMaskDrawParams(l,m),this.drawCommand(T)}}},{key:"destroy",value:function(){var l,m;(m=(l=this.drawParams)==null?void 0:l.elements)==null||m.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(a){a==null||a.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(l,m){var a=l.depth;a&&(m.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:vg[a.func||S.s.LESS],range:a.range||[0,1]})}},{key:"getBlendDrawParams",value:function(l){var m=l.blend,a=m||{},T=a.enable,R=a.func,U=a.equation,Y=a.color,oe=Y===void 0?[0,0,0,0]:Y;return{enable:!!T,func:{srcRGB:md[R&&R.srcRGB||S.s.SRC_ALPHA],srcAlpha:md[R&&R.srcAlpha||S.s.SRC_ALPHA],dstRGB:md[R&&R.dstRGB||S.s.ONE_MINUS_SRC_ALPHA],dstAlpha:md[R&&R.dstAlpha||S.s.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ep[U&&U.rgb||S.s.FUNC_ADD],alpha:Ep[U&&U.alpha||S.s.FUNC_ADD]},color:oe}}},{key:"getStencilDrawParams",value:function(l){var m=l.stencil,a=m||{},T=a.enable,R=a.mask,U=R===void 0?-1:R,Y=a.func,oe=Y===void 0?{cmp:S.s.ALWAYS,ref:0,mask:-1}:Y,me=a.opFront,Ce=me===void 0?{fail:S.s.KEEP,zfail:S.s.KEEP,zpass:S.s.KEEP}:me,Ve=a.opBack,ut=Ve===void 0?{fail:S.s.KEEP,zfail:S.s.KEEP,zpass:S.s.KEEP}:Ve;return{enable:!!T,mask:U,func:Bb(Lp({},oe),{cmp:pg[oe.cmp]}),opFront:{fail:Wf[Ce.fail],zfail:Wf[Ce.zfail],zpass:Wf[Ce.zpass]},opBack:{fail:Wf[ut.fail],zfail:Wf[ut.zfail],zpass:Wf[ut.zpass]}}}},{key:"getColorMaskDrawParams",value:function(l,m){var a=l.stencil,T=(a==null?void 0:a.enable)&&a.opFront&&!m?[!1,!1,!1,!1]:[!0,!0,!0,!0];return T}},{key:"initCullDrawParams",value:function(l,m){var a=l.cull;if(a){var T=a.enable,R=a.face,U=R===void 0?S.s.BACK:R;m.cull={enable:!!T,face:gg[U]}}}},{key:"extractUniforms",value:function(l){var m=this,a={};return Object.keys(l).forEach(function(T){m.extractUniformsRecursively(T,l[T],a,"")}),a}},{key:"extractUniformsRecursively",value:function(l,m,a,T){var R=this;if(m===null||typeof m=="number"||typeof m=="boolean"||Array.isArray(m)&&typeof m[0]=="number"||Nb(m)||m===""||"resize"in m){a["".concat(T&&T+".").concat(l)]=m;return}Fb(m)&&Object.keys(m).forEach(function(U){R.extractUniformsRecursively(U,m[U],a,"".concat(T&&T+".").concat(l))}),Array.isArray(m)&&m.forEach(function(U,Y){Object.keys(U).forEach(function(oe){R.extractUniformsRecursively(oe,U[oe],a,"".concat(T&&T+".").concat(l,"[").concat(Y,"]"))})})}}]),t}(),kb=function(){function t(y,l){Object(g.a)(this,t),this.isDestroy=!1;var m=l.data,a=l.type,T=a===void 0?S.s.UNSIGNED_BYTE:a,R=l.width,U=l.height,Y=l.flipY,oe=Y===void 0?!1:Y,me=l.format,Ce=me===void 0?S.s.RGBA:me,Ve=l.mipmap,ut=Ve===void 0?!1:Ve,Ft=l.wrapS,Nt=Ft===void 0?S.s.CLAMP_TO_EDGE:Ft,vr=l.wrapT,_r=vr===void 0?S.s.CLAMP_TO_EDGE:vr,Sr=l.aniso,cn=Sr===void 0?0:Sr,Bn=l.alignment,Kn=Bn===void 0?1:Bn,wn=l.premultiplyAlpha,vn=wn===void 0?!1:wn,ti=l.mag,Mi=ti===void 0?S.s.NEAREST:ti,Ki=l.min,Ii=Ki===void 0?S.s.NEAREST:Ki,xa=l.colorSpace,La=xa===void 0?S.s.BROWSER_DEFAULT_WEBGL:xa,Cs=l.x,wu=Cs===void 0?0:Cs,ju=l.y,Oc=ju===void 0?0:ju,wc=l.copy,Wl=wc===void 0?!1:wc;this.width=R,this.height=U;var gf={width:R,height:U,type:wf[T],format:dg[Ce],wrapS:bp[Nt],wrapT:bp[_r],mag:Dv[Mi],min:Dv[Ii],alignment:Kn,flipY:oe,colorSpace:xp[La],premultiplyAlpha:vn,aniso:cn,x:wu,y:Oc,copy:Wl};m&&(gf.data=m),typeof ut=="number"?gf.mipmap=_p[ut]:typeof ut=="boolean"&&(gf.mipmap=ut),this.texture=y.texture(gf)}return Object(v.a)(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(l)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(l){var m=l.width,a=l.height;this.texture.resize(m,a),this.width=m,this.height=a}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){var l;this.isDestroy||(l=this.texture)==null||l.destroy(),this.isDestroy=!0}}]),t}(),Im=function(y,l,m){return new Promise(function(a,T){var R=function(me){try{Y(m.next(me))}catch(Ce){T(Ce)}},U=function(me){try{Y(m.throw(me))}catch(Ce){T(Ce)}},Y=function(me){return me.done?a(me.value):Promise.resolve(me.value).then(R,U)};Y((m=m.apply(y,l)).next())})},zb=function(){function t(){var y=this;Object(g.a)(this,t),this.uniformBuffers=[],this.queryVerdorInfo=function(){return"WebGL1"},this.createModel=function(l){return new Ub(y.gl,l)},this.createAttribute=function(l){return new Yc(y.gl,l)},this.createBuffer=function(l){return new jv(y.gl,l)},this.createElements=function(l){return new gm(y.gl,l)},this.createTexture2D=function(l){return new kb(y.gl,l)},this.createFramebuffer=function(l){return new mg(y.gl,l)},this.useFramebuffer=function(l,m){y.gl({framebuffer:l?l.get():null})(m)},this.useFramebufferAsync=function(l,m){return Im(y,null,Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:this.gl({framebuffer:l?l.get():null})(m);case 1:case"end":return R.stop()}},a,this)}))},this.clear=function(l){var m,a=l.color,T=l.depth,R=l.stencil,U=l.framebuffer,Y=U===void 0?null:U,oe={color:a,depth:T,stencil:R};oe.framebuffer=Y===null?Y:Y.get(),(m=y.gl)==null||m.clear(oe)},this.viewport=function(l){var m=l.x,a=l.y,T=l.width,R=l.height;y.gl._gl.viewport(m,a,T,R),y.width=T,y.height=R,y.gl._refresh()},this.readPixels=function(l){var m=l.framebuffer,a=l.x,T=l.y,R=l.width,U=l.height,Y={x:a,y:T,width:R,height:U};return m&&(Y.framebuffer=m.get()),y.gl.read(Y)},this.readPixelsAsync=function(l){return Im(y,null,Object(K.a)().mark(function m(){return Object(K.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.readPixels(l));case 1:case"end":return T.stop()}},m,this)}))},this.getViewportSize=function(){return{width:y.gl._gl.drawingBufferWidth,height:y.gl._gl.drawingBufferHeight}},this.getContainer=function(){var l;return(l=y.canvas)==null?void 0:l.parentElement},this.getCanvas=function(){return y.canvas},this.getGLContext=function(){return y.gl._gl},this.destroy=function(){var l,m,a;y.canvas=null,(a=(m=(l=y.gl)==null?void 0:l._gl)==null?void 0:m.getExtension("WEBGL_lose_context"))==null||a.loseContext(),y.gl.destroy(),y.gl=null}}return Object(v.a)(t,[{key:"init",value:function(l,m,a){return Im(this,null,Object(K.a)().mark(function T(){var R=this;return Object(K.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this.canvas=l,!a){Y.next=5;break}this.gl=a,Y.next=8;break;case 5:return Y.next=7,new Promise(function(oe,me){hg()({canvas:R.canvas,attributes:{alpha:!0,antialias:m.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:m.preserveDrawingBuffer,stencil:m.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(Ve,ut){(Ve||!ut)&&me(Ve),oe(ut)}})});case 7:this.gl=Y.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return Y.stop()}},T,this)}))}},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(l){return!!this.getGLContext().getExtension(l)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var l=this.getGLContext();l.disable(l.CULL_FACE)}},{key:"setDirty",value:function(l){this.isDirty=l}},{key:"getDirty",value:function(){return this.isDirty}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),Vb=function(){function t(y,l){Object(g.a)(this,t);var m=l.buffer,a=l.offset,T=l.stride,R=l.normalized,U=l.size,Y=l.divisor,oe=l.shaderLocation;this.buffer=m,this.attribute={shaderLocation:oe,buffer:m.get(),offset:a||0,stride:T||0,normalized:R||!1,divisor:Y||0},U&&(this.attribute.size=U)}return Object(v.a)(t,[{key:"get",value:function(){return this.buffer}},{key:"updateBuffer",value:function(l){this.buffer.subData(l)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Ad,Yh,$v,Dp,jp,Ah,Ng,rv,Uc,Oh,Th,Ug=(Ad={},Object(d.a)(Ad,S.s.FLOAT,Float32Array),Object(d.a)(Ad,S.s.UNSIGNED_BYTE,Uint8Array),Object(d.a)(Ad,S.s.SHORT,Int16Array),Object(d.a)(Ad,S.s.UNSIGNED_SHORT,Uint16Array),Object(d.a)(Ad,S.s.INT,Int32Array),Object(d.a)(Ad,S.s.UNSIGNED_INT,Uint32Array),Ad),Wb=(Yh={},Object(d.a)(Yh,S.s.POINTS,hc.POINTS),Object(d.a)(Yh,S.s.LINES,hc.LINES),Object(d.a)(Yh,S.s.LINE_LOOP,hc.LINES),Object(d.a)(Yh,S.s.LINE_STRIP,hc.LINE_STRIP),Object(d.a)(Yh,S.s.TRIANGLES,hc.TRIANGLES),Object(d.a)(Yh,S.s.TRIANGLE_FAN,hc.TRIANGLES),Object(d.a)(Yh,S.s.TRIANGLE_STRIP,hc.TRIANGLE_STRIP),Yh),Hb=($v={},Object(d.a)($v,1,Mn.F32_R),Object(d.a)($v,2,Mn.F32_RG),Object(d.a)($v,3,Mn.F32_RGB),Object(d.a)($v,4,Mn.F32_RGBA),$v),Gb=(Dp={},Object(d.a)(Dp,S.s.STATIC_DRAW,sh.STATIC),Object(d.a)(Dp,S.s.DYNAMIC_DRAW,sh.DYNAMIC),Object(d.a)(Dp,S.s.STREAM_DRAW,sh.DYNAMIC),Dp),K0=(jp={},Object(d.a)(jp,S.s.REPEAT,tf.REPEAT),Object(d.a)(jp,S.s.CLAMP_TO_EDGE,tf.CLAMP_TO_EDGE),Object(d.a)(jp,S.s.MIRRORED_REPEAT,tf.MIRRORED_REPEAT),jp),Xb=(Ah={},Object(d.a)(Ah,S.s.NEVER,vs.NEVER),Object(d.a)(Ah,S.s.ALWAYS,vs.ALWAYS),Object(d.a)(Ah,S.s.LESS,vs.LESS),Object(d.a)(Ah,S.s.LEQUAL,vs.LEQUAL),Object(d.a)(Ah,S.s.GREATER,vs.GREATER),Object(d.a)(Ah,S.s.GEQUAL,vs.GEQUAL),Object(d.a)(Ah,S.s.EQUAL,vs.EQUAL),Object(d.a)(Ah,S.s.NOTEQUAL,vs.NOTEQUAL),Ah),Yb=(Ng={},Object(d.a)(Ng,S.s.FRONT,df.FRONT),Object(d.a)(Ng,S.s.BACK,df.BACK),Ng),J0=(rv={},Object(d.a)(rv,S.s.FUNC_ADD,Cc.ADD),Object(d.a)(rv,S.s.MIN_EXT,Cc.MIN),Object(d.a)(rv,S.s.MAX_EXT,Cc.MAX),Object(d.a)(rv,S.s.FUNC_SUBTRACT,Cc.SUBSTRACT),Object(d.a)(rv,S.s.FUNC_REVERSE_SUBTRACT,Cc.REVERSE_SUBSTRACT),rv),kg=(Uc={},Object(d.a)(Uc,S.s.ZERO,Ms.ZERO),Object(d.a)(Uc,S.s.ONE,Ms.ONE),Object(d.a)(Uc,S.s.SRC_COLOR,Ms.SRC),Object(d.a)(Uc,S.s.ONE_MINUS_SRC_COLOR,Ms.ONE_MINUS_SRC),Object(d.a)(Uc,S.s.SRC_ALPHA,Ms.SRC_ALPHA),Object(d.a)(Uc,S.s.ONE_MINUS_SRC_ALPHA,Ms.ONE_MINUS_SRC_ALPHA),Object(d.a)(Uc,S.s.DST_COLOR,Ms.DST),Object(d.a)(Uc,S.s.ONE_MINUS_DST_COLOR,Ms.ONE_MINUS_DST),Object(d.a)(Uc,S.s.DST_ALPHA,Ms.DST_ALPHA),Object(d.a)(Uc,S.s.ONE_MINUS_DST_ALPHA,Ms.ONE_MINUS_DST_ALPHA),Object(d.a)(Uc,S.s.CONSTANT_COLOR,Ms.CONST),Object(d.a)(Uc,S.s.ONE_MINUS_CONSTANT_COLOR,Ms.ONE_MINUS_CONSTANT),Object(d.a)(Uc,S.s.CONSTANT_ALPHA,Ms.CONST),Object(d.a)(Uc,S.s.ONE_MINUS_CONSTANT_ALPHA,Ms.ONE_MINUS_CONSTANT),Object(d.a)(Uc,S.s.SRC_ALPHA_SATURATE,Ms.SRC_ALPHA_SATURATE),Uc),Zv=(Oh={},Object(d.a)(Oh,S.s.REPLACE,Ul.REPLACE),Object(d.a)(Oh,S.s.KEEP,Ul.KEEP),Object(d.a)(Oh,S.s.ZERO,Ul.ZERO),Object(d.a)(Oh,S.s.INVERT,Ul.INVERT),Object(d.a)(Oh,S.s.INCR,Ul.INCREMENT_CLAMP),Object(d.a)(Oh,S.s.DECR,Ul.DECREMENT_CLAMP),Object(d.a)(Oh,S.s.INCR_WRAP,Ul.INCREMENT_WRAP),Object(d.a)(Oh,S.s.DECR_WRAP,Ul.DECREMENT_WRAP),Oh),$b=(Th={},Object(d.a)(Th,S.s.ALWAYS,vs.ALWAYS),Object(d.a)(Th,S.s.EQUAL,vs.EQUAL),Object(d.a)(Th,S.s.GEQUAL,vs.GEQUAL),Object(d.a)(Th,S.s.GREATER,vs.GREATER),Object(d.a)(Th,S.s.LEQUAL,vs.LEQUAL),Object(d.a)(Th,S.s.LESS,vs.LESS),Object(d.a)(Th,S.s.NEVER,vs.NEVER),Object(d.a)(Th,S.s.NOTEQUAL,vs.NOTEQUAL),Th),Zb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function zg(t){return Object.prototype.toString.call(t)in Zb}function Kb(t,y){for(var l=t.length,m=Math.ceil(l/3),a=l+m,T=new Float32Array(a),R=0;R<a;R+=4)T[R]=t[R/4*3],T[R+1]=t[R/4*3+1],T[R+2]=t[R/4*3+2],T[R+3]=y;return T}var Jb=function(){function t(y,l){Object(g.a)(this,t),this.isDestroyed=!1;var m=l.data,a=l.usage,T=l.type,R=l.isUBO,U=l.label,Y;zg(m)?Y=m:Y=new Ug[this.type||S.s.FLOAT](m),this.type=T,this.size=Y.byteLength,this.buffer=y.createBuffer({viewOrSize:Y,usage:R?Zu.UNIFORM:Zu.VERTEX,hint:Gb[a||S.s.STATIC_DRAW]}),U&&y.setResourceName(this.buffer,U)}return Object(v.a)(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(l){var m=l.data,a=l.offset,T;zg(m)?T=m:T=new Ug[this.type||S.s.FLOAT](m),this.buffer.setSubData(a,new Uint8Array(T.buffer))}}]),t}();function Pu(t){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t+=y,t+=t<<10,t+=t>>>6,t>>>0}function Q0(t){return t+=t<<3,t^=t>>>11,t+=t<<15,t>>>0}function q0(){return 0}var Qb=Object(v.a)(function t(){Object(g.a)(this,t),this.keys=[],this.values=[]}),Vg=function(){function t(y,l){Object(g.a)(this,t),this.keyEqualFunc=y,this.keyHashFunc=l,this.buckets=new Map}return Object(v.a)(t,[{key:"findBucketIndex",value:function(l,m){for(var a=0;a<l.keys.length;a++)if(this.keyEqualFunc(m,l.keys[a]))return a;return-1}},{key:"findBucket",value:function(l){var m=this.keyHashFunc(l);return this.buckets.get(m)}},{key:"get",value:function(l){var m=this.findBucket(l);if(m===void 0)return null;var a=this.findBucketIndex(m,l);return a<0?null:m.values[a]}},{key:"add",value:function(l,m){var a=this.keyHashFunc(l);this.buckets.get(a)===void 0&&this.buckets.set(a,new Qb);var T=this.buckets.get(a);T.keys.push(l),T.values.push(m)}},{key:"delete",value:function(l){var m=this.findBucket(l);if(m!==void 0){var a=this.findBucketIndex(m,l);a!==-1&&(m.keys.splice(a,1),m.values.splice(a,1))}}},{key:"clear",value:function(){this.buckets.clear()}},{key:"size",value:function(){var l=0,m=Object(Re.a)(this.buckets.values()),a;try{for(m.s();!(a=m.n()).done;){var T=a.value;l+=T.values.length}}catch(R){m.e(R)}finally{m.f()}return l}},{key:"values",value:Object(K.a)().mark(function y(){var l,m,a,T;return Object(K.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:l=Object(Re.a)(this.buckets.values()),U.prev=1,l.s();case 3:if((m=l.n()).done){U.next=14;break}a=m.value,T=a.values.length-1;case 6:if(!(T>=0)){U.next=12;break}return U.next=9,a.values[T];case 9:T--,U.next=6;break;case 12:U.next=3;break;case 14:U.next=19;break;case 16:U.prev=16,U.t0=U.catch(1),l.e(U.t0);case 19:return U.prev=19,l.f(),U.finish(19);case 22:case"end":return U.stop()}},y,this,[[1,16,19,22]])})}]),t}();function ey(t,y){return t=Pu(t,y.blendMode),t=Pu(t,y.blendSrcFactor),t=Pu(t,y.blendDstFactor),t}function qb(t,y){return t=ey(t,y.rgbBlendState),t=ey(t,y.alphaBlendState),t=Pu(t,y.channelWriteMask),t}function ex(t,y){return t=Pu(t,y.r<<24|y.g<<16|y.b<<8|y.a),t}function tx(t,y){for(var l,m,a,T,R,U,Y,oe,me=0;me<y.attachmentsState.length;me++)t=qb(t,y.attachmentsState[me]);return t=ex(t,y.blendConstant||Sg),t=Pu(t,y.depthCompare),t=Pu(t,y.depthWrite?1:0),t=Pu(t,(l=y.stencilFront)==null?void 0:l.compare),t=Pu(t,(m=y.stencilFront)==null?void 0:m.passOp),t=Pu(t,(a=y.stencilFront)==null?void 0:a.failOp),t=Pu(t,(T=y.stencilFront)==null?void 0:T.depthFailOp),t=Pu(t,(R=y.stencilBack)==null?void 0:R.compare),t=Pu(t,(U=y.stencilBack)==null?void 0:U.passOp),t=Pu(t,(Y=y.stencilBack)==null?void 0:Y.failOp),t=Pu(t,(oe=y.stencilBack)==null?void 0:oe.depthFailOp),t=Pu(t,y.stencilWrite?1:0),t=Pu(t,y.cullMode),t=Pu(t,y.frontFace?1:0),t=Pu(t,y.polygonOffset?1:0),t}function rx(t){var y=0;y=Pu(y,t.program.id),t.inputLayout!==null&&(y=Pu(y,t.inputLayout.id)),y=tx(y,t.megaStateDescriptor);for(var l=0;l<t.colorAttachmentFormats.length;l++)y=Pu(y,t.colorAttachmentFormats[l]||0);return y=Pu(y,t.depthStencilAttachmentFormat||0),Q0(y)}function nx(t){var y=0;if(t.samplerBindings)for(var l=0;l<t.samplerBindings.length;l++){var m=t.samplerBindings[l];m!==null&&m.texture!==null&&(y=Pu(y,m.texture.id))}if(t.uniformBufferBindings)for(var a=0;a<t.uniformBufferBindings.length;a++){var T=t.uniformBufferBindings[a];T!==null&&T.buffer!==null&&(y=Pu(y,T.buffer.id),y=Pu(y,T.binding),y=Pu(y,T.offset),y=Pu(y,T.size))}if(t.storageBufferBindings)for(var R=0;R<t.storageBufferBindings.length;R++){var U=t.storageBufferBindings[R];U!==null&&U.buffer!==null&&(y=Pu(y,U.buffer.id),y=Pu(y,U.binding),y=Pu(y,U.offset),y=Pu(y,U.size))}if(t.storageTextureBindings)for(var Y=0;Y<t.storageTextureBindings.length;Y++){var oe=t.storageTextureBindings[Y];oe!==null&&oe.texture!==null&&(y=Pu(y,oe.texture.id),y=Pu(y,oe.binding))}return Q0(y)}function ix(t,y){var l,m,a,T;return((l=t.vertex)==null?void 0:l.glsl)===((m=y.vertex)==null?void 0:m.glsl)&&((a=t.fragment)==null?void 0:a.glsl)===((T=y.fragment)==null?void 0:T.glsl)}function ax(t){var y,l;return{vertex:{glsl:(y=t.vertex)==null?void 0:y.glsl},fragment:{glsl:(l=t.fragment)==null?void 0:l.glsl}}}var ox=function(){function t(y){Object(g.a)(this,t),this.device=y,this.bindingsCache=new Vg($1,nx),this.renderPipelinesCache=new Vg(Q1,rx),this.inputLayoutsCache=new Vg(t_,q0),this.programCache=new Vg(ix,q0)}return Object(v.a)(t,[{key:"createBindings",value:function(l){var m,a=this.bindingsCache.get(l);if(a===null){var T=i_(l);T.uniformBufferBindings=(m=T.uniformBufferBindings)==null?void 0:m.filter(function(R){var U=R.size;return U&&U>0}),a=this.device.createBindings(T),this.bindingsCache.add(T,a)}return a}},{key:"createRenderPipeline",value:function(l){var m=this.renderPipelinesCache.get(l);if(m===null){var a=a_(l);a.colorAttachmentFormats=a.colorAttachmentFormats.filter(function(T){return T}),m=this.device.createRenderPipeline(a),this.renderPipelinesCache.add(a,m)}return m}},{key:"createInputLayout",value:function(l){l.vertexBufferDescriptors=l.vertexBufferDescriptors.filter(function(T){return!!T});var m=this.inputLayoutsCache.get(l);if(m===null){var a=u_(l);m=this.device.createInputLayout(a),this.inputLayoutsCache.add(a,m)}return m}},{key:"createProgram",value:function(l){var m=this.programCache.get(l);if(m===null){var a=ax(l);m=this.device.createProgram(l),this.programCache.add(a,m)}return m}},{key:"destroy",value:function(){var l=Object(Re.a)(this.bindingsCache.values()),m;try{for(l.s();!(m=l.n()).done;){var a=m.value;a.destroy()}}catch(Ft){l.e(Ft)}finally{l.f()}var T=Object(Re.a)(this.renderPipelinesCache.values()),R;try{for(T.s();!(R=T.n()).done;){var U=R.value;U.destroy()}}catch(Ft){T.e(Ft)}finally{T.f()}var Y=Object(Re.a)(this.inputLayoutsCache.values()),oe;try{for(Y.s();!(oe=Y.n()).done;){var me=oe.value;me.destroy()}}catch(Ft){Y.e(Ft)}finally{Y.f()}var Ce=Object(Re.a)(this.programCache.values()),Ve;try{for(Ce.s();!(Ve=Ce.n()).done;){var ut=Ve.value;ut.destroy()}}catch(Ft){Ce.e(Ft)}finally{Ce.f()}this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}}]),t}(),sx=function(){function t(y,l){Object(g.a)(this,t);var m=l.data,a=l.type,T=l.count,R=T===void 0?0:T,U;zg(m)?U=m:U=new Ug[this.type||S.s.UNSIGNED_INT](m),this.type=a,this.count=R,this.indexBuffer=y.createBuffer({viewOrSize:U,usage:Zu.INDEX})}return Object(v.a)(t,[{key:"get",value:function(){return this.indexBuffer}},{key:"subData",value:function(l){var m=l.data,a;zg(m)?a=m:a=new Ug[this.type||S.s.UNSIGNED_INT](m),this.indexBuffer.setSubData(0,new Uint8Array(a.buffer))}},{key:"destroy",value:function(){this.indexBuffer.destroy()}}]),t}();function ty(t){return!!(t&&t.texture)}var ry=function(){function t(y,l){Object(g.a)(this,t),this.device=y,this.options=l,this.isDestroy=!1;var m=l.wrapS,a=m===void 0?S.s.CLAMP_TO_EDGE:m,T=l.wrapT,R=T===void 0?S.s.CLAMP_TO_EDGE:T,U=l.aniso,Y=l.mag,oe=Y===void 0?S.s.NEAREST:Y,me=l.min,Ce=me===void 0?S.s.NEAREST:me;this.createTexture(l),this.sampler=y.createSampler({addressModeU:K0[a],addressModeV:K0[R],minFilter:Ce===S.s.NEAREST?Jl.POINT:Jl.BILINEAR,magFilter:oe===S.s.NEAREST?Jl.POINT:Jl.BILINEAR,mipmapFilter:Sc.NO_MIP,maxAnisotropy:U})}return Object(v.a)(t,[{key:"createTexture",value:function(l){var m=l.type,a=m===void 0?S.s.UNSIGNED_BYTE:m,T=l.width,R=l.height,U=l.flipY,Y=U===void 0?!1:U,oe=l.format,me=oe===void 0?S.s.RGBA:oe,Ce=l.alignment,Ve=Ce===void 0?1:Ce,ut=l.usage,Ft=ut===void 0?S.p.SAMPLED:ut,Nt=l.unorm,vr=Nt===void 0?!1:Nt,_r=l.label,Sr=l.data;this.width=T,this.height=R;var cn=Mn.U8_RGBA_RT;if(a===S.s.UNSIGNED_BYTE&&me===S.s.RGBA)cn=vr?Mn.U8_RGBA_NORM:Mn.U8_RGBA_RT;else if(a===S.s.UNSIGNED_BYTE&&me===S.s.LUMINANCE)cn=Mn.U8_LUMINANCE;else if(a===S.s.FLOAT&&me===S.s.LUMINANCE)cn=Mn.F32_LUMINANCE;else if(a===S.s.FLOAT&&me===S.s.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(Sr&&(Sr=Kb(Sr,0)),cn=Mn.F32_RGBA):cn=Mn.F32_RGB;else if(a===S.s.FLOAT&&me===S.s.RGBA)cn=Mn.F32_RGBA;else if(a===S.s.FLOAT&&me===S.s.RED)cn=Mn.F32_R;else throw new Error("create texture error, type: ".concat(a,", format: ").concat(me));this.texture=this.device.createTexture({format:cn,width:T,height:R,usage:Ft===S.p.SAMPLED?Nc.SAMPLED:Nc.RENDER_TARGET,pixelStore:{unpackFlipY:Y,packAlignment:Ve},mipLevelCount:1}),_r&&this.device.setResourceName(this.texture,_r),Sr&&this.texture.setImageData([Sr])}},{key:"get",value:function(){return this.texture}},{key:"update",value:function(l){var m=l.data;this.texture.setImageData([m])}},{key:"bind",value:function(){}},{key:"resize",value:function(l){var m=l.width,a=l.height;(this.width!==m||this.height!==a)&&this.destroy(),this.options.width=m,this.options.height=a,this.createTexture(this.options),this.isDestroy=!1}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){var l;!this.isDestroy&&!this.texture.destroyed&&((l=this.texture)==null||l.destroy()),this.isDestroy=!0}}]),t}(),ny=function(){function t(y,l){Object(g.a)(this,t),this.device=y,this.options=l,this.createColorRenderTarget(),this.createDepthRenderTarget()}return Object(v.a)(t,[{key:"createColorRenderTarget",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,m=this.options,a=m.width,T=m.height,R=m.color;R&&(ty(R)?(l&&R.resize({width:a,height:T}),this.colorTexture=R.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=R.width,this.height=R.height):a&&T&&(this.colorTexture=this.device.createTexture({format:Mn.U8_RGBA_RT,usage:Nc.RENDER_TARGET,width:a,height:T}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=a,this.height=T))}},{key:"createDepthRenderTarget",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,m=this.options,a=m.width,T=m.height,R=m.depth;R&&(ty(R)?(l&&R.resize({width:a,height:T}),this.depthTexture=R.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=R.width,this.height=R.height):a&&T&&(this.depthTexture=this.device.createTexture({format:Mn.D24_S8,usage:Nc.RENDER_TARGET,width:a,height:T}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=a,this.height=T))}},{key:"get",value:function(){return this.colorRenderTarget}},{key:"destroy",value:function(){var l,m;(l=this.colorRenderTarget)==null||l.destroy(),(m=this.depthRenderTarget)==null||m.destroy()}},{key:"resize",value:function(l){var m=l.width,a=l.height;(this.width!==m||this.height!==a)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=m,this.options.height=a,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}}]),t}(),ux=Object.defineProperty,lx=Object.defineProperties,cx=Object.getOwnPropertyDescriptors,iy=Object.getOwnPropertySymbols,fx=Object.prototype.hasOwnProperty,hx=Object.prototype.propertyIsEnumerable,ay=function(y,l,m){return l in y?ux(y,l,{enumerable:!0,configurable:!0,writable:!0,value:m}):y[l]=m},nv=function(y,l){for(var m in l||(l={}))fx.call(l,m)&&ay(y,m,l[m]);if(iy){var a=Object(Re.a)(iy(l)),T;try{for(a.s();!(T=a.n()).done;){var m=T.value;hx.call(l,m)&&ay(y,m,l[m])}}catch(R){a.e(R)}finally{a.f()}}return y},dx=function(y,l){return lx(y,cx(l))},vx=n.N.isPlainObject,px=n.N.isTypedArray,oy=n.N.isNil,gx=function(){function t(y,l,m){var a=this;Object(g.a)(this,t),this.device=y,this.options=l,this.service=m,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];var T=l.vs,R=l.fs,U=l.attributes,Y=l.uniforms,oe=l.count,me=l.elements,Ce=l.diagnosticDerivativeUniformityEnabled;this.options=l;var Ve=Ce?"":this.service.viewportOrigin===uh.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=m.renderCache.createProgram({vertex:{glsl:T},fragment:{glsl:R,postprocess:function(_r){return Ve+_r}}}),Y&&(this.uniforms=this.extractUniforms(Y));var ut=[],Ft=0;Object.keys(U).forEach(function(vr){var _r=U[vr],Sr=_r.get();a.vertexBuffers.push(Sr.get());var cn=_r.attribute,Bn=cn.offset,Kn=Bn===void 0?0:Bn,wn=cn.stride,vn=wn===void 0?0:wn,ti=cn.size,Mi=ti===void 0?1:ti,Ki=cn.divisor,Ii=Ki===void 0?0:Ki,xa=cn.shaderLocation,La=xa===void 0?0:xa;ut.push({arrayStride:vn||Mi*4,stepMode:qd.VERTEX,attributes:[{format:Hb[Mi],shaderLocation:La,offset:Kn,divisor:Ii}]}),Ft=Sr.size/Mi}),oe||(this.options.count=Ft),me&&(this.indexBuffer=me.get());var Nt=m.renderCache.createInputLayout({vertexBufferDescriptors:ut,indexBufferFormat:me?Mn.U32_R:null,program:this.program});this.inputLayout=Nt,this.pipeline=this.createPipeline(l)}return Object(v.a)(t,[{key:"createPipeline",value:function(l,m){var a,T=l.primitive,R=T===void 0?S.s.TRIANGLES:T,U=l.depth,Y=l.cull,oe=l.blend,me=l.stencil,Ce=this.initDepthDrawParams({depth:U}),Ve=!!(Ce&&Ce.enable),ut=this.initCullDrawParams({cull:Y}),Ft=!!(ut&&ut.enable),Nt=this.getBlendDrawParams({blend:oe}),vr=!!(Nt&&Nt.enable),_r=this.getStencilDrawParams({stencil:me}),Sr=!!(_r&&_r.enable),cn=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:Wb[R],colorAttachmentFormats:[Mn.U8_RGBA_RT],depthStencilAttachmentFormat:Mn.D24_S8,megaStateDescriptor:{attachmentsState:[m?{channelWriteMask:Pc.ALL,rgbBlendState:{blendMode:Cc.ADD,blendSrcFactor:Ms.ONE,blendDstFactor:Ms.ZERO},alphaBlendState:{blendMode:Cc.ADD,blendSrcFactor:Ms.ONE,blendDstFactor:Ms.ZERO}}:{channelWriteMask:Sr&&_r.opFront.zpass===Ul.REPLACE?Pc.NONE:Pc.ALL,rgbBlendState:{blendMode:vr&&Nt.equation.rgb||Cc.ADD,blendSrcFactor:vr&&Nt.func.srcRGB||Ms.SRC_ALPHA,blendDstFactor:vr&&Nt.func.dstRGB||Ms.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:vr&&Nt.equation.alpha||Cc.ADD,blendSrcFactor:vr&&Nt.func.srcAlpha||Ms.ONE,blendDstFactor:vr&&Nt.func.dstAlpha||Ms.ONE}}],blendConstant:vr?Sg:void 0,depthWrite:Ve,depthCompare:Ve&&Ce.func||vs.LESS,cullMode:Ft&&ut.face||df.NONE,stencilWrite:Sr,stencilFront:{compare:Sr?_r.func.cmp:vs.ALWAYS,passOp:_r.opFront.zpass,failOp:_r.opFront.fail,depthFailOp:_r.opFront.zfail,mask:_r.opFront.mask},stencilBack:{compare:Sr?_r.func.cmp:vs.ALWAYS,passOp:_r.opBack.zpass,failOp:_r.opBack.fail,depthFailOp:_r.opBack.zfail,mask:_r.opBack.mask}}});return Sr&&!oy((a=me==null?void 0:me.func)==null?void 0:a.ref)&&(cn.stencilFuncReference=me.func.ref),cn}},{key:"updateAttributesAndElements",value:function(){}},{key:"updateAttributes",value:function(){}},{key:"addUniforms",value:function(l){this.uniforms=nv(nv({},this.uniforms),this.extractUniforms(l))}},{key:"draw",value:function(l,m){var a=this,T=nv(nv({},this.options),l),R=T.count,U=R===void 0?0:R,Y=T.instances,oe=T.elements,me=T.uniforms,Ce=me===void 0?{}:me,Ve=T.uniformBuffers,ut=T.textures;this.uniforms=nv(nv({},this.uniforms),this.extractUniforms(Ce));var Ft=this.service,Nt=Ft.renderPass,vr=Ft.currentFramebuffer,_r=Ft.width,Sr=Ft.height;this.pipeline=this.createPipeline(T,m);var cn=this.service.device,Bn=cn.swapChainHeight;if(cn.swapChainHeight=(vr==null?void 0:vr.height)||Sr,Nt.setViewport(0,0,(vr==null?void 0:vr.width)||_r,(vr==null?void 0:vr.height)||Sr),cn.swapChainHeight=Bn,Nt.setPipeline(this.pipeline),oy(this.pipeline.stencilFuncReference)||Nt.setStencilReference(this.pipeline.stencilFuncReference),Nt.setVertexInput(this.inputLayout,this.vertexBuffers.map(function(wn){return{buffer:wn}}),oe?{buffer:this.indexBuffer,offset:0}:null),Ve&&(this.bindings=cn.createBindings({pipeline:this.pipeline,uniformBufferBindings:Ve.map(function(wn,vn){var ti=wn;return{binding:vn,buffer:ti.get(),size:ti.size}}),samplerBindings:ut==null?void 0:ut.map(function(wn){return{texture:wn.texture,sampler:wn.sampler}})})),this.bindings&&(Nt.setBindings(this.bindings),Object.keys(this.uniforms).forEach(function(wn){var vn=a.uniforms[wn];vn instanceof ry?a.uniforms[wn]=vn.get():vn instanceof ny&&(a.uniforms[wn]=vn.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),oe){var Kn=oe.count;Kn===0?Nt.draw(U,Y):Nt.drawIndexed(Kn,Y)}else Nt.draw(U,Y)}},{key:"destroy",value:function(){var l,m,a;(l=this.vertexBuffers)==null||l.forEach(function(T){return T.destroy()}),(m=this.indexBuffer)==null||m.destroy(),(a=this.bindings)==null||a.destroy(),this.pipeline.destroy(),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(l){var m=l.depth;if(m)return{enable:m.enable===void 0?!0:!!m.enable,mask:m.mask===void 0?!0:!!m.mask,func:Xb[m.func||S.s.LESS],range:m.range||[0,1]}}},{key:"getBlendDrawParams",value:function(l){var m=l.blend,a=m||{},T=a.enable,R=a.func,U=a.equation,Y=a.color,oe=Y===void 0?[0,0,0,0]:Y;return{enable:!!T,func:{srcRGB:kg[R&&R.srcRGB||S.s.SRC_ALPHA],srcAlpha:kg[R&&R.srcAlpha||S.s.SRC_ALPHA],dstRGB:kg[R&&R.dstRGB||S.s.ONE_MINUS_SRC_ALPHA],dstAlpha:kg[R&&R.dstAlpha||S.s.ONE_MINUS_SRC_ALPHA]},equation:{rgb:J0[U&&U.rgb||S.s.FUNC_ADD],alpha:J0[U&&U.alpha||S.s.FUNC_ADD]},color:oe}}},{key:"getStencilDrawParams",value:function(l){var m=l.stencil,a=m||{},T=a.enable,R=a.mask,U=R===void 0?4294967295:R,Y=a.func,oe=Y===void 0?{cmp:S.s.ALWAYS,ref:0,mask:4294967295}:Y,me=a.opFront,Ce=me===void 0?{fail:S.s.KEEP,zfail:S.s.KEEP,zpass:S.s.KEEP}:me,Ve=a.opBack,ut=Ve===void 0?{fail:S.s.KEEP,zfail:S.s.KEEP,zpass:S.s.KEEP}:Ve;return{enable:!!T,mask:U,func:dx(nv({},oe),{cmp:$b[oe.cmp]}),opFront:{fail:Zv[Ce.fail],zfail:Zv[Ce.zfail],zpass:Zv[Ce.zpass],mask:oe.mask},opBack:{fail:Zv[ut.fail],zfail:Zv[ut.zfail],zpass:Zv[ut.zpass],mask:oe.mask}}}},{key:"initCullDrawParams",value:function(l){var m=l.cull;if(m){var a=m.enable,T=m.face,R=T===void 0?S.s.BACK:T;return{enable:!!a,face:Yb[R]}}}},{key:"extractUniforms",value:function(l){var m=this,a={};return Object.keys(l).forEach(function(T){m.extractUniformsRecursively(T,l[T],a,"")}),a}},{key:"extractUniformsRecursively",value:function(l,m,a,T){var R=this;if(m===null||typeof m=="number"||typeof m=="boolean"||Array.isArray(m)&&typeof m[0]=="number"||px(m)||m===""||"resize"in m){a["".concat(T&&T+".").concat(l)]=m;return}vx(m)&&Object.keys(m).forEach(function(U){R.extractUniformsRecursively(U,m[U],a,"".concat(T&&T+".").concat(l))}),Array.isArray(m)&&m.forEach(function(U,Y){Object.keys(U).forEach(function(oe){R.extractUniformsRecursively(oe,U[oe],a,"".concat(T&&T+".").concat(l,"[").concat(Y,"]"))})})}}]),t}();function mx(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}var Lm=function(y,l,m){return new Promise(function(a,T){var R=function(me){try{Y(m.next(me))}catch(Ce){T(Ce)}},U=function(me){try{Y(m.throw(me))}catch(Ce){T(Ce)}},Y=function(me){return me.done?a(me.value):Promise.resolve(me.value).then(R,U)};Y((m=m.apply(y,l)).next())})},Wg=n.N.isUndefined,yx=function(){function t(){var y=this;Object(g.a)(this,t),this.uniformBuffers=[],this.queryVerdorInfo=function(){return y.device.queryVendorInfo().platformString},this.createModel=function(l){return new gx(y.device,l,y)},this.createAttribute=function(l){return new Vb(y.device,l)},this.createBuffer=function(l){return new Jb(y.device,l)},this.createElements=function(l){return new sx(y.device,l)},this.createTexture2D=function(l){return new ry(y.device,l)},this.createFramebuffer=function(l){return new ny(y.device,l)},this.useFramebuffer=function(l,m){y.currentFramebuffer=l,y.beginFrame(),m(),y.endFrame(),y.currentFramebuffer=null},this.useFramebufferAsync=function(l,m){return Lm(y,null,Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return this.currentFramebuffer=l,this.preRenderPass=this.renderPass,this.beginFrame(),R.next=5,m();case 5:this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass;case 8:case"end":return R.stop()}},a,this)}))},this.clear=function(l){var m=l.color,a=l.depth,T=l.stencil,R=l.framebuffer,U=R===void 0?null:R;if(U)U.clearOptions={color:m,depth:a,stencil:T};else{var Y=y.queryVerdorInfo();if(Y==="WebGL1"){var oe=y.getGLContext();Wg(T)?Wg(a)||(oe.clearDepth(a),oe.clear(oe.DEPTH_BUFFER_BIT)):(oe.clearStencil(T),oe.clear(oe.STENCIL_BUFFER_BIT))}else if(Y==="WebGL2"){var me=y.getGLContext();Wg(T)?Wg(a)||me.clearBufferfv(me.DEPTH,0,[a]):me.clearBufferiv(me.STENCIL,0,[T])}}},this.viewport=function(l){var m=l.width,a=l.height;y.swapChain.configureSwapChain(m,a),y.createMainColorDepthRT(m,a),y.width=m,y.height=a},this.readPixels=function(l){var m=l.framebuffer,a=l.x,T=l.y,R=l.width,U=l.height,Y=y.device.createReadback(),oe=m.colorTexture,me=Y.readTextureSync(oe,a,y.viewportOrigin===uh.LOWER_LEFT?T:y.height-T,R,U,new Uint8Array(R*U*4));if(y.viewportOrigin!==uh.LOWER_LEFT)for(var Ce=0;Ce<me.length;Ce+=4){var Ve=me[Ce];me[Ce]=me[Ce+2],me[Ce+2]=Ve}return Y.destroy(),me},this.readPixelsAsync=function(l){return Lm(y,null,Object(K.a)().mark(function m(){var a,T,R,U,Y,oe,me,Ce,Ve,ut;return Object(K.a)().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return a=l.framebuffer,T=l.x,R=l.y,U=l.width,Y=l.height,oe=this.device.createReadback(),me=a.colorTexture,Nt.next=5,oe.readTexture(me,T,this.viewportOrigin===uh.LOWER_LEFT?R:this.height-R,U,Y,new Uint8Array(U*Y*4));case 5:if(Ce=Nt.sent,this.viewportOrigin!==uh.LOWER_LEFT)for(Ve=0;Ve<Ce.length;Ve+=4)ut=Ce[Ve],Ce[Ve]=Ce[Ve+2],Ce[Ve+2]=ut;return oe.destroy(),Nt.abrupt("return",Ce);case 9:case"end":return Nt.stop()}},m,this)}))},this.getViewportSize=function(){return{width:y.width,height:y.height}},this.getContainer=function(){var l;return(l=y.canvas)==null?void 0:l.parentElement},this.getCanvas=function(){return y.canvas},this.getGLContext=function(){return y.device.gl},this.destroy=function(){var l;y.canvas=null,(l=y.uniformBuffers)==null||l.forEach(function(m){m.destroy()}),y.device.destroy(),y.renderCache.destroy()}}return Object(v.a)(t,[{key:"init",value:function(l,m){return Lm(this,null,Object(K.a)().mark(function a(){var T,R,U,Y,oe,me;return Object(K.a)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return T=m.enableWebGPU,R=m.shaderCompilerPath,U=m.antialias,this.canvas=l,Y=T?new wb({shaderCompilerPath:R}):new V_({targets:["webgl2","webgl1"],antialias:U,onContextLost:function(Ft){console.warn("context lost",Ft)},onContextCreationError:function(Ft){console.warn("context creation error",Ft)},onContextRestored:function(Ft){console.warn("context restored",Ft)}}),Ve.next=5,Y.createSwapChain(l);case 5:oe=Ve.sent,oe.configureSwapChain(l.width,l.height),this.device=oe.getDevice(),this.swapChain=oe,this.renderCache=new ox(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin,me=this.device.gl,this.extensionObject={OES_texture_float:!mx(me)&&this.device.OES_texture_float},this.createMainColorDepthRT(l.width,l.height);case 15:case"end":return Ve.stop()}},a,this)}))}},{key:"createMainColorDepthRT",value:function(l,m){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Mn.U8_RGBA_RT,width:l,height:m,usage:Nc.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Mn.D24_S8,width:l,height:m,usage:Nc.RENDER_TARGET}))}},{key:"beginFrame",value:function(){this.device.beginFrame();var l=this.currentFramebuffer,m=this.swapChain,a=this.mainColorRT,T=this.mainDepthRT,R=l?l.colorRenderTarget:a,U=l?null:m.getOnscreenTexture(),Y=l?l.depthRenderTarget:T,oe=(l==null?void 0:l.clearOptions)||{},me=oe.color,Ce=me===void 0?[0,0,0,0]:me,Ve=oe.depth,ut=Ve===void 0?1:Ve,Ft=oe.stencil,Nt=Ft===void 0?0:Ft,vr=R?Tp(Ce[0]*255,Ce[1]*255,Ce[2]*255,Ce[3]):Sg,_r=Y?ut:void 0,Sr=Y?Nt:void 0,cn=this.device.createRenderPass({colorAttachment:[R],colorResolveTo:[U],colorClearColor:[vr],colorStore:[!0],depthStencilAttachment:Y,depthClearValue:_r,stencilClearValue:Sr});this.renderPass=cn}},{key:"endFrame",value:function(){this.device.submitPass(this.renderPass),this.device.endFrame()}},{key:"getPointSizeRange",value:function(){var l=this.device.gl;return l.getParameter(l.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(l){return!!this.getGLContext().getExtension(l)}},{key:"setState",value:function(){}},{key:"setBaseState",value:function(){}},{key:"setCustomLayerDefaults",value:function(){}},{key:"setDirty",value:function(l){this.isDirty=l}},{key:"getDirty",value:function(){return this.isDirty}}]),t}(),Dm=["selectstart","selecting","selectend"],_x=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(g.a)(this,l),a=y.call(this),a.isEnable=!1,a.onDragStart=function(R){a.box.style.display="block",a.startEvent=a.endEvent=R,a.syncBoxBound(),a.emit("selectstart",a.getLngLatBox(),a.startEvent,a.endEvent)},a.onDragging=function(R){a.endEvent=R,a.syncBoxBound(),a.emit("selecting",a.getLngLatBox(),a.startEvent,a.endEvent)},a.onDragEnd=function(R){a.endEvent=R,a.box.style.display="none",a.emit("selectend",a.getLngLatBox(),a.startEvent,a.endEvent)},a.scene=m,a.options=T,a}return Object(v.a)(l,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var a=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var T=n.a.create("div",void 0,this.container);T.classList.add("l7-select-box"),a&&T.classList.add(a),T.style.display="none",this.box=T}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){!this.isEnable||(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var a=this.startEvent,T=a.x,R=a.y,U=this.endEvent,Y=U.x,oe=U.y,me=Math.min(T,Y),Ce=Math.min(R,oe),Ve=Math.abs(T-Y),ut=Math.abs(R-oe);this.box.style.top="".concat(Ce,"px"),this.box.style.left="".concat(me,"px"),this.box.style.width="".concat(Ve,"px"),this.box.style.height="".concat(ut,"px")}},{key:"getLngLatBox",value:function(){var a=this.startEvent.lngLat,T=a.lng,R=a.lat,U=this.endEvent.lngLat,Y=U.lng,oe=U.lat;return Object(n.B)([[T,R],[Y,oe]])}}]),l}(s.EventEmitter),bx=Object.defineProperty,xx=Object.defineProperties,Ex=Object.getOwnPropertyDescriptors,sy=Object.getOwnPropertySymbols,Sx=Object.prototype.hasOwnProperty,Ax=Object.prototype.propertyIsEnumerable,uy=function(y,l,m){return l in y?bx(y,l,{enumerable:!0,configurable:!0,writable:!0,value:m}):y[l]=m},Ox=function(y,l){for(var m in l||(l={}))Sx.call(l,m)&&uy(y,m,l[m]);if(sy){var a=Object(Re.a)(sy(l)),T;try{for(a.s();!(T=a.n()).done;){var m=T.value;Ax.call(l,m)&&uy(y,m,l[m])}}catch(R){a.e(R)}finally{a.f()}}return y},Tx=function(y,l){return xx(y,Ex(l))},Bp=function(y,l,m){return new Promise(function(a,T){var R=function(me){try{Y(m.next(me))}catch(Ce){T(Ce)}},U=function(me){try{Y(m.throw(me))}catch(Ce){T(Ce)}},Y=function(me){return me.done?a(me.value):Promise.resolve(me.value).then(R,U)};Y((m=m.apply(y,l)).next())})},Kv=function(){function t(y){Object(g.a)(this,t);var l=y.id,m=y.map,a=y.renderer,T=a===void 0?"device":a,R=Object(S.r)();this.container=R,m.setContainer(R,l),T==="regl"?R.rendererService=new zb:R.rendererService=new yx,this.sceneService=R.sceneService,this.mapService=R.mapService,this.iconService=R.iconService,this.fontService=R.fontService,this.controlService=R.controlService,this.layerService=R.layerService,this.debugService=R.debugService,this.debugService.setEnable(y.debug),this.markerService=R.markerService,this.interactionService=R.interactionService,this.popupService=R.popupService,this.boxSelect=new _x(this,{}),this.initComponent(l),this.sceneService.init(y),this.initControl()}return Object(v.a)(t,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(l){return Bp(this,null,Object(K.a)().mark(function m(){return Object(K.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.sceneService.exportPng(l));case 1:case"end":return T.stop()}},m,this)}))}},{key:"exportMap",value:function(l){return Bp(this,null,Object(K.a)().mark(function m(){return Object(K.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.sceneService.exportPng(l));case 1:case"end":return T.stop()}},m,this)}))}},{key:"registerRenderService",value:function(l){var m=this;if(this.sceneService.loaded){var a=new l(this);a.init()}else this.on("loaded",function(){var T=new l(m);T.init()})}},{key:"setBgColor",value:function(l){this.mapService.setBgColor(l)}},{key:"addLayer",value:function(l){var m=this;this.loaded?this.preAddLayer(l):this.once("loaded",function(){m.preAddLayer(l)})}},{key:"preAddLayer",value:function(l){var m=this,a=Object(S.q)(this.container);if(l.setContainer(a),this.sceneService.addLayer(l),l.inited){this.initTileLayer(l);var T=this.initMask(l);this.addMask(T,l.id)}else l.on("inited",function(){m.initTileLayer(l);var R=m.initMask(l);m.addMask(R,l.id)})}},{key:"initMask",value:function(l){var m=l.getLayerConfig(),a=m.mask,T=m.maskfence,R=m.maskColor,U=R===void 0?"#000":R,Y=m.maskOpacity,oe=Y===void 0?0:Y;if(!(!a||!T)){var me=new vd().source(T).shape("fill").style({color:U,opacity:oe});return me}}},{key:"addMask",value:function(l,m){if(!!l){var a=this.getLayer(m);if(a){var T=Object(S.q)(this.container);l.setContainer(T),a.addMaskLayer(l),this.sceneService.addMask(l)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(l){return this.layerService.getLayer(l)}},{key:"getLayerByName",value:function(l){return this.layerService.getLayerByName(l)}},{key:"removeLayer",value:function(l,m){return Bp(this,null,Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.layerService.remove(l,m);case 2:case"end":return R.stop()}},a,this)}))}},{key:"removeAllLayer",value:function(){return Bp(this,null,Object(K.a)().mark(function l(){return Object(K.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.layerService.removeAllLayers();case 2:case"end":return a.stop()}},l,this)}))}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(l){this.layerService.setEnableRender(l)}},{key:"addIconFont",value:function(l,m){this.fontService.addIconFont(l,m)}},{key:"addIconFonts",value:function(l){var m=this;l.forEach(function(a){var T=Object(w.a)(a,2),R=T[0],U=T[1];m.fontService.addIconFont(R,U)})}},{key:"addFontFace",value:function(l,m){var a=this;this.fontService.once("fontloaded",function(T){a.emit("fontloaded",T)}),this.fontService.addFontFace(l,m)}},{key:"addImage",value:function(l,m){return Bp(this,null,Object(K.a)().mark(function a(){return Object(K.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.iconService.addImage(l,m);case 2:case"end":return R.stop()}},a,this)}))}},{key:"hasImage",value:function(l){return this.iconService.hasImage(l)}},{key:"removeImage",value:function(l){this.iconService.removeImage(l)}},{key:"addIconFontGlyphs",value:function(l,m){this.fontService.addIconGlyphs(m)}},{key:"addControl",value:function(l){this.controlService.addControl(l,this.container)}},{key:"removeControl",value:function(l){this.controlService.removeControl(l)}},{key:"getControlByName",value:function(l){return this.controlService.getControlByName(l)}},{key:"addMarker",value:function(l){this.markerService.addMarker(l)}},{key:"addMarkerLayer",value:function(l){this.markerService.addMarkerLayer(l)}},{key:"removeMarkerLayer",value:function(l){this.markerService.removeMarkerLayer(l)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(l){this.popupService.addPopup(l)}},{key:"removePopup",value:function(l){this.popupService.removePopup(l)}},{key:"on",value:function(l,m){var a;Dm.includes(l)?(a=this.boxSelect)==null||a.on(l,m):S.m.includes(l)?this.sceneService.on(l,m):this.mapService.on(l,m)}},{key:"once",value:function(l,m){var a;Dm.includes(l)?(a=this.boxSelect)==null||a.once(l,m):S.m.includes(l)?this.sceneService.once(l,m):this.mapService.once(l,m)}},{key:"emit",value:function(l,m){S.m.indexOf(l)===-1?this.mapService.on(l,m):this.sceneService.emit(l,m)}},{key:"off",value:function(l,m){var a;Dm.includes(l)?(a=this.boxSelect)==null||a.off(l,m):S.m.includes(l)?this.sceneService.off(l,m):this.mapService.off(l,m)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(l){return this.mapService.getCenter(l)}},{key:"setCenter",value:function(l,m){return this.mapService.setCenter(l,m)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(l){return this.mapService.setPitch(l)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(l){this.mapService.setRotation(l)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(l){this.mapService.panTo(l)}},{key:"panBy",value:function(l,m){this.mapService.panBy(l,m)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(l){this.mapService.setZoom(l)}},{key:"fitBounds",value:function(l,m){var a=this.sceneService.getSceneConfig(),T=a.fitBoundsOptions,R=a.animate;this.mapService.fitBounds(l,m||Tx(Ox({},T),{animate:R}))}},{key:"setZoomAndCenter",value:function(l,m){this.mapService.setZoomAndCenter(l,m)}},{key:"setMapStyle",value:function(l){this.mapService.setMapStyle(l)}},{key:"setMapStatus",value:function(l){this.mapService.setMapStatus(l)}},{key:"pixelToLngLat",value:function(l){return this.mapService.pixelToLngLat(l)}},{key:"lngLatToPixel",value:function(l){return this.mapService.lngLatToPixel(l)}},{key:"containerToLngLat",value:function(l){return this.mapService.containerToLngLat(l)}},{key:"lngLatToContainer",value:function(l){return this.mapService.lngLatToContainer(l)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(l){this.container.postProcessingPass.name=new l}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var l=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),m&&this.boxSelect.once("selectend",function(){l.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getProtocol",value:function(l){return n.d.REGISTERED_PROTOCOLS[l]}},{key:"startAnimate",value:function(){this.layerService.startAnimate()}},{key:"stopAnimate",value:function(){this.layerService.stopAnimate()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(l){this.controlService.init({container:n.a.getContainer(l)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var l=this.sceneService.getSceneConfig(),m=l.logoVisible,a=l.logoPosition;m&&this.addControl(new Ae({position:a}))}},{key:"initTileLayer",value:function(l){l.getSource().isTile&&(l.tileLayer=new Iv(l))}}],[{key:"addProtocol",value:function(l,m){n.d.REGISTERED_PROTOCOLS[l]=m}},{key:"removeProtocol",value:function(l){delete n.d.REGISTERED_PROTOCOLS[l]}}]),t}(),XA="2.22.1",jm=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"configService",void 0),Object(r.a)(this,"config",void 0),this.config=y}return Object(v.a)(t,[{key:"setContainer",value:function(l,m){this.configService=l.globalConfigService,l.mapConfig=Object(i.a)(Object(i.a)({},this.config),{},{id:m}),l.mapService=new(this.getServiceConstructor())(l)}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),t}(),ly=Ee("xdlL"),Mx=Ee("hi0z"),Cx=Ee.n(Mx),cy=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"size",1e4),this.size=y||1e4}return Object(v.a)(t,[{key:"setSize",value:function(l){this.size=l}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(l){return(180+l)/360*this.size}},{key:"mercatorYfromLat",value:function(l){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(l){return l/this.size*360-180}},{key:"latFromMercatorY",value:function(l){var m=180-(1-l/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(m*Math.PI/180))-90}},{key:"project",value:function(l){var m=this.mercatorXfromLng(l[0]),a=this.mercatorYfromLat(l[1]);return[m,a]}},{key:"unproject",value:function(l){var m=this.lngFromMercatorX(l[0]),a=this.latFromMercatorY(l[1]);return[m,a]}}]),t}(),Px=12,Rx=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"map",void 0),Object(r.a)(this,"simpleMapCoord",new cy),Object(r.a)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Object(r.a)(this,"config",void 0),Object(r.a)(this,"configService",void 0),Object(r.a)(this,"coordinateSystemService",void 0),Object(r.a)(this,"eventEmitter",void 0),Object(r.a)(this,"markerContainer",void 0),Object(r.a)(this,"mapContainer",void 0),Object(r.a)(this,"cameraChangedCallback",void 0),this.config=y.mapConfig,this.configService=y.globalConfigService,this.coordinateSystemService=y.coordinateSystemService,this.eventEmitter=new s.EventEmitter}return Object(v.a)(t,[{key:"onCameraChanged",value:function(l){this.cameraChangedCallback=l}},{key:"updateView",value:function(l){var m;this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:l.bearing,center:l.center,viewportHeight:l.viewportHeight,pitch:l.pitch,viewportWidth:l.viewportWidth,zoom:l.zoom}),this.updateCoordinateSystemService(),(m=this.cameraChangedCallback)===null||m===void 0||m.call(this,this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var l=this.config.offsetCoordinate,m=l===void 0?!0:l;this.viewport.getZoom()>Px&&m?this.coordinateSystemService.setCoordinateSystem(S.d.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(S.d.LNGLAT)}},{key:"creatMapContainer",value:function(l){var m;return typeof l=="string"?m=document.getElementById(l):m=l,m}},{key:"getMapStyleValue",value:function(l){var m;return(m=this.getMapStyleConfig()[l])!==null&&m!==void 0?m:l}},{key:"setBgColor",value:function(l){this.bgColor=l}},{key:"getMapContainer",value:function(){return this.mapContainer}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"getCanvasOverlays",value:function(){}},{key:"emit",value:function(l){for(var m,a=arguments.length,T=new Array(a>1?a-1:0),R=1;R<a;R++)T[R-1]=arguments[R];(m=this.eventEmitter).emit.apply(m,[l].concat(T))}},{key:"once",value:function(l,m){this.eventEmitter.once(l,m)}},{key:"meterToCoord",value:function(l,m){return 1}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners()}}]),t}(),fy=Ee("1OyB"),hy=Ee("vuIU"),Ix=Ee("md7G"),Lx=Ee("foSv"),Dx=Ee("Ji7U"),Hg=Ee("JX7q"),pf=Ee("ODXe"),dy=Ee("bl9R");function Fp(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Gg(t,y){var l=dy.transformMat4([],y,t);return dy.scale(l,l,1/l[3]),l}function YA(t,y){var l=t%y;return l<0?y+l:l}function $A(t,y,l){return l*y+(1-l)*t}var nf=Ee("ZaHm"),Xg=Ee("ZxFD"),jx=Ee("n+fv");function Od(t,y){if(!t)throw new Error(y||"viewport-mercator-project: assertion failed.")}var ch=Math.PI,vy=ch/4,$h=ch/180,py=180/ch,Bm=512,Fm=4003e4,Bx=1.5;function gy(t){return Math.pow(2,t)}function Fx(t){return Math.log2(t)}function Yg(t,y){var l=Object(pf.a)(t,2),m=l[0],a=l[1];Od(Number.isFinite(m)&&Number.isFinite(y)),Od(Number.isFinite(a)&&a>=-90&&a<=90,"invalid latitude"),y*=Bm;var T=m*$h,R=a*$h,U=y*(T+ch)/(2*ch),Y=y*(ch-Math.log(Math.tan(vy+R*.5)))/(2*ch);return[U,Y]}function Nm(t,y){var l=Object(pf.a)(t,2),m=l[0],a=l[1];y*=Bm;var T=m/y*(2*ch)-ch,R=2*(Math.atan(Math.exp(ch-a/y*(2*ch)))-vy);return[T*py,R*py]}function ZA(t){var y=t.latitude;Od(Number.isFinite(y));var l=Math.cos(y*$h);return Fx(Fm*l)-9}function yy(t){var y=t.latitude,l=t.longitude,m=t.zoom,a=t.scale,T=t.highPrecision,R=T===void 0?!1:T;a=a!==void 0?a:gy(m),Od(Number.isFinite(y)&&Number.isFinite(l)&&Number.isFinite(a));var U={},Y=Bm*a,oe=Math.cos(y*$h),me=Y/360,Ce=me/oe,Ve=Y/Fm/oe;if(U.pixelsPerMeter=[Ve,-Ve,Ve],U.metersPerPixel=[1/Ve,-1/Ve,1/Ve],U.pixelsPerDegree=[me,-Ce,Ve],U.degreesPerPixel=[1/me,-1/Ce,1/Ve],R){var ut=$h*Math.tan(y*$h)/oe,Ft=me*ut/2,Nt=Y/Fm*ut,vr=Nt/Ce*Ve;U.pixelsPerDegree2=[0,-Ft,Nt],U.pixelsPerMeter2=[vr,0,vr]}return U}function KA(t,y){var l=Object(pf.a)(t,3),m=l[0],a=l[1],T=l[2],R=Object(pf.a)(y,3),U=R[0],Y=R[1],oe=R[2],me=1,Ce=yy({longitude:m,latitude:a,scale:me,highPrecision:!0}),Ve=Ce.pixelsPerMeter,ut=Ce.pixelsPerMeter2,Ft=Yg(t,me);Ft[0]+=U*(Ve[0]+ut[0]*Y),Ft[1]+=Y*(Ve[1]+ut[1]*Y);var Nt=Nm(Ft,me),vr=(T||0)+(oe||0);return Number.isFinite(T)||Number.isFinite(oe)?[Nt[0],Nt[1],vr]:Nt}function Nx(t){var y=t.height,l=t.pitch,m=t.bearing,a=t.altitude,T=t.center,R=T===void 0?null:T,U=t.flipY,Y=U===void 0?!1:U,oe=Fp();return nf.translate(oe,oe,[0,0,-a]),nf.scale(oe,oe,[1,1,1/y]),nf.rotateX(oe,oe,-l*$h),nf.rotateZ(oe,oe,m*$h),Y&&nf.scale(oe,oe,[1,-1,1]),R&&nf.translate(oe,oe,jx.negate([],R)),oe}function Ux(t){var y=t.width,l=t.height,m=t.altitude,a=m===void 0?Bx:m,T=t.pitch,R=T===void 0?0:T,U=t.nearZMultiplier,Y=U===void 0?1:U,oe=t.farZMultiplier,me=oe===void 0?1:oe,Ce=R*$h,Ve=Math.atan(.5/a),ut=Math.sin(Ve)*a/Math.sin(Math.PI/2-Ce-Ve),Ft=Math.cos(Math.PI/2-Ce)*ut+a;return{fov:2*Math.atan(l/2/a),aspect:y/l,focalDistance:a,near:Y,far:Ft*me}}function kx(t){var y=t.width,l=t.height,m=t.pitch,a=t.altitude,T=t.nearZMultiplier,R=t.farZMultiplier,U=Ux({width:y,height:l,altitude:a,pitch:m,nearZMultiplier:T,farZMultiplier:R}),Y=U.fov,oe=U.aspect,me=U.near,Ce=U.far,Ve=nf.perspective([],Y,oe,me,Ce);return Ve}function zx(t,y){var l=Object(pf.a)(t,3),m=l[0],a=l[1],T=l[2],R=T===void 0?0:T;return Od(Number.isFinite(m)&&Number.isFinite(a)&&Number.isFinite(R)),Gg(y,[m,a,R,1])}function _y(t,y){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,m=Object(pf.a)(t,3),a=m[0],T=m[1],R=m[2];if(Od(Number.isFinite(a)&&Number.isFinite(T),"invalid pixel coordinate"),Number.isFinite(R)){var U=Gg(y,[a,T,R,1]);return U}var Y=Gg(y,[a,T,0,1]),oe=Gg(y,[a,T,1,1]),me=Y[2],Ce=oe[2],Ve=me===Ce?0:((l||0)-me)/(Ce-me);return Xg.lerp([],Y,oe,Ve)}var by=Fp(),Vx=function(){function t(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=y.width,m=y.height,a=y.viewMatrix,T=a===void 0?by:a,R=y.projectionMatrix,U=R===void 0?by:R;Object(fy.a)(this,t),this.width=l||1,this.height=m||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=T,this.projectionMatrix=U;var Y=Fp();nf.multiply(Y,Y,this.projectionMatrix),nf.multiply(Y,Y,this.viewMatrix),this.viewProjectionMatrix=Y;var oe=Fp();nf.scale(oe,oe,[this.width/2,-this.height/2,1]),nf.translate(oe,oe,[1,-1,0]),nf.multiply(oe,oe,this.viewProjectionMatrix);var me=nf.invert(Fp(),oe);if(!me)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=oe,this.pixelUnprojectionMatrix=me,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(hy.a)(t,[{key:"equals",value:function(l){return l instanceof t?l.width===this.width&&l.height===this.height&&nf.equals(l.projectionMatrix,this.projectionMatrix)&&nf.equals(l.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=m.topLeft,T=a===void 0?!0:a,R=this.projectPosition(l),U=zx(R,this.pixelProjectionMatrix),Y=Object(pf.a)(U,2),oe=Y[0],me=Y[1],Ce=T?me:this.height-me;return l.length===2?[oe,Ce]:[oe,Ce,U[2]]}},{key:"unproject",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=m.topLeft,T=a===void 0?!0:a,R=m.targetZ,U=Object(pf.a)(l,3),Y=U[0],oe=U[1],me=U[2],Ce=T?oe:this.height-oe,Ve=R&&R*this.pixelsPerMeter,ut=_y([Y,Ce,me],this.pixelUnprojectionMatrix,Ve),Ft=this.unprojectPosition(ut),Nt=Object(pf.a)(Ft,3),vr=Nt[0],_r=Nt[1],Sr=Nt[2];return Number.isFinite(me)?[vr,_r,Sr]:Number.isFinite(R)?[vr,_r,R]:[vr,_r]}},{key:"projectPosition",value:function(l){var m=this.projectFlat(l),a=Object(pf.a)(m,2),T=a[0],R=a[1],U=(l[2]||0)*this.pixelsPerMeter;return[T,R,U]}},{key:"unprojectPosition",value:function(l){var m=this.unprojectFlat(l),a=Object(pf.a)(m,2),T=a[0],R=a[1],U=(l[2]||0)/this.pixelsPerMeter;return[T,R,U]}},{key:"projectFlat",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return l}},{key:"unprojectFlat",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return l}}]),t}();function Wx(t){var y=t.width,l=t.height,m=t.bounds,a=t.minExtent,T=a===void 0?0:a,R=t.maxZoom,U=R===void 0?24:R,Y=t.padding,oe=Y===void 0?0:Y,me=t.offset,Ce=me===void 0?[0,0]:me,Ve=Object(pf.a)(m,2),ut=Object(pf.a)(Ve[0],2),Ft=ut[0],Nt=ut[1],vr=Object(pf.a)(Ve[1],2),_r=vr[0],Sr=vr[1];if(Number.isFinite(oe)){var cn=oe;oe={top:cn,bottom:cn,left:cn,right:cn}}else Od(Number.isFinite(oe.top)&&Number.isFinite(oe.bottom)&&Number.isFinite(oe.left)&&Number.isFinite(oe.right));var Bn=new Um({width:y,height:l,longitude:0,latitude:0,zoom:0}),Kn=Bn.project([Ft,Sr]),wn=Bn.project([_r,Nt]),vn=[Math.max(Math.abs(wn[0]-Kn[0]),T),Math.max(Math.abs(wn[1]-Kn[1]),T)],ti=[y-oe.left-oe.right-Math.abs(Ce[0])*2,l-oe.top-oe.bottom-Math.abs(Ce[1])*2];Od(ti[0]>0&&ti[1]>0);var Mi=ti[0]/vn[0],Ki=ti[1]/vn[1],Ii=(oe.right-oe.left)/2/Mi,xa=(oe.bottom-oe.top)/2/Ki,La=[(wn[0]+Kn[0])/2+Ii,(wn[1]+Kn[1])/2+xa],Cs=Bn.unproject(La),wu=Bn.zoom+Math.log2(Math.abs(Math.min(Mi,Ki)));return{longitude:Cs[0],latitude:Cs[1],zoom:Math.min(wu,U)}}var Um=function(t){Object(Dx.a)(y,t);function y(){var l,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=m.width,T=m.height,R=m.latitude,U=R===void 0?0:R,Y=m.longitude,oe=Y===void 0?0:Y,me=m.zoom,Ce=me===void 0?0:me,Ve=m.pitch,ut=Ve===void 0?0:Ve,Ft=m.bearing,Nt=Ft===void 0?0:Ft,vr=m.altitude,_r=vr===void 0?1.5:vr,Sr=m.nearZMultiplier,cn=m.farZMultiplier;Object(fy.a)(this,y),a=a||1,T=T||1;var Bn=gy(Ce);_r=Math.max(.75,_r);var Kn=Yg([oe,U],Bn);Kn[2]=0;var wn=kx({width:a,height:T,pitch:ut,bearing:Nt,altitude:_r,nearZMultiplier:Sr||1/T,farZMultiplier:cn||1.01}),vn=Nx({height:T,center:Kn,pitch:ut,bearing:Nt,altitude:_r,flipY:!0});return l=Object(Ix.a)(this,Object(Lx.a)(y).call(this,{width:a,height:T,viewMatrix:vn,projectionMatrix:wn})),l.latitude=U,l.longitude=oe,l.zoom=Ce,l.pitch=ut,l.bearing=Nt,l.altitude=_r,l.scale=Bn,l.center=Kn,l.pixelsPerMeter=yy(Object(Hg.a)(Object(Hg.a)(l))).pixelsPerMeter[2],Object.freeze(Object(Hg.a)(Object(Hg.a)(l))),l}return Object(hy.a)(y,[{key:"projectFlat",value:function(m){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Yg(m,a)}},{key:"unprojectFlat",value:function(m){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Nm(m,a)}},{key:"getMapCenterByLngLatPosition",value:function(m){var a=m.lngLat,T=m.pos,R=_y(T,this.pixelUnprojectionMatrix),U=Yg(a,this.scale),Y=Xg.add([],U,Xg.negate([],R)),oe=Xg.add([],this.center,Y);return Nm(oe,this.scale)}},{key:"getLocationAtPoint",value:function(m){var a=m.lngLat,T=m.pos;return this.getMapCenterByLngLatPosition({lngLat:a,pos:T})}},{key:"fitBounds",value:function(m){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=this.width,R=this.height,U=Wx(Object.assign({width:T,height:R,bounds:m},a)),Y=U.longitude,oe=U.latitude,me=U.zoom;return new y({width:T,height:R,longitude:Y,latitude:oe,zoom:me})}}]),y}(Vx),km=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"viewport",new Um)}return Object(v.a)(t,[{key:"syncWithMapCamera",value:function(l){var m=l.center,a=l.zoom,T=l.pitch,R=l.bearing,U=l.viewportHeight,Y=l.viewportWidth,oe={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new Um(Object(i.a)(Object(i.a)({},oe),{},{width:Y,height:U,longitude:m&&m[0],latitude:m&&m[1],zoom:a,pitch:T,bearing:R}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(l,m){return this.viewport.projectFlat(l,m)}}]),t}(),xy=function(t){return t.GAODE="GAODE",t.MAPBOX="MAPBOX",t.DEFAULT="DEFAUlTMAP",t.SIMPLE="SIMPLE",t.GLOBEL="GLOBEL",t}({});function Ey(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y={top:0,right:0,bottom:0,left:0};if(typeof t=="number")return{top:t,right:t,bottom:t,left:t};if(Array.isArray(t)){if(t.length===4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]}}return Object(i.a)(Object(i.a)({},y),t)}var Hx={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},Gx=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function Xx(t,y){var l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(l||m)&&(y||(y=document),!!y)){var a=y.head||y.getElementsByTagName("head")[0];if(!a){a=y.createElement("head");var T=y.body||y.getElementsByTagName("body")[0];T?T.parentNode.insertBefore(a,T):y.documentElement.appendChild(a)}var R=y.createElement("style");return R.type="text/css",R.styleSheet?R.styleSheet.cssText=t:R.appendChild(y.createTextNode(t)),a.appendChild(R),R}}Xx(`.amap-logo {
  display: none !important;
}
.amap-copyright {
  display: none !important;
}
.amap-overlays {
  z-index: 3 !important;
}
`);var Yx="2.0",Sy="f59bcf249433f8b05caaee19f349b3d7",iv=1,Ay={contextmenu:"rightclick",camerachange:"viewchange"},$x=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"viewport",new km),Object(r.a)(Object(p.a)(m),"version",xy.GAODE),Object(r.a)(Object(p.a)(m),"handleCameraChanged",function(){var U=m.getViewState();m.updateView(U)}),m}return Object(v.a)(l,[{key:"getType",value:function(){return"amap"}},{key:"init",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut,Ft,Nt,vr,_r,Sr,cn,Bn,Kn;return Object(K.a)().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if(R=a.config,U=R.id,Y=R.style,oe=Y===void 0?"light":Y,me=R.minZoom,Ce=me===void 0?0:me,Ve=R.maxZoom,ut=Ve===void 0?24:Ve,Ft=R.token,Nt=Ft===void 0?Sy:Ft,vr=R.mapInstance,_r=R.plugin,Sr=_r===void 0?[]:_r,cn=Object(V.a)(R,Gx),window.AMap||vr){vn.next=5;break}return Sr.push("Map3D"),vn.next=5,Cx.a.load({key:Nt,version:Yx,plugins:Sr});case 5:if(!vr){vn.next=11;break}a.map=vr,a.mapContainer=a.map.getContainer(),a.map.on("viewchange",a.handleCameraChanged),vn.next=21;break;case 11:if(Bn=Object(i.a)({mapStyle:a.getMapStyleValue(oe),zooms:[Ce,ut],viewMode:"3D"},cn),Bn.zoom&&(Bn.zoom+=iv),Nt===Sy&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn("%c".concat(a.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;")),U){vn.next=16;break}throw Error("No container id specified");case 16:window.forceWebGL=!0,a.mapContainer=a.creatMapContainer(U),Kn=new AMap.Map(a.mapContainer,Bn),a.map=Kn,Kn.on("viewchange",a.handleCameraChanged);case 21:a.syncInitViewPort();case 22:case"end":return vn.stop()}},T)}))()}},{key:"syncInitViewPort",value:function(){var a=this.getViewState();this.updateView(a)}},{key:"getViewState",value:function(){var a=Zx(this.map),T=a.center,R=a.zoom,U={center:T,viewportWidth:this.map.getContainer().clientWidth,viewportHeight:this.map.getContainer().clientHeight,bearing:-this.map.getRotation(),pitch:this.map.getPitch(),zoom:R-iv};return U}},{key:"creatMapContainer",value:function(a){var T=Object(C.a)(Object(O.a)(l.prototype),"creatMapContainer",this).call(this,a),R=document.createElement("div");return R.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,R.id=n.N.uniqueId("l7_amap_div"),T.appendChild(R),R}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"addMarkerContainer",value:function(){if(!!this.map){var a=this.map.getContainer();if(a!==null){var T=a.getElementsByClassName("amap-maps")[0];T.style.zIndex="auto",this.markerContainer=n.a.create("div","l7-marker-container2",T)}}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getCanvasOverlays",value:function(){var a;return(a=this.mapContainer)===null||a===void 0?void 0:a.querySelector(".amap-overlays")}},{key:"on",value:function(a,T){S.h.indexOf(a)!==-1?this.eventEmitter.on(a,T):this.map.on(Ay[a]||a,T)}},{key:"off",value:function(a,T){S.h.indexOf(a)!==-1?this.eventEmitter.off(a,T):this.map.off(Ay[a]||a,T)}},{key:"getSize",value:function(){var a=this.map.getSize();return[a.getWidth(),a.getHeight()]}},{key:"getMinZoom",value:function(){var a=this.map.getZooms();return a[0]-iv}},{key:"getMaxZoom",value:function(){var a=this.map.getZooms();return a[1]-iv}},{key:"getZoom",value:function(){return this.map.getZoom()-iv}},{key:"getCenter",value:function(a){if(a!=null&&a.padding){var T=this.getCenter(),R=Ey(a.padding),U=this.lngLatToPixel([T.lng,T.lat]),Y=[(R.right-R.left)/2,(R.bottom-R.top)/2],oe=this.pixelToLngLat([U.x-Y[0],U.y-Y[1]]);return oe}var me=this.map.getCenter();return{lng:me.getLng(),lat:me.getLat()}}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var a=this.map.getBounds(),T=a.getNorthEast(),R=a.getSouthWest(),U=this.getCenter(),Y=U.lng>T.getLng()||U.lng<R.getLng()?180-T.getLng():T.getLng(),oe=U.lng<R.getLng()?R.getLng()-180:R.getLng();return[[oe,R.getLat()],[Y,T.getLat()]]}},{key:"getMapContainer",value:function(){return this.mapContainer}},{key:"getMapCanvasContainer",value:function(){var a;return(a=this.map.getContainer())===null||a===void 0?void 0:a.getElementsByClassName("amap-maps")[0]}},{key:"getMapStyleConfig",value:function(){return Hx}},{key:"getMapStyleValue",value:function(a){return this.getMapStyleConfig()[a]||a}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"setMapStyle",value:function(a){this.map.setMapStyle(this.getMapStyleValue(a))}},{key:"setRotation",value:function(a){return this.map.setRotation(a)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(a){this.map.panTo(a)}},{key:"panBy",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(a,T)}},{key:"fitBounds",value:function(a){this.map.setBounds(new AMap.Bounds([a[0][0],a[0][1],a[1][0],a[1][1]]),!0)}},{key:"setZoomAndCenter",value:function(a,T){this.map.setZoomAndCenter(a+iv,T)}},{key:"setCenter",value:function(a,T){if(T!=null&&T.padding){var R=Ey(T.padding),U=this.lngLatToPixel(a),Y=[(R.right-R.left)/2,(R.bottom-R.top)/2],oe=this.pixelToLngLat([U.x+Y[0],U.y+Y[1]]);this.map.setCenter([oe.lng,oe.lat])}else this.map.setCenter(a)}},{key:"setPitch",value:function(a){return this.map.setPitch(a)}},{key:"setZoom",value:function(a){return this.map.setZoom(a+iv)}},{key:"setMaxZoom",value:function(a){throw new Error("Method not implemented.")}},{key:"setMinZoom",value:function(a){throw new Error("Method not implemented.")}},{key:"setMapStatus",value:function(a){this.map.setStatus(a)}},{key:"meterToCoord",value:function(a,T){var R=AMap.GeometryUtil.distance(Object(ly.a)(AMap.LngLat,Object(J.a)(a)),Object(ly.a)(AMap.LngLat,Object(J.a)(T))),U=n.g.apply(void 0,Object(J.a)(a)),Y=Object(w.a)(U,2),oe=Y[0],me=Y[1],Ce=n.g.apply(void 0,Object(J.a)(T)),Ve=Object(w.a)(Ce,2),ut=Ve[0],Ft=Ve[1],Nt=Math.sqrt(Math.pow(oe-ut,2)+Math.pow(me-Ft,2));return Nt/R}},{key:"pixelToLngLat",value:function(a){var T=this.map.pixelToLngLat(new AMap.Pixel(a[0],a[1]));return{lng:T.getLng(),lat:T.getLat()}}},{key:"lngLatToPixel",value:function(a){var T=this.map.lnglatToPixel(a);return{x:T.getX(),y:T.getY()}}},{key:"containerToLngLat",value:function(a){var T=new AMap.Pixel(a[0],a[1]),R=this.map.containerToLngLat(T);return{lng:R==null?void 0:R.getLng(),lat:R==null?void 0:R.getLat()}}},{key:"lngLatToContainer",value:function(a){var T=this.map.lngLatToContainer(a);return{x:T.getX(),y:T.getY()}}},{key:"lngLatToMercator",value:function(a,T){var R=Object(w.a)(a,2),U=R[0],Y=R[1],oe=Object(n.g)(U,Y),me=Object(w.a)(oe,2),Ce=me[0],Ve=me[1];return{x:Ce,y:Ve,z:T}}},{key:"getModelMatrix",value:function(a,T,R){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],Y=this.viewport.projectFlat(a),oe=ei.b.create();return ei.b.translate(oe,oe,ei.d.fromValues(Y[0],Y[1],T)),ei.b.scale(oe,oe,ei.d.fromValues(U[0],U[1],U[2])),ei.b.rotateX(oe,oe,R[0]),ei.b.rotateY(oe,oe,R[1]),ei.b.rotateZ(oe,oe,R[2]),oe}},{key:"exportMap",value:function(a){var T,R=(T=this.getContainer())===null||T===void 0?void 0:T.getElementsByClassName("amap-layer")[0],U=a==="jpg"?R==null?void 0:R.toDataURL("image/jpeg"):R==null?void 0:R.toDataURL("image/png");return U}},{key:"destroy",value:function(){var a;Object(C.a)(Object(O.a)(l.prototype),"destroy",this).call(this),(a=this.mapContainer)===null||a===void 0||(a=a.parentNode)===null||a===void 0||a.removeChild(this.mapContainer),delete window.initAMap;var T=document.getElementById("amap-script");T&&document.head.removeChild(T),this.map.destroy()}}]),l}(Rx);function Zx(t){var y=t._view.getOptions(),l=y.center,m=y.zoom;return{center:l,zoom:m}}var zm=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"getServiceConstructor",value:function(){return $x}}]),l}(jm),Kx=zm,Jx=zm,Qx=zm;function Np(t){return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},Np(t)}function Oy(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function Ty(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?Oy(Object(l),!0).forEach(function(m){qx(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):Oy(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function qx(t,y,l){return y=e2(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function e2(t){var y=t2(t,"string");return Np(y)==="symbol"?y:String(y)}function t2(t,y){if(Np(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(Np(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function r2(t,y){return o2(t)||a2(t,y)||i2(t,y)||n2()}function n2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i2(t,y){if(!!t){if(typeof t=="string")return My(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return My(t,y)}}function My(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function a2(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function o2(t){if(Array.isArray(t))return t}var s2=B.a.memo(function(t){var y=t.style,l=t.className,m=t.map,a=t.option,T=t.onSceneLoaded,R=t.children,U=Object(he.useRef)(null),Y=Object(he.useState)(),oe=r2(Y,2),me=oe[0],Ce=oe[1];return Object(he.useEffect)(function(){var Ve=new Kv(Ty(Ty({id:U.current},a),{},{map:new Kx(m)}));return Ve.on("loaded",function(){Ce(Ve),T&&T(Ve)}),function(){Ve.destroy()}},[]),Object(he.useEffect)(function(){me&&m.style&&me.setMapStyle(m.style)},[JSON.stringify(m.style)]),Object(he.useEffect)(function(){me&&m.zoom&&me.setZoom(m.zoom)},[m.zoom]),Object(he.useEffect)(function(){me&&m.center&&me.setCenter(m.center)},[JSON.stringify(m.center)]),Object(he.useEffect)(function(){me&&m.pitch&&me.setPitch(m.pitch)},[m.pitch]),Object(he.useEffect)(function(){me&&m.rotation&&me.setRotation(m.rotation)},[m.rotation]),B.a.createElement(L.Provider,{value:me},B.a.createElement("div",{ref:U,className:l,style:y},me&&R))}),JA=s2,u2=Ee("4ZJM"),Up=Ee.n(u2),l2={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Cy={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},c2=12,Py=function(){function t(y){var l=this;Object(g.a)(this,t),Object(r.a)(this,"version","DEFAUlTMAP"),Object(r.a)(this,"map",void 0),Object(r.a)(this,"simpleMapCoord",new cy),Object(r.a)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Object(r.a)(this,"config",void 0),Object(r.a)(this,"configService",void 0),Object(r.a)(this,"coordinateSystemService",void 0),Object(r.a)(this,"eventEmitter",void 0),Object(r.a)(this,"markerContainer",void 0),Object(r.a)(this,"cameraChangedCallback",void 0),Object(r.a)(this,"$mapContainer",void 0),Object(r.a)(this,"handleCameraChanged",function(m){var a=l.map.getCenter(),T=a.lat,R=a.lng;l.emit("mapchange"),l.viewport.syncWithMapCamera({bearing:l.map.getBearing(),center:[R,T],viewportHeight:l.map.transform.height,pitch:l.map.getPitch(),viewportWidth:l.map.transform.width,zoom:l.map.getZoom(),cameraHeight:0}),l.updateCoordinateSystemService(),l.cameraChangedCallback(l.viewport)}),this.config=y.mapConfig,this.configService=y.globalConfigService,this.coordinateSystemService=y.coordinateSystemService,this.eventEmitter=new s.EventEmitter}return Object(v.a)(t,[{key:"setBgColor",value:function(l){this.bgColor=l}},{key:"addMarkerContainer",value:function(){var l=this.map.getCanvasContainer();this.markerContainer=n.a.create("div","l7-marker-container",l),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"getCanvasOverlays",value:function(){}},{key:"on",value:function(l,m){S.h.indexOf(l)!==-1?this.eventEmitter.on(l,m):this.map.on(Cy[l]||l,m)}},{key:"off",value:function(l,m){this.map.off(Cy[l]||l,m),this.eventEmitter.off(l,m)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();var l=this.map.transform;return[l.width,l.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(l){return this.map.setZoom(l)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(l){this.map.setCenter(l)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(l){this.map.setBearing(l)}},{key:"zoomIn",value:function(l,m){this.map.zoomIn(l,m)}},{key:"zoomOut",value:function(l,m){this.map.zoomOut(l,m)}},{key:"setPitch",value:function(l){return this.map.setPitch(l)}},{key:"panTo",value:function(l){this.map.panTo(l)}},{key:"panBy",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy([l,m])}},{key:"fitBounds",value:function(l,m){this.map.fitBounds(l,m)}},{key:"setMaxZoom",value:function(l){this.map.setMaxZoom(l)}},{key:"setMinZoom",value:function(l){this.map.setMinZoom(l)}},{key:"setMapStatus",value:function(l){l.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),l.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),l.dragEnable===!1&&this.map.dragPan.disable(),l.dragEnable===!0&&this.map.dragPan.enable(),l.rotateEnable===!1&&this.map.dragRotate.disable(),l.dragEnable===!0&&this.map.dragRotate.enable(),l.keyboardEnable===!1&&this.map.keyboard.disable(),l.keyboardEnable===!0&&this.map.keyboard.enable(),l.zoomEnable===!1&&this.map.scrollZoom.disable(),l.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(l,m){this.map.flyTo({zoom:l,center:m})}},{key:"setMapStyle",value:function(l){var m;(m=this.map)===null||m===void 0||m.setStyle(this.getMapStyleValue(l))}},{key:"meterToCoord",value:function(l,m){return 1}},{key:"pixelToLngLat",value:function(l){return this.map.unproject(l)}},{key:"lngLatToPixel",value:function(l){return this.map.project(l)}},{key:"containerToLngLat",value:function(l){return this.map.unproject(l)}},{key:"lngLatToContainer",value:function(l){return this.map.project(l)}},{key:"getMapStyle",value:function(){try{var l,m=(l=this.map.getStyle().sprite)!==null&&l!==void 0?l:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(m)?m==null?void 0:m.replace(/\/\w+$/,"").replace(/sprites/,"styles"):m}catch(a){return""}}},{key:"getMapStyleConfig",value:function(){return l2}},{key:"getMapStyleValue",value:function(l){var m;return(m=this.getMapStyleConfig()[l])!==null&&m!==void 0?m:l}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(l){for(var m,a=arguments.length,T=new Array(a>1?a-1:0),R=1;R<a;R++)T[R-1]=arguments[R];(m=this.eventEmitter).emit.apply(m,[l].concat(T))}},{key:"once",value:function(l){for(var m,a=arguments.length,T=new Array(a>1?a-1:0),R=1;R<a;R++)T[R-1]=arguments[R];(m=this.eventEmitter).once.apply(m,[l].concat(T))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(l){var m,a=(m=this.map)===null||m===void 0?void 0:m.getCanvas(),T=l==="jpg"?a==null?void 0:a.toDataURL("image/jpeg"):a==null?void 0:a.toDataURL("image/png");return T}},{key:"onCameraChanged",value:function(l){this.cameraChangedCallback=l}},{key:"creatMapContainer",value:function(l){var m=l;return typeof l=="string"&&(m=document.getElementById(l)),m}},{key:"updateView",value:function(l){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:l.bearing,center:l.center,viewportHeight:l.viewportHeight,pitch:l.pitch,viewportWidth:l.viewportWidth,zoom:l.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var l=this.config.offsetCoordinate,m=l===void 0?!0:l;this.viewport.getZoom()>c2&&m?this.coordinateSystemService.setCoordinateSystem(S.d.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(S.d.LNGLAT)}}]),t}(),f2=["id","attributionControl","style","token","rotation","mapInstance"];function h2(t,y){var l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(l||m)&&(y||(y=document),!!y)){var a=y.head||y.getElementsByTagName("head")[0];if(!a){a=y.createElement("head");var T=y.body||y.getElementsByTagName("body")[0];T?T.parentNode.insertBefore(a,T):y.documentElement.appendChild(a)}var R=y.createElement("style");return R.type="text/css",R.styleSheet?R.styleSheet.cssText=t:R.appendChild(y.createTextNode(t)),a.appendChild(R),R}}h2(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=Up.a;var d2=0,wy="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",v2=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"version","MAPBOX"),Object(r.a)(Object(p.a)(m),"viewport",void 0),m}return Object(v.a)(l,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},R=this.lngLatToMercator(a,0),U=R.x,Y=R.y;return[U-T.x,Y-T.y]}},{key:"lngLatToMercator",value:function(a,T){var R=window.mapboxgl.MercatorCoordinate.fromLngLat(a,T),U=R.x,Y=U===void 0?0:U,oe=R.y,me=oe===void 0?0:oe,Ce=R.z,Ve=Ce===void 0?0:Ce;return{x:Y,y:me,z:Ve}}},{key:"getModelMatrix",value:function(a,T,R){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},oe=window.mapboxgl.MercatorCoordinate.fromLngLat(a,T),me=oe.meterInMercatorCoordinateUnits(),Ce=ei.b.create();return ei.b.translate(Ce,Ce,ei.d.fromValues(oe.x-Y.x,oe.y-Y.y,oe.z||0-Y.z)),ei.b.scale(Ce,Ce,ei.d.fromValues(me*U[0],-me*U[1],me*U[2])),ei.b.rotateX(Ce,Ce,R[0]),ei.b.rotateY(Ce,Ce,R[1]),ei.b.rotateZ(Ce,Ce,R[2]),Ce}},{key:"init",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut,Ft,Nt,vr,_r,Sr;return Object(K.a)().wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:R=a.config,U=R.id,Y=U===void 0?"map":U,oe=R.attributionControl,me=oe===void 0?!1:oe,Ce=R.style,Ve=Ce===void 0?"light":Ce,ut=R.token,Ft=ut===void 0?wy:ut,Nt=R.rotation,vr=Nt===void 0?0:Nt,_r=R.mapInstance,Sr=Object(V.a)(R,f2),a.viewport=new km,!_r&&!window.mapboxgl&&console.error(a.configService.getSceneWarninfo("SDK")),Ft===wy&&Ve!=="blank"&&!window.mapboxgl.accessToken&&!_r&&console.warn(a.configService.getSceneWarninfo("MapToken")),!_r&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=Ft),_r?(a.map=_r,a.$mapContainer=a.map.getContainer()):(a.$mapContainer=a.creatMapContainer(Y),a.map=new window.mapboxgl.Map(Object(i.a)({container:a.$mapContainer,style:a.getMapStyleValue(Ve),attributionControl:me,bearing:vr},Sr))),a.map.on("load",function(){a.handleCameraChanged()}),a.map.on("move",a.handleCameraChanged),a.handleCameraChanged();case 9:case"end":return Bn.stop()}},T)}))()}},{key:"destroy",value:function(){var a;(a=this.$mapContainer)===null||a===void 0||(a=a.parentNode)===null||a===void 0||a.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(a){for(var T,R=arguments.length,U=new Array(R>1?R-1:0),Y=1;Y<R;Y++)U[Y-1]=arguments[Y];(T=this.eventEmitter).emit.apply(T,[a].concat(U))}},{key:"once",value:function(a){for(var T,R=arguments.length,U=new Array(R>1?R-1:0),Y=1;Y<R;Y++)U[Y-1]=arguments[Y];(T=this.eventEmitter).once.apply(T,[a].concat(U))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"getCanvasOverlays",value:function(){var a;return(a=this.getMapContainer())===null||a===void 0?void 0:a.querySelector(".mapboxgl-canvas-container")}},{key:"meterToCoord",value:function(a,T){var R=new Up.a.LngLat(a[0],a[1]),U=new Up.a.LngLat(T[0],T[1]),Y=R.distanceTo(U),oe=Up.a.MercatorCoordinate.fromLngLat({lng:a[0],lat:a[1]}),me=Up.a.MercatorCoordinate.fromLngLat({lng:T[0],lat:T[1]}),Ce=oe.x,Ve=oe.y,ut=me.x,Ft=me.y,Nt=Math.sqrt(Math.pow(Ce-ut,2)+Math.pow(Ve-Ft,2))*4194304*2;return Nt/Y}},{key:"exportMap",value:function(a){var T=this.map.getCanvas(),R=a==="jpg"?T==null?void 0:T.toDataURL("image/jpeg"):T==null?void 0:T.toDataURL("image/png");return R}},{key:"creatMapContainer",value:function(a){var T=a;typeof a=="string"&&(T=document.getElementById(a));var R=document.createElement("div");return R.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,R.id="l7_mapbox_div"+d2++,T.appendChild(R),R}}]),l}(Py);function p2(t,y){var l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(l||m)&&(y||(y=document),!!y)){var a=y.head||y.getElementsByTagName("head")[0];if(!a){a=y.createElement("head");var T=y.body||y.getElementsByTagName("body")[0];T?T.parentNode.insertBefore(a,T):y.documentElement.appendChild(a)}var R=y.createElement("style");return R.type="text/css",R.styleSheet?R.styleSheet.cssText=t:R.appendChild(y.createTextNode(t)),a.appendChild(R),R}}p2(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);var g2=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"getServiceConstructor",value:function(){return v2}}]),l}(jm);function kp(t){return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},kp(t)}function Ry(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function Iy(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?Ry(Object(l),!0).forEach(function(m){m2(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):Ry(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function m2(t,y,l){return y=y2(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function y2(t){var y=_2(t,"string");return kp(y)==="symbol"?y:String(y)}function _2(t,y){if(kp(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(kp(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function b2(t,y){return A2(t)||S2(t,y)||E2(t,y)||x2()}function x2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E2(t,y){if(!!t){if(typeof t=="string")return Ly(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return Ly(t,y)}}function Ly(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function S2(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function A2(t){if(Array.isArray(t))return t}var O2=B.a.memo(function(t){var y=t.style,l=t.className,m=t.map,a=t.option,T=t.onSceneLoaded,R=Object(he.createRef)(),U=Object(he.useState)(),Y=b2(U,2),oe=Y[0],me=Y[1];return Object(he.useEffect)(function(){var Ce=new Kv(Iy(Iy({id:R.current},a),{},{map:new g2(m)}));return Ce.on("loaded",function(){me(Ce),T&&T(Ce)}),function(){Ce.destroy()}},[]),Object(he.useEffect)(function(){oe&&m.style&&oe.setMapStyle(m.style)},[JSON.stringify(m.style)]),Object(he.useEffect)(function(){oe&&m.zoom&&oe.setZoom(m.zoom)},[m.zoom]),Object(he.useEffect)(function(){oe&&m.center&&oe.setCenter(m.center)},[JSON.stringify(m.center)]),Object(he.useEffect)(function(){oe&&m.pitch!==void 0&&oe.setPitch(m.pitch||0)},[m.pitch]),Object(he.useEffect)(function(){oe&&m.rotation&&oe.setRotation(m.rotation)},[m.rotation]),B.a.createElement(L.Provider,{value:oe},Object(he.createElement)("div",{ref:R,style:y,className:l},oe&&t.children))}),T2=O2;function zp(t){return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},zp(t)}function Dy(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function jy(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?Dy(Object(l),!0).forEach(function(m){M2(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):Dy(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function M2(t,y,l){return y=C2(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function C2(t){var y=P2(t,"string");return zp(y)==="symbol"?y:String(y)}function P2(t,y){if(zp(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(zp(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function w2(t,y){return D2(t)||L2(t,y)||I2(t,y)||R2()}function R2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2(t,y){if(!!t){if(typeof t=="string")return By(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return By(t,y)}}function By(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function L2(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function D2(t){if(Array.isArray(t))return t}var j2=B.a.memo(function(t){var y=t.style,l=t.className,m=t.map,a=t.option,T=t.onSceneLoaded,R=t.children,U=Object(he.useRef)(null),Y=Object(he.useState)(),oe=w2(Y,2),me=oe[0],Ce=oe[1];return Object(he.useEffect)(function(){var Ve=new Kv(jy(jy({id:U.current},a),{},{map:new Qx(m)}));return Ve.on("loaded",function(){Ce(Ve),T&&T(Ve)}),function(){Ve.destroy()}},[]),Object(he.useEffect)(function(){me&&m.style&&me.setMapStyle(m.style)},[JSON.stringify(m.style)]),Object(he.useEffect)(function(){me&&m.zoom&&me.setZoom(m.zoom)},[m.zoom]),Object(he.useEffect)(function(){me&&m.center&&me.setCenter(m.center)},[JSON.stringify(m.center)]),Object(he.useEffect)(function(){me&&m.pitch&&me.setPitch(m.pitch)},[m.pitch]),Object(he.useEffect)(function(){me&&m.rotation&&me.setRotation(m.rotation)},[m.rotation]),B.a.createElement(L.Provider,{value:me},B.a.createElement("div",{ref:U,className:l,style:y},me&&R))}),QA=j2;function Vp(t){return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},Vp(t)}function Fy(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function Ny(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?Fy(Object(l),!0).forEach(function(m){B2(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):Fy(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function B2(t,y,l){return y=F2(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function F2(t){var y=N2(t,"string");return Vp(y)==="symbol"?y:String(y)}function N2(t,y){if(Vp(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(Vp(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function U2(t,y){return W2(t)||V2(t,y)||z2(t,y)||k2()}function k2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z2(t,y){if(!!t){if(typeof t=="string")return Uy(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return Uy(t,y)}}function Uy(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function V2(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function W2(t){if(Array.isArray(t))return t}var H2=B.a.memo(function(t){var y=t.style,l=t.className,m=t.map,a=t.option,T=t.onSceneLoaded,R=t.children,U=Object(he.useRef)(null),Y=Object(he.useState)(),oe=U2(Y,2),me=oe[0],Ce=oe[1];return Object(he.useEffect)(function(){var Ve=new Kv(Ny(Ny({id:U.current},a),{},{map:new Jx(m)}));return Ve.on("loaded",function(){Ce(Ve),T&&T(Ve)}),function(){Ve.destroy()}},[]),Object(he.useEffect)(function(){me&&m.style&&me.setMapStyle(m.style)},[JSON.stringify(m.style)]),Object(he.useEffect)(function(){me&&m.zoom&&me.setZoom(m.zoom)},[m.zoom]),Object(he.useEffect)(function(){me&&m.center&&me.setCenter(m.center)},[JSON.stringify(m.center)]),Object(he.useEffect)(function(){me&&m.pitch&&me.setPitch(m.pitch)},[m.pitch]),Object(he.useEffect)(function(){me&&m.rotation&&me.setRotation(m.rotation)},[m.rotation]),B.a.createElement(L.Provider,{value:me},B.a.createElement("div",{ref:U,className:l,style:y},me&&R))}),qA=H2,G2=Ee("zvhG"),X2=Ee.n(G2),Gf={number:function(y,l,m){return y+m*(l-y)}};function Mh(t,y,l){return Math.min(l,Math.max(y,t))}function Jv(t,y,l){var m=l-y,a=((t-y)%m+m)%m+y;return a===y?l:a}var Y2=1;function $2(){return Y2++}function ic(t){for(var y=arguments.length,l=new Array(y>1?y-1:0),m=1;m<y;m++)l[m-1]=arguments[m];for(var a=0,T=l;a<T.length;a++){var R=T[a];for(var U in R)t[U]=R[U]}return t}function Z2(t,y){for(var l={},m=0;m<y.length;m++){var a=y[m];a in t&&(l[a]=t[a])}return l}function Vm(t,y,l,m){var a=new X2.a(t,y,l,m);return function(T){return a.solve(T)}}var Wm=Vm(.25,.1,.25,1),ky={};function K2(t){ky[t]||(typeof console!="undefined"&&console.warn(t),ky[t]=!0)}function zy(t){return t*Math.PI/180}var Vy=63710088e-1,hl=function(){function t(y,l){if(Object(g.a)(this,t),Object(r.a)(this,"lng",void 0),Object(r.a)(this,"lat",void 0),isNaN(y)||isNaN(l))throw new Error("Invalid LngLat object: (".concat(y,", ").concat(l,")"));if(this.lng=+y,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return Object(v.a)(t,[{key:"wrap",value:function(){return new t(Jv(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(l){var m=Math.PI/180,a=this.lat*m,T=l.lat*m,R=Math.sin(a)*Math.sin(T)+Math.cos(a)*Math.cos(T)*Math.cos((l.lng-this.lng)*m),U=Vy*Math.acos(Math.min(R,1));return U}}],[{key:"convert",value:function(l){if(l instanceof t)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new t(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new t(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),t}(),Wy=2*Math.PI*Vy;function Hy(t){return Wy*Math.cos(t*Math.PI/180)}function $g(t){return(180+t)/360}function Zg(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Gy(t,y){return t/Hy(y)}function J2(t){return t*360-180}function Hm(t){var y=180-t*360;return 360/Math.PI*Math.atan(Math.exp(y*Math.PI/180))-90}function Q2(t,y){return t*Hy(Hm(y))}function q2(t){return 1/Math.cos(t*Math.PI/180)}var Td=function(){function t(y,l){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;Object(g.a)(this,t),Object(r.a)(this,"x",void 0),Object(r.a)(this,"y",void 0),Object(r.a)(this,"z",void 0),this.x=+y,this.y=+l,this.z=+m}return Object(v.a)(t,[{key:"toLngLat",value:function(){return new hl(J2(this.x),Hm(this.y))}},{key:"toAltitude",value:function(){return Q2(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Wy*q2(Hm(this.y))}}],[{key:"fromLngLat",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=hl.convert(l);return new t($g(a.lng),Zg(a.lat),Gy(m,a.lat))}}]),t}(),eE=Ee("xnQO"),yu=Ee.n(eE),Wp=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"_ne",void 0),Object(r.a)(this,"_sw",void 0),y&&(l?this.setSouthWest(y).setNorthEast(l):Array.isArray(y)&&(y.length===4?this.setSouthWest([y[0],y[1]]).setNorthEast([y[2],y[3]]):this.setSouthWest(y[0]).setNorthEast(y[1])))}return Object(v.a)(t,[{key:"setNorthEast",value:function(l){return this._ne=l instanceof hl?new hl(l.lng,l.lat):hl.convert(l),this}},{key:"setSouthWest",value:function(l){return this._sw=l instanceof hl?new hl(l.lng,l.lat):hl.convert(l),this}},{key:"extend",value:function(l){var m=this._sw,a=this._ne,T,R;if(l instanceof hl)T=l,R=l;else if(l instanceof t){if(T=l._sw,R=l._ne,!T||!R)return this}else{if(Array.isArray(l))if(l.length===4||l.every(Array.isArray)){var U=l;return this.extend(t.convert(U))}else{var Y=l;return this.extend(hl.convert(Y))}else if(l&&("lng"in l||"lon"in l)&&"lat"in l)return this.extend(hl.convert(l));return this}return!m&&!a?(this._sw=new hl(T.lng,T.lat),this._ne=new hl(R.lng,R.lat)):(m.lng=Math.min(T.lng,m.lng),m.lat=Math.min(T.lat,m.lat),a.lng=Math.max(R.lng,a.lng),a.lat=Math.max(R.lat,a.lat)),this}},{key:"getCenter",value:function(){return new hl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new hl(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new hl(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(l){var m=hl.convert(l),a=m.lng,T=m.lat,R=this._sw.lat<=T&&T<=this._ne.lat,U=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(U=this._sw.lng>=a&&a>=this._ne.lng),R&&U}}],[{key:"convert",value:function(l){return l instanceof t?l:new t(l)}},{key:"fromLngLat",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=40075017,T=360*m/a,R=T/Math.cos(Math.PI/180*l.lat);return new t(new hl(l.lng-R,l.lat-T),new hl(l.lng+R,l.lat+T))}}]),t}(),Xy="AbortError";function eO(t){return t.message===Xy}function tE(){return new Error(Xy)}var rE=typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),Gm,Xf={now:rE,frameAsync:function(y){return new Promise(function(l,m){var a=requestAnimationFrame(l);y.signal.addEventListener("abort",function(){cancelAnimationFrame(a),m(tE())})})},get prefersReducedMotion(){return window.matchMedia?(Gm==null&&(Gm=window.matchMedia("(prefers-reduced-motion: reduce)")),Gm.matches):!1}};function Yy(t,y,l){var m=l[t]&&l[t].indexOf(y)!==-1;m||(l[t]=l[t]||[],l[t].push(y))}function Xm(t,y,l){if(l&&l[t]){var m=l[t].indexOf(y);m!==-1&&l[t].splice(m,1)}}var Ys=Object(v.a)(function t(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object(g.a)(this,t),Object(r.a)(this,"type",void 0),ic(this,l),this.type=y}),nE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(g.a)(this,l),a=y.call(this,"error",T),Object(r.a)(Object(p.a)(a),"error",void 0),a.error=m,a}return Object(v.a)(l)}(Ys),iE=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"_listeners",void 0),Object(r.a)(this,"_oneTimeListeners",void 0),Object(r.a)(this,"_eventedParent",void 0),Object(r.a)(this,"_eventedParentData",void 0)}return Object(v.a)(t,[{key:"on",value:function(l,m){return this._listeners=this._listeners||{},Yy(l,m,this._listeners),this}},{key:"off",value:function(l,m){return Xm(l,m,this._listeners),Xm(l,m,this._oneTimeListeners),this}},{key:"once",value:function(l,m){var a=this;return m?(this._oneTimeListeners=this._oneTimeListeners||{},Yy(l,m,this._oneTimeListeners),this):new Promise(function(T){return a.once(l,T)})}},{key:"fire",value:function(l,m){typeof l=="string"&&(l=new Ys(l,m||{}));var a=l.type;if(this.listens(a)){l.target=this;var T=this._listeners&&this._listeners[a]?this._listeners[a].slice():[],R=Object(Re.a)(T),U;try{for(R.s();!(U=R.n()).done;){var Y=U.value;Y.call(this,l)}}catch(Ft){R.e(Ft)}finally{R.f()}var oe=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[],me=Object(Re.a)(oe),Ce;try{for(me.s();!(Ce=me.n()).done;){var Ve=Ce.value;Xm(a,Ve,this._oneTimeListeners),Ve.call(this,l)}}catch(Ft){me.e(Ft)}finally{me.f()}var ut=this._eventedParent;ut&&(ic(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ut.fire(l))}else l instanceof nE&&console.error(l.error);return this}},{key:"emit",value:function(l,m){return this.fire(l,m)}},{key:"listens",value:function(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}},{key:"setEventedParent",value:function(l,m){return l&&(this._eventedParent=l),this._eventedParentData=m,this}}]),t}(),aE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a){var T;return Object(g.a)(this,l),T=y.call(this),Object(r.a)(Object(p.a)(T),"transform",void 0),Object(r.a)(Object(p.a)(T),"handlers",void 0),Object(r.a)(Object(p.a)(T),"_moving",void 0),Object(r.a)(Object(p.a)(T),"_zooming",void 0),Object(r.a)(Object(p.a)(T),"_rotating",void 0),Object(r.a)(Object(p.a)(T),"_pitching",void 0),Object(r.a)(Object(p.a)(T),"_padding",void 0),Object(r.a)(Object(p.a)(T),"_bearingSnap",void 0),Object(r.a)(Object(p.a)(T),"_easeStart",void 0),Object(r.a)(Object(p.a)(T),"_easeOptions",void 0),Object(r.a)(Object(p.a)(T),"_easeId",void 0),Object(r.a)(Object(p.a)(T),"_onEaseFrame",void 0),Object(r.a)(Object(p.a)(T),"_onEaseEnd",void 0),Object(r.a)(Object(p.a)(T),"_easeFrameId",void 0),Object(r.a)(Object(p.a)(T),"_requestedCameraState",void 0),Object(r.a)(Object(p.a)(T),"transformCameraUpdate",void 0),Object(r.a)(Object(p.a)(T),"_renderFrameCallback",function(){var R=Math.min((Xf.now()-T._easeStart)/T._easeOptions.duration,1);T._onEaseFrame(T._easeOptions.easing(R)),R<1&&T._easeFrameId?T._easeFrameId=T._requestRenderFrame(T._renderFrameCallback):T.stop()}),T._moving=!1,T._zooming=!1,T.transform=m,T._bearingSnap=a.bearingSnap,T.on("moveend",function(){delete T._requestedCameraState}),T}return Object(v.a)(l,[{key:"getCenter",value:function(){return new hl(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(a,T){return this.jumpTo({center:a},T)}},{key:"panBy",value:function(a,T,R){return a=yu.a.convert(a).mult(-1),this.panTo(this.transform.center,ic({offset:a},T),R)}},{key:"panTo",value:function(a,T,R){return this.easeTo(ic({center:a},T),R)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(a,T){return this.jumpTo({zoom:a},T),this}},{key:"zoomTo",value:function(a,T,R){return this.easeTo(ic({zoom:a},T),R)}},{key:"zoomIn",value:function(a,T){return this.zoomTo(this.getZoom()+1,a,T),this}},{key:"zoomOut",value:function(a,T){return this.zoomTo(this.getZoom()-1,a,T),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(a,T){return this.jumpTo({bearing:a},T),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(a,T){return this.jumpTo({padding:a},T),this}},{key:"rotateTo",value:function(a,T,R){return this.easeTo(ic({bearing:a},T),R)}},{key:"resetNorth",value:function(a,T){return this.rotateTo(0,ic({duration:1e3},a),T),this}},{key:"resetNorthPitch",value:function(a,T){return this.easeTo(ic({bearing:0,pitch:0,duration:1e3},a),T),this}},{key:"snapToNorth",value:function(a,T){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,T):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(a,T){return this.jumpTo({pitch:a},T),this}},{key:"cameraForBounds",value:function(a,T){a=Wp.convert(a);var R=T&&T.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),R,T)}},{key:"_cameraForBoxAndBearing",value:function(a,T,R,U){var Y={top:0,bottom:0,right:0,left:0};if(U=ic({padding:Y,offset:[0,0],maxZoom:this.transform.maxZoom},U),typeof U.padding=="number"){var oe=U.padding;U.padding={top:oe,bottom:oe,right:oe,left:oe}}U.padding=ic(Y,U.padding);var me=this.transform,Ce=me.padding,Ve=new Wp(a,T),ut=me.project(Ve.getNorthWest()),Ft=me.project(Ve.getNorthEast()),Nt=me.project(Ve.getSouthEast()),vr=me.project(Ve.getSouthWest()),_r=zy(-R),Sr=ut.rotate(_r),cn=Ft.rotate(_r),Bn=Nt.rotate(_r),Kn=vr.rotate(_r),wn=new yu.a(Math.max(Sr.x,cn.x,Kn.x,Bn.x),Math.max(Sr.y,cn.y,Kn.y,Bn.y)),vn=new yu.a(Math.min(Sr.x,cn.x,Kn.x,Bn.x),Math.min(Sr.y,cn.y,Kn.y,Bn.y)),ti=wn.sub(vn),Mi=(me.width-(Ce.left+Ce.right+U.padding.left+U.padding.right))/ti.x,Ki=(me.height-(Ce.top+Ce.bottom+U.padding.top+U.padding.bottom))/ti.y;if(Ki<0||Mi<0){K2("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Ii=Math.min(me.scaleZoom(me.scale*Math.min(Mi,Ki)),U.maxZoom),xa=yu.a.convert(U.offset),La=(U.padding.left-U.padding.right)/2,Cs=(U.padding.top-U.padding.bottom)/2,wu=new yu.a(La,Cs),ju=wu.rotate(zy(R)),Oc=xa.add(ju),wc=Oc.mult(me.scale/me.zoomScale(Ii)),Wl=me.unproject(ut.add(Nt).div(2).sub(wc));return{center:Wl,zoom:Ii,bearing:R}}},{key:"fitBounds",value:function(a,T,R){return this._fitInternal(this.cameraForBounds(a,T),T,R)}},{key:"fitScreenCoordinates",value:function(a,T,R,U,Y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(yu.a.convert(a)),this.transform.pointLocation(yu.a.convert(T)),R,U),U,Y)}},{key:"_fitInternal",value:function(a,T,R){return a?(T=ic(a,T),delete T.padding,T.linear?this.easeTo(T,R):this.flyTo(T,R)):this}},{key:"jumpTo",value:function(a,T){this.stop();var R=this._getTransformForUpdate(),U=!1,Y=!1,oe=!1;return"zoom"in a&&R.zoom!==+a.zoom&&(U=!0,R.zoom=+a.zoom),a.center!==void 0&&(R.center=hl.convert(a.center)),"bearing"in a&&R.bearing!==+a.bearing&&(Y=!0,R.bearing=+a.bearing),"pitch"in a&&R.pitch!==+a.pitch&&(oe=!0,R.pitch=+a.pitch),a.padding!=null&&!R.isPaddingEqual(a.padding)&&(R.padding=a.padding),this._applyUpdatedTransform(R),this.fire(new Ys("movestart",T)).fire(new Ys("move",T)),U&&this.fire(new Ys("zoomstart",T)).fire(new Ys("zoom",T)).fire(new Ys("zoomend",T)),Y&&this.fire(new Ys("rotatestart",T)).fire(new Ys("rotate",T)).fire(new Ys("rotateend",T)),oe&&this.fire(new Ys("pitchstart",T)).fire(new Ys("pitch",T)).fire(new Ys("pitchend",T)),this.fire(new Ys("moveend",T))}},{key:"calculateCameraOptionsFromTo",value:function(a,T,R){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,Y=Td.fromLngLat(a,T),oe=Td.fromLngLat(R,U),me=oe.x-Y.x,Ce=oe.y-Y.y,Ve=oe.z-Y.z,ut=Math.hypot(me,Ce,Ve);if(ut===0)throw new Error("Can't calculate camera options with same From and To");var Ft=Math.hypot(me,Ce),Nt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ut/this.transform.tileSize),vr=Math.atan2(me,-Ce)*180/Math.PI,_r=Math.acos(Ft/ut)*180/Math.PI;return _r=Ve<0?90-_r:90+_r,{center:oe.toLngLat(),zoom:Nt,pitch:_r,bearing:vr}}},{key:"easeTo",value:function(a,T){var R=this,U;this._stop(!1,a.easeId),a=ic({offset:[0,0],duration:500,easing:Wm},a),(a.animate===!1||!a.essential&&Xf.prefersReducedMotion)&&(a.duration=0);var Y=this._getTransformForUpdate(),oe=this.getZoom(),me=this.getBearing(),Ce=this.getPitch(),Ve=this.getPadding(),ut="bearing"in a?this._normalizeBearing(a.bearing,me):me,Ft="pitch"in a?+a.pitch:Ce,Nt="padding"in a?a.padding:Y.padding,vr=yu.a.convert(a.offset),_r=Y.centerPoint.add(vr),Sr=Y.pointLocation(_r),cn=Y.getConstrained(hl.convert(a.center||Sr),(U=a.zoom)!==null&&U!==void 0?U:oe),Bn=cn.center,Kn=cn.zoom;this._normalizeCenter(Bn);var wn=Y.project(Sr),vn=Y.project(Bn).sub(wn),ti=Y.zoomScale(Kn-oe),Mi,Ki;a.around&&(Mi=hl.convert(a.around),Ki=Y.locationPoint(Mi));var Ii={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Kn!==oe,this._rotating=this._rotating||me!==ut,this._pitching=this._pitching||Ft!==Ce,this._padding=!Y.isPaddingEqual(Nt),this._easeId=a.easeId,this._prepareEase(T,a.noMoveStart,Ii),this._ease(function(xa){if(R._zooming&&(Y.zoom=Gf.number(oe,Kn,xa)),R._rotating&&(Y.bearing=Gf.number(me,ut,xa)),R._pitching&&(Y.pitch=Gf.number(Ce,Ft,xa)),R._padding&&(Y.interpolatePadding(Ve,Nt,xa),_r=Y.centerPoint.add(vr)),Mi)Y.setLocationAtPoint(Mi,Ki);else{var La=Y.zoomScale(Y.zoom-oe),Cs=Kn>oe?Math.min(2,ti):Math.max(.5,ti),wu=Math.pow(Cs,1-xa),ju=Y.unproject(wn.add(vn.mult(xa*wu)).mult(La));Y.setLocationAtPoint(Y.renderWorldCopies?ju.wrap():ju,_r)}R._applyUpdatedTransform(Y),R._fireMoveEvents(T)},function(xa){R._afterEase(T,xa)},a),this}},{key:"_prepareEase",value:function(a,T){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._moving=!0,!T&&!R.moving&&this.fire(new Ys("movestart",a)),this._zooming&&!R.zooming&&this.fire(new Ys("zoomstart",a)),this._rotating&&!R.rotating&&this.fire(new Ys("rotatestart",a)),this._pitching&&!R.pitching&&this.fire(new Ys("pitchstart",a))}},{key:"_getTransformForUpdate",value:function(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}},{key:"_applyUpdatedTransform",value:function(a){if(!!this.transformCameraUpdate){var T=a.clone(),R=this.transformCameraUpdate(T),U=R.center,Y=R.zoom,oe=R.pitch,me=R.bearing,Ce=R.elevation;U&&(T.center=U),Y!==void 0&&(T.zoom=Y),oe!==void 0&&(T.pitch=oe),me!==void 0&&(T.bearing=me),Ce!==void 0&&(T.elevation=Ce),this.transform.apply(T)}}},{key:"_fireMoveEvents",value:function(a){this.fire(new Ys("move",a)),this._zooming&&this.fire(new Ys("zoom",a)),this._rotating&&this.fire(new Ys("rotate",a)),this._pitching&&this.fire(new Ys("pitch",a))}},{key:"_afterEase",value:function(a,T){if(!(this._easeId&&T&&this._easeId===T)){delete this._easeId;var R=this._zooming,U=this._rotating,Y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,R&&this.fire(new Ys("zoomend",a)),U&&this.fire(new Ys("rotateend",a)),Y&&this.fire(new Ys("pitchend",a)),this.fire(new Ys("moveend",a))}}},{key:"flyTo",value:function(a,T){var R=this,U;if(!a.essential&&Xf.prefersReducedMotion){var Y=Z2(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Y,T)}this.stop(),a=ic({offset:[0,0],speed:1.2,curve:1.42,easing:Wm},a);var oe=this._getTransformForUpdate(),me=this.getZoom(),Ce=this.getBearing(),Ve=this.getPitch(),ut=this.getPadding(),Ft="bearing"in a?this._normalizeBearing(a.bearing,Ce):Ce,Nt="pitch"in a?+a.pitch:Ve,vr="padding"in a?a.padding:oe.padding,_r=yu.a.convert(a.offset),Sr=oe.centerPoint.add(_r),cn=oe.pointLocation(Sr),Bn=oe.getConstrained(hl.convert(a.center||cn),(U=a.zoom)!==null&&U!==void 0?U:me),Kn=Bn.center,wn=Bn.zoom;this._normalizeCenter(Kn);var vn=oe.zoomScale(wn-me),ti=oe.project(cn),Mi=oe.project(Kn).sub(ti),Ki=a.curve,Ii=Math.max(oe.width,oe.height),xa=Ii/vn,La=Mi.mag();if("minZoom"in a){var Cs=Mh(Math.min(a.minZoom,me,wn),oe.minZoom,oe.maxZoom),wu=Ii/oe.zoomScale(Cs-me);Ki=Math.sqrt(wu/La*2)}var ju=Ki*Ki;function Oc(Ql){var mf=(xa*xa-Ii*Ii+(Ql?-1:1)*ju*ju*La*La)/(2*(Ql?xa:Ii)*ju*La);return Math.log(Math.sqrt(mf*mf+1)-mf)}function wc(Ql){return(Math.exp(Ql)-Math.exp(-Ql))/2}function Wl(Ql){return(Math.exp(Ql)+Math.exp(-Ql))/2}function gf(Ql){return wc(Ql)/Wl(Ql)}var Ph=Oc(!1),lm=function(mf){return Wl(Ph)/Wl(Ph+Ki*mf)},cm=function(mf){return Ii*((Wl(Ph)*gf(Ph+Ki*mf)-wc(Ph))/ju)/La},ep=(Oc(!0)-Ph)/Ki;if(Math.abs(La)<1e-6||!isFinite(ep)){if(Math.abs(Ii-xa)<1e-6)return this.easeTo(a,T);var s0=xa<Ii?-1:1;ep=Math.abs(Math.log(xa/Ii))/Ki,cm=function(){return 0},lm=function(mf){return Math.exp(s0*Ki*mf)}}if("duration"in a)a.duration=+a.duration;else{var u0="screenSpeed"in a?+a.screenSpeed/Ki:+a.speed;a.duration=1e3*ep/u0}return a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=Ce!==Ft,this._pitching=Nt!==Ve,this._padding=!oe.isPaddingEqual(vr),this._prepareEase(T,!1),this._ease(function(Ql){var mf=Ql*ep,Bo=1/lm(mf);oe.zoom=Ql===1?wn:me+oe.scaleZoom(Bo),R._rotating&&(oe.bearing=Gf.number(Ce,Ft,Ql)),R._pitching&&(oe.pitch=Gf.number(Ve,Nt,Ql)),R._padding&&(oe.interpolatePadding(ut,vr,Ql),Sr=oe.centerPoint.add(_r));var tu=Ql===1?Kn:oe.unproject(ti.add(Mi.mult(cm(mf))).mult(Bo));oe.setLocationAtPoint(oe.renderWorldCopies?tu.wrap():tu,Sr),R._applyUpdatedTransform(oe),R._fireMoveEvents(T)},function(){R._afterEase(T)},a),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(a,T){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var R=this._onEaseEnd;delete this._onEaseEnd,R.call(this,T)}if(!a){var U;(U=this.handlers)===null||U===void 0||U.stop(!1)}return this}},{key:"_ease",value:function(a,T,R){R.animate===!1||R.duration===0?(a(1),T()):(this._easeStart=Xf.now(),this._easeOptions=R,this._onEaseFrame=a,this._onEaseEnd=T,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_normalizeBearing",value:function(a,T){a=Jv(a,-180,180);var R=Math.abs(a-T);return Math.abs(a-360-T)<R&&(a-=360),Math.abs(a+360-T)<R&&(a+=360),a}},{key:"_normalizeCenter",value:function(a){var T=this.transform;if(!(!T.renderWorldCopies||T.lngRange)){var R=a.lng-T.center.lng;a.lng+=R>180?-360:R<-180?360:0}}}]),l}(iE),oE=function(){function t(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(Object(g.a)(this,t),Object(r.a)(this,"top",void 0),Object(r.a)(this,"bottom",void 0),Object(r.a)(this,"left",void 0),Object(r.a)(this,"right",void 0),isNaN(y)||y<0||isNaN(l)||l<0||isNaN(m)||m<0||isNaN(a)||a<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=y,this.bottom=l,this.left=m,this.right=a}return Object(v.a)(t,[{key:"interpolate",value:function(l,m,a){return m.top!=null&&l.top!=null&&(this.top=Gf.number(l.top,m.top,a)),m.bottom!=null&&l.bottom!=null&&(this.bottom=Gf.number(l.bottom,m.bottom,a)),m.left!=null&&l.left!=null&&(this.left=Gf.number(l.left,m.left,a)),m.right!=null&&l.right!=null&&(this.right=Gf.number(l.right,m.right,a)),this}},{key:"getCenter",value:function(l,m){var a=Mh((this.left+l-this.right)/2,0,l),T=Mh((this.top+m-this.bottom)/2,0,m);return new yu.a(a,T)}},{key:"equals",value:function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}(),Kg=85.051129,sE=function(){function t(y,l,m,a,T){Object(g.a)(this,t),Object(r.a)(this,"tileSize",void 0),Object(r.a)(this,"tileZoom",void 0),Object(r.a)(this,"lngRange",void 0),Object(r.a)(this,"latRange",void 0),Object(r.a)(this,"scale",void 0),Object(r.a)(this,"width",void 0),Object(r.a)(this,"height",void 0),Object(r.a)(this,"angle",void 0),Object(r.a)(this,"rotationMatrix",void 0),Object(r.a)(this,"pixelsToGLUnits",void 0),Object(r.a)(this,"cameraToCenterDistance",void 0),Object(r.a)(this,"mercatorMatrix",void 0),Object(r.a)(this,"projMatrix",void 0),Object(r.a)(this,"invProjMatrix",void 0),Object(r.a)(this,"alignedProjMatrix",void 0),Object(r.a)(this,"pixelMatrix",void 0),Object(r.a)(this,"pixelMatrix3D",void 0),Object(r.a)(this,"pixelMatrixInverse",void 0),Object(r.a)(this,"glCoordMatrix",void 0),Object(r.a)(this,"labelPlaneMatrix",void 0),Object(r.a)(this,"minElevationForCurrentTile",void 0),Object(r.a)(this,"_fov",void 0),Object(r.a)(this,"_pitch",void 0),Object(r.a)(this,"_zoom",void 0),Object(r.a)(this,"_unmodified",void 0),Object(r.a)(this,"_renderWorldCopies",void 0),Object(r.a)(this,"_minZoom",void 0),Object(r.a)(this,"_maxZoom",void 0),Object(r.a)(this,"_minPitch",void 0),Object(r.a)(this,"_maxPitch",void 0),Object(r.a)(this,"_center",void 0),Object(r.a)(this,"_elevation",void 0),Object(r.a)(this,"_pixelPerMeter",void 0),Object(r.a)(this,"_edgeInsets",void 0),Object(r.a)(this,"_constraining",void 0),Object(r.a)(this,"_posMatrixCache",void 0),Object(r.a)(this,"_alignedPosMatrixCache",void 0),this.tileSize=512,this._renderWorldCopies=T===void 0?!0:!!T,this._minZoom=y||0,this._maxZoom=l||22,this._minPitch=m==null?0:m,this._maxPitch=a==null?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new hl(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new oE,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}return Object(v.a)(t,[{key:"clone",value:function(){var l=new t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}},{key:"apply",value:function(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this.minElevationForCurrentTile=l.minElevationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}},{key:"minZoom",get:function(){return this._minZoom},set:function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}},{key:"minPitch",get:function(){return this._minPitch},set:function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new yu.a(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(l){var m=-Jv(l,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=ei.a.create(),ei.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(l){var m=Mh(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(l){var m=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.tileZoom=Math.max(0,Math.floor(m)),this.scale=this.zoomScale(m),this._constrain(),this._calcMatrices())}},{key:"center",get:function(){return this._center},set:function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}},{key:"elevation",get:function(){return this._elevation},set:function(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"isPaddingEqual",value:function(l){return this._edgeInsets.equals(l)}},{key:"interpolatePadding",value:function(l,m,a){this._unmodified=!1,this._edgeInsets.interpolate(l,m,a),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(l){var m=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,m)}},{key:"resize",value:function(l,m){this.width=l,this.height=m,this.pixelsToGLUnits=[2/l,-2/m],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(l){return Math.pow(2,l)}},{key:"scaleZoom",value:function(l){return Math.log(l)/Math.LN2}},{key:"project",value:function(l){var m=Mh(l.lat,-Kg,Kg);return new yu.a($g(l.lng)*this.worldSize,Zg(m)*this.worldSize)}},{key:"unproject",value:function(l){return new Td(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}},{key:"point",get:function(){return this.project(this.center)}},{key:"getCameraPosition",value:function(){var l=this.pointLocation(this.getCameraPoint()),m=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter;return{lngLat:l,altitude:m+this.elevation}}},{key:"setLocationAtPoint",value:function(l,m){var a=this.pointCoordinate(m),T=this.pointCoordinate(this.centerPoint),R=this.locationCoordinate(l),U=new Td(R.x-(a.x-T.x),R.y-(a.y-T.y));this.center=this.coordinateLocation(U),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(l){return this.coordinatePoint(this.locationCoordinate(l))}},{key:"pointLocation",value:function(l){return this.coordinateLocation(this.pointCoordinate(l))}},{key:"locationCoordinate",value:function(l){return Td.fromLngLat(l)}},{key:"coordinateLocation",value:function(l){return l&&l.toLngLat()}},{key:"pointCoordinate",value:function(l){var m=0,a=[l.x,l.y,0,1],T=[l.x,l.y,1,1];ei.e.transformMat4(a,a,this.pixelMatrixInverse),ei.e.transformMat4(T,T,this.pixelMatrixInverse);var R=a[3],U=T[3],Y=a[0]/R,oe=T[0]/U,me=a[1]/R,Ce=T[1]/U,Ve=a[2]/R,ut=T[2]/U,Ft=Ve===ut?0:(m-Ve)/(ut-Ve);return new Td(Gf.number(Y,oe,Ft)/this.worldSize,Gf.number(me,Ce,Ft)/this.worldSize)}},{key:"coordinatePoint",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.pixelMatrix,T=[l.x*this.worldSize,l.y*this.worldSize,m,1];return ei.e.transformMat4(T,T,a),new yu.a(T[0]/T[3],T[1]/T[3])}},{key:"getBounds",value:function(){var l=Math.max(0,this.height/2-this.getHorizon());return new Wp().extend(this.pointLocation(new yu.a(0,l))).extend(this.pointLocation(new yu.a(this.width,l))).extend(this.pointLocation(new yu.a(this.width,this.height))).extend(this.pointLocation(new yu.a(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new Wp([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"getHorizon",value:function(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}},{key:"setMaxBounds",value:function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-Kg,Kg])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"getConstrained",value:function(l,m){m=Mh(+m,this.minZoom,this.maxZoom);var a={center:new hl(l.lng,l.lat),zoom:m},T=this.lngRange;if(!this._renderWorldCopies&&T===null){var R=180-1e-10;T=[-R,R]}var U=this.tileSize*this.zoomScale(a.zoom),Y=0,oe=U,me=0,Ce=U,Ve=0,ut=0,Ft=this.size,Nt=Ft.x,vr=Ft.y;if(this.latRange){var _r=this.latRange;Y=Zg(_r[1])*U,oe=Zg(_r[0])*U;var Sr=oe-Y<vr;Sr&&(Ve=vr/(oe-Y))}if(T){me=Jv($g(T[0])*U,0,U),Ce=Jv($g(T[1])*U,0,U),Ce<me&&(Ce+=U);var cn=Ce-me<Nt;cn&&(ut=Nt/(Ce-me))}var Bn=this.project.call({worldSize:U},l),Kn=Bn.x,wn=Bn.y,vn,ti,Mi=Math.max(ut||0,Ve||0);if(Mi){var Ki=new yu.a(ut?(Ce+me)/2:Kn,Ve?(oe+Y)/2:wn);return a.center=this.unproject.call({worldSize:U},Ki).wrap(),a.zoom+=this.scaleZoom(Mi),a}if(this.latRange){var Ii=vr/2;wn-Ii<Y&&(ti=Y+Ii),wn+Ii>oe&&(ti=oe-Ii)}if(T){var xa=(me+Ce)/2,La=Kn;this._renderWorldCopies&&(La=Jv(Kn,xa-U/2,xa+U/2));var Cs=Nt/2;La-Cs<me&&(vn=me+Cs),La+Cs>Ce&&(vn=Ce-Cs)}if(vn!==void 0||ti!==void 0){var wu,ju,Oc=new yu.a((wu=vn)!==null&&wu!==void 0?wu:Kn,(ju=ti)!==null&&ju!==void 0?ju:wn);a.center=this.unproject.call({worldSize:U},Oc).wrap()}return a}},{key:"_constrain",value:function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var l=this._unmodified,m=this.getConstrained(this.center,this.zoom),a=m.center,T=m.zoom;this.center=a,this.zoom=T,this._unmodified=l,this._constraining=!1}}},{key:"_calcMatrices",value:function(){if(!!this.height){var l=this._fov/2,m=this.centerOffset,a=this.point.x,T=this.point.y;this.cameraToCenterDistance=.5/Math.tan(l)*this.height,this._pixelPerMeter=Gy(1,this.center.lat)*this.worldSize;var R=ei.b.identity(new Float64Array(16));ei.b.scale(R,R,[this.width/2,-this.height/2,1]),ei.b.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=ei.b.identity(new Float64Array(16)),ei.b.scale(R,R,[1,-1,1]),ei.b.translate(R,R,[-1,-1,0]),ei.b.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R;var U=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),Y=Math.min(this.elevation,this.minElevationForCurrentTile),oe=U-Y*this._pixelPerMeter/Math.cos(this._pitch),me=Y<0?oe:U,Ce=Math.PI/2+this._pitch,Ve=this._fov*(.5+m.y/this.height),ut=Math.sin(Ve)*me/Math.sin(Mh(Math.PI-Ce-Ve,.01,Math.PI-.01)),Ft=this.getHorizon(),Nt=Math.atan(Ft/this.cameraToCenterDistance),vr=2*Nt*(.5+m.y/(Ft*2)),_r=Math.sin(vr)*me/Math.sin(Mh(Math.PI-Ce-vr,.01,Math.PI-.01)),Sr=Math.min(ut,_r),cn=(Math.cos(Math.PI/2-this._pitch)*Sr+me)*1.01,Bn=this.height/50;R=new Float64Array(16),ei.b.perspective(R,this._fov,this.width/this.height,Bn,cn),R[8]=-m.x*2/this.width,R[9]=m.y*2/this.height,ei.b.scale(R,R,[1,-1,1]),ei.b.translate(R,R,[0,0,-this.cameraToCenterDistance]),ei.b.rotateX(R,R,this._pitch),ei.b.rotateZ(R,R,this.angle),ei.b.translate(R,R,[-a,-T,0]),this.mercatorMatrix=ei.b.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),ei.b.scale(R,R,[1,1,this._pixelPerMeter]),this.pixelMatrix=ei.b.multiply(new Float64Array(16),this.labelPlaneMatrix,R),ei.b.translate(R,R,[0,0,-this.elevation]),this.projMatrix=R,this.invProjMatrix=ei.b.invert([],R),this.pixelMatrix3D=ei.b.multiply(new Float64Array(16),this.labelPlaneMatrix,R);var Kn=this.width%2/2,wn=this.height%2/2,vn=Math.cos(this.angle),ti=Math.sin(this.angle),Mi=a-Math.round(a)+vn*Kn+ti*wn,Ki=T-Math.round(T)+vn*wn+ti*Kn,Ii=new Float64Array(R);if(ei.b.translate(Ii,Ii,[Mi>.5?Mi-1:Mi,Ki>.5?Ki-1:Ki,0]),this.alignedProjMatrix=Ii,R=ei.b.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new yu.a(0,0)),m=[l.x*this.worldSize,l.y*this.worldSize,0,1],a=ei.e.transformMat4(m,m,this.pixelMatrix);return a[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var l=this._pitch,m=Math.tan(l)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new yu.a(0,m))}},{key:"getCameraQueryGeometry",value:function(l){var m=this.getCameraPoint();if(l.length===1)return[l[0],m];var a=m.x,T=m.y,R=m.x,U=m.y,Y=Object(Re.a)(l),oe;try{for(Y.s();!(oe=Y.n()).done;){var me=oe.value;a=Math.min(a,me.x),T=Math.min(T,me.y),R=Math.max(R,me.x),U=Math.max(U,me.y)}}catch(Ce){Y.e(Ce)}finally{Y.f()}return[new yu.a(a,T),new yu.a(R,T),new yu.a(R,U),new yu.a(a,U),new yu.a(a,T)]}},{key:"lngLatToCameraDepth",value:function(l,m){var a=this.locationCoordinate(l),T=[a.x*this.worldSize,a.y*this.worldSize,m,1];return ei.e.transformMat4(T,T,this.projMatrix),T[2]/T[3]}}]),t}(),Ym,Ku=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,null,[{key:"testProp",value:function(l){if(!t.docStyle)return l[0];for(var m=0;m<l.length;m++)if(l[m]in t.docStyle)return l[m];return l[0]}},{key:"create",value:function(l,m,a){var T=window.document.createElement(l);return m!==void 0&&(T.className=m),a&&a.appendChild(T),T}},{key:"createNS",value:function(l,m){var a=window.document.createElementNS(l,m);return a}},{key:"disableDrag",value:function(){t.docStyle&&t.selectProp&&(t.userSelect=t.docStyle[t.selectProp],t.docStyle[t.selectProp]="none")}},{key:"enableDrag",value:function(){t.docStyle&&t.selectProp&&(t.docStyle[t.selectProp]=t.userSelect)}},{key:"setTransform",value:function(l,m){l.style[t.transformProp]=m}},{key:"addEventListener",value:function(l,m,a){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in T?l.addEventListener(m,a,T):l.addEventListener(m,a,T.capture)}},{key:"removeEventListener",value:function(l,m,a){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in T?l.removeEventListener(m,a,T):l.removeEventListener(m,a,T.capture)}},{key:"suppressClickInternal",value:function(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",t.suppressClickInternal,!0)}},{key:"suppressClick",value:function(){window.addEventListener("click",t.suppressClickInternal,!0),window.setTimeout(function(){window.removeEventListener("click",t.suppressClickInternal,!0)},0)}},{key:"getScale",value:function(l){var m=l.getBoundingClientRect();return{x:m.width/l.offsetWidth||1,y:m.height/l.offsetHeight||1,boundingClientRect:m}}},{key:"getPoint",value:function(l,m,a){var T=m.boundingClientRect;return new yu.a((a.clientX-T.left)/m.x-l.clientLeft,(a.clientY-T.top)/m.y-l.clientTop)}},{key:"mousePos",value:function(l,m){var a=t.getScale(l);return t.getPoint(l,a,m)}},{key:"touchPos",value:function(l,m){for(var a=[],T=t.getScale(l),R=0;R<m.length;R++)a.push(t.getPoint(l,T,m[R]));return a}},{key:"mouseButton",value:function(l){return l.button}},{key:"remove",value:function(l){l.parentNode&&l.parentNode.removeChild(l)}}]),t}();Ym=Ku,Object(r.a)(Ku,"docStyle",typeof window!="undefined"&&window.document&&window.document.documentElement.style),Object(r.a)(Ku,"userSelect",void 0),Object(r.a)(Ku,"selectProp",Ym.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"])),Object(r.a)(Ku,"transformProp",Ym.testProp(["transform","WebkitTransform"]));var Hp=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_map",void 0),this._map=y}return Object(v.a)(t,[{key:"transform",get:function(){return this._map._requestedCameraState||this._map.transform}},{key:"center",get:function(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}},{key:"zoom",get:function(){return this.transform.zoom}},{key:"pitch",get:function(){return this.transform.pitch}},{key:"bearing",get:function(){return this.transform.bearing}},{key:"unproject",value:function(l){return this.transform.pointLocation(yu.a.convert(l))}}]),t}(),uE=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"_map",void 0),Object(r.a)(this,"_tr",void 0),Object(r.a)(this,"_el",void 0),Object(r.a)(this,"_container",void 0),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_startPos",void 0),Object(r.a)(this,"_lastPos",void 0),Object(r.a)(this,"_box",void 0),Object(r.a)(this,"_clickTolerance",void 0),this._map=y,this._tr=new Hp(y),this._el=y.getCanvasContainer(),this._container=y.getContainer(),this._clickTolerance=l.clickTolerance||1}return Object(v.a)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){!this.isEnabled()||(this._enabled=!1)}},{key:"mousedown",value:function(l,m){!this.isEnabled()||!(l.shiftKey&&l.button===0)||(Ku.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}},{key:"mousemoveWindow",value:function(l,m){if(!!this._active){var a=m;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var T=this._startPos;this._lastPos=a,this._box||(this._box=Ku.create("div","l7-boxzoom",this._container),this._container.classList.add("l7-crosshair"),this._fireEvent("boxzoomstart",l));var R=Math.min(T.x,a.x),U=Math.max(T.x,a.x),Y=Math.min(T.y,a.y),oe=Math.max(T.y,a.y);Ku.setTransform(this._box,"translate(".concat(R,"px,").concat(Y,"px)")),this._box.style.width="".concat(U-R,"px"),this._box.style.height="".concat(oe-Y,"px")}}}},{key:"mouseupWindow",value:function(l,m){var a=this;if(!!this._active&&l.button===0){var T=this._startPos,R=m;if(this.reset(),Ku.suppressClick(),T.x===R.x&&T.y===R.y)this._fireEvent("boxzoomcancel",l);else return this._map.fire(new Ys("boxzoomend",{originalEvent:l})),{cameraAnimation:function(Y){return Y.fitScreenCoordinates(T,R,a._tr.bearing,{linear:!0})}}}}},{key:"keydown",value:function(l){!this._active||l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("l7-crosshair"),this._box&&(Ku.remove(this._box),this._box=null),Ku.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(l,m){return this._map.fire(new Ys(l,{originalEvent:m}))}}]),t}(),lE=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_tr",void 0),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),this._tr=new Hp(y),this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(l,m){var a=this;return l.preventDefault(),{cameraAnimation:function(R){R.easeTo({duration:300,zoom:a._tr.zoom+(l.shiftKey?-1:1),around:a._tr.unproject(m)},{originalEvent:l})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),cE=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"_options",void 0),Object(r.a)(this,"_map",void 0),Object(r.a)(this,"_container",void 0),Object(r.a)(this,"_bypassKey",navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey"),Object(r.a)(this,"_enabled",void 0),this._map=y,this._options=l,this._enabled=!1}return Object(v.a)(t,[{key:"isActive",value:function(){return!1}},{key:"reset",value:function(){}},{key:"_setupUI",value:function(){if(!this._container){var l=this._map.getCanvasContainer();l.classList.add("l7-cooperative-gestures"),this._container=Ku.create("div","l7-cooperative-gesture-screen",l);var m=document.createElement("div");m.className="l7-desktop-message",m.textContent="Missing UI string",this._container.appendChild(m);var a=document.createElement("div");a.className="l7-mobile-message",a.textContent="Missing UI string",this._container.appendChild(a),this._container.setAttribute("aria-hidden","true")}}},{key:"_destoryUI",value:function(){if(this._container){Ku.remove(this._container);var l=this._map.getCanvasContainer();l.classList.remove("l7-cooperative-gestures")}delete this._container}},{key:"enable",value:function(){this._setupUI(),this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this._destoryUI()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"touchmove",value:function(l){this._onCooperativeGesture(l.touches.length===1)}},{key:"wheel",value:function(l){!this._map.scrollZoom.isEnabled()||this._onCooperativeGesture(!l[this._bypassKey])}},{key:"_onCooperativeGesture",value:function(l){var m=this;!this._enabled||!l||(this._container.classList.add("l7-show"),setTimeout(function(){m._container.classList.remove("l7-show")},100))}}]),t}(),fE={panStep:100,bearingStep:15,pitchStep:10},hE=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_tr",void 0),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_panStep",void 0),Object(r.a)(this,"_bearingStep",void 0),Object(r.a)(this,"_pitchStep",void 0),Object(r.a)(this,"_rotationDisabled",void 0),this._tr=new Hp(y);var l=fE;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}return Object(v.a)(t,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(l){var m=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var a=0,T=0,R=0,U=0,Y=0;switch(l.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:l.shiftKey?T=-1:(l.preventDefault(),U=-1);break;case 39:l.shiftKey?T=1:(l.preventDefault(),U=1);break;case 38:l.shiftKey?R=1:(l.preventDefault(),Y=-1);break;case 40:l.shiftKey?R=-1:(l.preventDefault(),Y=1);break;default:return}return this._rotationDisabled&&(T=0,R=0),{cameraAnimation:function(me){var Ce=m._tr;me.easeTo({duration:300,easeId:"keyboardHandler",easing:dE,zoom:a?Math.round(Ce.zoom)+a*(l.shiftKey?2:1):Ce.zoom,bearing:Ce.bearing+T*m._bearingStep,pitch:Ce.pitch+R*m._pitchStep,offset:[-U*m._panStep,-Y*m._panStep],center:Ce.center},{originalEvent:l})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),t}();function dE(t){return t*(2-t)}var Zh=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a,T){var R,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Object(g.a)(this,l),R=y.call(this,m,U),Object(r.a)(Object(p.a)(R),"target",void 0),Object(r.a)(Object(p.a)(R),"originalEvent",void 0),Object(r.a)(Object(p.a)(R),"point",void 0),Object(r.a)(Object(p.a)(R),"lngLat",void 0),Object(r.a)(Object(p.a)(R),"_defaultPrevented",void 0);var Y=Ku.mousePos(a.getCanvasContainer(),T),oe=a.unproject(Y);return R.point=Y,R.lngLat=oe,R.originalEvent=T,R._defaultPrevented=!1,R.target=a,R}return Object(v.a)(l,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),l}(Ys),Jg=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a,T){var R;Object(g.a)(this,l),R=y.call(this,m),Object(r.a)(Object(p.a)(R),"target",void 0),Object(r.a)(Object(p.a)(R),"originalEvent",void 0),Object(r.a)(Object(p.a)(R),"lngLat",void 0),Object(r.a)(Object(p.a)(R),"point",void 0),Object(r.a)(Object(p.a)(R),"points",void 0),Object(r.a)(Object(p.a)(R),"lngLats",void 0),Object(r.a)(Object(p.a)(R),"_defaultPrevented",void 0);var U=m==="touchend"?T.changedTouches:T.touches,Y=Ku.touchPos(a.getCanvasContainer(),U),oe=Y.map(function(Ve){return a.unproject(Ve)}),me=Y.reduce(function(Ve,ut,Ft,Nt){return Ve.add(ut.div(Nt.length))},new yu.a(0,0)),Ce=a.unproject(me);return R.target=a,R.points=Y,R.point=me,R.lngLats=oe,R.lngLat=Ce,R.originalEvent=T,R._defaultPrevented=!1,R}return Object(v.a)(l,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),l}(Ys),vE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a,T){var R;return Object(g.a)(this,l),R=y.call(this,m),Object(r.a)(Object(p.a)(R),"target",void 0),Object(r.a)(Object(p.a)(R),"originalEvent",void 0),Object(r.a)(Object(p.a)(R),"_defaultPrevented",void 0),R.target=a,R._defaultPrevented=!1,R.originalEvent=T,R}return Object(v.a)(l,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),l}(Ys),pE=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"_mousedownPos",void 0),Object(r.a)(this,"_clickTolerance",void 0),Object(r.a)(this,"_map",void 0),this._map=y,this._clickTolerance=l.clickTolerance}return Object(v.a)(t,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(l){return this._firePreventable(new vE(l.type,this._map,l))}},{key:"mousedown",value:function(l,m){return this._mousedownPos=m,this._firePreventable(new Zh(l.type,this._map,l))}},{key:"mouseup",value:function(l){this._map.fire(new Zh(l.type,this._map,l))}},{key:"click",value:function(l,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Zh(l.type,this._map,l))}},{key:"dblclick",value:function(l){return this._firePreventable(new Zh(l.type,this._map,l))}},{key:"mouseover",value:function(l){this._map.fire(new Zh(l.type,this._map,l))}},{key:"mouseout",value:function(l){this._map.fire(new Zh(l.type,this._map,l))}},{key:"touchstart",value:function(l){return this._firePreventable(new Jg(l.type,this._map,l))}},{key:"touchmove",value:function(l){this._map.fire(new Jg(l.type,this._map,l))}},{key:"touchend",value:function(l){this._map.fire(new Jg(l.type,this._map,l))}},{key:"touchcancel",value:function(l){this._map.fire(new Jg(l.type,this._map,l))}},{key:"_firePreventable",value:function(l){if(this._map.fire(l),l.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),gE=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_map",void 0),Object(r.a)(this,"_delayContextMenu",void 0),Object(r.a)(this,"_ignoreContextMenu",void 0),Object(r.a)(this,"_contextMenuEvent",void 0),this._map=y}return Object(v.a)(t,[{key:"reset",value:function(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}},{key:"mousemove",value:function(l){this._map.fire(new Zh(l.type,this._map,l))}},{key:"mousedown",value:function(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Zh("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Zh(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),$m=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"contextmenu",void 0),Object(r.a)(this,"mousedown",void 0),Object(r.a)(this,"mousemoveWindow",void 0),Object(r.a)(this,"mouseup",void 0),Object(r.a)(this,"touchstart",void 0),Object(r.a)(this,"touchmoveWindow",void 0),Object(r.a)(this,"touchend",void 0),Object(r.a)(this,"_clickTolerance",void 0),Object(r.a)(this,"_moveFunction",void 0),Object(r.a)(this,"_activateOnStart",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_moved",void 0),Object(r.a)(this,"_lastPoint",void 0),Object(r.a)(this,"_moveStateManager",void 0),this._enabled=!!y.enable,this._moveStateManager=y.moveStateManager,this._clickTolerance=y.clickTolerance||1,this._moveFunction=y.move,this._activateOnStart=!!y.activateOnStart,y.assignEvents(this),this.reset()}return Object(v.a)(t,[{key:"reset",value:function(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}},{key:"_move",value:function(){var l=this._moveFunction.apply(this,arguments);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}},{key:"dragStart",value:function(l,m){!this.isEnabled()||this._lastPoint||!this._moveStateManager.isValidStartEvent(l)||(this._moveStateManager.startMove(l),this._lastPoint=m.length?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}},{key:"dragMove",value:function(l,m){if(!!this.isEnabled()){var a=this._lastPoint;if(!!a){if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l)){this.reset(l);return}var T=m.length?m[0]:m;if(!(!this._moved&&T.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=T,this._move(a,T)}}}},{key:"dragEnd",value:function(l){!this.isEnabled()||!this._lastPoint||!this._moveStateManager.isValidEndEvent(l)||(this._moved&&Ku.suppressClick(),this.reset(l))}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"getClickTolerance",value:function(){return this._clickTolerance}}]),t}(),Qg,mE=0,yE=2,_E=(Qg={},Object(d.a)(Qg,mE,1),Object(d.a)(Qg,yE,2),Qg);function bE(t,y){var l=_E[y];return t.buttons===void 0||(t.buttons&l)!==l}var Zm=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_eventButton",void 0),Object(r.a)(this,"_correctEvent",void 0),this._correctEvent=y.checkCorrectEvent}return Object(v.a)(t,[{key:"startMove",value:function(l){var m=Ku.mouseButton(l);this._eventButton=m}},{key:"endMove",value:function(l){delete this._eventButton}},{key:"isValidStartEvent",value:function(l){return this._correctEvent(l)}},{key:"isValidMoveEvent",value:function(l){return!bE(l,this._eventButton)}},{key:"isValidEndEvent",value:function(l){var m=Ku.mouseButton(l);return m===this._eventButton}}]),t}(),tO=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"_firstTouch",void 0),this._firstTouch=void 0}return Object(v.a)(t,[{key:"_isOneFingerTouch",value:function(l){return l.targetTouches.length===1}},{key:"_isSameTouchEvent",value:function(l){return l.targetTouches[0].identifier===this._firstTouch}},{key:"startMove",value:function(l){var m=l.targetTouches[0].identifier;this._firstTouch=m}},{key:"endMove",value:function(l){delete this._firstTouch}},{key:"isValidStartEvent",value:function(l){return this._isOneFingerTouch(l)}},{key:"isValidMoveEvent",value:function(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}},{key:"isValidEndEvent",value:function(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}]),t}(),Km=0,$y=2,Jm=function(y){y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(l){l.preventDefault()}},xE=function(y){var l=y.enable,m=y.clickTolerance,a=new Zm({checkCorrectEvent:function(R){return Ku.mouseButton(R)===Km&&!R.ctrlKey}});return new $m({clickTolerance:m,move:function(R,U){return{around:U,panDelta:U.sub(R)}},activateOnStart:!0,moveStateManager:a,enable:l,assignEvents:Jm})},EE=function(y){var l=y.enable,m=y.clickTolerance,a=y.bearingDegreesPerPixelMoved,T=a===void 0?.8:a,R=new Zm({checkCorrectEvent:function(Y){return Ku.mouseButton(Y)===Km&&Y.ctrlKey||Ku.mouseButton(Y)===$y}});return new $m({clickTolerance:m,move:function(Y,oe){return{bearingDelta:(oe.x-Y.x)*T}},moveStateManager:R,enable:l,assignEvents:Jm})},SE=function(y){var l=y.enable,m=y.clickTolerance,a=y.pitchDegreesPerPixelMoved,T=a===void 0?-.5:a,R=new Zm({checkCorrectEvent:function(Y){return Ku.mouseButton(Y)===Km&&Y.ctrlKey||Ku.mouseButton(Y)===$y}});return new $m({clickTolerance:m,move:function(Y,oe){return{pitchDelta:(oe.y-Y.y)*T}},moveStateManager:R,enable:l,assignEvents:Jm})},Zy=4.000244140625,AE=1/100,OE=1/450,TE=2,ME=function(){function t(y,l){var m=this;Object(g.a)(this,t),Object(r.a)(this,"_map",void 0),Object(r.a)(this,"_tr",void 0),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_zooming",void 0),Object(r.a)(this,"_aroundCenter",void 0),Object(r.a)(this,"_around",void 0),Object(r.a)(this,"_aroundPoint",void 0),Object(r.a)(this,"_type",void 0),Object(r.a)(this,"_lastValue",void 0),Object(r.a)(this,"_timeout",void 0),Object(r.a)(this,"_finishTimeout",void 0),Object(r.a)(this,"_lastWheelEvent",void 0),Object(r.a)(this,"_lastWheelEventTime",void 0),Object(r.a)(this,"_startZoom",void 0),Object(r.a)(this,"_targetZoom",void 0),Object(r.a)(this,"_delta",void 0),Object(r.a)(this,"_easing",void 0),Object(r.a)(this,"_prevEase",void 0),Object(r.a)(this,"_frameId",void 0),Object(r.a)(this,"_triggerRenderFrame",void 0),Object(r.a)(this,"_defaultZoomRate",void 0),Object(r.a)(this,"_wheelZoomRate",void 0),Object(r.a)(this,"_onTimeout",function(a){m._type="wheel",m._delta-=m._lastValue,m._active||m._start(a)}),this._map=y,this._tr=new Hp(y),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=AE,this._wheelZoomRate=OE}return Object(v.a)(t,[{key:"setZoomRate",value:function(l){this._defaultZoomRate=l}},{key:"setWheelZoomRate",value:function(l){this._wheelZoomRate=l}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||this._finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}},{key:"disable",value:function(){!this.isEnabled()||(this._enabled=!1)}},{key:"wheel",value:function(l){if(!!this.isEnabled()&&!(this._map.cooperativeGestures.isEnabled()&&!l[this._map.cooperativeGestures._bypassKey])){var m=l.deltaMode===WheelEvent.DOM_DELTA_LINE?l.deltaY*40:l.deltaY,a=Xf.now(),T=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,m!==0&&m%Zy==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(T*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),l.shiftKey&&m&&(m=m/4),this._type&&(this._lastWheelEvent=l,this._delta-=m,this._active||this._start(l)),l.preventDefault()}}},{key:"_start",value:function(l){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var m=Ku.mousePos(this._map.getCanvasContainer(),l),a=this._tr;m.y>a.transform.height/2-a.transform.getHorizon()?this._around=hl.convert(this._aroundCenter?a.center:a.unproject(m)):this._around=hl.convert(a.center),this._aroundPoint=a.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var l=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var m=this._tr.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>Zy?this._wheelZoomRate:this._defaultZoomRate,T=TE/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&T!==0&&(T=1/T);var R=typeof this._targetZoom=="number"?m.zoomScale(this._targetZoom):m.scale;this._targetZoom=Math.min(m.maxZoom,Math.max(m.minZoom,m.scaleZoom(R*T))),this._type==="wheel"&&(this._startZoom=m.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var U=typeof this._targetZoom=="number"?this._targetZoom:m.zoom,Y=this._startZoom,oe=this._easing,me=!1,Ce;if(this._type==="wheel"&&Y&&oe){var Ve=Math.min((Xf.now()-this._lastWheelEventTime)/200,1),ut=oe(Ve);Ce=Gf.number(Y,U,ut),Ve<1?this._frameId||(this._frameId=!0):me=!0}else Ce=U,me=!0;return this._active=!0,me&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!me,zoomDelta:Ce-m.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(l){var m=Wm;if(this._prevEase){var a=this._prevEase,T=(Xf.now()-a.start)/a.duration,R=a.easing(T+.01)-a.easing(T),U=.27/Math.sqrt(R*R+1e-4)*.01,Y=Math.sqrt(.27*.27-U*U);m=Vm(U,Y,.25,1)}return this._prevEase={start:Xf.now(),duration:l,easing:m},m}},{key:"reset",value:function(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}]),t}(),CE=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"_clickZoom",void 0),Object(r.a)(this,"_tapZoom",void 0),this._clickZoom=y,this._tapZoom=l}return Object(v.a)(t,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),t}(),PE=function(){function t(y,l,m){Object(g.a)(this,t),Object(r.a)(this,"_el",void 0),Object(r.a)(this,"_mousePan",void 0),Object(r.a)(this,"_touchPan",void 0),Object(r.a)(this,"_inertiaOptions",void 0),this._el=y,this._mousePan=l,this._touchPan=m}return Object(v.a)(t,[{key:"enable",value:function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),t}(),wE=function(){function t(y,l,m){Object(g.a)(this,t),Object(r.a)(this,"_mouseRotate",void 0),Object(r.a)(this,"_mousePitch",void 0),Object(r.a)(this,"_pitchWithRotate",void 0),this._pitchWithRotate=y.pitchWithRotate,this._mouseRotate=l,this._mousePitch=m}return Object(v.a)(t,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),t}(),RE=function(){function t(y,l,m,a){Object(g.a)(this,t),Object(r.a)(this,"_el",void 0),Object(r.a)(this,"_touchZoom",void 0),Object(r.a)(this,"_touchRotate",void 0),Object(r.a)(this,"_tapDragZoom",void 0),Object(r.a)(this,"_rotationDisabled",void 0),Object(r.a)(this,"_enabled",void 0),this._el=y,this._touchZoom=l,this._touchRotate=m,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0}return Object(v.a)(t,[{key:"enable",value:function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),t}();function Qm(t,y){if(t.length!==y.length)throw new Error("The number of touches and points are not equal - touches ".concat(t.length,", points ").concat(y.length));for(var l={},m=0;m<t.length;m++)l[t[m].identifier]=y[m];return l}function IE(t){var y=new yu.a(0,0),l=Object(Re.a)(t),m;try{for(l.s();!(m=l.n()).done;){var a=m.value;y._add(a)}}catch(T){l.e(T)}finally{l.f()}return y.div(t.length)}var Ky=500,LE=500,qm=30,DE=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"numTouches",void 0),Object(r.a)(this,"centroid",void 0),Object(r.a)(this,"startTime",void 0),Object(r.a)(this,"aborted",void 0),Object(r.a)(this,"touches",void 0),this.reset(),this.numTouches=y.numTouches}return Object(v.a)(t,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(l,m,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=l.timeStamp),a.length===this.numTouches&&(this.centroid=IE(m),this.touches=Qm(a,m)))}},{key:"touchmove",value:function(l,m,a){if(!(this.aborted||!this.centroid)){var T=Qm(a,m);for(var R in this.touches){var U=this.touches[R],Y=T[R];(!Y||Y.dist(U)>qm)&&(this.aborted=!0)}}}},{key:"touchend",value:function(l,m,a){if((!this.centroid||l.timeStamp-this.startTime>LE)&&(this.aborted=!0),a.length===0){var T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}]),t}(),e0=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"singleTap",void 0),Object(r.a)(this,"numTaps",void 0),Object(r.a)(this,"lastTime",void 0),Object(r.a)(this,"lastTap",void 0),Object(r.a)(this,"count",void 0),this.singleTap=new DE(y),this.numTaps=y.numTaps,this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this.lastTime=Infinity,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(l,m,a){this.singleTap.touchstart(l,m,a)}},{key:"touchmove",value:function(l,m,a){this.singleTap.touchmove(l,m,a)}},{key:"touchend",value:function(l,m,a){var T=this.singleTap.touchend(l,m,a);if(T){var R=l.timeStamp-this.lastTime<Ky,U=!this.lastTap||this.lastTap.dist(T)<qm;if((!R||!U)&&this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}]),t}(),jE=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_swipePoint",void 0),Object(r.a)(this,"_swipeTouch",void 0),Object(r.a)(this,"_tapTime",void 0),Object(r.a)(this,"_tapPoint",void 0),Object(r.a)(this,"_tap",void 0),this._tap=new e0({numTouches:1,numTaps:1}),this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}},{key:"touchstart",value:function(l,m,a){if(!this._swipePoint)if(!this._tapTime)this._tap.touchstart(l,m,a);else{var T=m[0],R=l.timeStamp-this._tapTime<Ky,U=this._tapPoint.dist(T)<qm;!R||!U?this.reset():a.length>0&&(this._swipePoint=T,this._swipeTouch=a[0].identifier)}}},{key:"touchmove",value:function(l,m,a){if(!this._tapTime)this._tap.touchmove(l,m,a);else if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var T=m[0],R=T.y-this._swipePoint.y;return this._swipePoint=T,l.preventDefault(),this._active=!0,{zoomDelta:R/128}}}},{key:"touchend",value:function(l,m,a){if(this._tapTime)this._swipePoint&&a.length===0&&this.reset();else{var T=this._tap.touchend(l,m,a);T&&(this._tapTime=l.timeStamp,this._tapPoint=T)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),BE=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_tr",void 0),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_zoomIn",void 0),Object(r.a)(this,"_zoomOut",void 0),this._tr=new Hp(y),this._zoomIn=new e0({numTouches:1,numTaps:2}),this._zoomOut=new e0({numTouches:2,numTaps:1}),this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(l,m,a){this._zoomIn.touchstart(l,m,a),this._zoomOut.touchstart(l,m,a)}},{key:"touchmove",value:function(l,m,a){this._zoomIn.touchmove(l,m,a),this._zoomOut.touchmove(l,m,a)}},{key:"touchend",value:function(l,m,a){var T=this,R=this._zoomIn.touchend(l,m,a),U=this._zoomOut.touchend(l,m,a),Y=this._tr;if(R)return this._active=!0,l.preventDefault(),setTimeout(function(){return T.reset()},0),{cameraAnimation:function(me){return me.easeTo({duration:300,zoom:Y.zoom+1,around:Y.unproject(R)},{originalEvent:l})}};if(U)return this._active=!0,l.preventDefault(),setTimeout(function(){return T.reset()},0),{cameraAnimation:function(me){return me.easeTo({duration:300,zoom:Y.zoom-1,around:Y.unproject(U)},{originalEvent:l})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),FE=function(){function t(y,l){Object(g.a)(this,t),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_touches",void 0),Object(r.a)(this,"_clickTolerance",void 0),Object(r.a)(this,"_sum",void 0),Object(r.a)(this,"_map",void 0),this._clickTolerance=y.clickTolerance||1,this._map=l,this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new yu.a(0,0)}},{key:"minTouchs",value:function(){return this._map.cooperativeGestures.isEnabled()?2:1}},{key:"touchstart",value:function(l,m,a){return this._calculateTransform(l,m,a)}},{key:"touchmove",value:function(l,m,a){if(!(!this._active||a.length<this.minTouchs()))return l.preventDefault(),this._calculateTransform(l,m,a)}},{key:"touchend",value:function(l,m,a){this._calculateTransform(l,m,a),this._active&&a.length<this.minTouchs()&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(l,m,a){a.length>0&&(this._active=!0);var T=Qm(a,m),R=new yu.a(0,0),U=new yu.a(0,0),Y=0;for(var oe in T){var me=T[oe],Ce=this._touches[oe];Ce&&(R._add(me),U._add(me.sub(Ce)),Y++,T[oe]=me)}if(this._touches=T,!(Y<this.minTouchs()||!U.mag())){var Ve=U.div(Y);if(this._sum._add(Ve),!(this._sum.mag()<this._clickTolerance)){var ut=R.div(Y);return{around:ut,panDelta:Ve}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),t0=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"_enabled",void 0),Object(r.a)(this,"_active",void 0),Object(r.a)(this,"_firstTwoTouches",void 0),Object(r.a)(this,"_vector",void 0),Object(r.a)(this,"_startVector",void 0),Object(r.a)(this,"_aroundCenter",void 0),this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"touchstart",value:function(l,m,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([m[0],m[1]]))}},{key:"touchmove",value:function(l,m,a){if(!!this._firstTwoTouches){l.preventDefault();var T=Object(w.a)(this._firstTwoTouches,2),R=T[0],U=T[1],Y=qg(a,m,R),oe=qg(a,m,U);if(!(!Y||!oe)){var me=this._aroundCenter?null:Y.add(oe).div(2);return this._move([Y,oe],me,l)}}}},{key:"touchend",value:function(l,m,a){if(!!this._firstTwoTouches){var T=Object(w.a)(this._firstTwoTouches,2),R=T[0],U=T[1],Y=qg(a,m,R),oe=qg(a,m,U);Y&&oe||(this._active&&Ku.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}}]),t}();function qg(t,y,l){for(var m=0;m<t.length;m++)if(t[m].identifier===l)return y[m]}var NE=.1;function Jy(t,y){return Math.log(t/y)/Math.LN2}var UE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"_distance",void 0),Object(r.a)(Object(p.a)(m),"_startDistance",void 0),m}return Object(v.a)(l,[{key:"reset",value:function(){Object(C.a)(Object(O.a)(l.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(a){this._startDistance=this._distance=a[0].dist(a[1])}},{key:"_move",value:function(a,T){var R=this._distance;if(this._distance=a[0].dist(a[1]),!(!this._active&&Math.abs(Jy(this._distance,this._startDistance))<NE))return this._active=!0,{zoomDelta:Jy(this._distance,R),pinchAround:T}}}]),l}(t0),kE=25;function Qy(t,y){return t.angleWith(y)*180/Math.PI}var zE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"_minDiameter",void 0),m}return Object(v.a)(l,[{key:"reset",value:function(){Object(C.a)(Object(O.a)(l.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}},{key:"_move",value:function(a,T,R){var U=this._vector;if(this._vector=a[0].sub(a[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Qy(this._vector,U),pinchAround:T}}},{key:"_isBelowThreshold",value:function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var T=Math.PI*this._minDiameter,R=kE/T*360,U=Qy(a,this._startVector);return Math.abs(U)<R}}]),l}(t0);function r0(t){return Math.abs(t.y)>Math.abs(t.x)}var VE=100,WE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;return Object(g.a)(this,l),a=y.call(this),Object(r.a)(Object(p.a)(a),"_valid",void 0),Object(r.a)(Object(p.a)(a),"_firstMove",void 0),Object(r.a)(Object(p.a)(a),"_lastPoints",void 0),Object(r.a)(Object(p.a)(a),"_map",void 0),Object(r.a)(Object(p.a)(a),"_currentTouchCount",0),a._map=m,a}return Object(v.a)(l,[{key:"reset",value:function(){Object(C.a)(Object(O.a)(l.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"touchstart",value:function(a,T,R){Object(C.a)(Object(O.a)(l.prototype),"touchstart",this).call(this,a,T,R),this._currentTouchCount=R.length}},{key:"_start",value:function(a){this._lastPoints=a,r0(a[0].sub(a[1]))&&(this._valid=!1)}},{key:"_move",value:function(a,T,R){if(!(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)){var U=a[0].sub(this._lastPoints[0]),Y=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(U,Y,R.timeStamp),!!this._valid){this._lastPoints=a,this._active=!0;var oe=(U.y+Y.y)/2,me=-.5;return{pitchDelta:oe*me}}}}},{key:"gestureBeginsVertically",value:function(a,T,R){if(this._valid!==void 0)return this._valid;var U=2,Y=a.mag()>=U,oe=T.mag()>=U;if(!(!Y&&!oe)){if(!Y||!oe)return this._firstMove===void 0&&(this._firstMove=R),R-this._firstMove<VE?void 0:!1;var me=a.y>0==T.y>0;return r0(a)&&r0(T)&&me}}}]),l}(t0),em={linearity:.3,easing:Vm(0,0,.3,1)},HE=ic({deceleration:2500,maxSpeed:1400},em),GE=ic({deceleration:20,maxSpeed:1400},em),XE=ic({deceleration:1e3,maxSpeed:360},em),YE=ic({deceleration:1e3,maxSpeed:90},em),$E=function(){function t(y){Object(g.a)(this,t),Object(r.a)(this,"_map",void 0),Object(r.a)(this,"_inertiaBuffer",void 0),this._map=y,this.clear()}return Object(v.a)(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Xf.now(),settings:l})}},{key:"_drainInertiaBuffer",value:function(){for(var l=this._inertiaBuffer,m=Xf.now(),a=160;l.length>0&&m-l[0].time>a;)l.shift()}},{key:"_onMoveEnd",value:function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var m={zoom:0,bearing:0,pitch:0,pan:new yu.a(0,0),pinchAround:void 0,around:void 0},a=Object(Re.a)(this._inertiaBuffer),T;try{for(a.s();!(T=a.n()).done;){var R=T.value,U=R.settings;m.zoom+=U.zoomDelta||0,m.bearing+=U.bearingDelta||0,m.pitch+=U.pitchDelta||0,U.panDelta&&m.pan._add(U.panDelta),U.around&&(m.around=U.around),U.pinchAround&&(m.pinchAround=U.pinchAround)}}catch(vr){a.e(vr)}finally{a.f()}var Y=this._inertiaBuffer[this._inertiaBuffer.length-1],oe=Y.time-this._inertiaBuffer[0].time,me={};if(m.pan.mag()){var Ce=rm(m.pan.mag(),oe,ic({},HE,l||{}));me.offset=m.pan.mult(Ce.amount/m.pan.mag()),me.center=this._map.transform.center,tm(me,Ce)}if(m.zoom){var Ve=rm(m.zoom,oe,GE);me.zoom=this._map.transform.zoom+Ve.amount,tm(me,Ve)}if(m.bearing){var ut=rm(m.bearing,oe,XE);me.bearing=this._map.transform.bearing+Mh(ut.amount,-179,179),tm(me,ut)}if(m.pitch){var Ft=rm(m.pitch,oe,YE);me.pitch=this._map.transform.pitch+Ft.amount,tm(me,Ft)}if(me.zoom||me.bearing){var Nt=m.pinchAround===void 0?m.around:m.pinchAround;me.around=Nt?this._map.unproject(Nt):this._map.getCenter()}return this.clear(),ic(me,{noMoveStart:!0})}}}]),t}();function tm(t,y){(!t.duration||t.duration<y.duration)&&(t.duration=y.duration,t.easing=y.easing)}function rm(t,y,l){var m=l.maxSpeed,a=l.linearity,T=l.deceleration,R=Mh(t*a/(y/1e3),-m,m),U=Math.abs(R)/(T*a);return{easing:l.easing,duration:U*1e3,amount:R*(U/2)}}var nm=function(y){return y.zoom||y.drag||y.pitch||y.rotate},ZE=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m,a){var T;return Object(g.a)(this,l),T=y.call(this,m),Object(r.a)(Object(p.a)(T),"type","renderFrame"),Object(r.a)(Object(p.a)(T),"timeStamp",void 0),T.timeStamp=a,T}return Object(v.a)(l)}(Ys);function n0(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var KE=function(){function t(y,l){var m=this;Object(g.a)(this,t),Object(r.a)(this,"_map",void 0),Object(r.a)(this,"_el",void 0),Object(r.a)(this,"_handlers",void 0),Object(r.a)(this,"_eventsInProgress",void 0),Object(r.a)(this,"_frameId",void 0),Object(r.a)(this,"_inertia",void 0),Object(r.a)(this,"_bearingSnap",void 0),Object(r.a)(this,"_handlersById",void 0),Object(r.a)(this,"_updatingCamera",void 0),Object(r.a)(this,"_changes",void 0),Object(r.a)(this,"_zoom",void 0),Object(r.a)(this,"_previousActiveHandlers",void 0),Object(r.a)(this,"_listeners",void 0),Object(r.a)(this,"handleWindowEvent",function(Ve){m.handleEvent(Ve,"".concat(Ve.type,"Window"))}),Object(r.a)(this,"handleEvent",function(Ve,ut){if(Ve.type==="blur"){m.stop(!0);return}m._updatingCamera=!0;var Ft=Ve.type==="renderFrame"?void 0:Ve,Nt={needsRenderFrame:!1},vr={},_r={},Sr=Ve.touches,cn=Sr?m._getMapTouches(Sr):void 0,Bn=cn?Ku.touchPos(m._map.getCanvasContainer(),cn):Ku.mousePos(m._map.getCanvasContainer(),Ve),Kn=Object(Re.a)(m._handlers),wn;try{for(Kn.s();!(wn=Kn.n()).done;){var vn=wn.value,ti=vn.handlerName,Mi=vn.handler,Ki=vn.allowed;if(!!Mi.isEnabled()){var Ii=void 0;m._blockedByActive(_r,Ki,ti)?Mi.reset():Mi[ut||Ve.type]&&(Ii=Mi[ut||Ve.type](Ve,Bn,cn),m.mergeHandlerResult(Nt,vr,Ii,ti,Ft),Ii&&Ii.needsRenderFrame&&m._triggerRenderFrame()),(Ii||Mi.isActive())&&(_r[ti]=Mi)}}}catch(wu){Kn.e(wu)}finally{Kn.f()}var xa={};for(var La in m._previousActiveHandlers)_r[La]||(xa[La]=Ft);m._previousActiveHandlers=_r,(Object.keys(xa).length||n0(Nt))&&(m._changes.push([Nt,vr,xa]),m._triggerRenderFrame()),(Object.keys(_r).length||n0(Nt))&&m._map._stop(!0),m._updatingCamera=!1;var Cs=Nt.cameraAnimation;Cs&&(m._inertia.clear(),m._fireEvents({},{},!0),m._changes=[],Cs(m._map))}),this._map=y,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $E(y),this._bearingSnap=l.bearingSnap||7,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[window,"blur",void 0]];var T=Object(Re.a)(this._listeners),R;try{for(T.s();!(R=T.n()).done;){var U=R.value,Y=Object(w.a)(U,3),oe=Y[0],me=Y[1],Ce=Y[2];Ku.addEventListener(oe,me,oe===document?this.handleWindowEvent:this.handleEvent,Ce)}}catch(Ve){T.e(Ve)}finally{T.f()}}return Object(v.a)(t,[{key:"destroy",value:function(){var l=Object(Re.a)(this._listeners),m;try{for(l.s();!(m=l.n()).done;){var a=m.value,T=Object(w.a)(a,3),R=T[0],U=T[1],Y=T[2];Ku.removeEventListener(R,U,R===document?this.handleWindowEvent:this.handleEvent,Y)}}catch(oe){l.e(oe)}finally{l.f()}}},{key:"_addDefaultHandlers",value:function(l){var m=this,a=this._map,T=a.getCanvasContainer();this._add("mapEvent",new pE(a,l));var R=a.boxZoom=new uE(a,l);this._add("boxZoom",R),l.interactive&&l.boxZoom&&R.enable();var U=a.cooperativeGestures=new cE(a,l.cooperativeGestures);this._add("cooperativeGestures",U),l.cooperativeGestures&&U.enable();var Y=new BE(a),oe=new lE(a);a.doubleClickZoom=new CE(oe,Y),this._add("tapZoom",Y),this._add("clickZoom",oe),l.interactive&&l.doubleClickZoom&&a.doubleClickZoom.enable();var me=new jE;this._add("tapDragZoom",me);var Ce=a.touchPitch=new WE(a);this._add("touchPitch",Ce),l.interactive&&l.touchPitch&&a.touchPitch.enable(l.touchPitch);var Ve=EE(l),ut=SE(l);a.dragRotate=new wE(l,Ve,ut),this._add("mouseRotate",Ve,["mousePitch"]),this._add("mousePitch",ut,["mouseRotate"]),l.interactive&&l.dragRotate&&a.dragRotate.enable();var Ft=xE(l),Nt=new FE(l,a);a.dragPan=new PE(T,Ft,Nt),this._add("mousePan",Ft),this._add("touchPan",Nt,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&a.dragPan.enable(l.dragPan);var vr=new zE,_r=new UE;a.touchZoomRotate=new RE(T,_r,vr,me),this._add("touchRotate",vr,["touchPan","touchZoom"]),this._add("touchZoom",_r,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&a.touchZoomRotate.enable(l.touchZoomRotate);var Sr=a.scrollZoom=new ME(a,function(){return m._triggerRenderFrame()});this._add("scrollZoom",Sr,["mousePan"]),l.interactive&&l.scrollZoom&&a.scrollZoom.enable(l.scrollZoom);var cn=a.keyboard=new hE(a);this._add("keyboard",cn),l.interactive&&l.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new gE(a))}},{key:"_add",value:function(l,m,a){this._handlers.push({handlerName:l,handler:m,allowed:a}),this._handlersById[l]=m}},{key:"stop",value:function(l){if(!this._updatingCamera){var m=Object(Re.a)(this._handlers),a;try{for(m.s();!(a=m.n()).done;){var T=a.value,R=T.handler;R.reset()}}catch(U){m.e(U)}finally{m.f()}this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}},{key:"isActive",value:function(){var l=Object(Re.a)(this._handlers),m;try{for(l.s();!(m=l.n()).done;){var a=m.value,T=a.handler;if(T.isActive())return!0}}catch(R){l.e(R)}finally{l.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(nm(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(l,m,a){for(var T in l)if(T!==a&&(!m||m.indexOf(T)<0))return!0;return!1}},{key:"_getMapTouches",value:function(l){var m=[],a=Object(Re.a)(l),T;try{for(a.s();!(T=a.n()).done;){var R=T.value,U=R.target;this._el.contains(U)&&m.push(R)}}catch(Y){a.e(Y)}finally{a.f()}return m}},{key:"mergeHandlerResult",value:function(l,m,a,T,R){if(!!a){ic(l,a);var U={handlerName:T,originalEvent:a.originalEvent||R};a.zoomDelta!==void 0&&(m.zoom=U),a.panDelta!==void 0&&(m.drag=U),a.pitchDelta!==void 0&&(m.pitch=U),a.bearingDelta!==void 0&&(m.rotate=U)}}},{key:"_applyChanges",value:function(){var l={},m={},a={},T=Object(Re.a)(this._changes),R;try{for(T.s();!(R=T.n()).done;){var U=R.value,Y=Object(w.a)(U,3),oe=Y[0],me=Y[1],Ce=Y[2];oe.panDelta&&(l.panDelta=(l.panDelta||new yu.a(0,0))._add(oe.panDelta)),oe.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+oe.zoomDelta),oe.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+oe.bearingDelta),oe.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+oe.pitchDelta),oe.around!==void 0&&(l.around=oe.around),oe.pinchAround!==void 0&&(l.pinchAround=oe.pinchAround),oe.noInertia&&(l.noInertia=oe.noInertia),ic(m,me),ic(a,Ce)}}catch(Ve){T.e(Ve)}finally{T.f()}this._updateMapTransform(l,m,a),this._changes=[]}},{key:"_updateMapTransform",value:function(l,m,a){var T=this._map,R=T._getTransformForUpdate();if(!n0(l))return this._fireEvents(m,a,!0);var U=l.panDelta,Y=l.zoomDelta,oe=l.bearingDelta,me=l.pitchDelta,Ce=l.pinchAround,Ve=l.around;Ce!==void 0&&(Ve=Ce),T._stop(!0),Ve=Ve||T.transform.centerPoint;var ut=R.pointLocation(U?Ve.sub(U):Ve);oe&&(R.bearing+=oe),me&&(R.pitch+=me),Y&&(R.zoom+=Y),R.setLocationAtPoint(ut,Ve),T._applyUpdatedTransform(R),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(m,a,!0)}},{key:"_fireEvents",value:function(l,m,a){var T=this,R=nm(this._eventsInProgress),U=nm(l),Y={};for(var oe in l){var me=l[oe].originalEvent;this._eventsInProgress[oe]||(Y["".concat(oe,"start")]=me),this._eventsInProgress[oe]=l[oe]}!R&&U&&this._fireEvent("movestart",U.originalEvent);for(var Ce in Y)this._fireEvent(Ce,Y[Ce]);U&&this._fireEvent("move",U.originalEvent);for(var Ve in l){var ut=l[Ve].originalEvent;this._fireEvent(Ve,ut)}var Ft={},Nt;for(var vr in this._eventsInProgress){var _r=this._eventsInProgress[vr],Sr=_r.handlerName,cn=_r.originalEvent;this._handlersById[Sr].isActive()||(delete this._eventsInProgress[vr],Nt=m[Sr]||cn,Ft["".concat(vr,"end")]=Nt)}for(var Bn in Ft)this._fireEvent(Bn,Ft[Bn]);var Kn=nm(this._eventsInProgress),wn=(R||U)&&!Kn;if(a&&wn){this._updatingCamera=!0;var vn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ti=function(Ki){return Ki!==0&&-T._bearingSnap<Ki&&Ki<T._bearingSnap};vn&&(vn.essential||!Xf.prefersReducedMotion)?(ti(vn.bearing||this._map.getBearing())&&(vn.bearing=0),vn.freezeElevation=!0,this._map.easeTo(vn,{originalEvent:Nt})):(this._map.fire(new Ys("moveend",{originalEvent:Nt})),ti(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(l,m){this._map.fire(new Ys(l,m?{originalEvent:m}:{}))}},{key:"_requestFrame",value:function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(m){delete l._frameId,l.handleEvent(new ZE("renderFrame",m)),l._applyChanges()})}},{key:"_triggerRenderFrame",value:function(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}]),t}(),JE=function(){function t(){Object(g.a)(this,t),Object(r.a)(this,"_queue",void 0),Object(r.a)(this,"_id",void 0),Object(r.a)(this,"_cleared",void 0),Object(r.a)(this,"_currentlyRunning",void 0),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return Object(v.a)(t,[{key:"add",value:function(l){var m=++this._id,a=this._queue;return a.push({callback:l,id:m,cancelled:!1}),m}},{key:"remove",value:function(l){var m=this._currentlyRunning,a=m?this._queue.concat(m):this._queue,T=Object(Re.a)(a),R;try{for(T.s();!(R=T.n()).done;){var U=R.value;if(U.id===l){U.cancelled=!0;return}}}catch(Y){T.e(Y)}finally{T.f()}}},{key:"run",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");var m=this._currentlyRunning=this._queue;this._queue=[];var a=Object(Re.a)(m),T;try{for(a.s();!(T=a.n()).done;){var R=T.value;if(!R.cancelled&&(R.callback(l),this._cleared))break}}catch(U){a.e(U)}finally{a.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),t}();function QE(t,y){var l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(l||m)&&(y||(y=document),!!y)){var a=y.head||y.getElementsByTagName("head")[0];if(!a){a=y.createElement("head");var T=y.body||y.getElementsByTagName("body")[0];T?T.parentNode.insertBefore(a,T):y.documentElement.appendChild(a)}var R=y.createElement("style");return R.type="text/css",R.styleSheet?R.styleSheet.cssText=t:R.appendChild(y.createTextNode(t)),a.appendChild(R),R}}QE(`.l7-map {
  font:
    12px/20px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: grab;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  touch-action: none;
}

.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures,
.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-cooperative-gesture-screen {
  background: rgba(0 0 0 / 40%);
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 1rem;
  font-size: 1.4em;
  line-height: 1.2;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease 1s;
  z-index: 99999;
}

.l7-cooperative-gesture-screen.l7-show {
  opacity: 1;
  transition: opacity 0.05s;
}

.l7-cooperative-gesture-screen .l7-mobile-message {
  display: none;
}

@media (hover: none), (width <= 480px) {
  .l7-cooperative-gesture-screen .l7-desktop-message {
    display: none;
  }

  .l7-cooperative-gesture-screen .l7-mobile-message {
    display: block;
  }
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right {
  position: absolute;
  pointer-events: none;
  z-index: 2;
}
.l7-ctrl-top-left {
  top: 0;
  left: 0;
}
.l7-ctrl-top-right {
  top: 0;
  right: 0;
}
.l7-ctrl-bottom-left {
  bottom: 0;
  left: 0;
}
.l7-ctrl-bottom-right {
  right: 0;
  bottom: 0;
}

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl {
  margin: 10px 0 0 10px;
  float: left;
}
.l7-ctrl-top-right .l7-ctrl {
  margin: 10px 10px 0 0;
  float: right;
}
.l7-ctrl-bottom-left .l7-ctrl {
  margin: 0 0 10px 10px;
  float: left;
}
.l7-ctrl-bottom-right .l7-ctrl {
  margin: 0 10px 10px 0;
  float: right;
}

.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
  cursor: crosshair;
}

.l7-boxzoom {
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  background: #fff;
  border: 2px dotted #202020;
  opacity: 0.5;
  z-index: 10;
}
`);var im=-2,qy=22,Md=0,e1=60,am=85,qE={interactive:!0,bearingSnap:7,scrollZoom:!0,minZoom:im,maxZoom:qy,minPitch:Md,maxPitch:e1,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,fadeDuration:300,clickTolerance:3,pitchWithRotate:!0},eS=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(m){var a;Object(g.a)(this,l);var T=Object(i.a)(Object(i.a)({},qE),m);if(T.minZoom!=null&&T.maxZoom!=null&&T.minZoom>T.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(T.minPitch!=null&&T.maxPitch!=null&&T.minPitch>T.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(T.minPitch!=null&&T.minPitch<Md)throw new Error("minPitch must be greater than or equal to ".concat(Md));if(T.maxPitch!=null&&T.maxPitch>am)throw new Error("maxPitch must be less than or equal to ".concat(am));var R=new sE(T.minZoom,T.maxZoom,T.minPitch,T.maxPitch,T.renderWorldCopies);if(a=y.call(this,R,{bearingSnap:T.bearingSnap}),Object(r.a)(Object(p.a)(a),"_container",void 0),Object(r.a)(Object(p.a)(a),"_canvasContainer",void 0),Object(r.a)(Object(p.a)(a),"_interactive",void 0),Object(r.a)(Object(p.a)(a),"_frameRequest",void 0),Object(r.a)(Object(p.a)(a),"_loaded",void 0),Object(r.a)(Object(p.a)(a),"_idleTriggered",!1),Object(r.a)(Object(p.a)(a),"_fullyLoaded",void 0),Object(r.a)(Object(p.a)(a),"_trackResize",void 0),Object(r.a)(Object(p.a)(a),"_resizeObserver",void 0),Object(r.a)(Object(p.a)(a),"_preserveDrawingBuffer",void 0),Object(r.a)(Object(p.a)(a),"_failIfMajorPerformanceCaveat",void 0),Object(r.a)(Object(p.a)(a),"_fadeDuration",void 0),Object(r.a)(Object(p.a)(a),"_crossSourceCollisions",void 0),Object(r.a)(Object(p.a)(a),"_crossFadingFactor",1),Object(r.a)(Object(p.a)(a),"_collectResourceTiming",void 0),Object(r.a)(Object(p.a)(a),"_renderTaskQueue",new JE),Object(r.a)(Object(p.a)(a),"_mapId",$2()),Object(r.a)(Object(p.a)(a),"_removed",void 0),Object(r.a)(Object(p.a)(a),"_clickTolerance",void 0),Object(r.a)(Object(p.a)(a),"scrollZoom",void 0),Object(r.a)(Object(p.a)(a),"boxZoom",void 0),Object(r.a)(Object(p.a)(a),"dragRotate",void 0),Object(r.a)(Object(p.a)(a),"dragPan",void 0),Object(r.a)(Object(p.a)(a),"keyboard",void 0),Object(r.a)(Object(p.a)(a),"doubleClickZoom",void 0),Object(r.a)(Object(p.a)(a),"touchZoomRotate",void 0),Object(r.a)(Object(p.a)(a),"touchPitch",void 0),Object(r.a)(Object(p.a)(a),"cooperativeGestures",void 0),Object(r.a)(Object(p.a)(a),"_onMapScroll",function(oe){if(oe.target===a._container)return a._container.scrollTop=0,a._container.scrollLeft=0,!1}),a._interactive=T.interactive,a._trackResize=T.trackResize===!0,a._bearingSnap=T.bearingSnap,a._fadeDuration=T.fadeDuration,a._clickTolerance=T.clickTolerance,typeof T.container=="string"){if(a._container=document.getElementById(T.container),!a._container)throw new Error("Container '".concat(T.container,"' not found."))}else if(T.container instanceof HTMLElement)a._container=T.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(T.maxBounds&&a.setMaxBounds(T.maxBounds),a._setupContainer(),a.on("move",function(){return a._update()}).on("moveend",function(){return a._update()}).on("zoom",function(){return a._update()}).once("idle",function(){a._idleTriggered=!0}),typeof window!="undefined"){var U=!1,Y=n.N.throttle(function(oe){a._trackResize&&!a._removed&&a.resize(oe)._update()},50);a._resizeObserver=new ResizeObserver(function(oe){if(!U){U=!0;return}Y(oe)}),a._resizeObserver.observe(a._container)}return a.handlers=new KE(Object(p.a)(a),T),a.jumpTo({center:T.center,zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}),T.bounds&&(a.resize(),a.fitBounds(T.bounds,ic({},T.fitBoundsOptions,{duration:0}))),a.resize(),a}return Object(v.a)(l,[{key:"_getMapId",value:function(){return this._mapId}},{key:"calculateCameraOptionsFromTo",value:function(a,T,R,U){return Object(C.a)(Object(O.a)(l.prototype),"calculateCameraOptionsFromTo",this).call(this,a,T,R,U)}},{key:"resize",value:function(a){var T,R=this._containerDimensions(),U=R[0],Y=R[1];this.transform.resize(U,Y),(T=this._requestedCameraState)===null||T===void 0||T.resize(U,Y);var oe=!this._moving;return oe&&(this.stop(),this.fire(new Ys("movestart",a)).fire(new Ys("move",a))),this.fire(new Ys("resize",a)),oe&&this.fire(new Ys("moveend",a)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(a){return this.transform.setMaxBounds(a&&Wp.convert(a)),this._update()}},{key:"setMinZoom",value:function(a){if(a=a==null?im:a,a>=im&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw new Error("minZoom must be between ".concat(im," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(a){if(a=a==null?qy:a,a>=this.transform.minZoom)return this.transform.maxZoom=a,this.getZoom()>a&&this.setZoom(a),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(a){if(a=a==null?Md:a,a<Md)throw new Error("minPitch must be greater than or equal to ".concat(Md));if(a>=Md&&a<=this.transform.maxPitch)return this.transform.minPitch=a,this.getPitch()<a&&this.setPitch(a),this;throw new Error("minPitch must be between ".concat(Md," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(a){if(a=a==null?e1:a,a>am)throw new Error("maxPitch must be less than or equal to ".concat(am));if(a>=this.transform.minPitch)return this.transform.maxPitch=a,this.getPitch()>a&&this.setPitch(a),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(a){this.transform.renderWorldCopies=a}},{key:"project",value:function(a){return this.transform.locationPoint(hl.convert(a))}},{key:"unproject",value:function(a){return this.transform.pointLocation(yu.a.convert(a))}},{key:"isMoving",value:function(){var a;return this._moving||((a=this.handlers)===null||a===void 0?void 0:a.isMoving())}},{key:"isZooming",value:function(){var a;return this._zooming||((a=this.handlers)===null||a===void 0?void 0:a.isZooming())}},{key:"isRotating",value:function(){var a;return this._rotating||((a=this.handlers)===null||a===void 0?void 0:a.isRotating())}},{key:"on",value:function(a,T){return Object(C.a)(Object(O.a)(l.prototype),"on",this).call(this,a,T)}},{key:"once",value:function(a,T){return Object(C.a)(Object(O.a)(l.prototype),"once",this).call(this,a,T)}},{key:"off",value:function(a,T){return Object(C.a)(Object(O.a)(l.prototype),"off",this).call(this,a,T)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"_containerDimensions",value:function(){var a=0,T=0;return this._container&&(a=this._container.clientWidth||400,T=this._container.clientHeight||300),[a,T]}},{key:"_setupContainer",value:function(){var a=this._container;a.classList.add("l7-map");var T=this._canvasContainer=Ku.create("div","l7-canvas-container",a);this._interactive&&T.classList.add("l7-interactive"),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_update",value:function(){return this.triggerRepaint(),this}},{key:"_requestRenderFrame",value:function(a){return this._update(),this._renderTaskQueue.add(a)}},{key:"_cancelRenderFrame",value:function(a){this._renderTaskQueue.remove(a)}},{key:"_render",value:function(a){if(this._renderTaskQueue.run(a),!this._removed)return this.fire(new Ys("render")),this.isMoving()||this.fire(new Ys("idle")),this}},{key:"remove",value:function(){var a;this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.handlers.destroy(),delete this.handlers,(a=this._resizeObserver)===null||a===void 0||a.disconnect(),Ku.remove(this._canvasContainer),this._container.classList.remove("l7-map"),this._removed=!0,this.fire(new Ys("remove"))}},{key:"triggerRepaint",value:function(){var a=this;this._frameRequest||(this._frameRequest=new AbortController,Xf.frameAsync(this._frameRequest).then(function(T){a._frameRequest=null,a._render(T)}).catch(function(){}))}},{key:"getCameraTargetElevation",value:function(){return this.transform.elevation}}]),l}(aE),tS=["id","style","rotation","mapInstance","version","mapSize","interactive"],rS=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){var m;Object(g.a)(this,l);for(var a=arguments.length,T=new Array(a),R=0;R<a;R++)T[R]=arguments[R];return m=y.call.apply(y,[this].concat(T)),Object(r.a)(Object(p.a)(m),"version",xy.DEFAULT),Object(r.a)(Object(p.a)(m),"viewport",void 0),m}return Object(v.a)(l,[{key:"lngLatToCoord",value:function(a){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},R=this.lngLatToMercator(a,0),U=R.x,Y=R.y;return[U-T.x,Y-T.y]}},{key:"lngLatToMercator",value:function(a,T){var R=Td.fromLngLat(a,T),U=R.x,Y=U===void 0?0:U,oe=R.y,me=oe===void 0?0:oe,Ce=R.z,Ve=Ce===void 0?0:Ce;return{x:Y,y:me,z:Ve}}},{key:"getModelMatrix",value:function(a,T,R){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},oe=Td.fromLngLat(a,T),me=oe.meterInMercatorCoordinateUnits(),Ce=ei.b.create();return ei.b.translate(Ce,Ce,ei.d.fromValues(oe.x-Y.x,oe.y-Y.y,oe.z||0-Y.z)),ei.b.scale(Ce,Ce,ei.d.fromValues(me*U[0],-me*U[1],me*U[2])),ei.b.rotateX(Ce,Ce,R[0]),ei.b.rotateY(Ce,Ce,R[1]),ei.b.rotateZ(Ce,Ce,R[2]),Ce}},{key:"init",value:function(){var a=this;return Object(ie.a)(Object(K.a)().mark(function T(){var R,U,Y,oe,me,Ce,Ve,ut,Ft,Nt,vr,_r,Sr,cn,Bn;return Object(K.a)().wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:R=a.config,U=R.id,Y=U===void 0?"map":U,oe=R.style,me=oe===void 0?"light":oe,Ce=R.rotation,Ve=Ce===void 0?0:Ce,ut=R.mapInstance,Ft=R.version,Nt=Ft===void 0?"DEFAULTMAP":Ft,vr=R.mapSize,_r=vr===void 0?1e4:vr,Sr=R.interactive,cn=Sr===void 0?!0:Sr,Bn=Object(V.a)(R,tS),a.viewport=new km,a.version=Nt,a.simpleMapCoord.setSize(_r),Nt==="SIMPLE"&&Bn.center&&(Bn.center=a.simpleMapCoord.unproject(Bn.center)),ut?(a.map=ut,a.$mapContainer=a.map.getContainer()):(a.$mapContainer=a.creatMapContainer(Y),a.map=new eS(Object(i.a)({container:a.$mapContainer,bearing:Ve},Bn))),a.map.on("load",function(){a.handleCameraChanged()}),cn&&a.map.on("move",a.handleCameraChanged),setTimeout(function(){a.handleCameraChanged()},100),a.handleCameraChanged();case 10:case"end":return wn.stop()}},T)}))()}},{key:"creatMapContainer",value:function(a){var T=a;typeof a=="string"&&(T=document.getElementById(a));var R=document.createElement("div");return R.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,T.appendChild(R),R}},{key:"exportMap",value:function(a){return""}},{key:"setMapStyle",value:function(a){}},{key:"getCanvasOverlays",value:function(){return this.getContainer()}}]),l}(Py),nS=function(t){Object(c.a)(l,t);var y=Object(h.a)(l);function l(){return Object(g.a)(this,l),y.apply(this,arguments)}return Object(v.a)(l,[{key:"getServiceConstructor",value:function(){return rS}}]),l}(jm);function Gp(t){return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},Gp(t)}function t1(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function r1(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?t1(Object(l),!0).forEach(function(m){iS(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):t1(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function iS(t,y,l){return y=aS(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function aS(t){var y=oS(t,"string");return Gp(y)==="symbol"?y:String(y)}function oS(t,y){if(Gp(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(Gp(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function sS(t,y){return fS(t)||cS(t,y)||lS(t,y)||uS()}function uS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lS(t,y){if(!!t){if(typeof t=="string")return n1(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return n1(t,y)}}function n1(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function cS(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function fS(t){if(Array.isArray(t))return t}var hS=B.a.memo(function(t){var y=t.style,l=t.className,m=t.map,a=t.option,T=t.onSceneLoaded,R=t.children,U=Object(he.useRef)(null),Y=Object(he.useState)(),oe=sS(Y,2),me=oe[0],Ce=oe[1];return Object(he.useEffect)(function(){var Ve=new Kv(r1(r1({id:U.current},a),{},{map:new nS(m)}));return Ve.on("loaded",function(){Ce(Ve),T&&T(Ve)}),function(){Ve.destroy()}},[]),Object(he.useEffect)(function(){me&&m.style&&me.setMapStyle(m.style)},[JSON.stringify(m.style)]),Object(he.useEffect)(function(){me&&m.zoom&&me.setZoom(m.zoom)},[m.zoom]),Object(he.useEffect)(function(){me&&m.center&&me.setCenter(m.center)},[JSON.stringify(m.center)]),Object(he.useEffect)(function(){me&&m.pitch&&me.setPitch(m.pitch)},[m.pitch]),Object(he.useEffect)(function(){me&&m.rotation&&me.setRotation(m.rotation)},[m.rotation]),B.a.createElement(L.Provider,{value:me},B.a.createElement("div",{ref:U,className:l,style:y},me&&R))}),rO=hS;function dS(t,y){return mS(t)||gS(t,y)||pS(t,y)||vS()}function vS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pS(t,y){if(!!t){if(typeof t=="string")return i1(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return i1(t,y)}}function i1(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function gS(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function mS(t){if(Array.isArray(t))return t}var nO=B.a.memo(function(t){var y=t.style,l=t.className,m=t.map,a=t.children,T=Object(he.useRef)(null),R=Object(he.useState)(),U=dS(R,2),Y=U[0],oe=U[1];return Object(he.useEffect)(function(){var me=new Kv({id:T.current,map:m});return me.on("loaded",function(){oe(me)}),function(){me.destroy()}},[]),B.a.createElement(L.Provider,{value:Y},B.a.createElement("div",{ref:T,className:l,style:y},Y&&a))});function Xp(t){return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},Xp(t)}var yS=["type","position"];function a1(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function _S(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?a1(Object(l),!0).forEach(function(m){bS(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):a1(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function bS(t,y,l){return y=xS(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function xS(t){var y=ES(t,"string");return Xp(y)==="symbol"?y:String(y)}function ES(t,y){if(Xp(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(Xp(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function SS(t,y){if(t==null)return{};var l=AS(t,y),m,a;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(t);for(a=0;a<T.length;a++)m=T[a],!(y.indexOf(m)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,m)||(l[m]=t[m]))}return l}function AS(t,y){if(t==null)return{};var l={},m=Object.keys(t),a,T;for(T=0;T<m.length;T++)a=m[T],!(y.indexOf(a)>=0)&&(l[a]=t[a]);return l}var OS={exportImage:we,fullscreen:ye,geoLocate:Oe,layer:xe,layerSwitch:xe,logo:Ae,mapTheme:le,mouseLocation:z,zoom:ug,scale:ae},iO=B.a.memo(function(y){var l=o(),m=Object(he.useRef)(),a=y.type,T=y.position,R=SS(y,yS);return Object(he.useEffect)(function(){var U=OS[a],Y=new U(_S({position:T},R));return m.current=Y,l.addControl(Y),function(){m.current=void 0,l.removeControl(Y)}},[a]),Object(he.useEffect)(function(){m.current&&m.current.setPosition(T||"bottomleft")},[T]),null}),i0=Ee("i8i4");function o1(t,y){return PS(t)||CS(t,y)||MS(t,y)||TS()}function TS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MS(t,y){if(!!t){if(typeof t=="string")return s1(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return s1(t,y)}}function s1(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function CS(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function PS(t){if(Array.isArray(t))return t}var u1=he.useEffect,l1=he.useState,wS=/\B([A-Z])/g,RS=function(y){return y.replace(wS,"-$1").toLowerCase()};function aO(t){var y=t.className,l=t.style,m=t.children,a=t.position,T=l1(),R=o1(T,2),U=R[0],Y=R[1],oe=o(),me=l1(function(){return document.createElement("div")}),Ce=o1(me,1),Ve=Ce[0];return u1(function(){var ut=new I({position:a});return ut.onAdd=function(){if(y&&(Ve.className=y),l){var Ft=Object.keys(l).map(function(Nt){return"".concat(RS(Nt),":").concat(l[Nt])}).join(";");Ve.style.cssText=Ft}return Ve},ut.onRemove=function(){},Y(ut),oe.addControl(ut),function(){oe.removeControl(ut)}},[]),u1(function(){U&&U.setPosition(a||"bottomleft")},[a]),Object(i0.createPortal)(m,Ve)}var c1=Object(he.createContext)({});function IS(){return Object(he.useContext)(c1)}var LS=Ee("Y+p1"),Ch=Ee.n(LS),DS=he.memo(function(y){var l=y.layer,m=y.active;return l.active(m.option),null},Ch.a),jS=he.memo(function(y){var l=y.layer,m=y.animate;return l.animate(m),null},Ch.a),BS=he.memo(function(y){var l=y.layer,m=y.color;return m.field?l.color(m.field,m.values):l.color(m.values),null},Ch.a),FS=he.memo(function(y){var l=y.layer,m=y.filter;return m.field&&l.filter(m.field,m.values),null},Ch.a),NS=he.memo(function(y){var l=y.layer,m=y.scale;return l.scale(m.values),null},Ch.a),US=he.memo(function(y){var l=y.layer,m=y.select;return l.select(m.option),null},Ch.a),kS=he.memo(function(y){var l=y.layer,m=y.shape;return m.field?l.shape(m.field,m.values):l.shape(m.values),null},Ch.a),zS=he.memo(function(y){var l=y.layer,m=y.size;return m.field?l.size(m.field,m.values):l.size(m.values),null},Ch.a),VS=["data"];function WS(t,y){if(t==null)return{};var l=HS(t,y),m,a;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(t);for(a=0;a<T.length;a++)m=T[a],!(y.indexOf(m)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,m)||(l[m]=t[m]))}return l}function HS(t,y){if(t==null)return{};var l={},m=Object.keys(t),a,T;for(T=0;T<m.length;T++)a=m[T],!(y.indexOf(a)>=0)&&(l[a]=t[a]);return l}var GS=he.memo(function(y){var l=y.layer,m=y.source,a=m.data,T=WS(m,VS);return l.inited?l.setData(a,T):l.source(a,T),T.autoFit&&l.fitBounds(T&&T.fitBoundsOptions),null},Ch.a),oO=he.useEffect,XS=he.memo(function(y){var l=y.layer,m=y.style;return l.style(m),null},Ch.a);function YS(t,y){return JS(t)||KS(t,y)||ZS(t,y)||$S()}function $S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZS(t,y){if(!!t){if(typeof t=="string")return f1(t,y);var l=Object.prototype.toString.call(t).slice(8,-1);if(l==="Object"&&t.constructor&&(l=t.constructor.name),l==="Map"||l==="Set")return Array.from(t);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return f1(t,y)}}function f1(t,y){(y==null||y>t.length)&&(y=t.length);for(var l=0,m=new Array(y);l<y;l++)m[l]=t[l];return m}function KS(t,y){var l=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(l!=null){var m,a,T,R,U=[],Y=!0,oe=!1;try{if(T=(l=l.call(t)).next,y===0){if(Object(l)!==l)return;Y=!1}else for(;!(Y=(m=T.call(l)).done)&&(U.push(m.value),U.length!==y);Y=!0);}catch(me){oe=!0,a=me}finally{try{if(!Y&&l.return!=null&&(R=l.return(),Object(R)!==R))return}finally{if(oe)throw a}}return U}}function JS(t){if(Array.isArray(t))return t}var Yp=he.useEffect,QS=he.useState;function av(t,y){var l=y.source,m=y.color,a=y.shape,T=y.style,R=y.size,U=y.scale,Y=y.active,oe=y.select,me=y.filter,Ce=y.animate,Ve=y.options,ut=y.onLayerLoaded,Ft=o(),Nt=QS(function(){var Sr;switch(t){case"polygonLayer":Sr=new Xc(Ve);break;case"lineLayer":Sr=new Sv(Ve);break;case"pointLayer":Sr=new Fl(Ve);break;case"heatmapLayer":Sr=new sn(Ve);break;case"rasterLayer":Sr=new Wh(Ve);break;case"imageLayer":Sr=new pn(Ve);break;case"citybuildingLayer":Sr=new Dl(Ve);break;default:Sr=new Xc(Ve)}return Sr.on("inited",function(){ut&&ut(Sr,Ft)}),Sr}),vr=YS(Nt,1),_r=vr[0];return Yp(function(){return Ft.addLayer(_r),function(){Ft.removeLayer(_r)}},[]),Yp(function(){_r.inited&&Ve&&_r.updateLayerConfig(Ve)},[Ve==null?void 0:Ve.minZoom,Ve==null?void 0:Ve.maxZoom,Ve==null?void 0:Ve.visible]),Yp(function(){_r.inited&&(Ve==null?void 0:Ve.zIndex)&&_r.setIndex(Ve.zIndex)},[Ve==null?void 0:Ve.zIndex]),Yp(function(){_r.inited&&(Ve==null?void 0:Ve.blend)&&_r.setBlend(Ve.blend)},[Ve==null?void 0:Ve.blend]),Yp(function(){Ft.render()}),he.createElement(c1.Provider,{value:_r},he.createElement(GS,{layer:_r,source:l}),U&&he.createElement(NS,{layer:_r,scale:U}),m&&he.createElement(BS,{layer:_r,color:m}),R&&he.createElement(zS,{layer:_r,size:R}),a&&he.createElement(kS,{layer:_r,shape:a}),T&&he.createElement(XS,{layer:_r,style:T}),Y&&he.createElement(DS,{layer:_r,active:Y}),oe&&he.createElement(US,{layer:_r,select:oe}),me&&he.createElement(FS,{layer:_r,filter:me}),Ce&&he.createElement(jS,{layer:_r,animate:Ce}),y.children)}var sO=he.memo(function(y){return av("polygonLayer",y)}),uO=he.memo(function(y){return av("lineLayer",y)}),qS=he.memo(function(y){return av("pointLayer",y)}),eA=he.memo(function(y){return av("heatmapLayer",y)}),lO=he.memo(function(y){return av("rasterLayer",y)}),cO=he.memo(function(y){return av("imageLayer",y)}),fO=he.memo(function(y){return av("citybuildingLayer",y)}),tA=he.useEffect,hO=he.memo(function(t){var y=t.type,l=t.handler,m=IS();return tA(function(){return m.off(y,l),m.on(y,l),function(){m.off(y,l)}},[y,l]),null}),dO=he.memo(function(t){var y=[{title:"1",color:"rgb(239,243,255)"},{title:"10",color:"rgb(198,219,239)"},{title:"30",color:"rgb(158,202,225)"},{title:"50",color:"rgb(107,174,214)"},{title:"60",color:"rgb(49,130,189)"},{title:"100",color:"rgb(8,81,156)"}],l=t.items,m=l===void 0?y:l;return he.createElement("div",null,he.createElement("div",null,m.map(function(a,T){return he.createElement("div",{key:T,style:{background:a.color,height:"100%",display:"inline-block",cursor:"pointer",width:""+(100-m.length)/m.length+"%",marginRight:"1%",padding:5}})})),he.createElement("div",null,m.map(function(a,T){return he.createElement("div",{key:T,style:{background:"#fff",height:"100%",display:"inline-block",textAlign:"left",cursor:"pointer",width:""+(100-m.length)/m.length+"%",marginRight:"1%"}},a.title)})))});function Qv(t){return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},Qv(t)}function h1(t,y){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);y&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),l.push.apply(l,m)}return l}function om(t){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?h1(Object(l),!0).forEach(function(m){rA(t,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):h1(Object(l)).forEach(function(m){Object.defineProperty(t,m,Object.getOwnPropertyDescriptor(l,m))})}return t}function rA(t,y,l){return y=v1(y),y in t?Object.defineProperty(t,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[y]=l,t}function nA(t,y){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}function d1(t,y){for(var l=0;l<y.length;l++){var m=y[l];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(t,v1(m.key),m)}}function iA(t,y,l){return y&&d1(t.prototype,y),l&&d1(t,l),Object.defineProperty(t,"prototype",{writable:!1}),t}function v1(t){var y=aA(t,"string");return Qv(y)==="symbol"?y:String(y)}function aA(t,y){if(Qv(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(Qv(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function oA(t,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(y&&y.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),y&&a0(t,y)}function a0(t,y){return a0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,a){return m.__proto__=a,m},a0(t,y)}function sA(t){var y=cA();return function(){var m=sm(t),a;if(y){var T=sm(this).constructor;a=Reflect.construct(m,arguments,T)}else a=m.apply(this,arguments);return uA(this,a)}}function uA(t,y){if(y&&(Qv(y)==="object"||typeof y=="function"))return y;if(y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lA(t)}function lA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function sm(t){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},sm(t)}var vO=function(t){oA(l,t);var y=sA(l);function l(m){var a;return nA(this,l),a=y.call(this,m),a.el=void 0,a.scene=void 0,a.popup=void 0,a.el=document.createElement("div"),a}return iA(l,[{key:"componentDidMount",value:function(){var a,T=this.props,R=T.lnglat,U=T.children,Y=T.option,oe=T.lngLat,me=new Hh(om(om({},Y),{},{stopPropagation:(a=this.props.option)===null||a===void 0?void 0:a.stopPropagation}));R&&me.setLnglat(R),oe&&me.setLnglat(oe),U&&me.setHTML(this.el),this.popup=me,this.scene.addPopup(me)}},{key:"componentDidUpdate",value:function(a){var T,R,U,Y,oe,me,Ce=Array.isArray(a.lnglat)?a.lnglat:[a==null||(T=a.lnglat)===null||T===void 0?void 0:T.lng,a==null||(R=a.lnglat)===null||R===void 0?void 0:R.lat],Ve=Array.isArray(this.props.lnglat)?this.props.lnglat:[(U=this.props)===null||U===void 0||(Y=U.lnglat)===null||Y===void 0?void 0:Y.lng,(oe=this.props)===null||oe===void 0||(me=oe.lnglat)===null||me===void 0?void 0:me.lat],ut=Ce.toString()!==Ve.toString();if(ut){var Ft;this.popup.remove(),this.popup=new Hh(om(om({},this.props.option),{},{stopPropagation:(Ft=this.props.option)===null||Ft===void 0?void 0:Ft.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setHTML(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var a=this;return he.createElement(L.Consumer,{},function(T){return T&&(a.scene=T),Object(i0.createPortal)(a.props.children,a.el)})}}]),l}(he.PureComponent);function qv(t){return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},qv(t)}function fA(t,y){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}function p1(t,y){for(var l=0;l<y.length;l++){var m=y[l];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(t,dA(m.key),m)}}function hA(t,y,l){return y&&p1(t.prototype,y),l&&p1(t,l),Object.defineProperty(t,"prototype",{writable:!1}),t}function dA(t){var y=vA(t,"string");return qv(y)==="symbol"?y:String(y)}function vA(t,y){if(qv(t)!=="object"||t===null)return t;var l=t[Symbol.toPrimitive];if(l!==void 0){var m=l.call(t,y||"default");if(qv(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(t)}function pA(t,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(y&&y.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),y&&o0(t,y)}function o0(t,y){return o0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,a){return m.__proto__=a,m},o0(t,y)}function gA(t){var y=_A();return function(){var m=um(t),a;if(y){var T=um(this).constructor;a=Reflect.construct(m,arguments,T)}else a=m.apply(this,arguments);return mA(this,a)}}function mA(t,y){if(y&&(qv(y)==="object"||typeof y=="function"))return y;if(y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yA(t)}function yA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function um(t){return um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},um(t)}var pO=function(t){pA(l,t);var y=gA(l);function l(m){var a;return fA(this,l),a=y.call(this,m),a.el=void 0,a.scene=void 0,a.marker=void 0,a.el=document.createElement("div"),a}return hA(l,[{key:"componentDidMount",value:function(){var a=this.props,T=a.lnglat,R=a.children,U=a.option,Y=a.onMarkerLoaded,oe=new u(U);T&&oe.setLnglat(T),R&&oe.setElement(this.el),this.marker=oe,Y&&Y(oe),this.scene.addMarker(oe)}},{key:"componentDidUpdate",value:function(a){var T,R=JSON.stringify(a==null?void 0:a.lnglat)!==JSON.stringify((T=this.props)===null||T===void 0?void 0:T.lnglat);R&&this.props.lnglat&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var a=this;return he.createElement(L.Consumer,{},function(T){return T&&(a.scene=T),Object(i0.createPortal)(a.props.children,a.el)})}}]),l}(he.PureComponent),bA=he.useEffect,xA=he.memo(function(t){var y=t.type,l=t.handler,m=o();return bA(function(){return m.on(y,l),function(){m.off(y,l)}},[y]),null}),gO=xA,EA=he.useEffect,mO=he.memo(function(y){var l=y.name,m=y.url,a=o();return EA(function(){a.addImage(l,m)},[l,m]),null})},"6D9b":function(br,Ot,Ee){},"711d":function(br,Ot){function Ee(he){return function(B){return B==null?void 0:B[he]}}br.exports=Ee},"7Ix3":function(br,Ot){function Ee(he){var B=[];if(he!=null)for(var L in Object(he))B.push(L);return B}br.exports=Ee},"7sSR":function(br,Ot,Ee){"use strict";var he=Ee("t3DW").forEach,B=Ee("W+U1"),L=Ee("Sa1T"),o=Ee("LO96"),e=Ee("UFhH"),g=Ee("q7TX"),v=Ee("GOnX"),p=Ee("wnTG"),c=Ee("1uty"),h=Ee("GNKm"),i=Ee("yUZ2");function r(u){return Array.isArray(u)||u.length!==void 0}function n(u){if(Array.isArray(u))return u;var d=[];return he(u,function(b){d.push(b)}),d}function s(u){return u&&u.nodeType===1}br.exports=function(u){u=u||{};var d;if(u.idHandler)d={get:function(K){return u.idHandler.get(K,!0)},set:u.idHandler.set};else{var b=o(),_=e({idGenerator:b,stateHandler:c});d=_}var x=u.reporter;if(!x){var M=x===!1;x=g(M)}var P=f(u,"batchProcessor",p({reporter:x})),C={};C.callOnAdd=!!f(u,"callOnAdd",!0),C.debug=!!f(u,"debug",!1);var O=L(d),w=B({stateHandler:c}),S,I=f(u,"strategy","object"),j=f(u,"important",!1),N={reporter:x,batchProcessor:P,stateHandler:c,idHandler:d,important:j};if(I==="scroll"&&(v.isLegacyOpera()?(x.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),I="object"):v.isIE(9)&&(x.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),I="object")),I==="scroll")S=i(N);else if(I==="object")S=h(N);else throw new Error("Invalid strategy name: "+I);var W={};function H(ne,K,ie){function de(Fe){var Se=O.get(Fe);he(Se,function(Oe){Oe(Fe)})}function we(Fe,Se,ye){O.add(Se,ye),Fe&&ye(Se)}if(ie||(ie=K,K=ne,ne={}),!K)throw new Error("At least one element required.");if(!ie)throw new Error("Listener required.");if(s(K))K=[K];else if(r(K))K=n(K);else return x.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Re=0,_e=f(ne,"callOnAdd",C.callOnAdd),Ue=f(ne,"onReady",function(){}),rt=f(ne,"debug",C.debug);he(K,function(Se){c.getState(Se)||(c.initState(Se),d.set(Se));var ye=d.get(Se);if(rt&&x.log("Attaching listener to element",ye,Se),!w.isDetectable(Se)){if(rt&&x.log(ye,"Not detectable."),w.isBusy(Se)){rt&&x.log(ye,"System busy making it detectable"),we(_e,Se,ie),W[ye]=W[ye]||[],W[ye].push(function(){Re++,Re===K.length&&Ue()});return}return rt&&x.log(ye,"Making detectable..."),w.markBusy(Se,!0),S.makeDetectable({debug:rt,important:j},Se,function(ue){if(rt&&x.log(ye,"onElementDetectable"),c.getState(ue)){w.markAsDetectable(ue),w.markBusy(ue,!1),S.addListener(ue,de),we(_e,ue,ie);var xe=c.getState(ue);if(xe&&xe.startSize){var Ae=ue.offsetWidth,pe=ue.offsetHeight;(xe.startSize.width!==Ae||xe.startSize.height!==pe)&&de(ue)}W[ye]&&he(W[ye],function(be){be()})}else rt&&x.log(ye,"Element uninstalled before being detectable.");delete W[ye],Re++,Re===K.length&&Ue()})}rt&&x.log(ye,"Already detecable, adding listener."),we(_e,Se,ie),Re++}),Re===K.length&&Ue()}function J(ne){if(!ne)return x.error("At least one element is required.");if(s(ne))ne=[ne];else if(r(ne))ne=n(ne);else return x.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");he(ne,function(K){O.removeAllListeners(K),S.uninstall(K),c.cleanState(K)})}function Q(ne){S.initDocument&&S.initDocument(ne)}return{listenTo:H,removeListener:O.removeListener,removeAllListeners:O.removeAllListeners,uninstall:J,initDocument:Q}};function f(u,d,b){var _=u[d];return _==null&&b!==void 0?b:_}},"7tbW":function(br,Ot,Ee){var he=Ee("LGYb");function B(L){return L&&L.length?he(L):[]}br.exports=B},"88Gu":function(br,Ot){var Ee=800,he=16,B=Date.now;function L(o){var e=0,g=0;return function(){var v=B(),p=he-(v-g);if(g=v,p>0){if(++e>=Ee)return arguments[0]}else e=0;return o.apply(void 0,arguments)}}br.exports=L},"9Nap":function(br,Ot,Ee){var he=Ee("/9aa"),B=1/0;function L(o){if(typeof o=="string"||he(o))return o;var e=o+"";return e=="0"&&1/o==-B?"-0":e}br.exports=L},"9ggG":function(br,Ot,Ee){var he=Ee("Z0cm"),B=Ee("/9aa"),L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function e(g,v){if(he(g))return!1;var p=typeof g;return p=="number"||p=="symbol"||p=="boolean"||g==null||B(g)?!0:o.test(g)||!L.test(g)||v!=null&&g in Object(v)}br.exports=e},"9nhX":function(br,Ot,Ee){var he=Ee("g4R6"),B=Ee("tLB3");function L(o,e,g){return g===void 0&&(g=e,e=void 0),g!==void 0&&(g=B(g),g=g===g?g:0),e!==void 0&&(e=B(e),e=e===e?e:0),he(B(o),e,g)}br.exports=L},Aib3:function(br,Ot){br.exports=Ee;function Ee(L,o){var e=L&&L.type,g;if(e==="FeatureCollection")for(g=0;g<L.features.length;g++)Ee(L.features[g],o);else if(e==="GeometryCollection")for(g=0;g<L.geometries.length;g++)Ee(L.geometries[g],o);else if(e==="Feature")Ee(L.geometry,o);else if(e==="Polygon")he(L.coordinates,o);else if(e==="MultiPolygon")for(g=0;g<L.coordinates.length;g++)he(L.coordinates[g],o);return L}function he(L,o){if(L.length!==0){B(L[0],o);for(var e=1;e<L.length;e++)B(L[e],!o)}}function B(L,o){for(var e=0,g=0,v=0,p=L.length,c=p-1;v<p;c=v++){var h=(L[v][0]-L[c][0])*(L[c][1]+L[v][1]),i=e+h;g+=Math.abs(e)>=Math.abs(h)?e-i+h:h-i+e,e=i}e+g>=0!=!!o&&L.reverse()}},"B6l+":function(br,Ot,Ee){var he=Ee("Sq3C"),B=Ee("Z1HP"),L=Ee("Sxd8"),o=Ee("dt0z");function e(g,v,p){g=o(g),v=L(v);var c=v?B(g):0;return v&&c<v?g+he(v-c,p):g}br.exports=e},B93f:function(br,Ot,Ee){"use strict";var he=Ee("DiGy");br.exports=B;function B(o,e){this.layers=o.readFields(L,{},e)}function L(o,e,g){if(o===3){var v=new he(g,g.readVarint()+g.pos);v.length&&(e[v.name]=v)}}},BMrR:function(br,Ot,Ee){"use strict";var he=Ee("qrJ5");Ot.a=he.a},BkRI:function(br,Ot,Ee){var he=Ee("OBhP"),B=1,L=4;function o(e){return he(e,B|L)}br.exports=o},BpBL:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return n});var he=Ee("rAM+"),B=Ee("Hel2"),L=Ee("0cpV"),o=Object.defineProperty,e=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=function(u,d,b){return d in u?o(u,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):u[d]=b},i=function(u,d){for(var b in d||(d={}))p.call(d,b)&&h(u,b,d[b]);if(v){var _=Object(he.a)(v(d)),x;try{for(_.s();!(x=_.n()).done;){var b=x.value;c.call(d,b)&&h(u,b,d[b])}}catch(M){_.e(M)}finally{_.f()}}return u},r=function(u,d){return e(u,g(d))};function n(f,u){var d=u.extent,b=d===void 0?[121.168,30.2828,121.384,30.4219]:d,_=u.coordinates,x=u.requestParameters,M=x===void 0?{}:x,P=new Promise(function(w){f instanceof HTMLImageElement||Object(B.I)(f)?w([f]):s(f,M,function(S){w(S)})}),C=Object(L.a)(_,b),O={originData:f,images:P,_id:1,dataArray:[{_id:0,coordinates:C}]};return O}function s(f,u,d){var b=[];if(typeof f=="string")Object(B.E)(r(i({},u),{url:f}),function(M,P){P&&(b.push(P),d(b))});else{var _=f.length,x=0;f.forEach(function(M){Object(B.E)(r(i({},u),{url:M}),function(P,C){x++,C&&b.push(C),x===_&&d(b)})})}return n}},CZoQ:function(br,Ot){function Ee(he,B,L){for(var o=L-1,e=he.length;++o<e;)if(he[o]===B)return o;return-1}br.exports=Ee},"DTW/":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return s});var he=Ee("rAM+"),B=Ee("OoWq"),L=Ee("0cpV"),o=Object.defineProperty,e=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=function(u,d,b){return d in u?o(u,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):u[d]=b},i=function(u,d){for(var b in d||(d={}))p.call(d,b)&&h(u,b,d[b]);if(v){var _=Object(he.a)(v(d)),x;try{for(_.s();!(x=_.n()).done;){var b=x.value;c.call(d,b)&&h(u,b,d[b])}}catch(M){_.e(M)}finally{_.f()}}return u},r=function(u,d){return e(u,g(d))},n=function(u,d){var b={};for(var _ in u)p.call(u,_)&&d.indexOf(_)<0&&(b[_]=u[_]);if(u!=null&&v){var x=Object(he.a)(v(u)),M;try{for(x.s();!(M=x.n()).done;){var _=M.value;d.indexOf(_)<0&&c.call(u,_)&&(b[_]=u[_])}}catch(P){x.e(P)}finally{x.f()}}return b};function s(f,u){var d=u,b=d.extent,_=d.coordinates,x=d.min,M=d.max,P=d.width,C=d.height,O=d.format,w=d.operation,S=n(d,["extent","coordinates","min","max","width","height","format","operation"]),I;if(O===void 0||Object(L.d)(f))I=Array.from(f);else{var j=Array.isArray(f)?f:[f];I=Object(B.a)(j,O,w)}var N=Object(L.a)(_,b),W={_id:1,dataArray:[r(i({_id:1,data:I,width:P,height:C},S),{min:x,max:M,coordinates:N})]};return W}},DiGy:function(br,Ot,Ee){"use strict";var he=Ee("HfwV");br.exports=B;function B(e,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(L,this,g),this.length=this._features.length}function L(e,g,v){e===15?g.version=v.readVarint():e===1?g.name=v.readString():e===5?g.extent=v.readVarint():e===2?g._features.push(v.pos):e===3?g._keys.push(v.readString()):e===4&&g._values.push(o(v))}function o(e){for(var g=null,v=e.readVarint()+e.pos;e.pos<v;){var p=e.readVarint()>>3;g=p===1?e.readString():p===2?e.readFloat():p===3?e.readDouble():p===4?e.readVarint64():p===5?e.readVarint():p===6?e.readSVarint():p===7?e.readBoolean():null}return g}B.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var g=this._pbf.readVarint()+this._pbf.pos;return new he(this._pbf,g,this.extent,this._keys,this._values)}},"Dw+G":function(br,Ot,Ee){var he=Ee("juv8"),B=Ee("mTTR");function L(o,e){return o&&he(e,B(e),o)}br.exports=L},DzJC:function(br,Ot,Ee){var he=Ee("sEfC"),B=Ee("GoyQ"),L="Expected a function";function o(e,g,v){var p=!0,c=!0;if(typeof e!="function")throw new TypeError(L);return B(v)&&(p="leading"in v?!!v.leading:p,c="trailing"in v?!!v.trailing:c),he(e,g,{leading:p,maxWait:g,trailing:c})}br.exports=o},EA7m:function(br,Ot,Ee){var he=Ee("zZ0H"),B=Ee("Ioao"),L=Ee("wclG");function o(e,g){return L(B(e,g,he),e+"")}br.exports=o},EEGq:function(br,Ot,Ee){var he=Ee("juv8"),B=Ee("oCl/");function L(o,e){return he(o,B(o),e)}br.exports=L},EJlN:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return s});var he=Ee("tJVT"),B=Ee("rAM+"),L=Ee("0cpV"),o=Object.defineProperty,e=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=function(u,d,b){return d in u?o(u,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):u[d]=b},i=function(u,d){for(var b in d||(d={}))p.call(d,b)&&h(u,b,d[b]);if(v){var _=Object(B.a)(v(d)),x;try{for(_.s();!(x=_.n()).done;){var b=x.value;c.call(d,b)&&h(u,b,d[b])}}catch(M){_.e(M)}finally{_.f()}}return u},r=function(u,d){return e(u,g(d))},n=function(u,d){var b={};for(var _ in u)p.call(u,_)&&d.indexOf(_)<0&&(b[_]=u[_]);if(u!=null&&v){var x=Object(B.a)(v(u)),M;try{for(x.s();!(M=x.n()).done;){var _=M.value;d.indexOf(_)<0&&c.call(u,_)&&(b[_]=u[_])}}catch(P){x.e(P)}finally{x.f()}}return b};function s(f,u){var d=u,b=d.extent,_=b===void 0?[121.168,30.2828,121.384,30.4219]:b,x=d.coordinates,M=d.width,P=d.height,C=n(d,["extent","coordinates","width","height"]);f.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var O=C.bands||[0,1],w=Object(he.a)(O,2),S=w[0],I=w[1],j=[f[S],f[I]],N=[],W=0;W<j[0].length;W++)N.push((j[1][W]-j[0][W])/(j[1][W]+j[0][W]));var H=Object(L.a)(x,_),J={_id:1,dataArray:[r(i({_id:1,data:N,width:M,height:P},C),{coordinates:H})]};return J}},FmoU:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return x}),Ee.d(Ot,"b",function(){return O});var he=function(ne,K,ie){ne.prototype=K.prototype=ie,ie.constructor=ne};function B(ne,K){var ie=Object.create(ne.prototype);for(var de in K)ie[de]=K[de];return ie}function L(){}var o=.7,e=1/o,g="\\s*([+-]?\\d+)\\s*",v="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",p="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[g,g,g]+"\\)$"),i=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),r=new RegExp("^rgba\\("+[g,g,g,v]+"\\)$"),n=new RegExp("^rgba\\("+[p,p,p,v]+"\\)$"),s=new RegExp("^hsl\\("+[v,p,p]+"\\)$"),f=new RegExp("^hsla\\("+[v,p,p,v]+"\\)$"),u={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};he(L,x,{copy:function(K){return Object.assign(new this.constructor,this,K)},displayable:function(){return this.rgb().displayable()},hex:d,formatHex:d,formatHsl:b,formatRgb:_,toString:_});function d(){return this.rgb().formatHex()}function b(){return W(this).formatHsl()}function _(){return this.rgb().formatRgb()}function x(ne){var K,ie;return ne=(ne+"").trim().toLowerCase(),(K=c.exec(ne))?(ie=K[1].length,K=parseInt(K[1],16),ie===6?M(K):ie===3?new w(K>>8&15|K>>4&240,K>>4&15|K&240,(K&15)<<4|K&15,1):ie===8?P(K>>24&255,K>>16&255,K>>8&255,(K&255)/255):ie===4?P(K>>12&15|K>>8&240,K>>8&15|K>>4&240,K>>4&15|K&240,((K&15)<<4|K&15)/255):null):(K=h.exec(ne))?new w(K[1],K[2],K[3],1):(K=i.exec(ne))?new w(K[1]*255/100,K[2]*255/100,K[3]*255/100,1):(K=r.exec(ne))?P(K[1],K[2],K[3],K[4]):(K=n.exec(ne))?P(K[1]*255/100,K[2]*255/100,K[3]*255/100,K[4]):(K=s.exec(ne))?N(K[1],K[2]/100,K[3]/100,1):(K=f.exec(ne))?N(K[1],K[2]/100,K[3]/100,K[4]):u.hasOwnProperty(ne)?M(u[ne]):ne==="transparent"?new w(NaN,NaN,NaN,0):null}function M(ne){return new w(ne>>16&255,ne>>8&255,ne&255,1)}function P(ne,K,ie,de){return de<=0&&(ne=K=ie=NaN),new w(ne,K,ie,de)}function C(ne){return ne instanceof L||(ne=x(ne)),ne?(ne=ne.rgb(),new w(ne.r,ne.g,ne.b,ne.opacity)):new w}function O(ne,K,ie,de){return arguments.length===1?C(ne):new w(ne,K,ie,de==null?1:de)}function w(ne,K,ie,de){this.r=+ne,this.g=+K,this.b=+ie,this.opacity=+de}he(w,O,B(L,{brighter:function(K){return K=K==null?e:Math.pow(e,K),new w(this.r*K,this.g*K,this.b*K,this.opacity)},darker:function(K){return K=K==null?o:Math.pow(o,K),new w(this.r*K,this.g*K,this.b*K,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:I,toString:I}));function S(){return"#"+j(this.r)+j(this.g)+j(this.b)}function I(){var ne=this.opacity;return ne=isNaN(ne)?1:Math.max(0,Math.min(1,ne)),(ne===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(ne===1?")":", "+ne+")")}function j(ne){return ne=Math.max(0,Math.min(255,Math.round(ne)||0)),(ne<16?"0":"")+ne.toString(16)}function N(ne,K,ie,de){return de<=0?ne=K=ie=NaN:ie<=0||ie>=1?ne=K=NaN:K<=0&&(ne=NaN),new J(ne,K,ie,de)}function W(ne){if(ne instanceof J)return new J(ne.h,ne.s,ne.l,ne.opacity);if(ne instanceof L||(ne=x(ne)),!ne)return new J;if(ne instanceof J)return ne;ne=ne.rgb();var K=ne.r/255,ie=ne.g/255,de=ne.b/255,we=Math.min(K,ie,de),Re=Math.max(K,ie,de),_e=NaN,Ue=Re-we,rt=(Re+we)/2;return Ue?(K===Re?_e=(ie-de)/Ue+(ie<de)*6:ie===Re?_e=(de-K)/Ue+2:_e=(K-ie)/Ue+4,Ue/=rt<.5?Re+we:2-Re-we,_e*=60):Ue=rt>0&&rt<1?0:_e,new J(_e,Ue,rt,ne.opacity)}function H(ne,K,ie,de){return arguments.length===1?W(ne):new J(ne,K,ie,de==null?1:de)}function J(ne,K,ie,de){this.h=+ne,this.s=+K,this.l=+ie,this.opacity=+de}he(J,H,B(L,{brighter:function(K){return K=K==null?e:Math.pow(e,K),new J(this.h,this.s,this.l*K,this.opacity)},darker:function(K){return K=K==null?o:Math.pow(o,K),new J(this.h,this.s,this.l*K,this.opacity)},rgb:function(){var K=this.h%360+(this.h<0)*360,ie=isNaN(K)||isNaN(this.s)?0:this.s,de=this.l,we=de+(de<.5?de:1-de)*ie,Re=2*de-we;return new w(Q(K>=240?K-240:K+120,Re,we),Q(K,Re,we),Q(K<120?K+240:K-120,Re,we),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var K=this.opacity;return K=isNaN(K)?1:Math.max(0,Math.min(1,K)),(K===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(K===1?")":", "+K+")")}}));function Q(ne,K,ie){return(ne<60?K+(ie-K)*ne/60:ne<180?ie:ne<240?K+(ie-K)*(240-ne)/60:K)*255}},G6z8:function(br,Ot,Ee){var he=Ee("fR/l"),B=Ee("oCl/"),L=Ee("mTTR");function o(e){return he(e,L,B)}br.exports=o},GNKm:function(br,Ot,Ee){"use strict";var he=Ee("GOnX");br.exports=function(B){B=B||{};var L=B.reporter,o=B.batchProcessor,e=B.stateHandler.getState;if(!L)throw new Error("Missing required dependency: reporter.");function g(i,r){function n(){r(i)}if(he.isIE(8))e(i).object={proxy:n},i.attachEvent("onresize",n);else{var s=c(i);if(!s)throw new Error("Element is not detectable by this strategy.");s.contentDocument.defaultView.addEventListener("resize",n)}}function v(i){var r=B.important?" !important; ":"; ";return(i.join(r)+r).trim()}function p(i,r,n){n||(n=r,r=i,i=null),i=i||{};var s=i.debug;function f(u,d){var b=v(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),_=!1,x=window.getComputedStyle(u),M=u.offsetWidth,P=u.offsetHeight;e(u).startSize={width:M,height:P};function C(){function O(){if(x.position==="static"){u.style.setProperty("position","relative",i.important?"important":"");var I=function(N,W,H,J){function Q(K){return K.replace(/[^-\d\.]/g,"")}var ne=H[J];ne!=="auto"&&Q(ne)!=="0"&&(N.warn("An element that is positioned static has style."+J+"="+ne+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+J+" will be set to 0. Element: ",W),W.style.setProperty(J,"0",i.important?"important":""))};I(L,u,x,"top"),I(L,u,x,"right"),I(L,u,x,"bottom"),I(L,u,x,"left")}}function w(){_||O();function I(N,W){if(!N.contentDocument){var H=e(N);H.checkForObjectDocumentTimeoutId&&window.clearTimeout(H.checkForObjectDocumentTimeoutId),H.checkForObjectDocumentTimeoutId=setTimeout(function(){H.checkForObjectDocumentTimeoutId=0,I(N,W)},100);return}W(N.contentDocument)}var j=this;I(j,function(W){d(u)})}x.position!==""&&(O(x),_=!0);var S=document.createElement("object");S.style.cssText=b,S.tabIndex=-1,S.type="text/html",S.setAttribute("aria-hidden","true"),S.onload=w,he.isIE()||(S.data="about:blank"),!!e(u)&&(u.appendChild(S),e(u).object=S,he.isIE()&&(S.data="about:blank"))}o?o.add(C):C()}he.isIE(8)?n(r):f(r,n)}function c(i){return e(i).object}function h(i){if(!!e(i)){var r=c(i);!r||(he.isIE(8)?i.detachEvent("onresize",r.proxy):i.removeChild(r),e(i).checkForObjectDocumentTimeoutId&&window.clearTimeout(e(i).checkForObjectDocumentTimeoutId),delete e(i).object)}}return{makeDetectable:p,addListener:g,uninstall:h}}},GNiM:function(br,Ot,Ee){var he=Ee("I01J"),B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,L=/\\(\\)?/g,o=he(function(e){var g=[];return e.charCodeAt(0)===46&&g.push(""),e.replace(B,function(v,p,c,h){g.push(c?h.replace(L,"$1"):p||v)}),g});br.exports=o},GOnX:function(br,Ot,Ee){"use strict";var he=br.exports={};he.isIE=function(B){function L(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!==-1||e.indexOf("trident")!==-1||e.indexOf(" edge/")!==-1}if(!L())return!1;if(!B)return!0;var o=function(){var e,g=3,v=document.createElement("div"),p=v.getElementsByTagName("i");do v.innerHTML="<!--[if gt IE "+ ++g+"]><i></i><![endif]-->";while(p[0]);return g>4?g:e}();return B===o},he.isLegacyOpera=function(){return!!window.opera}},Gi0A:function(br,Ot,Ee){var he=Ee("QqLw"),B=Ee("ExA7"),L="[object Map]";function o(e){return B(e)&&he(e)==L}br.exports=o},Hel2:function(br,Ot,Ee){"use strict";Ee.d(Ot,"t",function(){return de}),Ee.d(Ot,"A",function(){return N}),Ee.d(Ot,"C",function(){return H}),Ee.d(Ot,"E",function(){return ie}),Ee.d(Ot,"O",function(){return S}),Ee.d(Ot,"h",function(){return Re}),Ee.d(Ot,"i",function(){return we}),Ee.d(Ot,"j",function(){return _e}),Ee.d(Ot,"p",function(){return Se}),Ee.d(Ot,"r",function(){return ye}),Ee.d(Ot,"v",function(){return xe}),Ee.d(Ot,"w",function(){return Oe}),Ee.d(Ot,"x",function(){return pe}),Ee.d(Ot,"y",function(){return ue}),Ee.d(Ot,"z",function(){return Ae}),Ee.d(Ot,"D",function(){return le}),Ee.d(Ot,"R",function(){return Fe}),Ee.d(Ot,"d",function(){return n}),Ee.d(Ot,"I",function(){return Zs}),Ee.d(Ot,"J",function(){return fr}),Ee.d(Ot,"l",function(){return Gr}),Ee.d(Ot,"f",function(){return Yo}),Ee.d(Ot,"g",function(){return Rs}),Ee.d(Ot,"k",function(){return Ws}),Ee.d(Ot,"m",function(){return Ou}),Ee.d(Ot,"n",function(){return qo}),Ee.d(Ot,"o",function(){return du}),Ee.d(Ot,"s",function(){return Uo}),Ee.d(Ot,"B",function(){return ns}),Ee.d(Ot,"K",function(){return uo}),Ee.d(Ot,"L",function(){return Qo}),Ee.d(Ot,"M",function(){return Za}),Ee.d(Ot,"P",function(){return nl}),Ee.d(Ot,"Q",function(){return Fs}),Ee.d(Ot,"N",function(){return On}),Ee.d(Ot,"b",function(){return lu}),Ee.d(Ot,"u",function(){return Oa}),Ee.d(Ot,"F",function(){return sl}),Ee.d(Ot,"G",function(){return ls}),Ee.d(Ot,"e",function(){return Tc}),Ee.d(Ot,"a",function(){return he}),Ee.d(Ot,"c",function(){return B}),Ee.d(Ot,"q",function(){return gs}),Ee.d(Ot,"H",function(){return Hs});var he={};Ee.r(he),Ee.d(he,"DPR",function(){return So}),Ee.d(he,"addClass",function(){return Ur}),Ee.d(he,"addStyle",function(){return Va}),Ee.d(he,"appendElementType",function(){return Ju}),Ee.d(he,"clearChildren",function(){return fs}),Ee.d(he,"create",function(){return Hr}),Ee.d(he,"css2Style",function(){return Ao}),Ee.d(he,"empty",function(){return Yn}),Ee.d(he,"findParentElement",function(){return ts}),Ee.d(he,"getClass",function(){return En}),Ee.d(he,"getContainer",function(){return er}),Ee.d(he,"getDiffRect",function(){return zs}),Ee.d(he,"getStyleList",function(){return ws}),Ee.d(he,"getViewPortScale",function(){return Ro}),Ee.d(he,"hasClass",function(){return tn}),Ee.d(he,"printCanvas",function(){return Po}),Ee.d(he,"remove",function(){return wr}),Ee.d(he,"removeClass",function(){return fn}),Ee.d(he,"removeStyle",function(){return ps}),Ee.d(he,"setChecked",function(){return Qa}),Ee.d(he,"setClass",function(){return Rr}),Ee.d(he,"setTransform",function(){return $a}),Ee.d(he,"setUnDraggable",function(){return Vs}),Ee.d(he,"splitWords",function(){return Tr}),Ee.d(he,"toggleClass",function(){return Nn}),Ee.d(he,"triggerResize",function(){return so}),Ee.d(he,"trim",function(){return $t});var B={};Ee.r(B),Ee.d(B,"getColumn",function(){return gt}),Ee.d(B,"getSatByColumn",function(){return ar}),Ee.d(B,"max",function(){return bu}),Ee.d(B,"mean",function(){return Fr}),Ee.d(B,"min",function(){return nu}),Ee.d(B,"mode",function(){return jt}),Ee.d(B,"statMap",function(){return Vt}),Ee.d(B,"sum",function(){return Be});var L=Ee("mtLc"),o=Ee("fWQN"),e=Ee("yKVA"),g=Ee("879j"),v=Ee("oZsa"),p=Ee("iZzK");function c(ht){return Function.toString.call(ht).indexOf("[native code]")!==-1}var h=Ee("xdlL");function i(ht){var Ut=typeof Map=="function"?new Map:void 0;return i=function(Kt){if(Kt===null||!c(Kt))return Kt;if(typeof Kt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ut!="undefined"){if(Ut.has(Kt))return Ut.get(Kt);Ut.set(Kt,pr)}function pr(){return Object(h.a)(Kt,arguments,Object(v.a)(this).constructor)}return pr.prototype=Object.create(Kt.prototype,{constructor:{value:pr,enumerable:!1,writable:!0,configurable:!0}}),Object(p.a)(pr,Kt)},i(ht)}var r=Ee("rAM+"),n={REGISTERED_PROTOCOLS:{}},s=Object.defineProperty,f=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,x=function(Ut,Ht,Kt){return Ht in Ut?s(Ut,Ht,{enumerable:!0,configurable:!0,writable:!0,value:Kt}):Ut[Ht]=Kt},M=function(Ut,Ht){for(var Kt in Ht||(Ht={}))b.call(Ht,Kt)&&x(Ut,Kt,Ht[Kt]);if(d){var pr=Object(r.a)(d(Ht)),ln;try{for(pr.s();!(ln=pr.n()).done;){var Kt=ln.value;_.call(Ht,Kt)&&x(Ut,Kt,Ht[Kt])}}catch(Rn){pr.e(Rn)}finally{pr.f()}}return Ut},P=function(Ut,Ht){return f(Ut,u(Ht))},C=function(Ut){return n.REGISTERED_PROTOCOLS[Ut.substring(0,Ut.indexOf("://"))]},O=function(ht){Object(e.a)(Ht,ht);var Ut=Object(g.a)(Ht);function Ht(Kt,pr,ln,Rn){var Fn;return Object(o.a)(this,Ht),Fn=Ut.call(this,"AJAXError: ".concat(pr," (").concat(Kt,"): ").concat(ln)),Fn.status=Kt,Fn.statusText=pr,Fn.url=ln,Fn.body=Rn,Fn}return Object(L.a)(Ht)}(i(Error));function w(ht,Ut){var Ht=new XMLHttpRequest,Kt=Array.isArray(ht.url)?ht.url[0]:ht.url;Ht.open(ht.method||"GET",Kt,!0),ht.type==="arrayBuffer"&&(Ht.responseType="arraybuffer");for(var pr in ht.headers)ht.headers.hasOwnProperty(pr)&&Ht.setRequestHeader(pr,ht.headers[pr]);return ht.type==="json"&&(Ht.responseType="text",Ht.setRequestHeader("Accept","application/json")),Ht.withCredentials=ht.credentials==="include",Ht.onerror=function(){Ut(new Error(Ht.statusText))},Ht.onload=function(){if((Ht.status>=200&&Ht.status<300||Ht.status===0)&&Ht.response!==null){var ln=Ht.response;if(ht.type==="json")try{ln=JSON.parse(Ht.response)}catch(Fn){return Ut(Fn)}Ut(null,ln,Ht.getResponseHeader("Cache-Control"),Ht.getResponseHeader("Expires"),Ht)}else{var Rn=new Blob([Ht.response],{type:Ht.getResponseHeader("Content-Type")});Ut(new O(Ht.status,Ht.statusText,Kt.toString(),Rn))}},Ht.cancel=Ht.abort,Ht.send(ht.body),Ht}function S(ht){return new Promise(function(Ut,Ht){w(ht,function(Kt,pr,ln,Rn,Fn){Kt?Ht({err:Kt,data:null,xhr:Fn}):Ut({err:null,data:pr,cacheControl:ln,expires:Rn,xhr:Fn})})})}function I(ht,Ut){return w(ht,Ut)}var j=function(Ut,Ht){var Kt=C(Ut.url)||I;return Kt(P(M({},Ut),{type:"json"}),Ht)},N=function(Ut,Ht){var Kt=C(Ut.url)||I;return Kt(P(M({},Ut),{type:"arrayBuffer"}),Ht)},W=function(Ut,Ht){return I(P(M({},Ut),{method:"POST"}),Ht)},H=function(Ut,Ht){return I(P(M({},Ut),{method:"GET"}),Ht)};function J(ht){var Ut=window.document.createElement("a");return Ut.href=ht,Ut.protocol===window.document.location.protocol&&Ut.host===window.document.location.host}var Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ne(ht,Ut){var Ht=new window.Image,Kt=window.URL||window.webkitURL;Ht.crossOrigin="anonymous",Ht.onload=function(){Ut(null,Ht),Kt.revokeObjectURL(Ht.src),Ht.onload=null,window.requestAnimationFrame(function(){Ht.src=Q})},Ht.onerror=function(){return Ut(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var pr=new Blob([new Uint8Array(ht)],{type:"image/png"});Ht.src=ht.byteLength?Kt.createObjectURL(pr):Q}function K(ht,Ut){var Ht=new Blob([new Uint8Array(ht)],{type:"image/png"});createImageBitmap(Ht).then(function(Kt){Ut(null,Kt)}).catch(function(Kt){Ut(new Error("Could not load image because of ".concat(Kt.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var ie=function(Ut,Ht,Kt){var pr=function(Rn,Fn){if(Rn)Ht(Rn);else if(Fn){var li=typeof createImageBitmap=="function",qi=Kt?Kt(Fn):Fn;li?K(qi,Ht):ne(qi,Ht)}};return Ut.type==="json"?j(Ut,pr):N(Ut,pr)},de=function(Ut,Ht){var Kt=typeof createImageBitmap=="function";Kt?K(Ut,Ht):ne(Ut,Ht)},we=function(ht){return ht.CENTER="center",ht.TOP="top",ht["TOP-LEFT"]="top-left",ht["TOP-RIGHT"]="top-right",ht.BOTTOM="bottom",ht["BOTTOM-LEFT"]="bottom-left",ht["BOTTOM-RIGHT"]="bottom-right",ht.LEFT="left",ht.RIGHT="right",ht}(we||{}),Re={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _e(ht,Ut,Ht){var Kt=ht.classList;for(var pr in Re)Re.hasOwnProperty(pr)&&Kt.remove("l7-".concat(Ht,"-anchor-").concat(pr));Kt.add("l7-".concat(Ht,"-anchor-").concat(Ut))}var Ue=Ee("FmoU");function rt(ht){return typeof ht=="string"?!!Ue.a(ht):!1}function Fe(ht){var Ut=Ue.a(ht),Ht=[0,0,0,0];return Ut!=null&&(Ht[0]=Ut.r/255,Ht[1]=Ut.g/255,Ht[2]=Ut.b/255,Ht[3]=Ut.opacity),Ht}function Se(ht){var Ut=ht&&ht[0],Ht=ht&&ht[1],Kt=ht&&ht[2],pr=Ut+Ht*256+Kt*65536-1;return pr}function ye(ht){return[ht+1&255,ht+1>>8&255,ht+1>>8>>8&255]}function Oe(ht){var Ut=window.document.createElement("canvas"),Ht=Ut.getContext("2d");Ut.width=256,Ut.height=1;for(var Kt=null,pr=Ht.createLinearGradient(0,0,256,1),ln=ht.positions[0],Rn=ht.positions[ht.positions.length-1],Fn=0;Fn<ht.colors.length;++Fn){var li=(ht.positions[Fn]-ln)/(Rn-ln);pr.addColorStop(li,ht.colors[Fn])}return Ht.fillStyle=pr,Ht.fillRect(0,0,256,1),Kt=new Uint8ClampedArray(Ht.getImageData(0,0,256,1).data),Ut=null,Ht=null,{data:Kt,width:256,height:1}}function ue(ht,Ut){var Ht=window.document.createElement("canvas"),Kt=Ht.getContext("2d");Ht.width=256,Ht.height=1;for(var pr=Kt.createLinearGradient(0,0,256,1),ln=Ut[1]-Ut[0],Rn=0;Rn<ht.colors.length;++Rn){var Fn=Math.max((ht.positions[Rn]-Ut[0])/ln,0);pr.addColorStop(Fn,ht.colors[Rn])}Kt.fillStyle=pr,Kt.fillRect(0,0,256,1);var li=Kt.getImageData(0,0,256,1).data,qi=be(Kt,li);return Ht=null,Kt=null,qi}function xe(ht){var Ut=window.document.createElement("canvas"),Ht=Ut.getContext("2d");Ut.width=256,Ut.height=1;var Kt=Ht.createImageData(256,1);return Kt.data.fill(0),ht.positions.forEach(function(pr,ln){var Rn=Fe(ht.colors[ln]);Kt.data[pr*4+0]=Rn[0]*255,Kt.data[pr*4+1]=Rn[1]*255,Kt.data[pr*4+2]=Rn[2]*255,Kt.data[pr*4+3]=Rn[3]*255}),Ut=null,Ht=null,Kt}function Ae(ht){var Ut=window.document.createElement("canvas"),Ht=Ut.getContext("2d");Ht.globalAlpha=1,Ut.width=256,Ut.height=1;for(var Kt=256/ht.colors.length,pr=0;pr<ht.colors.length;pr++)Ht.beginPath(),Ht.lineWidth=2,Ht.strokeStyle=ht.colors[pr],Ht.moveTo(pr*Kt,0),Ht.lineTo((pr+1)*Kt,0),Ht.stroke();var ln=Ht.getImageData(0,0,256,1).data,Rn=be(Ht,ln);return Ut=null,Ht=null,Rn}function pe(ht,Ut){var Ht=window.document.createElement("canvas"),Kt=Ht.getContext("2d");Kt.globalAlpha=1,Ht.width=256,Ht.height=1;var pr=Ut[1]-Ut[0];ht.positions.length-ht.colors.length!=1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var ln=0;ln<ht.colors.length;ln++)Kt.beginPath(),Kt.lineWidth=2,Kt.strokeStyle=ht.colors[ln],Kt.moveTo((ht.positions[ln]-Ut[0])/pr*255,0),Kt.lineTo((ht.positions[ln+1]-Ut[0])/pr*255,0),Kt.stroke();var Rn=Kt.getImageData(0,0,256,1).data,Fn=be(Kt,Rn);return Ht=null,Kt=null,Fn}function be(ht,Ut){for(var Ht=ht.createImageData(256,1),Kt=0;Kt<Ht.data.length;Kt+=4)Ht.data[Kt+0]=Ut[Kt+0],Ht.data[Kt+1]=Ut[Kt+1],Ht.data[Kt+2]=Ut[Kt+2],Ht.data[Kt+3]=Ut[Kt+3];return Ht}function le(ht){switch(ht==null?void 0:ht.type){case"cat":return[0,255];default:return[0,1]}}var z=Ee("oBTY"),ae=Ee("tJVT"),V=Ee("9nhX"),re=Ee.n(V),te=Ee("BkRI"),q=Ee.n(te),ve=Ee("sEfC"),Me=Ee.n(ve),De=Ee("mwIZ"),ze=Ee.n(De),We=Ee("Znm+"),He=Ee.n(We),$e=Ee("Y+p1"),It=Ee.n($e),Yt=Ee("J2iB"),rr=Ee.n(Yt),ir=Ee("UB5X"),Br=Ee.n(ir),tr=Ee("YO3V"),ft=Ee.n(tr),st=Ee("4qC0"),Tt=Ee.n(st),Qe=Ee("c6wG"),it=Ee.n(Qe),zt=Ee("QkVN"),Qt=Ee.n(zt),Ar=Ee("JBE3"),zr=Ee.n(Ar),ct=Ee("hzCD"),ot=Ee.n(ct),xt=Ee("DzJC"),Bt=Ee.n(xt),Ke=Ee("7tbW"),lt=Ee.n(Ke),mt=Ee("gQMU"),qe=Ee.n(mt),yt=Ee("lSCD"),qt=Ee.n(yt),Er=Ee("GoyQ"),Zr=Ee.n(Er),Dr=Ee("TP7S"),Cr=Ee.n(Dr),mn=Ee("u6S6"),xn=Ee.n(mn),lr=Ee("mNz5"),An=Ee.n(lr),On={isNil:rr.a,merge:Qt.a,throttle:Bt.a,isString:Tt.a,debounce:Me.a,pull:ot.a,isTypedArray:it.a,isPlainObject:ft.a,isNumber:Br.a,isBoolean:He.a,isEqual:It.a,cloneDeep:q.a,uniq:lt.a,clamp:re.a,upperFirst:qe.a,get:ze.a,mergeWith:zr.a,isFunction:qt.a,isObject:Zr.a,isUndefined:Cr.a,camelCase:xn.a,uniqueId:An.a},Mt=On.pull;function er(ht){var Ut=ht;return typeof ht=="string"&&(Ut=window.document.getElementById(ht)),Ut}function $t(ht){return ht.trim?ht.trim():ht.replace(/^\s+|\s+$/g,"")}function Tr(ht){return $t(ht).split(/\s+/)}function Mr(ht){var Ut,Ht=(Ut=document==null?void 0:document.documentElement)==null?void 0:Ut.style;if(!Ht)return ht[0];for(var Kt in ht)if(ht[Kt]&&ht[Kt]in Ht)return ht[Kt];return ht[0]}function Hr(ht,Ut,Ht){var Kt=window.document.createElement(ht);return Ut&&(Kt.className=Ut||""),Ht&&Ht.appendChild(Kt),Kt}function wr(ht){var Ut=ht.parentNode;Ut&&Ut.removeChild(ht)}function Ur(ht,Ut){if(ht.classList!==void 0)for(var Ht=Tr(Ut),Kt=0,pr=Ht.length;Kt<pr;Kt++)ht.classList.add(Ht[Kt]);else if(!tn(ht,Ut)){var ln=En(ht);Rr(ht,(ln?ln+" ":"")+Ut)}}function fn(ht,Ut){if(ht.classList!==void 0){var Ht=Tr(Ut);Ht.forEach(function(Kt){ht.classList.remove(Kt)})}else Rr(ht,$t((" "+En(ht)+" ").replace(" "+Ut+" "," ")))}function tn(ht,Ut){if(ht.classList!==void 0)return ht.classList.contains(Ut);var Ht=En(ht);return Ht.length>0&&new RegExp("(^|\\s)"+Ut+"(\\s|$)").test(Ht)}function Rr(ht,Ut){ht instanceof HTMLElement?ht.className=Ut:ht.className.baseVal=Ut}function Nn(ht,Ut,Ht){Ht===void 0?tn(ht,Ut)?fn(ht,Ut):Ur(ht,Ut):Ht?Ur(ht,Ut):fn(ht,Ut)}function En(ht){return ht instanceof SVGElement&&(ht=ht.correspondingElement),ht.className.baseVal===void 0?ht.className:ht.className.baseVal}function Yn(ht){for(;ht&&ht.firstChild;)ht.removeChild(ht.firstChild)}var wi=Mr(["transform","WebkitTransform"]);function $a(ht,Ut){ht.style[wi]=Ut}function so(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var ht=window.document.createEvent("UIEvents");ht.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(ht)}}function Po(ht){var Ut=["padding: "+(ht.height/2-8)+"px "+ht.width/2+"px;","line-height: "+ht.height+"px;","background-image: url("+ht.toDataURL()+");"];console.log(`%c
`,Ut.join(""))}function Ro(){var ht,Ut=window.document.querySelector('meta[name="viewport"]');if(!Ut)return 1;var Ht=(ht=Ut.content)==null?void 0:ht.split(","),Kt=Ht.find(function(pr){var ln=pr.split("="),Rn=Object(ae.a)(ln,1),Fn=Rn[0];return Fn==="initial-scale"});return Kt?Kt.split("=")[1]*1:1}var So=Ro()<1?1:window.devicePixelRatio;function Va(ht,Ut){ht.setAttribute("style","".concat(ht.style.cssText).concat(Ut))}function ws(ht){return ht.split(";").map(function(Ut){return Ut.trim()}).filter(function(Ut){return Ut})}function ps(ht,Ut){var Ht,Kt=ws((Ht=ht.getAttribute("style"))!=null?Ht:""),pr=ws(Ut),ln=Mt.apply(void 0,[Kt].concat(Object(z.a)(pr)));ht.setAttribute("style",ln.join(";"))}function Ao(ht){return Object.entries(ht).map(function(Ut){var Ht=Object(ae.a)(Ut,2),Kt=Ht[0],pr=Ht[1];return"".concat(Kt,": ").concat(pr)}).join(";")}function zs(ht,Ut){return{left:ht.left-Ut.left,top:ht.top-Ut.top,right:Ut.left+Ut.width-ht.left-ht.width,bottom:Ut.top+Ut.height-ht.top-ht.height}}function Qa(ht,Ut){ht.checked=Ut,Ut?ht.setAttribute("checked","true"):ht.removeAttribute("checked")}function fs(ht){ht.innerHTML=""}function Vs(ht){ht.setAttribute("draggable","false")}function Ju(ht,Ut){if(typeof Ut=="string"){var Ht=document.createElement("div");for(Ht.innerHTML=Ut;Ht.firstChild;)ht.append(Ht.firstChild)}else Array.isArray(Ut)?ht.append.apply(ht,Object(z.a)(Ut)):ht.append(Ut)}function ts(ht,Ut){for(var Ht,Kt=Array.isArray(Ut)?Ut:[Ut],pr=ht;pr instanceof Element&&pr!==window.document.body;){if(Kt.find(function(ln){return pr==null?void 0:pr.matches(ln)}))return pr;pr=(Ht=pr==null?void 0:pr.parentElement)!=null?Ht:null}}function Zs(ht){return typeof ImageBitmap!="undefined"&&ht instanceof ImageBitmap}function ys(){return typeof importScripts=="function"}var Lt=ys()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},at=navigator==null?void 0:navigator.userAgent,Ye=!!at.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),St=at.indexOf("Android")>-1||at.indexOf("Adr")>-1;function fr(){for(var ht=at,Ut=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],Ht=!0,Kt=0,pr=Ut;Kt<pr.length;Kt++){var ln=pr[Kt];if(ht.indexOf(ln)>0){Ht=!1;break}}return Ht}function Gr(ht,Ut){ht.forEach(function(Ht){!Ut[Ht]||(Ut[Ht]=Ut[Ht].bind(Ut))})}var hn=function(){function ht(){var Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;Object(o.a)(this,ht),this.duration=16,this.timestamp=new Date().getTime(),this.duration=Ut}return Object(L.a)(ht,[{key:"run",value:function(Ht){var Kt=new Date().getTime(),pr=Kt-this.timestamp;this.timestamp=Kt,pr>=this.duration&&Ht()}}]),ht}(),un=Ee("Nwvx");function Qn(ht){var Ut=[Infinity,Infinity,-Infinity,-Infinity];return Object(un.a)(ht,function(Ht){Ut[0]>Ht[0]&&(Ut[0]=Ht[0]),Ut[1]>Ht[1]&&(Ut[1]=Ht[1]),Ut[2]<Ht[0]&&(Ut[2]=Ht[0]),Ut[3]<Ht[1]&&(Ut[3]=Ht[1])}),Ut}Qn.default=Qn;var Ai=Qn,bi=Ee("0wsv");function na(ht){return typeof ht=="number"}function Oa(ht){return ht-Math.fround(ht)}var fo=2*Math.PI*6378137/2;function uo(ht,Ut){var Ht=Object(ae.a)(Ut,4),Kt=Ht[0],pr=Ht[1],ln=Ht[2],Rn=Ht[3];return ht.lng>Kt&&ht.lng<=ln&&ht.lat>pr&&ht.lat<=Rn}function Uo(ht){var Ut=[Infinity,Infinity,-Infinity,-Infinity];return ht.forEach(function(Ht){var Kt=Ht.coordinates;lo(Ut,Kt)}),Ut}function lo(ht,Ut){return Array.isArray(Ut[0])?Ut.forEach(function(Ht){lo(ht,Ht)}):(ht[0]>Ut[0]&&(ht[0]=Ut[0]),ht[1]>Ut[1]&&(ht[1]=Ut[1]),ht[2]<Ut[0]&&(ht[2]=Ut[0]),ht[3]<Ut[1]&&(ht[3]=Ut[1])),ht}function go(ht,Ut){return Ho(ht,Ut)}function Ho(ht,Ut){return Array.isArray(ht[0])?ht.map(function(Ht){return Ho(Ht,Ut)}):Ut(ht)}function Qo(ht){var Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};ht=Ks(ht,Ut);var Kt=ht[0],pr=ht[1],ln=Kt*fo/180,Rn=Math.log(Math.tan((90+pr)*Math.PI/360))/(Math.PI/180);return Rn=Rn*fo/180,Ht.enable&&(ln=Number(ln.toFixed(Ht.decimal)),Rn=Number(Rn.toFixed(Ht.decimal))),ht.length===3?[ln,Rn,ht[2]]:[ln,Rn]}function Go(ht){var Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Ht=ht[0],Kt=ht[1],pr=Ht/fo*180,ln=Kt/fo*180;return ln=180/Math.PI*(2*Math.atan(Math.exp(ln*Math.PI/180))-Math.PI/2),Ut!=null&&(pr=Number(pr.toFixed(Ut)),ln=Number(ln.toFixed(Ut))),ht.length===3?[pr,ln,ht[2]]:[pr,ln]}function _s(ht){if(ht==null)throw new Error("lng is required");return(ht>180||ht<-180)&&(ht=ht%360,ht>180&&(ht=-360+ht),ht<-180&&(ht=360+ht),ht===0&&(ht=0)),ht}function bs(ht){if(ht==null)throw new Error("lat is required");return(ht>90||ht<-90)&&(ht=ht%180,ht>90&&(ht=-180+ht),ht<-90&&(ht=180+ht),ht===0&&(ht=0)),ht}function Ks(ht,Ut){if(Ut===!1)return ht;var Ht=_s(ht[0]),Kt=bs(ht[1]);return Kt>85&&(Kt=85),Kt<-85&&(Kt=-85),ht.length===3?[Ht,Kt,ht[2]]:[Ht,Kt]}function Yo(ht){var Ut=85.0511287798,Ht=Math.max(Math.min(Ut,ht[1]),-Ut),Kt=256<<20,pr=Math.PI/180,ln=ht[0]*pr,Rn=Ht*pr;Rn=Math.log(Math.tan(Math.PI/4+Rn/2));var Fn=.5/Math.PI,li=.5,qi=-.5/Math.PI;return pr=.5,ln=Kt*(Fn*ln+li),Rn=Kt*(qi*Rn+pr),[Math.floor(ln),Math.floor(Rn)]}function mo(ht){var Ut=.5/Math.PI,Ht=.5,Kt=-.5/Math.PI,pr=.5,ln=256<<20,Rn=Object(ae.a)(ht,2),Fn=Rn[0],li=Rn[1];Fn=(Fn/ln-Ht)/Ut,li=(li/ln-pr)/Kt,li=(Math.atan(Math.pow(Math.E,li))-Math.PI/4)*2,pr=Math.PI/180;var qi=li/pr,Wn=Fn/pr;return[Wn,qi]}function Rs(ht,Ut){var Ht=85.0511287798,Kt=Math.PI/180,pr=6378137;return Ut=Math.max(Math.min(Ht,Ut),-Ht),ht*=Kt,Ut*=Kt,Ut=Math.log(Math.tan(Math.PI/4+Ut/2)),[ht*pr,Ut*pr]}function rs(ht,Ut){var Ht=Math.PI/180,Kt=6378137,pr=ht/Kt/Ht,ln=2*(Math.atan(Math.exp(Ut/Kt))-Math.PI/4)/Ht;return[pr,ln]}function Za(ht,Ut,Ht){var Kt=Object(bi.a)(Ut[1]-ht[1]),pr=Object(bi.a)(Ut[0]-ht[0]),ln=Object(bi.a)(ht[1]),Rn=Object(bi.a)(Ut[1]),Fn=Math.pow(Math.sin(Kt/2),2)+Math.pow(Math.sin(pr/2),2)*Math.cos(ln)*Math.cos(Rn);return Object(bi.k)(2*Math.atan2(Math.sqrt(Fn),Math.sqrt(1-Fn)),Ht="meters")}function qa(ht){var Ut=Math.PI/180,Ht=85.0511287798,Kt=6378137,pr=Math.max(Math.min(Ht,ht[1]),-Ht),ln=Math.sin(pr*Ut),Rn=Kt*ht[0]*Ut,Fn=Kt*Math.log((1+ln)/(1-ln))/2;return[Rn,Fn]}function Fs(ht,Ut){var Ht=Math.abs(ht[1][1]-ht[0][1])*Ut,Kt=Math.abs(ht[1][0]-ht[0][0])*Ut;return[[ht[0][0]-Kt,ht[0][1]-Ht],[ht[1][0]+Kt,ht[1][1]+Ht]]}function Ou(ht,Ut){return ht[0][0]<=Ut[0][0]&&ht[0][1]<=Ut[0][1]&&ht[1][0]>=Ut[1][0]&&ht[1][1]>=Ut[1][1]}function Ws(ht){return[[ht[0],ht[1]],[ht[2],ht[3]]]}function nl(ht){var Ut=Bu(ht,[0,0]);return[ht[0]/Ut,ht[1]/Ut]}function Bu(ht,Ut){return Math.sqrt(Math.pow(ht[0]-Ut[0],2)+Math.pow(ht[1]-Ut[1],2))}function su(ht,Ut){return ht[0]*Ut[0]+ht[1]*Ut[1]}function zu(ht){return Math.sqrt(ht[0]*ht[0]+ht[1]*ht[1])}function uu(ht,Ut){return Math.acos(su(ht,Ut)/(zu(ht)*zu(Ut)))*180/Math.PI}function hu(ht,Ut){return Ut[0]>0?Ut[1]>0?90-Math.atan(Ut[1]/Ut[0])*180/Math.PI:90+Math.atan(-Ut[1]/Ut[0])*180/Math.PI:Ut[1]<0?180+(90-Math.atan(Ut[1]/Ut[0])*180/Math.PI):270+Math.atan(Ut[1]/-Ut[0])*180/Math.PI}function Qu(ht){var Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!ht||ht.length<2)){for(var Ht=[0,1],Kt=0,pr=[],ln=0;ln<ht.length-1;ln++){var Rn=ht[ln],Fn=ht[ln+1],li=Bu(Rn,Fn);Kt+=li;var qi=[Rn[0]-Fn[0],Rn[1]-Fn[1]],Wn=hu(Ht,qi);if(ln>0){var ga=pr[ln-1].rotation;ga-Wn>360-ga+Wn&&(Wn=Wn+360)}pr.push({start:Rn,end:Fn,dis:li,rotation:Wn,duration:0})}return pr.map(function(ao){ao.duration=Ut*(ao.dis/Kt)}),pr}}function qo(ht){if(na(ht[0]))return ht;if(na(ht[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(na(ht[0][0][0])){var Ut=ht,Ht=0,Kt=0,pr=0;return Ut.forEach(function(ln){ln.forEach(function(Rn){Ht+=Rn[0],Kt+=Rn[1],pr++})}),[Ht/pr,Kt/pr,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function du(ht){for(var Ut=ht[0],Ht=ht[1],Kt=ht[0],pr=ht[1],ln=0,Rn=0,Fn=0,li=0;li<ht.length;li+=2){var qi=ht[li],Wn=ht[li+1];qi&&Wn&&(Ut=Math.max(qi,Ut),Ht=Math.max(Wn,Ht),Kt=Math.min(qi,Kt),pr=Math.min(Wn,pr),ln+=qi,Rn+=Wn,Fn++)}return{center:[ln/Fn,Rn/Fn],radius:Math.sqrt(Math.pow(Ut-Kt,2)+Math.pow(Ht-pr,2))/2}}function ns(ht){return Ai(Object(bi.c)([Object(bi.f)(ht)]))}function ru(ht){var Ut=131,Ht=137,Kt=0;ht+="x";for(var pr=Math.floor(9007199254740991/Ht),ln=0;ln<ht.length;ln++)Kt>pr&&(Kt=Math.floor(Kt/Ht)),Kt=Kt*Ut+ht.charCodeAt(ln);return Kt}function _u(ht){ht=ht.toString();for(var Ut=5381,Ht=ht.length;Ht;)Ut=Ut*33^ht.charCodeAt(--Ht);return Ut>>>0}function Hs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ht){var Ut=Math.random()*16|0,Ht=ht==="x"?Ut:Ut&3|8;return Ht.toString(16)})}function Ns(ht,Ut,Ht,Kt){var pr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:30,ln=arguments.length>5?arguments[5]:void 0,Rn=Ht;return ln&&(Rn=Math.round(Ht*(pr-1))/(pr-1)),Kt?Vu(ht,Ut,Rn,Kt):Vu(ht,Ut,Rn,.314)}function Js(ht,Ut){var Ht=1-Ut;return(ht[0]*Ht+ht[1]*Ut)*Ht+(ht[1]*Ht+ht[2]*Ut)*Ut}function Fu(ht,Ut){return Math.sqrt(Math.pow(ht[0]-Ut[0],2)+Math.pow(ht[1]-Ut[1],2))}function vu(ht,Ut,Ht){var Kt=[Ut[0]-ht[0],Ut[1]-ht[1]],pr=Fu(Kt,[0,0]),ln=Math.atan2(Kt[1],Kt[0]),Rn=pr/2/Math.cos(Ht),Fn=ln+Ht,li=[Rn*Math.cos(Fn)+ht[0],Rn*Math.sin(Fn)+ht[1]];return li}function Vu(ht,Ut,Ht,Kt){var pr=vu(ht,Ut,Kt),ln=[ht[0],pr[0],Ut[0]],Rn=[ht[1],pr[1],Ut[1]];return[Js(ln,Ht),Js(Rn,Ht),0]}function Nu(ht,Ut,Ht,Kt){var pr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:30,ln=arguments.length>5?arguments[5]:void 0,Rn=Ht;return ln&&(Rn=Math.round(Ht*29)/29),Wu(ht,Ut,Rn)}function To(ht,Ut){var Ht=[ht[0]-Ut[0],ht[1]-Ut[1]],Kt=[Math.sin(Ht[0]/2),Math.sin(Ht[1]/2)],pr=Kt[1]*Kt[1]+Math.cos(ht[1])*Math.cos(Ut[1])*Kt[0]*Kt[0];return 2*Math.atan2(Math.sqrt(pr),Math.sqrt(1-pr))}function Wu(ht,Ut,Ht){var Kt=[Object(bi.a)(ht[0]),Object(bi.a)(ht[1])],pr=[Object(bi.a)(Ut[0]),Object(bi.a)(Ut[1])],ln=To(Kt,pr);if(Math.abs(ln-Math.PI)<.001)return[(1-Ht)*Kt[0]+Ht*pr[0],(1-Ht)*Kt[1]+Ht*pr[1]];var Rn=Math.sin((1-Ht)*ln)/Math.sin(ln),Fn=Math.sin(Ht*ln)/Math.sin(ln),li=[Math.sin(Kt[0]),Math.sin(Kt[1])],qi=[Math.cos(Kt[0]),Math.cos(Kt[1])],Wn=[Math.sin(pr[0]),Math.sin(pr[1])],ga=[Math.cos(pr[0]),Math.cos(pr[1])],ao=Rn*qi[1]*qi[0]+Fn*ga[1]*ga[0],is=Rn*qi[1]*li[0]+Fn*ga[1]*Wn[0],vo=Rn*li[1]+Fn*Wn[1];return[Object(bi.j)(Math.atan2(is,ao)),Object(bi.j)(Math.atan2(vo,Math.sqrt(ao*ao+is*is)))]}function Hu(ht,Ut){for(var Ht=0,Kt=[],pr=0;pr<ht.length-1;pr++){var ln=ht[pr],Rn=ht[pr+1],Fn=$o(ln,Rn),li=Ht;Ht+=Fn,Kt.push({p1:ln,p2:Rn,totalDistance:Ht,distance:Fn,lastTotalDistance:li})}for(var qi=Ht*Ut,Wn,ga,ao=0,is=Kt;ao<is.length;ao++){var vo=is[ao],Et=vo.totalDistance;if(Et>qi){var bt=vo.p1,mr=vo.p2,or=(qi-vo.lastTotalDistance)/vo.distance,Ir=Ru(mr,bt,or);Wn=Ir[0],ga=Ir[1];break}}return{lng:Wn,lat:ga,height:0}}function Ru(ht,Ut,Ht){return[ht[0]*Ht+Ut[0]*(1-Ht),ht[1]*Ht+Ut[1]*(1-Ht)]}function $o(ht,Ut){return Math.sqrt(Math.pow(ht[0]-Ut[0],2)+Math.pow(ht[1]-Ut[1],2))}var dl=Object.defineProperty,Gu=Object.getOwnPropertySymbols,os=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable,hs=function(Ut,Ht,Kt){return Ht in Ut?dl(Ut,Ht,{enumerable:!0,configurable:!0,writable:!0,value:Kt}):Ut[Ht]=Kt},xs=function(Ut,Ht){for(var Kt in Ht||(Ht={}))os.call(Ht,Kt)&&hs(Ut,Kt,Ht[Kt]);if(Gu){var pr=Object(r.a)(Gu(Ht)),ln;try{for(pr.s();!(ln=pr.n()).done;){var Kt=ln.value;Us.call(Ht,Kt)&&hs(Ut,Kt,Ht[Kt])}}catch(Rn){pr.e(Rn)}finally{pr.f()}}return Ut};function il(ht,Ut){var Ht=Ut.featureId,Kt=ht.data.dataArray;return typeof Ht=="number"&&(Kt=Kt.filter(function(pr){var ln=pr.id;return ln===Ht})),Kt.map(function(pr){var ln=Is(pr,Ut);return xs(xs({},pr),ln)})}function Tu(ht,Ut){return new Promise(function(Ht){ht.inited?Ht(il(ht,Ut)):ht.once("update",function(){Ht(il(ht,Ut))})})}function Is(ht,Ut){var Ht=Ut.offset,Kt=Ut.shape,pr=Ut.thetaOffset,ln=Ut.segmentNumber,Rn=ln===void 0?30:ln,Fn=Ut.autoFit,li=Fn===void 0?!0:Fn,qi=ht.coordinates;if(Kt==="line")return Hu(qi,Ht);var Wn=qi[0],ga=qi[1],ao=typeof pr=="string"?ht[pr]||0:pr,is;switch(Kt){case"arc":is=Ns;break;case"greatcircle":is=Nu;break;default:is=Ns}var vo=is(Wn,ga,Ht,ao,Rn,li),Et=Object(ae.a)(vo,3),bt=Et[0],mr=Et[1],or=Et[2];return{lng:bt,lat:mr,height:or}}var lu=function(){function ht(){var Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Ht=arguments.length>1?arguments[1]:void 0;Object(o.a)(this,ht),this.limit=Ut,this.destroy=Ht||this.defaultDestroy,this.order=[],this.clear()}return Object(L.a)(ht,[{key:"clear",value:function(){var Ht=this;this.order.forEach(function(Kt){Ht.delete(Kt)}),this.cache={},this.order=[]}},{key:"get",value:function(Ht){var Kt=this.cache[Ht];return Kt&&(this.deleteOrder(Ht),this.appendOrder(Ht)),Kt}},{key:"set",value:function(Ht,Kt){this.cache[Ht]?(this.delete(Ht),this.cache[Ht]=Kt,this.appendOrder(Ht)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Ht]=Kt,this.appendOrder(Ht))}},{key:"delete",value:function(Ht){var Kt=this.cache[Ht];Kt&&(this.deleteCache(Ht),this.deleteOrder(Ht),this.destroy(Kt,Ht))}},{key:"deleteCache",value:function(Ht){delete this.cache[Ht]}},{key:"deleteOrder",value:function(Ht){var Kt=this.order.findIndex(function(pr){return pr===Ht});Kt>=0&&this.order.splice(Kt,1)}},{key:"appendOrder",value:function(Ht){this.order.push(Ht)}},{key:"defaultDestroy",value:function(Ht,Kt){return null}}]),ht}();function bu(ht){if(ht.length===0)throw new Error("max requires at least one data point");for(var Ut=ht[0],Ht=1;Ht<ht.length;Ht++)ht[Ht]>Ut&&(Ut=ht[Ht]);return Ut*1}function nu(ht){if(ht.length===0)throw new Error("min requires at least one data point");for(var Ut=ht[0],Ht=1;Ht<ht.length;Ht++)ht[Ht]<Ut&&(Ut=ht[Ht]);return Ut*1}function Be(ht){if(ht.length===0)return 0;for(var Ut=ht[0]*1,Ht=1;Ht<ht.length;Ht++)Ut+=ht[Ht]*1;return Ut}function Fr(ht){if(ht.length===0)throw new Error("mean requires at least one data point");return Be(ht)/ht.length}function jt(ht){if(ht.length===0)throw new Error("mean requires at least one data point");if(ht.length<3)return ht[0];ht.sort();for(var Ut=ht[0],Ht=NaN,Kt=0,pr=1,ln=1;ln<ht.length+1;ln++)ht[ln]!==Ut?(pr>Kt&&(Kt=pr,Ht=Ut),pr=1,Ut=ht[ln]):pr++;return Ht*1}var Vt={min:nu,max:bu,mean:Fr,sum:Be,mode:jt};function gt(ht,Ut){return ht.map(function(Ht){return Ht[Ut]})}function ar(ht,Ut){return Vt[ht](Ut)}var gr=Ee("qLMh");function en(ht,Ut){Ut===void 0&&(Ut={});var Ht=Number(ht[0]),Kt=Number(ht[1]),pr=Number(ht[2]),ln=Number(ht[3]);if(ht.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var Rn=[Ht,Kt],Fn=[Ht,ln],li=[pr,ln],qi=[pr,Kt];return Object(bi.i)([[Rn,qi,li,Fn,Rn]],Ut.properties,{bbox:ht,id:Ut.id})}var Vr=Ee("uhBA"),on=Ee.n(Vr),Dn=function(ht){return ht.Realtime="realtime",ht.Overlap="overlap",ht.Replace="replace",ht}(Dn||{}),di=function(ht){return ht.Loading="Loading",ht.Loaded="Loaded",ht.Failure="Failure",ht.Cancelled="Cancelled",ht}(di||{}),xi=Ee("jrin"),ji=0,ia=1,ca=2;function ea(ht){ht.forEach(function(Ut){Ut.isCurrent&&(Ut.isVisible=Ut.isLoaded)})}function ma(ht){ht.forEach(function(Ut){Ut.properties.state=ji}),ht.forEach(function(Ut){Ut.isCurrent&&!Fa(Ut)&&Io(Ut)}),ht.forEach(function(Ut){Ut.isVisible=Boolean(Ut.properties.state&ca)})}function Ia(ht){ht.forEach(function(Ht){Ht.properties.state=ji}),ht.forEach(function(Ht){Ht.isCurrent&&Fa(Ht)});var Ut=ht.slice().sort(function(Ht,Kt){return Ht.z-Kt.z});Ut.forEach(function(Ht){Ht.isVisible=Boolean(Ht.properties.state&ca),Ht.children.length&&(Ht.isVisible||Ht.properties.state&ia)?Ht.children.forEach(function(Kt){Kt.properties.state=ia}):Ht.isCurrent&&Io(Ht)})}function Fa(ht){for(;ht;){if(ht.isLoaded)return ht.properties.state|=ca,!0;ht=ht.parent}return!1}function Io(ht){ht.children.forEach(function(Ut){Ut.isLoaded?Ut.properties.state|=ca:Io(Ut)})}var ho,Ba=256,Mo=[-Infinity,-Infinity,Infinity,Infinity],_o=.2,Da=5,ss=(ho={},Object(xi.a)(ho,Dn.Realtime,ea),Object(xi.a)(ho,Dn.Overlap,ma),Object(xi.a)(ho,Dn.Replace,Ia),ho),ko=function(){};function bo(ht,Ut,Ht){var Kt=Math.floor((ht+180)/360*Math.pow(2,Ht)),pr=Math.floor((1-Math.log(Math.tan(Ut*Math.PI/180)+1/Math.cos(Ut*Math.PI/180))/Math.PI)/2*Math.pow(2,Ht));return[Kt,pr]}function Zo(ht,Ut,Ht){var Kt=ht/Math.pow(2,Ht)*360-180,pr=Math.PI-2*Math.PI*Ut/Math.pow(2,Ht),ln=180/Math.PI*Math.atan(.5*(Math.exp(pr)-Math.exp(-pr)));return[Kt,ln]}var As=function(Ut,Ht,Kt){var pr=Zo(Ut,Ht,Kt),ln=Object(ae.a)(pr,2),Rn=ln[0],Fn=ln[1],li=Zo(Ut+1,Ht+1,Kt),qi=Object(ae.a)(li,2),Wn=qi[0],ga=qi[1];return[Rn,ga,Wn,Fn]};function us(ht){var Ut=ht.zoom,Ht=ht.latLonBounds,Kt=ht.maxZoom,pr=Kt===void 0?Infinity:Kt,ln=ht.minZoom,Rn=ln===void 0?0:ln,Fn=ht.zoomOffset,li=Fn===void 0?0:Fn,qi=ht.extent,Wn=qi===void 0?Mo:qi,ga=Math.ceil(Ut)+li;if(Number.isFinite(Rn)&&ga<Rn)return[];Number.isFinite(pr)&&ga>pr&&(ga=pr);for(var ao=Object(ae.a)(Ht,4),is=ao[0],vo=ao[1],Et=ao[2],bt=ao[3],mr=[Math.max(is,Wn[0]),Math.max(vo,Wn[1]),Math.min(Et,Wn[2]),Math.min(bt,Wn[3])],or=[],Ir=bo(mr[0],mr[1],ga),yn=Object(ae.a)(Ir,2),jn=yn[0],qn=yn[1],ui=bo(mr[2],mr[3],ga),kn=Object(ae.a)(ui,2),oi=kn[0],bn=kn[1],Xe=jn;Xe<=oi;Xe++)for(var et=bn;et<=qn;et++)or.push({x:Xe,y:et,z:ga});var Ct=(oi+jn)/2,At=(qn+bn)/2,Le=function(nt,tt){return Math.abs(nt-Ct)+Math.abs(tt-At)};return or.sort(function(Ne,nt){return Le(Ne.x,Ne.y)-Le(nt.x,nt.y)}),or}var Mu=function(Ut,Ht,Kt){var pr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,ln=Math.pow(2,Kt),Rn=ln-1,Fn=ln,li=Ut,qi=Ht;return pr&&(li<0?li=li+Fn:li>Rn&&(li=li%Fn)),{warpX:li,warpY:qi}},Qs=function(Ut,Ht,Kt){return new Promise(function(pr,ln){var Rn=function(Wn){try{li(Kt.next(Wn))}catch(ga){ln(ga)}},Fn=function(Wn){try{li(Kt.throw(Wn))}catch(ga){ln(ga)}},li=function(Wn){return Wn.done?pr(Wn.value):Promise.resolve(Wn.value).then(Rn,Fn)};li((Kt=Kt.apply(Ut,Ht)).next())})},Ls=function(ht){Object(e.a)(Ht,ht);var Ut=Object(g.a)(Ht);function Ht(Kt){var pr;Object(o.a)(this,Ht),pr=Ut.call(this),pr.tileSize=256,pr.isVisible=!1,pr.isCurrent=!1,pr.isVisibleChange=!1,pr.loadedLayers=0,pr.isLayerLoaded=!1,pr.isLoad=!1,pr.isChildLoad=!1,pr.parent=null,pr.children=[],pr.data=null,pr.properties={},pr.loadDataId=0;var ln=Kt.x,Rn=Kt.y,Fn=Kt.z,li=Kt.tileSize,qi=Kt.warp,Wn=qi===void 0?!0:qi;return pr.x=ln,pr.y=Rn,pr.z=Fn,pr.warp=Wn||!0,pr.tileSize=li,pr}return Object(L.a)(Ht,[{key:"isLoading",get:function(){return this.loadStatus===di.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===di.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===di.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===di.Cancelled}},{key:"isDone",get:function(){return[di.Loaded,di.Cancelled,di.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return As(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var pr=Object(ae.a)(this.bounds,4),ln=pr[0],Rn=pr[1],Fn=pr[2],li=pr[3],qi=[(Fn-ln)/2,(li-Rn)/2],Wn=en(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:qi,meta:`
      `.concat(this.key,`
      `)}});return Wn}},{key:"key",get:function(){var pr="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return pr}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(pr){return Qs(this,arguments,Object(gr.a)().mark(function ln(Rn){var Fn,li,qi,Wn,ga,ao,is,vo,Et,bt,mr,or,Ir,yn,jn,qn,ui;return Object(gr.a)().wrap(function(oi){for(;;)switch(oi.prev=oi.next){case 0:return Fn=Rn.getData,li=Rn.onLoad,qi=Rn.onError,this.loadDataId++,Wn=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=di.Loading,ga=null,oi.prev=7,is=this.x,vo=this.y,Et=this.z,bt=this.bounds,mr=this.tileSize,or=this.warp,Ir=Mu(is,vo,Et,or),yn=Ir.warpX,jn=Ir.warpY,qn=this.abortController.signal,ui={x:yn,y:jn,z:Et,bounds:bt,tileSize:mr,signal:qn,warp:or},oi.next=14,Fn(ui,this);case 14:ga=oi.sent,oi.next=20;break;case 17:oi.prev=17,oi.t0=oi.catch(7),ao=oi.t0;case 20:if(Wn===this.loadDataId){oi.next=22;break}return oi.abrupt("return");case 22:if(!(this.isCancelled&&!ga)){oi.next=24;break}return oi.abrupt("return");case 24:if(!(ao||!ga)){oi.next=28;break}return this.loadStatus=di.Failure,qi(ao,this),oi.abrupt("return");case 28:this.loadStatus=di.Loaded,this.data=ga,li(this);case 31:case"end":return oi.stop()}},ln,this,[[7,17]])}))}},{key:"reloadData",value:function(pr){this.isLoading&&this.abortLoad(),this.loadData(pr)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=di.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),Ht}(Vr.EventEmitter),Es=function(Ut,Ht){var Kt=Ws(Ut),pr=Fs(Kt,Ht),ln=360*3-180,Rn=85.0511287798065,Fn=[Math.max(pr[0][0],-ln),Math.max(pr[0][1],-Rn),Math.min(pr[1][0],ln),Math.min(pr[1][1],Rn)];return Fn},al=function(Ut,Ht){var Kt=Ws(Ut),pr=Ws(Ht),ln=Ou(Kt,pr);return ln},cu=Object.defineProperty,zo=Object.defineProperties,qu=Object.getOwnPropertyDescriptors,ol=Object.getOwnPropertySymbols,xu=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,Ko=function(Ut,Ht,Kt){return Ht in Ut?cu(Ut,Ht,{enumerable:!0,configurable:!0,writable:!0,value:Kt}):Ut[Ht]=Kt},Iu=function(Ut,Ht){for(var Kt in Ht||(Ht={}))xu.call(Ht,Kt)&&Ko(Ut,Kt,Ht[Kt]);if(ol){var pr=Object(r.a)(ol(Ht)),ln;try{for(pr.s();!(ln=pr.n()).done;){var Kt=ln.value;xo.call(Ht,Kt)&&Ko(Ut,Kt,Ht[Kt])}}catch(Rn){pr.e(Rn)}finally{pr.f()}}return Ut},Hl=function(Ut,Ht){return zo(Ut,qu(Ht))},xl=On.throttle,yl=function(ht){return ht.TilesLoadStart="tiles-load-start",ht.TileLoaded="tile-loaded",ht.TileError="tile-error",ht.TileUnload="tile-unload",ht.TileUpdate="tile-update",ht.TilesLoadFinished="tiles-load-finished",ht}(yl||{}),Tc=function(ht){Object(e.a)(Ht,ht);var Ut=Object(g.a)(Ht);function Ht(Kt){var pr;return Object(o.a)(this,Ht),pr=Ut.call(this),pr.currentTiles=[],pr.cacheTiles=new Map,pr.throttleUpdate=xl(function(ln,Rn){pr.update(ln,Rn)},16),pr.onTileLoad=function(ln){pr.emit("tile-loaded",ln),pr.updateTileVisible(),pr.loadFinished()},pr.onTileError=function(ln,Rn){pr.emit("tile-error",{error:ln,tile:Rn}),pr.updateTileVisible(),pr.loadFinished()},pr.onTileUnload=function(ln){pr.emit("tile-unload",ln),pr.loadFinished()},pr.options={tileSize:256,minZoom:0,maxZoom:Infinity,zoomOffset:0,extent:Mo,getTileData:ko,warp:!0,updateStrategy:Dn.Replace},pr.updateOptions(Kt),pr}return Object(L.a)(Ht,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(pr){return pr.isDone})}},{key:"tiles",get:function(){var pr=Array.from(this.cacheTiles.values()).sort(function(ln,Rn){return ln.z-Rn.z});return pr}},{key:"updateOptions",value:function(pr){var ln=pr.minZoom===void 0?this.options.minZoom:Math.ceil(pr.minZoom),Rn=pr.maxZoom===void 0?this.options.maxZoom:Math.floor(pr.maxZoom);this.options=Hl(Iu(Iu({},this.options),pr),{minZoom:ln,maxZoom:Rn})}},{key:"update",value:function(pr,ln){var Rn=this,Fn=Math.max(0,Math.ceil(pr));if(!(this.lastViewStates&&this.lastViewStates.zoom===Fn&&al(this.lastViewStates.latLonBoundsBuffer,ln))){var li=Es(ln,_o);this.lastViewStates={zoom:Fn,latLonBounds:ln,latLonBoundsBuffer:li},this.currentZoom=Fn;var qi=!1,Wn=this.getTileIndices(Fn,li).filter(function(ga){return Rn.options.warp||ga.x>=0&&ga.x<Math.pow(2,Fn)});this.emit("tiles-load-start"),this.currentTiles=Wn.map(function(ga){var ao=ga.x,is=ga.y,vo=ga.z,Et=Rn.getTile(ao,is,vo);if(Et){var bt=(Et==null?void 0:Et.isFailure)||(Et==null?void 0:Et.isCancelled);return bt&&Et.loadData({getData:Rn.options.getTileData,onLoad:Rn.onTileLoad,onError:Rn.onTileError}),Et}return Et=Rn.createTile(ao,is,vo),qi=!0,Et}),qi&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var pr=Object(r.a)(this.cacheTiles),ln;try{for(pr.s();!(ln=pr.n()).done;){var Rn=ln.value,Fn=Object(ae.a)(Rn,2),li=Fn[0],qi=Fn[1];if(!this.currentTiles.includes(qi)){this.cacheTiles.delete(li),this.onTileUnload(qi);return}this.onTileUnload(qi),qi.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(Wn){pr.e(Wn)}finally{pr.f()}}},{key:"reloadTileById",value:function(pr,ln,Rn){var Fn=this.cacheTiles.get("".concat(ln,",").concat(Rn,",").concat(pr));Fn&&(this.onTileUnload(Fn),Fn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(pr,ln,Rn){var Fn=this.getTileByLngLat(pr,ln,Rn);Fn&&this.reloadTileById(Fn.z,Fn.x,Fn.y)}},{key:"reloadTileByExtent",value:function(pr,ln){var Rn=this,Fn=this.getTileIndices(ln,pr);Fn.forEach(function(li){Rn.reloadTileById(li.z,li.x,li.y)})}},{key:"pruneRequests",value:function(){var pr=[],ln=Object(r.a)(this.cacheTiles.values()),Rn;try{for(ln.s();!(Rn=ln.n()).done;){var Fn=Rn.value;Fn.isLoading&&!Fn.isCurrent&&!Fn.isVisible&&pr.push(Fn)}}catch(qi){ln.e(qi)}finally{ln.f()}for(;pr.length>0;){var li=pr.shift();li.abortLoad()}}},{key:"getTileByLngLat",value:function(pr,ln,Rn){var Fn=this.options.zoomOffset,li=Math.ceil(Rn)+Fn,qi=bo(pr,ln,li),Wn=this.tiles.filter(function(ga){return ga.key==="".concat(qi[0],"_").concat(qi[1],"_").concat(li)});return Wn[0]}},{key:"getTileExtent",value:function(pr,ln){return this.getTileIndices(ln,pr)}},{key:"getTileByZXY",value:function(pr,ln,Rn){var Fn=this.tiles.filter(function(li){return li.key==="".concat(ln,"_").concat(Rn,"_").concat(pr)});return Fn[0]}},{key:"clear",value:function(){var pr=Object(r.a)(this.cacheTiles.values()),ln;try{for(pr.s();!(ln=pr.n()).done;){var Rn=ln.value;Rn.isLoading?Rn.abortLoad():this.onTileUnload(Rn)}}catch(Fn){pr.e(Fn)}finally{pr.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var pr=this.options.updateStrategy,ln=new Map,Rn=Object(r.a)(this.cacheTiles.values()),Fn;try{for(Rn.s();!(Fn=Rn.n()).done;){var li=Fn.value;ln.set(li.key,li.isVisible),li.isCurrent=!1,li.isVisible=!1}}catch(vo){Rn.e(vo)}finally{Rn.f()}var qi=Object(r.a)(this.currentTiles),Wn;try{for(qi.s();!(Wn=qi.n()).done;){var ga=Wn.value;ga.isCurrent=!0,ga.isVisible=!0}}catch(vo){qi.e(vo)}finally{qi.f()}var ao=Array.from(this.cacheTiles.values());typeof pr=="function"?pr(ao):ss[pr](ao);var is=!1;Array.from(this.cacheTiles.values()).forEach(function(vo){vo.isVisible!==ln.get(vo.key)?(vo.isVisibleChange=!0,is=!0):vo.isVisibleChange=!1}),is&&this.emit("tile-update")}},{key:"getTileIndices",value:function(pr,ln){var Rn=this.options,Fn=Rn.tileSize,li=Rn.extent,qi=Rn.zoomOffset,Wn=Math.floor(this.options.maxZoom),ga=Math.ceil(this.options.minZoom),ao=us({maxZoom:Wn,minZoom:ga,zoomOffset:qi,tileSize:Fn,zoom:pr,latLonBounds:ln,extent:li});return ao}},{key:"getTileId",value:function(pr,ln,Rn){var Fn="".concat(pr,",").concat(ln,",").concat(Rn);return Fn}},{key:"loadFinished",value:function(){var pr=!this.currentTiles.some(function(ln){return!ln.isDone});return pr&&this.emit("tiles-load-finished"),pr}},{key:"getTile",value:function(pr,ln,Rn){var Fn=this.getTileId(pr,ln,Rn),li=this.cacheTiles.get(Fn);return li}},{key:"createTile",value:function(pr,ln,Rn){var Fn=this.getTileId(pr,ln,Rn),li=new Ls({x:pr,y:ln,z:Rn,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(Fn,li),li.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),li}},{key:"resizeCacheTiles",value:function(){var pr=Da*this.currentTiles.length,ln=this.cacheTiles.size>pr;if(ln){var Rn=Object(r.a)(this.cacheTiles),Fn;try{for(Rn.s();!(Fn=Rn.n()).done;){var li=Fn.value,qi=Object(ae.a)(li,2),Wn=qi[0],ga=qi[1];if(!ga.isVisible&&!this.currentTiles.includes(ga)&&(this.cacheTiles.delete(Wn),this.onTileUnload(ga)),this.cacheTiles.size<=pr)break}}catch(ao){Rn.e(ao)}finally{Rn.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var pr=Object(r.a)(this.cacheTiles.values()),ln;try{for(pr.s();!(ln=pr.n()).done;){var Rn=ln.value;Rn.parent=null,Rn.children.length=0}}catch(ga){pr.e(ga)}finally{pr.f()}var Fn=Object(r.a)(this.cacheTiles.values()),li;try{for(Fn.s();!(li=Fn.n()).done;){var qi=li.value,Wn=this.getNearestAncestor(qi.x,qi.y,qi.z);qi.parent=Wn,(Wn==null?void 0:Wn.children)&&Wn.children.push(qi)}}catch(ga){Fn.e(ga)}finally{Fn.f()}}},{key:"getNearestAncestor",value:function(pr,ln,Rn){for(;Rn>this.options.minZoom;){pr=Math.floor(pr/2),ln=Math.floor(ln/2),Rn=Rn-1;var Fn=this.getTile(pr,ln,Rn);if(Fn)return Fn}return null}}]),Ht}(on.a);function El(ht){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(ht)}function _l(ht){var Ut=[],Ht=/\{([a-z])-([a-z])\}/.exec(ht);if(Ht){var Kt=Ht[1].charCodeAt(0),pr=Ht[2].charCodeAt(0),ln;for(ln=Kt;ln<=pr;++ln)Ut.push(ht.replace(Ht[0],String.fromCharCode(ln)));return Ut}if(Ht=/\{(\d+)-(\d+)\}/.exec(ht),Ht){for(var Rn=parseInt(Ht[2],10),Fn=parseInt(Ht[1],10);Fn<=Rn;Fn++)Ut.push(ht.replace(Ht[0],Fn.toString()));return Ut}return Ut.push(ht),Ut}function sl(ht,Ut){if(!ht||!ht.length)throw new Error("url is not allowed to be empty");var Ht=Ut.x,Kt=Ut.y,pr=Ut.z,ln=_l(ht),Rn=Math.abs(Ht+Kt)%ln.length,Fn=C(ln[Rn])?"".concat(ln[Rn],"/{z}/{x}/{y}"):ln[Rn];return Fn.replace(/\{x\}/g,Ht.toString()).replace(/\{y\}/g,Kt.toString()).replace(/\{z\}/g,pr.toString()).replace(/\{bbox\}/g,As(Ht,Kt,pr).join(",")).replace(/\{-y\}/g,(Math.pow(2,pr)-Kt-1).toString())}function ls(ht,Ut){var Ht=Ut.x,Kt=Ut.y,pr=Ut.z,ln=Ut.layer,Rn=Ut.version,Fn=Rn===void 0?"1.0.0":Rn,li=Ut.style,qi=li===void 0?"default":li,Wn=Ut.format,ga=Ut.service,ao=ga===void 0?"WMTS":ga,is=Ut.tileMatrixset,vo=_l(ht),Et=Math.abs(Ht+Kt)%vo.length,bt="".concat(vo[Et],"&SERVICE=").concat(ao,"&REQUEST=GetTile&VERSION=").concat(Fn,"&LAYER=").concat(ln,"&STYLE=").concat(qi,"&TILEMATRIXSET=").concat(is,"&FORMAT=").concat(Wn,"&TILECOL=").concat(Ht,"&TILEROW=").concat(Kt,"&TILEMATRIX=").concat(pr);return bt}function gs(ht,Ut){return ht==null?Ut:ht}},HfwV:function(br,Ot,Ee){"use strict";var he=Ee("xnQO");br.exports=B;function B(v,p,c,h,i){this.properties={},this.extent=c,this.type=0,this._pbf=v,this._geometry=-1,this._keys=h,this._values=i,v.readFields(L,this,p)}function L(v,p,c){v==1?p.id=c.readVarint():v==2?o(c,p):v==3?p.type=c.readVarint():v==4&&(p._geometry=c.pos)}function o(v,p){for(var c=v.readVarint()+v.pos;v.pos<c;){var h=p._keys[v.readVarint()],i=p._values[v.readVarint()];p.properties[h]=i}}B.types=["Unknown","Point","LineString","Polygon"],B.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var p=v.readVarint()+v.pos,c=1,h=0,i=0,r=0,n=[],s;v.pos<p;){if(h<=0){var f=v.readVarint();c=f&7,h=f>>3}if(h--,c===1||c===2)i+=v.readSVarint(),r+=v.readSVarint(),c===1&&(s&&n.push(s),s=[]),s.push(new he(i,r));else if(c===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+c)}return s&&n.push(s),n},B.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var p=v.readVarint()+v.pos,c=1,h=0,i=0,r=0,n=Infinity,s=-Infinity,f=Infinity,u=-Infinity;v.pos<p;){if(h<=0){var d=v.readVarint();c=d&7,h=d>>3}if(h--,c===1||c===2)i+=v.readSVarint(),r+=v.readSVarint(),i<n&&(n=i),i>s&&(s=i),r<f&&(f=r),r>u&&(u=r);else if(c!==7)throw new Error("unknown command "+c)}return[n,f,s,u]},B.prototype.toGeoJSON=function(v,p,c){var h=this.extent*Math.pow(2,c),i=this.extent*v,r=this.extent*p,n=this.loadGeometry(),s=B.types[this.type],f,u;function d(x){for(var M=0;M<x.length;M++){var P=x[M],C=180-(P.y+r)*360/h;x[M]=[(P.x+i)*360/h-180,360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(f=0;f<n.length;f++)b[f]=n[f][0];n=b,d(n);break;case 2:for(f=0;f<n.length;f++)d(n[f]);break;case 3:for(n=e(n),f=0;f<n.length;f++)for(u=0;u<n[f].length;u++)d(n[f][u]);break}n.length===1?n=n[0]:s="Multi"+s;var _={type:"Feature",geometry:{type:s,coordinates:n},properties:this.properties};return"id"in this&&(_.id=this.id),_};function e(v){var p=v.length;if(p<=1)return[v];for(var c=[],h,i,r=0;r<p;r++){var n=g(v[r]);n!==0&&(i===void 0&&(i=n<0),i===n<0?(h&&c.push(h),h=[v[r]]):h.push(v[r]))}return h&&c.push(h),c}function g(v){for(var p=0,c=0,h=v.length,i=h-1,r,n;c<h;i=c++)r=v[c],n=v[i],p+=(n.x-r.x)*(r.y+n.y);return p}},I01J:function(br,Ot,Ee){var he=Ee("44Ds"),B=500;function L(o){var e=he(o,function(v){return g.size===B&&g.clear(),v}),g=e.cache;return e}br.exports=L},IOcx:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return he}),Ee.d(Ot,"b",function(){return N}),Ee.d(Ot,"c",function(){return W}),Ee.d(Ot,"d",function(){return H}),Ee.d(Ot,"e",function(){return J});var he={};Ee.r(he),Ee.d(he,"create",function(){return L}),Ee.d(he,"clone",function(){return o}),Ee.d(he,"copy",function(){return e}),Ee.d(he,"identity",function(){return g}),Ee.d(he,"fromValues",function(){return v}),Ee.d(he,"set",function(){return p}),Ee.d(he,"transpose",function(){return c}),Ee.d(he,"invert",function(){return h}),Ee.d(he,"adjoint",function(){return i}),Ee.d(he,"determinant",function(){return r}),Ee.d(he,"multiply",function(){return n}),Ee.d(he,"rotate",function(){return s}),Ee.d(he,"scale",function(){return f}),Ee.d(he,"fromRotation",function(){return u}),Ee.d(he,"fromScaling",function(){return d}),Ee.d(he,"str",function(){return b}),Ee.d(he,"frob",function(){return _}),Ee.d(he,"LDU",function(){return x}),Ee.d(he,"add",function(){return M}),Ee.d(he,"subtract",function(){return P}),Ee.d(he,"exactEquals",function(){return C}),Ee.d(he,"equals",function(){return O}),Ee.d(he,"multiplyScalar",function(){return w}),Ee.d(he,"multiplyScalarAndAdd",function(){return S}),Ee.d(he,"mul",function(){return I}),Ee.d(he,"sub",function(){return j});var B=Ee("yU0y");function L(){var Q=new B.a(4);return B.a!=Float32Array&&(Q[1]=0,Q[2]=0),Q[0]=1,Q[3]=1,Q}function o(Q){var ne=new B.a(4);return ne[0]=Q[0],ne[1]=Q[1],ne[2]=Q[2],ne[3]=Q[3],ne}function e(Q,ne){return Q[0]=ne[0],Q[1]=ne[1],Q[2]=ne[2],Q[3]=ne[3],Q}function g(Q){return Q[0]=1,Q[1]=0,Q[2]=0,Q[3]=1,Q}function v(Q,ne,K,ie){var de=new B.a(4);return de[0]=Q,de[1]=ne,de[2]=K,de[3]=ie,de}function p(Q,ne,K,ie,de){return Q[0]=ne,Q[1]=K,Q[2]=ie,Q[3]=de,Q}function c(Q,ne){if(Q===ne){var K=ne[1];Q[1]=ne[2],Q[2]=K}else Q[0]=ne[0],Q[1]=ne[2],Q[2]=ne[1],Q[3]=ne[3];return Q}function h(Q,ne){var K=ne[0],ie=ne[1],de=ne[2],we=ne[3],Re=K*we-de*ie;return Re?(Re=1/Re,Q[0]=we*Re,Q[1]=-ie*Re,Q[2]=-de*Re,Q[3]=K*Re,Q):null}function i(Q,ne){var K=ne[0];return Q[0]=ne[3],Q[1]=-ne[1],Q[2]=-ne[2],Q[3]=K,Q}function r(Q){return Q[0]*Q[3]-Q[2]*Q[1]}function n(Q,ne,K){var ie=ne[0],de=ne[1],we=ne[2],Re=ne[3],_e=K[0],Ue=K[1],rt=K[2],Fe=K[3];return Q[0]=ie*_e+we*Ue,Q[1]=de*_e+Re*Ue,Q[2]=ie*rt+we*Fe,Q[3]=de*rt+Re*Fe,Q}function s(Q,ne,K){var ie=ne[0],de=ne[1],we=ne[2],Re=ne[3],_e=Math.sin(K),Ue=Math.cos(K);return Q[0]=ie*Ue+we*_e,Q[1]=de*Ue+Re*_e,Q[2]=ie*-_e+we*Ue,Q[3]=de*-_e+Re*Ue,Q}function f(Q,ne,K){var ie=ne[0],de=ne[1],we=ne[2],Re=ne[3],_e=K[0],Ue=K[1];return Q[0]=ie*_e,Q[1]=de*_e,Q[2]=we*Ue,Q[3]=Re*Ue,Q}function u(Q,ne){var K=Math.sin(ne),ie=Math.cos(ne);return Q[0]=ie,Q[1]=K,Q[2]=-K,Q[3]=ie,Q}function d(Q,ne){return Q[0]=ne[0],Q[1]=0,Q[2]=0,Q[3]=ne[1],Q}function b(Q){return"mat2("+Q[0]+", "+Q[1]+", "+Q[2]+", "+Q[3]+")"}function _(Q){return Math.hypot(Q[0],Q[1],Q[2],Q[3])}function x(Q,ne,K,ie){return Q[2]=ie[2]/ie[0],K[0]=ie[0],K[1]=ie[1],K[3]=ie[3]-Q[2]*K[1],[Q,ne,K]}function M(Q,ne,K){return Q[0]=ne[0]+K[0],Q[1]=ne[1]+K[1],Q[2]=ne[2]+K[2],Q[3]=ne[3]+K[3],Q}function P(Q,ne,K){return Q[0]=ne[0]-K[0],Q[1]=ne[1]-K[1],Q[2]=ne[2]-K[2],Q[3]=ne[3]-K[3],Q}function C(Q,ne){return Q[0]===ne[0]&&Q[1]===ne[1]&&Q[2]===ne[2]&&Q[3]===ne[3]}function O(Q,ne){var K=Q[0],ie=Q[1],de=Q[2],we=Q[3],Re=ne[0],_e=ne[1],Ue=ne[2],rt=ne[3];return Math.abs(K-Re)<=B.b*Math.max(1,Math.abs(K),Math.abs(Re))&&Math.abs(ie-_e)<=B.b*Math.max(1,Math.abs(ie),Math.abs(_e))&&Math.abs(de-Ue)<=B.b*Math.max(1,Math.abs(de),Math.abs(Ue))&&Math.abs(we-rt)<=B.b*Math.max(1,Math.abs(we),Math.abs(rt))}function w(Q,ne,K){return Q[0]=ne[0]*K,Q[1]=ne[1]*K,Q[2]=ne[2]*K,Q[3]=ne[3]*K,Q}function S(Q,ne,K,ie){return Q[0]=ne[0]+K[0]*ie,Q[1]=ne[1]+K[1]*ie,Q[2]=ne[2]+K[2]*ie,Q[3]=ne[3]+K[3]*ie,Q}var I=n,j=P,N=Ee("ZaHm"),W=Ee("ZxFD"),H=Ee("n+fv"),J=Ee("bl9R")},ISu3:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return L}),Ee.d(Ot,"b",function(){return e}),Ee.d(Ot,"c",function(){return o}),Ee.d(Ot,"d",function(){return g});var he={},B={},L=function(p){return B[p]},o=function(p,c){B[p]=c},e=function(p){return he[p]},g=function(p,c){he[p]=c}},Ioao:function(br,Ot,Ee){var he=Ee("heNW"),B=Math.max;function L(o,e,g){return e=B(e===void 0?o.length-1:e,0),function(){for(var v=arguments,p=-1,c=B(v.length-e,0),h=Array(c);++p<c;)h[p]=v[e+p];p=-1;for(var i=Array(e+1);++p<e;)i[p]=v[p];return i[e]=g(h),he(o,this,i)}}br.exports=L},IzEo:function(br,Ot,Ee){"use strict";var he=Ee("EFp3"),B=Ee.n(he),L=Ee("lnY3"),o=Ee.n(L),e=Ee("cWXX"),g=Ee("Znn+")},J2iB:function(br,Ot){function Ee(he){return he==null}br.exports=Ee},JBE3:function(br,Ot,Ee){var he=Ee("+Qka"),B=Ee("LsHQ"),L=B(function(o,e,g,v){he(o,e,g,v)});br.exports=L},Jssm:function(br,Ot,Ee){"use strict";var he=Ee("q1tI"),B=Ee("i8i4"),L=Ee("17x9"),o=Ee("fhzG");br.exports=o({displayName:"ReactFitText",propTypes:{children:L.element.isRequired,compressor:L.number,minFontSize:L.number,maxFontSize:L.number},getDefaultProps:function(){return{compressor:1,minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY}},componentDidMount:function(){window.addEventListener("resize",this._onBodyResize),this._onBodyResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._onBodyResize)},componentDidUpdate:function(){this._onBodyResize()},_onBodyResize:function(){var g=B.findDOMNode(this),v=g.offsetWidth;g.style.fontSize=Math.max(Math.min(v/(this.props.compressor*10),parseFloat(this.props.maxFontSize)),parseFloat(this.props.minFontSize))+"px"},_renderChildren:function(){var g=this;return he.Children.map(this.props.children,function(v){return he.cloneElement(v,{ref:function(c){return g._childRef=c}})})},render:function(){return this._renderChildren()[0]}})},KwMD:function(br,Ot){function Ee(he,B,L,o){for(var e=he.length,g=L+(o?1:-1);o?g--:++g<e;)if(B(he[g],g,he))return g;return-1}br.exports=Ee},LGYb:function(br,Ot,Ee){var he=Ee("1hJj"),B=Ee("jbM+"),L=Ee("Xt/L"),o=Ee("xYSL"),e=Ee("dQpi"),g=Ee("rEGp"),v=200;function p(c,h,i){var r=-1,n=B,s=c.length,f=!0,u=[],d=u;if(i)f=!1,n=L;else if(s>=v){var b=h?null:e(c);if(b)return g(b);f=!1,n=o,d=new he}else d=h?[]:u;e:for(;++r<s;){var _=c[r],x=h?h(_):_;if(_=i||_!==0?_:0,f&&x===x){for(var M=d.length;M--;)if(d[M]===x)continue e;h&&d.push(x),u.push(_)}else n(d,x,i)||(d!==u&&d.push(x),u.push(_))}return u}br.exports=p},LO96:function(br,Ot,Ee){"use strict";br.exports=function(){var he=1;function B(){return he++}return{generate:B}}},LcsW:function(br,Ot,Ee){var he=Ee("kekF"),B=he(Object.getPrototypeOf,Object);br.exports=B},LsHQ:function(br,Ot,Ee){var he=Ee("EA7m"),B=Ee("mv/X");function L(o){return he(function(e,g){var v=-1,p=g.length,c=p>1?g[p-1]:void 0,h=p>2?g[2]:void 0;for(c=o.length>3&&typeof c=="function"?(p--,c):void 0,h&&B(g[0],g[1],h)&&(c=p<3?void 0:c,p=1),e=Object(e);++v<p;){var i=g[v];i&&o(e,i,v,c)}return e})}br.exports=L},Lw8S:function(br,Ot){function Ee(B,L){for(var o=0;o<L.length;o++){var e=L[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(B,e.key,e)}}function he(B,L,o){return L&&Ee(B.prototype,L),o&&Ee(B,o),Object.defineProperty(B,"prototype",{writable:!1}),B}br.exports=he,br.exports.__esModule=!0,br.exports.default=br.exports},MrPd:function(br,Ot,Ee){var he=Ee("hypo"),B=Ee("ljhN"),L=Object.prototype,o=L.hasOwnProperty;function e(g,v,p){var c=g[v];(!(o.call(g,v)&&B(c,p))||p===void 0&&!(v in g))&&he(g,v,p)}br.exports=e},Nwvx:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return B}),Ee.d(Ot,"b",function(){return i});var he=Ee("0wsv");function B(_,x,M){if(_!==null)for(var P,C,O,w,S,I,j,N=0,W=0,H,J=_.type,Q=J==="FeatureCollection",ne=J==="Feature",K=Q?_.features.length:1,ie=0;ie<K;ie++){j=Q?_.features[ie].geometry:ne?_.geometry:_,H=j?j.type==="GeometryCollection":!1,S=H?j.geometries.length:1;for(var de=0;de<S;de++){var we=0,Re=0;if(w=H?j.geometries[de]:j,w!==null){I=w.coordinates;var _e=w.type;switch(N=M&&(_e==="Polygon"||_e==="MultiPolygon")?1:0,_e){case null:break;case"Point":if(x(I,W,ie,we,Re)===!1)return!1;W++,we++;break;case"LineString":case"MultiPoint":for(P=0;P<I.length;P++){if(x(I[P],W,ie,we,Re)===!1)return!1;W++,_e==="MultiPoint"&&we++}_e==="LineString"&&we++;break;case"Polygon":case"MultiLineString":for(P=0;P<I.length;P++){for(C=0;C<I[P].length-N;C++){if(x(I[P][C],W,ie,we,Re)===!1)return!1;W++}_e==="MultiLineString"&&we++,_e==="Polygon"&&Re++}_e==="Polygon"&&we++;break;case"MultiPolygon":for(P=0;P<I.length;P++){for(Re=0,C=0;C<I[P].length;C++){for(O=0;O<I[P][C].length-N;O++){if(x(I[P][C][O],W,ie,we,Re)===!1)return!1;W++}Re++}we++}break;case"GeometryCollection":for(P=0;P<w.geometries.length;P++)if(B(w.geometries[P],x,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function L(_,x,M,P){var C=M;return B(_,function(O,w,S,I,j){w===0&&M===void 0?C=O:C=x(C,O,w,S,I,j)},P),C}function o(_,x){var M;switch(_.type){case"FeatureCollection":for(M=0;M<_.features.length&&x(_.features[M].properties,M)!==!1;M++);break;case"Feature":x(_.properties,0);break}}function e(_,x,M){var P=M;return o(_,function(C,O){O===0&&M===void 0?P=C:P=x(P,C,O)}),P}function g(_,x){if(_.type==="Feature")x(_,0);else if(_.type==="FeatureCollection")for(var M=0;M<_.features.length&&x(_.features[M],M)!==!1;M++);}function v(_,x,M){var P=M;return g(_,function(C,O){O===0&&M===void 0?P=C:P=x(P,C,O)}),P}function p(_){var x=[];return B(_,function(M){x.push(M)}),x}function c(_,x){var M,P,C,O,w,S,I,j,N,W,H=0,J=_.type==="FeatureCollection",Q=_.type==="Feature",ne=J?_.features.length:1;for(M=0;M<ne;M++){for(S=J?_.features[M].geometry:Q?_.geometry:_,j=J?_.features[M].properties:Q?_.properties:{},N=J?_.features[M].bbox:Q?_.bbox:void 0,W=J?_.features[M].id:Q?_.id:void 0,I=S?S.type==="GeometryCollection":!1,w=I?S.geometries.length:1,C=0;C<w;C++){if(O=I?S.geometries[C]:S,O===null){if(x(null,H,j,N,W)===!1)return!1;continue}switch(O.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(x(O,H,j,N,W)===!1)return!1;break}case"GeometryCollection":{for(P=0;P<O.geometries.length;P++)if(x(O.geometries[P],H,j,N,W)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}H++}}function h(_,x,M){var P=M;return c(_,function(C,O,w,S,I){O===0&&M===void 0?P=C:P=x(P,C,O,w,S,I)}),P}function i(_,x){c(_,function(M,P,C,O,w){var S=M===null?null:M.type;switch(S){case null:case"Point":case"LineString":case"Polygon":return x(Object(he.b)(M,C,{bbox:O,id:w}),P,0)===!1?!1:void 0}var I;switch(S){case"MultiPoint":I="Point";break;case"MultiLineString":I="LineString";break;case"MultiPolygon":I="Polygon";break}for(var j=0;j<M.coordinates.length;j++){var N=M.coordinates[j],W={type:I,coordinates:N};if(x(Object(he.b)(W,C),P,j)===!1)return!1}})}function r(_,x,M){var P=M;return i(_,function(C,O,w){O===0&&w===0&&M===void 0?P=C:P=x(P,C,O,w)}),P}function n(_,x){i(_,function(M,P,C){var O=0;if(!!M.geometry){var w=M.geometry.type;if(!(w==="Point"||w==="MultiPoint")){var S,I=0,j=0,N=0;if(B(M,function(W,H,J,Q,ne){if(S===void 0||P>I||Q>j||ne>N){S=W,I=P,j=Q,N=ne,O=0;return}var K=Object(he.f)([S,W],M.properties);if(x(K,P,C,ne,O)===!1)return!1;O++,S=W})===!1)return!1}}})}function s(_,x,M){var P=M,C=!1;return n(_,function(O,w,S,I,j){C===!1&&M===void 0?P=O:P=x(P,O,w,S,I,j),C=!0}),P}function f(_,x){if(!_)throw new Error("geojson is required");i(_,function(M,P,C){if(M.geometry!==null){var O=M.geometry.type,w=M.geometry.coordinates;switch(O){case"LineString":if(x(M,P,C,0,0)===!1)return!1;break;case"Polygon":for(var S=0;S<w.length;S++)if(x(Object(he.f)(w[S],M.properties),P,C,S)===!1)return!1;break}}})}function u(_,x,M){var P=M;return f(_,function(C,O,w,S){O===0&&M===void 0?P=C:P=x(P,C,O,w,S)}),P}function d(_,x){if(x=x||{},!Object(he.e)(x))throw new Error("options is invalid");var M=x.featureIndex||0,P=x.multiFeatureIndex||0,C=x.geometryIndex||0,O=x.segmentIndex||0,w=x.properties,S;switch(_.type){case"FeatureCollection":M<0&&(M=_.features.length+M),w=w||_.features[M].properties,S=_.features[M].geometry;break;case"Feature":w=w||_.properties,S=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":S=_;break;default:throw new Error("geojson is invalid")}if(S===null)return null;var I=S.coordinates;switch(S.type){case"Point":case"MultiPoint":return null;case"LineString":return O<0&&(O=I.length+O-1),Object(he.f)([I[O],I[O+1]],w,x);case"Polygon":return C<0&&(C=I.length+C),O<0&&(O=I[C].length+O-1),Object(he.f)([I[C][O],I[C][O+1]],w,x);case"MultiLineString":return P<0&&(P=I.length+P),O<0&&(O=I[P].length+O-1),Object(he.f)([I[P][O],I[P][O+1]],w,x);case"MultiPolygon":return P<0&&(P=I.length+P),C<0&&(C=I[P].length+C),O<0&&(O=I[P][C].length-O-1),Object(he.f)([I[P][C][O],I[P][C][O+1]],w,x)}throw new Error("geojson is invalid")}function b(_,x){if(x=x||{},!Object(he.e)(x))throw new Error("options is invalid");var M=x.featureIndex||0,P=x.multiFeatureIndex||0,C=x.geometryIndex||0,O=x.coordIndex||0,w=x.properties,S;switch(_.type){case"FeatureCollection":M<0&&(M=_.features.length+M),w=w||_.features[M].properties,S=_.features[M].geometry;break;case"Feature":w=w||_.properties,S=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":S=_;break;default:throw new Error("geojson is invalid")}if(S===null)return null;var I=S.coordinates;switch(S.type){case"Point":return Object(he.h)(I,w,x);case"MultiPoint":return P<0&&(P=I.length+P),Object(he.h)(I[P],w,x);case"LineString":return O<0&&(O=I.length+O),Object(he.h)(I[O],w,x);case"Polygon":return C<0&&(C=I.length+C),O<0&&(O=I[C].length+O),Object(he.h)(I[C][O],w,x);case"MultiLineString":return P<0&&(P=I.length+P),O<0&&(O=I[P].length+O),Object(he.h)(I[P][O],w,x);case"MultiPolygon":return P<0&&(P=I.length+P),C<0&&(C=I[P].length+C),O<0&&(O=I[P][C].length-O),Object(he.h)(I[P][C][O],w,x)}throw new Error("geojson is invalid")}},O0oS:function(br,Ot,Ee){var he=Ee("Cwc5"),B=function(){try{var L=he(Object,"defineProperty");return L({},"",{}),L}catch(o){}}();br.exports=B},OBhP:function(br,Ot,Ee){var he=Ee("fmRc"),B=Ee("gFfm"),L=Ee("MrPd"),o=Ee("WwFo"),e=Ee("Dw+G"),g=Ee("5Tg0"),v=Ee("Q1l4"),p=Ee("VOtZ"),c=Ee("EEGq"),h=Ee("qZTm"),i=Ee("G6z8"),r=Ee("QqLw"),n=Ee("yHx3"),s=Ee("wrZu"),f=Ee("+iFO"),u=Ee("Z0cm"),d=Ee("DSRE"),b=Ee("zEVN"),_=Ee("GoyQ"),x=Ee("1+5i"),M=Ee("7GkX"),P=Ee("mTTR"),C=1,O=2,w=4,S="[object Arguments]",I="[object Array]",j="[object Boolean]",N="[object Date]",W="[object Error]",H="[object Function]",J="[object GeneratorFunction]",Q="[object Map]",ne="[object Number]",K="[object Object]",ie="[object RegExp]",de="[object Set]",we="[object String]",Re="[object Symbol]",_e="[object WeakMap]",Ue="[object ArrayBuffer]",rt="[object DataView]",Fe="[object Float32Array]",Se="[object Float64Array]",ye="[object Int8Array]",Oe="[object Int16Array]",ue="[object Int32Array]",xe="[object Uint8Array]",Ae="[object Uint8ClampedArray]",pe="[object Uint16Array]",be="[object Uint32Array]",le={};le[S]=le[I]=le[Ue]=le[rt]=le[j]=le[N]=le[Fe]=le[Se]=le[ye]=le[Oe]=le[ue]=le[Q]=le[ne]=le[K]=le[ie]=le[de]=le[we]=le[Re]=le[xe]=le[Ae]=le[pe]=le[be]=!0,le[W]=le[H]=le[_e]=!1;function z(ae,V,re,te,q,ve){var Me,De=V&C,ze=V&O,We=V&w;if(re&&(Me=q?re(ae,te,q,ve):re(ae)),Me!==void 0)return Me;if(!_(ae))return ae;var He=u(ae);if(He){if(Me=n(ae),!De)return v(ae,Me)}else{var $e=r(ae),It=$e==H||$e==J;if(d(ae))return g(ae,De);if($e==K||$e==S||It&&!q){if(Me=ze||It?{}:f(ae),!De)return ze?c(ae,e(Me,ae)):p(ae,o(Me,ae))}else{if(!le[$e])return q?ae:{};Me=s(ae,$e,De)}}ve||(ve=new he);var Yt=ve.get(ae);if(Yt)return Yt;ve.set(ae,Me),x(ae)?ae.forEach(function(Br){Me.add(z(Br,V,re,Br,ae,ve))}):b(ae)&&ae.forEach(function(Br,tr){Me.set(tr,z(Br,V,re,tr,ae,ve))});var rr=We?ze?i:h:ze?P:M,ir=He?void 0:rr(ae);return B(ir||ae,function(Br,tr){ir&&(tr=Br,Br=ae[tr]),L(Me,tr,z(Br,V,re,tr,ae,ve))}),Me}br.exports=z},OoWq:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return M}),Ee.d(Ot,"b",function(){return O});var he=Ee("qLMh"),B=Ee("oBTY"),L=Ee("rAM+"),o=Ee("tJVT");function e(w,S,I){switch(w){case"+":return S+I;case"-":return S-I;case"*":return S*I;case"/":return S/I;case"%":return S%I;case"^":return Math.pow(S,I);case"abs":return Math.abs(S);case"floor":return Math.floor(S);case"round":return Math.round(S);case"ceil":return Math.ceil(S);case"sin":return Math.sin(S);case"cos":return Math.cos(S);case"atan":return I===-1?Math.atan(S):Math.atan2(S,I);case"min":return Math.min(S,I);case"max":return Math.max(S,I);case"log10":return Math.log(S);case"log2":return Math.log2(S);default:return console.warn("Calculate symbol err! Return default 0"),0}}function g(w,S){for(var I=S[0],j=I.width,N=I.height,W=S.map(function(we){return we.rasterData}),H=j*N,J=[],Q=JSON.stringify(w),ne=0;ne<H;ne++){var K=JSON.parse(Q),ie=v(K,W,ne);if(typeof ie=="number")J.push(ie);else{var de=c(K);J.push(de)}}return J}function v(w,S,I){if(w.length===2&&w[0]==="band"&&typeof w[1]=="number")try{return S[w[1]][I]}catch(j){return console.warn("Raster Data err!"),0}w.map(function(j,N){if(Array.isArray(j)&&j.length>0)switch(j[0]){case"band":try{w[N]=S[j[1]][I]}catch(W){console.warn("Raster Data err!"),w[N]=0}break;default:v(j,S,I)}})}function p(w){var S=Object(o.a)(w,3),I=S[0],j=S[1],N=j===void 0?-1:j,W=S[2],H=W===void 0?-1:W;if(I===void 0)return console.warn("Express err!"),["+",0,0];var J=I.replace(/\s+/g,"");return[J,N,H]}function c(w){var S=p(w),I=S[0],j=S[1],N=S[2];return Array.isArray(j)&&(j=c(w[1])),Array.isArray(N)&&(N=c(w[2])),e(I,j,N)}var h=Ee("3Aqx"),i=Object.defineProperty,r=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=function(S,I,j){return I in S?i(S,I,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[I]=j},b=function(S,I){for(var j in I||(I={}))f.call(I,j)&&d(S,j,I[j]);if(s){var N=Object(L.a)(s(I)),W;try{for(N.s();!(W=N.n()).done;){var j=W.value;u.call(I,j)&&d(S,j,I[j])}}catch(H){N.e(H)}finally{N.f()}}return S},_=function(S,I){return r(S,n(I))},x=function(S,I,j){return new Promise(function(N,W){var H=function(K){try{Q(j.next(K))}catch(ie){W(ie)}},J=function(K){try{Q(j.throw(K))}catch(ie){W(ie)}},Q=function(K){return K.done?N(K.value):Promise.resolve(K.value).then(H,J)};Q((j=j.apply(S,I)).next())})};function M(w,S,I){return x(this,null,Object(he.a)().mark(function j(){var N,W,H,J,Q,ne;return Object(he.a)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(w.length!==0){ie.next=2;break}return ie.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return ie.next=4,Promise.all(w.map(function(de){var we=de.data,Re=de.bands,_e=Re===void 0?[0]:Re;return S(we,_e)}));case 4:N=ie.sent,W=[],N.forEach(function(de){Array.isArray(de)?W.push.apply(W,Object(B.a)(de)):W.push(de)}),H=W[0],J=H.width,Q=H.height,ie.t0=typeof I,ie.next=ie.t0==="function"?11:ie.t0==="object"?13:15;break;case 11:return ne=I(W),ie.abrupt("break",16);case 13:return Array.isArray(I)?ne={rasterData:g(I,W)}:ne=P(I,W),ie.abrupt("break",16);case 15:ne={rasterData:W[0].rasterData};case 16:return ie.abrupt("return",_(b({},ne),{width:J,height:Q}));case 17:case"end":return ie.stop()}},j)}))}function P(w,S){var I=h.a[w.type];if(I.type==="function")return I.method(S,w==null?void 0:w.options);if(I.type==="operation")return w.type==="rgb"?C(I.expression,S):{rasterData:g(I.expression,S)}}function C(w,S){w.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),w.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),w.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var I=g(w.r||["band",0],S),j=g(w.g||["band",0],S),N=g(w.b||["band",0],S);return[I,j,N]}function O(w,S,I,j){return x(this,null,Object(he.a)().mark(function N(){var W;return Object(he.a)().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,M(w,S,I);case 2:W=J.sent,j(null,{data:W});case 4:case"end":return J.stop()}},N)}))}},Q1l4:function(br,Ot){function Ee(he,B){var L=-1,o=he.length;for(B||(B=Array(o));++L<o;)B[L]=he[L];return B}br.exports=Ee},"QQZ/":function(br,Ot,Ee){var he=Ee("Sq3C"),B=Ee("Z1HP"),L=Ee("Sxd8"),o=Ee("dt0z");function e(g,v,p){g=o(g),v=L(v);var c=v?B(g):0;return v&&c<v?he(v-c,p)+g:g}br.exports=e},QcOe:function(br,Ot,Ee){var he=Ee("GoyQ"),B=Ee("6sVZ"),L=Ee("7Ix3"),o=Object.prototype,e=o.hasOwnProperty;function g(v){if(!he(v))return L(v);var p=B(v),c=[];for(var h in v)h=="constructor"&&(p||!e.call(v,h))||c.push(h);return c}br.exports=g},QkVN:function(br,Ot,Ee){var he=Ee("+Qka"),B=Ee("LsHQ"),L=B(function(o,e,g){he(o,e,g)});br.exports=L},"R/W3":function(br,Ot,Ee){var he=Ee("KwMD"),B=Ee("2ajD"),L=Ee("CZoQ");function o(e,g,v){return g===g?L(e,g,v):he(e,B,v)}br.exports=o},RwN2:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return L}),Ee.d(Ot,"b",function(){return p});var he=Ee("0wsv");function B(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function L(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(h){if(h.length>1&&Object(he.d)(h[0])&&Object(he.d)(h[1]))return!0;if(Array.isArray(h[0])&&h[0].length)return o(h[0]);throw new Error("coordinates must only contain numbers")}function e(h,i,r){if(!i||!r)throw new Error("type and name required");if(!h||h.type!==i)throw new Error("Invalid input to "+r+": must be a "+i+", given "+h.type)}function g(h,i,r){if(!h)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!h||h.type!=="Feature"||!h.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!h.geometry||h.geometry.type!==i)throw new Error("Invalid input to "+r+": must be a "+i+", given "+h.geometry.type)}function v(h,i,r){if(!h)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!h||h.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,s=h.features;n<s.length;n++){var f=s[n];if(!f||f.type!=="Feature"||!f.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!f.geometry||f.geometry.type!==i)throw new Error("Invalid input to "+r+": must be a "+i+", given "+f.geometry.type)}}function p(h){return h.type==="Feature"?h.geometry:h}function c(h,i){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}},Sa1T:function(br,Ot,Ee){"use strict";br.exports=function(he){var B={};function L(v){var p=he.get(v);return p===void 0?[]:B[p]||[]}function o(v,p){var c=he.get(v);B[c]||(B[c]=[]),B[c].push(p)}function e(v,p){for(var c=L(v),h=0,i=c.length;h<i;++h)if(c[h]===p){c.splice(h,1);break}}function g(v){var p=L(v);!p||(p.length=0)}return{get:L,add:o,removeListener:e,removeAllListeners:g}}},Sq3C:function(br,Ot,Ee){var he=Ee("sKgW"),B=Ee("zoYe"),L=Ee("wy8a"),o=Ee("quyA"),e=Ee("Z1HP"),g=Ee("Em2t"),v=Math.ceil;function p(c,h){h=h===void 0?" ":B(h);var i=h.length;if(i<2)return i?he(h,c):h;var r=he(h,v(c/e(h)));return o(h)?L(g(r),0,c).join(""):r.slice(0,c)}br.exports=p},Sxd8:function(br,Ot,Ee){var he=Ee("ZCgT");function B(L){var o=he(L),e=o%1;return o===o?e?o-e:o:0}br.exports=B},T1AV:function(br,Ot,Ee){var he=Ee("t2Dn"),B=Ee("5Tg0"),L=Ee("yP5f"),o=Ee("Q1l4"),e=Ee("+iFO"),g=Ee("03A+"),v=Ee("Z0cm"),p=Ee("3L66"),c=Ee("DSRE"),h=Ee("lSCD"),i=Ee("GoyQ"),r=Ee("YO3V"),n=Ee("c6wG"),s=Ee("itsj"),f=Ee("jeLo");function u(d,b,_,x,M,P,C){var O=s(d,_),w=s(b,_),S=C.get(w);if(S){he(d,_,S);return}var I=P?P(O,w,_+"",d,b,C):void 0,j=I===void 0;if(j){var N=v(w),W=!N&&c(w),H=!N&&!W&&n(w);I=w,N||W||H?v(O)?I=O:p(O)?I=o(O):W?(j=!1,I=B(w,!0)):H?(j=!1,I=L(w,!0)):I=[]:r(w)||g(w)?(I=O,g(O)?I=f(O):(!i(O)||h(O))&&(I=e(w))):j=!1}j&&(C.set(w,I),M(I,w,x,P,C),C.delete(w)),he(d,_,I)}br.exports=u},TP7S:function(br,Ot){function Ee(he){return he===void 0}br.exports=Ee},U1ZX:function(br,Ot){},UB5X:function(br,Ot,Ee){var he=Ee("NykK"),B=Ee("ExA7"),L="[object Number]";function o(e){return typeof e=="number"||B(e)&&he(e)==L}br.exports=o},UFhH:function(br,Ot,Ee){"use strict";br.exports=function(he){var B=he.idGenerator,L=he.stateHandler.getState;function o(g){var v=L(g);return v&&v.id!==void 0?v.id:null}function e(g){var v=L(g);if(!v)throw new Error("setId required the element to have a resize detection state.");var p=B.generate();return v.id=p,p}return{get:o,set:e}}},UL9e:function(br,Ot,Ee){"use strict";var he=br.exports={};he.getOption=B;function B(L,o,e){var g=L[o];return g==null&&e!==void 0?e:g}},VIsB:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return o});var he=Ee("rAM+"),B=Ee("Hel2"),L=6378e3;function o(h,i){var r=h.dataArray,n=i.size,s=n===void 0?10:n,f=s/(2*Math.PI*L)*(256<<20)/2,u=e(r,s),d=u.gridHash,b=u.gridOffset,_=c(d,b,i);return{yOffset:f,xOffset:f,radius:f,type:"grid",dataArray:_}}function e(h,i){var r=Infinity,n=-Infinity,s,f=Object(he.a)(h),u;try{for(f.s();!(u=f.n()).done;){var d=u.value;s=d.coordinates[1],Number.isFinite(s)&&(r=s<r?s:r,n=s>n?s:n)}}catch(N){f.e(N)}finally{f.f()}var b=(r+n)/2,_=g(i,b);if(_.xOffset<=0||_.yOffset<=0)return{gridHash:{},gridOffset:_};var x={},M=Object(he.a)(h),P;try{for(M.s();!(P=M.n()).done;){var C=P.value,O=C.coordinates[1],w=C.coordinates[0];if(Number.isFinite(O)&&Number.isFinite(w)){var S=Math.floor((O+90)/_.yOffset),I=Math.floor((w+180)/_.xOffset),j="".concat(S,"-").concat(I);x[j]=x[j]||{count:0,points:[]},x[j].count+=1,x[j].points.push(C)}}}catch(N){M.e(N)}finally{M.f()}return{gridHash:x,gridOffset:_}}function g(h,i){var r=v(h),n=p(i,h);return{yOffset:r,xOffset:n}}function v(h){return h/L*(180/Math.PI)}function p(h,i){return i/L*(180/Math.PI)/Math.cos(h*Math.PI/180)}function c(h,i,r){return Object.keys(h).reduce(function(n,s,f){var u=s.split("-"),d=parseInt(u[0],10),b=parseInt(u[1],10),_={};if(r.field&&r.method){var x=B.c.getColumn(h[s].points,r.field);_[r.method]=B.c.statMap[r.method](x)}return Object.assign(_,{_id:f,coordinates:Object(B.f)([-180+i.xOffset*(b+.5),-90+i.yOffset*(d+.5)]),rawData:h[s].points,count:h[s].count}),n.push(_),n},[])}},VOtZ:function(br,Ot,Ee){var he=Ee("juv8"),B=Ee("MvSz");function L(o,e){return he(o,B(o),e)}br.exports=L},VmRL:function(br,Ot,Ee){"use strict";br.exports=he,br.exports.default=he;function he(Q,ne,K){K=K||2;var ie=ne&&ne.length,de=ie?ne[0]*K:Q.length,we=B(Q,0,de,K,!0),Re=[];if(!we||we.next===we.prev)return Re;var _e,Ue,rt,Fe,Se,ye,Oe;if(ie&&(we=c(Q,ne,we,K)),Q.length>80*K){_e=rt=Q[0],Ue=Fe=Q[1];for(var ue=K;ue<de;ue+=K)Se=Q[ue],ye=Q[ue+1],Se<_e&&(_e=Se),ye<Ue&&(Ue=ye),Se>rt&&(rt=Se),ye>Fe&&(Fe=ye);Oe=Math.max(rt-_e,Fe-Ue),Oe=Oe!==0?32767/Oe:0}return o(we,Re,K,_e,Ue,Oe,0),Re}function B(Q,ne,K,ie,de){var we,Re;if(de===J(Q,ne,K,ie)>0)for(we=ne;we<K;we+=ie)Re=N(we,Q[we],Q[we+1],Re);else for(we=K-ie;we>=ne;we-=ie)Re=N(we,Q[we],Q[we+1],Re);return Re&&M(Re,Re.next)&&(W(Re),Re=Re.next),Re}function L(Q,ne){if(!Q)return Q;ne||(ne=Q);var K=Q,ie;do if(ie=!1,!K.steiner&&(M(K,K.next)||x(K.prev,K,K.next)===0)){if(W(K),K=ne=K.prev,K===K.next)break;ie=!0}else K=K.next;while(ie||K!==ne);return ne}function o(Q,ne,K,ie,de,we,Re){if(!!Q){!Re&&we&&s(Q,ie,de,we);for(var _e=Q,Ue,rt;Q.prev!==Q.next;){if(Ue=Q.prev,rt=Q.next,we?g(Q,ie,de,we):e(Q)){ne.push(Ue.i/K|0),ne.push(Q.i/K|0),ne.push(rt.i/K|0),W(Q),Q=rt.next,_e=rt.next;continue}if(Q=rt,Q===_e){Re?Re===1?(Q=v(L(Q),ne,K),o(Q,ne,K,ie,de,we,2)):Re===2&&p(Q,ne,K,ie,de,we):o(L(Q),ne,K,ie,de,we,1);break}}}}function e(Q){var ne=Q.prev,K=Q,ie=Q.next;if(x(ne,K,ie)>=0)return!1;for(var de=ne.x,we=K.x,Re=ie.x,_e=ne.y,Ue=K.y,rt=ie.y,Fe=de<we?de<Re?de:Re:we<Re?we:Re,Se=_e<Ue?_e<rt?_e:rt:Ue<rt?Ue:rt,ye=de>we?de>Re?de:Re:we>Re?we:Re,Oe=_e>Ue?_e>rt?_e:rt:Ue>rt?Ue:rt,ue=ie.next;ue!==ne;){if(ue.x>=Fe&&ue.x<=ye&&ue.y>=Se&&ue.y<=Oe&&b(de,_e,we,Ue,Re,rt,ue.x,ue.y)&&x(ue.prev,ue,ue.next)>=0)return!1;ue=ue.next}return!0}function g(Q,ne,K,ie){var de=Q.prev,we=Q,Re=Q.next;if(x(de,we,Re)>=0)return!1;for(var _e=de.x,Ue=we.x,rt=Re.x,Fe=de.y,Se=we.y,ye=Re.y,Oe=_e<Ue?_e<rt?_e:rt:Ue<rt?Ue:rt,ue=Fe<Se?Fe<ye?Fe:ye:Se<ye?Se:ye,xe=_e>Ue?_e>rt?_e:rt:Ue>rt?Ue:rt,Ae=Fe>Se?Fe>ye?Fe:ye:Se>ye?Se:ye,pe=u(Oe,ue,ne,K,ie),be=u(xe,Ae,ne,K,ie),le=Q.prevZ,z=Q.nextZ;le&&le.z>=pe&&z&&z.z<=be;){if(le.x>=Oe&&le.x<=xe&&le.y>=ue&&le.y<=Ae&&le!==de&&le!==Re&&b(_e,Fe,Ue,Se,rt,ye,le.x,le.y)&&x(le.prev,le,le.next)>=0||(le=le.prevZ,z.x>=Oe&&z.x<=xe&&z.y>=ue&&z.y<=Ae&&z!==de&&z!==Re&&b(_e,Fe,Ue,Se,rt,ye,z.x,z.y)&&x(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;le&&le.z>=pe;){if(le.x>=Oe&&le.x<=xe&&le.y>=ue&&le.y<=Ae&&le!==de&&le!==Re&&b(_e,Fe,Ue,Se,rt,ye,le.x,le.y)&&x(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;z&&z.z<=be;){if(z.x>=Oe&&z.x<=xe&&z.y>=ue&&z.y<=Ae&&z!==de&&z!==Re&&b(_e,Fe,Ue,Se,rt,ye,z.x,z.y)&&x(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function v(Q,ne,K){var ie=Q;do{var de=ie.prev,we=ie.next.next;!M(de,we)&&P(de,ie,ie.next,we)&&S(de,we)&&S(we,de)&&(ne.push(de.i/K|0),ne.push(ie.i/K|0),ne.push(we.i/K|0),W(ie),W(ie.next),ie=Q=we),ie=ie.next}while(ie!==Q);return L(ie)}function p(Q,ne,K,ie,de,we){var Re=Q;do{for(var _e=Re.next.next;_e!==Re.prev;){if(Re.i!==_e.i&&_(Re,_e)){var Ue=j(Re,_e);Re=L(Re,Re.next),Ue=L(Ue,Ue.next),o(Re,ne,K,ie,de,we,0),o(Ue,ne,K,ie,de,we,0);return}_e=_e.next}Re=Re.next}while(Re!==Q)}function c(Q,ne,K,ie){var de=[],we,Re,_e,Ue,rt;for(we=0,Re=ne.length;we<Re;we++)_e=ne[we]*ie,Ue=we<Re-1?ne[we+1]*ie:Q.length,rt=B(Q,_e,Ue,ie,!1),rt===rt.next&&(rt.steiner=!0),de.push(d(rt));for(de.sort(h),we=0;we<de.length;we++)K=i(de[we],K);return K}function h(Q,ne){return Q.x-ne.x}function i(Q,ne){var K=r(Q,ne);if(!K)return ne;var ie=j(K,Q);return L(ie,ie.next),L(K,K.next)}function r(Q,ne){var K=ne,ie=Q.x,de=Q.y,we=-Infinity,Re;do{if(de<=K.y&&de>=K.next.y&&K.next.y!==K.y){var _e=K.x+(de-K.y)*(K.next.x-K.x)/(K.next.y-K.y);if(_e<=ie&&_e>we&&(we=_e,Re=K.x<K.next.x?K:K.next,_e===ie))return Re}K=K.next}while(K!==ne);if(!Re)return null;var Ue=Re,rt=Re.x,Fe=Re.y,Se=Infinity,ye;K=Re;do ie>=K.x&&K.x>=rt&&ie!==K.x&&b(de<Fe?ie:we,de,rt,Fe,de<Fe?we:ie,de,K.x,K.y)&&(ye=Math.abs(de-K.y)/(ie-K.x),S(K,Q)&&(ye<Se||ye===Se&&(K.x>Re.x||K.x===Re.x&&n(Re,K)))&&(Re=K,Se=ye)),K=K.next;while(K!==Ue);return Re}function n(Q,ne){return x(Q.prev,Q,ne.prev)<0&&x(ne.next,Q,Q.next)<0}function s(Q,ne,K,ie){var de=Q;do de.z===0&&(de.z=u(de.x,de.y,ne,K,ie)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==Q);de.prevZ.nextZ=null,de.prevZ=null,f(de)}function f(Q){var ne,K,ie,de,we,Re,_e,Ue,rt=1;do{for(K=Q,Q=null,we=null,Re=0;K;){for(Re++,ie=K,_e=0,ne=0;ne<rt&&(_e++,ie=ie.nextZ,!!ie);ne++);for(Ue=rt;_e>0||Ue>0&&ie;)_e!==0&&(Ue===0||!ie||K.z<=ie.z)?(de=K,K=K.nextZ,_e--):(de=ie,ie=ie.nextZ,Ue--),we?we.nextZ=de:Q=de,de.prevZ=we,we=de;K=ie}we.nextZ=null,rt*=2}while(Re>1);return Q}function u(Q,ne,K,ie,de){return Q=(Q-K)*de|0,ne=(ne-ie)*de|0,Q=(Q|Q<<8)&16711935,Q=(Q|Q<<4)&252645135,Q=(Q|Q<<2)&858993459,Q=(Q|Q<<1)&1431655765,ne=(ne|ne<<8)&16711935,ne=(ne|ne<<4)&252645135,ne=(ne|ne<<2)&858993459,ne=(ne|ne<<1)&1431655765,Q|ne<<1}function d(Q){var ne=Q,K=Q;do(ne.x<K.x||ne.x===K.x&&ne.y<K.y)&&(K=ne),ne=ne.next;while(ne!==Q);return K}function b(Q,ne,K,ie,de,we,Re,_e){return(de-Re)*(ne-_e)>=(Q-Re)*(we-_e)&&(Q-Re)*(ie-_e)>=(K-Re)*(ne-_e)&&(K-Re)*(we-_e)>=(de-Re)*(ie-_e)}function _(Q,ne){return Q.next.i!==ne.i&&Q.prev.i!==ne.i&&!w(Q,ne)&&(S(Q,ne)&&S(ne,Q)&&I(Q,ne)&&(x(Q.prev,Q,ne.prev)||x(Q,ne.prev,ne))||M(Q,ne)&&x(Q.prev,Q,Q.next)>0&&x(ne.prev,ne,ne.next)>0)}function x(Q,ne,K){return(ne.y-Q.y)*(K.x-ne.x)-(ne.x-Q.x)*(K.y-ne.y)}function M(Q,ne){return Q.x===ne.x&&Q.y===ne.y}function P(Q,ne,K,ie){var de=O(x(Q,ne,K)),we=O(x(Q,ne,ie)),Re=O(x(K,ie,Q)),_e=O(x(K,ie,ne));return!!(de!==we&&Re!==_e||de===0&&C(Q,K,ne)||we===0&&C(Q,ie,ne)||Re===0&&C(K,Q,ie)||_e===0&&C(K,ne,ie))}function C(Q,ne,K){return ne.x<=Math.max(Q.x,K.x)&&ne.x>=Math.min(Q.x,K.x)&&ne.y<=Math.max(Q.y,K.y)&&ne.y>=Math.min(Q.y,K.y)}function O(Q){return Q>0?1:Q<0?-1:0}function w(Q,ne){var K=Q;do{if(K.i!==Q.i&&K.next.i!==Q.i&&K.i!==ne.i&&K.next.i!==ne.i&&P(K,K.next,Q,ne))return!0;K=K.next}while(K!==Q);return!1}function S(Q,ne){return x(Q.prev,Q,Q.next)<0?x(Q,ne,Q.next)>=0&&x(Q,Q.prev,ne)>=0:x(Q,ne,Q.prev)<0||x(Q,Q.next,ne)<0}function I(Q,ne){var K=Q,ie=!1,de=(Q.x+ne.x)/2,we=(Q.y+ne.y)/2;do K.y>we!=K.next.y>we&&K.next.y!==K.y&&de<(K.next.x-K.x)*(we-K.y)/(K.next.y-K.y)+K.x&&(ie=!ie),K=K.next;while(K!==Q);return ie}function j(Q,ne){var K=new H(Q.i,Q.x,Q.y),ie=new H(ne.i,ne.x,ne.y),de=Q.next,we=ne.prev;return Q.next=ne,ne.prev=Q,K.next=de,de.prev=K,ie.next=K,K.prev=ie,we.next=ie,ie.prev=we,ie}function N(Q,ne,K,ie){var de=new H(Q,ne,K);return ie?(de.next=ie.next,de.prev=ie,ie.next.prev=de,ie.next=de):(de.prev=de,de.next=de),de}function W(Q){Q.next.prev=Q.prev,Q.prev.next=Q.next,Q.prevZ&&(Q.prevZ.nextZ=Q.nextZ),Q.nextZ&&(Q.nextZ.prevZ=Q.prevZ)}function H(Q,ne,K){this.i=Q,this.x=ne,this.y=K,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}he.deviation=function(Q,ne,K,ie){var de=ne&&ne.length,we=de?ne[0]*K:Q.length,Re=Math.abs(J(Q,0,we,K));if(de)for(var _e=0,Ue=ne.length;_e<Ue;_e++){var rt=ne[_e]*K,Fe=_e<Ue-1?ne[_e+1]*K:Q.length;Re-=Math.abs(J(Q,rt,Fe,K))}var Se=0;for(_e=0;_e<ie.length;_e+=3){var ye=ie[_e]*K,Oe=ie[_e+1]*K,ue=ie[_e+2]*K;Se+=Math.abs((Q[ye]-Q[ue])*(Q[Oe+1]-Q[ye+1])-(Q[ye]-Q[Oe])*(Q[ue+1]-Q[ye+1]))}return Re===0&&Se===0?0:Math.abs((Se-Re)/Re)};function J(Q,ne,K,ie){for(var de=0,we=ne,Re=K-ie;we<K;we+=ie)de+=(Q[Re]-Q[we])*(Q[we+1]+Q[Re+1]),Re=we;return de}he.flatten=function(Q){for(var ne=Q[0][0].length,K={vertices:[],holes:[],dimensions:ne},ie=0,de=0;de<Q.length;de++){for(var we=0;we<Q[de].length;we++)for(var Re=0;Re<ne;Re++)K.vertices.push(Q[de][we][Re]);de>0&&(ie+=Q[de-1].length,K.holes.push(ie))}return K}},"W+U1":function(br,Ot,Ee){"use strict";br.exports=function(he){var B=he.stateHandler.getState;function L(v){var p=B(v);return p&&!!p.isDetectable}function o(v){B(v).isDetectable=!0}function e(v){return!!B(v).busy}function g(v,p){B(v).busy=!!p}return{isDetectable:L,markAsDetectable:o,isBusy:e,markBusy:g}}},"W6/K":function(br,Ot,Ee){var he=Ee("eUgh"),B=Ee("R/W3"),L=Ee("2GsC"),o=Ee("sEf8"),e=Ee("Q1l4"),g=Array.prototype,v=g.splice;function p(c,h,i,r){var n=r?L:B,s=-1,f=h.length,u=c;for(c===h&&(h=e(h)),i&&(u=he(c,o(i)));++s<f;)for(var d=0,b=h[s],_=i?i(b):b;(d=n(u,_,d,r))>-1;)u!==c&&v.call(u,d,1),v.call(c,d,1);return c}br.exports=p},WwFo:function(br,Ot,Ee){var he=Ee("juv8"),B=Ee("7GkX");function L(o,e){return o&&he(e,B(e),o)}br.exports=L},XYm9:function(br,Ot,Ee){var he=Ee("+K+b");function B(L,o){var e=o?he(L.buffer):L.buffer;return new L.constructor(e,L.byteOffset,L.byteLength)}br.exports=B},"Xt/L":function(br,Ot){function Ee(he,B,L){for(var o=-1,e=he==null?0:he.length;++o<e;)if(L(B,he[o]))return!0;return!1}br.exports=Ee},Y8BV:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return he});function he(B,L){var o=L.callback;return o&&(B.dataArray=B.dataArray.filter(o)),B}},YO3V:function(br,Ot,Ee){var he=Ee("NykK"),B=Ee("LcsW"),L=Ee("ExA7"),o="[object Object]",e=Function.prototype,g=Object.prototype,v=e.toString,p=g.hasOwnProperty,c=v.call(Object);function h(i){if(!L(i)||he(i)!=o)return!1;var r=B(i);if(r===null)return!0;var n=p.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&v.call(n)==c}br.exports=h},Z1HP:function(br,Ot,Ee){var he=Ee("ycre"),B=Ee("quyA"),L=Ee("q4HE");function o(e){return B(e)?L(e):he(e)}br.exports=o},ZCgT:function(br,Ot,Ee){var he=Ee("tLB3"),B=1/0,L=17976931348623157e292;function o(e){if(!e)return e===0?e:0;if(e=he(e),e===B||e===-B){var g=e<0?-1:1;return g*L}return e===e?e:0}br.exports=o},ZWtO:function(br,Ot,Ee){var he=Ee("4uTw"),B=Ee("9Nap");function L(o,e){e=he(e,o);for(var g=0,v=e.length;o!=null&&g<v;)o=o[B(e[g++])];return g&&g==v?o:void 0}br.exports=L},ZaHm:function(br,Ot,Ee){"use strict";Ee.r(Ot),Ee.d(Ot,"create",function(){return B}),Ee.d(Ot,"clone",function(){return L}),Ee.d(Ot,"copy",function(){return o}),Ee.d(Ot,"fromValues",function(){return e}),Ee.d(Ot,"set",function(){return g}),Ee.d(Ot,"identity",function(){return v}),Ee.d(Ot,"transpose",function(){return p}),Ee.d(Ot,"invert",function(){return c}),Ee.d(Ot,"adjoint",function(){return h}),Ee.d(Ot,"determinant",function(){return i}),Ee.d(Ot,"multiply",function(){return r}),Ee.d(Ot,"translate",function(){return n}),Ee.d(Ot,"scale",function(){return s}),Ee.d(Ot,"rotate",function(){return f}),Ee.d(Ot,"rotateX",function(){return u}),Ee.d(Ot,"rotateY",function(){return d}),Ee.d(Ot,"rotateZ",function(){return b}),Ee.d(Ot,"fromTranslation",function(){return _}),Ee.d(Ot,"fromScaling",function(){return x}),Ee.d(Ot,"fromRotation",function(){return M}),Ee.d(Ot,"fromXRotation",function(){return P}),Ee.d(Ot,"fromYRotation",function(){return C}),Ee.d(Ot,"fromZRotation",function(){return O}),Ee.d(Ot,"fromRotationTranslation",function(){return w}),Ee.d(Ot,"fromQuat2",function(){return S}),Ee.d(Ot,"getTranslation",function(){return I}),Ee.d(Ot,"getScaling",function(){return j}),Ee.d(Ot,"getRotation",function(){return N}),Ee.d(Ot,"fromRotationTranslationScale",function(){return W}),Ee.d(Ot,"fromRotationTranslationScaleOrigin",function(){return H}),Ee.d(Ot,"fromQuat",function(){return J}),Ee.d(Ot,"frustum",function(){return Q}),Ee.d(Ot,"perspectiveNO",function(){return ne}),Ee.d(Ot,"perspective",function(){return K}),Ee.d(Ot,"perspectiveZO",function(){return ie}),Ee.d(Ot,"perspectiveFromFieldOfView",function(){return de}),Ee.d(Ot,"orthoNO",function(){return we}),Ee.d(Ot,"ortho",function(){return Re}),Ee.d(Ot,"orthoZO",function(){return _e}),Ee.d(Ot,"lookAt",function(){return Ue}),Ee.d(Ot,"targetTo",function(){return rt}),Ee.d(Ot,"str",function(){return Fe}),Ee.d(Ot,"frob",function(){return Se}),Ee.d(Ot,"add",function(){return ye}),Ee.d(Ot,"subtract",function(){return Oe}),Ee.d(Ot,"multiplyScalar",function(){return ue}),Ee.d(Ot,"multiplyScalarAndAdd",function(){return xe}),Ee.d(Ot,"exactEquals",function(){return Ae}),Ee.d(Ot,"equals",function(){return pe}),Ee.d(Ot,"mul",function(){return be}),Ee.d(Ot,"sub",function(){return le});var he=Ee("yU0y");function B(){var z=new he.a(16);return he.a!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function L(z){var ae=new he.a(16);return ae[0]=z[0],ae[1]=z[1],ae[2]=z[2],ae[3]=z[3],ae[4]=z[4],ae[5]=z[5],ae[6]=z[6],ae[7]=z[7],ae[8]=z[8],ae[9]=z[9],ae[10]=z[10],ae[11]=z[11],ae[12]=z[12],ae[13]=z[13],ae[14]=z[14],ae[15]=z[15],ae}function o(z,ae){return z[0]=ae[0],z[1]=ae[1],z[2]=ae[2],z[3]=ae[3],z[4]=ae[4],z[5]=ae[5],z[6]=ae[6],z[7]=ae[7],z[8]=ae[8],z[9]=ae[9],z[10]=ae[10],z[11]=ae[11],z[12]=ae[12],z[13]=ae[13],z[14]=ae[14],z[15]=ae[15],z}function e(z,ae,V,re,te,q,ve,Me,De,ze,We,He,$e,It,Yt,rr){var ir=new he.a(16);return ir[0]=z,ir[1]=ae,ir[2]=V,ir[3]=re,ir[4]=te,ir[5]=q,ir[6]=ve,ir[7]=Me,ir[8]=De,ir[9]=ze,ir[10]=We,ir[11]=He,ir[12]=$e,ir[13]=It,ir[14]=Yt,ir[15]=rr,ir}function g(z,ae,V,re,te,q,ve,Me,De,ze,We,He,$e,It,Yt,rr,ir){return z[0]=ae,z[1]=V,z[2]=re,z[3]=te,z[4]=q,z[5]=ve,z[6]=Me,z[7]=De,z[8]=ze,z[9]=We,z[10]=He,z[11]=$e,z[12]=It,z[13]=Yt,z[14]=rr,z[15]=ir,z}function v(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function p(z,ae){if(z===ae){var V=ae[1],re=ae[2],te=ae[3],q=ae[6],ve=ae[7],Me=ae[11];z[1]=ae[4],z[2]=ae[8],z[3]=ae[12],z[4]=V,z[6]=ae[9],z[7]=ae[13],z[8]=re,z[9]=q,z[11]=ae[14],z[12]=te,z[13]=ve,z[14]=Me}else z[0]=ae[0],z[1]=ae[4],z[2]=ae[8],z[3]=ae[12],z[4]=ae[1],z[5]=ae[5],z[6]=ae[9],z[7]=ae[13],z[8]=ae[2],z[9]=ae[6],z[10]=ae[10],z[11]=ae[14],z[12]=ae[3],z[13]=ae[7],z[14]=ae[11],z[15]=ae[15];return z}function c(z,ae){var V=ae[0],re=ae[1],te=ae[2],q=ae[3],ve=ae[4],Me=ae[5],De=ae[6],ze=ae[7],We=ae[8],He=ae[9],$e=ae[10],It=ae[11],Yt=ae[12],rr=ae[13],ir=ae[14],Br=ae[15],tr=V*Me-re*ve,ft=V*De-te*ve,st=V*ze-q*ve,Tt=re*De-te*Me,Qe=re*ze-q*Me,it=te*ze-q*De,zt=We*rr-He*Yt,Qt=We*ir-$e*Yt,Ar=We*Br-It*Yt,zr=He*ir-$e*rr,ct=He*Br-It*rr,ot=$e*Br-It*ir,xt=tr*ot-ft*ct+st*zr+Tt*Ar-Qe*Qt+it*zt;return xt?(xt=1/xt,z[0]=(Me*ot-De*ct+ze*zr)*xt,z[1]=(te*ct-re*ot-q*zr)*xt,z[2]=(rr*it-ir*Qe+Br*Tt)*xt,z[3]=($e*Qe-He*it-It*Tt)*xt,z[4]=(De*Ar-ve*ot-ze*Qt)*xt,z[5]=(V*ot-te*Ar+q*Qt)*xt,z[6]=(ir*st-Yt*it-Br*ft)*xt,z[7]=(We*it-$e*st+It*ft)*xt,z[8]=(ve*ct-Me*Ar+ze*zt)*xt,z[9]=(re*Ar-V*ct-q*zt)*xt,z[10]=(Yt*Qe-rr*st+Br*tr)*xt,z[11]=(He*st-We*Qe-It*tr)*xt,z[12]=(Me*Qt-ve*zr-De*zt)*xt,z[13]=(V*zr-re*Qt+te*zt)*xt,z[14]=(rr*ft-Yt*Tt-ir*tr)*xt,z[15]=(We*Tt-He*ft+$e*tr)*xt,z):null}function h(z,ae){var V=ae[0],re=ae[1],te=ae[2],q=ae[3],ve=ae[4],Me=ae[5],De=ae[6],ze=ae[7],We=ae[8],He=ae[9],$e=ae[10],It=ae[11],Yt=ae[12],rr=ae[13],ir=ae[14],Br=ae[15];return z[0]=Me*($e*Br-It*ir)-He*(De*Br-ze*ir)+rr*(De*It-ze*$e),z[1]=-(re*($e*Br-It*ir)-He*(te*Br-q*ir)+rr*(te*It-q*$e)),z[2]=re*(De*Br-ze*ir)-Me*(te*Br-q*ir)+rr*(te*ze-q*De),z[3]=-(re*(De*It-ze*$e)-Me*(te*It-q*$e)+He*(te*ze-q*De)),z[4]=-(ve*($e*Br-It*ir)-We*(De*Br-ze*ir)+Yt*(De*It-ze*$e)),z[5]=V*($e*Br-It*ir)-We*(te*Br-q*ir)+Yt*(te*It-q*$e),z[6]=-(V*(De*Br-ze*ir)-ve*(te*Br-q*ir)+Yt*(te*ze-q*De)),z[7]=V*(De*It-ze*$e)-ve*(te*It-q*$e)+We*(te*ze-q*De),z[8]=ve*(He*Br-It*rr)-We*(Me*Br-ze*rr)+Yt*(Me*It-ze*He),z[9]=-(V*(He*Br-It*rr)-We*(re*Br-q*rr)+Yt*(re*It-q*He)),z[10]=V*(Me*Br-ze*rr)-ve*(re*Br-q*rr)+Yt*(re*ze-q*Me),z[11]=-(V*(Me*It-ze*He)-ve*(re*It-q*He)+We*(re*ze-q*Me)),z[12]=-(ve*(He*ir-$e*rr)-We*(Me*ir-De*rr)+Yt*(Me*$e-De*He)),z[13]=V*(He*ir-$e*rr)-We*(re*ir-te*rr)+Yt*(re*$e-te*He),z[14]=-(V*(Me*ir-De*rr)-ve*(re*ir-te*rr)+Yt*(re*De-te*Me)),z[15]=V*(Me*$e-De*He)-ve*(re*$e-te*He)+We*(re*De-te*Me),z}function i(z){var ae=z[0],V=z[1],re=z[2],te=z[3],q=z[4],ve=z[5],Me=z[6],De=z[7],ze=z[8],We=z[9],He=z[10],$e=z[11],It=z[12],Yt=z[13],rr=z[14],ir=z[15],Br=ae*ve-V*q,tr=ae*Me-re*q,ft=ae*De-te*q,st=V*Me-re*ve,Tt=V*De-te*ve,Qe=re*De-te*Me,it=ze*Yt-We*It,zt=ze*rr-He*It,Qt=ze*ir-$e*It,Ar=We*rr-He*Yt,zr=We*ir-$e*Yt,ct=He*ir-$e*rr;return Br*ct-tr*zr+ft*Ar+st*Qt-Tt*zt+Qe*it}function r(z,ae,V){var re=ae[0],te=ae[1],q=ae[2],ve=ae[3],Me=ae[4],De=ae[5],ze=ae[6],We=ae[7],He=ae[8],$e=ae[9],It=ae[10],Yt=ae[11],rr=ae[12],ir=ae[13],Br=ae[14],tr=ae[15],ft=V[0],st=V[1],Tt=V[2],Qe=V[3];return z[0]=ft*re+st*Me+Tt*He+Qe*rr,z[1]=ft*te+st*De+Tt*$e+Qe*ir,z[2]=ft*q+st*ze+Tt*It+Qe*Br,z[3]=ft*ve+st*We+Tt*Yt+Qe*tr,ft=V[4],st=V[5],Tt=V[6],Qe=V[7],z[4]=ft*re+st*Me+Tt*He+Qe*rr,z[5]=ft*te+st*De+Tt*$e+Qe*ir,z[6]=ft*q+st*ze+Tt*It+Qe*Br,z[7]=ft*ve+st*We+Tt*Yt+Qe*tr,ft=V[8],st=V[9],Tt=V[10],Qe=V[11],z[8]=ft*re+st*Me+Tt*He+Qe*rr,z[9]=ft*te+st*De+Tt*$e+Qe*ir,z[10]=ft*q+st*ze+Tt*It+Qe*Br,z[11]=ft*ve+st*We+Tt*Yt+Qe*tr,ft=V[12],st=V[13],Tt=V[14],Qe=V[15],z[12]=ft*re+st*Me+Tt*He+Qe*rr,z[13]=ft*te+st*De+Tt*$e+Qe*ir,z[14]=ft*q+st*ze+Tt*It+Qe*Br,z[15]=ft*ve+st*We+Tt*Yt+Qe*tr,z}function n(z,ae,V){var re=V[0],te=V[1],q=V[2],ve,Me,De,ze,We,He,$e,It,Yt,rr,ir,Br;return ae===z?(z[12]=ae[0]*re+ae[4]*te+ae[8]*q+ae[12],z[13]=ae[1]*re+ae[5]*te+ae[9]*q+ae[13],z[14]=ae[2]*re+ae[6]*te+ae[10]*q+ae[14],z[15]=ae[3]*re+ae[7]*te+ae[11]*q+ae[15]):(ve=ae[0],Me=ae[1],De=ae[2],ze=ae[3],We=ae[4],He=ae[5],$e=ae[6],It=ae[7],Yt=ae[8],rr=ae[9],ir=ae[10],Br=ae[11],z[0]=ve,z[1]=Me,z[2]=De,z[3]=ze,z[4]=We,z[5]=He,z[6]=$e,z[7]=It,z[8]=Yt,z[9]=rr,z[10]=ir,z[11]=Br,z[12]=ve*re+We*te+Yt*q+ae[12],z[13]=Me*re+He*te+rr*q+ae[13],z[14]=De*re+$e*te+ir*q+ae[14],z[15]=ze*re+It*te+Br*q+ae[15]),z}function s(z,ae,V){var re=V[0],te=V[1],q=V[2];return z[0]=ae[0]*re,z[1]=ae[1]*re,z[2]=ae[2]*re,z[3]=ae[3]*re,z[4]=ae[4]*te,z[5]=ae[5]*te,z[6]=ae[6]*te,z[7]=ae[7]*te,z[8]=ae[8]*q,z[9]=ae[9]*q,z[10]=ae[10]*q,z[11]=ae[11]*q,z[12]=ae[12],z[13]=ae[13],z[14]=ae[14],z[15]=ae[15],z}function f(z,ae,V,re){var te=re[0],q=re[1],ve=re[2],Me=Math.hypot(te,q,ve),De,ze,We,He,$e,It,Yt,rr,ir,Br,tr,ft,st,Tt,Qe,it,zt,Qt,Ar,zr,ct,ot,xt,Bt;return Me<he.b?null:(Me=1/Me,te*=Me,q*=Me,ve*=Me,De=Math.sin(V),ze=Math.cos(V),We=1-ze,He=ae[0],$e=ae[1],It=ae[2],Yt=ae[3],rr=ae[4],ir=ae[5],Br=ae[6],tr=ae[7],ft=ae[8],st=ae[9],Tt=ae[10],Qe=ae[11],it=te*te*We+ze,zt=q*te*We+ve*De,Qt=ve*te*We-q*De,Ar=te*q*We-ve*De,zr=q*q*We+ze,ct=ve*q*We+te*De,ot=te*ve*We+q*De,xt=q*ve*We-te*De,Bt=ve*ve*We+ze,z[0]=He*it+rr*zt+ft*Qt,z[1]=$e*it+ir*zt+st*Qt,z[2]=It*it+Br*zt+Tt*Qt,z[3]=Yt*it+tr*zt+Qe*Qt,z[4]=He*Ar+rr*zr+ft*ct,z[5]=$e*Ar+ir*zr+st*ct,z[6]=It*Ar+Br*zr+Tt*ct,z[7]=Yt*Ar+tr*zr+Qe*ct,z[8]=He*ot+rr*xt+ft*Bt,z[9]=$e*ot+ir*xt+st*Bt,z[10]=It*ot+Br*xt+Tt*Bt,z[11]=Yt*ot+tr*xt+Qe*Bt,ae!==z&&(z[12]=ae[12],z[13]=ae[13],z[14]=ae[14],z[15]=ae[15]),z)}function u(z,ae,V){var re=Math.sin(V),te=Math.cos(V),q=ae[4],ve=ae[5],Me=ae[6],De=ae[7],ze=ae[8],We=ae[9],He=ae[10],$e=ae[11];return ae!==z&&(z[0]=ae[0],z[1]=ae[1],z[2]=ae[2],z[3]=ae[3],z[12]=ae[12],z[13]=ae[13],z[14]=ae[14],z[15]=ae[15]),z[4]=q*te+ze*re,z[5]=ve*te+We*re,z[6]=Me*te+He*re,z[7]=De*te+$e*re,z[8]=ze*te-q*re,z[9]=We*te-ve*re,z[10]=He*te-Me*re,z[11]=$e*te-De*re,z}function d(z,ae,V){var re=Math.sin(V),te=Math.cos(V),q=ae[0],ve=ae[1],Me=ae[2],De=ae[3],ze=ae[8],We=ae[9],He=ae[10],$e=ae[11];return ae!==z&&(z[4]=ae[4],z[5]=ae[5],z[6]=ae[6],z[7]=ae[7],z[12]=ae[12],z[13]=ae[13],z[14]=ae[14],z[15]=ae[15]),z[0]=q*te-ze*re,z[1]=ve*te-We*re,z[2]=Me*te-He*re,z[3]=De*te-$e*re,z[8]=q*re+ze*te,z[9]=ve*re+We*te,z[10]=Me*re+He*te,z[11]=De*re+$e*te,z}function b(z,ae,V){var re=Math.sin(V),te=Math.cos(V),q=ae[0],ve=ae[1],Me=ae[2],De=ae[3],ze=ae[4],We=ae[5],He=ae[6],$e=ae[7];return ae!==z&&(z[8]=ae[8],z[9]=ae[9],z[10]=ae[10],z[11]=ae[11],z[12]=ae[12],z[13]=ae[13],z[14]=ae[14],z[15]=ae[15]),z[0]=q*te+ze*re,z[1]=ve*te+We*re,z[2]=Me*te+He*re,z[3]=De*te+$e*re,z[4]=ze*te-q*re,z[5]=We*te-ve*re,z[6]=He*te-Me*re,z[7]=$e*te-De*re,z}function _(z,ae){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=ae[0],z[13]=ae[1],z[14]=ae[2],z[15]=1,z}function x(z,ae){return z[0]=ae[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=ae[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=ae[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function M(z,ae,V){var re=V[0],te=V[1],q=V[2],ve=Math.hypot(re,te,q),Me,De,ze;return ve<he.b?null:(ve=1/ve,re*=ve,te*=ve,q*=ve,Me=Math.sin(ae),De=Math.cos(ae),ze=1-De,z[0]=re*re*ze+De,z[1]=te*re*ze+q*Me,z[2]=q*re*ze-te*Me,z[3]=0,z[4]=re*te*ze-q*Me,z[5]=te*te*ze+De,z[6]=q*te*ze+re*Me,z[7]=0,z[8]=re*q*ze+te*Me,z[9]=te*q*ze-re*Me,z[10]=q*q*ze+De,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function P(z,ae){var V=Math.sin(ae),re=Math.cos(ae);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=re,z[6]=V,z[7]=0,z[8]=0,z[9]=-V,z[10]=re,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function C(z,ae){var V=Math.sin(ae),re=Math.cos(ae);return z[0]=re,z[1]=0,z[2]=-V,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=V,z[9]=0,z[10]=re,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function O(z,ae){var V=Math.sin(ae),re=Math.cos(ae);return z[0]=re,z[1]=V,z[2]=0,z[3]=0,z[4]=-V,z[5]=re,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function w(z,ae,V){var re=ae[0],te=ae[1],q=ae[2],ve=ae[3],Me=re+re,De=te+te,ze=q+q,We=re*Me,He=re*De,$e=re*ze,It=te*De,Yt=te*ze,rr=q*ze,ir=ve*Me,Br=ve*De,tr=ve*ze;return z[0]=1-(It+rr),z[1]=He+tr,z[2]=$e-Br,z[3]=0,z[4]=He-tr,z[5]=1-(We+rr),z[6]=Yt+ir,z[7]=0,z[8]=$e+Br,z[9]=Yt-ir,z[10]=1-(We+It),z[11]=0,z[12]=V[0],z[13]=V[1],z[14]=V[2],z[15]=1,z}function S(z,ae){var V=new he.a(3),re=-ae[0],te=-ae[1],q=-ae[2],ve=ae[3],Me=ae[4],De=ae[5],ze=ae[6],We=ae[7],He=re*re+te*te+q*q+ve*ve;return He>0?(V[0]=(Me*ve+We*re+De*q-ze*te)*2/He,V[1]=(De*ve+We*te+ze*re-Me*q)*2/He,V[2]=(ze*ve+We*q+Me*te-De*re)*2/He):(V[0]=(Me*ve+We*re+De*q-ze*te)*2,V[1]=(De*ve+We*te+ze*re-Me*q)*2,V[2]=(ze*ve+We*q+Me*te-De*re)*2),w(z,ae,V),z}function I(z,ae){return z[0]=ae[12],z[1]=ae[13],z[2]=ae[14],z}function j(z,ae){var V=ae[0],re=ae[1],te=ae[2],q=ae[4],ve=ae[5],Me=ae[6],De=ae[8],ze=ae[9],We=ae[10];return z[0]=Math.hypot(V,re,te),z[1]=Math.hypot(q,ve,Me),z[2]=Math.hypot(De,ze,We),z}function N(z,ae){var V=new he.a(3);j(V,ae);var re=1/V[0],te=1/V[1],q=1/V[2],ve=ae[0]*re,Me=ae[1]*te,De=ae[2]*q,ze=ae[4]*re,We=ae[5]*te,He=ae[6]*q,$e=ae[8]*re,It=ae[9]*te,Yt=ae[10]*q,rr=ve+We+Yt,ir=0;return rr>0?(ir=Math.sqrt(rr+1)*2,z[3]=.25*ir,z[0]=(He-It)/ir,z[1]=($e-De)/ir,z[2]=(Me-ze)/ir):ve>We&&ve>Yt?(ir=Math.sqrt(1+ve-We-Yt)*2,z[3]=(He-It)/ir,z[0]=.25*ir,z[1]=(Me+ze)/ir,z[2]=($e+De)/ir):We>Yt?(ir=Math.sqrt(1+We-ve-Yt)*2,z[3]=($e-De)/ir,z[0]=(Me+ze)/ir,z[1]=.25*ir,z[2]=(He+It)/ir):(ir=Math.sqrt(1+Yt-ve-We)*2,z[3]=(Me-ze)/ir,z[0]=($e+De)/ir,z[1]=(He+It)/ir,z[2]=.25*ir),z}function W(z,ae,V,re){var te=ae[0],q=ae[1],ve=ae[2],Me=ae[3],De=te+te,ze=q+q,We=ve+ve,He=te*De,$e=te*ze,It=te*We,Yt=q*ze,rr=q*We,ir=ve*We,Br=Me*De,tr=Me*ze,ft=Me*We,st=re[0],Tt=re[1],Qe=re[2];return z[0]=(1-(Yt+ir))*st,z[1]=($e+ft)*st,z[2]=(It-tr)*st,z[3]=0,z[4]=($e-ft)*Tt,z[5]=(1-(He+ir))*Tt,z[6]=(rr+Br)*Tt,z[7]=0,z[8]=(It+tr)*Qe,z[9]=(rr-Br)*Qe,z[10]=(1-(He+Yt))*Qe,z[11]=0,z[12]=V[0],z[13]=V[1],z[14]=V[2],z[15]=1,z}function H(z,ae,V,re,te){var q=ae[0],ve=ae[1],Me=ae[2],De=ae[3],ze=q+q,We=ve+ve,He=Me+Me,$e=q*ze,It=q*We,Yt=q*He,rr=ve*We,ir=ve*He,Br=Me*He,tr=De*ze,ft=De*We,st=De*He,Tt=re[0],Qe=re[1],it=re[2],zt=te[0],Qt=te[1],Ar=te[2],zr=(1-(rr+Br))*Tt,ct=(It+st)*Tt,ot=(Yt-ft)*Tt,xt=(It-st)*Qe,Bt=(1-($e+Br))*Qe,Ke=(ir+tr)*Qe,lt=(Yt+ft)*it,mt=(ir-tr)*it,qe=(1-($e+rr))*it;return z[0]=zr,z[1]=ct,z[2]=ot,z[3]=0,z[4]=xt,z[5]=Bt,z[6]=Ke,z[7]=0,z[8]=lt,z[9]=mt,z[10]=qe,z[11]=0,z[12]=V[0]+zt-(zr*zt+xt*Qt+lt*Ar),z[13]=V[1]+Qt-(ct*zt+Bt*Qt+mt*Ar),z[14]=V[2]+Ar-(ot*zt+Ke*Qt+qe*Ar),z[15]=1,z}function J(z,ae){var V=ae[0],re=ae[1],te=ae[2],q=ae[3],ve=V+V,Me=re+re,De=te+te,ze=V*ve,We=re*ve,He=re*Me,$e=te*ve,It=te*Me,Yt=te*De,rr=q*ve,ir=q*Me,Br=q*De;return z[0]=1-He-Yt,z[1]=We+Br,z[2]=$e-ir,z[3]=0,z[4]=We-Br,z[5]=1-ze-Yt,z[6]=It+rr,z[7]=0,z[8]=$e+ir,z[9]=It-rr,z[10]=1-ze-He,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function Q(z,ae,V,re,te,q,ve){var Me=1/(V-ae),De=1/(te-re),ze=1/(q-ve);return z[0]=q*2*Me,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q*2*De,z[6]=0,z[7]=0,z[8]=(V+ae)*Me,z[9]=(te+re)*De,z[10]=(ve+q)*ze,z[11]=-1,z[12]=0,z[13]=0,z[14]=ve*q*2*ze,z[15]=0,z}function ne(z,ae,V,re,te){var q=1/Math.tan(ae/2),ve;return z[0]=q/V,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,te!=null&&te!==Infinity?(ve=1/(re-te),z[10]=(te+re)*ve,z[14]=2*te*re*ve):(z[10]=-1,z[14]=-2*re),z}var K=ne;function ie(z,ae,V,re,te){var q=1/Math.tan(ae/2),ve;return z[0]=q/V,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,te!=null&&te!==Infinity?(ve=1/(re-te),z[10]=te*ve,z[14]=te*re*ve):(z[10]=-1,z[14]=-re),z}function de(z,ae,V,re){var te=Math.tan(ae.upDegrees*Math.PI/180),q=Math.tan(ae.downDegrees*Math.PI/180),ve=Math.tan(ae.leftDegrees*Math.PI/180),Me=Math.tan(ae.rightDegrees*Math.PI/180),De=2/(ve+Me),ze=2/(te+q);return z[0]=De,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=ze,z[6]=0,z[7]=0,z[8]=-((ve-Me)*De*.5),z[9]=(te-q)*ze*.5,z[10]=re/(V-re),z[11]=-1,z[12]=0,z[13]=0,z[14]=re*V/(V-re),z[15]=0,z}function we(z,ae,V,re,te,q,ve){var Me=1/(ae-V),De=1/(re-te),ze=1/(q-ve);return z[0]=-2*Me,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*De,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*ze,z[11]=0,z[12]=(ae+V)*Me,z[13]=(te+re)*De,z[14]=(ve+q)*ze,z[15]=1,z}var Re=we;function _e(z,ae,V,re,te,q,ve){var Me=1/(ae-V),De=1/(re-te),ze=1/(q-ve);return z[0]=-2*Me,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*De,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=ze,z[11]=0,z[12]=(ae+V)*Me,z[13]=(te+re)*De,z[14]=q*ze,z[15]=1,z}function Ue(z,ae,V,re){var te,q,ve,Me,De,ze,We,He,$e,It,Yt=ae[0],rr=ae[1],ir=ae[2],Br=re[0],tr=re[1],ft=re[2],st=V[0],Tt=V[1],Qe=V[2];return Math.abs(Yt-st)<he.b&&Math.abs(rr-Tt)<he.b&&Math.abs(ir-Qe)<he.b?v(z):(We=Yt-st,He=rr-Tt,$e=ir-Qe,It=1/Math.hypot(We,He,$e),We*=It,He*=It,$e*=It,te=tr*$e-ft*He,q=ft*We-Br*$e,ve=Br*He-tr*We,It=Math.hypot(te,q,ve),It?(It=1/It,te*=It,q*=It,ve*=It):(te=0,q=0,ve=0),Me=He*ve-$e*q,De=$e*te-We*ve,ze=We*q-He*te,It=Math.hypot(Me,De,ze),It?(It=1/It,Me*=It,De*=It,ze*=It):(Me=0,De=0,ze=0),z[0]=te,z[1]=Me,z[2]=We,z[3]=0,z[4]=q,z[5]=De,z[6]=He,z[7]=0,z[8]=ve,z[9]=ze,z[10]=$e,z[11]=0,z[12]=-(te*Yt+q*rr+ve*ir),z[13]=-(Me*Yt+De*rr+ze*ir),z[14]=-(We*Yt+He*rr+$e*ir),z[15]=1,z)}function rt(z,ae,V,re){var te=ae[0],q=ae[1],ve=ae[2],Me=re[0],De=re[1],ze=re[2],We=te-V[0],He=q-V[1],$e=ve-V[2],It=We*We+He*He+$e*$e;It>0&&(It=1/Math.sqrt(It),We*=It,He*=It,$e*=It);var Yt=De*$e-ze*He,rr=ze*We-Me*$e,ir=Me*He-De*We;return It=Yt*Yt+rr*rr+ir*ir,It>0&&(It=1/Math.sqrt(It),Yt*=It,rr*=It,ir*=It),z[0]=Yt,z[1]=rr,z[2]=ir,z[3]=0,z[4]=He*ir-$e*rr,z[5]=$e*Yt-We*ir,z[6]=We*rr-He*Yt,z[7]=0,z[8]=We,z[9]=He,z[10]=$e,z[11]=0,z[12]=te,z[13]=q,z[14]=ve,z[15]=1,z}function Fe(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function Se(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function ye(z,ae,V){return z[0]=ae[0]+V[0],z[1]=ae[1]+V[1],z[2]=ae[2]+V[2],z[3]=ae[3]+V[3],z[4]=ae[4]+V[4],z[5]=ae[5]+V[5],z[6]=ae[6]+V[6],z[7]=ae[7]+V[7],z[8]=ae[8]+V[8],z[9]=ae[9]+V[9],z[10]=ae[10]+V[10],z[11]=ae[11]+V[11],z[12]=ae[12]+V[12],z[13]=ae[13]+V[13],z[14]=ae[14]+V[14],z[15]=ae[15]+V[15],z}function Oe(z,ae,V){return z[0]=ae[0]-V[0],z[1]=ae[1]-V[1],z[2]=ae[2]-V[2],z[3]=ae[3]-V[3],z[4]=ae[4]-V[4],z[5]=ae[5]-V[5],z[6]=ae[6]-V[6],z[7]=ae[7]-V[7],z[8]=ae[8]-V[8],z[9]=ae[9]-V[9],z[10]=ae[10]-V[10],z[11]=ae[11]-V[11],z[12]=ae[12]-V[12],z[13]=ae[13]-V[13],z[14]=ae[14]-V[14],z[15]=ae[15]-V[15],z}function ue(z,ae,V){return z[0]=ae[0]*V,z[1]=ae[1]*V,z[2]=ae[2]*V,z[3]=ae[3]*V,z[4]=ae[4]*V,z[5]=ae[5]*V,z[6]=ae[6]*V,z[7]=ae[7]*V,z[8]=ae[8]*V,z[9]=ae[9]*V,z[10]=ae[10]*V,z[11]=ae[11]*V,z[12]=ae[12]*V,z[13]=ae[13]*V,z[14]=ae[14]*V,z[15]=ae[15]*V,z}function xe(z,ae,V,re){return z[0]=ae[0]+V[0]*re,z[1]=ae[1]+V[1]*re,z[2]=ae[2]+V[2]*re,z[3]=ae[3]+V[3]*re,z[4]=ae[4]+V[4]*re,z[5]=ae[5]+V[5]*re,z[6]=ae[6]+V[6]*re,z[7]=ae[7]+V[7]*re,z[8]=ae[8]+V[8]*re,z[9]=ae[9]+V[9]*re,z[10]=ae[10]+V[10]*re,z[11]=ae[11]+V[11]*re,z[12]=ae[12]+V[12]*re,z[13]=ae[13]+V[13]*re,z[14]=ae[14]+V[14]*re,z[15]=ae[15]+V[15]*re,z}function Ae(z,ae){return z[0]===ae[0]&&z[1]===ae[1]&&z[2]===ae[2]&&z[3]===ae[3]&&z[4]===ae[4]&&z[5]===ae[5]&&z[6]===ae[6]&&z[7]===ae[7]&&z[8]===ae[8]&&z[9]===ae[9]&&z[10]===ae[10]&&z[11]===ae[11]&&z[12]===ae[12]&&z[13]===ae[13]&&z[14]===ae[14]&&z[15]===ae[15]}function pe(z,ae){var V=z[0],re=z[1],te=z[2],q=z[3],ve=z[4],Me=z[5],De=z[6],ze=z[7],We=z[8],He=z[9],$e=z[10],It=z[11],Yt=z[12],rr=z[13],ir=z[14],Br=z[15],tr=ae[0],ft=ae[1],st=ae[2],Tt=ae[3],Qe=ae[4],it=ae[5],zt=ae[6],Qt=ae[7],Ar=ae[8],zr=ae[9],ct=ae[10],ot=ae[11],xt=ae[12],Bt=ae[13],Ke=ae[14],lt=ae[15];return Math.abs(V-tr)<=he.b*Math.max(1,Math.abs(V),Math.abs(tr))&&Math.abs(re-ft)<=he.b*Math.max(1,Math.abs(re),Math.abs(ft))&&Math.abs(te-st)<=he.b*Math.max(1,Math.abs(te),Math.abs(st))&&Math.abs(q-Tt)<=he.b*Math.max(1,Math.abs(q),Math.abs(Tt))&&Math.abs(ve-Qe)<=he.b*Math.max(1,Math.abs(ve),Math.abs(Qe))&&Math.abs(Me-it)<=he.b*Math.max(1,Math.abs(Me),Math.abs(it))&&Math.abs(De-zt)<=he.b*Math.max(1,Math.abs(De),Math.abs(zt))&&Math.abs(ze-Qt)<=he.b*Math.max(1,Math.abs(ze),Math.abs(Qt))&&Math.abs(We-Ar)<=he.b*Math.max(1,Math.abs(We),Math.abs(Ar))&&Math.abs(He-zr)<=he.b*Math.max(1,Math.abs(He),Math.abs(zr))&&Math.abs($e-ct)<=he.b*Math.max(1,Math.abs($e),Math.abs(ct))&&Math.abs(It-ot)<=he.b*Math.max(1,Math.abs(It),Math.abs(ot))&&Math.abs(Yt-xt)<=he.b*Math.max(1,Math.abs(Yt),Math.abs(xt))&&Math.abs(rr-Bt)<=he.b*Math.max(1,Math.abs(rr),Math.abs(Bt))&&Math.abs(ir-Ke)<=he.b*Math.max(1,Math.abs(ir),Math.abs(Ke))&&Math.abs(Br-lt)<=he.b*Math.max(1,Math.abs(Br),Math.abs(lt))}var be=r,le=Oe},ZhIB:function(br,Ot,Ee){var he,B;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(L,o){he=o,B=typeof he=="function"?he.call(Ot,Ee,Ot,br):he,B!==void 0&&(br.exports=B)})(this,function(){var L,o,e="2.0.6",g={},v={},p={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:p.currentLocale,zeroFormat:p.zeroFormat,nullFormat:p.nullFormat,defaultFormat:p.defaultFormat,scalePercentBy100:p.scalePercentBy100};function h(i,r){this._input=i,this._value=r}return L=function(r){var n,s,f,u;if(L.isNumeral(r))n=r.value();else if(r===0||typeof r=="undefined")n=0;else if(r===null||o.isNaN(r))n=null;else if(typeof r=="string")if(c.zeroFormat&&r===c.zeroFormat)n=0;else if(c.nullFormat&&r===c.nullFormat||!r.replace(/[^0-9]+/g,"").length)n=null;else{for(s in g)if(u=typeof g[s].regexps.unformat=="function"?g[s].regexps.unformat():g[s].regexps.unformat,u&&r.match(u)){f=g[s].unformat;break}f=f||L._.stringToNumber,n=f(r)}else n=Number(r)||null;return new h(r,n)},L.version=e,L.isNumeral=function(i){return i instanceof h},L._=o={numberToFormat:function(r,n,s){var f=v[L.options.currentLocale],u=!1,d=!1,b=0,_="",x=1e12,M=1e9,P=1e6,C=1e3,O="",w=!1,S,I,j,N,W,H,J,Q,ne,K;if(r=r||0,I=Math.abs(r),L._.includes(n,"(")?(u=!0,n=n.replace(/[\(|\)]/g,"")):(L._.includes(n,"+")||L._.includes(n,"-"))&&(Q=L._.includes(n,"+")?n.indexOf("+"):r<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),L._.includes(n,"a")&&(S=n.match(/a(k|m|b|t)?/),S=S?S[1]:!1,L._.includes(n," a")&&(_=" "),n=n.replace(new RegExp(_+"a[kmbt]?"),""),I>=x&&!S||S==="t"?(_+=f.abbreviations.trillion,r=r/x):I<x&&I>=M&&!S||S==="b"?(_+=f.abbreviations.billion,r=r/M):I<M&&I>=P&&!S||S==="m"?(_+=f.abbreviations.million,r=r/P):(I<P&&I>=C&&!S||S==="k")&&(_+=f.abbreviations.thousand,r=r/C)),L._.includes(n,"[.]")&&(d=!0,n=n.replace("[.]",".")),H=r.toString().split(".")[0],J=n.split(".")[1],ne=n.indexOf(","),b=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,J?(L._.includes(J,"[")?(J=J.replace("]",""),J=J.split("["),O=L._.toFixed(r,J[0].length+J[1].length,s,J[1].length)):O=L._.toFixed(r,J.length,s),H=O.split(".")[0],L._.includes(O,".")?O=f.delimiters.decimal+O.split(".")[1]:O="",d&&Number(O.slice(1))===0&&(O="")):H=L._.toFixed(r,0,s),_&&!S&&Number(H)>=1e3&&_!==f.abbreviations.trillion)switch(H=String(Number(H)/1e3),_){case f.abbreviations.thousand:_=f.abbreviations.million;break;case f.abbreviations.million:_=f.abbreviations.billion;break;case f.abbreviations.billion:_=f.abbreviations.trillion;break}if(L._.includes(H,"-")&&(H=H.slice(1),w=!0),H.length<b)for(var ie=b-H.length;ie>0;ie--)H="0"+H;return ne>-1&&(H=H.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),n.indexOf(".")===0&&(H=""),K=H+O+(_||""),u?K=(u&&w?"(":"")+K+(u&&w?")":""):Q>=0?K=Q===0?(w?"-":"+")+K:K+(w?"-":"+"):w&&(K="-"+K),K},stringToNumber:function(r){var n=v[c.currentLocale],s=r,f={thousand:3,million:6,billion:9,trillion:12},u,d,b,_;if(c.zeroFormat&&r===c.zeroFormat)d=0;else if(c.nullFormat&&r===c.nullFormat||!r.replace(/[^0-9]+/g,"").length)d=null;else{d=1,n.delimiters.decimal!=="."&&(r=r.replace(/\./g,"").replace(n.delimiters.decimal,"."));for(u in f)if(_=new RegExp("[^a-zA-Z]"+n.abbreviations[u]+"(?:\\)|(\\"+n.currency.symbol+")?(?:\\))?)?$"),s.match(_)){d*=Math.pow(10,f[u]);break}d*=(r.split("-").length+Math.min(r.split("(").length-1,r.split(")").length-1))%2?1:-1,r=r.replace(/[^0-9\.]+/g,""),d*=Number(r)}return d},isNaN:function(i){function r(n){return i.apply(this,arguments)}return r.toString=function(){return i.toString()},r}(function(i){return typeof i=="number"&&isNaN(i)}),includes:function(r,n){return r.indexOf(n)!==-1},insert:function(r,n,s){return r.slice(0,s)+n+r.slice(s)},reduce:function(r,n){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof n!="function")throw new TypeError(n+" is not a function");var s=Object(r),f=s.length>>>0,u=0,d;if(arguments.length===3)d=arguments[2];else{for(;u<f&&!(u in s);)u++;if(u>=f)throw new TypeError("Reduce of empty array with no initial value");d=s[u++]}for(;u<f;u++)u in s&&(d=n(d,s[u],u,s));return d},multiplier:function(r){var n=r.toString().split(".");return n.length<2?1:Math.pow(10,n[1].length)},correctionFactor:function(){var r=Array.prototype.slice.call(arguments);return r.reduce(function(n,s){var f=o.multiplier(s);return n>f?n:f},1)},toFixed:function(r,n,s,f){var u=r.toString().split("."),d=n-(f||0),b,_,x,M;return u.length===2?b=Math.min(Math.max(u[1].length,d),n):b=d,x=Math.pow(10,b),M=(s(r+"e+"+b)/x).toFixed(b),f>n-b&&(_=new RegExp("\\.?0{1,"+(f-(n-b))+"}$"),M=M.replace(_,"")),M}},L.options=c,L.formats=g,L.locales=v,L.locale=function(i){return i&&(c.currentLocale=i.toLowerCase()),c.currentLocale},L.localeData=function(i){if(!i)return v[c.currentLocale];if(i=i.toLowerCase(),!v[i])throw new Error("Unknown locale : "+i);return v[i]},L.reset=function(){for(var i in p)c[i]=p[i]},L.zeroFormat=function(i){c.zeroFormat=typeof i=="string"?i:null},L.nullFormat=function(i){c.nullFormat=typeof i=="string"?i:null},L.defaultFormat=function(i){c.defaultFormat=typeof i=="string"?i:"0.0"},L.register=function(i,r,n){if(r=r.toLowerCase(),this[i+"s"][r])throw new TypeError(r+" "+i+" already registered.");return this[i+"s"][r]=n,n},L.validate=function(i,r){var n,s,f,u,d,b,_,x;if(typeof i!="string"&&(i+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",i)),i=i.trim(),i.match(/^\d+$/))return!0;if(i==="")return!1;try{_=L.localeData(r)}catch(M){_=L.localeData(L.locale())}return f=_.currency.symbol,d=_.abbreviations,n=_.delimiters.decimal,_.delimiters.thousands==="."?s="\\.":s=_.delimiters.thousands,x=i.match(/^[^\d]+/),x!==null&&(i=i.substr(1),x[0]!==f)||(x=i.match(/[^\d]+$/),x!==null&&(i=i.slice(0,-1),x[0]!==d.thousand&&x[0]!==d.million&&x[0]!==d.billion&&x[0]!==d.trillion))?!1:(b=new RegExp(s+"{2}"),i.match(/[^\d.,]/g)?!1:(u=i.split(n),u.length>2?!1:u.length<2?!!u[0].match(/^\d+.*\d$/)&&!u[0].match(b):u[0].length===1?!!u[0].match(/^\d+$/)&&!u[0].match(b)&&!!u[1].match(/^\d+$/):!!u[0].match(/^\d+.*\d$/)&&!u[0].match(b)&&!!u[1].match(/^\d+$/)))},L.fn=h.prototype={clone:function(){return L(this)},format:function(r,n){var s=this._value,f=r||c.defaultFormat,u,d,b;if(n=n||Math.round,s===0&&c.zeroFormat!==null)d=c.zeroFormat;else if(s===null&&c.nullFormat!==null)d=c.nullFormat;else{for(u in g)if(f.match(g[u].regexps.format)){b=g[u].format;break}b=b||L._.numberToFormat,d=b(s,f,n)}return d},value:function(){return this._value},input:function(){return this._input},set:function(r){return this._value=Number(r),this},add:function(r){var n=o.correctionFactor.call(null,this._value,r);function s(f,u,d,b){return f+Math.round(n*u)}return this._value=o.reduce([this._value,r],s,0)/n,this},subtract:function(r){var n=o.correctionFactor.call(null,this._value,r);function s(f,u,d,b){return f-Math.round(n*u)}return this._value=o.reduce([r],s,Math.round(this._value*n))/n,this},multiply:function(r){function n(s,f,u,d){var b=o.correctionFactor(s,f);return Math.round(s*b)*Math.round(f*b)/Math.round(b*b)}return this._value=o.reduce([this._value,r],n,1),this},divide:function(r){function n(s,f,u,d){var b=o.correctionFactor(s,f);return Math.round(s*b)/Math.round(f*b)}return this._value=o.reduce([this._value,r],n),this},difference:function(r){return Math.abs(L(this._value).subtract(r).value())}},L.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(r){var n=r%10;return~~(r%100/10)==1?"th":n===1?"st":n===2?"nd":n===3?"rd":"th"},currency:{symbol:"$"}}),function(){L.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(r,n,s){var f=L._.includes(n," BPS")?" ":"",u;return r=r*1e4,n=n.replace(/\s?BPS/,""),u=L._.numberToFormat(r,n,s),L._.includes(u,")")?(u=u.split(""),u.splice(-1,0,f+"BPS"),u=u.join("")):u=u+f+"BPS",u},unformat:function(r){return+(L._.stringToNumber(r)*1e-4).toFixed(15)}})}(),function(){var i={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},r={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},n=i.suffixes.concat(r.suffixes.filter(function(f){return i.suffixes.indexOf(f)<0})),s=n.join("|");s="("+s.replace("B","B(?!PS)")+")",L.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(s)},format:function(u,d,b){var _,x=L._.includes(d,"ib")?r:i,M=L._.includes(d," b")||L._.includes(d," ib")?" ":"",P,C,O;for(d=d.replace(/\s?i?b/,""),P=0;P<=x.suffixes.length;P++)if(C=Math.pow(x.base,P),O=Math.pow(x.base,P+1),u===null||u===0||u>=C&&u<O){M+=x.suffixes[P],C>0&&(u=u/C);break}return _=L._.numberToFormat(u,d,b),_+M},unformat:function(u){var d=L._.stringToNumber(u),b,_;if(d){for(b=i.suffixes.length-1;b>=0;b--){if(L._.includes(u,i.suffixes[b])){_=Math.pow(i.base,b);break}if(L._.includes(u,r.suffixes[b])){_=Math.pow(r.base,b);break}}d*=_||1}return d}})}(),function(){L.register("format","currency",{regexps:{format:/(\$)/},format:function(r,n,s){var f=L.locales[L.options.currentLocale],u={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]},d,b,_;for(n=n.replace(/\s?\$\s?/,""),d=L._.numberToFormat(r,n,s),r>=0?(u.before=u.before.replace(/[\-\(]/,""),u.after=u.after.replace(/[\-\)]/,"")):r<0&&!L._.includes(u.before,"-")&&!L._.includes(u.before,"(")&&(u.before="-"+u.before),_=0;_<u.before.length;_++)switch(b=u.before[_],b){case"$":d=L._.insert(d,f.currency.symbol,_);break;case" ":d=L._.insert(d," ",_+f.currency.symbol.length-1);break}for(_=u.after.length-1;_>=0;_--)switch(b=u.after[_],b){case"$":d=_===u.after.length-1?d+f.currency.symbol:L._.insert(d,f.currency.symbol,-(u.after.length-(1+_)));break;case" ":d=_===u.after.length-1?d+" ":L._.insert(d," ",-(u.after.length-(1+_)+f.currency.symbol.length-1));break}return d}})}(),function(){L.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(r,n,s){var f,u=typeof r=="number"&&!L._.isNaN(r)?r.toExponential():"0e+0",d=u.split("e");return n=n.replace(/e[\+|\-]{1}0/,""),f=L._.numberToFormat(Number(d[0]),n,s),f+"e"+d[1]},unformat:function(r){var n=L._.includes(r,"e+")?r.split("e+"):r.split("e-"),s=Number(n[0]),f=Number(n[1]);f=L._.includes(r,"e-")?f*=-1:f;function u(d,b,_,x){var M=L._.correctionFactor(d,b),P=d*M*(b*M)/(M*M);return P}return L._.reduce([s,Math.pow(10,f)],u,1)}})}(),function(){L.register("format","ordinal",{regexps:{format:/(o)/},format:function(r,n,s){var f=L.locales[L.options.currentLocale],u,d=L._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),d+=f.ordinal(r),u=L._.numberToFormat(r,n,s),u+d}})}(),function(){L.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(r,n,s){var f=L._.includes(n," %")?" ":"",u;return L.options.scalePercentBy100&&(r=r*100),n=n.replace(/\s?\%/,""),u=L._.numberToFormat(r,n,s),L._.includes(u,")")?(u=u.split(""),u.splice(-1,0,f+"%"),u=u.join("")):u=u+f+"%",u},unformat:function(r){var n=L._.stringToNumber(r);return L.options.scalePercentBy100?n*.01:n}})}(),function(){L.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(r,n,s){var f=Math.floor(r/60/60),u=Math.floor((r-f*60*60)/60),d=Math.round(r-f*60*60-u*60);return f+":"+(u<10?"0"+u:u)+":"+(d<10?"0"+d:d)},unformat:function(r){var n=r.split(":"),s=0;return n.length===3?(s=s+Number(n[0])*60*60,s=s+Number(n[1])*60,s=s+Number(n[2])):n.length===2&&(s=s+Number(n[0])*60,s=s+Number(n[1])),Number(s)}})}(),L})},"Znm+":function(br,Ot,Ee){var he=Ee("NykK"),B=Ee("ExA7"),L="[object Boolean]";function o(e){return e===!0||e===!1||B(e)&&he(e)==L}br.exports=o},ZxFD:function(br,Ot,Ee){"use strict";Ee.r(Ot),Ee.d(Ot,"create",function(){return B}),Ee.d(Ot,"clone",function(){return L}),Ee.d(Ot,"fromValues",function(){return o}),Ee.d(Ot,"copy",function(){return e}),Ee.d(Ot,"set",function(){return g}),Ee.d(Ot,"add",function(){return v}),Ee.d(Ot,"subtract",function(){return p}),Ee.d(Ot,"multiply",function(){return c}),Ee.d(Ot,"divide",function(){return h}),Ee.d(Ot,"ceil",function(){return i}),Ee.d(Ot,"floor",function(){return r}),Ee.d(Ot,"min",function(){return n}),Ee.d(Ot,"max",function(){return s}),Ee.d(Ot,"round",function(){return f}),Ee.d(Ot,"scale",function(){return u}),Ee.d(Ot,"scaleAndAdd",function(){return d}),Ee.d(Ot,"distance",function(){return b}),Ee.d(Ot,"squaredDistance",function(){return _}),Ee.d(Ot,"length",function(){return x}),Ee.d(Ot,"squaredLength",function(){return M}),Ee.d(Ot,"negate",function(){return P}),Ee.d(Ot,"inverse",function(){return C}),Ee.d(Ot,"normalize",function(){return O}),Ee.d(Ot,"dot",function(){return w}),Ee.d(Ot,"cross",function(){return S}),Ee.d(Ot,"lerp",function(){return I}),Ee.d(Ot,"random",function(){return j}),Ee.d(Ot,"transformMat2",function(){return N}),Ee.d(Ot,"transformMat2d",function(){return W}),Ee.d(Ot,"transformMat3",function(){return H}),Ee.d(Ot,"transformMat4",function(){return J}),Ee.d(Ot,"rotate",function(){return Q}),Ee.d(Ot,"angle",function(){return ne}),Ee.d(Ot,"zero",function(){return K}),Ee.d(Ot,"str",function(){return ie}),Ee.d(Ot,"exactEquals",function(){return de}),Ee.d(Ot,"equals",function(){return we}),Ee.d(Ot,"len",function(){return Re}),Ee.d(Ot,"sub",function(){return _e}),Ee.d(Ot,"mul",function(){return Ue}),Ee.d(Ot,"div",function(){return rt}),Ee.d(Ot,"dist",function(){return Fe}),Ee.d(Ot,"sqrDist",function(){return Se}),Ee.d(Ot,"sqrLen",function(){return ye}),Ee.d(Ot,"forEach",function(){return Oe});var he=Ee("yU0y");function B(){var ue=new he.a(2);return he.a!=Float32Array&&(ue[0]=0,ue[1]=0),ue}function L(ue){var xe=new he.a(2);return xe[0]=ue[0],xe[1]=ue[1],xe}function o(ue,xe){var Ae=new he.a(2);return Ae[0]=ue,Ae[1]=xe,Ae}function e(ue,xe){return ue[0]=xe[0],ue[1]=xe[1],ue}function g(ue,xe,Ae){return ue[0]=xe,ue[1]=Ae,ue}function v(ue,xe,Ae){return ue[0]=xe[0]+Ae[0],ue[1]=xe[1]+Ae[1],ue}function p(ue,xe,Ae){return ue[0]=xe[0]-Ae[0],ue[1]=xe[1]-Ae[1],ue}function c(ue,xe,Ae){return ue[0]=xe[0]*Ae[0],ue[1]=xe[1]*Ae[1],ue}function h(ue,xe,Ae){return ue[0]=xe[0]/Ae[0],ue[1]=xe[1]/Ae[1],ue}function i(ue,xe){return ue[0]=Math.ceil(xe[0]),ue[1]=Math.ceil(xe[1]),ue}function r(ue,xe){return ue[0]=Math.floor(xe[0]),ue[1]=Math.floor(xe[1]),ue}function n(ue,xe,Ae){return ue[0]=Math.min(xe[0],Ae[0]),ue[1]=Math.min(xe[1],Ae[1]),ue}function s(ue,xe,Ae){return ue[0]=Math.max(xe[0],Ae[0]),ue[1]=Math.max(xe[1],Ae[1]),ue}function f(ue,xe){return ue[0]=Math.round(xe[0]),ue[1]=Math.round(xe[1]),ue}function u(ue,xe,Ae){return ue[0]=xe[0]*Ae,ue[1]=xe[1]*Ae,ue}function d(ue,xe,Ae,pe){return ue[0]=xe[0]+Ae[0]*pe,ue[1]=xe[1]+Ae[1]*pe,ue}function b(ue,xe){var Ae=xe[0]-ue[0],pe=xe[1]-ue[1];return Math.hypot(Ae,pe)}function _(ue,xe){var Ae=xe[0]-ue[0],pe=xe[1]-ue[1];return Ae*Ae+pe*pe}function x(ue){var xe=ue[0],Ae=ue[1];return Math.hypot(xe,Ae)}function M(ue){var xe=ue[0],Ae=ue[1];return xe*xe+Ae*Ae}function P(ue,xe){return ue[0]=-xe[0],ue[1]=-xe[1],ue}function C(ue,xe){return ue[0]=1/xe[0],ue[1]=1/xe[1],ue}function O(ue,xe){var Ae=xe[0],pe=xe[1],be=Ae*Ae+pe*pe;return be>0&&(be=1/Math.sqrt(be)),ue[0]=xe[0]*be,ue[1]=xe[1]*be,ue}function w(ue,xe){return ue[0]*xe[0]+ue[1]*xe[1]}function S(ue,xe,Ae){var pe=xe[0]*Ae[1]-xe[1]*Ae[0];return ue[0]=ue[1]=0,ue[2]=pe,ue}function I(ue,xe,Ae,pe){var be=xe[0],le=xe[1];return ue[0]=be+pe*(Ae[0]-be),ue[1]=le+pe*(Ae[1]-le),ue}function j(ue,xe){xe=xe||1;var Ae=he.c()*2*Math.PI;return ue[0]=Math.cos(Ae)*xe,ue[1]=Math.sin(Ae)*xe,ue}function N(ue,xe,Ae){var pe=xe[0],be=xe[1];return ue[0]=Ae[0]*pe+Ae[2]*be,ue[1]=Ae[1]*pe+Ae[3]*be,ue}function W(ue,xe,Ae){var pe=xe[0],be=xe[1];return ue[0]=Ae[0]*pe+Ae[2]*be+Ae[4],ue[1]=Ae[1]*pe+Ae[3]*be+Ae[5],ue}function H(ue,xe,Ae){var pe=xe[0],be=xe[1];return ue[0]=Ae[0]*pe+Ae[3]*be+Ae[6],ue[1]=Ae[1]*pe+Ae[4]*be+Ae[7],ue}function J(ue,xe,Ae){var pe=xe[0],be=xe[1];return ue[0]=Ae[0]*pe+Ae[4]*be+Ae[12],ue[1]=Ae[1]*pe+Ae[5]*be+Ae[13],ue}function Q(ue,xe,Ae,pe){var be=xe[0]-Ae[0],le=xe[1]-Ae[1],z=Math.sin(pe),ae=Math.cos(pe);return ue[0]=be*ae-le*z+Ae[0],ue[1]=be*z+le*ae+Ae[1],ue}function ne(ue,xe){var Ae=ue[0],pe=ue[1],be=xe[0],le=xe[1],z=Math.sqrt(Ae*Ae+pe*pe)*Math.sqrt(be*be+le*le),ae=z&&(Ae*be+pe*le)/z;return Math.acos(Math.min(Math.max(ae,-1),1))}function K(ue){return ue[0]=0,ue[1]=0,ue}function ie(ue){return"vec2("+ue[0]+", "+ue[1]+")"}function de(ue,xe){return ue[0]===xe[0]&&ue[1]===xe[1]}function we(ue,xe){var Ae=ue[0],pe=ue[1],be=xe[0],le=xe[1];return Math.abs(Ae-be)<=he.b*Math.max(1,Math.abs(Ae),Math.abs(be))&&Math.abs(pe-le)<=he.b*Math.max(1,Math.abs(pe),Math.abs(le))}var Re=x,_e=p,Ue=c,rt=h,Fe=b,Se=_,ye=M,Oe=function(){var ue=B();return function(xe,Ae,pe,be,le,z){var ae,V;for(Ae||(Ae=2),pe||(pe=0),be?V=Math.min(be*Ae+pe,xe.length):V=xe.length,ae=pe;ae<V;ae+=Ae)ue[0]=xe[ae],ue[1]=xe[ae+1],le(ue,ue,z),xe[ae]=ue[0],xe[ae+1]=ue[1];return xe}}()},aEx7:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return d});var he=Ee("fWQN"),B=Ee("mtLc"),L=Ee("rAM+"),o=Ee("dA7e"),e=Ee.n(o),g=Ee("eRUA"),v=Ee.n(g),p=Object.defineProperty,c=Object.defineProperties,h=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=function(_,x,M){return x in _?p(_,x,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[x]=M},f=function(_,x){for(var M in x||(x={}))r.call(x,M)&&s(_,M,x[M]);if(i){var P=Object(L.a)(i(x)),C;try{for(P.s();!(C=P.n()).done;){var M=C.value;n.call(x,M)&&s(_,M,x[M])}}catch(O){P.e(O)}finally{P.f()}}return _},u=function(_,x){return c(_,h(x))},d=function(){function b(_,x,M,P){Object(he.a)(this,b),this.vectorLayerCache={},this.x=x,this.y=M,this.z=P,this.vectorTile=new o.VectorTile(new v.a(_))}return Object(B.a)(b,[{key:"getTileData",value:function(x){if(!x||!this.vectorTile.layers[x])return[];if(this.vectorLayerCache[x])return this.vectorLayerCache[x];var M=this.vectorTile.layers[x];if(Array.isArray(M.features))return this.vectorLayerCache[x]=M.features,M.features;for(var P=[],C=0;C<M.length;C++){var O=M.feature(C),w=O.toGeoJSON(this.x,this.y,this.z);P.push(u(f({},w),{properties:f({id:w.id},w.properties)}))}return this.vectorLayerCache[x]=P,P}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),b}()},aF1E:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return p});var he=Ee("rAM+"),B=Object.defineProperty,L=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,g=function(h,i,r){return i in h?B(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r},v=function(h,i){for(var r in i||(i={}))o.call(i,r)&&g(h,r,i[r]);if(L){var n=Object(he.a)(L(i)),s;try{for(n.s();!(s=n.n()).done;){var r=s.value;e.call(i,r)&&g(h,r,i[r])}}catch(f){n.e(f)}finally{n.f()}}return h};function p(c,h){var i=h.sourceField,r=h.targetField,n=h.data,s={};return n.forEach(function(f){s[f[i]]=f}),c.dataArray=c.dataArray.map(function(f){var u=f[r];return v(v({},f),s[u])}),c}},aHsQ:function(br,Ot,Ee){"use strict";var he=Ee("EFp3"),B=Ee.n(he),L=Ee("6D9b"),o=Ee.n(L),e=Ee("cWXX")},aRQH:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return f});var he=Ee("tJVT"),B=Ee("rAM+"),L=Ee("3Aqx"),o=Ee("0cpV"),e=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,i=function(d,b,_){return b in d?e(d,b,{enumerable:!0,configurable:!0,writable:!0,value:_}):d[b]=_},r=function(d,b){for(var _ in b||(b={}))c.call(b,_)&&i(d,_,b[_]);if(p){var x=Object(B.a)(p(b)),M;try{for(x.s();!(M=x.n()).done;){var _=M.value;h.call(b,_)&&i(d,_,b[_])}}catch(P){x.e(P)}finally{x.f()}}return d},n=function(d,b){return g(d,v(b))},s=function(d,b){var _={};for(var x in d)c.call(d,x)&&b.indexOf(x)<0&&(_[x]=d[x]);if(d!=null&&p){var M=Object(B.a)(p(d)),P;try{for(M.s();!(P=M.n()).done;){var x=P.value;b.indexOf(x)<0&&h.call(d,x)&&(_[x]=d[x])}}catch(C){M.e(C)}finally{M.f()}}return _};function f(u,d){var b=d,_=b.extent,x=b.coordinates,M=b.width,P=b.height,C=s(b,["extent","coordinates","width","height"]);u.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var O=C.bands||[0,1,2],w=Object(he.a)(O,3),S=w[0],I=w[1],j=w[2],N=[u[S],u[I],u[j]],W=[],H=(C==null?void 0:C.countCut)||[2,98],J=Object(he.a)(H,2),Q=J[0],ne=J[1],K=(C==null?void 0:C.RMinMax)||Object(L.b)(N[0],Q,ne),ie=(C==null?void 0:C.GMinMax)||Object(L.b)(N[1],Q,ne),de=(C==null?void 0:C.BMinMax)||Object(L.b)(N[2],Q,ne),we=0;we<N[0].length;we++)W.push(Math.max(0,N[0][we]-K[0])),W.push(Math.max(0,N[1][we]-ie[0])),W.push(Math.max(0,N[2][we]-de[0]));var Re=Object(o.a)(x,_),_e={_id:1,dataArray:[n(r({_id:1,data:W,width:M,height:P,rMinMax:K,gMinMax:ie,bMinMax:de},C),{coordinates:Re})]};return _e}},b2z7:function(br,Ot){var Ee=/\w*$/;function he(B){var L=new B.constructor(B.source,Ee.exec(B));return L.lastIndex=B.lastIndex,L}br.exports=he},bl9R:function(br,Ot,Ee){"use strict";Ee.r(Ot),Ee.d(Ot,"create",function(){return B}),Ee.d(Ot,"clone",function(){return L}),Ee.d(Ot,"fromValues",function(){return o}),Ee.d(Ot,"copy",function(){return e}),Ee.d(Ot,"set",function(){return g}),Ee.d(Ot,"add",function(){return v}),Ee.d(Ot,"subtract",function(){return p}),Ee.d(Ot,"multiply",function(){return c}),Ee.d(Ot,"divide",function(){return h}),Ee.d(Ot,"ceil",function(){return i}),Ee.d(Ot,"floor",function(){return r}),Ee.d(Ot,"min",function(){return n}),Ee.d(Ot,"max",function(){return s}),Ee.d(Ot,"round",function(){return f}),Ee.d(Ot,"scale",function(){return u}),Ee.d(Ot,"scaleAndAdd",function(){return d}),Ee.d(Ot,"distance",function(){return b}),Ee.d(Ot,"squaredDistance",function(){return _}),Ee.d(Ot,"length",function(){return x}),Ee.d(Ot,"squaredLength",function(){return M}),Ee.d(Ot,"negate",function(){return P}),Ee.d(Ot,"inverse",function(){return C}),Ee.d(Ot,"normalize",function(){return O}),Ee.d(Ot,"dot",function(){return w}),Ee.d(Ot,"cross",function(){return S}),Ee.d(Ot,"lerp",function(){return I}),Ee.d(Ot,"random",function(){return j}),Ee.d(Ot,"transformMat4",function(){return N}),Ee.d(Ot,"transformQuat",function(){return W}),Ee.d(Ot,"zero",function(){return H}),Ee.d(Ot,"str",function(){return J}),Ee.d(Ot,"exactEquals",function(){return Q}),Ee.d(Ot,"equals",function(){return ne}),Ee.d(Ot,"sub",function(){return K}),Ee.d(Ot,"mul",function(){return ie}),Ee.d(Ot,"div",function(){return de}),Ee.d(Ot,"dist",function(){return we}),Ee.d(Ot,"sqrDist",function(){return Re}),Ee.d(Ot,"len",function(){return _e}),Ee.d(Ot,"sqrLen",function(){return Ue}),Ee.d(Ot,"forEach",function(){return rt});var he=Ee("yU0y");function B(){var Fe=new he.a(4);return he.a!=Float32Array&&(Fe[0]=0,Fe[1]=0,Fe[2]=0,Fe[3]=0),Fe}function L(Fe){var Se=new he.a(4);return Se[0]=Fe[0],Se[1]=Fe[1],Se[2]=Fe[2],Se[3]=Fe[3],Se}function o(Fe,Se,ye,Oe){var ue=new he.a(4);return ue[0]=Fe,ue[1]=Se,ue[2]=ye,ue[3]=Oe,ue}function e(Fe,Se){return Fe[0]=Se[0],Fe[1]=Se[1],Fe[2]=Se[2],Fe[3]=Se[3],Fe}function g(Fe,Se,ye,Oe,ue){return Fe[0]=Se,Fe[1]=ye,Fe[2]=Oe,Fe[3]=ue,Fe}function v(Fe,Se,ye){return Fe[0]=Se[0]+ye[0],Fe[1]=Se[1]+ye[1],Fe[2]=Se[2]+ye[2],Fe[3]=Se[3]+ye[3],Fe}function p(Fe,Se,ye){return Fe[0]=Se[0]-ye[0],Fe[1]=Se[1]-ye[1],Fe[2]=Se[2]-ye[2],Fe[3]=Se[3]-ye[3],Fe}function c(Fe,Se,ye){return Fe[0]=Se[0]*ye[0],Fe[1]=Se[1]*ye[1],Fe[2]=Se[2]*ye[2],Fe[3]=Se[3]*ye[3],Fe}function h(Fe,Se,ye){return Fe[0]=Se[0]/ye[0],Fe[1]=Se[1]/ye[1],Fe[2]=Se[2]/ye[2],Fe[3]=Se[3]/ye[3],Fe}function i(Fe,Se){return Fe[0]=Math.ceil(Se[0]),Fe[1]=Math.ceil(Se[1]),Fe[2]=Math.ceil(Se[2]),Fe[3]=Math.ceil(Se[3]),Fe}function r(Fe,Se){return Fe[0]=Math.floor(Se[0]),Fe[1]=Math.floor(Se[1]),Fe[2]=Math.floor(Se[2]),Fe[3]=Math.floor(Se[3]),Fe}function n(Fe,Se,ye){return Fe[0]=Math.min(Se[0],ye[0]),Fe[1]=Math.min(Se[1],ye[1]),Fe[2]=Math.min(Se[2],ye[2]),Fe[3]=Math.min(Se[3],ye[3]),Fe}function s(Fe,Se,ye){return Fe[0]=Math.max(Se[0],ye[0]),Fe[1]=Math.max(Se[1],ye[1]),Fe[2]=Math.max(Se[2],ye[2]),Fe[3]=Math.max(Se[3],ye[3]),Fe}function f(Fe,Se){return Fe[0]=Math.round(Se[0]),Fe[1]=Math.round(Se[1]),Fe[2]=Math.round(Se[2]),Fe[3]=Math.round(Se[3]),Fe}function u(Fe,Se,ye){return Fe[0]=Se[0]*ye,Fe[1]=Se[1]*ye,Fe[2]=Se[2]*ye,Fe[3]=Se[3]*ye,Fe}function d(Fe,Se,ye,Oe){return Fe[0]=Se[0]+ye[0]*Oe,Fe[1]=Se[1]+ye[1]*Oe,Fe[2]=Se[2]+ye[2]*Oe,Fe[3]=Se[3]+ye[3]*Oe,Fe}function b(Fe,Se){var ye=Se[0]-Fe[0],Oe=Se[1]-Fe[1],ue=Se[2]-Fe[2],xe=Se[3]-Fe[3];return Math.hypot(ye,Oe,ue,xe)}function _(Fe,Se){var ye=Se[0]-Fe[0],Oe=Se[1]-Fe[1],ue=Se[2]-Fe[2],xe=Se[3]-Fe[3];return ye*ye+Oe*Oe+ue*ue+xe*xe}function x(Fe){var Se=Fe[0],ye=Fe[1],Oe=Fe[2],ue=Fe[3];return Math.hypot(Se,ye,Oe,ue)}function M(Fe){var Se=Fe[0],ye=Fe[1],Oe=Fe[2],ue=Fe[3];return Se*Se+ye*ye+Oe*Oe+ue*ue}function P(Fe,Se){return Fe[0]=-Se[0],Fe[1]=-Se[1],Fe[2]=-Se[2],Fe[3]=-Se[3],Fe}function C(Fe,Se){return Fe[0]=1/Se[0],Fe[1]=1/Se[1],Fe[2]=1/Se[2],Fe[3]=1/Se[3],Fe}function O(Fe,Se){var ye=Se[0],Oe=Se[1],ue=Se[2],xe=Se[3],Ae=ye*ye+Oe*Oe+ue*ue+xe*xe;return Ae>0&&(Ae=1/Math.sqrt(Ae)),Fe[0]=ye*Ae,Fe[1]=Oe*Ae,Fe[2]=ue*Ae,Fe[3]=xe*Ae,Fe}function w(Fe,Se){return Fe[0]*Se[0]+Fe[1]*Se[1]+Fe[2]*Se[2]+Fe[3]*Se[3]}function S(Fe,Se,ye,Oe){var ue=ye[0]*Oe[1]-ye[1]*Oe[0],xe=ye[0]*Oe[2]-ye[2]*Oe[0],Ae=ye[0]*Oe[3]-ye[3]*Oe[0],pe=ye[1]*Oe[2]-ye[2]*Oe[1],be=ye[1]*Oe[3]-ye[3]*Oe[1],le=ye[2]*Oe[3]-ye[3]*Oe[2],z=Se[0],ae=Se[1],V=Se[2],re=Se[3];return Fe[0]=ae*le-V*be+re*pe,Fe[1]=-(z*le)+V*Ae-re*xe,Fe[2]=z*be-ae*Ae+re*ue,Fe[3]=-(z*pe)+ae*xe-V*ue,Fe}function I(Fe,Se,ye,Oe){var ue=Se[0],xe=Se[1],Ae=Se[2],pe=Se[3];return Fe[0]=ue+Oe*(ye[0]-ue),Fe[1]=xe+Oe*(ye[1]-xe),Fe[2]=Ae+Oe*(ye[2]-Ae),Fe[3]=pe+Oe*(ye[3]-pe),Fe}function j(Fe,Se){Se=Se||1;var ye,Oe,ue,xe,Ae,pe;do ye=he.c()*2-1,Oe=he.c()*2-1,Ae=ye*ye+Oe*Oe;while(Ae>=1);do ue=he.c()*2-1,xe=he.c()*2-1,pe=ue*ue+xe*xe;while(pe>=1);var be=Math.sqrt((1-Ae)/pe);return Fe[0]=Se*ye,Fe[1]=Se*Oe,Fe[2]=Se*ue*be,Fe[3]=Se*xe*be,Fe}function N(Fe,Se,ye){var Oe=Se[0],ue=Se[1],xe=Se[2],Ae=Se[3];return Fe[0]=ye[0]*Oe+ye[4]*ue+ye[8]*xe+ye[12]*Ae,Fe[1]=ye[1]*Oe+ye[5]*ue+ye[9]*xe+ye[13]*Ae,Fe[2]=ye[2]*Oe+ye[6]*ue+ye[10]*xe+ye[14]*Ae,Fe[3]=ye[3]*Oe+ye[7]*ue+ye[11]*xe+ye[15]*Ae,Fe}function W(Fe,Se,ye){var Oe=Se[0],ue=Se[1],xe=Se[2],Ae=ye[0],pe=ye[1],be=ye[2],le=ye[3],z=le*Oe+pe*xe-be*ue,ae=le*ue+be*Oe-Ae*xe,V=le*xe+Ae*ue-pe*Oe,re=-Ae*Oe-pe*ue-be*xe;return Fe[0]=z*le+re*-Ae+ae*-be-V*-pe,Fe[1]=ae*le+re*-pe+V*-Ae-z*-be,Fe[2]=V*le+re*-be+z*-pe-ae*-Ae,Fe[3]=Se[3],Fe}function H(Fe){return Fe[0]=0,Fe[1]=0,Fe[2]=0,Fe[3]=0,Fe}function J(Fe){return"vec4("+Fe[0]+", "+Fe[1]+", "+Fe[2]+", "+Fe[3]+")"}function Q(Fe,Se){return Fe[0]===Se[0]&&Fe[1]===Se[1]&&Fe[2]===Se[2]&&Fe[3]===Se[3]}function ne(Fe,Se){var ye=Fe[0],Oe=Fe[1],ue=Fe[2],xe=Fe[3],Ae=Se[0],pe=Se[1],be=Se[2],le=Se[3];return Math.abs(ye-Ae)<=he.b*Math.max(1,Math.abs(ye),Math.abs(Ae))&&Math.abs(Oe-pe)<=he.b*Math.max(1,Math.abs(Oe),Math.abs(pe))&&Math.abs(ue-be)<=he.b*Math.max(1,Math.abs(ue),Math.abs(be))&&Math.abs(xe-le)<=he.b*Math.max(1,Math.abs(xe),Math.abs(le))}var K=p,ie=c,de=h,we=b,Re=_,_e=x,Ue=M,rt=function(){var Fe=B();return function(Se,ye,Oe,ue,xe,Ae){var pe,be;for(ye||(ye=4),Oe||(Oe=0),ue?be=Math.min(ue*ye+Oe,Se.length):be=Se.length,pe=Oe;pe<be;pe+=ye)Fe[0]=Se[pe],Fe[1]=Se[pe+1],Fe[2]=Se[pe+2],Fe[3]=Se[pe+3],xe(Fe,Fe,Ae),Se[pe]=Fe[0],Se[pe+1]=Fe[1],Se[pe+2]=Fe[2],Se[pe+3]=Fe[3];return Se}}()},bpoo:function(br,Ot){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(Ee){try{var he=function(){c||(c=!0,v())},B=function i(){try{p.documentElement.doScroll("left")}catch(r){return void setTimeout(i,50)}he()},L=(L=document.getElementsByTagName("script"))[L.length-1],o=L.getAttribute("data-injectcss"),L=L.getAttribute("data-disable-injectsvg");if(!L){var e,g,v,p,c,h=function(r,n){n.parentNode.insertBefore(r,n)};if(o&&!Ee.__iconfont__svg__cssinject__){Ee.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(i){console&&console.log(i)}}e=function(){var r,n=document.createElement("div");n.innerHTML=Ee._iconfont_svg_string_3580659,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",n=n,(r=document.body).firstChild?h(n,r.firstChild):r.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(e,0):(g=function(){document.removeEventListener("DOMContentLoaded",g,!1),e()},document.addEventListener("DOMContentLoaded",g,!1)):document.attachEvent&&(v=e,p=Ee.document,c=!1,B(),p.onreadystatechange=function(){p.readyState=="complete"&&(p.onreadystatechange=null,he())})}}catch(i){}}(window)},bx4M:function(br,Ot,Ee){"use strict";var he=Ee("rePB"),B=Ee("wx14"),L=Ee("TSYQ"),o=Ee.n(L),e=Ee("bT9E"),g=Ee("q1tI"),v=Ee("H84U"),p=Ee("3Nzz"),c=Ee("/ezw"),h=Ee("ZTPi"),i=function(C,O){var w={};for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&O.indexOf(S)<0&&(w[S]=C[S]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,S=Object.getOwnPropertySymbols(C);I<S.length;I++)O.indexOf(S[I])<0&&Object.prototype.propertyIsEnumerable.call(C,S[I])&&(w[S[I]]=C[S[I]]);return w},r=function(O){var w=O.prefixCls,S=O.className,I=O.hoverable,j=I===void 0?!0:I,N=i(O,["prefixCls","className","hoverable"]);return g.createElement(v.a,null,function(W){var H=W.getPrefixCls,J=H("card",w),Q=o()("".concat(J,"-grid"),S,Object(he.a)({},"".concat(J,"-grid-hoverable"),j));return g.createElement("div",Object(B.a)({},N,{className:Q}))})},n=r,s=function(C,O){var w={};for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&O.indexOf(S)<0&&(w[S]=C[S]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,S=Object.getOwnPropertySymbols(C);I<S.length;I++)O.indexOf(S[I])<0&&Object.prototype.propertyIsEnumerable.call(C,S[I])&&(w[S[I]]=C[S[I]]);return w};function f(C){var O=C.map(function(w,S){return g.createElement("li",{style:{width:"".concat(100/C.length,"%")},key:"action-".concat(S)},g.createElement("span",null,w))});return O}var u=g.forwardRef(function(C,O){var w=g.useContext(v.b),S=w.getPrefixCls,I=w.direction,j=g.useContext(p.b),N=function(rr){var ir;(ir=C.onTabChange)===null||ir===void 0||ir.call(C,rr)},W=function(){var rr;return g.Children.forEach(C.children,function(ir){ir&&ir.type&&ir.type===n&&(rr=!0)}),rr},H=C.prefixCls,J=C.className,Q=C.extra,ne=C.headStyle,K=ne===void 0?{}:ne,ie=C.bodyStyle,de=ie===void 0?{}:ie,we=C.title,Re=C.loading,_e=C.bordered,Ue=_e===void 0?!0:_e,rt=C.size,Fe=C.type,Se=C.cover,ye=C.actions,Oe=C.tabList,ue=C.children,xe=C.activeTabKey,Ae=C.defaultActiveTabKey,pe=C.tabBarExtraContent,be=C.hoverable,le=C.tabProps,z=le===void 0?{}:le,ae=s(C,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),V=S("card",H),re=g.createElement(c.a,{loading:!0,active:!0,paragraph:{rows:4},title:!1},ue),te=xe!==void 0,q=Object(B.a)(Object(B.a)({},z),Object(he.a)(Object(he.a)({},te?"activeKey":"defaultActiveKey",te?xe:Ae),"tabBarExtraContent",pe)),ve,Me=Oe&&Oe.length?g.createElement(h.a,Object(B.a)({size:"large"},q,{className:"".concat(V,"-head-tabs"),onChange:N,items:Oe.map(function(Yt){var rr;return{label:Yt.tab,key:Yt.key,disabled:(rr=Yt.disabled)!==null&&rr!==void 0?rr:!1}})})):null;(we||Q||Me)&&(ve=g.createElement("div",{className:"".concat(V,"-head"),style:K},g.createElement("div",{className:"".concat(V,"-head-wrapper")},we&&g.createElement("div",{className:"".concat(V,"-head-title")},we),Q&&g.createElement("div",{className:"".concat(V,"-extra")},Q)),Me));var De=Se?g.createElement("div",{className:"".concat(V,"-cover")},Se):null,ze=g.createElement("div",{className:"".concat(V,"-body"),style:de},Re?re:ue),We=ye&&ye.length?g.createElement("ul",{className:"".concat(V,"-actions")},f(ye)):null,He=Object(e.a)(ae,["onTabChange"]),$e=rt||j,It=o()(V,Object(he.a)(Object(he.a)(Object(he.a)(Object(he.a)(Object(he.a)(Object(he.a)(Object(he.a)(Object(he.a)({},"".concat(V,"-loading"),Re),"".concat(V,"-bordered"),Ue),"".concat(V,"-hoverable"),be),"".concat(V,"-contain-grid"),W()),"".concat(V,"-contain-tabs"),Oe&&Oe.length),"".concat(V,"-").concat($e),$e),"".concat(V,"-type-").concat(Fe),!!Fe),"".concat(V,"-rtl"),I==="rtl"),J);return g.createElement("div",Object(B.a)({ref:O},He,{className:It}),ve,De,ze,We)}),d=u,b=function(C,O){var w={};for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&O.indexOf(S)<0&&(w[S]=C[S]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,S=Object.getOwnPropertySymbols(C);I<S.length;I++)O.indexOf(S[I])<0&&Object.prototype.propertyIsEnumerable.call(C,S[I])&&(w[S[I]]=C[S[I]]);return w},_=function(O){return g.createElement(v.a,null,function(w){var S=w.getPrefixCls,I=O.prefixCls,j=O.className,N=O.avatar,W=O.title,H=O.description,J=b(O,["prefixCls","className","avatar","title","description"]),Q=S("card",I),ne=o()("".concat(Q,"-meta"),j),K=N?g.createElement("div",{className:"".concat(Q,"-meta-avatar")},N):null,ie=W?g.createElement("div",{className:"".concat(Q,"-meta-title")},W):null,de=H?g.createElement("div",{className:"".concat(Q,"-meta-description")},H):null,we=ie||de?g.createElement("div",{className:"".concat(Q,"-meta-detail")},ie,de):null;return g.createElement("div",Object(B.a)({},J,{className:ne}),K,we)})},x=_,M=d;M.Grid=n,M.Meta=x;var P=Ot.a=M},cQSq:function(br,Ot,Ee){(function(B,L){br.exports=L()})(window,function(){return function(he){var B={};function L(o){if(B[o])return B[o].exports;var e=B[o]={i:o,l:!1,exports:{}};return he[o].call(e.exports,e,e.exports,L),e.l=!0,e.exports}return L.m=he,L.c=B,L.d=function(o,e,g){L.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:g})},L.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},L.t=function(o,e){if(e&1&&(o=L(o)),e&8||e&4&&typeof o=="object"&&o&&o.__esModule)return o;var g=Object.create(null);if(L.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:o}),e&2&&typeof o!="string")for(var v in o)L.d(g,v,function(p){return o[p]}.bind(null,v));return g},L.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return L.d(e,"a",e),e},L.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},L.p="",L(L.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js":function(B,L,o){(function(g,v){B.exports=v()})(typeof self!="undefined"?self:this,function(){return function(e){var g={};function v(p){if(g[p])return g[p].exports;var c=g[p]={i:p,l:!1,exports:{}};return e[p].call(c.exports,c,c.exports,v),c.l=!0,c.exports}return v.m=e,v.c=g,v.d=function(p,c,h){v.o(p,c)||Object.defineProperty(p,c,{configurable:!1,enumerable:!0,get:h})},v.n=function(p){var c=p&&p.__esModule?function(){return p.default}:function(){return p};return v.d(c,"a",c),c},v.o=function(p,c){return Object.prototype.hasOwnProperty.call(p,c)},v.p="",v(v.s=31)}([function(e,g,v){"use strict";var p=v(4);g.a=function(c){return Array.isArray?Array.isArray(c):Object(p.a)(c,"Array")}},function(e,g,v){"use strict";var p=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)};g.a=p},function(e,g,v){"use strict";var p=v(0),c=v(13);function h(i,r){if(!!i){var n;if(Object(p.a)(i))for(var s=0,f=i.length;s<f&&(n=r(i[s],s),n!==!1);s++);else if(Object(c.a)(i)){for(var u in i)if(i.hasOwnProperty(u)&&(n=r(i[u],u),n===!1))break}}}g.a=h},function(e,g,v){"use strict";var p=v(4);g.a=function(c){return Object(p.a)(c,"Function")}},function(e,g,v){"use strict";var p={}.toString,c=function(i,r){return p.call(i)==="[object "+r+"]"};g.a=c},function(e,g,v){"use strict";var p=v(4),c=function(i){return Object(p.a)(i,"Number")};g.a=c},function(e,g,v){"use strict";var p=function(h){return h==null};g.a=p},function(e,g,v){var p=v(33),c=p.mix;e.exports={assign:c}},function(e,g,v){"use strict";var p=v(4);g.a=function(c){return Object(p.a)(c,"String")}},function(e,g,v){"use strict";var p=v(15),c=v(4),h=function(r){if(!Object(p.a)(r)||!Object(c.a)(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var n=r;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n};g.a=h},function(e,g,v){"use strict";var p=v(6);g.a=function(c){return Object(p.a)(c)?"":c.toString()}},function(e,g,v){var p=v(18),c=function(){function h(r,n){n===void 0&&(n={});var s=this;s.options=n,s.rootNode=p(r,n)}var i=h.prototype;return i.execute=function(){throw new Error("please override this method")},h}();e.exports=c},function(e,g,v){"use strict";var p=v(1),c=function(i,r){return Object(p.a)(i)?i.indexOf(r)>-1:!1};g.a=c},function(e,g,v){"use strict";g.a=function(p){var c=typeof p;return p!==null&&c==="object"||c==="function"}},function(e,g,v){"use strict";var p=v(2),c=v(1),h=function(r,n){if(!Object(c.a)(r))return r;var s=[];return Object(p.a)(r,function(f,u){n(f,u)&&s.push(f)}),s};g.a=h},function(e,g,v){"use strict";var p=function(h){return typeof h=="object"&&h!==null};g.a=p},function(e,g,v){"use strict";g.a=c;function p(h,i){for(var r in i)i.hasOwnProperty(r)&&r!=="constructor"&&i[r]!==void 0&&(h[r]=i[r])}function c(h,i,r,n){return i&&p(h,i),r&&p(h,r),n&&p(h,n),h}},function(e,g,v){var p=v(30),c=["LR","RL","TB","BT","H","V"],h=["LR","RL","H"],i=function(s){return h.indexOf(s)>-1},r=c[0];e.exports=function(n,s,f){var u=s.direction||r;if(s.isHorizontal=i(u),u&&c.indexOf(u)===-1)throw new TypeError("Invalid direction: "+u);if(u===c[0])f(n,s);else if(u===c[1])f(n,s),n.right2left();else if(u===c[2])f(n,s);else if(u===c[3])f(n,s),n.bottom2top();else if(u===c[4]||u===c[5]){var d=p(n,s),b=d.left,_=d.right;f(b,s),f(_,s),s.isHorizontal?b.right2left():b.bottom2top(),_.translate(b.x-_.x,b.y-_.y),n.x=b.x,n.y=_.y;var x=n.getBoundingBox();s.isHorizontal?x.top<0&&n.translate(0,-x.top):x.left<0&&n.translate(-x.left,0)}var M=s.fixedRoot;return M===void 0&&(M=!0),M&&n.translate(-(n.x+n.width/2+n.hgap),-(n.y+n.height/2+n.vgap)),n}},function(e,g,v){var p=v(7),c=18,h=c*2,i=c,r={getId:function(u){return u.id||u.name},getHGap:function(u){return u.hgap||i},getVGap:function(u){return u.vgap||i},getChildren:function(u){return u.children},getHeight:function(u){return u.height||h},getWidth:function(u){var d=u.label||" ";return u.width||d.split("").length*c}};function n(f,u){var d=this;if(d.vgap=d.hgap=0,f instanceof n)return f;d.data=f;var b=u.getHGap(f),_=u.getVGap(f);return d.width=u.getWidth(f),d.height=u.getHeight(f),d.id=u.getId(f),d.x=d.y=0,d.depth=0,d.children||(d.children=[]),d.addGap(b,_),d}p.assign(n.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(u,d){var b=this;b.hgap+=u,b.vgap+=d,b.width+=2*u,b.height+=2*d},eachNode:function(u){for(var d=this,b=[d],_;_=b.shift();)u(_),b=_.children.concat(b)},DFTraverse:function(u){this.eachNode(u)},BFTraverse:function(u){for(var d=this,b=[d],_;_=b.shift();)u(_),b=b.concat(_.children)},getBoundingBox:function(){var u={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(d){u.left=Math.min(u.left,d.x),u.top=Math.min(u.top,d.y),u.width=Math.max(u.width,d.x+d.width),u.height=Math.max(u.height,d.y+d.height)}),u},translate:function(u,d){u===void 0&&(u=0),d===void 0&&(d=0),this.eachNode(function(b){b.x+=u,b.y+=d})},right2left:function(){var u=this,d=u.getBoundingBox();u.eachNode(function(b){b.x=b.x-(b.x-d.left)*2-b.width}),u.translate(d.width,0)},bottom2top:function(){var u=this,d=u.getBoundingBox();u.eachNode(function(b){b.y=b.y-(b.y-d.top)*2-b.height}),u.translate(0,d.height)}});function s(f,u,d){u===void 0&&(u={}),u=p.assign({},r,u);var b=new n(f,u),_=[b],x;if(!d&&!f.collapsed){for(;x=_.shift();)if(!x.data.collapsed){var M=u.getChildren(x.data),P=M?M.length:0;if(x.children=new Array(P),M&&P)for(var C=0;C<P;C++){var O=new n(M[C],u);x.children[C]=O,_.push(O),O.parent=x,O.depth=x.depth+1}}}return b}e.exports=s},function(e,g,v){"use strict";var p=v(6),c=v(20);function h(i,r){var n=Object(c.a)(r),s=n.length;if(Object(p.a)(i))return!s;for(var f=0;f<s;f+=1){var u=n[f];if(r[u]!==i[u]||!(u in i))return!1}return!0}g.a=h},function(e,g,v){"use strict";var p=v(2),c=v(3),h=Object.keys?function(i){return Object.keys(i)}:function(i){var r=[];return Object(p.a)(i,function(n,s){Object(c.a)(i)&&s==="prototype"||r.push(s)}),r};g.a=h},function(e,g,v){"use strict";var p=v(1),c=Array.prototype.splice,h=function(r,n){if(!Object(p.a)(r))return[];for(var s=r?n.length:0,f=s-1;s--;){var u=void 0,d=n[s];(s===f||d!==u)&&(u=d,c.call(r,d,1))}return r};g.a=h},function(e,g,v){"use strict";var p=v(12),c=v(2),h=function(r){var n=[];return Object(c.a)(r,function(s){Object(p.a)(n,s)||n.push(s)}),n};g.a=h},function(e,g,v){"use strict";var p=v(0),c=v(3),h=v(24),i=function(n,s){if(!s)return{0:n};if(!Object(c.a)(s)){var f=Object(p.a)(s)?s:s.replace(/\s+/g,"").split("*");s=function(b){for(var _="_",x=0,M=f.length;x<M;x++)_+=b[f[x]]&&b[f[x]].toString();return _}}var u=Object(h.a)(n,s);return u};g.a=i},function(e,g,v){"use strict";var p=v(2),c=v(0),h=v(3),i=Object.prototype.hasOwnProperty;function r(n,s){if(!s||!Object(c.a)(n))return{};var f={},u=Object(h.a)(s)?s:function(b){return b[s]},d;return Object(p.a)(n,function(b){d=u(b),i.call(f,d)?f[d].push(b):f[d]=[b]}),f}g.a=r},function(e,g,v){"use strict";g.a=function(p,c){return p.hasOwnProperty(c)}},function(e,g,v){"use strict";var p=v(2),c=v(3),h=Object.values?function(i){return Object.values(i)}:function(i){var r=[];return Object(p.a)(i,function(n,s){Object(c.a)(i)&&s==="prototype"||r.push(n)}),r};g.a=h},function(e,g,v){"use strict";var p={}.toString,c=function(i){return p.call(i).replace(/^\[object /,"").replace(/]$/,"")};g.a=c},function(e,g,v){"use strict";var p=Object.prototype,c=function(i){var r=i&&i.constructor,n=typeof r=="function"&&r.prototype||p;return i===n};g.a=c},function(e,g,v){"use strict";var p=v(15),c=v(1),h=v(8),i=function r(n,s){if(n===s)return!0;if(!n||!s||Object(h.a)(n)||Object(h.a)(s))return!1;if(Object(c.a)(n)||Object(c.a)(s)){if(n.length!==s.length)return!1;for(var f=!0,u=0;u<n.length&&(f=r(n[u],s[u]),!!f);u++);return f}if(Object(p.a)(n)||Object(p.a)(s)){var d=Object.keys(n),b=Object.keys(s);if(d.length!==b.length)return!1;for(var f=!0,u=0;u<d.length&&(f=r(n[d[u]],s[d[u]]),!!f);u++);return f}return!1};g.a=i},function(e,g,v){var p=v(18);e.exports=function(c,h){for(var i=p(c.data,h,!0),r=p(c.data,h,!0),n=c.children.length,s=Math.round(n/2),f=h.getSide||function(_,x){return x<s?"right":"left"},u=0;u<n;u++){var d=c.children[u],b=f(d,u);b==="right"?r.children.push(d):i.children.push(d)}return i.eachNode(function(_){_.isRoot()||(_.side="left")}),r.eachNode(function(_){_.isRoot()||(_.side="right")}),{left:i,right:r}}},function(e,g,v){var p={compactBox:v(32),dendrogram:v(114),indented:v(116),mindmap:v(118)};e.exports=p},function(e,g,v){function p(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,u.__proto__=d}var c=v(11),h=v(113),i=v(17),r=v(7),n=function(u){p(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b.execute=function(){var x=this;return i(x.rootNode,x.options,h)},d}(c),s={};function f(u,d){return d=r.assign({},s,d),new n(u,d).execute()}e.exports=f},function(e,g,v){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var p=v(12);v.d(g,"contains",function(){return p.a}),v.d(g,"includes",function(){return p.a});var c=v(34);v.d(g,"difference",function(){return c.a});var h=v(35);v.d(g,"find",function(){return h.a});var i=v(36);v.d(g,"findIndex",function(){return i.a});var r=v(37);v.d(g,"firstValue",function(){return r.a});var n=v(38);v.d(g,"flatten",function(){return n.a});var s=v(39);v.d(g,"flattenDeep",function(){return s.a});var f=v(40);v.d(g,"getRange",function(){return f.a});var u=v(41);v.d(g,"pull",function(){return u.a});var d=v(21);v.d(g,"pullAt",function(){return d.a});var b=v(42);v.d(g,"reduce",function(){return b.a});var _=v(43);v.d(g,"remove",function(){return _.a});var x=v(44);v.d(g,"sortBy",function(){return x.a});var M=v(45);v.d(g,"union",function(){return M.a});var P=v(22);v.d(g,"uniq",function(){return P.a});var C=v(46);v.d(g,"valuesOfKey",function(){return C.a});var O=v(47);v.d(g,"head",function(){return O.a});var w=v(48);v.d(g,"last",function(){return w.a});var S=v(49);v.d(g,"startsWith",function(){return S.a});var I=v(50);v.d(g,"endsWith",function(){return I.a});var j=v(14);v.d(g,"filter",function(){return j.a});var N=v(51);v.d(g,"every",function(){return N.a});var W=v(52);v.d(g,"some",function(){return W.a});var H=v(53);v.d(g,"group",function(){return H.a});var J=v(24);v.d(g,"groupBy",function(){return J.a});var Q=v(23);v.d(g,"groupToMap",function(){return Q.a});var ne=v(54);v.d(g,"getWrapBehavior",function(){return ne.a});var K=v(55);v.d(g,"wrapBehavior",function(){return K.a});var ie=v(56);v.d(g,"number2color",function(){return ie.a});var de=v(57);v.d(g,"parseRadius",function(){return de.a});var we=v(58);v.d(g,"clamp",function(){return we.a});var Re=v(59);v.d(g,"fixedBase",function(){return Re.a});var _e=v(60);v.d(g,"isDecimal",function(){return _e.a});var Ue=v(61);v.d(g,"isEven",function(){return Ue.a});var rt=v(62);v.d(g,"isInteger",function(){return rt.a});var Fe=v(63);v.d(g,"isNegative",function(){return Fe.a});var Se=v(64);v.d(g,"isNumberEqual",function(){return Se.a});var ye=v(65);v.d(g,"isOdd",function(){return ye.a});var Oe=v(66);v.d(g,"isPositive",function(){return Oe.a});var ue=v(67);v.d(g,"maxBy",function(){return ue.a});var xe=v(68);v.d(g,"minBy",function(){return xe.a});var Ae=v(69);v.d(g,"mod",function(){return Ae.a});var pe=v(70);v.d(g,"toDegree",function(){return pe.a});var be=v(71);v.d(g,"toInteger",function(){return be.a});var le=v(72);v.d(g,"toRadian",function(){return le.a});var z=v(73);v.d(g,"forIn",function(){return z.a});var ae=v(25);v.d(g,"has",function(){return ae.a});var V=v(74);v.d(g,"hasKey",function(){return V.a});var re=v(75);v.d(g,"hasValue",function(){return re.a});var te=v(20);v.d(g,"keys",function(){return te.a});var q=v(19);v.d(g,"isMatch",function(){return q.a});var ve=v(26);v.d(g,"values",function(){return ve.a});var Me=v(76);v.d(g,"lowerCase",function(){return Me.a});var De=v(77);v.d(g,"lowerFirst",function(){return De.a});var ze=v(78);v.d(g,"substitute",function(){return ze.a});var We=v(79);v.d(g,"upperCase",function(){return We.a});var He=v(80);v.d(g,"upperFirst",function(){return He.a});var $e=v(27);v.d(g,"getType",function(){return $e.a});var It=v(81);v.d(g,"isArguments",function(){return It.a});var Yt=v(0);v.d(g,"isArray",function(){return Yt.a});var rr=v(1);v.d(g,"isArrayLike",function(){return rr.a});var ir=v(82);v.d(g,"isBoolean",function(){return ir.a});var Br=v(83);v.d(g,"isDate",function(){return Br.a});var tr=v(84);v.d(g,"isError",function(){return tr.a});var ft=v(3);v.d(g,"isFunction",function(){return ft.a});var st=v(85);v.d(g,"isFinite",function(){return st.a});var Tt=v(6);v.d(g,"isNil",function(){return Tt.a});var Qe=v(86);v.d(g,"isNull",function(){return Qe.a});var it=v(5);v.d(g,"isNumber",function(){return it.a});var zt=v(13);v.d(g,"isObject",function(){return zt.a});var Qt=v(15);v.d(g,"isObjectLike",function(){return Qt.a});var Ar=v(9);v.d(g,"isPlainObject",function(){return Ar.a});var zr=v(28);v.d(g,"isPrototype",function(){return zr.a});var ct=v(87);v.d(g,"isRegExp",function(){return ct.a});var ot=v(8);v.d(g,"isString",function(){return ot.a});var xt=v(4);v.d(g,"isType",function(){return xt.a});var Bt=v(88);v.d(g,"isUndefined",function(){return Bt.a});var Ke=v(89);v.d(g,"isElement",function(){return Ke.a});var lt=v(90);v.d(g,"requestAnimationFrame",function(){return lt.a});var mt=v(91);v.d(g,"clearAnimationFrame",function(){return mt.a});var qe=v(92);v.d(g,"augment",function(){return qe.a});var yt=v(93);v.d(g,"clone",function(){return yt.a});var qt=v(94);v.d(g,"debounce",function(){return qt.a});var Er=v(95);v.d(g,"memoize",function(){return Er.a});var Zr=v(96);v.d(g,"deepMix",function(){return Zr.a});var Dr=v(2);v.d(g,"each",function(){return Dr.a});var Cr=v(97);v.d(g,"extend",function(){return Cr.a});var mn=v(98);v.d(g,"indexOf",function(){return mn.a});var xn=v(99);v.d(g,"isEmpty",function(){return xn.a});var lr=v(29);v.d(g,"isEqual",function(){return lr.a});var An=v(100);v.d(g,"isEqualWith",function(){return An.a});var On=v(101);v.d(g,"map",function(){return On.a});var Mt=v(102);v.d(g,"mapValues",function(){return Mt.a});var er=v(16);v.d(g,"mix",function(){return er.a}),v.d(g,"assign",function(){return er.a});var $t=v(103);v.d(g,"get",function(){return $t.a});var Tr=v(104);v.d(g,"set",function(){return Tr.a});var Mr=v(105);v.d(g,"pick",function(){return Mr.a});var Hr=v(106);v.d(g,"throttle",function(){return Hr.a});var wr=v(107);v.d(g,"toArray",function(){return wr.a});var Ur=v(10);v.d(g,"toString",function(){return Ur.a});var fn=v(108);v.d(g,"uniqueId",function(){return fn.a});var tn=v(109);v.d(g,"noop",function(){return tn.a});var Rr=v(110);v.d(g,"identity",function(){return Rr.a});var Nn=v(111);v.d(g,"size",function(){return Nn.a});var En=v(112);v.d(g,"Cache",function(){return En.a})},function(e,g,v){"use strict";var p=v(14),c=v(12),h=function(r,n){return n===void 0&&(n=[]),Object(p.a)(r,function(s){return!Object(c.a)(n,s)})};g.a=h},function(e,g,v){"use strict";var p=v(3),c=v(19),h=v(0),i=v(9);function r(n,s){if(!Object(h.a)(n))return null;var f;if(Object(p.a)(s)&&(f=s),Object(i.a)(s)&&(f=function(b){return Object(c.a)(b,s)}),f){for(var u=0;u<n.length;u+=1)if(f(n[u]))return n[u]}return null}g.a=r},function(e,g,v){"use strict";function p(c,h,i){i===void 0&&(i=0);for(var r=i;r<c.length;r++)if(h(c[r],r))return r;return-1}g.a=p},function(e,g,v){"use strict";var p=v(6),c=v(0),h=function(r,n){for(var s=null,f=0;f<r.length;f++){var u=r[f],d=u[n];if(!Object(p.a)(d)){Object(c.a)(d)?s=d[0]:s=d;break}}return s};g.a=h},function(e,g,v){"use strict";var p=v(0),c=function(i){if(!Object(p.a)(i))return[];for(var r=[],n=0;n<i.length;n++)r=r.concat(i[n]);return r};g.a=c},function(e,g,v){"use strict";var p=v(0),c=function h(i,r){if(r===void 0&&(r=[]),!Object(p.a)(i))r.push(i);else for(var n=0;n<i.length;n+=1)h(i[n],r);return r};g.a=c},function(e,g,v){"use strict";var p=v(0),c=v(14),h=function(r){if(r=Object(c.a)(r,function(d){return!isNaN(d)}),!r.length)return{min:0,max:0};if(Object(p.a)(r[0])){for(var n=[],s=0;s<r.length;s++)n=n.concat(r[s]);r=n}var f=Math.max.apply(null,r),u=Math.min.apply(null,r);return{min:u,max:f}};g.a=h},function(e,g,v){"use strict";var p=Array.prototype,c=p.splice,h=p.indexOf,i=function(n){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];for(var u=0;u<s.length;u++)for(var d=s[u],b=-1;(b=h.call(n,d))>-1;)c.call(n,b,1);return n};g.a=i},function(e,g,v){"use strict";var p=v(2),c=v(0),h=v(9),i=function(n,s,f){if(!Object(c.a)(n)&&!Object(h.a)(n))return n;var u=f;return Object(p.a)(n,function(d,b){u=s(u,d,b)}),u};g.a=i},function(e,g,v){"use strict";var p=v(1),c=v(21),h=function(r,n){var s=[];if(!Object(p.a)(r))return s;for(var f=-1,u=[],d=r.length;++f<d;){var b=r[f];n(b,f,r)&&(s.push(b),u.push(f))}return Object(c.a)(r,u),s};g.a=h},function(e,g,v){"use strict";var p=v(0),c=v(8),h=v(3);function i(r,n){var s;if(Object(h.a)(n))s=function(d,b){return n(d)-n(b)};else{var f=[];Object(c.a)(n)?f.push(n):Object(p.a)(n)&&(f=n),s=function(d,b){for(var _=0;_<f.length;_+=1){var x=f[_];if(d[x]>b[x])return 1;if(d[x]<b[x])return-1}return 0}}return r.sort(s),r}g.a=i},function(e,g,v){"use strict";var p=v(22),c=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return Object(p.a)([].concat.apply([],i))};g.a=c},function(e,g,v){"use strict";var p=v(2),c=v(0),h=v(6);g.a=function(i,r){var n=[],s={};return i.forEach(function(f){var u=f[r];Object(h.a)(u)||(Object(c.a)(u)||(u=[u]),Object(p.a)(u,function(d){s[d]||(n.push(d),s[d]=!0)}))}),n}},function(e,g,v){"use strict";g.a=c;var p=v(1);function c(h){if(Object(p.a)(h))return h[0]}},function(e,g,v){"use strict";g.a=c;var p=v(1);function c(h){if(Object(p.a)(h)){var i=h;return i[i.length-1]}}},function(e,g,v){"use strict";var p=v(0),c=v(8);function h(i,r){return Object(p.a)(i)||Object(c.a)(i)?i[0]===r:!1}g.a=h},function(e,g,v){"use strict";var p=v(0),c=v(8);function h(i,r){return Object(p.a)(i)||Object(c.a)(i)?i[i.length-1]===r:!1}g.a=h},function(e,g,v){"use strict";var p=function(h,i){for(var r=0;r<h.length;r++)if(!i(h[r],r))return!1;return!0};g.a=p},function(e,g,v){"use strict";var p=function(h,i){for(var r=0;r<h.length;r++)if(i(h[r],r))return!0;return!1};g.a=p},function(e,g,v){"use strict";var p=v(23);g.a=function(c,h){if(!h)return[c];var i=Object(p.a)(c,h),r=[];for(var n in i)r.push(i[n]);return r}},function(e,g,v){"use strict";function p(c,h){return c["_wrap_"+h]}g.a=p},function(e,g,v){"use strict";function p(c,h){if(c["_wrap_"+h])return c["_wrap_"+h];var i=function(n){c[h](n)};return c["_wrap_"+h]=i,i}g.a=p},function(e,g,v){"use strict";var p={};function c(h){var i=p[h];if(!i){for(var r=h.toString(16),n=r.length;n<6;n++)r="0"+r;i="#"+r,p[h]=i}return i}g.a=c},function(e,g,v){"use strict";var p=v(0);function c(h){var i=0,r=0,n=0,s=0;return Object(p.a)(h)?h.length===1?i=r=n=s=h[0]:h.length===2?(i=n=h[0],r=s=h[1]):h.length===3?(i=h[0],r=s=h[1],n=h[2]):(i=h[0],r=h[1],n=h[2],s=h[3]):i=r=n=s=h,{r1:i,r2:r,r3:n,r4:s}}g.a=c},function(e,g,v){"use strict";var p=function(h,i,r){return h<i?i:h>r?r:h};g.a=p},function(e,g,v){"use strict";var p=function(h,i){var r=i.toString(),n=r.indexOf(".");if(n===-1)return Math.round(h);var s=r.substr(n+1).length;return s>20&&(s=20),parseFloat(h.toFixed(s))};g.a=p},function(e,g,v){"use strict";var p=v(5),c=function(i){return Object(p.a)(i)&&i%1!=0};g.a=c},function(e,g,v){"use strict";var p=v(5),c=function(i){return Object(p.a)(i)&&i%2==0};g.a=c},function(e,g,v){"use strict";var p=v(5),c=Number.isInteger?Number.isInteger:function(h){return Object(p.a)(h)&&h%1==0};g.a=c},function(e,g,v){"use strict";var p=v(5),c=function(i){return Object(p.a)(i)&&i<0};g.a=c},function(e,g,v){"use strict";g.a=c;var p=1e-5;function c(h,i,r){return r===void 0&&(r=p),Math.abs(h-i)<r}},function(e,g,v){"use strict";var p=v(5),c=function(i){return Object(p.a)(i)&&i%2!=0};g.a=c},function(e,g,v){"use strict";var p=v(5),c=function(i){return Object(p.a)(i)&&i>0};g.a=c},function(e,g,v){"use strict";var p=v(2),c=v(0),h=v(3);g.a=function(i,r){if(!!Object(c.a)(i)){var n=i[0],s;Object(h.a)(r)?s=r(i[0]):s=i[0][r];var f;return Object(p.a)(i,function(u){Object(h.a)(r)?f=r(u):f=u[r],f>s&&(n=u,s=f)}),n}}},function(e,g,v){"use strict";var p=v(2),c=v(0),h=v(3);g.a=function(i,r){if(!!Object(c.a)(i)){var n=i[0],s;Object(h.a)(r)?s=r(i[0]):s=i[0][r];var f;return Object(p.a)(i,function(u){Object(h.a)(r)?f=r(u):f=u[r],f<s&&(n=u,s=f)}),n}}},function(e,g,v){"use strict";var p=function(h,i){return(h%i+i)%i};g.a=p},function(e,g,v){"use strict";var p=180/Math.PI,c=function(i){return p*i};g.a=c},function(e,g,v){"use strict";g.a=parseInt},function(e,g,v){"use strict";var p=Math.PI/180,c=function(i){return p*i};g.a=c},function(e,g,v){"use strict";var p=v(2);g.a=p.a},function(e,g,v){"use strict";var p=v(25);g.a=p.a},function(e,g,v){"use strict";var p=v(12),c=v(26);g.a=function(h,i){return Object(p.a)(Object(c.a)(h),i)}},function(e,g,v){"use strict";var p=v(10),c=function(i){return Object(p.a)(i).toLowerCase()};g.a=c},function(e,g,v){"use strict";var p=v(10),c=function(i){var r=Object(p.a)(i);return r.charAt(0).toLowerCase()+r.substring(1)};g.a=c},function(e,g,v){"use strict";function p(c,h){return!c||!h?c:c.replace(/\\?\{([^{}]+)\}/g,function(i,r){return i.charAt(0)==="\\"?i.slice(1):h[r]===void 0?"":h[r]})}g.a=p},function(e,g,v){"use strict";var p=v(10),c=function(i){return Object(p.a)(i).toUpperCase()};g.a=c},function(e,g,v){"use strict";var p=v(10),c=function(i){var r=Object(p.a)(i);return r.charAt(0).toUpperCase()+r.substring(1)};g.a=c},function(e,g,v){"use strict";var p=v(4),c=function(i){return Object(p.a)(i,"Arguments")};g.a=c},function(e,g,v){"use strict";var p=v(4),c=function(i){return Object(p.a)(i,"Boolean")};g.a=c},function(e,g,v){"use strict";var p=v(4),c=function(i){return Object(p.a)(i,"Date")};g.a=c},function(e,g,v){"use strict";var p=v(4),c=function(i){return Object(p.a)(i,"Error")};g.a=c},function(e,g,v){"use strict";var p=v(5);g.a=function(c){return Object(p.a)(c)&&isFinite(c)}},function(e,g,v){"use strict";var p=function(h){return h===null};g.a=p},function(e,g,v){"use strict";var p=v(4),c=function(i){return Object(p.a)(i,"RegExp")};g.a=c},function(e,g,v){"use strict";var p=function(h){return h===void 0};g.a=p},function(e,g,v){"use strict";var p=function(h){return h instanceof Element||h instanceof HTMLDocument};g.a=p},function(e,g,v){"use strict";g.a=p;function p(c){var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(i){return setTimeout(i,16)};return h(c)}},function(e,g,v){"use strict";g.a=p;function p(c){var h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;h(c)}},function(e,g,v){"use strict";var p=v(16),c=v(3),h=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var s=r[0],f=1;f<r.length;f++){var u=r[f];Object(c.a)(u)&&(u=u.prototype),Object(p.a)(s.prototype,u)}};g.a=h},function(e,g,v){"use strict";var p=v(0),c=function h(i){if(typeof i!="object"||i===null)return i;var r;if(Object(p.a)(i)){r=[];for(var n=0,s=i.length;n<s;n++)typeof i[n]=="object"&&i[n]!=null?r[n]=h(i[n]):r[n]=i[n]}else{r={};for(var f in i)typeof i[f]=="object"&&i[f]!=null?r[f]=h(i[f]):r[f]=i[f]}return r};g.a=c},function(e,g,v){"use strict";function p(c,h,i){var r;return function(){var n=this,s=arguments,f=function(){r=null,i||c.apply(n,s)},u=i&&!r;clearTimeout(r),r=setTimeout(f,h),u&&c.apply(n,s)}}g.a=p},function(e,g,v){"use strict";var p=v(3);g.a=function(c,h){if(!Object(p.a)(c))throw new TypeError("Expected a function");var i=function r(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var f=h?h.apply(this,n):n[0],u=r.cache;if(u.has(f))return u.get(f);var d=c.apply(this,n);return u.set(f,d),d};return i.cache=new Map,i}},function(e,g,v){"use strict";var p=v(0),c=v(9),h=5;function i(n,s,f,u){f=f||0,u=u||h;for(var d in s)if(s.hasOwnProperty(d)){var b=s[d];b!==null&&Object(c.a)(b)?(Object(c.a)(n[d])||(n[d]={}),f<u?i(n[d],b,f+1,u):n[d]=s[d]):Object(p.a)(b)?(n[d]=[],n[d]=n[d].concat(b)):b!==void 0&&(n[d]=b)}}var r=function(s){for(var f=[],u=1;u<arguments.length;u++)f[u-1]=arguments[u];for(var d=0;d<f.length;d+=1)i(s,f[d]);return s};g.a=r},function(e,g,v){"use strict";var p=v(16),c=v(3),h=function(r,n,s,f){Object(c.a)(n)||(s=n,n=r,r=function(){});var u=Object.create?function(b,_){return Object.create(b,{constructor:{value:_}})}:function(b,_){function x(){}x.prototype=b;var M=new x;return M.constructor=_,M},d=u(n.prototype,r);return r.prototype=Object(p.a)(d,r.prototype),r.superclass=u(n.prototype,n),Object(p.a)(d,s),Object(p.a)(r,f),r};g.a=h},function(e,g,v){"use strict";var p=v(1),c=function(i,r){if(!Object(p.a)(i))return-1;var n=Array.prototype.indexOf;if(n)return n.call(i,r);for(var s=-1,f=0;f<i.length;f++)if(i[f]===r){s=f;break}return s};g.a=c},function(e,g,v){"use strict";var p=v(6),c=v(1),h=v(27),i=v(28),r=Object.prototype.hasOwnProperty;function n(s){if(Object(p.a)(s))return!0;if(Object(c.a)(s))return!s.length;var f=Object(h.a)(s);if(f==="Map"||f==="Set")return!s.size;if(Object(i.a)(s))return!Object.keys(s).length;for(var u in s)if(r.call(s,u))return!1;return!0}g.a=n},function(e,g,v){"use strict";var p=v(3),c=v(29);g.a=function(h,i,r){return Object(p.a)(r)?!!r(h,i):Object(c.a)(h,i)}},function(e,g,v){"use strict";var p=v(2),c=v(1),h=function(r,n){if(!Object(c.a)(r))return r;var s=[];return Object(p.a)(r,function(f,u){s.push(n(f,u))}),s};g.a=h},function(e,g,v){"use strict";var p=v(6),c=v(13),h=function(r){return r};g.a=function(i,r){r===void 0&&(r=h);var n={};return Object(c.a)(i)&&!Object(p.a)(i)&&Object.keys(i).forEach(function(s){n[s]=r(i[s],s)}),n}},function(e,g,v){"use strict";var p=v(8);g.a=function(c,h,i){for(var r=0,n=Object(p.a)(h)?h.split("."):h;c&&r<n.length;)c=c[n[r++]];return c===void 0||r<n.length?i:c}},function(e,g,v){"use strict";var p=v(13),c=v(8),h=v(5);g.a=function(i,r,n){var s=i,f=Object(c.a)(r)?r.split("."):r;return f.forEach(function(u,d){d<f.length-1?(Object(p.a)(s[u])||(s[u]=Object(h.a)(f[d+1])?[]:{}),s=s[u]):s[u]=n}),i}},function(e,g,v){"use strict";var p=v(2),c=v(9),h=Object.prototype.hasOwnProperty;g.a=function(i,r){if(i===null||!Object(c.a)(i))return{};var n={};return Object(p.a)(r,function(s){h.call(i,s)&&(n[s]=i[s])}),n}},function(e,g,v){"use strict";g.a=function(p,c,h){var i,r,n,s,f=0;h||(h={});var u=function(){f=h.leading===!1?0:Date.now(),i=null,s=p.apply(r,n),i||(r=n=null)},d=function(){var _=Date.now();!f&&h.leading===!1&&(f=_);var x=c-(_-f);return r=this,n=arguments,x<=0||x>c?(i&&(clearTimeout(i),i=null),f=_,s=p.apply(r,n),i||(r=n=null)):!i&&h.trailing!==!1&&(i=setTimeout(u,x)),s};return d.cancel=function(){clearTimeout(i),f=0,i=r=n=null},d}},function(e,g,v){"use strict";var p=v(1);g.a=function(c){return Object(p.a)(c)?Array.prototype.slice.call(c):[]}},function(e,g,v){"use strict";var p={};g.a=function(c){return c=c||"g",p[c]?p[c]+=1:p[c]=1,c+p[c]}},function(e,g,v){"use strict";g.a=function(){}},function(e,g,v){"use strict";g.a=function(p){return p}},function(e,g,v){"use strict";g.a=h;var p=v(6),c=v(1);function h(i){return Object(p.a)(i)?0:Object(c.a)(i)?i.length:Object.keys(i).length}},function(e,g,v){"use strict";var p=function(){function c(){this.map={}}return c.prototype.has=function(h){return this.map[h]!==void 0},c.prototype.get=function(h,i){var r=this.map[h];return r===void 0?i:r},c.prototype.set=function(h,i){this.map[h]=i},c.prototype.clear=function(){this.map={}},c.prototype.delete=function(h){delete this.map[h]},c.prototype.size=function(){return Object.keys(this.map).length},c}();g.a=p},function(e,g){function v(n,s,f,u){u===void 0&&(u=[]);var d=this;d.w=n||0,d.h=s||0,d.y=f||0,d.x=0,d.c=u||[],d.cs=u.length,d.prelim=0,d.mod=0,d.shift=0,d.change=0,d.tl=null,d.tr=null,d.el=null,d.er=null,d.msel=0,d.mser=0}v.fromNode=function(n,s){if(!n)return null;var f=[];return n.children.forEach(function(u){f.push(v.fromNode(u,s))}),s?new v(n.height,n.width,n.x,f):new v(n.width,n.height,n.y,f)};function p(n,s,f){f?n.y+=s:n.x+=s,n.children.forEach(function(u){p(u,s,f)})}function c(n,s){var f=s?n.y:n.x;return n.children.forEach(function(u){f=Math.min(c(u,s),f)}),f}function h(n,s){var f=c(n,s);p(n,-f,s)}function i(n,s,f){f?s.y=n.x:s.x=n.x,n.c.forEach(function(u,d){i(u,s.children[d],f)})}function r(n,s,f){f===void 0&&(f=0),s?(n.x=f,f+=n.width):(n.y=f,f+=n.height),n.children.forEach(function(u){r(u,s,f)})}e.exports=function(n,s){s===void 0&&(s={});var f=s.isHorizontal;function u(H){if(H.cs===0){d(H);return}u(H.c[0]);for(var J=N(P(H.c[0].el),0,null),Q=1;Q<H.cs;++Q){u(H.c[Q]);var ne=P(H.c[Q].er);b(H,Q,J),J=N(ne,Q,J)}w(H),d(H)}function d(H){H.cs===0?(H.el=H,H.er=H,H.msel=H.mser=0):(H.el=H.c[0].el,H.msel=H.c[0].msel,H.er=H.c[H.cs-1].er,H.mser=H.c[H.cs-1].mser)}function b(H,J,Q){for(var ne=H.c[J-1],K=ne.mod,ie=H.c[J],de=ie.mod;ne!==null&&ie!==null;){P(ne)>Q.low&&(Q=Q.nxt);var we=K+ne.prelim+ne.w-(de+ie.prelim);we>0&&(de+=we,_(H,J,Q.index,we));var Re=P(ne),_e=P(ie);Re<=_e&&(ne=M(ne),ne!==null&&(K+=ne.mod)),Re>=_e&&(ie=x(ie),ie!==null&&(de+=ie.mod))}!ne&&!!ie?C(H,J,ie,de):!!ne&&!ie&&O(H,J,ne,K)}function _(H,J,Q,ne){H.c[J].mod+=ne,H.c[J].msel+=ne,H.c[J].mser+=ne,I(H,J,Q,ne)}function x(H){return H.cs===0?H.tl:H.c[0]}function M(H){return H.cs===0?H.tr:H.c[H.cs-1]}function P(H){return H.y+H.h}function C(H,J,Q,ne){var K=H.c[0].el;K.tl=Q;var ie=ne-Q.mod-H.c[0].msel;K.mod+=ie,K.prelim-=ie,H.c[0].el=H.c[J].el,H.c[0].msel=H.c[J].msel}function O(H,J,Q,ne){var K=H.c[J].er;K.tr=Q;var ie=ne-Q.mod-H.c[J].mser;K.mod+=ie,K.prelim-=ie,H.c[J].er=H.c[J-1].er,H.c[J].mser=H.c[J-1].mser}function w(H){H.prelim=(H.c[0].prelim+H.c[0].mod+H.c[H.cs-1].mod+H.c[H.cs-1].prelim+H.c[H.cs-1].w)/2-H.w/2}function S(H,J){J+=H.mod,H.x=H.prelim+J,j(H);for(var Q=0;Q<H.cs;Q++)S(H.c[Q],J)}function I(H,J,Q,ne){if(Q!==J-1){var K=J-Q;H.c[Q+1].shift+=ne/K,H.c[J].shift-=ne/K,H.c[J].change-=ne-ne/K}}function j(H){for(var J=0,Q=0,ne=0;ne<H.cs;ne++)J+=H.c[ne].shift,Q+=J+H.c[ne].change,H.c[ne].mod+=Q}function N(H,J,Q){for(;Q!==null&&H>=Q.low;)Q=Q.nxt;return{low:H,index:J,nxt:Q}}r(n,f);var W=v.fromNode(n,f);return u(W),S(W,0),i(W,n,f),h(n,f),n}},function(e,g,v){function p(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,u.__proto__=d}var c=v(11),h=v(115),i=v(17),r=v(7),n=function(u){p(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b.execute=function(){var x=this;return x.rootNode.width=0,i(x.rootNode,x.options,h)},d}(c),s={};function f(u,d){return d=r.assign({},s,d),new n(u,d).execute()}e.exports=f},function(e,g,v){var p=v(7);function c(r,n){r===void 0&&(r=0),n===void 0&&(n=[]);var s=this;s.x=s.y=0,s.leftChild=s.rightChild=null,s.height=0,s.children=n}var h={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function i(r,n,s){s?(n.x=r.x,n.y=r.y):(n.x=r.y,n.y=r.x),r.children.forEach(function(f,u){i(f,n.children[u],s)})}e.exports=function(r,n){n===void 0&&(n={}),n=p.assign({},h,n);var s=0;function f(x){if(!x)return null;x.width=0,x.depth&&x.depth>s&&(s=x.depth);var M=x.children,P=M.length,C=new c(x.height,[]);return M.forEach(function(O,w){var S=f(O);C.children.push(S),w===0&&(C.leftChild=S),w===P-1&&(C.rightChild=S)}),C.originNode=x,C.isLeaf=x.isLeaf(),C}function u(x){if(x.isLeaf||x.children.length===0)x.drawingDepth=s;else{var M=x.children.map(function(C){return u(C)}),P=Math.min.apply(null,M);x.drawingDepth=P-1}return x.drawingDepth}var d;function b(x){x.x=x.drawingDepth*n.rankSep,x.isLeaf?(x.y=0,d&&(x.y=d.y+d.height+n.nodeSep,x.originNode.parent!==d.originNode.parent&&(x.y+=n.subTreeSep)),d=x):(x.children.forEach(function(M){b(M)}),x.y=(x.leftChild.y+x.rightChild.y)/2)}var _=f(r);return u(_),b(_),i(_,r,n.isHorizontal),r}},function(e,g,v){function p(b,_){b.prototype=Object.create(_.prototype),b.prototype.constructor=b,b.__proto__=_}var c=v(11),h=v(117),i=v(30),r=v(7),n=["LR","RL","H"],s=n[0],f=function(b){p(_,b);function _(){return b.apply(this,arguments)||this}var x=_.prototype;return x.execute=function(){var P=this,C=P.options,O=P.rootNode;C.isHorizontal=!0;var w=C.indent,S=w===void 0?20:w,I=C.dropCap,j=I===void 0?!0:I,N=C.direction||s;if(N&&n.indexOf(N)===-1)throw new TypeError("Invalid direction: "+N);if(N===n[0])h(O,S,j);else if(N===n[1])h(O,S,j),O.right2left();else if(N===n[2]){var W=i(O,C),H=W.left,J=W.right;h(H,S,j),H.right2left(),h(J,S,j);var Q=H.getBoundingBox();J.translate(Q.width,0),O.x=J.x-O.width/2}return O},_}(c),u={};function d(b,_){return _=r.assign({},u,_),new f(b,_).execute()}e.exports=d},function(e,g){function v(p,c,h,i){if(!i)try{if(p.id===p.parent.children[0].id){p.x+=h*p.depth,p.y=c?c.y:0;return}}catch(r){}p.x+=h*p.depth,p.y=c?c.y+c.height:0}e.exports=function(p,c,h){var i=null;p.eachNode(function(r){v(r,i,c,h),i=r})}},function(e,g,v){function p(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,u.__proto__=d}var c=v(11),h=v(119),i=v(17),r=v(7),n=function(u){p(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b.execute=function(){var x=this;return i(x.rootNode,x.options,h)},d}(c),s={};function f(u,d){return d=r.assign({},s,d),new n(u,d).execute()}e.exports=f},function(e,g,v){var p=v(7);function c(r,n){var s=0;return r.children.length?r.children.forEach(function(f){s+=c(f,n)}):s=r.height,r._subTreeSep=n.getSubTreeSep(r.data),r.totalHeight=Math.max(r.height,s)+2*r._subTreeSep,r.totalHeight}function h(r){var n=r.children,s=n.length;if(s){n.forEach(function(x){h(x)});var f=n[0],u=n[s-1],d=u.y-f.y+u.height,b=0;if(n.forEach(function(x){b+=x.totalHeight}),d>r.height)r.y=f.y+d/2-r.height/2;else if(n.length!==1||r.height>b){var _=r.y+(r.height-d)/2-f.y;n.forEach(function(x){x.translate(0,_)})}else r.y=(f.y+f.height/2+u.y+u.height/2)/2-r.height/2}}var i={getSubTreeSep:function(){return 0}};e.exports=function(r,n){n===void 0&&(n={}),n=p.assign({},i,n),r.parent={x:0,width:0,height:0,y:0},r.BFTraverse(function(s){s.x=s.parent.x+s.parent.width}),r.parent=null,c(r,n),r.startY=0,r.y=r.totalHeight/2-r.height/2,r.eachNode(function(s){var f=s.children,u=f.length;if(u){var d=f[0];if(d.startY=s.startY+s._subTreeSep,u===1)d.y=s.y+s.height/2-d.height/2;else{d.y=d.startY+d.totalHeight/2-d.height/2;for(var b=1;b<u;b++){var _=f[b];_.startY=f[b-1].startY+f[b-1].totalHeight,_.y=_.startY+_.totalHeight/2-_.height/2}}}}),h(r)}}])})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),v=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];for(var i=c[0],r=1;r<c.length;r++){var n=c[r];g.default(n)&&(n=n.prototype),e.default(i.prototype,n)}};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(){function g(){this.map={}}return g.prototype.has=function(v){return this.map[v]!==void 0},g.prototype.get=function(v,p){var c=this.map[v];return c===void 0?p:c},g.prototype.set=function(v,p){this.map[v]=p},g.prototype.clear=function(){this.map={}},g.prototype.delete=function(v){delete this.map[v]},g.prototype.size=function(){return Object.keys(this.map).length},g}();L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v,p,c){return v<p?p:v>c?c:v};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g){var v=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;v(g)}L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=function v(p){if(typeof p!="object"||p===null)return p;var c;if(e.default(p)){c=[];for(var h=0,i=p.length;h<i;h++)typeof p[h]=="object"&&p[h]!=null?c[h]=v(p[h]):c[h]=p[h]}else{c={};for(var r in p)typeof p[r]=="object"&&p[r]!=null?c[r]=v(p[r]):c[r]=p[r]}return c};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),g=function(p,c){return e.default(p)?p.indexOf(c)>-1:!1};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g,v,p){var c;return function(){var h=this,i=arguments,r=function(){c=null,p||g.apply(h,i)},n=p&&!c;clearTimeout(c),c=setTimeout(r,v),n&&g.apply(h,i)}}L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),v=5;function p(h,i,r,n){r=r||0,n=n||v;for(var s in i)if(i.hasOwnProperty(s)){var f=i[s];f!==null&&g.default(f)?(g.default(h[s])||(h[s]={}),r<n?p(h[s],f,r+1,n):h[s]=i[s]):e.default(f)?(h[s]=[],h[s]=h[s].concat(f)):f!==void 0&&(h[s]=f)}}var c=function(i){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];for(var s=0;s<r.length;s+=1)p(i,r[s]);return i};L.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),v=function(c,h){return h===void 0&&(h=[]),e.default(c,function(i){return!g.default(h,i)})};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");function v(p,c){if(!!p){var h;if(e.default(p))for(var i=0,r=p.length;i<r&&(h=c(p[i],i),h!==!1);i++);else if(g.default(p)){for(var n in p)if(p.hasOwnProperty(n)&&(h=c(p[n],n),h===!1))break}}}L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function v(p,c){return e.default(p)||g.default(p)?p[p.length-1]===c:!1}L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v,p){for(var c=0;c<v.length;c++)if(!p(v[c],c))return!1;return!0};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),v=function(c,h,i,r){g.default(h)||(i=h,h=c,c=function(){});var n=Object.create?function(f,u){return Object.create(f,{constructor:{value:u}})}:function(f,u){function d(){}d.prototype=f;var b=new d;return b.constructor=u,b},s=n(h.prototype,c);return c.prototype=e.default(s,c.prototype),c.superclass=n(h.prototype,h),e.default(s,i),e.default(c,r),c};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),g=function(p,c){if(!e.default(p))return p;for(var h=[],i=0;i<p.length;i++){var r=p[i];c(r,i)&&h.push(r)}return h};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g,v,p){p===void 0&&(p=0);for(var c=p;c<g.length;c++)if(v(g[c],c))return c;return-1}L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),p=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");function c(h,i){if(!v.default(h))return null;var r;if(e.default(i)&&(r=i),p.default(i)&&(r=function(f){return g.default(f,i)}),r){for(var n=0;n<h.length;n+=1)if(r(h[n]))return h[n]}return null}L.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),v=function(c,h){for(var i=null,r=0;r<c.length;r++){var n=c[r],s=n[h];if(!e.default(s)){g.default(s)?i=s[0]:i=s;break}}return i};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v,p){var c=p.toString(),h=c.indexOf(".");if(h===-1)return Math.round(v);var i=c.substr(h+1).length;return i>20&&(i=20),parseFloat(v.toFixed(i))};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=function v(p,c){if(c===void 0&&(c=[]),!e.default(p))c.push(p);else for(var h=0;h<p.length;h+=1)v(p[h],c);return c};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=function(p){if(!e.default(p))return[];for(var c=[],h=0;h<p.length;h++)c=c.concat(p[h]);return c};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");L.default=e.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=function(p){var c=p.filter(function(s){return!isNaN(s)});if(!c.length)return{min:0,max:0};if(e.default(p[0])){for(var h=[],i=0;i<p.length;i++)h=h.concat(p[i]);c=h}var r=Math.max.apply(null,c),n=Math.min.apply(null,c);return{min:n,max:r}};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e={}.toString,g=function(p){return e.call(p).replace(/^\[object /,"").replace(/]$/,"")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g,v){return g["_wrap_"+v]}L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");L.default=function(g,v,p){for(var c=0,h=e.default(v)?v.split("."):v;g&&c<h.length;)g=g[h[c++]];return g===void 0||c<h.length?p:g}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),v=Object.prototype.hasOwnProperty;function p(c,h){if(!h||!e.default(c))return{};for(var i={},r=g.default(h)?h:function(u){return u[h]},n,s=0;s<c.length;s++){var f=c[s];n=r(f),v.call(i,n)?i[n].push(f):i[n]=[f]}return i}L.default=p},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js"),p=function(h,i){if(!i)return{0:h};if(!g.default(i)){var r=e.default(i)?i:i.replace(/\s+/g,"").split("*");i=function(f){for(var u="_",d=0,b=r.length;d<b;d++)u+=f[r[d]]&&f[r[d]].toString();return u}}var n=v.default(h,i);return n};L.default=p},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");L.default=function(g,v){if(!v)return[g];var p=e.default(g,v),c=[];for(var h in p)c.push(p[h]);return c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");L.default=e.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");L.default=function(v,p){return e.default(g.default(v),p)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e,g){return e.hasOwnProperty(g)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function g(v){if(e.default(v))return v[0]}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e){return e}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),g=function(p,c){if(!e.default(p))return-1;var h=Array.prototype.indexOf;if(h)return h.call(p,c);for(var i=-1,r=0;r<p.length;r++)if(p[r]===c){i=r;break}return i};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js");Object.defineProperty(L,"contains",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(L,"includes",{enumerable:!0,get:function(){return e.default}});var g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js");Object.defineProperty(L,"difference",{enumerable:!0,get:function(){return g.default}});var v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js");Object.defineProperty(L,"find",{enumerable:!0,get:function(){return v.default}});var p=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js");Object.defineProperty(L,"findIndex",{enumerable:!0,get:function(){return p.default}});var c=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js");Object.defineProperty(L,"firstValue",{enumerable:!0,get:function(){return c.default}});var h=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js");Object.defineProperty(L,"flatten",{enumerable:!0,get:function(){return h.default}});var i=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js");Object.defineProperty(L,"flattenDeep",{enumerable:!0,get:function(){return i.default}});var r=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js");Object.defineProperty(L,"getRange",{enumerable:!0,get:function(){return r.default}});var n=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js");Object.defineProperty(L,"pull",{enumerable:!0,get:function(){return n.default}});var s=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js");Object.defineProperty(L,"pullAt",{enumerable:!0,get:function(){return s.default}});var f=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js");Object.defineProperty(L,"reduce",{enumerable:!0,get:function(){return f.default}});var u=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js");Object.defineProperty(L,"remove",{enumerable:!0,get:function(){return u.default}});var d=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js");Object.defineProperty(L,"sortBy",{enumerable:!0,get:function(){return d.default}});var b=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js");Object.defineProperty(L,"union",{enumerable:!0,get:function(){return b.default}});var _=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js");Object.defineProperty(L,"uniq",{enumerable:!0,get:function(){return _.default}});var x=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js");Object.defineProperty(L,"valuesOfKey",{enumerable:!0,get:function(){return x.default}});var M=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js");Object.defineProperty(L,"head",{enumerable:!0,get:function(){return M.default}});var P=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js");Object.defineProperty(L,"last",{enumerable:!0,get:function(){return P.default}});var C=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js");Object.defineProperty(L,"startsWith",{enumerable:!0,get:function(){return C.default}});var O=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js");Object.defineProperty(L,"endsWith",{enumerable:!0,get:function(){return O.default}});var w=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js");Object.defineProperty(L,"filter",{enumerable:!0,get:function(){return w.default}});var S=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js");Object.defineProperty(L,"every",{enumerable:!0,get:function(){return S.default}});var I=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js");Object.defineProperty(L,"some",{enumerable:!0,get:function(){return I.default}});var j=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js");Object.defineProperty(L,"group",{enumerable:!0,get:function(){return j.default}});var N=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js");Object.defineProperty(L,"groupBy",{enumerable:!0,get:function(){return N.default}});var W=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");Object.defineProperty(L,"groupToMap",{enumerable:!0,get:function(){return W.default}});var H=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js");Object.defineProperty(L,"getWrapBehavior",{enumerable:!0,get:function(){return H.default}});var J=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js");Object.defineProperty(L,"wrapBehavior",{enumerable:!0,get:function(){return J.default}});var Q=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js");Object.defineProperty(L,"number2color",{enumerable:!0,get:function(){return Q.default}});var ne=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js");Object.defineProperty(L,"parseRadius",{enumerable:!0,get:function(){return ne.default}});var K=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js");Object.defineProperty(L,"clamp",{enumerable:!0,get:function(){return K.default}});var ie=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js");Object.defineProperty(L,"fixedBase",{enumerable:!0,get:function(){return ie.default}});var de=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js");Object.defineProperty(L,"isDecimal",{enumerable:!0,get:function(){return de.default}});var we=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js");Object.defineProperty(L,"isEven",{enumerable:!0,get:function(){return we.default}});var Re=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js");Object.defineProperty(L,"isInteger",{enumerable:!0,get:function(){return Re.default}});var _e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js");Object.defineProperty(L,"isNegative",{enumerable:!0,get:function(){return _e.default}});var Ue=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js");Object.defineProperty(L,"isNumberEqual",{enumerable:!0,get:function(){return Ue.default}});var rt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js");Object.defineProperty(L,"isOdd",{enumerable:!0,get:function(){return rt.default}});var Fe=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js");Object.defineProperty(L,"isPositive",{enumerable:!0,get:function(){return Fe.default}});var Se=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js");Object.defineProperty(L,"maxBy",{enumerable:!0,get:function(){return Se.default}});var ye=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js");Object.defineProperty(L,"minBy",{enumerable:!0,get:function(){return ye.default}});var Oe=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js");Object.defineProperty(L,"mod",{enumerable:!0,get:function(){return Oe.default}});var ue=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js");Object.defineProperty(L,"toDegree",{enumerable:!0,get:function(){return ue.default}});var xe=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js");Object.defineProperty(L,"toInteger",{enumerable:!0,get:function(){return xe.default}});var Ae=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js");Object.defineProperty(L,"toRadian",{enumerable:!0,get:function(){return Ae.default}});var pe=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js");Object.defineProperty(L,"forIn",{enumerable:!0,get:function(){return pe.default}});var be=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");Object.defineProperty(L,"has",{enumerable:!0,get:function(){return be.default}});var le=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js");Object.defineProperty(L,"hasKey",{enumerable:!0,get:function(){return le.default}});var z=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js");Object.defineProperty(L,"hasValue",{enumerable:!0,get:function(){return z.default}});var ae=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");Object.defineProperty(L,"keys",{enumerable:!0,get:function(){return ae.default}});var V=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js");Object.defineProperty(L,"isMatch",{enumerable:!0,get:function(){return V.default}});var re=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");Object.defineProperty(L,"values",{enumerable:!0,get:function(){return re.default}});var te=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js");Object.defineProperty(L,"lowerCase",{enumerable:!0,get:function(){return te.default}});var q=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js");Object.defineProperty(L,"lowerFirst",{enumerable:!0,get:function(){return q.default}});var ve=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js");Object.defineProperty(L,"substitute",{enumerable:!0,get:function(){return ve.default}});var Me=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js");Object.defineProperty(L,"upperCase",{enumerable:!0,get:function(){return Me.default}});var De=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js");Object.defineProperty(L,"upperFirst",{enumerable:!0,get:function(){return De.default}});var ze=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js");Object.defineProperty(L,"getType",{enumerable:!0,get:function(){return ze.default}});var We=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js");Object.defineProperty(L,"isArguments",{enumerable:!0,get:function(){return We.default}});var He=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");Object.defineProperty(L,"isArray",{enumerable:!0,get:function(){return He.default}});var $e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");Object.defineProperty(L,"isArrayLike",{enumerable:!0,get:function(){return $e.default}});var It=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js");Object.defineProperty(L,"isBoolean",{enumerable:!0,get:function(){return It.default}});var Yt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js");Object.defineProperty(L,"isDate",{enumerable:!0,get:function(){return Yt.default}});var rr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js");Object.defineProperty(L,"isError",{enumerable:!0,get:function(){return rr.default}});var ir=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");Object.defineProperty(L,"isFunction",{enumerable:!0,get:function(){return ir.default}});var Br=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js");Object.defineProperty(L,"isFinite",{enumerable:!0,get:function(){return Br.default}});var tr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");Object.defineProperty(L,"isNil",{enumerable:!0,get:function(){return tr.default}});var ft=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js");Object.defineProperty(L,"isNull",{enumerable:!0,get:function(){return ft.default}});var st=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");Object.defineProperty(L,"isNumber",{enumerable:!0,get:function(){return st.default}});var Tt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");Object.defineProperty(L,"isObject",{enumerable:!0,get:function(){return Tt.default}});var Qe=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js");Object.defineProperty(L,"isObjectLike",{enumerable:!0,get:function(){return Qe.default}});var it=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");Object.defineProperty(L,"isPlainObject",{enumerable:!0,get:function(){return it.default}});var zt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js");Object.defineProperty(L,"isPrototype",{enumerable:!0,get:function(){return zt.default}});var Qt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js");Object.defineProperty(L,"isRegExp",{enumerable:!0,get:function(){return Qt.default}});var Ar=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");Object.defineProperty(L,"isString",{enumerable:!0,get:function(){return Ar.default}});var zr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");Object.defineProperty(L,"isType",{enumerable:!0,get:function(){return zr.default}});var ct=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js");Object.defineProperty(L,"isUndefined",{enumerable:!0,get:function(){return ct.default}});var ot=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js");Object.defineProperty(L,"isElement",{enumerable:!0,get:function(){return ot.default}});var xt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js");Object.defineProperty(L,"requestAnimationFrame",{enumerable:!0,get:function(){return xt.default}});var Bt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js");Object.defineProperty(L,"clearAnimationFrame",{enumerable:!0,get:function(){return Bt.default}});var Ke=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js");Object.defineProperty(L,"augment",{enumerable:!0,get:function(){return Ke.default}});var lt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js");Object.defineProperty(L,"clone",{enumerable:!0,get:function(){return lt.default}});var mt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js");Object.defineProperty(L,"debounce",{enumerable:!0,get:function(){return mt.default}});var qe=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js");Object.defineProperty(L,"memoize",{enumerable:!0,get:function(){return qe.default}});var yt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js");Object.defineProperty(L,"deepMix",{enumerable:!0,get:function(){return yt.default}});var qt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");Object.defineProperty(L,"each",{enumerable:!0,get:function(){return qt.default}});var Er=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js");Object.defineProperty(L,"extend",{enumerable:!0,get:function(){return Er.default}});var Zr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js");Object.defineProperty(L,"indexOf",{enumerable:!0,get:function(){return Zr.default}});var Dr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js");Object.defineProperty(L,"isEmpty",{enumerable:!0,get:function(){return Dr.default}});var Cr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");Object.defineProperty(L,"isEqual",{enumerable:!0,get:function(){return Cr.default}});var mn=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js");Object.defineProperty(L,"isEqualWith",{enumerable:!0,get:function(){return mn.default}});var xn=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js");Object.defineProperty(L,"map",{enumerable:!0,get:function(){return xn.default}});var lr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js");Object.defineProperty(L,"mapValues",{enumerable:!0,get:function(){return lr.default}});var An=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js");Object.defineProperty(L,"mix",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(L,"assign",{enumerable:!0,get:function(){return An.default}});var On=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js");Object.defineProperty(L,"get",{enumerable:!0,get:function(){return On.default}});var Mt=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js");Object.defineProperty(L,"set",{enumerable:!0,get:function(){return Mt.default}});var er=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js");Object.defineProperty(L,"pick",{enumerable:!0,get:function(){return er.default}});var $t=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js");Object.defineProperty(L,"throttle",{enumerable:!0,get:function(){return $t.default}});var Tr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js");Object.defineProperty(L,"toArray",{enumerable:!0,get:function(){return Tr.default}});var Mr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js");Object.defineProperty(L,"toString",{enumerable:!0,get:function(){return Mr.default}});var Hr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js");Object.defineProperty(L,"uniqueId",{enumerable:!0,get:function(){return Hr.default}});var wr=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js");Object.defineProperty(L,"noop",{enumerable:!0,get:function(){return wr.default}});var Ur=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js");Object.defineProperty(L,"identity",{enumerable:!0,get:function(){return Ur.default}});var fn=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js");Object.defineProperty(L,"size",{enumerable:!0,get:function(){return fn.default}});var tn=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js");Object.defineProperty(L,"Cache",{enumerable:!0,get:function(){return tn.default}})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),g=function(p){return e.default(p,"Arguments")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v){return v!==null&&typeof v!="function"&&isFinite(v.length)};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");L.default=function(g){return Array.isArray?Array.isArray(g):e.default(g,"Array")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),g=function(p){return e.default(p,"Boolean")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),g=function(p){return e.default(p,"Date")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),g=function(p){return e.default(p)&&p%1!=0};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v){return v instanceof Element||v instanceof HTMLDocument};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js"),p=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js"),c=Object.prototype.hasOwnProperty;function h(i){if(e.default(i))return!0;if(g.default(i))return!i.length;var r=v.default(i);if(r==="Map"||r==="Set")return!i.size;if(p.default(i))return!Object.keys(i).length;for(var n in i)if(c.call(i,n))return!1;return!0}L.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");L.default=function(v,p,c){return e.default(c)?!!c(v,p):g.default(v,p)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),p=function c(h,i){if(h===i)return!0;if(!h||!i||v.default(h)||v.default(i))return!1;if(g.default(h)||g.default(i)){if(h.length!==i.length)return!1;for(var r=!0,n=0;n<h.length&&(r=c(h[n],i[n]),!!r);n++);return r}if(e.default(h)||e.default(i)){var s=Object.keys(h),f=Object.keys(i);if(s.length!==f.length)return!1;for(var r=!0,n=0;n<s.length&&(r=c(h[s[n]],i[s[n]]),!!r);n++);return r}return!1};L.default=p},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),g=function(p){return e.default(p,"Error")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),g=function(p){return e.default(p)&&p%2==0};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");function g(v){return e.default(v)&&isFinite(v)}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");L.default=function(g){return e.default(g,"Function")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),g=Number.isInteger?Number.isInteger:function(v){return e.default(v)&&v%1==0};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");function v(p,c){var h=g.default(c),i=h.length;if(e.default(p))return!i;for(var r=0;r<i;r+=1){var n=h[r];if(c[n]!==p[n]||!(n in p))return!1}return!0}L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),g=function(p){return e.default(p)&&p<0};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v){return v==null};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v){return v===null};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=1e-5;function g(v,p,c){return c===void 0&&(c=e),Math.abs(v-p)<c}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),g=function(p){return e.default(p,"Number")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v){return typeof v=="object"&&v!==null};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e){var g=typeof e;return e!==null&&g==="object"||g==="function"}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),g=function(p){return e.default(p)&&p%2!=0};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),v=function(c){if(!e.default(c)||!g.default(c,"Object"))return!1;if(Object.getPrototypeOf(c)===null)return!0;for(var h=c;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(c)===h};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),g=function(p){return e.default(p)&&p>0};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Object.prototype,g=function(p){var c=p&&p.constructor,h=typeof c=="function"&&c.prototype||e;return p===h};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),g=function(p){return e.default(p,"RegExp")};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");L.default=function(g){return e.default(g,"String")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e={}.toString,g=function(p,c){return e.call(p)==="[object "+c+"]"};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v){return v===void 0};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),v=Object.keys?function(p){return Object.keys(p)}:function(p){var c=[];return e.default(p,function(h,i){g.default(p)&&i==="prototype"||c.push(i)}),c};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function g(v){if(e.default(v)){var p=v;return p[p.length-1]}}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),g=function(p){return e.default(p).toLowerCase()};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),g=function(p){var c=e.default(p);return c.charAt(0).toLowerCase()+c.substring(1)};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),v=function(c){return c};L.default=function(p,c){c===void 0&&(c=v);var h={};return g.default(p)&&!e.default(p)&&Object.keys(p).forEach(function(i){h[i]=c(p[i],i)}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),g=function(p,c){if(!e.default(p))return p;for(var h=[],i=0;i<p.length;i++){var r=p[i];h.push(c(r,i))}return h};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");L.default=function(p,c){if(!!g.default(p)){var h=p[0],i;v.default(c)?i=c(p[0]):i=p[0][c];var r;return e.default(p,function(n){v.default(c)?r=c(n):r=n[c],r>i&&(h=n,i=r)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");L.default=function(g,v){if(!e.default(g))throw new TypeError("Expected a function");var p=function c(){for(var h=[],i=0;i<arguments.length;i++)h[i]=arguments[i];var r=v?v.apply(this,h):h[0],n=c.cache;if(n.has(r))return n.get(r);var s=g.apply(this,h);return n.set(r,s),s};return p.cache=new Map,p}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");L.default=function(p,c){if(!!g.default(p)){var h=p[0],i;v.default(c)?i=c(p[0]):i=p[0][c];var r;return e.default(p,function(n){v.default(c)?r=c(n):r=n[c],r<i&&(h=n,i=r)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(v,p){for(var c in p)p.hasOwnProperty(c)&&c!=="constructor"&&p[c]!==void 0&&(v[c]=p[c])}function g(v,p,c,h){return p&&e(v,p),c&&e(v,c),h&&e(v,h),v}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v,p){return(v%p+p)%p};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e={};function g(v){var p=e[v];if(!p){for(var c=v.toString(16),h=c.length;h<6;h++)c="0"+c;p="#"+c,e[v]=p}return p}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");function g(v){var p=0,c=0,h=0,i=0;return e.default(v)?v.length===1?p=c=h=i=v[0]:v.length===2?(p=h=v[0],c=i=v[1]):v.length===3?(p=v[0],c=i=v[1],h=v[2]):(p=v[0],c=v[1],h=v[2],i=v[3]):p=c=h=i=v,{r1:p,r2:c,r3:h,r4:i}}L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),v=Object.prototype.hasOwnProperty;L.default=function(p,c){if(p===null||!g.default(p))return{};var h={};return e.default(c,function(i){v.call(p,i)&&(h[i]=p[i])}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),g=Array.prototype.splice,v=function(c,h){if(!e.default(c))return[];for(var i=c?h.length:0,r=i-1;i--;){var n=void 0,s=h[i];(i===r||s!==n)&&(n=s,g.call(c,s,1))}return c};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Array.prototype,g=e.splice,v=e.indexOf,p=function(h){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];for(var n=0;n<i.length;n++)for(var s=i[n],f=-1;(f=v.call(h,s))>-1;)g.call(h,f,1);return h};L.default=p},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),p=function(h,i,r){if(!g.default(h)&&!v.default(h))return h;var n=r;return e.default(h,function(s,f){n=i(n,s,f)}),n};L.default=p},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js"),v=function(c,h){var i=[];if(!e.default(c))return i;for(var r=-1,n=[],s=c.length;++r<s;){var f=c[r];h(f,r,c)&&(i.push(f),n.push(r))}return g.default(c,n),i};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g){var v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(p){return setTimeout(p,16)};return v(g)}L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");L.default=function(p,c,h){var i=p,r=g.default(c)?c.split("."):c;return r.forEach(function(n,s){s<r.length-1?(e.default(i[n])||(i[n]=v.default(r[s+1])?[]:{}),i=i[n]):i[n]=h}),p}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function v(p){return e.default(p)?0:g.default(p)?p.length:Object.keys(p).length}L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(v,p){for(var c=0;c<v.length;c++)if(p(v[c],c))return!0;return!1};L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");function p(c,h){var i;if(v.default(h))i=function(s,f){return h(s)-h(f)};else{var r=[];g.default(h)?r.push(h):e.default(h)&&(r=h),i=function(s,f){for(var u=0;u<r.length;u+=1){var d=r[u];if(s[d]>f[d])return 1;if(s[d]<f[d])return-1}return 0}}return c.sort(i),c}L.default=p},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function v(p,c){return e.default(p)||g.default(p)?p[0]===c:!1}L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g,v){return!g||!v?g:g.replace(/\\?\{([^{}]+)\}/g,function(p,c){return p.charAt(0)==="\\"?p.slice(1):v[c]===void 0?"":v[c]})}L.default=e},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e,g,v){var p,c,h,i,r=0;v||(v={});var n=function(){r=v.leading===!1?0:Date.now(),p=null,i=e.apply(c,h),p||(c=h=null)},s=function(){var u=Date.now();!r&&v.leading===!1&&(r=u);var d=g-(u-r);return c=this,h=arguments,d<=0||d>g?(p&&(clearTimeout(p),p=null),r=u,i=e.apply(c,h),p||(c=h=null)):!p&&v.trailing!==!1&&(p=setTimeout(n,d)),i};return s.cancel=function(){clearTimeout(p),r=0,p=c=h=null},s}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");L.default=function(g){return e.default(g)?Array.prototype.slice.call(g):[]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=180/Math.PI,g=function(p){return e*p};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=parseInt},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Math.PI/180,g=function(p){return e*p};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");L.default=function(g){return e.default(g)?"":g.toString()}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js"),g=function(){for(var p=[],c=0;c<arguments.length;c++)p[c]=arguments[c];return e.default([].concat.apply([],p))};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),v=function(c){var h=[];return g.default(c,function(i){e.default(h,i)||h.push(i)}),h};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e={};L.default=function(g){return g=g||"g",e[g]?e[g]+=1:e[g]=1,g+e[g]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),g=function(p){return e.default(p).toUpperCase()};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),g=function(p){var c=e.default(p);return c.charAt(0).toUpperCase()+c.substring(1)};L.default=g},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");L.default=function(v,p){for(var c=[],h={},i=0;i<v.length;i++){var r=v[i],n=r[p];if(!g.default(n)){e.default(n)||(n=[n]);for(var s=0;s<n.length;s++){var f=n[s];h[f]||(c.push(f),h[f]=!0)}}}return c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),v=Object.values?function(p){return Object.values(p)}:function(p){var c=[];return e.default(p,function(h,i){g.default(p)&&i==="prototype"||c.push(h)}),c};L.default=v},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(g,v){if(g["_wrap_"+v])return g["_wrap_"+v];var p=function(h){g[v](h)};return g["_wrap_"+v]=p,p}L.default=e},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(B,L){B.exports=o;function o(e){var g=0,v=0,p=0,c=0;return e.map(function(h){h=h.slice();var i=h[0],r=i.toUpperCase();if(i!=r)switch(h[0]=r,i){case"a":h[6]+=p,h[7]+=c;break;case"v":h[1]+=c;break;case"h":h[1]+=p;break;default:for(var n=1;n<h.length;)h[n++]+=p,h[n++]+=c}switch(r){case"Z":p=g,c=v;break;case"H":p=h[1];break;case"V":c=h[1];break;case"M":p=g=h[1],c=v=h[2];break;default:p=h[h.length-2],c=h[h.length-1]}return h})}},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";function g(Ae,pe){return Ae<pe?-1:Ae>pe?1:Ae>=pe?0:NaN}function v(Ae){return Ae.length===1&&(Ae=p(Ae)),{left:function(be,le,z,ae){for(z==null&&(z=0),ae==null&&(ae=be.length);z<ae;){var V=z+ae>>>1;Ae(be[V],le)<0?z=V+1:ae=V}return z},right:function(be,le,z,ae){for(z==null&&(z=0),ae==null&&(ae=be.length);z<ae;){var V=z+ae>>>1;Ae(be[V],le)>0?ae=V:z=V+1}return z}}}function p(Ae){return function(pe,be){return g(Ae(pe),be)}}var c=v(g),h=c.right,i=c.left;function r(Ae,pe){pe==null&&(pe=n);for(var be=0,le=Ae.length-1,z=Ae[0],ae=new Array(le<0?0:le);be<le;)ae[be]=pe(z,z=Ae[++be]);return ae}function n(Ae,pe){return[Ae,pe]}function s(Ae,pe,be){var le=Ae.length,z=pe.length,ae=new Array(le*z),V,re,te,q;for(be==null&&(be=n),V=te=0;V<le;++V)for(q=Ae[V],re=0;re<z;++re,++te)ae[te]=be(q,pe[re]);return ae}function f(Ae,pe){return pe<Ae?-1:pe>Ae?1:pe>=Ae?0:NaN}function u(Ae){return Ae===null?NaN:+Ae}function d(Ae,pe){var be=Ae.length,le=0,z=-1,ae=0,V,re,te=0;if(pe==null)for(;++z<be;)isNaN(V=u(Ae[z]))||(re=V-ae,ae+=re/++le,te+=re*(V-ae));else for(;++z<be;)isNaN(V=u(pe(Ae[z],z,Ae)))||(re=V-ae,ae+=re/++le,te+=re*(V-ae));if(le>1)return te/(le-1)}function b(Ae,pe){var be=d(Ae,pe);return be&&Math.sqrt(be)}function _(Ae,pe){var be=Ae.length,le=-1,z,ae,V;if(pe==null){for(;++le<be;)if((z=Ae[le])!=null&&z>=z)for(ae=V=z;++le<be;)(z=Ae[le])!=null&&(ae>z&&(ae=z),V<z&&(V=z))}else for(;++le<be;)if((z=pe(Ae[le],le,Ae))!=null&&z>=z)for(ae=V=z;++le<be;)(z=pe(Ae[le],le,Ae))!=null&&(ae>z&&(ae=z),V<z&&(V=z));return[ae,V]}var x=Array.prototype,M=x.slice,P=x.map;function C(Ae){return function(){return Ae}}function O(Ae){return Ae}function w(Ae,pe,be){Ae=+Ae,pe=+pe,be=(z=arguments.length)<2?(pe=Ae,Ae=0,1):z<3?1:+be;for(var le=-1,z=Math.max(0,Math.ceil((pe-Ae)/be))|0,ae=new Array(z);++le<z;)ae[le]=Ae+le*be;return ae}var S=Math.sqrt(50),I=Math.sqrt(10),j=Math.sqrt(2);function N(Ae,pe,be){var le,z=-1,ae,V,re;if(pe=+pe,Ae=+Ae,be=+be,Ae===pe&&be>0)return[Ae];if((le=pe<Ae)&&(ae=Ae,Ae=pe,pe=ae),(re=W(Ae,pe,be))===0||!isFinite(re))return[];if(re>0)for(Ae=Math.ceil(Ae/re),pe=Math.floor(pe/re),V=new Array(ae=Math.ceil(pe-Ae+1));++z<ae;)V[z]=(Ae+z)*re;else for(Ae=Math.floor(Ae*re),pe=Math.ceil(pe*re),V=new Array(ae=Math.ceil(Ae-pe+1));++z<ae;)V[z]=(Ae-z)/re;return le&&V.reverse(),V}function W(Ae,pe,be){var le=(pe-Ae)/Math.max(0,be),z=Math.floor(Math.log(le)/Math.LN10),ae=le/Math.pow(10,z);return z>=0?(ae>=S?10:ae>=I?5:ae>=j?2:1)*Math.pow(10,z):-Math.pow(10,-z)/(ae>=S?10:ae>=I?5:ae>=j?2:1)}function H(Ae,pe,be){var le=Math.abs(pe-Ae)/Math.max(0,be),z=Math.pow(10,Math.floor(Math.log(le)/Math.LN10)),ae=le/z;return ae>=S?z*=10:ae>=I?z*=5:ae>=j&&(z*=2),pe<Ae?-z:z}function J(Ae){return Math.ceil(Math.log(Ae.length)/Math.LN2)+1}function Q(){var Ae=O,pe=_,be=J;function le(z){var ae,V=z.length,re,te=new Array(V);for(ae=0;ae<V;++ae)te[ae]=Ae(z[ae],ae,z);var q=pe(te),ve=q[0],Me=q[1],De=be(te,ve,Me);Array.isArray(De)||(De=H(ve,Me,De),De=w(Math.ceil(ve/De)*De,Me,De));for(var ze=De.length;De[0]<=ve;)De.shift(),--ze;for(;De[ze-1]>Me;)De.pop(),--ze;var We=new Array(ze+1),He;for(ae=0;ae<=ze;++ae)He=We[ae]=[],He.x0=ae>0?De[ae-1]:ve,He.x1=ae<ze?De[ae]:Me;for(ae=0;ae<V;++ae)re=te[ae],ve<=re&&re<=Me&&We[h(De,re,0,ze)].push(z[ae]);return We}return le.value=function(z){return arguments.length?(Ae=typeof z=="function"?z:C(z),le):Ae},le.domain=function(z){return arguments.length?(pe=typeof z=="function"?z:C([z[0],z[1]]),le):pe},le.thresholds=function(z){return arguments.length?(be=typeof z=="function"?z:Array.isArray(z)?C(M.call(z)):C(z),le):be},le}function ne(Ae,pe,be){if(be==null&&(be=u),!!(le=Ae.length)){if((pe=+pe)<=0||le<2)return+be(Ae[0],0,Ae);if(pe>=1)return+be(Ae[le-1],le-1,Ae);var le,z=(le-1)*pe,ae=Math.floor(z),V=+be(Ae[ae],ae,Ae),re=+be(Ae[ae+1],ae+1,Ae);return V+(re-V)*(z-ae)}}function K(Ae,pe,be){return Ae=P.call(Ae,u).sort(g),Math.ceil((be-pe)/(2*(ne(Ae,.75)-ne(Ae,.25))*Math.pow(Ae.length,-1/3)))}function ie(Ae,pe,be){return Math.ceil((be-pe)/(3.5*b(Ae)*Math.pow(Ae.length,-1/3)))}function de(Ae,pe){var be=Ae.length,le=-1,z,ae;if(pe==null){for(;++le<be;)if((z=Ae[le])!=null&&z>=z)for(ae=z;++le<be;)(z=Ae[le])!=null&&z>ae&&(ae=z)}else for(;++le<be;)if((z=pe(Ae[le],le,Ae))!=null&&z>=z)for(ae=z;++le<be;)(z=pe(Ae[le],le,Ae))!=null&&z>ae&&(ae=z);return ae}function we(Ae,pe){var be=Ae.length,le=be,z=-1,ae,V=0;if(pe==null)for(;++z<be;)isNaN(ae=u(Ae[z]))?--le:V+=ae;else for(;++z<be;)isNaN(ae=u(pe(Ae[z],z,Ae)))?--le:V+=ae;if(le)return V/le}function Re(Ae,pe){var be=Ae.length,le=-1,z,ae=[];if(pe==null)for(;++le<be;)isNaN(z=u(Ae[le]))||ae.push(z);else for(;++le<be;)isNaN(z=u(pe(Ae[le],le,Ae)))||ae.push(z);return ne(ae.sort(g),.5)}function _e(Ae){for(var pe=Ae.length,be,le=-1,z=0,ae,V;++le<pe;)z+=Ae[le].length;for(ae=new Array(z);--pe>=0;)for(V=Ae[pe],be=V.length;--be>=0;)ae[--z]=V[be];return ae}function Ue(Ae,pe){var be=Ae.length,le=-1,z,ae;if(pe==null){for(;++le<be;)if((z=Ae[le])!=null&&z>=z)for(ae=z;++le<be;)(z=Ae[le])!=null&&ae>z&&(ae=z)}else for(;++le<be;)if((z=pe(Ae[le],le,Ae))!=null&&z>=z)for(ae=z;++le<be;)(z=pe(Ae[le],le,Ae))!=null&&ae>z&&(ae=z);return ae}function rt(Ae,pe){for(var be=pe.length,le=new Array(be);be--;)le[be]=Ae[pe[be]];return le}function Fe(Ae,pe){if(!!(be=Ae.length)){var be,le=0,z=0,ae,V=Ae[z];for(pe==null&&(pe=g);++le<be;)(pe(ae=Ae[le],V)<0||pe(V,V)!==0)&&(V=ae,z=le);if(pe(V,V)===0)return z}}function Se(Ae,pe,be){for(var le=(be==null?Ae.length:be)-(pe=pe==null?0:+pe),z,ae;le;)ae=Math.random()*le--|0,z=Ae[le+pe],Ae[le+pe]=Ae[ae+pe],Ae[ae+pe]=z;return Ae}function ye(Ae,pe){var be=Ae.length,le=-1,z,ae=0;if(pe==null)for(;++le<be;)(z=+Ae[le])&&(ae+=z);else for(;++le<be;)(z=+pe(Ae[le],le,Ae))&&(ae+=z);return ae}function Oe(Ae){if(!(ae=Ae.length))return[];for(var pe=-1,be=Ue(Ae,ue),le=new Array(be);++pe<be;)for(var z=-1,ae,V=le[pe]=new Array(ae);++z<ae;)V[z]=Ae[z][pe];return le}function ue(Ae){return Ae.length}function xe(){return Oe(arguments)}e.bisect=h,e.bisectRight=h,e.bisectLeft=i,e.ascending=g,e.bisector=v,e.cross=s,e.descending=f,e.deviation=b,e.extent=_,e.histogram=Q,e.thresholdFreedmanDiaconis=K,e.thresholdScott=ie,e.thresholdSturges=J,e.max=de,e.mean=we,e.median=Re,e.merge=_e,e.min=Ue,e.pairs=r,e.permute=rt,e.quantile=ne,e.range=w,e.scan=Fe,e.shuffle=Se,e.sum=ye,e.ticks=N,e.tickIncrement=W,e.tickStep=H,e.transpose=Oe,e.variance=d,e.zip=xe,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js":function(B,L,o){var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(g,v){v(L)})(this,function(g){"use strict";function v(Mt,er){return Mt<er?-1:Mt>er?1:Mt>=er?0:NaN}function p(Mt){var er=Mt,$t=Mt;Mt.length===1&&(er=function(Ur,fn){return Mt(Ur)-fn},$t=c(Mt));function Tr(wr,Ur,fn,tn){for(fn==null&&(fn=0),tn==null&&(tn=wr.length);fn<tn;){var Rr=fn+tn>>>1;$t(wr[Rr],Ur)<0?fn=Rr+1:tn=Rr}return fn}function Mr(wr,Ur,fn,tn){for(fn==null&&(fn=0),tn==null&&(tn=wr.length);fn<tn;){var Rr=fn+tn>>>1;$t(wr[Rr],Ur)>0?tn=Rr:fn=Rr+1}return fn}function Hr(wr,Ur,fn,tn){fn==null&&(fn=0),tn==null&&(tn=wr.length);var Rr=Tr(wr,Ur,fn,tn-1);return Rr>fn&&er(wr[Rr-1],Ur)>-er(wr[Rr],Ur)?Rr-1:Rr}return{left:Tr,center:Hr,right:Mr}}function c(Mt){return function(er,$t){return v(Mt(er),$t)}}function h(Mt){return Mt===null?NaN:+Mt}function i(Mt,er){var $t,Tr,Mr,Hr,wr,Ur,fn,Mr,tn,Rr,Nn,En,Yn;return e.__generator(this,function(wi){switch(wi.label){case 0:if(er!==void 0)return[3,9];wi.label=1;case 1:wi.trys.push([1,6,7,8]),$t=e.__values(Mt),Tr=$t.next(),wi.label=2;case 2:return Tr.done?[3,5]:(Mr=Tr.value,Mr!=null&&(Mr=+Mr)>=Mr?[4,Mr]:[3,4]);case 3:wi.sent(),wi.label=4;case 4:return Tr=$t.next(),[3,2];case 5:return[3,8];case 6:return Hr=wi.sent(),Rr={error:Hr},[3,8];case 7:try{Tr&&!Tr.done&&(Nn=$t.return)&&Nn.call($t)}finally{if(Rr)throw Rr.error}return[7];case 8:return[3,17];case 9:wr=-1,wi.label=10;case 10:wi.trys.push([10,15,16,17]),Ur=e.__values(Mt),fn=Ur.next(),wi.label=11;case 11:return fn.done?[3,14]:(Mr=fn.value,(Mr=er(Mr,++wr,Mt))!=null&&(Mr=+Mr)>=Mr?[4,Mr]:[3,13]);case 12:wi.sent(),wi.label=13;case 13:return fn=Ur.next(),[3,11];case 14:return[3,17];case 15:return tn=wi.sent(),En={error:tn},[3,17];case 16:try{fn&&!fn.done&&(Yn=Ur.return)&&Yn.call(Ur)}finally{if(En)throw En.error}return[7];case 17:return[2]}})}var r=p(v),n=r.right,s=r.left,f=p(h).center;function u(Mt,er){var $t,Tr,Mr,Hr,wr=0;if(er===void 0)try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;tn!=null&&(tn=+tn)>=tn&&++wr}}catch(Yn){$t={error:Yn}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}else{var Rr=-1;try{for(var Nn=e.__values(Mt),En=Nn.next();!En.done;En=Nn.next()){var tn=En.value;(tn=er(tn,++Rr,Mt))!=null&&(tn=+tn)>=tn&&++wr}}catch(Yn){Mr={error:Yn}}finally{try{En&&!En.done&&(Hr=Nn.return)&&Hr.call(Nn)}finally{if(Mr)throw Mr.error}}}return wr}function d(Mt){return Mt.length|0}function b(Mt){return!(Mt>0)}function _(Mt){return typeof Mt!="object"||"length"in Mt?Mt:Array.from(Mt)}function x(Mt){return function(er){return Mt.apply(void 0,e.__spread(er))}}function M(){for(var Mt=[],er=0;er<arguments.length;er++)Mt[er]=arguments[er];var $t=typeof Mt[Mt.length-1]=="function"&&x(Mt.pop());Mt=Mt.map(_);var Tr=Mt.map(d),Mr=Mt.length-1,Hr=new Array(Mr+1).fill(0),wr=[];if(Mr<0||Tr.some(b))return wr;for(;;){wr.push(Hr.map(function(fn,tn){return Mt[tn][fn]}));for(var Ur=Mr;++Hr[Ur]===Tr[Ur];){if(Ur===0)return $t?wr.map($t):wr;Hr[Ur--]=0}}}function P(Mt,er){var $t=0,Tr=0;return Float64Array.from(Mt,er===void 0?function(Mr){return $t+=+Mr||0}:function(Mr){return $t+=+er(Mr,Tr++,Mt)||0})}function C(Mt,er){return er<Mt?-1:er>Mt?1:er>=Mt?0:NaN}function O(Mt,er){var $t,Tr,Mr,Hr,wr=0,Ur,fn=0,tn=0;if(er===void 0)try{for(var Rr=e.__values(Mt),Nn=Rr.next();!Nn.done;Nn=Rr.next()){var En=Nn.value;En!=null&&(En=+En)>=En&&(Ur=En-fn,fn+=Ur/++wr,tn+=Ur*(En-fn))}}catch(so){$t={error:so}}finally{try{Nn&&!Nn.done&&(Tr=Rr.return)&&Tr.call(Rr)}finally{if($t)throw $t.error}}else{var Yn=-1;try{for(var wi=e.__values(Mt),$a=wi.next();!$a.done;$a=wi.next()){var En=$a.value;(En=er(En,++Yn,Mt))!=null&&(En=+En)>=En&&(Ur=En-fn,fn+=Ur/++wr,tn+=Ur*(En-fn))}}catch(so){Mr={error:so}}finally{try{$a&&!$a.done&&(Hr=wi.return)&&Hr.call(wi)}finally{if(Mr)throw Mr.error}}}if(wr>1)return tn/(wr-1)}function w(Mt,er){var $t=O(Mt,er);return $t&&Math.sqrt($t)}function S(Mt,er){var $t,Tr,Mr,Hr,wr,Ur;if(er===void 0)try{for(var fn=e.__values(Mt),tn=fn.next();!tn.done;tn=fn.next()){var Rr=tn.value;Rr!=null&&(wr===void 0?Rr>=Rr&&(wr=Ur=Rr):(wr>Rr&&(wr=Rr),Ur<Rr&&(Ur=Rr)))}}catch(wi){$t={error:wi}}finally{try{tn&&!tn.done&&(Tr=fn.return)&&Tr.call(fn)}finally{if($t)throw $t.error}}else{var Nn=-1;try{for(var En=e.__values(Mt),Yn=En.next();!Yn.done;Yn=En.next()){var Rr=Yn.value;(Rr=er(Rr,++Nn,Mt))!=null&&(wr===void 0?Rr>=Rr&&(wr=Ur=Rr):(wr>Rr&&(wr=Rr),Ur<Rr&&(Ur=Rr)))}}catch(wi){Mr={error:wi}}finally{try{Yn&&!Yn.done&&(Hr=En.return)&&Hr.call(En)}finally{if(Mr)throw Mr.error}}}return[wr,Ur]}var I=function(){function Mt(){this._partials=new Float64Array(32),this._n=0}return Mt.prototype.add=function(er){for(var $t=this._partials,Tr=0,Mr=0;Mr<this._n&&Mr<32;Mr++){var Hr=$t[Mr],wr=er+Hr,Ur=Math.abs(er)<Math.abs(Hr)?er-(wr-Hr):Hr-(wr-er);Ur&&($t[Tr++]=Ur),er=wr}return $t[Tr]=er,this._n=Tr+1,this},Mt.prototype.valueOf=function(){var er=this._partials,$t=this._n,Tr,Mr,Hr,wr=0;if($t>0){for(wr=er[--$t];$t>0&&(Tr=wr,Mr=er[--$t],wr=Tr+Mr,Hr=Mr-(wr-Tr),!Hr););$t>0&&(Hr<0&&er[$t-1]<0||Hr>0&&er[$t-1]>0)&&(Mr=Hr*2,Tr=wr+Mr,Mr==Tr-wr&&(wr=Tr))}return wr},Mt}();function j(Mt,er){var $t,Tr,Mr,Hr,wr=new I;if(er===void 0)try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;(tn=+tn)&&wr.add(tn)}}catch(Yn){$t={error:Yn}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}else{var Rr=-1;try{for(var Nn=e.__values(Mt),En=Nn.next();!En.done;En=Nn.next()){var tn=En.value;(tn=+er(tn,++Rr,Mt))&&wr.add(tn)}}catch(Yn){Mr={error:Yn}}finally{try{En&&!En.done&&(Hr=Nn.return)&&Hr.call(Nn)}finally{if(Mr)throw Mr.error}}}return+wr}var N=function(Mt){e.__extends(er,Mt);function er($t,Tr){var Mr,Hr;$t===void 0&&($t=[]),Tr===void 0&&(Tr=ne);var wr=Mt.call(this)||this;Object.defineProperties(wr,{_intern:{value:new Map},_key:{value:Tr}});try{for(var Ur=e.__values($t),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=e.__read(fn.value,2),Rr=tn[0],Nn=tn[1];wr.set(Rr,Nn)}}catch(En){Mr={error:En}}finally{try{fn&&!fn.done&&(Hr=Ur.return)&&Hr.call(Ur)}finally{if(Mr)throw Mr.error}}return wr}return er.prototype.get=function($t){return Mt.prototype.get.call(this,H(this,$t))},er.prototype.has=function($t){return Mt.prototype.has.call(this,H(this,$t))},er.prototype.set=function($t,Tr){return Mt.prototype.set.call(this,J(this,$t),Tr)},er.prototype.delete=function($t){return Mt.prototype.delete.call(this,Q(this,$t))},er}(Map),W=function(Mt){e.__extends(er,Mt);function er($t,Tr){var Mr,Hr;$t===void 0&&($t=[]),Tr===void 0&&(Tr=ne);var wr=Mt.call(this)||this;Object.defineProperties(wr,{_intern:{value:new Map},_key:{value:Tr}});try{for(var Ur=e.__values($t),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;wr.add(tn)}}catch(Rr){Mr={error:Rr}}finally{try{fn&&!fn.done&&(Hr=Ur.return)&&Hr.call(Ur)}finally{if(Mr)throw Mr.error}}return wr}return er.prototype.has=function($t){return Mt.prototype.has.call(this,H(this,$t))},er.prototype.add=function($t){return Mt.prototype.add.call(this,J(this,$t))},er.prototype.delete=function($t){return Mt.prototype.delete.call(this,Q(this,$t))},er}(Set);function H(Mt,er){var $t=Mt._intern,Tr=Mt._key,Mr=Tr(er);return $t.has(Mr)?$t.get(Mr):er}function J(Mt,er){var $t=Mt._intern,Tr=Mt._key,Mr=Tr(er);return $t.has(Mr)?$t.get(Mr):($t.set(Mr,er),er)}function Q(Mt,er){var $t=Mt._intern,Tr=Mt._key,Mr=Tr(er);return $t.has(Mr)&&(er=$t.get(er),$t.delete(Mr)),er}function ne(Mt){return Mt!==null&&typeof Mt=="object"?Mt.valueOf():Mt}function K(Mt){return Mt}function ie(Mt){for(var er=[],$t=1;$t<arguments.length;$t++)er[$t-1]=arguments[$t];return Fe(Mt,K,K,er)}function de(Mt){for(var er=[],$t=1;$t<arguments.length;$t++)er[$t-1]=arguments[$t];return Fe(Mt,Array.from,K,er)}function we(Mt,er){for(var $t=[],Tr=2;Tr<arguments.length;Tr++)$t[Tr-2]=arguments[Tr];return Fe(Mt,K,er,$t)}function Re(Mt,er){for(var $t=[],Tr=2;Tr<arguments.length;Tr++)$t[Tr-2]=arguments[Tr];return Fe(Mt,Array.from,er,$t)}function _e(Mt){for(var er=[],$t=1;$t<arguments.length;$t++)er[$t-1]=arguments[$t];return Fe(Mt,K,rt,er)}function Ue(Mt){for(var er=[],$t=1;$t<arguments.length;$t++)er[$t-1]=arguments[$t];return Fe(Mt,Array.from,rt,er)}function rt(Mt){if(Mt.length!==1)throw new Error("duplicate key");return Mt[0]}function Fe(Mt,er,$t,Tr){return function Mr(Hr,wr){var Ur,fn,tn,Rr;if(wr>=Tr.length)return $t(Hr);var Nn=new N,En=Tr[wr++],Yn=-1;try{for(var wi=e.__values(Hr),$a=wi.next();!$a.done;$a=wi.next()){var so=$a.value,Po=En(so,++Yn,Hr),Ro=Nn.get(Po);Ro?Ro.push(so):Nn.set(Po,[so])}}catch(Ao){Ur={error:Ao}}finally{try{$a&&!$a.done&&(fn=wi.return)&&fn.call(wi)}finally{if(Ur)throw Ur.error}}try{for(var So=e.__values(Nn),Va=So.next();!Va.done;Va=So.next()){var ws=e.__read(Va.value,2),Po=ws[0],ps=ws[1];Nn.set(Po,Mr(ps,wr))}}catch(Ao){tn={error:Ao}}finally{try{Va&&!Va.done&&(Rr=So.return)&&Rr.call(So)}finally{if(tn)throw tn.error}}return er(Nn)}(Mt,0)}function Se(Mt,er){return Array.from(er,function($t){return Mt[$t]})}function ye(Mt){for(var er=[],$t=1;$t<arguments.length;$t++)er[$t-1]=arguments[$t];if(typeof Mt[Symbol.iterator]!="function")throw new TypeError("values is not iterable");Mt=Array.from(Mt);var Tr=e.__read(er,1),Mr=Tr[0],Hr=Mr===void 0?v:Mr;if(Hr.length===1||er.length>1){var wr=Uint32Array.from(Mt,function(Ur,fn){return fn});return er.length>1?(er=er.map(function(Ur){return Mt.map(Ur)}),wr.sort(function(Ur,fn){var tn,Rr;try{for(var Nn=e.__values(er),En=Nn.next();!En.done;En=Nn.next()){var Yn=En.value,wi=v(Yn[Ur],Yn[fn]);if(wi)return wi}}catch($a){tn={error:$a}}finally{try{En&&!En.done&&(Rr=Nn.return)&&Rr.call(Nn)}finally{if(tn)throw tn.error}}})):(Hr=Mt.map(Hr),wr.sort(function(Ur,fn){return v(Hr[Ur],Hr[fn])})),Se(Mt,wr)}return Mt.sort(Hr)}function Oe(Mt,er,$t){return(er.length===1?ye(we(Mt,er,$t),function(Tr,Mr){var Hr=e.__read(Tr,2),wr=Hr[0],Ur=Hr[1],fn=e.__read(Mr,2),tn=fn[0],Rr=fn[1];return v(Ur,Rr)||v(wr,tn)}):ye(ie(Mt,$t),function(Tr,Mr){var Hr=e.__read(Tr,2),wr=Hr[0],Ur=Hr[1],fn=e.__read(Mr,2),tn=fn[0],Rr=fn[1];return er(Ur,Rr)||v(wr,tn)})).map(function(Tr){var Mr=e.__read(Tr,1),Hr=Mr[0];return Hr})}var ue=Array.prototype,xe=ue.slice;function Ae(Mt){return function(){return Mt}}var pe=Math.sqrt(50),be=Math.sqrt(10),le=Math.sqrt(2);function z(Mt,er,$t){var Tr,Mr=-1,Hr,wr,Ur;if(er=+er,Mt=+Mt,$t=+$t,Mt===er&&$t>0)return[Mt];if((Tr=er<Mt)&&(Hr=Mt,Mt=er,er=Hr),(Ur=ae(Mt,er,$t))===0||!isFinite(Ur))return[];if(Ur>0)for(Mt=Math.ceil(Mt/Ur),er=Math.floor(er/Ur),wr=new Array(Hr=Math.ceil(er-Mt+1));++Mr<Hr;)wr[Mr]=(Mt+Mr)*Ur;else for(Ur=-Ur,Mt=Math.ceil(Mt*Ur),er=Math.floor(er*Ur),wr=new Array(Hr=Math.ceil(er-Mt+1));++Mr<Hr;)wr[Mr]=(Mt+Mr)/Ur;return Tr&&wr.reverse(),wr}function ae(Mt,er,$t){var Tr=(er-Mt)/Math.max(0,$t),Mr=Math.floor(Math.log(Tr)/Math.LN10),Hr=Tr/Math.pow(10,Mr);return Mr>=0?(Hr>=pe?10:Hr>=be?5:Hr>=le?2:1)*Math.pow(10,Mr):-Math.pow(10,-Mr)/(Hr>=pe?10:Hr>=be?5:Hr>=le?2:1)}function V(Mt,er,$t){var Tr=Math.abs(er-Mt)/Math.max(0,$t),Mr=Math.pow(10,Math.floor(Math.log(Tr)/Math.LN10)),Hr=Tr/Mr;return Hr>=pe?Mr*=10:Hr>=be?Mr*=5:Hr>=le&&(Mr*=2),er<Mt?-Mr:Mr}function re(Mt,er,$t){for(var Tr;;){var Mr=ae(Mt,er,$t);if(Mr===Tr||Mr===0||!isFinite(Mr))return[Mt,er];Mr>0?(Mt=Math.floor(Mt/Mr)*Mr,er=Math.ceil(er/Mr)*Mr):Mr<0&&(Mt=Math.ceil(Mt*Mr)/Mr,er=Math.floor(er*Mr)/Mr),Tr=Mr}}function te(Mt){return Math.ceil(Math.log(u(Mt))/Math.LN2)+1}function q(){var Mt=K,er=S,$t=te;function Tr(Mr){var Hr;Array.isArray(Mr)||(Mr=Array.from(Mr));var wr,Ur=Mr.length,fn,tn=new Array(Ur);for(wr=0;wr<Ur;++wr)tn[wr]=Mt(Mr[wr],wr,Mr);var Rr=er(tn),Nn=Rr[0],En=Rr[1],Yn=$t(tn,Nn,En);if(!Array.isArray(Yn)){var wi=En,$a=+Yn;if(er===S&&(Hr=e.__read(re(Nn,En,$a),2),Nn=Hr[0],En=Hr[1]),Yn=z(Nn,En,$a),Yn[Yn.length-1]>=En)if(wi>=En&&er===S){var so=ae(Nn,En,$a);isFinite(so)&&(so>0?En=(Math.floor(En/so)+1)*so:so<0&&(En=(Math.ceil(En*-so)+1)/-so))}else Yn.pop()}for(var Po=Yn.length;Yn[0]<=Nn;)Yn.shift(),--Po;for(;Yn[Po-1]>En;)Yn.pop(),--Po;var Ro=new Array(Po+1),So;for(wr=0;wr<=Po;++wr)So=Ro[wr]=[],So.x0=wr>0?Yn[wr-1]:Nn,So.x1=wr<Po?Yn[wr]:En;for(wr=0;wr<Ur;++wr)fn=tn[wr],Nn<=fn&&fn<=En&&Ro[n(Yn,fn,0,Po)].push(Mr[wr]);return Ro}return Tr.value=function(Mr){return arguments.length?(Mt=typeof Mr=="function"?Mr:Ae(Mr),Tr):Mt},Tr.domain=function(Mr){return arguments.length?(er=typeof Mr=="function"?Mr:Ae([Mr[0],Mr[1]]),Tr):er},Tr.thresholds=function(Mr){return arguments.length?($t=typeof Mr=="function"?Mr:Array.isArray(Mr)?Ae(xe.call(Mr)):Ae(Mr),Tr):$t},Tr}function ve(Mt,er){var $t,Tr,Mr,Hr,wr;if(er===void 0)try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;tn!=null&&(wr<tn||wr===void 0&&tn>=tn)&&(wr=tn)}}catch(Yn){$t={error:Yn}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}else{var Rr=-1;try{for(var Nn=e.__values(Mt),En=Nn.next();!En.done;En=Nn.next()){var tn=En.value;(tn=er(tn,++Rr,Mt))!=null&&(wr<tn||wr===void 0&&tn>=tn)&&(wr=tn)}}catch(Yn){Mr={error:Yn}}finally{try{En&&!En.done&&(Hr=Nn.return)&&Hr.call(Nn)}finally{if(Mr)throw Mr.error}}}return wr}function Me(Mt,er){var $t,Tr,Mr,Hr,wr;if(er===void 0)try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;tn!=null&&(wr>tn||wr===void 0&&tn>=tn)&&(wr=tn)}}catch(Yn){$t={error:Yn}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}else{var Rr=-1;try{for(var Nn=e.__values(Mt),En=Nn.next();!En.done;En=Nn.next()){var tn=En.value;(tn=er(tn,++Rr,Mt))!=null&&(wr>tn||wr===void 0&&tn>=tn)&&(wr=tn)}}catch(Yn){Mr={error:Yn}}finally{try{En&&!En.done&&(Hr=Nn.return)&&Hr.call(Nn)}finally{if(Mr)throw Mr.error}}}return wr}function De(Mt,er,$t,Tr,Mr){for($t===void 0&&($t=0),Tr===void 0&&(Tr=Mt.length-1),Mr===void 0&&(Mr=v);Tr>$t;){if(Tr-$t>600){var Hr=Tr-$t+1,wr=er-$t+1,Ur=Math.log(Hr),fn=.5*Math.exp(2*Ur/3),tn=.5*Math.sqrt(Ur*fn*(Hr-fn)/Hr)*(wr-Hr/2<0?-1:1),Rr=Math.max($t,Math.floor(er-wr*fn/Hr+tn)),Nn=Math.min(Tr,Math.floor(er+(Hr-wr)*fn/Hr+tn));De(Mt,er,Rr,Nn,Mr)}var En=Mt[er],Yn=$t,wi=Tr;for(ze(Mt,$t,er),Mr(Mt[Tr],En)>0&&ze(Mt,$t,Tr);Yn<wi;){for(ze(Mt,Yn,wi),++Yn,--wi;Mr(Mt[Yn],En)<0;)++Yn;for(;Mr(Mt[wi],En)>0;)--wi}Mr(Mt[$t],En)===0?ze(Mt,$t,wi):(++wi,ze(Mt,wi,Tr)),wi<=er&&($t=wi+1),er<=wi&&(Tr=wi-1)}return Mt}function ze(Mt,er,$t){var Tr=Mt[er];Mt[er]=Mt[$t],Mt[$t]=Tr}function We(Mt,er,$t){if(Mt=Float64Array.from(i(Mt,$t)),!!(Tr=Mt.length)){if((er=+er)<=0||Tr<2)return Me(Mt);if(er>=1)return ve(Mt);var Tr,Mr=(Tr-1)*er,Hr=Math.floor(Mr),wr=ve(De(Mt,Hr).subarray(0,Hr+1)),Ur=Me(Mt.subarray(Hr+1));return wr+(Ur-wr)*(Mr-Hr)}}function He(Mt,er,$t){if($t===void 0&&($t=h),!!(Tr=Mt.length)){if((er=+er)<=0||Tr<2)return+$t(Mt[0],0,Mt);if(er>=1)return+$t(Mt[Tr-1],Tr-1,Mt);var Tr,Mr=(Tr-1)*er,Hr=Math.floor(Mr),wr=+$t(Mt[Hr],Hr,Mt),Ur=+$t(Mt[Hr+1],Hr+1,Mt);return wr+(Ur-wr)*(Mr-Hr)}}function $e(Mt,er,$t){return Math.ceil(($t-er)/(2*(We(Mt,.75)-We(Mt,.25))*Math.pow(u(Mt),-1/3)))}function It(Mt,er,$t){return Math.ceil(($t-er)/(3.5*w(Mt)*Math.pow(u(Mt),-1/3)))}function Yt(Mt,er){var $t,Tr,Mr,Hr,wr,Ur=-1,fn=-1;if(er===void 0)try{for(var tn=e.__values(Mt),Rr=tn.next();!Rr.done;Rr=tn.next()){var Nn=Rr.value;++fn,Nn!=null&&(wr<Nn||wr===void 0&&Nn>=Nn)&&(wr=Nn,Ur=fn)}}catch(wi){$t={error:wi}}finally{try{Rr&&!Rr.done&&(Tr=tn.return)&&Tr.call(tn)}finally{if($t)throw $t.error}}else try{for(var En=e.__values(Mt),Yn=En.next();!Yn.done;Yn=En.next()){var Nn=Yn.value;(Nn=er(Nn,++fn,Mt))!=null&&(wr<Nn||wr===void 0&&Nn>=Nn)&&(wr=Nn,Ur=fn)}}catch(wi){Mr={error:wi}}finally{try{Yn&&!Yn.done&&(Hr=En.return)&&Hr.call(En)}finally{if(Mr)throw Mr.error}}return Ur}function rr(Mt,er){var $t,Tr,Mr,Hr,wr=0,Ur=0;if(er===void 0)try{for(var fn=e.__values(Mt),tn=fn.next();!tn.done;tn=fn.next()){var Rr=tn.value;Rr!=null&&(Rr=+Rr)>=Rr&&(++wr,Ur+=Rr)}}catch(wi){$t={error:wi}}finally{try{tn&&!tn.done&&(Tr=fn.return)&&Tr.call(fn)}finally{if($t)throw $t.error}}else{var Nn=-1;try{for(var En=e.__values(Mt),Yn=En.next();!Yn.done;Yn=En.next()){var Rr=Yn.value;(Rr=er(Rr,++Nn,Mt))!=null&&(Rr=+Rr)>=Rr&&(++wr,Ur+=Rr)}}catch(wi){Mr={error:wi}}finally{try{Yn&&!Yn.done&&(Hr=En.return)&&Hr.call(En)}finally{if(Mr)throw Mr.error}}}if(wr)return Ur/wr}function ir(Mt,er){return We(Mt,.5,er)}function Br(Mt){var er,$t,Tr,Mr,Hr,wr;return e.__generator(this,function(Ur){switch(Ur.label){case 0:Ur.trys.push([0,5,6,7]),er=e.__values(Mt),$t=er.next(),Ur.label=1;case 1:return $t.done?[3,4]:(Tr=$t.value,[5,e.__values(Tr)]);case 2:Ur.sent(),Ur.label=3;case 3:return $t=er.next(),[3,1];case 4:return[3,7];case 5:return Mr=Ur.sent(),Hr={error:Mr},[3,7];case 6:try{$t&&!$t.done&&(wr=er.return)&&wr.call(er)}finally{if(Hr)throw Hr.error}return[7];case 7:return[2]}})}function tr(Mt){return Array.from(Br(Mt))}function ft(Mt,er){var $t,Tr,Mr,Hr,wr,Ur=-1,fn=-1;if(er===void 0)try{for(var tn=e.__values(Mt),Rr=tn.next();!Rr.done;Rr=tn.next()){var Nn=Rr.value;++fn,Nn!=null&&(wr>Nn||wr===void 0&&Nn>=Nn)&&(wr=Nn,Ur=fn)}}catch(wi){$t={error:wi}}finally{try{Rr&&!Rr.done&&(Tr=tn.return)&&Tr.call(tn)}finally{if($t)throw $t.error}}else try{for(var En=e.__values(Mt),Yn=En.next();!Yn.done;Yn=En.next()){var Nn=Yn.value;(Nn=er(Nn,++fn,Mt))!=null&&(wr>Nn||wr===void 0&&Nn>=Nn)&&(wr=Nn,Ur=fn)}}catch(wi){Mr={error:wi}}finally{try{Yn&&!Yn.done&&(Hr=En.return)&&Hr.call(En)}finally{if(Mr)throw Mr.error}}return Ur}function st(Mt,er){var $t,Tr;er===void 0&&(er=Tt);var Mr=[],Hr,wr=!1;try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;wr&&Mr.push(er(Hr,tn)),Hr=tn,wr=!0}}catch(Rr){$t={error:Rr}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}return Mr}function Tt(Mt,er){return[Mt,er]}function Qe(Mt,er,$t){Mt=+Mt,er=+er,$t=(Mr=arguments.length)<2?(er=Mt,Mt=0,1):Mr<3?1:+$t;for(var Tr=-1,Mr=Math.max(0,Math.ceil((er-Mt)/$t))|0,Hr=new Array(Mr);++Tr<Mr;)Hr[Tr]=Mt+Tr*$t;return Hr}function it(Mt,er){var $t,Tr,Mr,Hr;er===void 0&&(er=v);var wr,Ur=!1;if(er.length===1){var fn=void 0;try{for(var tn=e.__values(Mt),Rr=tn.next();!Rr.done;Rr=tn.next()){var Nn=Rr.value,En=er(Nn);(Ur?v(En,fn)<0:v(En,En)===0)&&(wr=Nn,fn=En,Ur=!0)}}catch($a){$t={error:$a}}finally{try{Rr&&!Rr.done&&(Tr=tn.return)&&Tr.call(tn)}finally{if($t)throw $t.error}}}else try{for(var Yn=e.__values(Mt),wi=Yn.next();!wi.done;wi=Yn.next()){var En=wi.value;(Ur?er(En,wr)<0:er(En,En)===0)&&(wr=En,Ur=!0)}}catch($a){Mr={error:$a}}finally{try{wi&&!wi.done&&(Hr=Yn.return)&&Hr.call(Yn)}finally{if(Mr)throw Mr.error}}return wr}function zt(Mt,er){var $t,Tr;if(er===void 0&&(er=v),er.length===1)return ft(Mt,er);var Mr,Hr=-1,wr=-1;try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;++wr,(Hr<0?er(tn,tn)===0:er(tn,Mr)<0)&&(Mr=tn,Hr=wr)}}catch(Rr){$t={error:Rr}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}return Hr}function Qt(Mt,er){var $t,Tr,Mr,Hr;er===void 0&&(er=v);var wr,Ur=!1;if(er.length===1){var fn=void 0;try{for(var tn=e.__values(Mt),Rr=tn.next();!Rr.done;Rr=tn.next()){var Nn=Rr.value,En=er(Nn);(Ur?v(En,fn)>0:v(En,En)===0)&&(wr=Nn,fn=En,Ur=!0)}}catch($a){$t={error:$a}}finally{try{Rr&&!Rr.done&&(Tr=tn.return)&&Tr.call(tn)}finally{if($t)throw $t.error}}}else try{for(var Yn=e.__values(Mt),wi=Yn.next();!wi.done;wi=Yn.next()){var En=wi.value;(Ur?er(En,wr)>0:er(En,En)===0)&&(wr=En,Ur=!0)}}catch($a){Mr={error:$a}}finally{try{wi&&!wi.done&&(Hr=Yn.return)&&Hr.call(Yn)}finally{if(Mr)throw Mr.error}}return wr}function Ar(Mt,er){var $t,Tr;if(er===void 0&&(er=v),er.length===1)return Yt(Mt,er);var Mr,Hr=-1,wr=-1;try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;++wr,(Hr<0?er(tn,tn)===0:er(tn,Mr)>0)&&(Mr=tn,Hr=wr)}}catch(Rr){$t={error:Rr}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}return Hr}function zr(Mt,er){var $t=zt(Mt,er);return $t<0?void 0:$t}var ct=ot(Math.random);function ot(Mt){return function($t,Tr,Mr){Tr===void 0&&(Tr=0),Mr===void 0&&(Mr=$t.length);for(var Hr=Mr-(Tr=+Tr);Hr;){var wr=Mt()*Hr--|0,Ur=$t[Hr+Tr];$t[Hr+Tr]=$t[wr+Tr],$t[wr+Tr]=Ur}return $t}}function xt(Mt,er){var $t,Tr,Mr,Hr,wr=0;if(er===void 0)try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;(tn=+tn)&&(wr+=tn)}}catch(Yn){$t={error:Yn}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}else{var Rr=-1;try{for(var Nn=e.__values(Mt),En=Nn.next();!En.done;En=Nn.next()){var tn=En.value;(tn=+er(tn,++Rr,Mt))&&(wr+=tn)}}catch(Yn){Mr={error:Yn}}finally{try{En&&!En.done&&(Hr=Nn.return)&&Hr.call(Nn)}finally{if(Mr)throw Mr.error}}}return wr}function Bt(Mt){if(!(Hr=Mt.length))return[];for(var er=-1,$t=Me(Mt,Ke),Tr=new Array($t);++er<$t;)for(var Mr=-1,Hr,wr=Tr[er]=new Array(Hr);++Mr<Hr;)wr[Mr]=Mt[Mr][er];return Tr}function Ke(Mt){return Mt.length}function lt(){return Bt(arguments)}function mt(Mt,er){var $t,Tr;if(typeof er!="function")throw new TypeError("test is not a function");var Mr=-1;try{for(var Hr=e.__values(Mt),wr=Hr.next();!wr.done;wr=Hr.next()){var Ur=wr.value;if(!er(Ur,++Mr,Mt))return!1}}catch(fn){$t={error:fn}}finally{try{wr&&!wr.done&&(Tr=Hr.return)&&Tr.call(Hr)}finally{if($t)throw $t.error}}return!0}function qe(Mt,er){var $t,Tr;if(typeof er!="function")throw new TypeError("test is not a function");var Mr=-1;try{for(var Hr=e.__values(Mt),wr=Hr.next();!wr.done;wr=Hr.next()){var Ur=wr.value;if(er(Ur,++Mr,Mt))return!0}}catch(fn){$t={error:fn}}finally{try{wr&&!wr.done&&(Tr=Hr.return)&&Tr.call(Hr)}finally{if($t)throw $t.error}}return!1}function yt(Mt,er){var $t,Tr;if(typeof er!="function")throw new TypeError("test is not a function");var Mr=[],Hr=-1;try{for(var wr=e.__values(Mt),Ur=wr.next();!Ur.done;Ur=wr.next()){var fn=Ur.value;er(fn,++Hr,Mt)&&Mr.push(fn)}}catch(tn){$t={error:tn}}finally{try{Ur&&!Ur.done&&(Tr=wr.return)&&Tr.call(wr)}finally{if($t)throw $t.error}}return Mr}function qt(Mt,er){if(typeof Mt[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof er!="function")throw new TypeError("mapper is not a function");return Array.from(Mt,function($t,Tr){return er($t,Tr,Mt)})}function Er(Mt,er,$t){var Tr,Mr;if(typeof er!="function")throw new TypeError("reducer is not a function");var Hr=Mt[Symbol.iterator](),wr,Ur,fn=-1;if(arguments.length<3){if(Tr=Hr.next(),wr=Tr.done,$t=Tr.value,wr)return;++fn}for(;Mr=Hr.next(),wr=Mr.done,Ur=Mr.value,!wr;)$t=er($t,Ur,++fn,Mt);return $t}function Zr(Mt){if(typeof Mt[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(Mt).reverse()}function Dr(Mt){for(var er,$t,Tr,Mr,Hr=[],wr=1;wr<arguments.length;wr++)Hr[wr-1]=arguments[wr];Mt=new Set(Mt);try{for(var Ur=e.__values(Hr),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;try{for(var Rr=(Tr=void 0,e.__values(tn)),Nn=Rr.next();!Nn.done;Nn=Rr.next()){var En=Nn.value;Mt.delete(En)}}catch(Yn){Tr={error:Yn}}finally{try{Nn&&!Nn.done&&(Mr=Rr.return)&&Mr.call(Rr)}finally{if(Tr)throw Tr.error}}}}catch(Yn){er={error:Yn}}finally{try{fn&&!fn.done&&($t=Ur.return)&&$t.call(Ur)}finally{if(er)throw er.error}}return Mt}function Cr(Mt,er){var $t,Tr,Mr,Hr=er[Symbol.iterator](),wr=new Set;try{for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;if(wr.has(tn))return!1;for(var Rr=void 0,Nn=void 0;(Mr=Hr.next(),Rr=Mr.value,Nn=Mr.done,Mr)&&!Nn;){if(Object.is(tn,Rr))return!1;wr.add(Rr)}}}catch(En){$t={error:En}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}return!0}function mn(Mt){return Mt instanceof Set?Mt:new Set(Mt)}function xn(Mt){for(var er,$t,Tr,Mr,Hr=[],wr=1;wr<arguments.length;wr++)Hr[wr-1]=arguments[wr];Mt=new Set(Mt),Hr=Hr.map(mn);try{e:for(var Ur=e.__values(Mt),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;try{for(var Rr=(Tr=void 0,e.__values(Hr)),Nn=Rr.next();!Nn.done;Nn=Rr.next()){var En=Nn.value;if(!En.has(tn)){Mt.delete(tn);continue e}}}catch(Yn){Tr={error:Yn}}finally{try{Nn&&!Nn.done&&(Mr=Rr.return)&&Mr.call(Rr)}finally{if(Tr)throw Tr.error}}}}catch(Yn){er={error:Yn}}finally{try{fn&&!fn.done&&($t=Ur.return)&&$t.call(Ur)}finally{if(er)throw er.error}}return Mt}function lr(Mt,er){var $t,Tr,Mr,Hr=Mt[Symbol.iterator](),wr=new Set;try{for(var Ur=e.__values(er),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;if(!wr.has(tn))for(var Rr=void 0,Nn=void 0;Mr=Hr.next(),Rr=Mr.value,Nn=Mr.done,Mr;){if(Nn)return!1;if(wr.add(Rr),Object.is(tn,Rr))break}}}catch(En){$t={error:En}}finally{try{fn&&!fn.done&&(Tr=Ur.return)&&Tr.call(Ur)}finally{if($t)throw $t.error}}return!0}function An(Mt,er){return lr(er,Mt)}function On(){for(var Mt,er,$t,Tr,Mr=[],Hr=0;Hr<arguments.length;Hr++)Mr[Hr]=arguments[Hr];var wr=new Set;try{for(var Ur=e.__values(Mr),fn=Ur.next();!fn.done;fn=Ur.next()){var tn=fn.value;try{for(var Rr=($t=void 0,e.__values(tn)),Nn=Rr.next();!Nn.done;Nn=Rr.next()){var En=Nn.value;wr.add(En)}}catch(Yn){$t={error:Yn}}finally{try{Nn&&!Nn.done&&(Tr=Rr.return)&&Tr.call(Rr)}finally{if($t)throw $t.error}}}}catch(Yn){Mt={error:Yn}}finally{try{fn&&!fn.done&&(er=Ur.return)&&er.call(Ur)}finally{if(Mt)throw Mt.error}}return wr}g.Adder=I,g.InternMap=N,g.InternSet=W,g.ascending=v,g.bin=q,g.bisect=n,g.bisectCenter=f,g.bisectLeft=s,g.bisectRight=n,g.bisector=p,g.count=u,g.cross=M,g.cumsum=P,g.descending=C,g.deviation=w,g.difference=Dr,g.disjoint=Cr,g.every=mt,g.extent=S,g.filter=yt,g.fsum=j,g.greatest=Qt,g.greatestIndex=Ar,g.group=ie,g.groupSort=Oe,g.groups=de,g.histogram=q,g.index=_e,g.indexes=Ue,g.intersection=xn,g.least=it,g.leastIndex=zt,g.map=qt,g.max=ve,g.maxIndex=Yt,g.mean=rr,g.median=ir,g.merge=tr,g.min=Me,g.minIndex=ft,g.nice=re,g.pairs=st,g.permute=Se,g.quantile=We,g.quantileSorted=He,g.quickselect=De,g.range=Qe,g.reduce=Er,g.reverse=Zr,g.rollup=we,g.rollups=Re,g.scan=zr,g.shuffle=ct,g.shuffler=ot,g.some=qe,g.sort=ye,g.subset=An,g.sum=xt,g.superset=lr,g.thresholdFreedmanDiaconis=$e,g.thresholdScott=It,g.thresholdSturges=te,g.tickIncrement=ae,g.tickStep=V,g.ticks=z,g.transpose=Bt,g.union=On,g.variance=O,g.zip=lt,Object.defineProperty(g,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";var g="$";function v(){}v.prototype=p.prototype={constructor:v,has:function(M){return g+M in this},get:function(M){return this[g+M]},set:function(M,P){return this[g+M]=P,this},remove:function(M){var P=g+M;return P in this&&delete this[P]},clear:function(){for(var M in this)M[0]===g&&delete this[M]},keys:function(){var M=[];for(var P in this)P[0]===g&&M.push(P.slice(1));return M},values:function(){var M=[];for(var P in this)P[0]===g&&M.push(this[P]);return M},entries:function(){var M=[];for(var P in this)P[0]===g&&M.push({key:P.slice(1),value:this[P]});return M},size:function(){var M=0;for(var P in this)P[0]===g&&++M;return M},empty:function(){for(var M in this)if(M[0]===g)return!1;return!0},each:function(M){for(var P in this)P[0]===g&&M(this[P],P.slice(1),this)}};function p(x,M){var P=new v;if(x instanceof v)x.each(function(I,j){P.set(j,I)});else if(Array.isArray(x)){var C=-1,O=x.length,w;if(M==null)for(;++C<O;)P.set(C,x[C]);else for(;++C<O;)P.set(M(w=x[C],C,x),w)}else if(x)for(var S in x)P.set(S,x[S]);return P}function c(){var x=[],M=[],P,C,O;function w(I,j,N,W){if(j>=x.length)return P!=null&&I.sort(P),C!=null?C(I):I;for(var H=-1,J=I.length,Q=x[j++],ne,K,ie=p(),de,we=N();++H<J;)(de=ie.get(ne=Q(K=I[H])+""))?de.push(K):ie.set(ne,[K]);return ie.each(function(Re,_e){W(we,_e,w(Re,j,N,W))}),we}function S(I,j){if(++j>x.length)return I;var N,W=M[j-1];return C!=null&&j>=x.length?N=I.entries():(N=[],I.each(function(H,J){N.push({key:J,values:S(H,j)})})),W!=null?N.sort(function(H,J){return W(H.key,J.key)}):N}return O={object:function(j){return w(j,0,h,i)},map:function(j){return w(j,0,r,n)},entries:function(j){return S(w(j,0,r,n),0)},key:function(j){return x.push(j),O},sortKeys:function(j){return M[x.length-1]=j,O},sortValues:function(j){return P=j,O},rollup:function(j){return C=j,O}}}function h(){return{}}function i(x,M,P){x[M]=P}function r(){return p()}function n(x,M,P){x.set(M,P)}function s(){}var f=p.prototype;s.prototype=u.prototype={constructor:s,has:f.has,add:function(M){return M+="",this[g+M]=M,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};function u(x,M){var P=new s;if(x instanceof s)x.each(function(w){P.add(w)});else if(x){var C=-1,O=x.length;if(M==null)for(;++C<O;)P.add(x[C]);else for(;++C<O;)P.add(M(x[C],C,x))}return P}function d(x){var M=[];for(var P in x)M.push(P);return M}function b(x){var M=[];for(var P in x)M.push(x[P]);return M}function _(x){var M=[];for(var P in x)M.push({key:P,value:x[P]});return M}e.nest=c,e.set=u,e.map=p,e.keys=d,e.values=b,e.entries=_,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js":function(B,L,o){var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(g,v){v(L,o("./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js"),o("./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js"))})(this,function(g,v,p){"use strict";var c=1e-6;function h(){}var i=Infinity,r=i,n=-i,s=n,f={point:u,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h,result:function(){var Oe=[[i,r],[n,s]];return n=s=-(r=i=Infinity),Oe}};function u(ye,Oe){ye<i&&(i=ye),ye>n&&(n=ye),Oe<r&&(r=Oe),Oe>s&&(s=Oe)}function d(ye,Oe,ue){var xe=Oe[1][0]-Oe[0][0],Ae=Oe[1][1]-Oe[0][1],pe=ye.clipExtent&&ye.clipExtent();ye.scale(150).translate([0,0]),pe!=null&&ye.clipExtent(null),v.geoStream(ue,ye.stream(f));var be=f.result(),le=Math.min(xe/(be[1][0]-be[0][0]),Ae/(be[1][1]-be[0][1])),z=+Oe[0][0]+(xe-le*(be[1][0]+be[0][0]))/2,ae=+Oe[0][1]+(Ae-le*(be[1][1]+be[0][1]))/2;return pe!=null&&ye.clipExtent(pe),ye.scale(le*150).translate([z,ae])}function b(ye,Oe,ue){return d(ye,[[0,0],Oe],ue)}function _(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function x(){var ye,Oe,ue=v.geoAlbers(),xe,Ae=v.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),pe,be=v.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),le,z,ae={point:function(q,ve){z=[q,ve]}};function V(te){var q=te[0],ve=te[1];return z=null,xe.point(q,ve),z||(pe.point(q,ve),z)||(le.point(q,ve),z)}V.invert=function(te){var q=ue.scale(),ve=ue.translate(),Me=(te[0]-ve[0])/q,De=(te[1]-ve[1])/q;return(De>=.12&&De<.234&&Me>=-.425&&Me<-.214?Ae:De>=.166&&De<.234&&Me>=-.214&&Me<-.115?be:ue).invert(te)},V.stream=function(te){return ye&&Oe===te?ye:ye=_([ue.stream(Oe=te),Ae.stream(te),be.stream(te)])},V.precision=function(te){return arguments.length?(ue.precision(te),Ae.precision(te),be.precision(te),re()):ue.precision()},V.scale=function(te){return arguments.length?(ue.scale(te),Ae.scale(te*.35),be.scale(te),V.translate(ue.translate())):ue.scale()},V.translate=function(te){if(!arguments.length)return ue.translate();var q=ue.scale(),ve=+te[0],Me=+te[1];return xe=ue.translate(te).clipExtent([[ve-.455*q,Me-.238*q],[ve+.455*q,Me+.238*q]]).stream(ae),pe=Ae.translate([ve-.307*q,Me+.201*q]).clipExtent([[ve-.425*q+c,Me+.12*q+c],[ve-.214*q-c,Me+.234*q-c]]).stream(ae),le=be.translate([ve-.205*q,Me+.212*q]).clipExtent([[ve-.214*q+c,Me+.166*q+c],[ve-.115*q-c,Me+.234*q-c]]).stream(ae),re()},V.fitExtent=function(te,q){return d(V,te,q)},V.fitSize=function(te,q){return b(V,te,q)};function re(){return ye=Oe=null,V}return V.drawCompositionBorders=function(te){var q=ue([-102.91,26.3]),ve=ue([-104,27.5]),Me=ue([-108,29.1]),De=ue([-110,29.1]),ze=ue([-110,26.7]),We=ue([-112.8,27.6]),He=ue([-114.3,30.6]),$e=ue([-119.3,30.1]);te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.moveTo(ze[0],ze[1]),te.lineTo(We[0],We[1]),te.lineTo(He[0],He[1]),te.lineTo($e[0],$e[1])},V.getCompositionBorders=function(){var te=p.path();return this.drawCompositionBorders(te),te.toString()},V.scale(1070)}function M(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function P(){var ye,Oe,ue=v.geoAlbers(),xe,Ae=v.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),pe,be=v.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),le,z=v.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),ae,V=v.geoEquirectangular().rotate([173,14]),re,te=v.geoEquirectangular().rotate([-145,-16.8]),q,ve,Me={point:function(He,$e){ve=[He,$e]}};function De(We){var He=We[0],$e=We[1];return ve=null,xe.point(He,$e),ve||(pe.point(He,$e),ve)||(le.point(He,$e),ve)||(ae.point(He,$e),ve)||(re.point(He,$e),ve)||(q.point(He,$e),ve)}De.invert=function(We){var He=ue.scale(),$e=ue.translate(),It=(We[0]-$e[0])/He,Yt=(We[1]-$e[1])/He;return(Yt>=.12&&Yt<.234&&It>=-.425&&It<-.214?Ae:Yt>=.166&&Yt<.234&&It>=-.214&&It<-.115?be:Yt>=.2064&&Yt<.2413&&It>=.312&&It<.385?z:Yt>=.09&&Yt<.1197&&It>=-.4243&&It<-.3232?V:Yt>=-.0518&&Yt<.0895&&It>=-.4243&&It<-.3824?te:ue).invert(We)},De.stream=function(We){return ye&&Oe===We?ye:ye=M([ue.stream(Oe=We),Ae.stream(We),be.stream(We),z.stream(We),V.stream(We),te.stream(We)])},De.precision=function(We){return arguments.length?(ue.precision(We),Ae.precision(We),be.precision(We),z.precision(We),V.precision(We),te.precision(We),ze()):ue.precision()},De.scale=function(We){return arguments.length?(ue.scale(We),Ae.scale(We*.35),be.scale(We),z.scale(We),V.scale(We*2),te.scale(We),De.translate(ue.translate())):ue.scale()},De.translate=function(We){if(!arguments.length)return ue.translate();var He=ue.scale(),$e=+We[0],It=+We[1];return xe=ue.translate(We).clipExtent([[$e-.455*He,It-.238*He],[$e+.455*He,It+.238*He]]).stream(Me),pe=Ae.translate([$e-.307*He,It+.201*He]).clipExtent([[$e-.425*He+c,It+.12*He+c],[$e-.214*He-c,It+.233*He-c]]).stream(Me),le=be.translate([$e-.205*He,It+.212*He]).clipExtent([[$e-.214*He+c,It+.166*He+c],[$e-.115*He-c,It+.233*He-c]]).stream(Me),ae=z.translate([$e+.35*He,It+.224*He]).clipExtent([[$e+.312*He+c,It+.2064*He+c],[$e+.385*He-c,It+.233*He-c]]).stream(Me),re=V.translate([$e-.492*He,It+.09*He]).clipExtent([[$e-.4243*He+c,It+.0903*He+c],[$e-.3233*He-c,It+.1197*He-c]]).stream(Me),q=te.translate([$e-.408*He,It+.018*He]).clipExtent([[$e-.4244*He+c,It-.0519*He+c],[$e-.3824*He-c,It+.0895*He-c]]).stream(Me),ze()},De.fitExtent=function(We,He){return d(De,We,He)},De.fitSize=function(We,He){return b(De,We,He)};function ze(){return ye=Oe=null,De}return De.drawCompositionBorders=function(We){var He=ue([-110.4641,28.2805]),$e=ue([-104.0597,28.9528]),It=ue([-103.7049,25.1031]),Yt=ue([-109.8337,24.4531]),rr=ue([-124.4745,28.1407]),ir=ue([-110.931,30.8844]),Br=ue([-109.8337,24.4531]),tr=ue([-122.4628,21.8562]),ft=ue([-76.8579,25.1544]),st=ue([-72.429,24.2097]),Tt=ue([-72.8265,22.7056]),Qe=ue([-77.1852,23.6392]),it=ue([-125.0093,29.7791]),zt=ue([-118.5193,31.3262]),Qt=ue([-118.064,29.6912]),Ar=ue([-124.4369,28.169]),zr=ue([-128.1314,37.4582]),ct=ue([-125.2132,38.214]),ot=ue([-122.3616,30.5115]),xt=ue([-125.0315,29.8211]);We.moveTo(He[0],He[1]),We.lineTo($e[0],$e[1]),We.lineTo(It[0],It[1]),We.lineTo(It[0],It[1]),We.lineTo(Yt[0],Yt[1]),We.closePath(),We.moveTo(rr[0],rr[1]),We.lineTo(ir[0],ir[1]),We.lineTo(Br[0],Br[1]),We.lineTo(Br[0],Br[1]),We.lineTo(tr[0],tr[1]),We.closePath(),We.moveTo(ft[0],ft[1]),We.lineTo(st[0],st[1]),We.lineTo(Tt[0],Tt[1]),We.lineTo(Tt[0],Tt[1]),We.lineTo(Qe[0],Qe[1]),We.closePath(),We.moveTo(it[0],it[1]),We.lineTo(zt[0],zt[1]),We.lineTo(Qt[0],Qt[1]),We.lineTo(Qt[0],Qt[1]),We.lineTo(Ar[0],Ar[1]),We.closePath(),We.moveTo(zr[0],zr[1]),We.lineTo(ct[0],ct[1]),We.lineTo(ot[0],ot[1]),We.lineTo(ot[0],ot[1]),We.lineTo(xt[0],xt[1]),We.closePath()},De.getCompositionBorders=function(){var We=p.path();return this.drawCompositionBorders(We),We.toString()},De.scale(1070)}function C(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function O(){var ye,Oe,ue=v.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),xe,Ae=v.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),pe,be,le={point:function(re,te){be=[re,te]}};function z(V){var re=V[0],te=V[1];return be=null,xe.point(re,te),be||(pe.point(re,te),be)}z.invert=function(V){var re=ue.scale(),te=ue.translate(),q=(V[0]-te[0])/re,ve=(V[1]-te[1])/re;return(ve>=.05346&&ve<.0897&&q>=-.13388&&q<-.0322?Ae:ue).invert(V)},z.stream=function(V){return ye&&Oe===V?ye:ye=C([ue.stream(Oe=V),Ae.stream(V)])},z.precision=function(V){return arguments.length?(ue.precision(V),Ae.precision(V),ae()):ue.precision()},z.scale=function(V){return arguments.length?(ue.scale(V),Ae.scale(V),z.translate(ue.translate())):ue.scale()},z.translate=function(V){if(!arguments.length)return ue.translate();var re=ue.scale(),te=+V[0],q=+V[1];return xe=ue.translate(V).clipExtent([[te-.06857*re,q-.1288*re],[te+.13249*re,q+.06*re]]).stream(le),pe=Ae.translate([te+.1*re,q-.094*re]).clipExtent([[te-.1331*re+c,q+.053457*re+c],[te-.0354*re-c,q+.08969*re-c]]).stream(le),ae()},z.fitExtent=function(V,re){return d(z,V,re)},z.fitSize=function(V,re){return b(z,V,re)};function ae(){return ye=Oe=null,z}return z.drawCompositionBorders=function(V){var re=ue([-14.034675,34.965007]),te=ue([-7.4208899,35.536988]),q=ue([-7.3148275,33.54359]);V.moveTo(re[0],re[1]),V.lineTo(te[0],te[1]),V.lineTo(q[0],q[1])},z.getCompositionBorders=function(){var V=p.path();return this.drawCompositionBorders(V),V.toString()},z.scale(2700)}function w(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function S(){var ye,Oe,ue=v.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),xe,Ae=v.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),pe,be=v.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),le,z,ae={point:function(q,ve){z=[q,ve]}};function V(te){var q=te[0],ve=te[1];return z=null,xe.point(q,ve),z||(pe.point(q,ve),z)||(le.point(q,ve),z)}V.invert=function(te){var q=ue.scale(),ve=ue.translate(),Me=(te[0]-ve[0])/q,De=(te[1]-ve[1])/q;return(De>=.0093&&De<.03678&&Me>=-.03875&&Me<-.0116?Ae:De>=-.0412&&De<.0091&&Me>=-.07782&&Me<-.01166?be:ue).invert(te)},V.stream=function(te){return ye&&Oe===te?ye:ye=w([ue.stream(Oe=te),Ae.stream(te),be.stream(te)])},V.precision=function(te){return arguments.length?(ue.precision(te),Ae.precision(te),be.precision(te),re()):ue.precision()},V.scale=function(te){return arguments.length?(ue.scale(te),Ae.scale(te),be.scale(te*.6),V.translate(ue.translate())):ue.scale()},V.translate=function(te){if(!arguments.length)return ue.translate();var q=ue.scale(),ve=+te[0],Me=+te[1];return xe=ue.translate(te).clipExtent([[ve-.0115*q,Me-.1138*q],[ve+.2105*q,Me+.0673*q]]).stream(ae),pe=Ae.translate([ve-.0265*q,Me+.025*q]).clipExtent([[ve-.0388*q+c,Me+.0093*q+c],[ve-.0116*q-c,Me+.0368*q-c]]).stream(ae),le=be.translate([ve-.045*q,Me+-.02*q]).clipExtent([[ve-.0778*q+c,Me-.0413*q+c],[ve-.0117*q-c,Me+.0091*q-c]]).stream(ae),re()},V.fitExtent=function(te,q){return d(V,te,q)},V.fitSize=function(te,q){return b(V,te,q)};function re(){return ye=Oe=null,V}return V.drawCompositionBorders=function(te){var q=ue([-12.8351,38.7113]),ve=ue([-10.8482,38.7633]),Me=ue([-10.8181,37.2072]),De=ue([-12.7345,37.1573]),ze=ue([-16.0753,41.4436]),We=ue([-10.9168,41.6861]),He=ue([-10.8557,38.7747]),$e=ue([-15.6728,38.5505]);te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.closePath(),te.moveTo(ze[0],ze[1]),te.lineTo(We[0],We[1]),te.lineTo(He[0],He[1]),te.lineTo(He[0],He[1]),te.lineTo($e[0],$e[1]),te.closePath()},V.getCompositionBorders=function(){var te=p.path();return this.drawCompositionBorders(te),te.toString()},V.scale(4200)}function I(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function j(){var ye,Oe,ue=v.geoMercator().rotate([80,1.5]),xe,Ae=v.geoMercator().rotate([90.73,1]),pe,be,le={point:function(re,te){be=[re,te]}};function z(V){var re=V[0],te=V[1];return be=null,xe.point(re,te),be||(pe.point(re,te),be)}z.invert=function(V){var re=ue.scale(),te=ue.translate(),q=(V[0]-te[0])/re,ve=(V[1]-te[1])/re;return(ve>=-.0676&&ve<-.026&&q>=-.0857&&q<-.0263?Ae:ue).invert(V)},z.stream=function(V){return ye&&Oe===V?ye:ye=I([ue.stream(Oe=V),Ae.stream(V)])},z.precision=function(V){return arguments.length?(ue.precision(V),Ae.precision(V),ae()):ue.precision()},z.scale=function(V){return arguments.length?(ue.scale(V),Ae.scale(V),z.translate(ue.translate())):ue.scale()},z.translate=function(V){if(!arguments.length)return ue.translate();var re=ue.scale(),te=+V[0],q=+V[1];return xe=ue.translate(V).clipExtent([[te-.0262*re,q-.0734*re],[te+.1741*re,q+.079*re]]).stream(le),pe=Ae.translate([te-.06*re,q-.04*re]).clipExtent([[te-.0857*re+c,q-.0676*re+c],[te-.0263*re-c,q-.026*re-c]]).stream(le),ae()},z.fitExtent=function(V,re){return d(z,V,re)},z.fitSize=function(V,re){return b(z,V,re)};function ae(){return ye=Oe=null,z}return z.drawCompositionBorders=function(V){var re=ue([-84.9032,2.3757]),te=ue([-81.5047,2.3708]),q=ue([-81.5063,-.01]),ve=ue([-84.9086,-.005]);V.moveTo(re[0],re[1]),V.lineTo(te[0],te[1]),V.lineTo(q[0],q[1]),V.lineTo(ve[0],ve[1]),V.closePath()},z.getCompositionBorders=function(){var V=p.path();return this.drawCompositionBorders(V),V.toString()},z.scale(3500)}function N(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function W(){var ye,Oe,ue=v.geoTransverseMercator().rotate([72,37]),xe,Ae=v.geoStereographic().rotate([72,0]),pe,be=v.geoMercator().rotate([80,33.5]),le,z=v.geoMercator().rotate([110,25]),ae,V,re={point:function(Me,De){V=[Me,De]}};function te(ve){var Me=ve[0],De=ve[1];return V=null,xe.point(Me,De),V||(pe.point(Me,De),V)||(le.point(Me,De),V)||(ae.point(Me,De),V)}te.invert=function(ve){var Me=ue.scale(),De=ue.translate(),ze=(ve[0]-De[0])/Me,We=(ve[1]-De[1])/Me;return(We>=.2582&&We<.32&&ze>=-.1036&&ze<-.087?Ae:We>=-.01298&&We<.0133&&ze>=-.11396&&ze<-.05944?be:We>=.01539&&We<.03911&&ze>=-.089&&ze<-.0588?z:ue).invert(ve)},te.stream=function(ve){return ye&&Oe===ve?ye:ye=N([ue.stream(Oe=ve),Ae.stream(ve),be.stream(ve),z.stream(ve)])},te.precision=function(ve){return arguments.length?(ue.precision(ve),Ae.precision(ve),be.precision(ve),z.precision(ve),q()):ue.precision()},te.scale=function(ve){return arguments.length?(ue.scale(ve),Ae.scale(ve*.15),be.scale(ve*1.5),z.scale(ve*1.5),te.translate(ue.translate())):ue.scale()},te.translate=function(ve){if(!arguments.length)return ue.translate();var Me=ue.scale(),De=+ve[0],ze=+ve[1];return xe=ue.translate(ve).clipExtent([[De-.059*Me,ze-.3835*Me],[De+.4498*Me,ze+.3375*Me]]).stream(re),pe=Ae.translate([De-.087*Me,ze+.17*Me]).clipExtent([[De-.1166*Me+c,ze+.2582*Me+c],[De-.06*Me-c,ze+.32*Me-c]]).stream(re),le=be.translate([De-.092*Me,ze-0*Me]).clipExtent([[De-.114*Me+c,ze-.013*Me+c],[De-.0594*Me-c,ze+.0133*Me-c]]).stream(re),ae=z.translate([De-.089*Me,ze-.0265*Me]).clipExtent([[De-.089*Me+c,ze+.0154*Me+c],[De-.0588*Me-c,ze+.0391*Me-c]]).stream(re),q()},te.fitExtent=function(ve,Me){return d(te,ve,Me)},te.fitSize=function(ve,Me){return b(te,ve,Me)};function q(){return ye=Oe=null,te}return te.drawCompositionBorders=function(ve){var Me=ue([-82.6999,-51.3043]),De=ue([-77.5442,-51.6631]),ze=ue([-78.0254,-55.186]),We=ue([-83.6106,-54.7785]),He=ue([-80.0638,-35.984]),$e=ue([-76.2153,-36.1811]),It=ue([-76.2994,-37.6839]),Yt=ue([-80.2231,-37.4757]),rr=ue([-78.442,-37.706]),ir=ue([-76.263,-37.8054]),Br=ue([-76.344,-39.1595]),tr=ue([-78.5638,-39.0559]);ve.moveTo(Me[0],Me[1]),ve.lineTo(De[0],De[1]),ve.lineTo(ze[0],ze[1]),ve.lineTo(ze[0],ze[1]),ve.lineTo(We[0],We[1]),ve.closePath(),ve.moveTo(He[0],He[1]),ve.lineTo($e[0],$e[1]),ve.lineTo(It[0],It[1]),ve.lineTo(It[0],It[1]),ve.lineTo(Yt[0],Yt[1]),ve.closePath(),ve.moveTo(rr[0],rr[1]),ve.lineTo(ir[0],ir[1]),ve.lineTo(Br[0],Br[1]),ve.lineTo(Br[0],Br[1]),ve.lineTo(tr[0],tr[1]),ve.closePath()},te.getCompositionBorders=function(){var ve=p.path();return this.drawCompositionBorders(ve),ve.toString()},te.scale(700)}function H(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function J(){var ye,Oe,ue=v.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),xe,Ae=v.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),pe,be=v.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),le,z,ae={point:function(q,ve){z=[q,ve]}};function V(te){var q=te[0],ve=te[1];return z=null,xe.point(q,ve),z||(pe.point(q,ve),z)||(le.point(q,ve),z)}V.invert=function(te){var q=ue.scale(),ve=ue.translate(),Me=(te[0]-ve[0])/q,De=(te[1]-ve[1])/q;return(De>=-.10925&&De<-.02701&&Me>=-.135&&Me<-.0397?Ae:De>=.04713&&De<.11138&&Me>=-.03986&&Me<.051?be:ue).invert(te)},V.stream=function(te){return ye&&Oe===te?ye:ye=H([ue.stream(Oe=te),Ae.stream(te),be.stream(te)])},V.precision=function(te){return arguments.length?(ue.precision(te),Ae.precision(te),be.precision(te),re()):ue.precision()},V.scale=function(te){return arguments.length?(ue.scale(te),Ae.scale(te),be.scale(te*.7),V.translate(ue.translate())):ue.scale()},V.translate=function(te){if(!arguments.length)return ue.translate();var q=ue.scale(),ve=+te[0],Me=+te[1];return xe=ue.translate(te).clipExtent([[ve-.1352*q,Me-.1091*q],[ve+.117*q,Me+.098*q]]).stream(ae),pe=Ae.translate([ve-.0425*q,Me-.005*q]).clipExtent([[ve-.135*q+c,Me-.1093*q+c],[ve-.0397*q-c,Me-.027*q-c]]).stream(ae),le=be.translate(te).clipExtent([[ve-.0399*q+c,Me+.0471*q+c],[ve+.051*q-c,Me+.1114*q-c]]).stream(ae),re()},V.fitExtent=function(te,q){return d(V,te,q)},V.fitSize=function(te,q){return b(V,te,q)};function re(){return ye=Oe=null,V}return V.drawCompositionBorders=function(te){var q=ue([126.01320483689143,41.621090310215585]),ve=ue([133.04304387025903,42.15087523707186]),Me=ue([133.3021766080688,37.43975444725098]),De=ue([126.87889168628224,36.95488945159779]),ze=ue([132.9,29.8]),We=ue([134,33]),He=ue([139.3,33.2]),$e=ue([139.16,30.5]);te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.closePath(),te.moveTo(ze[0],ze[1]),te.lineTo(We[0],We[1]),te.lineTo(He[0],He[1]),te.lineTo($e[0],$e[1])},V.getCompositionBorders=function(){var te=p.path();return this.drawCompositionBorders(te),te.toString()},V.scale(2200)}function Q(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function ne(){var ye,Oe,ue=v.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),xe,Ae=v.geoMercator().center([-53.2,3.9]),pe,be=v.geoMercator().center([-61.03,14.67]),le,z=v.geoMercator().center([-61.46,16.14]),ae,V=v.geoMercator().center([-62.85,17.92]),re,te=v.geoMercator().center([-56.23,46.93]),q,ve=v.geoMercator().center([45.16,-12.8]),Me,De=v.geoMercator().center([55.52,-21.13]),ze,We=v.geoMercator().center([165.8,-21.07]),He,$e=v.geoMercator().center([-178.1,-14.3]),It,Yt=v.geoMercator().center([-150.55,-17.11]),rr,ir=v.geoMercator().center([-150.55,-17.11]),Br,tr,ft={point:function(it,zt){tr=[it,zt]}};function st(Qe){var it=Qe[0],zt=Qe[1];return tr=null,xe.point(it,zt),tr||(pe.point(it,zt),tr)||(le.point(it,zt),tr)||(ae.point(it,zt),tr)||(re.point(it,zt),tr)||(q.point(it,zt),tr)||(Me.point(it,zt),tr)||(ze.point(it,zt),tr)||(He.point(it,zt),tr)||(It.point(it,zt),tr)||(rr.point(it,zt),tr)||(Br.point(it,zt),tr)}st.invert=function(Qe){var it=ue.scale(),zt=ue.translate(),Qt=(Qe[0]-zt[0])/it,Ar=(Qe[1]-zt[1])/it;return(Ar>=.029&&Ar<.0864&&Qt>=-.14&&Qt<-.0996?Ae:Ar>=0&&Ar<.029&&Qt>=-.14&&Qt<-.0996?be:Ar>=-.032&&Ar<0&&Qt>=-.14&&Qt<-.0996?z:Ar>=-.052&&Ar<-.032&&Qt>=-.14&&Qt<-.0996?V:Ar>=-.076&&Ar<.052&&Qt>=-.14&&Qt<-.0996?te:Ar>=-.076&&Ar<-.052&&Qt>=.0967&&Qt<.1371?ve:Ar>=-.052&&Ar<-.02&&Qt>=.0967&&Qt<.1371?De:Ar>=-.02&&Ar<.012&&Qt>=.0967&&Qt<.1371?We:Ar>=.012&&Ar<.033&&Qt>=.0967&&Qt<.1371?$e:Ar>=.033&&Ar<.0864&&Qt>=.0967&&Qt<.1371?Yt:ue).invert(Qe)},st.stream=function(Qe){return ye&&Oe===Qe?ye:ye=Q([ue.stream(Oe=Qe),Ae.stream(Qe),be.stream(Qe),z.stream(Qe),V.stream(Qe),te.stream(Qe),ve.stream(Qe),De.stream(Qe),We.stream(Qe),$e.stream(Qe),Yt.stream(Qe),ir.stream(Qe)])},st.precision=function(Qe){return arguments.length?(ue.precision(Qe),Ae.precision(Qe),be.precision(Qe),z.precision(Qe),V.precision(Qe),te.precision(Qe),ve.precision(Qe),De.precision(Qe),We.precision(Qe),$e.precision(Qe),Yt.precision(Qe),ir.precision(Qe),Tt()):ue.precision()},st.scale=function(Qe){return arguments.length?(ue.scale(Qe),Ae.scale(Qe*.6),be.scale(Qe*1.6),z.scale(Qe*1.4),V.scale(Qe*5),te.scale(Qe*1.3),ve.scale(Qe*1.6),De.scale(Qe*1.2),We.scale(Qe*.3),$e.scale(Qe*2.7),Yt.scale(Qe*.5),ir.scale(Qe*.06),st.translate(ue.translate())):ue.scale()},st.translate=function(Qe){if(!arguments.length)return ue.translate();var it=ue.scale(),zt=+Qe[0],Qt=+Qe[1];return xe=ue.translate(Qe).clipExtent([[zt-.0996*it,Qt-.0908*it],[zt+.0967*it,Qt+.0864*it]]).stream(ft),pe=Ae.translate([zt-.12*it,Qt+.0575*it]).clipExtent([[zt-.14*it+c,Qt+.029*it+c],[zt-.0996*it-c,Qt+.0864*it-c]]).stream(ft),le=be.translate([zt-.12*it,Qt+.013*it]).clipExtent([[zt-.14*it+c,Qt+0*it+c],[zt-.0996*it-c,Qt+.029*it-c]]).stream(ft),ae=z.translate([zt-.12*it,Qt-.014*it]).clipExtent([[zt-.14*it+c,Qt-.032*it+c],[zt-.0996*it-c,Qt+0*it-c]]).stream(ft),re=V.translate([zt-.12*it,Qt-.044*it]).clipExtent([[zt-.14*it+c,Qt-.052*it+c],[zt-.0996*it-c,Qt-.032*it-c]]).stream(ft),q=te.translate([zt-.12*it,Qt-.065*it]).clipExtent([[zt-.14*it+c,Qt-.076*it+c],[zt-.0996*it-c,Qt-.052*it-c]]).stream(ft),Me=ve.translate([zt+.117*it,Qt-.064*it]).clipExtent([[zt+.0967*it+c,Qt-.076*it+c],[zt+.1371*it-c,Qt-.052*it-c]]).stream(ft),ze=De.translate([zt+.116*it,Qt-.0355*it]).clipExtent([[zt+.0967*it+c,Qt-.052*it+c],[zt+.1371*it-c,Qt-.02*it-c]]).stream(ft),He=We.translate([zt+.116*it,Qt-.0048*it]).clipExtent([[zt+.0967*it+c,Qt-.02*it+c],[zt+.1371*it-c,Qt+.012*it-c]]).stream(ft),It=$e.translate([zt+.116*it,Qt+.022*it]).clipExtent([[zt+.0967*it+c,Qt+.012*it+c],[zt+.1371*it-c,Qt+.033*it-c]]).stream(ft),Br=ir.translate([zt+.11*it,Qt+.045*it]).clipExtent([[zt+.0967*it+c,Qt+.033*it+c],[zt+.1371*it-c,Qt+.06*it-c]]).stream(ft),rr=Yt.translate([zt+.115*it,Qt+.075*it]).clipExtent([[zt+.0967*it+c,Qt+.06*it+c],[zt+.1371*it-c,Qt+.0864*it-c]]).stream(ft),Tt()},st.fitExtent=function(Qe,it){return d(st,Qe,it)},st.fitSize=function(Qe,it){return b(st,Qe,it)};function Tt(){return ye=Oe=null,st}return st.drawCompositionBorders=function(Qe){var it,zt,Qt,Ar;it=ue([-7.938886725111036,43.7219460918835]),zt=ue([-4.832080896458295,44.12930268549372]),Qt=ue([-4.205299743793263,40.98096346967365]),Ar=ue([-7.071796453126152,40.610037319181444]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([-8.42751373617692,45.32889452553031]),zt=ue([-5.18599305777107,45.7566442062976]),Qt=ue([-4.832080905154431,44.129302726751426]),Ar=ue([-7.938886737126192,43.72194613263854]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([-9.012656899657046,47.127733821030176]),zt=ue([-5.6105244772793155,47.579777861410626]),Qt=ue([-5.185993067168585,45.756644248170346]),Ar=ue([-8.427513749141811,45.32889456686326]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([-9.405747558985553,48.26506375557457]),zt=ue([-5.896175018439575,48.733352850851624]),Qt=ue([-5.610524487556043,47.57977790393761]),Ar=ue([-9.012656913808351,47.127733862971255]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([-9.908436061346974,49.642448789505856]),zt=ue([-6.262026716233124,50.131426841787174]),Qt=ue([-5.896175029331232,48.73335289377258]),Ar=ue([-9.40574757396393,48.26506379787767]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([11.996907706504462,50.16039028163579]),zt=ue([15.649907879773343,49.68279246765253]),Qt=ue([15.156712840526632,48.30371557625831]),Ar=ue([11.64122661754411,48.761078240546816]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([11.641226606955788,48.7610781975889]),zt=ue([15.156712825832164,48.30371553390465]),Qt=ue([14.549932166241172,46.4866532486199]),Ar=ue([11.204443787952183,46.91899233914248]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([11.204443778297161,46.918992296823646]),zt=ue([14.549932152815039,46.486653206856396]),Qt=ue([13.994409796764009,44.695833444323256]),Ar=ue([10.805306599253848,45.105133870684924]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([10.805306590412085,45.10513382903308]),zt=ue([13.99440978444733,44.695833403183606]),Qt=ue([13.654633799024392,43.53552468558152]),Ar=ue([10.561516803980956,43.930671459798624]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([10.561516795617383,43.93067141859757]),zt=ue([13.654633787361952,43.5355246448671]),Qt=ue([12.867691604239901,40.640701985019405]),Ar=ue([9.997809515987688,41.00288343254471]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([10.8,42.4]),zt=ue([12.8,42.13]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1])},st.getCompositionBorders=function(){var Qe=p.path();return this.drawCompositionBorders(Qe),Qe.toString()},st.scale(2700)}function K(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function ie(){var ye,Oe,ue=v.geoConicConformal().rotate([-10,-53]).parallels([0,60]),xe,Ae=v.geoMercator().center([-61.46,16.14]),pe,be=v.geoMercator().center([-53.2,3.9]),le,z=v.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),ae,V=v.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),re,te=v.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),q,ve=v.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),Me,De=v.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),ze,We=v.geoMercator().center([-61.03,14.67]),He,$e=v.geoMercator().center([45.16,-12.8]),It,Yt=v.geoMercator().center([55.52,-21.13]),rr,ir=v.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),Br,tr,ft={point:function(it,zt){tr=[it,zt]}};function st(Qe){var it=Qe[0],zt=Qe[1];return tr=null,xe.point(it,zt),tr||(le.point(it,zt),tr)||(He.point(it,zt),tr)||(pe.point(it,zt),tr)||(ze.point(it,zt),tr)||(Me.point(it,zt),tr)||(It.point(it,zt),tr)||(rr.point(it,zt),tr)||(Br.point(it,zt),tr)||(ae.point(it,zt),tr)||(re.point(it,zt),tr)||(q.point(it,zt),tr)}st.invert=function(Qe){var it=ue.scale(),zt=ue.translate(),Qt=(Qe[0]-(zt[0]+.08*it))/it,Ar=(Qe[1]-zt[1])/it;return(Ar>=-.31&&Ar<-.24&&Qt>=.14&&Qt<.24?Ae:Ar>=-.24&&Ar<-.17&&Qt>=.14&&Qt<.24?be:Ar>=-.17&&Ar<-.12&&Qt>=.21&&Qt<.24?V:Ar>=-.17&&Ar<-.14&&Qt>=.14&&Qt<.165?te:Ar>=-.17&&Ar<-.1&&Qt>=.14&&Qt<.24?z:Ar>=-.1&&Ar<-.03&&Qt>=.14&&Qt<.24?ve:Ar>=-.03&&Ar<.04&&Qt>=.14&&Qt<.24?De:Ar>=-.31&&Ar<-.24&&Qt>=.24&&Qt<.34?We:Ar>=-.24&&Ar<-.17&&Qt>=.24&&Qt<.34?$e:Ar>=-.17&&Ar<-.1&&Qt>=.24&&Qt<.34?Yt:Ar>=-.1&&Ar<-.03&&Qt>=.24&&Qt<.34?ir:ue).invert(Qe)},st.stream=function(Qe){return ye&&Oe===Qe?ye:ye=K([ue.stream(Oe=Qe),be.stream(Qe),We.stream(Qe),Ae.stream(Qe),De.stream(Qe),ve.stream(Qe),$e.stream(Qe),Yt.stream(Qe),ir.stream(Qe),z.stream(Qe),V.stream(Qe),te.stream(Qe)])},st.precision=function(Qe){return arguments.length?(ue.precision(Qe),be.precision(Qe),We.precision(Qe),Ae.precision(Qe),De.precision(Qe),ve.precision(Qe),$e.precision(Qe),Yt.precision(Qe),ir.precision(Qe),z.precision(Qe),V.precision(Qe),te.precision(Qe),Tt()):ue.precision()},st.scale=function(Qe){return arguments.length?(ue.scale(Qe),Ae.scale(Qe*3),be.scale(Qe*.8),We.scale(Qe*3.5),Yt.scale(Qe*2.7),z.scale(Qe*2),V.scale(Qe*2),te.scale(Qe*2),ve.scale(Qe*3),De.scale(Qe),$e.scale(Qe*5.5),ir.scale(Qe*6),st.translate(ue.translate())):ue.scale()},st.translate=function(Qe){if(!arguments.length)return ue.translate();var it=ue.scale(),zt=+Qe[0],Qt=+Qe[1];return xe=ue.translate([zt-.08*it,Qt]).clipExtent([[zt-.51*it,Qt-.33*it],[zt+.5*it,Qt+.33*it]]).stream(ft),pe=Ae.translate([zt+.19*it,Qt-.275*it]).clipExtent([[zt+.14*it+c,Qt-.31*it+c],[zt+.24*it-c,Qt-.24*it-c]]).stream(ft),le=be.translate([zt+.19*it,Qt-.205*it]).clipExtent([[zt+.14*it+c,Qt-.24*it+c],[zt+.24*it-c,Qt-.17*it-c]]).stream(ft),ae=z.translate([zt+.19*it,Qt-.135*it]).clipExtent([[zt+.14*it+c,Qt-.17*it+c],[zt+.24*it-c,Qt-.1*it-c]]).stream(ft),re=V.translate([zt+.225*it,Qt-.147*it]).clipExtent([[zt+.21*it+c,Qt-.17*it+c],[zt+.24*it-c,Qt-.12*it-c]]).stream(ft),q=te.translate([zt+.153*it,Qt-.15*it]).clipExtent([[zt+.14*it+c,Qt-.17*it+c],[zt+.165*it-c,Qt-.14*it-c]]).stream(ft),Me=ve.translate([zt+.19*it,Qt-.065*it]).clipExtent([[zt+.14*it+c,Qt-.1*it+c],[zt+.24*it-c,Qt-.03*it-c]]).stream(ft),ze=De.translate([zt+.19*it,Qt+.005*it]).clipExtent([[zt+.14*it+c,Qt-.03*it+c],[zt+.24*it-c,Qt+.04*it-c]]).stream(ft),He=We.translate([zt+.29*it,Qt-.275*it]).clipExtent([[zt+.24*it+c,Qt-.31*it+c],[zt+.34*it-c,Qt-.24*it-c]]).stream(ft),It=$e.translate([zt+.29*it,Qt-.205*it]).clipExtent([[zt+.24*it+c,Qt-.24*it+c],[zt+.34*it-c,Qt-.17*it-c]]).stream(ft),rr=Yt.translate([zt+.29*it,Qt-.135*it]).clipExtent([[zt+.24*it+c,Qt-.17*it+c],[zt+.34*it-c,Qt-.1*it-c]]).stream(ft),Br=ir.translate([zt+.29*it,Qt-.065*it]).clipExtent([[zt+.24*it+c,Qt-.1*it+c],[zt+.34*it-c,Qt-.03*it-c]]).stream(ft),Tt()},st.fitExtent=function(Qe,it){return d(st,Qe,it)},st.fitSize=function(Qe,it){return b(st,Qe,it)};function Tt(){return ye=Oe=null,st}return st.drawCompositionBorders=function(Qe){var it,zt,Qt,Ar;it=ue([42.45755610828648,63.343658547914934]),zt=ue([52.65837266667029,59.35045080290929]),Qt=ue([47.19754502247785,56.12653496548117]),Ar=ue([37.673034273363044,59.61638268506111]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([59.41110754003403,62.35069727399336]),zt=ue([66.75050228640794,57.11797303636038]),Qt=ue([60.236065725110436,54.63331433818992]),Ar=ue([52.65837313153311,59.350450804599355]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([48.81091130080243,66.93353402634641]),zt=ue([59.41110730654679,62.35069740653086]),Qt=ue([52.6583728974441,59.3504509222445]),Ar=ue([42.45755631675751,63.34365868805821]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([31.054198418446475,52.1080673766184]),zt=ue([39.09869284884117,49.400700047190554]),Qt=ue([36.0580811499175,46.02944174908498]),Ar=ue([28.690508588835726,48.433126979386415]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([33.977877745912025,55.849945501331]),zt=ue([42.75328432167726,52.78455122462353]),Qt=ue([39.09869297540224,49.400700176148625]),Ar=ue([31.05419851807008,52.10806751810923]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([52.658372900759296,59.35045068526415]),zt=ue([60.23606549583304,54.63331423800264]),Qt=ue([54.6756370953122,51.892298789399455]),Ar=ue([47.19754524788189,56.126534861222794]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([47.19754506082455,56.126534735591456]),zt=ue([54.675636900123514,51.892298681337095]),Qt=ue([49.94448648951486,48.98775484983285]),Ar=ue([42.75328468716108,52.78455126060818]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([42.75328453416769,52.78455113209101]),zt=ue([49.94448632339758,48.98775473706457]),Qt=ue([45.912339990394315,45.99361784987003]),Ar=ue([39.09869317356607,49.40070009378711]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([37.673034114296634,59.61638254183119]),zt=ue([47.197544835420544,56.126534839849846]),Qt=ue([42.75328447467064,52.78455135314068]),Ar=ue([33.977877870363905,55.849945644671145]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([44.56748486446032,57.26489367845818]),Qt=ue([43.9335791193588,53.746540942601726]),Ar=ue([43,56]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath(),it=ue([37.673034114296634,59.61638254183119]),zt=ue([40.25902691953466,58.83002044222639]),Qt=ue([38.458270492742024,57.26232178028002]),Ar=ue([35.97754948030156,58.00266637992386]),Qe.moveTo(it[0],it[1]),Qe.lineTo(zt[0],zt[1]),Qe.lineTo(Qt[0],Qt[1]),Qe.lineTo(Ar[0],Ar[1]),Qe.closePath()},st.getCompositionBorders=function(){var Qe=p.path();return this.drawCompositionBorders(Qe),Qe.toString()},st.scale(750)}function de(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function we(){var ye,Oe,ue=v.geoConicConformal().rotate([-5.5,-52.2]).parallels([0,60]),xe,Ae=v.geoMercator().center([-68.25,12.2]),pe,be=v.geoMercator().center([-63.1,17.5]),le,z,ae={point:function(q,ve){z=[q,ve]}};function V(te){var q=e.__read(te,2),ve=q[0],Me=q[1];return z=null,xe.point(ve,Me),z||(pe.point(ve,Me),z)||(le.point(ve,Me),z)}V.invert=function(te){var q=ue.scale(),ve=ue.translate(),Me=(te[0]-ve[0])/q,De=(te[1]-ve[1])/q;return(De>=-.0067&&De<.0015&&Me>=-.0232&&Me<-.0154?Ae:De>=-.022&&De<-.014&&Me>=-.023&&Me<-.014?be:ue).invert(te)},V.stream=function(te){return ye&&Oe===te?ye:ye=de([ue.stream(Oe=te),Ae.stream(te),be.stream(te)])},V.precision=function(te){return arguments.length?(ue.precision(te),Ae.precision(te),be.precision(te),re()):ue.precision()},V.scale=function(te){return arguments.length?(ue.scale(te),Ae.scale(te),be.scale(te),V.translate(ue.translate())):ue.scale()},V.translate=function(te){if(!arguments.length)return ue.translate();var q=ue.scale(),ve=+te[0],Me=+te[1];return xe=ue.translate(te).clipExtent([[ve-.0245*q,Me-.026*q],[ve+.023*q,Me+.026*q]]).stream(ae),pe=Ae.translate([ve-.0186*q,Me-.00325*q]).clipExtent([[ve-.0232*q+c,Me-.0067*q+c],[ve-.0154*q-c,Me+.0015*q-c]]).stream(ae),le=be.translate([ve-.0185*q,Me-.017*q]).clipExtent([[ve-.023*q+c,Me-.022*q+c],[ve-.014*q-c,Me-.014*q-c]]).stream(ae),re()},V.fitExtent=function(te,q){return d(V,te,q)},V.fitSize=function(te,q){return b(V,te,q)};function re(){return ye=Oe=null,V}return V.drawCompositionBorders=function(te){var q=ue([3.30573,52.5562]),ve=ue([4.043,52.572]),Me=ue([4.0646,52.1017]),De=ue([3.3382,52.0861]),ze=ue([3.262,53.439]),We=ue([4.1373,53.4571]),He=ue([4.1574,52.9946]),$e=ue([3.2951,52.9768]);te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.closePath(),te.moveTo(ze[0],ze[1]),te.lineTo(We[0],We[1]),te.lineTo(He[0],He[1]),te.lineTo(He[0],He[1]),te.lineTo($e[0],$e[1]),te.closePath()},V.getCompositionBorders=function(){var te=p.path();return this.drawCompositionBorders(te),te.toString()},V.scale(4200)}function Re(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function _e(){var ye,Oe,ue=v.geoMercator().center([105.25,4]),xe,Ae=v.geoMercator().center([118.65,2.86]),pe,be,le={point:function(re,te){be=[re,te]}};function z(V){var re=V[0],te=V[1];return be=null,xe.point(re,te),be||(pe.point(re,te),be)}z.invert=function(V){var re=ue.scale(),te=ue.translate(),q=(V[0]-te[0])/re,ve=(V[1]-te[1])/re;return(ve>=-.0521&&ve<.0229&&q>=-.0111&&q<.1?Ae:ue).invert(V)},z.stream=function(V){return ye&&Oe===V?ye:ye=Re([ue.stream(Oe=V),Ae.stream(V)])},z.precision=function(V){return arguments.length?(ue.precision(V),Ae.precision(V),ae()):ue.precision()},z.scale=function(V){return arguments.length?(ue.scale(V),Ae.scale(V*.615),z.translate(ue.translate())):ue.scale()},z.translate=function(V){if(!arguments.length)return ue.translate();var re=ue.scale(),te=+V[0],q=+V[1];return xe=ue.translate(V).clipExtent([[te-.11*re,q-.0521*re],[te-.0111*re,q+.0521*re]]).stream(le),pe=Ae.translate([te+.09*re,q-0*re]).clipExtent([[te-.0111*re+c,q-.0521*re+c],[te+.1*re-c,q+.024*re-c]]).stream(le),ae()},z.fitExtent=function(V,re){return d(z,V,re)},z.fitSize=function(V,re){return b(z,V,re)};function ae(){return ye=Oe=null,z}return z.drawCompositionBorders=function(V){var re=ue([106.3214,2.0228]),te=ue([105.1843,2.3761]),q=ue([104.2151,3.3618]),ve=ue([104.215,4.5651]);V.moveTo(re[0],re[1]),V.lineTo(te[0],te[1]),V.lineTo(q[0],q[1]),V.lineTo(ve[0],ve[1])},z.getCompositionBorders=function(){var V=p.path();return this.drawCompositionBorders(V),V.toString()},z.scale(4800)}function Ue(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function rt(){var ye,Oe,ue=v.geoMercator().rotate([-9.5,-1.5]),xe,Ae=v.geoMercator().rotate([-8.6,-3.5]),pe,be=v.geoMercator().rotate([-5.6,1.45]),le,z,ae={point:function(q,ve){z=[q,ve]}};function V(te){var q=te[0],ve=te[1];return z=null,xe.point(q,ve),z||(pe.point(q,ve),z)||(le.point(q,ve),z)}V.invert=function(te){var q=ue.scale(),ve=ue.translate(),Me=(te[0]-ve[0])/q,De=(te[1]-ve[1])/q;return(De>=-.02&&De<0&&Me>=-.038&&Me<-.005?Ae:De>=0&&De<.02&&Me>=-.038&&Me<-.005?be:ue).invert(te)},V.stream=function(te){return ye&&Oe===te?ye:ye=Ue([ue.stream(Oe=te),Ae.stream(te),be.stream(te)])},V.precision=function(te){return arguments.length?(ue.precision(te),Ae.precision(te),be.precision(te),re()):ue.precision()},V.scale=function(te){return arguments.length?(ue.scale(te),Ae.scale(te*1.5),be.scale(te*4),V.translate(ue.translate())):ue.scale()},V.translate=function(te){if(!arguments.length)return ue.translate();var q=ue.scale(),ve=+te[0],Me=+te[1];return xe=ue.translate(te).clipExtent([[ve-.005*q,Me-.02*q],[ve+.038*q,Me+.02*q]]).stream(ae),pe=Ae.translate([ve-.025*q,Me-.01*q]).clipExtent([[ve-.038*q+c,Me-.02*q+c],[ve-.005*q-c,Me+0*q-c]]).stream(ae),le=be.translate([ve-.025*q,Me+.01*q]).clipExtent([[ve-.038*q+c,Me-0*q+c],[ve-.005*q-c,Me+.02*q-c]]).stream(ae),re()},V.fitExtent=function(te,q){return d(V,te,q)},V.fitSize=function(te,q){return b(V,te,q)};function re(){return ye=Oe=null,V}return V.drawCompositionBorders=function(te){var q,ve,Me,De;q=ue([9.21327272751682,2.645820439454123]),ve=ue([11.679126293239872,2.644755519268689]),Me=ue([11.676845389029227,.35307824637606433]),De=ue([9.213572917774014,.35414205204417754]),te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.closePath(),q=ue([7.320873711543669,2.64475551449975]),ve=ue([9.213272722738658,2.645820434679803]),Me=ue([9.213422896480349,1.4999812505283054]),De=ue([7.322014760520787,1.4989168878985566]),te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.closePath(),q=ue([7.3220147605302905,1.4989168783492766]),ve=ue([9.213422896481598,1.499981240979021]),Me=ue([9.213572912999604,.354142056817247]),De=ue([7.323154615739809,.353078251154504]),te.moveTo(q[0],q[1]),te.lineTo(ve[0],ve[1]),te.lineTo(Me[0],Me[1]),te.lineTo(De[0],De[1]),te.closePath()},V.getCompositionBorders=function(){var te=p.path();return this.drawCompositionBorders(te),te.toString()},V.scale(12e3)}function Fe(ye){var Oe=ye.length;return{point:function(xe,Ae){for(var pe=-1;++pe<Oe;)ye[pe].point(xe,Ae)},sphere:function(){for(var xe=-1;++xe<Oe;)ye[xe].sphere()},lineStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineStart()},lineEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].lineEnd()},polygonStart:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonStart()},polygonEnd:function(){for(var xe=-1;++xe<Oe;)ye[xe].polygonEnd()}}}function Se(){var ye,Oe,ue=v.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),xe,Ae=v.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),pe,be,le={point:function(re,te){be=[re,te]}};function z(V){var re=V[0],te=V[1];return be=null,xe.point(re,te),be||(pe.point(re,te),be)}z.invert=function(V){var re=ue.scale(),te=ue.translate(),q=(V[0]-te[0])/re,ve=(V[1]-te[1])/re;return(ve>=-.089&&ve<.06&&q>=.029&&q<.046?Ae:ue).invert(V)},z.stream=function(V){return ye&&Oe===V?ye:ye=Fe([ue.stream(Oe=V),Ae.stream(V)])},z.precision=function(V){return arguments.length?(ue.precision(V),Ae.precision(V),ae()):ue.precision()},z.scale=function(V){return arguments.length?(ue.scale(V),Ae.scale(V),z.translate(ue.translate())):ue.scale()},z.translate=function(V){if(!arguments.length)return ue.translate();var re=ue.scale(),te=+V[0],q=+V[1];return xe=ue.translate(V).clipExtent([[te-.065*re,q-.089*re],[te+.075*re,q+.089*re]]).stream(le),pe=Ae.translate([te+.01*re,q+.025*re]).clipExtent([[te+.029*re+c,q-.089*re+c],[te+.046*re-c,q-.06*re-c]]).stream(le),ae()},z.fitExtent=function(V,re){return d(z,V,re)},z.fitSize=function(V,re){return b(z,V,re)};function ae(){return ye=Oe=null,z}return z.drawCompositionBorders=function(V){var re,te,q,ve;re=ue([-1.113205870242365,59.64920050773357]),te=ue([.807899092399606,59.59085836472269]),q=ue([.5778611961420386,57.93467822832577]),ve=ue([-1.25867782078448,57.99029450085142]),V.moveTo(re[0],re[1]),V.lineTo(te[0],te[1]),V.lineTo(q[0],q[1]),V.lineTo(ve[0],ve[1]),V.closePath()},z.getCompositionBorders=function(){var V=p.path();return this.drawCompositionBorders(V),V.toString()},z.scale(2800)}g.geoAlbersUk=Se,g.geoAlbersUsa=x,g.geoAlbersUsaTerritories=P,g.geoConicConformalEurope=ie,g.geoConicConformalFrance=ne,g.geoConicConformalNetherlands=we,g.geoConicConformalPortugal=S,g.geoConicConformalSpain=O,g.geoConicEquidistantJapan=J,g.geoMercatorEcuador=j,g.geoMercatorEquatorialGuinea=rt,g.geoMercatorMalaysia=_e,g.geoTransverseMercatorChile=W,Object.defineProperty(g,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";var g={},v={},p=34,c=10,h=13;function i(ie){return new Function("d","return {"+ie.map(function(de,we){return JSON.stringify(de)+": d["+we+'] || ""'}).join(",")+"}")}function r(ie,de){var we=i(ie);return function(Re,_e){return de(we(Re),_e,ie)}}function n(ie){var de=Object.create(null),we=[];return ie.forEach(function(Re){for(var _e in Re)_e in de||we.push(de[_e]=_e)}),we}function s(ie,de){var we=ie+"",Re=we.length;return Re<de?new Array(de-Re+1).join(0)+we:we}function f(ie){return ie<0?"-"+s(-ie,6):ie>9999?"+"+s(ie,6):s(ie,4)}function u(ie){var de=ie.getUTCHours(),we=ie.getUTCMinutes(),Re=ie.getUTCSeconds(),_e=ie.getUTCMilliseconds();return isNaN(ie)?"Invalid Date":f(ie.getUTCFullYear())+"-"+s(ie.getUTCMonth()+1,2)+"-"+s(ie.getUTCDate(),2)+(_e?"T"+s(de,2)+":"+s(we,2)+":"+s(Re,2)+"."+s(_e,3)+"Z":Re?"T"+s(de,2)+":"+s(we,2)+":"+s(Re,2)+"Z":we||de?"T"+s(de,2)+":"+s(we,2)+"Z":"")}function d(ie){var de=new RegExp('["'+ie+`
\r]`),we=ie.charCodeAt(0);function Re(ue,xe){var Ae,pe,be=_e(ue,function(le,z){if(Ae)return Ae(le,z-1);pe=le,Ae=xe?r(le,xe):i(le)});return be.columns=pe||[],be}function _e(ue,xe){var Ae=[],pe=ue.length,be=0,le=0,z,ae=pe<=0,V=!1;ue.charCodeAt(pe-1)===c&&--pe,ue.charCodeAt(pe-1)===h&&--pe;function re(){if(ae)return v;if(V)return V=!1,g;var q,ve=be,Me;if(ue.charCodeAt(ve)===p){for(;be++<pe&&ue.charCodeAt(be)!==p||ue.charCodeAt(++be)===p;);return(q=be)>=pe?ae=!0:(Me=ue.charCodeAt(be++))===c?V=!0:Me===h&&(V=!0,ue.charCodeAt(be)===c&&++be),ue.slice(ve+1,q-1).replace(/""/g,'"')}for(;be<pe;){if((Me=ue.charCodeAt(q=be++))===c)V=!0;else if(Me===h)V=!0,ue.charCodeAt(be)===c&&++be;else if(Me!==we)continue;return ue.slice(ve,q)}return ae=!0,ue.slice(ve,pe)}for(;(z=re())!==v;){for(var te=[];z!==g&&z!==v;)te.push(z),z=re();xe&&(te=xe(te,le++))==null||Ae.push(te)}return Ae}function Ue(ue,xe){return ue.map(function(Ae){return xe.map(function(pe){return Oe(Ae[pe])}).join(ie)})}function rt(ue,xe){return xe==null&&(xe=n(ue)),[xe.map(Oe).join(ie)].concat(Ue(ue,xe)).join(`
`)}function Fe(ue,xe){return xe==null&&(xe=n(ue)),Ue(ue,xe).join(`
`)}function Se(ue){return ue.map(ye).join(`
`)}function ye(ue){return ue.map(Oe).join(ie)}function Oe(ue){return ue==null?"":ue instanceof Date?u(ue):de.test(ue+="")?'"'+ue.replace(/"/g,'""')+'"':ue}return{parse:Re,parseRows:_e,format:rt,formatBody:Fe,formatRows:Se,formatRow:ye,formatValue:Oe}}var b=d(","),_=b.parse,x=b.parseRows,M=b.format,P=b.formatBody,C=b.formatRows,O=b.formatRow,w=b.formatValue,S=d("	"),I=S.parse,j=S.parseRows,N=S.format,W=S.formatBody,H=S.formatRows,J=S.formatRow,Q=S.formatValue;function ne(ie){for(var de in ie){var we=ie[de].trim(),Re,_e;if(!we)we=null;else if(we==="true")we=!0;else if(we==="false")we=!1;else if(we==="NaN")we=NaN;else if(!isNaN(Re=+we))we=Re;else if(_e=we.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))K&&!!_e[4]&&!_e[7]&&(we=we.replace(/-/g,"/").replace(/T/," ")),we=new Date(we);else continue;ie[de]=we}return ie}var K=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();e.autoType=ne,e.csvFormat=M,e.csvFormatBody=P,e.csvFormatRow=O,e.csvFormatRows=C,e.csvFormatValue=w,e.csvParse=_,e.csvParseRows=x,e.dsvFormat=d,e.tsvFormat=N,e.tsvFormatBody=W,e.tsvFormatRow=J,e.tsvFormatRows=H,e.tsvFormatValue=Q,e.tsvParse=I,e.tsvParseRows=j,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(B,L,o){(function(e,g){g(L,o("./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js"),o("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(e,g,v){"use strict";var p=Math.abs,c=Math.atan,h=Math.atan2,i=Math.cos,r=Math.exp,n=Math.floor,s=Math.log,f=Math.max,u=Math.min,d=Math.pow,b=Math.round,_=Math.sign||function(G){return G>0?1:G<0?-1:0},x=Math.sin,M=Math.tan,P=1e-6,C=1e-12,O=Math.PI,w=O/2,S=O/4,I=Math.SQRT1_2,j=ie(2),N=ie(O),W=O*2,H=180/O,J=O/180;function Q(G){return G?G/Math.sin(G):1}function ne(G){return G>1?w:G<-1?-w:Math.asin(G)}function K(G){return G>1?0:G<-1?O:Math.acos(G)}function ie(G){return G>0?Math.sqrt(G):0}function de(G){return G=r(2*G),(G-1)/(G+1)}function we(G){return(r(G)-r(-G))/2}function Re(G){return(r(G)+r(-G))/2}function _e(G){return s(G+ie(G*G+1))}function Ue(G){return s(G+ie(G*G-1))}function rt(G){var ee=M(G/2),ce=2*s(i(G/2))/(ee*ee);function fe(Pe,Ie){var ke=i(Pe),Ge=i(Ie),Je=x(Ie),vt=Ge*ke,_t=-((1-vt?s((1+vt)/2)/(1-vt):-.5)+ce/(1+vt));return[_t*Ge*x(Pe),_t*Je]}return fe.invert=function(Pe,Ie){var ke=ie(Pe*Pe+Ie*Ie),Ge=-G/2,Je=50,vt;if(!ke)return[0,0];do{var _t=Ge/2,Rt=i(_t),Pt=x(_t),Gt=M(_t),ur=s(1/Rt);Ge-=vt=(2/Gt*ur-ce*Gt-ke)/(-ur/(Pt*Pt)+1-ce/(2*Rt*Rt))}while(p(vt)>P&&--Je>0);var hr=x(Ge);return[h(Pe*hr,ke*i(Ge)),ne(Ie*hr/ke)]},fe}var Fe=function(){var ee=w,ce=g.geoProjectionMutator(rt),fe=ce(ee);return fe.radius=function(Pe){return arguments.length?ce(ee=Pe*J):ee*H},fe.scale(179.976).clipAngle(147)};function Se(G,ee){var ce=i(ee),fe=Q(K(ce*i(G/=2)));return[2*ce*x(G)*fe,x(ee)*fe]}Se.invert=function(G,ee){if(!(G*G+4*ee*ee>O*O+P)){var ce=G,fe=ee,Pe=25;do{var Ie=x(ce),ke=x(ce/2),Ge=i(ce/2),Je=x(fe),vt=i(fe),_t=x(2*fe),Rt=Je*Je,Pt=vt*vt,Gt=ke*ke,ur=1-Pt*Ge*Ge,hr=ur?K(vt*Ge)*ie(nn=1/ur):nn=0,nn,Yr=2*hr*vt*ke-G,Tn=hr*Je-ee,In=nn*(Pt*Gt+hr*vt*Ge*Rt),si=nn*(.5*Ie*_t-hr*2*Je*ke),ni=nn*.25*(_t*ke-hr*Je*Pt*Ie),Ci=nn*(Rt*Ge+hr*Gt*vt),Ji=si*ni-Ci*In;if(!Ji)break;var ha=(Tn*si-Yr*Ci)/Ji,ya=(Yr*ni-Tn*In)/Ji;ce-=ha,fe-=ya}while((p(ha)>P||p(ya)>P)&&--Pe>0);return[ce,fe]}};var ye=function(){return g.geoProjection(Se).scale(152.63)};function Oe(G){var ee=x(G),ce=i(G),fe=G>=0?1:-1,Pe=M(fe*G),Ie=(1+ee-ce)/2;function ke(Ge,Je){var vt=i(Je),_t=i(Ge/=2);return[(1+vt)*x(Ge),(fe*Je>-h(_t,Pe)-.001?0:-fe*10)+Ie+x(Je)*ce-(1+vt)*ee*_t]}return ke.invert=function(Ge,Je){var vt=0,_t=0,Rt=50;do{var Pt=i(vt),Gt=x(vt),ur=i(_t),hr=x(_t),nn=1+ur,Yr=nn*Gt-Ge,Tn=Ie+hr*ce-nn*ee*Pt-Je,In=nn*Pt/2,si=-Gt*hr,ni=ee*nn*Gt/2,Ci=ce*ur+ee*Pt*hr,Ji=si*ni-Ci*In,ha=(Tn*si-Yr*Ci)/Ji/2,ya=(Yr*ni-Tn*In)/Ji;vt-=ha,_t-=ya}while((p(ha)>P||p(ya)>P)&&--Rt>0);return fe*_t>-h(i(vt),Pe)-.001?[vt*2,_t]:null},ke}var ue=function(){var ee=20*J,ce=ee>=0?1:-1,fe=M(ce*ee),Pe=g.geoProjectionMutator(Oe),Ie=Pe(ee),ke=Ie.stream;return Ie.parallel=function(Ge){return arguments.length?(fe=M((ce=(ee=Ge*J)>=0?1:-1)*ee),Pe(ee)):ee*H},Ie.stream=function(Ge){var Je=Ie.rotate(),vt=ke(Ge),_t=(Ie.rotate([0,0]),ke(Ge));return Ie.rotate(Je),vt.sphere=function(){_t.polygonStart(),_t.lineStart();for(var Rt=ce*-180;ce*Rt<180;Rt+=ce*90)_t.point(Rt,ce*90);for(;ce*(Rt-=ee)>=-180;)_t.point(Rt,ce*-h(i(Rt*J/2),fe)*H);_t.lineEnd(),_t.polygonEnd()},vt},Ie.scale(218.695).center([0,28.0974])};function xe(G,ee){var ce=M(ee/2),fe=ie(1-ce*ce),Pe=1+fe*i(G/=2),Ie=x(G)*fe/Pe,ke=ce/Pe,Ge=Ie*Ie,Je=ke*ke;return[4/3*Ie*(3+Ge-3*Je),4/3*ke*(3+3*Ge-Je)]}xe.invert=function(G,ee){if(G*=3/8,ee*=3/8,!G&&p(ee)>1)return null;var ce=G*G,fe=ee*ee,Pe=1+ce+fe,Ie=ie((Pe-ie(Pe*Pe-4*ee*ee))/2),ke=ne(Ie)/3,Ge=Ie?Ue(p(ee/Ie))/3:_e(p(G))/3,Je=i(ke),vt=Re(Ge),_t=vt*vt-Je*Je;return[_(G)*2*h(we(Ge)*Je,.25-_t),_(ee)*2*h(vt*x(ke),.25+_t)]};var Ae=function(){return g.geoProjection(xe).scale(66.1603)},pe=ie(8),be=s(1+j);function le(G,ee){var ce=p(ee);return ce<S?[G,s(M(S+ee/2))]:[G*i(ce)*(2*j-1/x(ce)),_(ee)*(2*j*(ce-S)-s(M(ce/2)))]}le.invert=function(G,ee){if((Ie=p(ee))<be)return[G,2*c(r(ee))-w];var ce=S,fe=25,Pe,Ie;do{var ke=i(ce/2),Ge=M(ce/2);ce-=Pe=(pe*(ce-S)-s(Ge)-Ie)/(pe-ke*ke/(2*Ge))}while(p(Pe)>C&&--fe>0);return[G/(i(ce)*(pe-1/x(ce))),_(ee)*ce]};var z=function(){return g.geoProjection(le).scale(112.314)};function ae(G){var ee=2*O/G;function ce(fe,Pe){var Ie=g.geoAzimuthalEquidistantRaw(fe,Pe);if(p(fe)>w){var ke=h(Ie[1],Ie[0]),Ge=ie(Ie[0]*Ie[0]+Ie[1]*Ie[1]),Je=ee*b((ke-w)/ee)+w,vt=h(x(ke-=Je),2-i(ke));ke=Je+ne(O/Ge*x(vt))-vt,Ie[0]=Ge*i(ke),Ie[1]=Ge*x(ke)}return Ie}return ce.invert=function(fe,Pe){var Ie=ie(fe*fe+Pe*Pe);if(Ie>w){var ke=h(Pe,fe),Ge=ee*b((ke-w)/ee)+w,Je=ke>Ge?-1:1,vt=Ie*i(Ge-ke),_t=1/M(Je*K((vt-O)/ie(O*(O-2*vt)+Ie*Ie)));ke=Ge+2*c((_t+Je*ie(_t*_t-3))/3),fe=Ie*i(ke),Pe=Ie*x(ke)}return g.geoAzimuthalEquidistantRaw.invert(fe,Pe)},ce}var V=function(){var ee=5,ce=g.geoProjectionMutator(ae),fe=ce(ee),Pe=fe.stream,Ie=.01,ke=-i(Ie*J),Ge=x(Ie*J);return fe.lobes=function(Je){return arguments.length?ce(ee=+Je):ee},fe.stream=function(Je){var vt=fe.rotate(),_t=Pe(Je),Rt=(fe.rotate([0,0]),Pe(Je));return fe.rotate(vt),_t.sphere=function(){Rt.polygonStart(),Rt.lineStart();for(var Pt=0,Gt=360/ee,ur=2*O/ee,hr=90-180/ee,nn=w;Pt<ee;++Pt,hr-=Gt,nn-=ur)Rt.point(h(Ge*i(nn),ke)*H,ne(Ge*x(nn))*H),hr<-90?(Rt.point(-90,-180-hr-Ie),Rt.point(-90,-180-hr+Ie)):(Rt.point(90,hr+Ie),Rt.point(90,hr-Ie));Rt.lineEnd(),Rt.polygonEnd()},_t},fe.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)};function re(G,ee){var ce=G*x(ee),fe=30,Pe;do ee-=Pe=(ee+x(ee)-ce)/(1+i(ee));while(p(Pe)>P&&--fe>0);return ee/2}function te(G,ee,ce){function fe(Pe,Ie){return[G*Pe*i(Ie=re(ce,Ie)),ee*x(Ie)]}return fe.invert=function(Pe,Ie){return Ie=ne(Ie/ee),[Pe/(G*i(Ie)),ne((2*Ie+x(2*Ie))/ce)]},fe}var q=te(j/w,j,O),ve=function(){return g.geoProjection(q).scale(169.529)},Me=2.00276,De=1.11072;function ze(G,ee){var ce=re(O,ee);return[Me*G/(1/i(ee)+De/i(ce)),(ee+j*x(ce))/Me]}ze.invert=function(G,ee){var ce=Me*ee,fe=ee<0?-S:S,Pe=25,Ie,ke;do ke=ce-j*x(fe),fe-=Ie=(x(2*fe)+2*fe-O*x(ke))/(2*i(2*fe)+2+O*i(ke)*j*i(fe));while(p(Ie)>P&&--Pe>0);return ke=ce-j*x(fe),[G*(1/i(ke)+De/i(fe))/Me,ke]};var We=function(){return g.geoProjection(ze).scale(160.857)},He=function(ee){var ce=0,fe=g.geoProjectionMutator(ee),Pe=fe(ce);return Pe.parallel=function(Ie){return arguments.length?fe(ce=Ie*J):ce*H},Pe};function $e(G,ee){return[G*i(ee),ee]}$e.invert=function(G,ee){return[G/i(ee),ee]};var It=function(){return g.geoProjection($e).scale(152.63)};function Yt(G){if(!G)return $e;var ee=1/M(G);function ce(fe,Pe){var Ie=ee+G-Pe,ke=Ie&&fe*i(Pe)/Ie;return[Ie*x(ke),ee-Ie*i(ke)]}return ce.invert=function(fe,Pe){var Ie=ie(fe*fe+(Pe=ee-Pe)*Pe),ke=ee+G-Ie;return[Ie/i(ke)*h(fe,Pe),ke]},ce}var rr=function(){return He(Yt).scale(123.082).center([0,26.1441]).parallel(45)};function ir(G){function ee(ce,fe){var Pe=w-fe,Ie=Pe&&ce*G*x(Pe)/Pe;return[Pe*x(Ie)/G,w-Pe*i(Ie)]}return ee.invert=function(ce,fe){var Pe=ce*G,Ie=w-fe,ke=ie(Pe*Pe+Ie*Ie),Ge=h(Pe,Ie);return[(ke?ke/x(ke):1)*Ge/G,w-ke]},ee}var Br=function(){var ee=.5,ce=g.geoProjectionMutator(ir),fe=ce(ee);return fe.fraction=function(Pe){return arguments.length?ce(ee=+Pe):ee},fe.scale(158.837)},tr=te(1,4/O,O),ft=function(){return g.geoProjection(tr).scale(152.63)};function st(G,ee,ce,fe,Pe,Ie){var ke=i(Ie),Ge;if(p(G)>1||p(Ie)>1)Ge=K(ce*Pe+ee*fe*ke);else{var Je=x(G/2),vt=x(Ie/2);Ge=2*ne(ie(Je*Je+ee*fe*vt*vt))}return p(Ge)>P?[Ge,h(fe*x(Ie),ee*Pe-ce*fe*ke)]:[0,0]}function Tt(G,ee,ce){return K((G*G+ee*ee-ce*ce)/(2*G*ee))}function Qe(G){return G-2*O*n((G+O)/(2*O))}function it(G,ee,ce){for(var fe=[[G[0],G[1],x(G[1]),i(G[1])],[ee[0],ee[1],x(ee[1]),i(ee[1])],[ce[0],ce[1],x(ce[1]),i(ce[1])]],Pe=fe[2],Ie,ke=0;ke<3;++ke,Pe=Ie)Ie=fe[ke],Pe.v=st(Ie[1]-Pe[1],Pe[3],Pe[2],Ie[3],Ie[2],Ie[0]-Pe[0]),Pe.point=[0,0];var Ge=Tt(fe[0].v[0],fe[2].v[0],fe[1].v[0]),Je=Tt(fe[0].v[0],fe[1].v[0],fe[2].v[0]),vt=O-Ge;fe[2].point[1]=0,fe[0].point[0]=-(fe[1].point[0]=fe[0].v[0]/2);var _t=[fe[2].point[0]=fe[0].point[0]+fe[2].v[0]*i(Ge),2*(fe[0].point[1]=fe[1].point[1]=fe[2].v[0]*x(Ge))];function Rt(Pt,Gt){var ur=x(Gt),hr=i(Gt),nn=new Array(3),Yr;for(Yr=0;Yr<3;++Yr){var Tn=fe[Yr];if(nn[Yr]=st(Gt-Tn[1],Tn[3],Tn[2],hr,ur,Pt-Tn[0]),!nn[Yr][0])return Tn.point;nn[Yr][1]=Qe(nn[Yr][1]-Tn.v[1])}var In=_t.slice();for(Yr=0;Yr<3;++Yr){var si=Yr==2?0:Yr+1,ni=Tt(fe[Yr].v[0],nn[Yr][0],nn[si][0]);nn[Yr][1]<0&&(ni=-ni),Yr?Yr==1?(ni=Je-ni,In[0]-=nn[Yr][0]*i(ni),In[1]-=nn[Yr][0]*x(ni)):(ni=vt-ni,In[0]+=nn[Yr][0]*i(ni),In[1]+=nn[Yr][0]*x(ni)):(In[0]+=nn[Yr][0]*i(ni),In[1]-=nn[Yr][0]*x(ni))}return In[0]/=3,In[1]/=3,In}return Rt}function zt(G){return G[0]*=J,G[1]*=J,G}function Qt(){return Ar([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ar(G,ee,ce){var fe=g.geoCentroid({type:"MultiPoint",coordinates:[G,ee,ce]}),Pe=[-fe[0],-fe[1]],Ie=g.geoRotation(Pe),ke=g.geoProjection(it(zt(Ie(G)),zt(Ie(ee)),zt(Ie(ce)))).rotate(Pe),Ge=ke.center;return delete ke.rotate,ke.center=function(Je){return arguments.length?Ge(Ie(Je)):Ie.invert(Ge())},ke.clipAngle(90)}function zr(G,ee){var ce=ie(1-x(ee));return[2/N*G*ce,N*(1-ce)]}zr.invert=function(G,ee){var ce=(ce=ee/N-1)*ce;return[ce>0?G*ie(O/ce)/2:0,ne(1-ce)]};var ct=function(){return g.geoProjection(zr).scale(95.6464).center([0,30])};function ot(G){var ee=M(G);function ce(fe,Pe){return[fe,(fe?fe/x(fe):1)*(x(Pe)*i(fe)-ee*i(Pe))]}return ce.invert=ee?function(fe,Pe){fe&&(Pe*=x(fe)/fe);var Ie=i(fe);return[fe,2*h(ie(Ie*Ie+ee*ee-Pe*Pe)-Ie,ee-Pe)]}:function(fe,Pe){return[fe,ne(fe?Pe*M(fe)/fe:Pe)]},ce}var xt=function(){return He(ot).scale(249.828).clipAngle(90)},Bt=ie(3);function Ke(G,ee){return[Bt*G*(2*i(2*ee/3)-1)/N,Bt*N*x(ee/3)]}Ke.invert=function(G,ee){var ce=3*ne(ee/(Bt*N));return[N*G/(Bt*(2*i(2*ce/3)-1)),ce]};var lt=function(){return g.geoProjection(Ke).scale(156.19)};function mt(G){var ee=i(G);function ce(fe,Pe){return[fe*ee,x(Pe)/ee]}return ce.invert=function(fe,Pe){return[fe/ee,ne(Pe*ee)]},ce}var qe=function(){return He(mt).parallel(38.58).scale(195.044)};function yt(G){var ee=i(G);function ce(fe,Pe){return[fe*ee,(1+ee)*M(Pe/2)]}return ce.invert=function(fe,Pe){return[fe/ee,c(Pe/(1+ee))*2]},ce}var qt=function(){return He(yt).scale(124.75)};function Er(G,ee){var ce=ie(8/(3*O));return[ce*G*(1-p(ee)/O),ce*ee]}Er.invert=function(G,ee){var ce=ie(8/(3*O)),fe=ee/ce;return[G/(ce*(1-p(fe)/O)),fe]};var Zr=function(){return g.geoProjection(Er).scale(165.664)};function Dr(G,ee){var ce=ie(4-3*x(p(ee)));return[2/ie(6*O)*G*ce,_(ee)*ie(2*O/3)*(2-ce)]}Dr.invert=function(G,ee){var ce=2-p(ee)/ie(2*O/3);return[G*ie(6*O)/(2*ce),_(ee)*ne((4-ce*ce)/3)]};var Cr=function(){return g.geoProjection(Dr).scale(165.664)};function mn(G,ee){var ce=ie(O*(4+O));return[2/ce*G*(1+ie(1-4*ee*ee/(O*O))),4/ce*ee]}mn.invert=function(G,ee){var ce=ie(O*(4+O))/2;return[G*ce/(1+ie(1-ee*ee*(4+O)/(4*O))),ee*ce/2]};var xn=function(){return g.geoProjection(mn).scale(180.739)};function lr(G,ee){var ce=(2+w)*x(ee);ee/=2;for(var fe=0,Pe=Infinity;fe<10&&p(Pe)>P;fe++){var Ie=i(ee);ee-=Pe=(ee+x(ee)*(Ie+2)-ce)/(2*Ie*(1+Ie))}return[2/ie(O*(4+O))*G*(1+i(ee)),2*ie(O/(4+O))*x(ee)]}lr.invert=function(G,ee){var ce=ee*ie((4+O)/O)/2,fe=ne(ce),Pe=i(fe);return[G/(2/ie(O*(4+O))*(1+Pe)),ne((fe+ce*(Pe+2))/(2+w))]};var An=function(){return g.geoProjection(lr).scale(180.739)};function On(G,ee){return[G*(1+i(ee))/ie(2+O),2*ee/ie(2+O)]}On.invert=function(G,ee){var ce=ie(2+O),fe=ee*ce/2;return[ce*G/(1+i(fe)),fe]};var Mt=function(){return g.geoProjection(On).scale(173.044)};function er(G,ee){for(var ce=(1+w)*x(ee),fe=0,Pe=Infinity;fe<10&&p(Pe)>P;fe++)ee-=Pe=(ee+x(ee)-ce)/(1+i(ee));return ce=ie(2+O),[G*(1+i(ee))/ce,2*ee/ce]}er.invert=function(G,ee){var ce=1+w,fe=ie(ce/2);return[G*2*fe/(1+i(ee*=fe)),ne((ee+x(ee))/ce)]};var $t=function(){return g.geoProjection(er).scale(173.044)},Tr=3+2*j;function Mr(G,ee){var ce=x(G/=2),fe=i(G),Pe=ie(i(ee)),Ie=i(ee/=2),ke=x(ee)/(Ie+j*fe*Pe),Ge=ie(2/(1+ke*ke)),Je=ie((j*Ie+(fe+ce)*Pe)/(j*Ie+(fe-ce)*Pe));return[Tr*(Ge*(Je-1/Je)-2*s(Je)),Tr*(Ge*ke*(Je+1/Je)-2*c(ke))]}Mr.invert=function(G,ee){if(!(Ie=xe.invert(G/1.2,ee*1.065)))return null;var ce=Ie[0],fe=Ie[1],Pe=20,Ie;G/=Tr,ee/=Tr;do{var ke=ce/2,Ge=fe/2,Je=x(ke),vt=i(ke),_t=x(Ge),Rt=i(Ge),Pt=i(fe),Gt=ie(Pt),ur=_t/(Rt+j*vt*Gt),hr=ur*ur,nn=ie(2/(1+hr)),Yr=j*Rt+(vt+Je)*Gt,Tn=j*Rt+(vt-Je)*Gt,In=Yr/Tn,si=ie(In),ni=si-1/si,Ci=si+1/si,Ji=nn*ni-2*s(si)-G,ha=nn*ur*Ci-2*c(ur)-ee,ya=_t&&I*Gt*Je*hr/_t,to=(j*vt*Rt+Gt)/(2*(Rt+j*vt*Gt)*(Rt+j*vt*Gt)*Gt),wo=-.5*ur*nn*nn*nn,ta=wo*ya,Ka=wo*to,Ga=(Ga=2*Rt+j*Gt*(vt-Je))*Ga*si,ua=(j*vt*Rt*Gt+Pt)/Ga,Xa=-(j*Je*_t)/(Gt*Ga),Ea=ni*ta-2*ua/si+nn*(ua+ua/In),ro=ni*Ka-2*Xa/si+nn*(Xa+Xa/In),Co=ur*Ci*ta-2*ya/(1+hr)+nn*Ci*ya+nn*ur*(ua-ua/In),iu=ur*Ci*Ka-2*to/(1+hr)+nn*Ci*to+nn*ur*(Xa-Xa/In),$s=ro*Co-iu*Ea;if(!$s)break;var Eu=(ha*ro-Ji*iu)/$s,Ds=(Ji*Co-ha*Ea)/$s;ce-=Eu,fe=f(-w,u(w,fe-Ds))}while((p(Eu)>P||p(Ds)>P)&&--Pe>0);return p(p(fe)-w)<P?[0,fe]:Pe&&[ce,fe]};var Hr=function(){return g.geoProjection(Mr).scale(62.5271)},wr=i(35*J);function Ur(G,ee){var ce=M(ee/2);return[G*wr*ie(1-ce*ce),(1+wr)*ce]}Ur.invert=function(G,ee){var ce=ee/(1+wr);return[G&&G/(wr*ie(1-ce*ce)),2*c(ce)]};var fn=function(){return g.geoProjection(Ur).scale(137.152)};function tn(G,ee){var ce=ee/2,fe=i(ce);return[2*G/N*i(ee)*fe*fe,N*M(ce)]}tn.invert=function(G,ee){var ce=c(ee/N),fe=i(ce),Pe=2*ce;return[G*N/2/(i(Pe)*fe*fe),Pe]};var Rr=function(){return g.geoProjection(tn).scale(135.264)};function Nn(G){return[G[0]/2,ne(M(G[1]/2*J))*H]}function En(G){return[G[0]*2,2*c(x(G[1]*J))*H]}var Yn=function(ee){ee==null&&(ee=g.geoOrthographic);var ce=ee(),fe=g.geoEquirectangular().scale(H).precision(0).clipAngle(null).translate([0,0]);function Pe(ke){return ce(Nn(ke))}ce.invert&&(Pe.invert=function(ke){return En(ce.invert(ke))}),Pe.stream=function(ke){var Ge=ce.stream(ke),Je=fe.stream({point:function(_t,Rt){Ge.point(_t/2,ne(M(-Rt/2*J))*H)},lineStart:function(){Ge.lineStart()},lineEnd:function(){Ge.lineEnd()},polygonStart:function(){Ge.polygonStart()},polygonEnd:function(){Ge.polygonEnd()}});return Je.sphere=Ge.sphere,Je};function Ie(ke){Pe[ke]=function(Ge){return arguments.length?(ce[ke](Ge),Pe):ce[ke]()}}return Pe.rotate=function(ke){return arguments.length?(fe.rotate(ke),Pe):fe.rotate()},Pe.center=function(ke){return arguments.length?(ce.center(Nn(ke)),Pe):En(ce.center())},Ie("clipAngle"),Ie("clipExtent"),Ie("scale"),Ie("translate"),Ie("precision"),Pe.scale(249.5)};function wi(G,ee){var ce=2*O/ee,fe=G*G;function Pe(Ie,ke){var Ge=g.geoAzimuthalEquidistantRaw(Ie,ke),Je=Ge[0],vt=Ge[1],_t=Je*Je+vt*vt;if(_t>fe){var Rt=ie(_t),Pt=h(vt,Je),Gt=ce*b(Pt/ce),ur=Pt-Gt,hr=G*i(ur),nn=(G*x(ur)-ur*x(hr))/(w-hr),Yr=$a(ur,nn),Tn=(O-G)/so(Yr,hr,O);Je=Rt;var In=50,si;do Je-=si=(G+so(Yr,hr,Je)*Tn-Rt)/(Yr(Je)*Tn);while(p(si)>P&&--In>0);vt=ur*x(Je),Je<w&&(vt-=nn*(Je-w));var ni=x(Gt),Ci=i(Gt);Ge[0]=Je*Ci-vt*ni,Ge[1]=Je*ni+vt*Ci}return Ge}return Pe.invert=function(Ie,ke){var Ge=Ie*Ie+ke*ke;if(Ge>fe){var Je=ie(Ge),vt=h(ke,Ie),_t=ce*b(vt/ce),Rt=vt-_t;Ie=Je*i(Rt),ke=Je*x(Rt);for(var Pt=Ie-w,Gt=x(Ie),ur=ke/Gt,hr=Ie<w?Infinity:0,nn=10;;){var Yr=G*x(ur),Tn=G*i(ur),In=x(Tn),si=w-Tn,ni=(Yr-ur*In)/si,Ci=$a(ur,ni);if(p(hr)<C||!--nn)break;ur-=hr=(ur*Gt-ni*Pt-ke)/(Gt-Pt*2*(si*(Tn+ur*Yr*i(Tn)-In)-Yr*(Yr-ur*In))/(si*si))}Je=G+so(Ci,Tn,Ie)*(O-G)/so(Ci,Tn,O),vt=_t+ur,Ie=Je*i(vt),ke=Je*x(vt)}return g.geoAzimuthalEquidistantRaw.invert(Ie,ke)},Pe}function $a(G,ee){return function(ce){var fe=G*i(ce);return ce<w&&(fe-=ee),ie(1+fe*fe)}}function so(G,ee,ce){for(var fe=50,Pe=(ce-ee)/fe,Ie=G(ee)+G(ce),ke=1,Ge=ee;ke<fe;++ke)Ie+=2*G(Ge+=Pe);return Ie*.5*Pe}var Po=function(){var ee=6,ce=30*J,fe=i(ce),Pe=x(ce),Ie=g.geoProjectionMutator(wi),ke=Ie(ce,ee),Ge=ke.stream,Je=.01,vt=-i(Je*J),_t=x(Je*J);return ke.radius=function(Rt){return arguments.length?(fe=i(ce=Rt*J),Pe=x(ce),Ie(ce,ee)):ce*H},ke.lobes=function(Rt){return arguments.length?Ie(ce,ee=+Rt):ee},ke.stream=function(Rt){var Pt=ke.rotate(),Gt=Ge(Rt),ur=(ke.rotate([0,0]),Ge(Rt));return ke.rotate(Pt),Gt.sphere=function(){ur.polygonStart(),ur.lineStart();for(var hr=0,nn=2*O/ee,Yr=0;hr<ee;++hr,Yr-=nn)ur.point(h(_t*i(Yr),vt)*H,ne(_t*x(Yr))*H),ur.point(h(Pe*i(Yr-nn/2),fe)*H,ne(Pe*x(Yr-nn/2))*H);ur.lineEnd(),ur.polygonEnd()},Gt},ke.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)},Ro=function(ee,ce,fe,Pe,Ie,ke,Ge,Je){arguments.length<8&&(Je=0);function vt(_t,Rt){if(!Rt)return[ee*_t/O,0];var Pt=Rt*Rt,Gt=ee+Pt*(ce+Pt*(fe+Pt*Pe)),ur=Rt*(Ie-1+Pt*(ke-Je+Pt*Ge)),hr=(Gt*Gt+ur*ur)/(2*ur),nn=_t*ne(Gt/hr)/O;return[hr*x(nn),Rt*(1+Pt*Je)+hr*(1-i(nn))]}return vt.invert=function(_t,Rt){var Pt=O*_t/ee,Gt=Rt,ur,hr,nn=50;do{var Yr=Gt*Gt,Tn=ee+Yr*(ce+Yr*(fe+Yr*Pe)),In=Gt*(Ie-1+Yr*(ke-Je+Yr*Ge)),si=Tn*Tn+In*In,ni=2*In,Ci=si/ni,Ji=Ci*Ci,ha=ne(Tn/Ci)/O,ya=Pt*ha,to=Tn*Tn,wo=(2*ce+Yr*(4*fe+Yr*6*Pe))*Gt,ta=Ie+Yr*(3*ke+Yr*5*Ge),Ka=2*(Tn*wo+In*(ta-1)),Ga=2*(ta-1),ua=(Ka*ni-si*Ga)/(ni*ni),Xa=i(ya),Ea=x(ya),ro=Ci*Xa,Co=Ci*Ea,iu=Pt/O*(1/ie(1-to/Ji))*(wo*Ci-Tn*ua)/Ji,$s=Co-_t,Eu=Gt*(1+Yr*Je)+Ci-ro-Rt,Ds=ua*Ea+ro*iu,qs=ro*ha,vl=1+ua-(ua*Xa-Co*iu),Xu=Co*ha,pc=Ds*Xu-vl*qs;if(!pc)break;Pt-=ur=(Eu*Ds-$s*vl)/pc,Gt-=hr=($s*Xu-Eu*qs)/pc}while((p(ur)>P||p(hr)>P)&&--nn>0);return[Pt,Gt]},vt},So=Ro(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Va=function(){return g.geoProjection(So).scale(149.995)},ws=Ro(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),ps=function(){return g.geoProjection(ws).scale(153.93)},Ao=Ro(5/6*O,-.62636,-.0344,0,1.3493,-.05524,0,.045),zs=function(){return g.geoProjection(Ao).scale(130.945)};function Qa(G,ee){var ce=G*G,fe=ee*ee;return[G*(1-.162388*fe)*(.87-952426e-9*ce*ce),ee*(1+fe/12)]}Qa.invert=function(G,ee){var ce=G,fe=ee,Pe=50,Ie;do{var ke=fe*fe;fe-=Ie=(fe*(1+ke/12)-ee)/(1+ke/4)}while(p(Ie)>P&&--Pe>0);Pe=50,G/=1-.162388*ke;do{var Ge=(Ge=ce*ce)*Ge;ce-=Ie=(ce*(.87-952426e-9*Ge)-G)/(.87-.00476213*Ge)}while(p(Ie)>P&&--Pe>0);return[ce,fe]};var fs=function(){return g.geoProjection(Qa).scale(131.747)},Vs=Ro(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),Ju=function(){return g.geoProjection(Vs).scale(131.087)},ts=function(ee){var ce=ee(w,0)[0]-ee(-w,0)[0];function fe(Pe,Ie){var ke=Pe>0?-.5:.5,Ge=ee(Pe+ke*O,Ie);return Ge[0]-=ke*ce,Ge}return ee.invert&&(fe.invert=function(Pe,Ie){var ke=Pe>0?-.5:.5,Ge=ee.invert(Pe+ke*ce,Ie),Je=Ge[0]-ke*O;return Je<-O?Je+=2*O:Je>O&&(Je-=2*O),Ge[0]=Je,Ge}),fe};function Zs(G,ee){var ce=_(G),fe=_(ee),Pe=i(ee),Ie=i(G)*Pe,ke=x(G)*Pe,Ge=x(fe*ee);G=p(h(ke,Ge)),ee=ne(Ie),p(G-w)>P&&(G%=w);var Je=ys(G>O/4?w-G:G,ee);return G>O/4&&(Ge=Je[0],Je[0]=-Je[1],Je[1]=-Ge),Je[0]*=ce,Je[1]*=-fe,Je}Zs.invert=function(G,ee){p(G)>1&&(G=_(G)*2-G),p(ee)>1&&(ee=_(ee)*2-ee);var ce=_(G),fe=_(ee),Pe=-ce*G,Ie=-fe*ee,ke=Ie/Pe<1,Ge=Lt(ke?Ie:Pe,ke?Pe:Ie),Je=Ge[0],vt=Ge[1],_t=i(vt);return ke&&(Je=-w-Je),[ce*(h(x(Je)*_t,-x(vt))+O),fe*ne(i(Je)*_t)]};function ys(G,ee){if(ee===w)return[0,0];var ce=x(ee),fe=ce*ce,Pe=fe*fe,Ie=1+Pe,ke=1+3*Pe,Ge=1-Pe,Je=ne(1/ie(Ie)),vt=Ge+fe*Ie*Je,_t=(1-ce)/vt,Rt=ie(_t),Pt=_t*Ie,Gt=ie(Pt),ur=Rt*Ge,hr,nn;if(G===0)return[0,-(ur+fe*Gt)];var Yr=i(ee),Tn=1/Yr,In=2*ce*Yr,si=(-3*fe+Je*ke)*In,ni=(-vt*Yr-(1-ce)*si)/(vt*vt),Ci=.5*ni/Rt,Ji=Ge*Ci-2*fe*Rt*In,ha=fe*Ie*ni+_t*ke*In,ya=-Tn*In,to=-Tn*ha,wo=-2*Tn*Ji,ta=4*G/O,Ka;if(G>.222*O||ee<O/4&&G>.175*O){if(hr=(ur+fe*ie(Pt*(1+Pe)-ur*ur))/(1+Pe),G>O/4)return[hr,hr];var Ga=hr,ua=.5*hr;hr=.5*(ua+Ga),nn=50;do{var Xa=ie(Pt-hr*hr),Ea=hr*(wo+ya*Xa)+to*ne(hr/Gt)-ta;if(!Ea)break;Ea<0?ua=hr:Ga=hr,hr=.5*(ua+Ga)}while(p(Ga-ua)>P&&--nn>0)}else{hr=P,nn=25;do{var ro=hr*hr,Co=ie(Pt-ro),iu=wo+ya*Co,$s=hr*iu+to*ne(hr/Gt)-ta,Eu=iu+(to-ya*ro)/Co;hr-=Ka=Co?$s/Eu:0}while(p(Ka)>P&&--nn>0)}return[hr,-ur-fe*ie(Pt-hr*hr)]}function Lt(G,ee){for(var ce=0,fe=1,Pe=.5,Ie=50;;){var ke=Pe*Pe,Ge=ie(Pe),Je=ne(1/ie(1+ke)),vt=1-ke+Pe*(1+ke)*Je,_t=(1-Ge)/vt,Rt=ie(_t),Pt=_t*(1+ke),Gt=Rt*(1-ke),ur=Pt-G*G,hr=ie(ur),nn=ee+Gt+Pe*hr;if(p(fe-ce)<C||--Ie==0||nn===0)break;nn>0?ce=Pe:fe=Pe,Pe=.5*(ce+fe)}if(!Ie)return null;var Yr=ne(Ge),Tn=i(Yr),In=1/Tn,si=2*Ge*Tn,ni=(-3*Pe+Je*(1+3*ke))*si,Ci=(-vt*Tn-(1-Ge)*ni)/(vt*vt),Ji=.5*Ci/Rt,ha=(1-ke)*Ji-2*Pe*Rt*si,ya=-2*In*ha,to=-In*si,wo=-In*(Pe*(1+ke)*Ci+_t*(1+3*ke)*si);return[O/4*(G*(ya+to*hr)+wo*ne(G/ie(Pt))),Yr]}var at=function(){return g.geoProjection(ts(Zs)).scale(239.75)};function Ye(G,ee,ce){var fe,Pe,Ie;return G?(fe=St(G,ce),ee?(Pe=St(ee,1-ce),Ie=Pe[1]*Pe[1]+ce*fe[0]*fe[0]*Pe[0]*Pe[0],[[fe[0]*Pe[2]/Ie,fe[1]*fe[2]*Pe[0]*Pe[1]/Ie],[fe[1]*Pe[1]/Ie,-fe[0]*fe[2]*Pe[0]*Pe[2]/Ie],[fe[2]*Pe[1]*Pe[2]/Ie,-ce*fe[0]*fe[1]*Pe[0]/Ie]]):[[fe[0],0],[fe[1],0],[fe[2],0]]):(Pe=St(ee,1-ce),[[0,Pe[0]/Pe[1]],[1/Pe[1],0],[Pe[2]/Pe[1],0]])}function St(G,ee){var ce,fe,Pe,Ie,ke;if(ee<P)return Ie=x(G),fe=i(G),ce=ee*(G-Ie*fe)/4,[Ie-ce*fe,fe+ce*Ie,1-ee*Ie*Ie/2,G-ce];if(ee>=1-P)return ce=(1-ee)/4,fe=Re(G),Ie=de(G),Pe=1/fe,ke=fe*we(G),[Ie+ce*(ke-G)/(fe*fe),Pe-ce*Ie*Pe*(ke-G),Pe+ce*Ie*Pe*(ke+G),2*c(r(G))-w+ce*(ke-G)/fe];var Ge=[1,0,0,0,0,0,0,0,0],Je=[ie(ee),0,0,0,0,0,0,0,0],vt=0;for(fe=ie(1-ee),ke=1;p(Je[vt]/Ge[vt])>P&&vt<8;)ce=Ge[vt++],Je[vt]=(ce-fe)/2,Ge[vt]=(ce+fe)/2,fe=ie(ce*fe),ke*=2;Pe=ke*Ge[vt]*G;do Ie=Je[vt]*x(fe=Pe)/Ge[vt],Pe=(ne(Ie)+Pe)/2;while(--vt);return[x(Pe),Ie=i(Pe),Ie/i(Pe-fe),Pe]}function fr(G,ee,ce){var fe=p(G),Pe=p(ee),Ie=we(Pe);if(fe){var ke=1/x(fe),Ge=1/(M(fe)*M(fe)),Je=-(Ge+ce*(Ie*Ie*ke*ke)-1+ce),vt=(ce-1)*Ge,_t=(-Je+ie(Je*Je-4*vt))/2;return[Gr(c(1/ie(_t)),ce)*_(G),Gr(c(ie((_t/Ge-1)/ce)),1-ce)*_(ee)]}return[0,Gr(c(Ie),1-ce)*_(ee)]}function Gr(G,ee){if(!ee)return G;if(ee===1)return s(M(G/2+S));for(var ce=1,fe=ie(1-ee),Pe=ie(ee),Ie=0;p(Pe)>P;Ie++){if(G%O){var ke=c(fe*M(G)/ce);ke<0&&(ke+=O),G+=ke+~~(G/O)*O}else G+=G;Pe=(ce+fe)/2,fe=ie(ce*fe),Pe=((ce=Pe)-fe)/2}return G/(d(2,Ie)*ce)}function hn(G,ee){var ce=(j-1)/(j+1),fe=ie(1-ce*ce),Pe=Gr(w,fe*fe),Ie=-1,ke=s(M(O/4+p(ee)/2)),Ge=r(Ie*ke)/ie(ce),Je=un(Ge*i(Ie*G),Ge*x(Ie*G)),vt=fr(Je[0],Je[1],fe*fe);return[-vt[1],(ee>=0?1:-1)*(.5*Pe-vt[0])]}function un(G,ee){var ce=G*G,fe=ee+1,Pe=1-ce-ee*ee;return[.5*((G>=0?w:-w)-h(Pe,2*G)),-.25*s(Pe*Pe+4*ce)+.5*s(fe*fe+ce)]}function Qn(G,ee){var ce=ee[0]*ee[0]+ee[1]*ee[1];return[(G[0]*ee[0]+G[1]*ee[1])/ce,(G[1]*ee[0]-G[0]*ee[1])/ce]}hn.invert=function(G,ee){var ce=(j-1)/(j+1),fe=ie(1-ce*ce),Pe=Gr(w,fe*fe),Ie=-1,ke=Ye(.5*Pe-ee,-G,fe*fe),Ge=Qn(ke[0],ke[1]),Je=h(Ge[1],Ge[0])/Ie;return[Je,2*c(r(.5/Ie*s(ce*Ge[0]*Ge[0]+ce*Ge[1]*Ge[1])))-w]};var Ai=function(){return g.geoProjection(ts(hn)).scale(151.496)};function bi(G,ee){if(arguments.length<2&&(ee=G),ee===1)return g.geoAzimuthalEqualAreaRaw;if(ee===Infinity)return na;function ce(fe,Pe){var Ie=g.geoAzimuthalEqualAreaRaw(fe/ee,Pe);return Ie[0]*=G,Ie}return ce.invert=function(fe,Pe){var Ie=g.geoAzimuthalEqualAreaRaw.invert(fe/G,Pe);return Ie[0]*=ee,Ie},ce}function na(G,ee){return[G*i(ee)/i(ee/=2),2*x(ee)]}na.invert=function(G,ee){var ce=2*ne(ee/2);return[G*i(ce/2)/i(ce),ce]};var Oa=function(){var ee=2,ce=g.geoProjectionMutator(bi),fe=ce(ee);return fe.coefficient=function(Pe){return arguments.length?ce(ee=+Pe):ee},fe.scale(169.529)};function fo(G){var ee=x(G),ce=i(G),fe=uo(G);fe.invert=uo(-G);function Pe(Ie,ke){var Ge=fe(Ie,ke);Ie=Ge[0],ke=Ge[1];var Je=x(ke),vt=i(ke),_t=i(Ie),Rt=K(ee*Je+ce*vt*_t),Pt=x(Rt),Gt=p(Pt)>P?Rt/Pt:1;return[Gt*ce*x(Ie),(p(Ie)>w?Gt:-Gt)*(ee*vt-ce*Je*_t)]}return Pe.invert=function(Ie,ke){var Ge=ie(Ie*Ie+ke*ke),Je=-x(Ge),vt=i(Ge),_t=Ge*vt,Rt=-ke*Je,Pt=Ge*ee,Gt=ie(_t*_t+Rt*Rt-Pt*Pt),ur=h(_t*Pt+Rt*Gt,Rt*Pt-_t*Gt),hr=(Ge>w?-1:1)*h(Ie*Je,Ge*i(ur)*vt+ke*x(ur)*Je);return fe.invert(hr,ur)},Pe}function uo(G){var ee=x(G),ce=i(G);return function(fe,Pe){var Ie=i(Pe),ke=i(fe)*Ie,Ge=x(fe)*Ie,Je=x(Pe);return[h(Ge,ke*ce-Je*ee),ne(Je*ce+ke*ee)]}}var Uo=function(){var ee=0,ce=g.geoProjectionMutator(fo),fe=ce(ee),Pe=fe.rotate,Ie=fe.stream,ke=g.geoCircle();return fe.parallel=function(Ge){if(!arguments.length)return ee*H;var Je=fe.rotate();return ce(ee=Ge*J).rotate(Je)},fe.rotate=function(Ge){return arguments.length?(Pe.call(fe,[Ge[0],Ge[1]-ee*H]),ke.center([-Ge[0],-Ge[1]]),fe):(Ge=Pe.call(fe),Ge[1]+=ee*H,Ge)},fe.stream=function(Ge){return Ge=Ie(Ge),Ge.sphere=function(){Ge.polygonStart();var Je=.01,vt=ke.radius(90-Je)().coordinates[0],_t=vt.length-1,Rt=-1,Pt;for(Ge.lineStart();++Rt<_t;)Ge.point((Pt=vt[Rt])[0],Pt[1]);for(Ge.lineEnd(),vt=ke.radius(90+Je)().coordinates[0],_t=vt.length-1,Ge.lineStart();--Rt>=0;)Ge.point((Pt=vt[Rt])[0],Pt[1]);Ge.lineEnd(),Ge.polygonEnd()},Ge},fe.scale(79.4187).parallel(45).clipAngle(180-.001)},lo=41+48/36+37/3600,go=mt(0);function Ho(G){var ee=lo*J,ce=zr(O,ee)[0]-zr(-O,ee)[0],fe=go(0,ee)[1],Pe=zr(0,ee)[1],Ie=N-Pe,ke=W/G,Ge=4/W,Je=fe+Ie*Ie*4/W;function vt(_t,Rt){var Pt,Gt=p(Rt);if(Gt>ee){var ur=u(G-1,f(0,n((_t+O)/ke)));_t+=O*(G-1)/G-ur*ke,Pt=zr(_t,Gt),Pt[0]=Pt[0]*W/ce-W*(G-1)/(2*G)+ur*W/G,Pt[1]=fe+(Pt[1]-Pe)*4*Ie/W,Rt<0&&(Pt[1]=-Pt[1])}else Pt=go(_t,Rt);return Pt[0]*=Ge,Pt[1]/=Je,Pt}return vt.invert=function(_t,Rt){_t/=Ge,Rt*=Je;var Pt=p(Rt);if(Pt>fe){var Gt=u(G-1,f(0,n((_t+O)/ke)));_t=(_t+O*(G-1)/G-Gt*ke)*ce/W;var ur=zr.invert(_t,.25*(Pt-fe)*W/Ie+Pe);return ur[0]-=O*(G-1)/G-Gt*ke,Rt<0&&(ur[1]=-ur[1]),ur}return go.invert(_t,Rt)},vt}function Qo(G){return{type:"Polygon",coordinates:[v.range(-180,180+G/2,G).map(function(ee,ce){return[ee,ce&1?90-1e-6:lo]}).concat(v.range(180,-180-G/2,-G).map(function(ee,ce){return[ee,ce&1?-90+1e-6:-lo]}))]}}var Go=function(){var ee=4,ce=g.geoProjectionMutator(Ho),fe=ce(ee),Pe=fe.stream;return fe.lobes=function(Ie){return arguments.length?ce(ee=+Ie):ee},fe.stream=function(Ie){var ke=fe.rotate(),Ge=Pe(Ie),Je=(fe.rotate([0,0]),Pe(Ie));return fe.rotate(ke),Ge.sphere=function(){g.geoStream(Qo(180/ee),Je)},Ge},fe.scale(239.75)};function _s(G){var ee=1+G,ce=x(1/ee),fe=ne(ce),Pe=2*ie(O/(Ie=O+4*fe*ee)),Ie,ke=.5*Pe*(ee+ie(G*(2+G))),Ge=G*G,Je=ee*ee;function vt(_t,Rt){var Pt=1-x(Rt),Gt,ur;if(Pt&&Pt<2){var hr=w-Rt,nn=25,Yr;do{var Tn=x(hr),In=i(hr),si=fe+h(Tn,ee-In),ni=1+Je-2*ee*In;hr-=Yr=(hr-Ge*fe-ee*Tn+ni*si-.5*Pt*Ie)/(2*ee*Tn*si)}while(p(Yr)>C&&--nn>0);Gt=Pe*ie(ni),ur=_t*si/O}else Gt=Pe*(G+Pt),ur=_t*fe/O;return[Gt*x(ur),ke-Gt*i(ur)]}return vt.invert=function(_t,Rt){var Pt=_t*_t+(Rt-=ke)*Rt,Gt=(1+Je-Pt/(Pe*Pe))/(2*ee),ur=K(Gt),hr=x(ur),nn=fe+h(hr,ee-Gt);return[ne(_t/ie(Pt))*O/nn,ne(1-2*(ur-Ge*fe-ee*hr+(1+Je-2*ee*Gt)*nn)/Ie)]},vt}var bs=function(){var ee=1,ce=g.geoProjectionMutator(_s),fe=ce(ee);return fe.ratio=function(Pe){return arguments.length?ce(ee=+Pe):ee},fe.scale(167.774).center([0,18.67])},Ks=.7109889596207567,Yo=.0528035274542;function mo(G,ee){return ee>-Ks?(G=q(G,ee),G[1]+=Yo,G):$e(G,ee)}mo.invert=function(G,ee){return ee>-Ks?q.invert(G,ee-Yo):$e.invert(G,ee)};var Rs=function(){return g.geoProjection(mo).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};function rs(G,ee){return p(ee)>Ks?(G=q(G,ee),G[1]-=ee>0?Yo:-Yo,G):$e(G,ee)}rs.invert=function(G,ee){return p(ee)>Ks?q.invert(G,ee+(ee>0?Yo:-Yo)):$e.invert(G,ee)};var Za=function(){return g.geoProjection(rs).scale(152.63)};function qa(G,ee){return p(G[0]-ee[0])<P&&p(G[1]-ee[1])<P}function Fs(G,ee){for(var ce=-1,fe=G.length,Pe=G[0],Ie,ke,Ge,Je=[];++ce<fe;){Ie=G[ce],ke=(Ie[0]-Pe[0])/ee,Ge=(Ie[1]-Pe[1])/ee;for(var vt=0;vt<ee;++vt)Je.push([Pe[0]+vt*ke,Pe[1]+vt*Ge]);Pe=Ie}return Je.push(Ie),Je}function Ou(G){var ee=[],ce,fe,Pe,Ie,ke,Ge,Je,vt=G[0].length;for(Je=0;Je<vt;++Je)ce=G[0][Je],fe=ce[0][0],Pe=ce[0][1],Ie=ce[1][1],ke=ce[2][0],Ge=ce[2][1],ee.push(Fs([[fe+P,Pe+P],[fe+P,Ie-P],[ke-P,Ie-P],[ke-P,Ge+P]],30));for(Je=G[1].length-1;Je>=0;--Je)ce=G[1][Je],fe=ce[0][0],Pe=ce[0][1],Ie=ce[1][1],ke=ce[2][0],Ge=ce[2][1],ee.push(Fs([[ke-P,Ge-P],[ke-P,Ie+P],[fe+P,Ie+P],[fe+P,Pe-P]],30));return{type:"Polygon",coordinates:[v.merge(ee)]}}var Ws=function(ee,ce){var fe=Ou(ce);ce=ce.map(function(Je){return Je.map(function(vt){return[[vt[0][0]*J,vt[0][1]*J],[vt[1][0]*J,vt[1][1]*J],[vt[2][0]*J,vt[2][1]*J]]})});var Pe=ce.map(function(Je){return Je.map(function(vt){var _t=ee(vt[0][0],vt[0][1])[0],Rt=ee(vt[2][0],vt[2][1])[0],Pt=ee(vt[1][0],vt[0][1])[1],Gt=ee(vt[1][0],vt[1][1])[1],ur;return Pt>Gt&&(ur=Pt,Pt=Gt,Gt=ur),[[_t,Pt],[Rt,Gt]]})});function Ie(Je,vt){for(var _t=vt<0?-1:1,Rt=ce[+(vt<0)],Pt=0,Gt=Rt.length-1;Pt<Gt&&Je>Rt[Pt][2][0];++Pt);var ur=ee(Je-Rt[Pt][1][0],vt);return ur[0]+=ee(Rt[Pt][1][0],_t*vt>_t*Rt[Pt][0][1]?Rt[Pt][0][1]:vt)[0],ur}ee.invert&&(Ie.invert=function(Je,vt){for(var _t=Pe[+(vt<0)],Rt=ce[+(vt<0)],Pt=0,Gt=_t.length;Pt<Gt;++Pt){var ur=_t[Pt];if(ur[0][0]<=Je&&Je<ur[1][0]&&ur[0][1]<=vt&&vt<ur[1][1]){var hr=ee.invert(Je-ee(Rt[Pt][1][0],0)[0],vt);return hr[0]+=Rt[Pt][1][0],qa(Ie(hr[0],hr[1]),[Je,vt])?hr:null}}});var ke=g.geoProjection(Ie),Ge=ke.stream;return ke.stream=function(Je){var vt=ke.rotate(),_t=Ge(Je),Rt=(ke.rotate([0,0]),Ge(Je));return ke.rotate(vt),_t.sphere=function(){g.geoStream(fe,Rt)},_t},ke},nl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Bu=function(){return Ws(ze,nl).scale(160.857)},su=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],zu=function(){return Ws(rs,su).scale(152.63)},uu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],hu=function(){return Ws(q,uu).scale(169.529)},Qu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],qo=function(){return Ws(q,Qu).scale(169.529).rotate([20,0])},du=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],ns=function(){return Ws(mo,du).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},ru=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],_u=function(){return Ws($e,ru).scale(152.63).rotate([-20,0])};function Hs(G,ee){return[3/W*G*ie(O*O/3-ee*ee),ee]}Hs.invert=function(G,ee){return[W/3*G/ie(O*O/3-ee*ee),ee]};var Ns=function(){return g.geoProjection(Hs).scale(158.837)};function Js(G){function ee(ce,fe){if(p(p(fe)-w)<P)return[0,fe<0?-2:2];var Pe=x(fe),Ie=d((1+Pe)/(1-Pe),G/2),ke=.5*(Ie+1/Ie)+i(ce*=G);return[2*x(ce)/ke,(Ie-1/Ie)/ke]}return ee.invert=function(ce,fe){var Pe=p(fe);if(p(Pe-2)<P)return ce?null:[0,_(fe)*w];if(Pe>2)return null;ce/=2,fe/=2;var Ie=ce*ce,ke=fe*fe,Ge=2*fe/(1+Ie+ke);return Ge=d((1+Ge)/(1-Ge),1/G),[h(2*ce,1-Ie-ke)/G,ne((Ge-1)/(Ge+1))]},ee}var Fu=function(){var ee=.5,ce=g.geoProjectionMutator(Js),fe=ce(ee);return fe.spacing=function(Pe){return arguments.length?ce(ee=+Pe):ee},fe.scale(124.75)},vu=O/j;function Vu(G,ee){return[G*(1+ie(i(ee)))/2,ee/(i(ee/2)*i(G/6))]}Vu.invert=function(G,ee){var ce=p(G),fe=p(ee),Pe=P,Ie=w;fe<vu?Ie*=fe/vu:Pe+=6*K(vu/fe);for(var ke=0;ke<25;ke++){var Ge=x(Ie),Je=ie(i(Ie)),vt=x(Ie/2),_t=i(Ie/2),Rt=x(Pe/6),Pt=i(Pe/6),Gt=.5*Pe*(1+Je)-ce,ur=Ie/(_t*Pt)-fe,hr=Je?-.25*Pe*Ge/Je:0,nn=.5*(1+Je),Yr=(1+.5*Ie*vt/_t)/(_t*Pt),Tn=Ie/_t*(Rt/6)/(Pt*Pt),In=hr*Tn-Yr*nn,si=(Gt*Tn-ur*nn)/In,ni=(ur*hr-Gt*Yr)/In;if(Ie-=si,Pe-=ni,p(si)<P&&p(ni)<P)break}return[G<0?-Pe:Pe,ee<0?-Ie:Ie]};var Nu=function(){return g.geoProjection(Vu).scale(97.2672)};function To(G,ee){var ce=G*G,fe=ee*ee;return[G*(.975534+fe*(-.119161+ce*-.0143059+fe*-.0547009)),ee*(1.00384+ce*(.0802894+fe*-.02855+ce*199025e-9)+fe*(.0998909+fe*-.0491032))]}To.invert=function(G,ee){var ce=_(G)*O,fe=ee/2,Pe=50;do{var Ie=ce*ce,ke=fe*fe,Ge=ce*fe,Je=ce*(.975534+ke*(-.119161+Ie*-.0143059+ke*-.0547009))-G,vt=fe*(1.00384+Ie*(.0802894+ke*-.02855+Ie*199025e-9)+ke*(.0998909+ke*-.0491032))-ee,_t=.975534-ke*(.119161+3*Ie*.0143059+ke*.0547009),Rt=-Ge*(2*.119161+4*.0547009*ke+2*.0143059*Ie),Pt=Ge*(2*.0802894+4*199025e-9*Ie+2*-.02855*ke),Gt=1.00384+Ie*(.0802894+199025e-9*Ie)+ke*(3*(.0998909-.02855*Ie)-5*.0491032*ke),ur=Rt*Pt-Gt*_t,hr=(vt*Rt-Je*Gt)/ur,nn=(Je*Pt-vt*_t)/ur;ce-=hr,fe-=nn}while((p(hr)>P||p(nn)>P)&&--Pe>0);return Pe&&[ce,fe]};var Wu=function(){return g.geoProjection(To).scale(139.98)};function Hu(G,ee){return[x(G)/i(ee),M(ee)*i(G)]}Hu.invert=function(G,ee){var ce=G*G,fe=ee*ee,Pe=fe+1,Ie=G?I*ie((Pe-ie(ce*ce+2*ce*(fe-1)+Pe*Pe))/ce+1):1/ie(Pe);return[ne(G*Ie),_(ee)*K(Ie)]};var Ru=function(){return g.geoProjection(Hu).scale(144.049).clipAngle(90-.001)};function $o(G){var ee=i(G),ce=M(S+G/2);function fe(Pe,Ie){var ke=Ie-G,Ge=p(ke)<P?Pe*ee:p(Ge=S+Ie/2)<P||p(p(Ge)-w)<P?0:Pe*ke/s(M(Ge)/ce);return[Ge,ke]}return fe.invert=function(Pe,Ie){var ke,Ge=Ie+G;return[p(Ie)<P?Pe/ee:p(ke=S+Ge/2)<P||p(p(ke)-w)<P?0:Pe*s(M(ke)/ce)/Ie,Ge]},fe}var dl=function(){return He($o).parallel(40).scale(158.837)};function Gu(G,ee){return[G,1.25*s(M(S+.4*ee))]}Gu.invert=function(G,ee){return[G,2.5*c(r(.8*ee))-.625*O]};var os=function(){return g.geoProjection(Gu).scale(108.318)};function Us(G){var ee=G.length-1;function ce(fe,Pe){for(var Ie=i(Pe),ke=2/(1+Ie*i(fe)),Ge=ke*Ie*x(fe),Je=ke*x(Pe),vt=ee,_t=G[vt],Rt=_t[0],Pt=_t[1],Gt;--vt>=0;)_t=G[vt],Rt=_t[0]+Ge*(Gt=Rt)-Je*Pt,Pt=_t[1]+Ge*Pt+Je*Gt;return Rt=Ge*(Gt=Rt)-Je*Pt,Pt=Ge*Pt+Je*Gt,[Rt,Pt]}return ce.invert=function(fe,Pe){var Ie=20,ke=fe,Ge=Pe;do{for(var Je=ee,vt=G[Je],_t=vt[0],Rt=vt[1],Pt=0,Gt=0,ur;--Je>=0;)vt=G[Je],Pt=_t+ke*(ur=Pt)-Ge*Gt,Gt=Rt+ke*Gt+Ge*ur,_t=vt[0]+ke*(ur=_t)-Ge*Rt,Rt=vt[1]+ke*Rt+Ge*ur;Pt=_t+ke*(ur=Pt)-Ge*Gt,Gt=Rt+ke*Gt+Ge*ur,_t=ke*(ur=_t)-Ge*Rt-fe,Rt=ke*Rt+Ge*ur-Pe;var hr=Pt*Pt+Gt*Gt,nn,Yr;ke-=nn=(_t*Pt+Rt*Gt)/hr,Ge-=Yr=(Rt*Pt-_t*Gt)/hr}while(p(nn)+p(Yr)>P*P&&--Ie>0);if(Ie){var Tn=ie(ke*ke+Ge*Ge),In=2*c(Tn*.5),si=x(In);return[h(ke*si,Tn*i(In)),Tn?ne(Ge*si/Tn):0]}},ce}var hs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],xs=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],il=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Tu=[[.9245,0],[0,0],[.01943,0]],Is=[[.721316,0],[0,0],[-.00881625,-.00617325]];function lu(){return jt(hs,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function bu(){return jt(xs,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function nu(){return jt(il,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Be(){return jt(Tu,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Fr(){return jt(Is,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function jt(G,ee){var ce=g.geoProjection(Us(G)).rotate(ee).clipAngle(90),fe=g.geoRotation(ee),Pe=ce.center;return delete ce.rotate,ce.center=function(Ie){return arguments.length?Pe(fe(Ie)):fe.invert(Pe())},ce}var Vt=ie(6),gt=ie(7);function ar(G,ee){var ce=ne(7*x(ee)/(3*Vt));return[Vt*G*(2*i(2*ce/3)-1)/gt,9*x(ce/3)/gt]}ar.invert=function(G,ee){var ce=3*ne(ee*gt/9);return[G*gt/(Vt*(2*i(2*ce/3)-1)),ne(x(ce)*3*Vt/7)]};var gr=function(){return g.geoProjection(ar).scale(164.859)};function en(G,ee){for(var ce=(1+I)*x(ee),fe=ee,Pe=0,Ie;Pe<25&&(fe-=Ie=(x(fe/2)+x(fe)-ce)/(.5*i(fe/2)+i(fe)),!(p(Ie)<P));Pe++);return[G*(1+2*i(fe)/i(fe/2))/(3*j),2*ie(3)*x(fe/2)/ie(2+j)]}en.invert=function(G,ee){var ce=ee*ie(2+j)/(2*ie(3)),fe=2*ne(ce);return[3*j*G/(1+2*i(fe)/i(fe/2)),ne((ce+x(fe))/(1+I))]};var Vr=function(){return g.geoProjection(en).scale(188.209)};function on(G,ee){for(var ce=ie(6/(4+O)),fe=(1+O/4)*x(ee),Pe=ee/2,Ie=0,ke;Ie<25&&(Pe-=ke=(Pe/2+x(Pe)-fe)/(.5+i(Pe)),!(p(ke)<P));Ie++);return[ce*(.5+i(Pe))*G/1.5,ce*Pe]}on.invert=function(G,ee){var ce=ie(6/(4+O)),fe=ee/ce;return p(p(fe)-w)<P&&(fe=fe<0?-w:w),[1.5*G/(ce*(.5+i(fe))),ne((fe/2+x(fe))/(1+O/4))]};var Dn=function(){return g.geoProjection(on).scale(166.518)};function di(G,ee){var ce=ee*ee,fe=ce*ce;return[G*(.8707-.131979*ce+fe*(-.013791+fe*(.003971*ce-.001529*fe))),ee*(1.007226+ce*(.015085+fe*(-.044475+.028874*ce-.005916*fe)))]}di.invert=function(G,ee){var ce=ee,fe=25,Pe;do{var Ie=ce*ce,ke=Ie*Ie;ce-=Pe=(ce*(1.007226+Ie*(.015085+ke*(-.044475+.028874*Ie-.005916*ke)))-ee)/(1.007226+Ie*(.015085*3+ke*(-.044475*7+.028874*9*Ie-.005916*11*ke)))}while(p(Pe)>P&&--fe>0);return[G/(.8707+(Ie=ce*ce)*(-.131979+Ie*(-.013791+Ie*Ie*Ie*(.003971-.001529*Ie)))),ce]};var xi=function(){return g.geoProjection(di).scale(175.295)};function ji(G,ee){var ce=ee*ee,fe=ce*ce,Pe=ce*fe;return[G*(.84719-.13063*ce+Pe*Pe*(-.04515+.05494*ce-.02326*fe+.00331*Pe)),ee*(1.01183+fe*fe*(-.02625+.01926*ce-.00396*fe))]}ji.invert=function(G,ee){var ce=ee,fe=25,Pe,Ie,ke,Ge;do Ie=ce*ce,ke=Ie*Ie,ce-=Pe=(ce*(1.01183+ke*ke*(-.02625+.01926*Ie-.00396*ke))-ee)/(1.01183+ke*ke*(9*-.02625+11*.01926*Ie+13*-.00396*ke));while(p(Pe)>C&&--fe>0);return Ie=ce*ce,ke=Ie*Ie,Ge=Ie*ke,[G/(.84719-.13063*Ie+Ge*Ge*(-.04515+.05494*Ie-.02326*ke+.00331*Ge)),ce]};var ia=function(){return g.geoProjection(ji).scale(175.295)};function ca(G,ee){return[G*(1+i(ee))/2,2*(ee-M(ee/2))]}ca.invert=function(G,ee){for(var ce=ee/2,fe=0,Pe=Infinity;fe<10&&p(Pe)>P;++fe){var Ie=i(ee/2);ee-=Pe=(ee-M(ee/2)-ce)/(1-.5/(Ie*Ie))}return[2*G/(1+i(ee)),ee]};var ea=function(){return g.geoProjection(ca).scale(152.63)},ma=1.0148,Ia=.23185,Fa=-.14499,Io=.02406,ho=ma,Ba=5*Ia,Mo=7*Fa,_o=9*Io,Da=1.790857183;function ss(G,ee){var ce=ee*ee;return[G,ee*(ma+ce*ce*(Ia+ce*(Fa+Io*ce)))]}ss.invert=function(G,ee){ee>Da?ee=Da:ee<-Da&&(ee=-Da);var ce=ee,fe;do{var Pe=ce*ce;ce-=fe=(ce*(ma+Pe*Pe*(Ia+Pe*(Fa+Io*Pe)))-ee)/(ho+Pe*Pe*(Ba+Pe*(Mo+_o*Pe)))}while(p(fe)>P);return[G,ce]};var ko=function(){return g.geoProjection(ss).scale(139.319)};function bo(G,ee){if(p(ee)<P)return[G,0];var ce=M(ee),fe=G*x(ee);return[x(fe)/ce,ee+(1-i(fe))/ce]}bo.invert=function(G,ee){if(p(ee)<P)return[G,0];var ce=G*G+ee*ee,fe=ee*.5,Pe=10,Ie;do{var ke=M(fe),Ge=1/i(fe),Je=ce-2*ee*fe+fe*fe;fe-=Ie=(ke*Je+2*(fe-ee))/(2+Je*Ge*Ge+2*(fe-ee)*ke)}while(p(Ie)>P&&--Pe>0);return ke=M(fe),[(p(ee)<p(fe+1/ke)?ne(G*ke):_(G)*(K(p(G*ke))+w))/x(fe),fe]};var Zo=function(){return g.geoProjection(bo).scale(103.74)},As=function(ee,ce){var fe=Qs(ee[1],ee[0]),Pe=Qs(ce[1],ce[0]),Ie=Es(fe,Pe),ke=Ls(fe)/Ls(Pe);return Mu([1,0,ee[0][0],0,1,ee[0][1]],Mu([ke,0,0,0,ke,0],Mu([i(Ie),x(Ie),0,-x(Ie),i(Ie),0],[1,0,-ce[0][0],0,1,-ce[0][1]])))};function us(G){var ee=1/(G[0]*G[4]-G[1]*G[3]);return[ee*G[4],-ee*G[1],ee*(G[1]*G[5]-G[2]*G[4]),-ee*G[3],ee*G[0],ee*(G[2]*G[3]-G[0]*G[5])]}function Mu(G,ee){return[G[0]*ee[0]+G[1]*ee[3],G[0]*ee[1]+G[1]*ee[4],G[0]*ee[2]+G[1]*ee[5]+G[2],G[3]*ee[0]+G[4]*ee[3],G[3]*ee[1]+G[4]*ee[4],G[3]*ee[2]+G[4]*ee[5]+G[5]]}function Qs(G,ee){return[G[0]-ee[0],G[1]-ee[1]]}function Ls(G){return ie(G[0]*G[0]+G[1]*G[1])}function Es(G,ee){return h(G[0]*ee[1]-G[1]*ee[0],G[0]*ee[0]+G[1]*ee[1])}var al=function(ee,ce,fe){fe=fe==null?-O/6:fe,Pe(ee,{transform:[i(fe),x(fe),0,-x(fe),i(fe),0]});function Pe(_t,Rt){if(_t.edges=ol(_t.face),Rt.face){var Pt=_t.shared=qu(_t.face,Rt.face),Gt=As(Pt.map(Rt.project),Pt.map(_t.project));_t.transform=Rt.transform?Mu(Rt.transform,Gt):Gt;for(var ur=Rt.edges,hr=0,nn=ur.length;hr<nn;++hr)zo(Pt[0],ur[hr][1])&&zo(Pt[1],ur[hr][0])&&(ur[hr]=_t),zo(Pt[0],ur[hr][0])&&zo(Pt[1],ur[hr][1])&&(ur[hr]=_t);for(ur=_t.edges,hr=0,nn=ur.length;hr<nn;++hr)zo(Pt[0],ur[hr][0])&&zo(Pt[1],ur[hr][1])&&(ur[hr]=Rt),zo(Pt[0],ur[hr][1])&&zo(Pt[1],ur[hr][0])&&(ur[hr]=Rt)}else _t.transform=Rt.transform;return _t.children&&_t.children.forEach(function(Yr){Pe(Yr,_t)}),_t}function Ie(_t,Rt){var Pt=ce(_t,Rt),Gt=Pt.project([_t*H,Rt*H]),ur;return(ur=Pt.transform)?[ur[0]*Gt[0]+ur[1]*Gt[1]+ur[2],-(ur[3]*Gt[0]+ur[4]*Gt[1]+ur[5])]:(Gt[1]=-Gt[1],Gt)}xu(ee)&&(Ie.invert=function(_t,Rt){var Pt=ke(ee,[_t,-Rt]);return Pt&&(Pt[0]*=J,Pt[1]*=J,Pt)});function ke(_t,Rt){var Pt=_t.project.invert,Gt=_t.transform,ur=Rt;if(Gt&&(Gt=us(Gt),ur=[Gt[0]*ur[0]+Gt[1]*ur[1]+Gt[2],Gt[3]*ur[0]+Gt[4]*ur[1]+Gt[5]]),Pt&&_t===Ge(hr=Pt(ur)))return hr;for(var hr,nn=_t.children,Yr=0,Tn=nn&&nn.length;Yr<Tn;++Yr)if(hr=ke(nn[Yr],Rt))return hr}function Ge(_t){return ce(_t[0]*J,_t[1]*J)}var Je=g.geoProjection(Ie),vt=Je.stream;return Je.stream=function(_t){var Rt=Je.rotate(),Pt=vt(_t),Gt=(Je.rotate([0,0]),vt(_t));return Je.rotate(Rt),Pt.sphere=function(){Gt.polygonStart(),Gt.lineStart(),cu(Gt,ee),Gt.lineEnd(),Gt.polygonEnd()},Pt},Je};function cu(G,ee,ce){var fe,Pe=ee.edges,Ie=Pe.length,ke,Ge={type:"MultiPoint",coordinates:ee.face},Je=ee.face.filter(function(hr){return p(hr[1])!==90}),vt=g.geoBounds({type:"MultiPoint",coordinates:Je}),_t=!1,Rt=-1,Pt=vt[1][0]-vt[0][0],Gt=Pt===180||Pt===360?[(vt[0][0]+vt[1][0])/2,(vt[0][1]+vt[1][1])/2]:g.geoCentroid(Ge);if(ce)for(;++Rt<Ie&&Pe[Rt]!==ce;);++Rt;for(var ur=0;ur<Ie;++ur)ke=Pe[(ur+Rt)%Ie],Array.isArray(ke)?(_t||(G.point((fe=g.geoInterpolate(ke[0],Gt)(P))[0],fe[1]),_t=!0),G.point((fe=g.geoInterpolate(ke[1],Gt)(P))[0],fe[1])):(_t=!1,ke!==ce&&cu(G,ke,ee))}function zo(G,ee){return G&&ee&&G[0]===ee[0]&&G[1]===ee[1]}function qu(G,ee){for(var ce,fe,Pe=G.length,Ie=null,ke=0;ke<Pe;++ke){ce=G[ke];for(var Ge=ee.length;--Ge>=0;)if(fe=ee[Ge],ce[0]===fe[0]&&ce[1]===fe[1]){if(Ie)return[Ie,ce];Ie=ce}}}function ol(G){for(var ee=G.length,ce=[],fe=G[ee-1],Pe=0;Pe<ee;++Pe)ce.push([fe,fe=G[Pe]]);return ce}function xu(G){return G.project.invert||G.children&&G.children.some(xu)}var xo=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ko=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(G){return G.map(function(ee){return xo[ee]})}),Iu=function(ee){ee=ee||function(fe){var Pe=g.geoCentroid({type:"MultiPoint",coordinates:fe});return g.geoGnomonic().scale(1).translate([0,0]).rotate([-Pe[0],-Pe[1]])};var ce=Ko.map(function(fe){return{face:fe,project:ee(fe)}});return[-1,0,0,1,0,1,4,5].forEach(function(fe,Pe){var Ie=ce[fe];Ie&&(Ie.children||(Ie.children=[])).push(ce[Pe])}),al(ce[0],function(fe,Pe){return ce[fe<-O/2?Pe<0?6:4:fe<0?Pe<0?2:0:fe<O/2?Pe<0?3:1:Pe<0?7:5]}).scale(101.858).center([0,45])},Hl=2/ie(3);function xl(G,ee){var ce=zr(G,ee);return[ce[0]*Hl,ce[1]]}xl.invert=function(G,ee){return zr.invert(G/Hl,ee)};var yl=function(ee){ee=ee||function(fe){var Pe=g.geoCentroid({type:"MultiPoint",coordinates:fe});return g.geoProjection(xl).translate([0,0]).scale(1).rotate(Pe[1]>0?[-Pe[0],0]:[180-Pe[0],180])};var ce=Ko.map(function(fe){return{face:fe,project:ee(fe)}});return[-1,0,0,1,0,1,4,5].forEach(function(fe,Pe){var Ie=ce[fe];Ie&&(Ie.children||(Ie.children=[])).push(ce[Pe])}),al(ce[0],function(fe,Pe){return ce[fe<-O/2?Pe<0?6:4:fe<0?Pe<0?2:0:fe<O/2?Pe<0?3:1:Pe<0?7:5]}).scale(121.906).center([0,48.5904])},Tc=function(ee){ee=ee||function(Ge){var Je=Ge.length===6?g.geoCentroid({type:"MultiPoint",coordinates:Ge}):Ge[0];return g.geoGnomonic().scale(1).translate([0,0]).rotate([-Je[0],-Je[1]])};var ce=Ko.map(function(Ge){for(var Je=Ge.map(ls),vt=Je.length,_t=Je[vt-1],Rt,Pt=[],Gt=0;Gt<vt;++Gt)Rt=Je[Gt],Pt.push(sl([_t[0]*.9486832980505138+Rt[0]*.31622776601683794,_t[1]*.9486832980505138+Rt[1]*.31622776601683794,_t[2]*.9486832980505138+Rt[2]*.31622776601683794]),sl([Rt[0]*.9486832980505138+_t[0]*.31622776601683794,Rt[1]*.9486832980505138+_t[1]*.31622776601683794,Rt[2]*.9486832980505138+_t[2]*.31622776601683794])),_t=Rt;return Pt}),fe=[],Pe=[-1,0,0,1,0,1,4,5];ce.forEach(function(Ge,Je){for(var vt=Ko[Je],_t=vt.length,Rt=fe[Je]=[],Pt=0;Pt<_t;++Pt)ce.push([vt[Pt],Ge[(Pt*2+2)%(2*_t)],Ge[(Pt*2+1)%(2*_t)]]),Pe.push(Je),Rt.push(_l(ls(Ge[(Pt*2+2)%(2*_t)]),ls(Ge[(Pt*2+1)%(2*_t)])))});var Ie=ce.map(function(Ge){return{project:ee(Ge),face:Ge}});Pe.forEach(function(Ge,Je){var vt=Ie[Ge];vt&&(vt.children||(vt.children=[])).push(Ie[Je])});function ke(Ge,Je){var vt=i(Je),_t=[vt*i(Ge),vt*x(Ge),x(Je)],Rt=Ge<-O/2?Je<0?6:4:Ge<0?Je<0?2:0:Ge<O/2?Je<0?3:1:Je<0?7:5,Pt=fe[Rt];return Ie[El(Pt[0],_t)<0?8+3*Rt:El(Pt[1],_t)<0?8+3*Rt+1:El(Pt[2],_t)<0?8+3*Rt+2:Rt]}return al(Ie[0],ke).scale(110.625).center([0,45])};function El(G,ee){for(var ce=0,fe=G.length,Pe=0;ce<fe;++ce)Pe+=G[ce]*ee[ce];return Pe}function _l(G,ee){return[G[1]*ee[2]-G[2]*ee[1],G[2]*ee[0]-G[0]*ee[2],G[0]*ee[1]-G[1]*ee[0]]}function sl(G){return[h(G[1],G[0])*H,ne(f(-1,u(1,G[2])))*H]}function ls(G){var ee=G[0]*J,ce=G[1]*J,fe=i(ce);return[fe*i(ee),fe*x(ee),x(ce)]}var gs=function(){},ht=function(ee){if((fe=ee.length)<4)return!1;for(var ce=0,fe,Pe=ee[fe-1][1]*ee[0][0]-ee[fe-1][0]*ee[0][1];++ce<fe;)Pe+=ee[ce-1][1]*ee[ce][0]-ee[ce-1][0]*ee[ce][1];return Pe<=0},Ut=function(ee,ce){for(var fe=ce[0],Pe=ce[1],Ie=!1,ke=0,Ge=ee.length,Je=Ge-1;ke<Ge;Je=ke++){var vt=ee[ke],_t=vt[0],Rt=vt[1],Pt=ee[Je],Gt=Pt[0],ur=Pt[1];Rt>Pe^ur>Pe&&fe<(Gt-_t)*(Pe-Rt)/(ur-Rt)+_t&&(Ie=!Ie)}return Ie},Ht=function(ee,ce){var fe=ce.stream,Pe;if(!fe)throw new Error("invalid projection");switch(ee&&ee.type){case"Feature":Pe=pr;break;case"FeatureCollection":Pe=Kt;break;default:Pe=Rn;break}return Pe(ee,fe)};function Kt(G,ee){return{type:"FeatureCollection",features:G.features.map(function(ce){return pr(ce,ee)})}}function pr(G,ee){return{type:"Feature",id:G.id,properties:G.properties,geometry:Rn(G.geometry,ee)}}function ln(G,ee){return{type:"GeometryCollection",geometries:G.geometries.map(function(ce){return Rn(ce,ee)})}}function Rn(G,ee){if(!G)return null;if(G.type==="GeometryCollection")return ln(G,ee);var ce;switch(G.type){case"Point":ce=qi;break;case"MultiPoint":ce=qi;break;case"LineString":ce=Wn;break;case"MultiLineString":ce=Wn;break;case"Polygon":ce=ga;break;case"MultiPolygon":ce=ga;break;case"Sphere":ce=ga;break;default:return null}return g.geoStream(G,ee(ce)),ce.result()}var Fn=[],li=[],qi={point:function(ee,ce){Fn.push([ee,ce])},result:function(){var ee=Fn.length?Fn.length<2?{type:"Point",coordinates:Fn[0]}:{type:"MultiPoint",coordinates:Fn}:null;return Fn=[],ee}},Wn={lineStart:gs,point:function(ee,ce){Fn.push([ee,ce])},lineEnd:function(){Fn.length&&(li.push(Fn),Fn=[])},result:function(){var ee=li.length?li.length<2?{type:"LineString",coordinates:li[0]}:{type:"MultiLineString",coordinates:li}:null;return li=[],ee}},ga={polygonStart:gs,lineStart:gs,point:function(ee,ce){Fn.push([ee,ce])},lineEnd:function(){var ee=Fn.length;if(ee){do Fn.push(Fn[0].slice());while(++ee<4);li.push(Fn),Fn=[]}},polygonEnd:gs,result:function(){if(!li.length)return null;var ee=[],ce=[];return li.forEach(function(fe){ht(fe)?ee.push([fe]):ce.push(fe)}),ce.forEach(function(fe){var Pe=fe[0];ee.some(function(Ie){if(Ut(Ie[0],Pe))return Ie.push(fe),!0})||ee.push([fe])}),li=[],ee.length?ee.length>1?{type:"MultiPolygon",coordinates:ee}:{type:"Polygon",coordinates:ee[0]}:null}},ao=function(ee){var ce=ee(w,0)[0]-ee(-w,0)[0];function fe(Pe,Ie){var ke=p(Pe)<w,Ge=ee(ke?Pe:Pe>0?Pe-O:Pe+O,Ie),Je=(Ge[0]-Ge[1])*I,vt=(Ge[0]+Ge[1])*I;if(ke)return[Je,vt];var _t=ce*I,Rt=Je>0^vt>0?-1:1;return[Rt*Je-_(vt)*_t,Rt*vt-_(Je)*_t]}return ee.invert&&(fe.invert=function(Pe,Ie){var ke=(Pe+Ie)*I,Ge=(Ie-Pe)*I,Je=p(ke)<.5*ce&&p(Ge)<.5*ce;if(!Je){var vt=ce*I,_t=ke>0^Ge>0?-1:1,Rt=-_t*Pe+(Ge>0?1:-1)*vt,Pt=-_t*Ie+(ke>0?1:-1)*vt;ke=(-Rt-Pt)*I,Ge=(Rt-Pt)*I}var Gt=ee.invert(ke,Ge);return Je||(Gt[0]+=ke>0?O:-O),Gt}),g.geoProjection(fe).rotate([-90,-90,45]).clipAngle(180-.001)},is=function(){return ao(Zs).scale(176.423)},vo=function(){return ao(hn).scale(111.48)},Et=function(ee,ce){if(!(0<=(ce=+ce)&&ce<=20))throw new Error("invalid digits");function fe(vt){var _t=vt.length,Rt=2,Pt=new Array(_t);for(Pt[0]=+vt[0].toFixed(ce),Pt[1]=+vt[1].toFixed(ce);Rt<_t;)Pt[Rt]=vt[Rt],++Rt;return Pt}function Pe(vt){return vt.map(fe)}function Ie(vt){return vt.map(Pe)}function ke(vt){if(vt==null)return vt;var _t;switch(vt.type){case"GeometryCollection":_t={type:"GeometryCollection",geometries:vt.geometries.map(ke)};break;case"Point":_t={type:"Point",coordinates:fe(vt.coordinates)};break;case"MultiPoint":case"LineString":_t={type:vt.type,coordinates:Pe(vt.coordinates)};break;case"MultiLineString":case"Polygon":_t={type:vt.type,coordinates:Ie(vt.coordinates)};break;case"MultiPolygon":_t={type:"MultiPolygon",coordinates:vt.coordinates.map(Ie)};break;default:return vt}return vt.bbox!=null&&(_t.bbox=vt.bbox),_t}function Ge(vt){var _t={type:"Feature",properties:vt.properties,geometry:ke(vt.geometry)};return vt.id!=null&&(_t.id=vt.id),vt.bbox!=null&&(_t.bbox=vt.bbox),_t}if(ee!=null)switch(ee.type){case"Feature":return Ge(ee);case"FeatureCollection":{var Je={type:"FeatureCollection",features:ee.features.map(Ge)};return ee.bbox!=null&&(Je.bbox=ee.bbox),Je}default:return ke(ee)}return ee};function bt(G){var ee=x(G);function ce(fe,Pe){var Ie=ee?M(fe*ee/2)/ee:fe/2;if(!Pe)return[2*Ie,-G];var ke=2*c(Ie*x(Pe)),Ge=1/M(Pe);return[x(ke)*Ge,Pe+(1-i(ke))*Ge-G]}return ce.invert=function(fe,Pe){if(p(Pe+=G)<P)return[ee?2*c(ee*fe/2)/ee:fe,0];var Ie=fe*fe+Pe*Pe,ke=0,Ge=10,Je;do{var vt=M(ke),_t=1/i(ke),Rt=Ie-2*Pe*ke+ke*ke;ke-=Je=(vt*Rt+2*(ke-Pe))/(2+Rt*_t*_t+2*(ke-Pe)*vt)}while(p(Je)>P&&--Ge>0);var Pt=fe*(vt=M(ke)),Gt=M(p(Pe)<p(ke+1/vt)?ne(Pt)*.5:K(Pt)*.5+O/4)/x(ke);return[ee?2*c(ee*Gt)/ee:2*Gt,ke]},ce}var mr=function(){return He(bt).scale(131.215)},or=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];or.forEach(function(G){G[1]*=1.0144});function Ir(G,ee){var ce=u(18,p(ee)*36/O),fe=n(ce),Pe=ce-fe,Ie=(Rt=or[fe])[0],ke=Rt[1],Ge=(Rt=or[++fe])[0],Je=Rt[1],vt=(Rt=or[u(19,++fe)])[0],_t=Rt[1],Rt;return[G*(Ge+Pe*(vt-Ie)/2+Pe*Pe*(vt-2*Ge+Ie)/2),(ee>0?w:-w)*(Je+Pe*(_t-ke)/2+Pe*Pe*(_t-2*Je+ke)/2)]}Ir.invert=function(G,ee){var ce=ee/w,fe=ce*90,Pe=u(18,p(fe/5)),Ie=f(0,n(Pe));do{var ke=or[Ie][1],Ge=or[Ie+1][1],Je=or[u(19,Ie+2)][1],vt=Je-ke,_t=Je-2*Ge+ke,Rt=2*(p(ce)-Ge)/vt,Pt=_t/vt,Gt=Rt*(1-Pt*Rt*(1-2*Pt*Rt));if(Gt>=0||Ie===1){fe=(ee>=0?5:-5)*(Gt+Pe);var ur=50,hr;do Pe=u(18,p(fe)/5),Ie=n(Pe),Gt=Pe-Ie,ke=or[Ie][1],Ge=or[Ie+1][1],Je=or[u(19,Ie+2)][1],fe-=(hr=(ee>=0?w:-w)*(Ge+Gt*(Je-ke)/2+Gt*Gt*(Je-2*Ge+ke)/2)-ee)*H;while(p(hr)>C&&--ur>0);break}}while(--Ie>=0);var nn=or[Ie][0],Yr=or[Ie+1][0],Tn=or[u(19,Ie+2)][0];return[G/(Yr+Gt*(Tn-nn)/2+Gt*Gt*(Tn-2*Yr+nn)/2),fe*J]};var yn=function(){return g.geoProjection(Ir).scale(152.63)};function jn(G){function ee(ce,fe){var Pe=i(fe),Ie=(G-1)/(G-Pe*i(ce));return[Ie*Pe*x(ce),Ie*x(fe)]}return ee.invert=function(ce,fe){var Pe=ce*ce+fe*fe,Ie=ie(Pe),ke=(G-ie(1-Pe*(G+1)/(G-1)))/((G-1)/Ie+Ie/(G-1));return[h(ce*ke,Ie*ie(1-ke*ke)),Ie?ne(fe*ke/Ie):0]},ee}function qn(G,ee){var ce=jn(G);if(!ee)return ce;var fe=i(ee),Pe=x(ee);function Ie(ke,Ge){var Je=ce(ke,Ge),vt=Je[1],_t=vt*Pe/(G-1)+fe;return[Je[0]*fe/_t,vt/_t]}return Ie.invert=function(ke,Ge){var Je=(G-1)/(G-1-Ge*Pe);return ce.invert(Je*ke,Je*Ge*fe)},Ie}var ui=function(){var ee=2,ce=0,fe=g.geoProjectionMutator(qn),Pe=fe(ee,ce);return Pe.distance=function(Ie){return arguments.length?fe(ee=+Ie,ce):ee},Pe.tilt=function(Ie){return arguments.length?fe(ee,ce=Ie*J):ce*H},Pe.scale(432.147).clipAngle(K(1/ee)*H-1e-6)},kn=1e-4,oi=1e4,bn=-180,Xe=bn+kn,et=180,Ct=et-kn,At=-90,Le=At+kn,Ne=90,nt=Ne-kn;function tt(G){return G.length>0}function dt(G){return Math.floor(G*oi)/oi}function Dt(G){return G===At||G===Ne?[0,G]:[bn,dt(G)]}function Zt(G){var ee=G[0],ce=G[1],fe=!1;return ee<=Xe?(ee=bn,fe=!0):ee>=Ct&&(ee=et,fe=!0),ce<=Le?(ce=At,fe=!0):ce>=nt&&(ce=Ne,fe=!0),fe?[ee,ce]:G}function cr(G){return G.map(Zt)}function Jt(G,ee,ce){for(var fe=0,Pe=G.length;fe<Pe;++fe){var Ie=G[fe].slice();ce.push({index:-1,polygon:ee,ring:Ie});for(var ke=0,Ge=Ie.length;ke<Ge;++ke){var Je=Ie[ke],vt=Je[0],_t=Je[1];if(vt<=Xe||vt>=Ct||_t<=Le||_t>=nt){Ie[ke]=Zt(Je);for(var Rt=ke+1;Rt<Ge;++Rt){var Pt=Ie[Rt],Gt=Pt[0],ur=Pt[1];if(Gt>Xe&&Gt<Ct&&ur>Le&&ur<nt)break}if(Rt===ke+1)continue;if(ke){var hr={index:-1,polygon:ee,ring:Ie.slice(0,ke+1)};hr.ring[hr.ring.length-1]=Dt(_t),ce[ce.length-1]=hr}else ce.pop();if(Rt>=Ge)break;ce.push({index:-1,polygon:ee,ring:Ie=Ie.slice(Rt-1)}),Ie[0]=Dt(Ie[0][1]),ke=-1,Ge=Ie.length}}}}function xr(G){var ee,ce=G.length,fe={},Pe={},Ie,ke,Ge,Je,vt;for(ee=0;ee<ce;++ee){if(Ie=G[ee],ke=Ie.ring[0],Je=Ie.ring[Ie.ring.length-1],ke[0]===Je[0]&&ke[1]===Je[1]){Ie.polygon.push(Ie.ring),G[ee]=null;continue}Ie.index=ee,fe[ke]=Pe[Je]=Ie}for(ee=0;ee<ce;++ee)if(Ie=G[ee],Ie){if(ke=Ie.ring[0],Je=Ie.ring[Ie.ring.length-1],Ge=Pe[ke],vt=fe[Je],delete fe[ke],delete Pe[Je],ke[0]===Je[0]&&ke[1]===Je[1]){Ie.polygon.push(Ie.ring);continue}Ge?(delete Pe[ke],delete fe[Ge.ring[0]],Ge.ring.pop(),G[Ge.index]=null,Ie={index:-1,polygon:Ge.polygon,ring:Ge.ring.concat(Ie.ring)},Ge===vt?Ie.polygon.push(Ie.ring):(Ie.index=ce++,G.push(fe[Ie.ring[0]]=Pe[Ie.ring[Ie.ring.length-1]]=Ie))):vt?(delete fe[Je],delete Pe[vt.ring[vt.ring.length-1]],Ie.ring.pop(),Ie={index:ce++,polygon:vt.polygon,ring:Ie.ring.concat(vt.ring)},G[vt.index]=null,G.push(fe[Ie.ring[0]]=Pe[Ie.ring[Ie.ring.length-1]]=Ie)):(Ie.ring.push(Ie.ring[0]),Ie.polygon.push(Ie.ring))}}function yr(G){var ee={type:"Feature",geometry:rn(G.geometry)};return G.id!=null&&(ee.id=G.id),G.bbox!=null&&(ee.bbox=G.bbox),G.properties!=null&&(ee.properties=G.properties),ee}function rn(G){if(G==null)return G;var ee,ce,fe,Pe;switch(G.type){case"GeometryCollection":ee={type:"GeometryCollection",geometries:G.geometries.map(rn)};break;case"Point":ee={type:"Point",coordinates:Zt(G.coordinates)};break;case"MultiPoint":case"LineString":ee={type:G.type,coordinates:cr(G.coordinates)};break;case"MultiLineString":ee={type:"MultiLineString",coordinates:G.coordinates.map(cr)};break;case"Polygon":{var Ie=[];Jt(G.coordinates,Ie,ce=[]),xr(ce),ee={type:"Polygon",coordinates:Ie};break}case"MultiPolygon":{ce=[],fe=-1,Pe=G.coordinates.length;for(var ke=new Array(Pe);++fe<Pe;)Jt(G.coordinates[fe],ke[fe]=[],ce);xr(ce),ee={type:"MultiPolygon",coordinates:ke.filter(tt)};break}default:return G}return G.bbox!=null&&(ee.bbox=G.bbox),ee}var Kr=function(ee){if(ee==null)return ee;switch(ee.type){case"Feature":return yr(ee);case"FeatureCollection":{var ce={type:"FeatureCollection",features:ee.features.map(yr)};return ee.bbox!=null&&(ce.bbox=ee.bbox),ce}default:return rn(ee)}};function an(G,ee){var ce=M(ee/2),fe=x(S*ce);return[G*(.74482-.34588*fe*fe),1.70711*ce]}an.invert=function(G,ee){var ce=ee/1.70711,fe=x(S*ce);return[G/(.74482-.34588*fe*fe),2*c(ce)]};var Qr=function(){return g.geoProjection(an).scale(146.153)},_n=function(ee,ce,fe){var Pe=g.geoInterpolate(ce,fe),Ie=Pe(.5),ke=g.geoRotation([-Ie[0],-Ie[1]])(ce),Ge=Pe.distance/2,Je=-ne(x(ke[1]*J)/x(Ge)),vt=[-Ie[0],-Ie[1],-(ke[0]>0?O-Je:Je)*H],_t=g.geoProjection(ee(Ge)).rotate(vt),Rt=g.geoRotation(vt),Pt=_t.center;return delete _t.rotate,_t.center=function(Gt){return arguments.length?Pt(Rt(Gt)):Rt.invert(Pt())},_t.clipAngle(90)};function Pn(G){var ee=i(G);function ce(fe,Pe){var Ie=g.geoGnomonicRaw(fe,Pe);return Ie[0]*=ee,Ie}return ce.invert=function(fe,Pe){return g.geoGnomonicRaw.invert(fe/ee,Pe)},ce}function ri(){return Ei([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ei(G,ee){return _n(Pn,G,ee)}function zn(G){if(!(G*=2))return g.geoAzimuthalEquidistantRaw;var ee=-G/2,ce=-ee,fe=G*G,Pe=M(ce),Ie=.5/x(ce);function ke(Ge,Je){var vt=K(i(Je)*i(Ge-ee)),_t=K(i(Je)*i(Ge-ce)),Rt=Je<0?-1:1;return vt*=vt,_t*=_t,[(vt-_t)/(2*G),Rt*ie(4*fe*_t-(fe-vt+_t)*(fe-vt+_t))/(2*G)]}return ke.invert=function(Ge,Je){var vt=Je*Je,_t=i(ie(vt+(Pt=Ge+ee)*Pt)),Rt=i(ie(vt+(Pt=Ge+ce)*Pt)),Pt,Gt;return[h(Gt=_t-Rt,Pt=(_t+Rt)*Pe),(Je<0?-1:1)*K(ie(Pt*Pt+Gt*Gt)*Ie)]},ke}function gi(){return Ti([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ti(G,ee){return _n(zn,G,ee)}function la(G,ee){if(p(ee)<P)return[G,0];var ce=p(ee/w),fe=ne(ce);if(p(G)<P||p(p(ee)-w)<P)return[0,_(ee)*O*M(fe/2)];var Pe=i(fe),Ie=p(O/G-G/O)/2,ke=Ie*Ie,Ge=Pe/(ce+Pe-1),Je=Ge*(2/ce-1),vt=Je*Je,_t=vt+ke,Rt=Ge-vt,Pt=ke+Ge;return[_(G)*O*(Ie*Rt+ie(ke*Rt*Rt-_t*(Ge*Ge-vt)))/_t,_(ee)*O*(Je*Pt-Ie*ie((ke+1)*_t-Pt*Pt))/_t]}la.invert=function(G,ee){if(p(ee)<P)return[G,0];if(p(G)<P)return[0,w*x(2*c(ee/O))];var ce=(G/=O)*G,fe=(ee/=O)*ee,Pe=ce+fe,Ie=Pe*Pe,ke=-p(ee)*(1+Pe),Ge=ke-2*fe+ce,Je=-2*ke+1+2*fe+Ie,vt=fe/Je+(2*Ge*Ge*Ge/(Je*Je*Je)-9*ke*Ge/(Je*Je))/27,_t=(ke-Ge*Ge/(3*Je))/Je,Rt=2*ie(-_t/3),Pt=K(3*vt/(_t*Rt))/3;return[O*(Pe-1+ie(1+2*(ce-fe)+Ie))/(2*G),_(ee)*O*(-Rt*i(Pt+O/3)-Ge/(3*Je))]};var Vi=function(){return g.geoProjection(la).scale(79.4183)};function Ha(G,ee){if(p(ee)<P)return[G,0];var ce=p(ee/w),fe=ne(ce);if(p(G)<P||p(p(ee)-w)<P)return[0,_(ee)*O*M(fe/2)];var Pe=i(fe),Ie=p(O/G-G/O)/2,ke=Ie*Ie,Ge=Pe*(ie(1+ke)-Ie*Pe)/(1+ke*ce*ce);return[_(G)*O*Ge,_(ee)*O*ie(1-Ge*(2*Ie+Ge))]}Ha.invert=function(G,ee){if(!G)return[0,w*x(2*c(ee/O))];var ce=p(G/O),fe=(1-ce*ce-(ee/=O)*ee)/(2*ce),Pe=fe*fe,Ie=ie(Pe+1);return[_(G)*O*(Ie-fe),_(ee)*w*x(2*h(ie((1-2*fe*ce)*(fe+Ie)-ce),ie(Ie+fe+ce)))]};var Na=function(){return g.geoProjection(Ha).scale(79.4183)};function Wa(G,ee){if(p(ee)<P)return[G,0];var ce=ee/w,fe=ne(ce);if(p(G)<P||p(p(ee)-w)<P)return[0,O*M(fe/2)];var Pe=(O/G-G/O)/2,Ie=ce/(1+i(fe));return[O*(_(G)*ie(Pe*Pe+1-Ie*Ie)-Pe),O*Ie]}Wa.invert=function(G,ee){if(!ee)return[G,0];var ce=ee/O,fe=(O*O*(1-ce*ce)-G*G)/(2*O*G);return[G?O*(_(G)*ie(fe*fe+1)-fe):0,w*x(2*c(ce))]};var mi=function(){return g.geoProjection(Wa).scale(79.4183)};function eo(G,ee){if(!ee)return[G,0];var ce=p(ee);if(!G||ce===w)return[0,ee];var fe=ce/w,Pe=fe*fe,Ie=(8*fe-Pe*(Pe+2)-5)/(2*Pe*(fe-1)),ke=Ie*Ie,Ge=fe*Ie,Je=Pe+ke+2*Ge,vt=fe+3*Ie,_t=G/w,Rt=_t+1/_t,Pt=_(p(G)-w)*ie(Rt*Rt-4),Gt=Pt*Pt,ur=Je*(Pe+ke*Gt-1)+(1-Pe)*(Pe*(vt*vt+4*ke)+12*Ge*ke+4*ke*ke),hr=(Pt*(Je+ke-1)+2*ie(ur))/(4*Je+Gt);return[_(G)*w*hr,_(ee)*w*ie(1+Pt*p(hr)-hr*hr)]}eo.invert=function(G,ee){var ce;if(!G||!ee)return[G,ee];ee/=O;var fe=_(G)*G/w,Pe=(fe*fe-1+4*ee*ee)/p(fe),Ie=Pe*Pe,ke=2*ee,Ge=50;do{var Je=ke*ke,vt=(8*ke-Je*(Je+2)-5)/(2*Je*(ke-1)),_t=(3*ke-Je*ke-10)/(2*Je*ke),Rt=vt*vt,Pt=ke*vt,Gt=ke+vt,ur=Gt*Gt,hr=ke+3*vt,nn=ur*(Je+Rt*Ie-1)+(1-Je)*(Je*(hr*hr+4*Rt)+Rt*(12*Pt+4*Rt)),Yr=-2*Gt*(4*Pt*Rt+(1-4*Je+3*Je*Je)*(1+_t)+Rt*(-6+14*Je-Ie+(-8+8*Je-2*Ie)*_t)+Pt*(-8+12*Je+(-10+10*Je-Ie)*_t)),Tn=ie(nn),In=Pe*(ur+Rt-1)+2*Tn-fe*(4*ur+Ie),si=Pe*(2*vt*_t+2*Gt*(1+_t))+Yr/Tn-8*Gt*(Pe*(-1+Rt+ur)+2*Tn)*(1+_t)/(Ie+4*ur);ke-=ce=In/si}while(ce>P&&--Ge>0);return[_(G)*(ie(Pe*Pe+4)+Pe)*O/4,w*ke]};var Lo=function(){return g.geoProjection(eo).scale(127.16)},po=4*O+3*ie(3),Wi=2*ie(2*O*ie(3)/po),Oo=te(Wi*ie(3)/O,Wi,po/6),as=function(){return g.geoProjection(Oo).scale(176.84)};function pu(G,ee){return[G*ie(1-3*ee*ee/(O*O)),ee]}pu.invert=function(G,ee){return[G/ie(1-3*ee*ee/(O*O)),ee]};var gu=function(){return g.geoProjection(pu).scale(152.63)};function Sl(G,ee){var ce=.90631*x(ee),fe=ie(1-ce*ce),Pe=ie(2/(1+fe*i(G/=3)));return[2.66723*fe*Pe*x(G),1.24104*ce*Pe]}Sl.invert=function(G,ee){var ce=G/2.66723,fe=ee/1.24104,Pe=ie(ce*ce+fe*fe),Ie=2*ne(Pe/2);return[3*h(G*M(Ie),2.66723*Pe),Pe&&ne(ee*x(Ie)/(1.24104*.90631*Pe))]};var ul=function(){return g.geoProjection(Sl).scale(172.632)};function X(G,ee){var ce=i(ee),fe=i(G)*ce,Pe=1-fe,Ie=i(G=h(x(G)*ce,-x(ee))),ke=x(G);return ce=ie(1-fe*fe),[ke*ce-Ie*Pe,-Ie*ce-ke*Pe]}X.invert=function(G,ee){var ce=(G*G+ee*ee)/-2,fe=ie(-ce*(2+ce)),Pe=ee*ce+G*fe,Ie=G*ce-ee*fe,ke=ie(Ie*Ie+Pe*Pe);return[h(fe*Pe,ke*(1+ce)),ke?-ne(fe*Ie/ke):0]};var k=function(){return g.geoProjection(X).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)};function F(G,ee){var ce=Se(G,ee);return[(ce[0]+G/w)/2,(ce[1]+ee)/2]}F.invert=function(G,ee){var ce=G,fe=ee,Pe=25;do{var Ie=i(fe),ke=x(fe),Ge=x(2*fe),Je=ke*ke,vt=Ie*Ie,_t=x(ce),Rt=i(ce/2),Pt=x(ce/2),Gt=Pt*Pt,ur=1-vt*Rt*Rt,hr=ur?K(Ie*Rt)*ie(nn=1/ur):nn=0,nn,Yr=.5*(2*hr*Ie*Pt+ce/w)-G,Tn=.5*(hr*ke+fe)-ee,In=.5*nn*(vt*Gt+hr*Ie*Rt*Je)+.5/w,si=nn*(_t*Ge/4-hr*ke*Pt),ni=.125*nn*(Ge*Pt-hr*ke*vt*_t),Ci=.5*nn*(Je*Rt+hr*Gt*Ie)+.5,Ji=si*ni-Ci*In,ha=(Tn*si-Yr*Ci)/Ji,ya=(Yr*ni-Tn*In)/Ji;ce-=ha,fe-=ya}while((p(ha)>P||p(ya)>P)&&--Pe>0);return[ce,fe]};var $=function(){return g.geoProjection(F).scale(158.837)};e.geoAiry=Fe,e.geoAiryRaw=rt,e.geoAitoff=ye,e.geoAitoffRaw=Se,e.geoArmadillo=ue,e.geoArmadilloRaw=Oe,e.geoAugust=Ae,e.geoAugustRaw=xe,e.geoBaker=z,e.geoBakerRaw=le,e.geoBerghaus=V,e.geoBerghausRaw=ae,e.geoBoggs=We,e.geoBoggsRaw=ze,e.geoBonne=rr,e.geoBonneRaw=Yt,e.geoBottomley=Br,e.geoBottomleyRaw=ir,e.geoBromley=ft,e.geoBromleyRaw=tr,e.geoChamberlin=Ar,e.geoChamberlinRaw=it,e.geoChamberlinAfrica=Qt,e.geoCollignon=ct,e.geoCollignonRaw=zr,e.geoCraig=xt,e.geoCraigRaw=ot,e.geoCraster=lt,e.geoCrasterRaw=Ke,e.geoCylindricalEqualArea=qe,e.geoCylindricalEqualAreaRaw=mt,e.geoCylindricalStereographic=qt,e.geoCylindricalStereographicRaw=yt,e.geoEckert1=Zr,e.geoEckert1Raw=Er,e.geoEckert2=Cr,e.geoEckert2Raw=Dr,e.geoEckert3=xn,e.geoEckert3Raw=mn,e.geoEckert4=An,e.geoEckert4Raw=lr,e.geoEckert5=Mt,e.geoEckert5Raw=On,e.geoEckert6=$t,e.geoEckert6Raw=er,e.geoEisenlohr=Hr,e.geoEisenlohrRaw=Mr,e.geoFahey=fn,e.geoFaheyRaw=Ur,e.geoFoucaut=Rr,e.geoFoucautRaw=tn,e.geoGilbert=Yn,e.geoGingery=Po,e.geoGingeryRaw=wi,e.geoGinzburg4=Va,e.geoGinzburg4Raw=So,e.geoGinzburg5=ps,e.geoGinzburg5Raw=ws,e.geoGinzburg6=zs,e.geoGinzburg6Raw=Ao,e.geoGinzburg8=fs,e.geoGinzburg8Raw=Qa,e.geoGinzburg9=Ju,e.geoGinzburg9Raw=Vs,e.geoGringorten=at,e.geoGringortenRaw=Zs,e.geoGuyou=Ai,e.geoGuyouRaw=hn,e.geoHammer=Oa,e.geoHammerRaw=bi,e.geoHammerRetroazimuthal=Uo,e.geoHammerRetroazimuthalRaw=fo,e.geoHealpix=Go,e.geoHealpixRaw=Ho,e.geoHill=bs,e.geoHillRaw=_s,e.geoHomolosine=Za,e.geoHomolosineRaw=rs,e.geoInterrupt=Ws,e.geoInterruptedBoggs=Bu,e.geoInterruptedHomolosine=zu,e.geoInterruptedMollweide=hu,e.geoInterruptedMollweideHemispheres=qo,e.geoInterruptedSinuMollweide=ns,e.geoInterruptedSinusoidal=_u,e.geoKavrayskiy7=Ns,e.geoKavrayskiy7Raw=Hs,e.geoLagrange=Fu,e.geoLagrangeRaw=Js,e.geoLarrivee=Nu,e.geoLarriveeRaw=Vu,e.geoLaskowski=Wu,e.geoLaskowskiRaw=To,e.geoLittrow=Ru,e.geoLittrowRaw=Hu,e.geoLoximuthal=dl,e.geoLoximuthalRaw=$o,e.geoMiller=os,e.geoMillerRaw=Gu,e.geoModifiedStereographic=jt,e.geoModifiedStereographicRaw=Us,e.geoModifiedStereographicAlaska=lu,e.geoModifiedStereographicGs48=bu,e.geoModifiedStereographicGs50=nu,e.geoModifiedStereographicMiller=Be,e.geoModifiedStereographicLee=Fr,e.geoMollweide=ve,e.geoMollweideRaw=q,e.geoMtFlatPolarParabolic=gr,e.geoMtFlatPolarParabolicRaw=ar,e.geoMtFlatPolarQuartic=Vr,e.geoMtFlatPolarQuarticRaw=en,e.geoMtFlatPolarSinusoidal=Dn,e.geoMtFlatPolarSinusoidalRaw=on,e.geoNaturalEarth=xi,e.geoNaturalEarthRaw=di,e.geoNaturalEarth2=ia,e.geoNaturalEarth2Raw=ji,e.geoNellHammer=ea,e.geoNellHammerRaw=ca,e.geoPatterson=ko,e.geoPattersonRaw=ss,e.geoPolyconic=Zo,e.geoPolyconicRaw=bo,e.geoPolyhedral=al,e.geoPolyhedralButterfly=Iu,e.geoPolyhedralCollignon=yl,e.geoPolyhedralWaterman=Tc,e.geoProject=Ht,e.geoGringortenQuincuncial=is,e.geoPeirceQuincuncial=vo,e.geoPierceQuincuncial=vo,e.geoQuantize=Et,e.geoQuincuncial=ao,e.geoRectangularPolyconic=mr,e.geoRectangularPolyconicRaw=bt,e.geoRobinson=yn,e.geoRobinsonRaw=Ir,e.geoSatellite=ui,e.geoSatelliteRaw=qn,e.geoSinuMollweide=Rs,e.geoSinuMollweideRaw=mo,e.geoSinusoidal=It,e.geoSinusoidalRaw=$e,e.geoStitch=Kr,e.geoTimes=Qr,e.geoTimesRaw=an,e.geoTwoPointAzimuthal=Ei,e.geoTwoPointAzimuthalRaw=Pn,e.geoTwoPointAzimuthalUsa=ri,e.geoTwoPointEquidistant=Ti,e.geoTwoPointEquidistantRaw=zn,e.geoTwoPointEquidistantUsa=gi,e.geoVanDerGrinten=Vi,e.geoVanDerGrintenRaw=la,e.geoVanDerGrinten2=Na,e.geoVanDerGrinten2Raw=Ha,e.geoVanDerGrinten3=mi,e.geoVanDerGrinten3Raw=Wa,e.geoVanDerGrinten4=Lo,e.geoVanDerGrinten4Raw=eo,e.geoWagner4=as,e.geoWagner4Raw=Oo,e.geoWagner6=gu,e.geoWagner6Raw=pu,e.geoWagner7=ul,e.geoWagner7Raw=Sl,e.geoWiechel=k,e.geoWiechelRaw=X,e.geoWinkel3=$,e.geoWinkel3Raw=F,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js":function(B,L,o){(function(e,g){g(L,o("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(e,g){"use strict";function v(){return new p}function p(){this.reset()}p.prototype={constructor:p,reset:function(){this.s=this.t=0},add:function(Ne){h(c,Ne,this.t),h(this,c.s,this.s),this.s?this.t+=c.t:this.s=c.t},valueOf:function(){return this.s}};var c=new p;function h(Le,Ne,nt){var tt=Le.s=Ne+nt,dt=tt-Ne,Dt=tt-dt;Le.t=Ne-Dt+(nt-dt)}var i=1e-6,r=1e-12,n=Math.PI,s=n/2,f=n/4,u=n*2,d=180/n,b=n/180,_=Math.abs,x=Math.atan,M=Math.atan2,P=Math.cos,C=Math.ceil,O=Math.exp,w=Math.log,S=Math.pow,I=Math.sin,j=Math.sign||function(Le){return Le>0?1:Le<0?-1:0},N=Math.sqrt,W=Math.tan;function H(Le){return Le>1?0:Le<-1?n:Math.acos(Le)}function J(Le){return Le>1?s:Le<-1?-s:Math.asin(Le)}function Q(Le){return(Le=I(Le/2))*Le}function ne(){}function K(Le,Ne){Le&&de.hasOwnProperty(Le.type)&&de[Le.type](Le,Ne)}var ie={Feature:function(Ne,nt){K(Ne.geometry,nt)},FeatureCollection:function(Ne,nt){for(var tt=Ne.features,dt=-1,Dt=tt.length;++dt<Dt;)K(tt[dt].geometry,nt)}},de={Sphere:function(Ne,nt){nt.sphere()},Point:function(Ne,nt){Ne=Ne.coordinates,nt.point(Ne[0],Ne[1],Ne[2])},MultiPoint:function(Ne,nt){for(var tt=Ne.coordinates,dt=-1,Dt=tt.length;++dt<Dt;)Ne=tt[dt],nt.point(Ne[0],Ne[1],Ne[2])},LineString:function(Ne,nt){we(Ne.coordinates,nt,0)},MultiLineString:function(Ne,nt){for(var tt=Ne.coordinates,dt=-1,Dt=tt.length;++dt<Dt;)we(tt[dt],nt,0)},Polygon:function(Ne,nt){Re(Ne.coordinates,nt)},MultiPolygon:function(Ne,nt){for(var tt=Ne.coordinates,dt=-1,Dt=tt.length;++dt<Dt;)Re(tt[dt],nt)},GeometryCollection:function(Ne,nt){for(var tt=Ne.geometries,dt=-1,Dt=tt.length;++dt<Dt;)K(tt[dt],nt)}};function we(Le,Ne,nt){var tt=-1,dt=Le.length-nt,Dt;for(Ne.lineStart();++tt<dt;)Dt=Le[tt],Ne.point(Dt[0],Dt[1],Dt[2]);Ne.lineEnd()}function Re(Le,Ne){var nt=-1,tt=Le.length;for(Ne.polygonStart();++nt<tt;)we(Le[nt],Ne,1);Ne.polygonEnd()}function _e(Le,Ne){Le&&ie.hasOwnProperty(Le.type)?ie[Le.type](Le,Ne):K(Le,Ne)}var Ue=v(),rt=v(),Fe,Se,ye,Oe,ue,xe={point:ne,lineStart:ne,lineEnd:ne,polygonStart:function(){Ue.reset(),xe.lineStart=Ae,xe.lineEnd=pe},polygonEnd:function(){var Ne=+Ue;rt.add(Ne<0?u+Ne:Ne),this.lineStart=this.lineEnd=this.point=ne},sphere:function(){rt.add(u)}};function Ae(){xe.point=be}function pe(){le(Fe,Se)}function be(Le,Ne){xe.point=le,Fe=Le,Se=Ne,Le*=b,Ne*=b,ye=Le,Oe=P(Ne=Ne/2+f),ue=I(Ne)}function le(Le,Ne){Le*=b,Ne*=b,Ne=Ne/2+f;var nt=Le-ye,tt=nt>=0?1:-1,dt=tt*nt,Dt=P(Ne),Zt=I(Ne),cr=ue*Zt,Jt=Oe*Dt+cr*P(dt),xr=cr*tt*I(dt);Ue.add(M(xr,Jt)),ye=Le,Oe=Dt,ue=Zt}function z(Le){return rt.reset(),_e(Le,xe),rt*2}function ae(Le){return[M(Le[1],Le[0]),J(Le[2])]}function V(Le){var Ne=Le[0],nt=Le[1],tt=P(nt);return[tt*P(Ne),tt*I(Ne),I(nt)]}function re(Le,Ne){return Le[0]*Ne[0]+Le[1]*Ne[1]+Le[2]*Ne[2]}function te(Le,Ne){return[Le[1]*Ne[2]-Le[2]*Ne[1],Le[2]*Ne[0]-Le[0]*Ne[2],Le[0]*Ne[1]-Le[1]*Ne[0]]}function q(Le,Ne){Le[0]+=Ne[0],Le[1]+=Ne[1],Le[2]+=Ne[2]}function ve(Le,Ne){return[Le[0]*Ne,Le[1]*Ne,Le[2]*Ne]}function Me(Le){var Ne=N(Le[0]*Le[0]+Le[1]*Le[1]+Le[2]*Le[2]);Le[0]/=Ne,Le[1]/=Ne,Le[2]/=Ne}var De,ze,We,He,$e,It,Yt,rr,ir=v(),Br,tr,ft={point:st,lineStart:Qe,lineEnd:it,polygonStart:function(){ft.point=zt,ft.lineStart=Qt,ft.lineEnd=Ar,ir.reset(),xe.polygonStart()},polygonEnd:function(){xe.polygonEnd(),ft.point=st,ft.lineStart=Qe,ft.lineEnd=it,Ue<0?(De=-(We=180),ze=-(He=90)):ir>i?He=90:ir<-i&&(ze=-90),tr[0]=De,tr[1]=We},sphere:function(){De=-(We=180),ze=-(He=90)}};function st(Le,Ne){Br.push(tr=[De=Le,We=Le]),Ne<ze&&(ze=Ne),Ne>He&&(He=Ne)}function Tt(Le,Ne){var nt=V([Le*b,Ne*b]);if(rr){var tt=te(rr,nt),dt=[tt[1],-tt[0],0],Dt=te(dt,tt);Me(Dt),Dt=ae(Dt);var Zt=Le-$e,cr=Zt>0?1:-1,Jt=Dt[0]*d*cr,xr,yr=_(Zt)>180;yr^(cr*$e<Jt&&Jt<cr*Le)?(xr=Dt[1]*d,xr>He&&(He=xr)):(Jt=(Jt+360)%360-180,yr^(cr*$e<Jt&&Jt<cr*Le)?(xr=-Dt[1]*d,xr<ze&&(ze=xr)):(Ne<ze&&(ze=Ne),Ne>He&&(He=Ne))),yr?Le<$e?zr(De,Le)>zr(De,We)&&(We=Le):zr(Le,We)>zr(De,We)&&(De=Le):We>=De?(Le<De&&(De=Le),Le>We&&(We=Le)):Le>$e?zr(De,Le)>zr(De,We)&&(We=Le):zr(Le,We)>zr(De,We)&&(De=Le)}else Br.push(tr=[De=Le,We=Le]);Ne<ze&&(ze=Ne),Ne>He&&(He=Ne),rr=nt,$e=Le}function Qe(){ft.point=Tt}function it(){tr[0]=De,tr[1]=We,ft.point=st,rr=null}function zt(Le,Ne){if(rr){var nt=Le-$e;ir.add(_(nt)>180?nt+(nt>0?360:-360):nt)}else It=Le,Yt=Ne;xe.point(Le,Ne),Tt(Le,Ne)}function Qt(){xe.lineStart()}function Ar(){zt(It,Yt),xe.lineEnd(),_(ir)>i&&(De=-(We=180)),tr[0]=De,tr[1]=We,rr=null}function zr(Le,Ne){return(Ne-=Le)<0?Ne+360:Ne}function ct(Le,Ne){return Le[0]-Ne[0]}function ot(Le,Ne){return Le[0]<=Le[1]?Le[0]<=Ne&&Ne<=Le[1]:Ne<Le[0]||Le[1]<Ne}function xt(Le){var Ne,nt,tt,dt,Dt,Zt,cr;if(He=We=-(De=ze=Infinity),Br=[],_e(Le,ft),nt=Br.length){for(Br.sort(ct),Ne=1,tt=Br[0],Dt=[tt];Ne<nt;++Ne)dt=Br[Ne],ot(tt,dt[0])||ot(tt,dt[1])?(zr(tt[0],dt[1])>zr(tt[0],tt[1])&&(tt[1]=dt[1]),zr(dt[0],tt[1])>zr(tt[0],tt[1])&&(tt[0]=dt[0])):Dt.push(tt=dt);for(Zt=-Infinity,nt=Dt.length-1,Ne=0,tt=Dt[nt];Ne<=nt;tt=dt,++Ne)dt=Dt[Ne],(cr=zr(tt[1],dt[0]))>Zt&&(Zt=cr,De=dt[0],We=tt[1])}return Br=tr=null,De===Infinity||ze===Infinity?[[NaN,NaN],[NaN,NaN]]:[[De,ze],[We,He]]}var Bt,Ke,lt,mt,qe,yt,qt,Er,Zr,Dr,Cr,mn,xn,lr,An,On,Mt={sphere:ne,point:er,lineStart:Tr,lineEnd:wr,polygonStart:function(){Mt.lineStart=Ur,Mt.lineEnd=fn},polygonEnd:function(){Mt.lineStart=Tr,Mt.lineEnd=wr}};function er(Le,Ne){Le*=b,Ne*=b;var nt=P(Ne);$t(nt*P(Le),nt*I(Le),I(Ne))}function $t(Le,Ne,nt){++Bt,lt+=(Le-lt)/Bt,mt+=(Ne-mt)/Bt,qe+=(nt-qe)/Bt}function Tr(){Mt.point=Mr}function Mr(Le,Ne){Le*=b,Ne*=b;var nt=P(Ne);lr=nt*P(Le),An=nt*I(Le),On=I(Ne),Mt.point=Hr,$t(lr,An,On)}function Hr(Le,Ne){Le*=b,Ne*=b;var nt=P(Ne),tt=nt*P(Le),dt=nt*I(Le),Dt=I(Ne),Zt=M(N((Zt=An*Dt-On*dt)*Zt+(Zt=On*tt-lr*Dt)*Zt+(Zt=lr*dt-An*tt)*Zt),lr*tt+An*dt+On*Dt);Ke+=Zt,yt+=Zt*(lr+(lr=tt)),qt+=Zt*(An+(An=dt)),Er+=Zt*(On+(On=Dt)),$t(lr,An,On)}function wr(){Mt.point=er}function Ur(){Mt.point=tn}function fn(){Rr(mn,xn),Mt.point=er}function tn(Le,Ne){mn=Le,xn=Ne,Le*=b,Ne*=b,Mt.point=Rr;var nt=P(Ne);lr=nt*P(Le),An=nt*I(Le),On=I(Ne),$t(lr,An,On)}function Rr(Le,Ne){Le*=b,Ne*=b;var nt=P(Ne),tt=nt*P(Le),dt=nt*I(Le),Dt=I(Ne),Zt=An*Dt-On*dt,cr=On*tt-lr*Dt,Jt=lr*dt-An*tt,xr=N(Zt*Zt+cr*cr+Jt*Jt),yr=J(xr),rn=xr&&-yr/xr;Zr+=rn*Zt,Dr+=rn*cr,Cr+=rn*Jt,Ke+=yr,yt+=yr*(lr+(lr=tt)),qt+=yr*(An+(An=dt)),Er+=yr*(On+(On=Dt)),$t(lr,An,On)}function Nn(Le){Bt=Ke=lt=mt=qe=yt=qt=Er=Zr=Dr=Cr=0,_e(Le,Mt);var Ne=Zr,nt=Dr,tt=Cr,dt=Ne*Ne+nt*nt+tt*tt;return dt<r&&(Ne=yt,nt=qt,tt=Er,Ke<i&&(Ne=lt,nt=mt,tt=qe),dt=Ne*Ne+nt*nt+tt*tt,dt<r)?[NaN,NaN]:[M(nt,Ne)*d,J(tt/N(dt))*d]}function En(Le){return function(){return Le}}function Yn(Le,Ne){function nt(tt,dt){return tt=Le(tt,dt),Ne(tt[0],tt[1])}return Le.invert&&Ne.invert&&(nt.invert=function(tt,dt){return tt=Ne.invert(tt,dt),tt&&Le.invert(tt[0],tt[1])}),nt}function wi(Le,Ne){return[_(Le)>n?Le+Math.round(-Le/u)*u:Le,Ne]}wi.invert=wi;function $a(Le,Ne,nt){return(Le%=u)?Ne||nt?Yn(Po(Le),Ro(Ne,nt)):Po(Le):Ne||nt?Ro(Ne,nt):wi}function so(Le){return function(Ne,nt){return Ne+=Le,[Ne>n?Ne-u:Ne<-n?Ne+u:Ne,nt]}}function Po(Le){var Ne=so(Le);return Ne.invert=so(-Le),Ne}function Ro(Le,Ne){var nt=P(Le),tt=I(Le),dt=P(Ne),Dt=I(Ne);function Zt(cr,Jt){var xr=P(Jt),yr=P(cr)*xr,rn=I(cr)*xr,Kr=I(Jt),an=Kr*nt+yr*tt;return[M(rn*dt-an*Dt,yr*nt-Kr*tt),J(an*dt+rn*Dt)]}return Zt.invert=function(cr,Jt){var xr=P(Jt),yr=P(cr)*xr,rn=I(cr)*xr,Kr=I(Jt),an=Kr*dt-rn*Dt;return[M(rn*dt+Kr*Dt,yr*nt+an*tt),J(an*nt-yr*tt)]},Zt}function So(Le){Le=$a(Le[0]*b,Le[1]*b,Le.length>2?Le[2]*b:0);function Ne(nt){return nt=Le(nt[0]*b,nt[1]*b),nt[0]*=d,nt[1]*=d,nt}return Ne.invert=function(nt){return nt=Le.invert(nt[0]*b,nt[1]*b),nt[0]*=d,nt[1]*=d,nt},Ne}function Va(Le,Ne,nt,tt,dt,Dt){if(!!nt){var Zt=P(Ne),cr=I(Ne),Jt=tt*nt;dt==null?(dt=Ne+tt*u,Dt=Ne-Jt/2):(dt=ws(Zt,dt),Dt=ws(Zt,Dt),(tt>0?dt<Dt:dt>Dt)&&(dt+=tt*u));for(var xr,yr=dt;tt>0?yr>Dt:yr<Dt;yr-=Jt)xr=ae([Zt,-cr*P(yr),-cr*I(yr)]),Le.point(xr[0],xr[1])}}function ws(Le,Ne){Ne=V(Ne),Ne[0]-=Le,Me(Ne);var nt=H(-Ne[1]);return((-Ne[2]<0?-nt:nt)+u-i)%u}function ps(){var Le=En([0,0]),Ne=En(90),nt=En(6),tt,dt,Dt={point:Zt};function Zt(Jt,xr){tt.push(Jt=dt(Jt,xr)),Jt[0]*=d,Jt[1]*=d}function cr(){var Jt=Le.apply(this,arguments),xr=Ne.apply(this,arguments)*b,yr=nt.apply(this,arguments)*b;return tt=[],dt=$a(-Jt[0]*b,-Jt[1]*b,0).invert,Va(Dt,xr,yr,1),Jt={type:"Polygon",coordinates:[tt]},tt=dt=null,Jt}return cr.center=function(Jt){return arguments.length?(Le=typeof Jt=="function"?Jt:En([+Jt[0],+Jt[1]]),cr):Le},cr.radius=function(Jt){return arguments.length?(Ne=typeof Jt=="function"?Jt:En(+Jt),cr):Ne},cr.precision=function(Jt){return arguments.length?(nt=typeof Jt=="function"?Jt:En(+Jt),cr):nt},cr}function Ao(){var Le=[],Ne;return{point:function(tt,dt,Dt){Ne.push([tt,dt,Dt])},lineStart:function(){Le.push(Ne=[])},lineEnd:ne,rejoin:function(){Le.length>1&&Le.push(Le.pop().concat(Le.shift()))},result:function(){var tt=Le;return Le=[],Ne=null,tt}}}function zs(Le,Ne){return _(Le[0]-Ne[0])<i&&_(Le[1]-Ne[1])<i}function Qa(Le,Ne,nt,tt){this.x=Le,this.z=Ne,this.o=nt,this.e=tt,this.v=!1,this.n=this.p=null}function fs(Le,Ne,nt,tt,dt){var Dt=[],Zt=[],cr,Jt;if(Le.forEach(function(Qr){if(!((_n=Qr.length-1)<=0)){var _n,Pn=Qr[0],ri=Qr[_n],Ei;if(zs(Pn,ri)){if(!Pn[2]&&!ri[2]){for(dt.lineStart(),cr=0;cr<_n;++cr)dt.point((Pn=Qr[cr])[0],Pn[1]);dt.lineEnd();return}ri[0]+=2*i}Dt.push(Ei=new Qa(Pn,Qr,null,!0)),Zt.push(Ei.o=new Qa(Pn,null,Ei,!1)),Dt.push(Ei=new Qa(ri,Qr,null,!1)),Zt.push(Ei.o=new Qa(ri,null,Ei,!0))}}),!!Dt.length){for(Zt.sort(Ne),Vs(Dt),Vs(Zt),cr=0,Jt=Zt.length;cr<Jt;++cr)Zt[cr].e=nt=!nt;for(var xr=Dt[0],yr,rn;;){for(var Kr=xr,an=!0;Kr.v;)if((Kr=Kr.n)===xr)return;yr=Kr.z,dt.lineStart();do{if(Kr.v=Kr.o.v=!0,Kr.e){if(an)for(cr=0,Jt=yr.length;cr<Jt;++cr)dt.point((rn=yr[cr])[0],rn[1]);else tt(Kr.x,Kr.n.x,1,dt);Kr=Kr.n}else{if(an)for(yr=Kr.p.z,cr=yr.length-1;cr>=0;--cr)dt.point((rn=yr[cr])[0],rn[1]);else tt(Kr.x,Kr.p.x,-1,dt);Kr=Kr.p}Kr=Kr.o,yr=Kr.z,an=!an}while(!Kr.v);dt.lineEnd()}}}function Vs(Le){if(!!(Ne=Le.length)){for(var Ne,nt=0,tt=Le[0],dt;++nt<Ne;)tt.n=dt=Le[nt],dt.p=tt,tt=dt;tt.n=dt=Le[0],dt.p=tt}}var Ju=v();function ts(Le){return _(Le[0])<=n?Le[0]:j(Le[0])*((_(Le[0])+n)%u-n)}function Zs(Le,Ne){var nt=ts(Ne),tt=Ne[1],dt=I(tt),Dt=[I(nt),-P(nt),0],Zt=0,cr=0;Ju.reset(),dt===1?tt=s+i:dt===-1&&(tt=-s-i);for(var Jt=0,xr=Le.length;Jt<xr;++Jt)if(!!(rn=(yr=Le[Jt]).length))for(var yr,rn,Kr=yr[rn-1],an=ts(Kr),Qr=Kr[1]/2+f,_n=I(Qr),Pn=P(Qr),ri=0;ri<rn;++ri,an=zn,_n=Ti,Pn=la,Kr=Ei){var Ei=yr[ri],zn=ts(Ei),gi=Ei[1]/2+f,Ti=I(gi),la=P(gi),Vi=zn-an,Ha=Vi>=0?1:-1,Na=Ha*Vi,Wa=Na>n,mi=_n*Ti;if(Ju.add(M(mi*Ha*I(Na),Pn*la+mi*P(Na))),Zt+=Wa?Vi+Ha*u:Vi,Wa^an>=nt^zn>=nt){var eo=te(V(Kr),V(Ei));Me(eo);var Lo=te(Dt,eo);Me(Lo);var po=(Wa^Vi>=0?-1:1)*J(Lo[2]);(tt>po||tt===po&&(eo[0]||eo[1]))&&(cr+=Wa^Vi>=0?1:-1)}}return(Zt<-i||Zt<i&&Ju<-i)^cr&1}function ys(Le,Ne,nt,tt){return function(dt){var Dt=Ne(dt),Zt=Ao(),cr=Ne(Zt),Jt=!1,xr,yr,rn,Kr={point:an,lineStart:_n,lineEnd:Pn,polygonStart:function(){Kr.point=ri,Kr.lineStart=Ei,Kr.lineEnd=zn,yr=[],xr=[]},polygonEnd:function(){Kr.point=an,Kr.lineStart=_n,Kr.lineEnd=Pn,yr=g.merge(yr);var Ti=Zs(xr,tt);yr.length?(Jt||(dt.polygonStart(),Jt=!0),fs(yr,at,Ti,nt,dt)):Ti&&(Jt||(dt.polygonStart(),Jt=!0),dt.lineStart(),nt(null,null,1,dt),dt.lineEnd()),Jt&&(dt.polygonEnd(),Jt=!1),yr=xr=null},sphere:function(){dt.polygonStart(),dt.lineStart(),nt(null,null,1,dt),dt.lineEnd(),dt.polygonEnd()}};function an(gi,Ti){Le(gi,Ti)&&dt.point(gi,Ti)}function Qr(gi,Ti){Dt.point(gi,Ti)}function _n(){Kr.point=Qr,Dt.lineStart()}function Pn(){Kr.point=an,Dt.lineEnd()}function ri(gi,Ti){rn.push([gi,Ti]),cr.point(gi,Ti)}function Ei(){cr.lineStart(),rn=[]}function zn(){ri(rn[0][0],rn[0][1]),cr.lineEnd();var gi=cr.clean(),Ti=Zt.result(),la,Vi=Ti.length,Ha,Na,Wa;if(rn.pop(),xr.push(rn),rn=null,!!Vi){if(gi&1){if(Na=Ti[0],(Ha=Na.length-1)>0){for(Jt||(dt.polygonStart(),Jt=!0),dt.lineStart(),la=0;la<Ha;++la)dt.point((Wa=Na[la])[0],Wa[1]);dt.lineEnd()}return}Vi>1&&gi&2&&Ti.push(Ti.pop().concat(Ti.shift())),yr.push(Ti.filter(Lt))}}return Kr}}function Lt(Le){return Le.length>1}function at(Le,Ne){return((Le=Le.x)[0]<0?Le[1]-s-i:s-Le[1])-((Ne=Ne.x)[0]<0?Ne[1]-s-i:s-Ne[1])}var Ye=ys(function(){return!0},St,Gr,[-n,-s]);function St(Le){var Ne=NaN,nt=NaN,tt=NaN,dt;return{lineStart:function(){Le.lineStart(),dt=1},point:function(Zt,cr){var Jt=Zt>0?n:-n,xr=_(Zt-Ne);_(xr-n)<i?(Le.point(Ne,nt=(nt+cr)/2>0?s:-s),Le.point(tt,nt),Le.lineEnd(),Le.lineStart(),Le.point(Jt,nt),Le.point(Zt,nt),dt=0):tt!==Jt&&xr>=n&&(_(Ne-tt)<i&&(Ne-=tt*i),_(Zt-Jt)<i&&(Zt-=Jt*i),nt=fr(Ne,nt,Zt,cr),Le.point(tt,nt),Le.lineEnd(),Le.lineStart(),Le.point(Jt,nt),dt=0),Le.point(Ne=Zt,nt=cr),tt=Jt},lineEnd:function(){Le.lineEnd(),Ne=nt=NaN},clean:function(){return 2-dt}}}function fr(Le,Ne,nt,tt){var dt,Dt,Zt=I(Le-nt);return _(Zt)>i?x((I(Ne)*(Dt=P(tt))*I(nt)-I(tt)*(dt=P(Ne))*I(Le))/(dt*Dt*Zt)):(Ne+tt)/2}function Gr(Le,Ne,nt,tt){var dt;if(Le==null)dt=nt*s,tt.point(-n,dt),tt.point(0,dt),tt.point(n,dt),tt.point(n,0),tt.point(n,-dt),tt.point(0,-dt),tt.point(-n,-dt),tt.point(-n,0),tt.point(-n,dt);else if(_(Le[0]-Ne[0])>i){var Dt=Le[0]<Ne[0]?n:-n;dt=nt*Dt/2,tt.point(-Dt,dt),tt.point(0,dt),tt.point(Dt,dt)}else tt.point(Ne[0],Ne[1])}function hn(Le){var Ne=P(Le),nt=6*b,tt=Ne>0,dt=_(Ne)>i;function Dt(yr,rn,Kr,an){Va(an,Le,nt,Kr,yr,rn)}function Zt(yr,rn){return P(yr)*P(rn)>Ne}function cr(yr){var rn,Kr,an,Qr,_n;return{lineStart:function(){Qr=an=!1,_n=1},point:function(ri,Ei){var zn=[ri,Ei],gi,Ti=Zt(ri,Ei),la=tt?Ti?0:xr(ri,Ei):Ti?xr(ri+(ri<0?n:-n),Ei):0;if(!rn&&(Qr=an=Ti)&&yr.lineStart(),Ti!==an&&(gi=Jt(rn,zn),(!gi||zs(rn,gi)||zs(zn,gi))&&(zn[2]=1)),Ti!==an)_n=0,Ti?(yr.lineStart(),gi=Jt(zn,rn),yr.point(gi[0],gi[1])):(gi=Jt(rn,zn),yr.point(gi[0],gi[1],2),yr.lineEnd()),rn=gi;else if(dt&&rn&&tt^Ti){var Vi;!(la&Kr)&&(Vi=Jt(zn,rn,!0))&&(_n=0,tt?(yr.lineStart(),yr.point(Vi[0][0],Vi[0][1]),yr.point(Vi[1][0],Vi[1][1]),yr.lineEnd()):(yr.point(Vi[1][0],Vi[1][1]),yr.lineEnd(),yr.lineStart(),yr.point(Vi[0][0],Vi[0][1],3)))}Ti&&(!rn||!zs(rn,zn))&&yr.point(zn[0],zn[1]),rn=zn,an=Ti,Kr=la},lineEnd:function(){an&&yr.lineEnd(),rn=null},clean:function(){return _n|(Qr&&an)<<1}}}function Jt(yr,rn,Kr){var an=V(yr),Qr=V(rn),_n=[1,0,0],Pn=te(an,Qr),ri=re(Pn,Pn),Ei=Pn[0],zn=ri-Ei*Ei;if(!zn)return!Kr&&yr;var gi=Ne*ri/zn,Ti=-Ne*Ei/zn,la=te(_n,Pn),Vi=ve(_n,gi),Ha=ve(Pn,Ti);q(Vi,Ha);var Na=la,Wa=re(Vi,Na),mi=re(Na,Na),eo=Wa*Wa-mi*(re(Vi,Vi)-1);if(!(eo<0)){var Lo=N(eo),po=ve(Na,(-Wa-Lo)/mi);if(q(po,Vi),po=ae(po),!Kr)return po;var Wi=yr[0],Oo=rn[0],as=yr[1],pu=rn[1],gu;Oo<Wi&&(gu=Wi,Wi=Oo,Oo=gu);var Sl=Oo-Wi,ul=_(Sl-n)<i,X=ul||Sl<i;if(!ul&&pu<as&&(gu=as,as=pu,pu=gu),X?ul?as+pu>0^po[1]<(_(po[0]-Wi)<i?as:pu):as<=po[1]&&po[1]<=pu:Sl>n^(Wi<=po[0]&&po[0]<=Oo)){var k=ve(Na,(-Wa+Lo)/mi);return q(k,Vi),[po,ae(k)]}}}function xr(yr,rn){var Kr=tt?Le:n-Le,an=0;return yr<-Kr?an|=1:yr>Kr&&(an|=2),rn<-Kr?an|=4:rn>Kr&&(an|=8),an}return ys(Zt,cr,Dt,tt?[0,-Le]:[-n,Le-n])}function un(Le,Ne,nt,tt,dt,Dt){var Zt=Le[0],cr=Le[1],Jt=Ne[0],xr=Ne[1],yr=0,rn=1,Kr=Jt-Zt,an=xr-cr,Qr;if(Qr=nt-Zt,!(!Kr&&Qr>0)){if(Qr/=Kr,Kr<0){if(Qr<yr)return;Qr<rn&&(rn=Qr)}else if(Kr>0){if(Qr>rn)return;Qr>yr&&(yr=Qr)}if(Qr=dt-Zt,!(!Kr&&Qr<0)){if(Qr/=Kr,Kr<0){if(Qr>rn)return;Qr>yr&&(yr=Qr)}else if(Kr>0){if(Qr<yr)return;Qr<rn&&(rn=Qr)}if(Qr=tt-cr,!(!an&&Qr>0)){if(Qr/=an,an<0){if(Qr<yr)return;Qr<rn&&(rn=Qr)}else if(an>0){if(Qr>rn)return;Qr>yr&&(yr=Qr)}if(Qr=Dt-cr,!(!an&&Qr<0)){if(Qr/=an,an<0){if(Qr>rn)return;Qr>yr&&(yr=Qr)}else if(an>0){if(Qr<yr)return;Qr<rn&&(rn=Qr)}return yr>0&&(Le[0]=Zt+yr*Kr,Le[1]=cr+yr*an),rn<1&&(Ne[0]=Zt+rn*Kr,Ne[1]=cr+rn*an),!0}}}}}var Qn=1e9,Ai=-Qn;function bi(Le,Ne,nt,tt){function dt(xr,yr){return Le<=xr&&xr<=nt&&Ne<=yr&&yr<=tt}function Dt(xr,yr,rn,Kr){var an=0,Qr=0;if(xr==null||(an=Zt(xr,rn))!==(Qr=Zt(yr,rn))||Jt(xr,yr)<0^rn>0)do Kr.point(an===0||an===3?Le:nt,an>1?tt:Ne);while((an=(an+rn+4)%4)!==Qr);else Kr.point(yr[0],yr[1])}function Zt(xr,yr){return _(xr[0]-Le)<i?yr>0?0:3:_(xr[0]-nt)<i?yr>0?2:1:_(xr[1]-Ne)<i?yr>0?1:0:yr>0?3:2}function cr(xr,yr){return Jt(xr.x,yr.x)}function Jt(xr,yr){var rn=Zt(xr,1),Kr=Zt(yr,1);return rn!==Kr?rn-Kr:rn===0?yr[1]-xr[1]:rn===1?xr[0]-yr[0]:rn===2?xr[1]-yr[1]:yr[0]-xr[0]}return function(xr){var yr=xr,rn=Ao(),Kr,an,Qr,_n,Pn,ri,Ei,zn,gi,Ti,la,Vi={point:Ha,lineStart:eo,lineEnd:Lo,polygonStart:Wa,polygonEnd:mi};function Ha(Wi,Oo){dt(Wi,Oo)&&yr.point(Wi,Oo)}function Na(){for(var Wi=0,Oo=0,as=an.length;Oo<as;++Oo)for(var pu=an[Oo],gu=1,Sl=pu.length,ul=pu[0],X,k,F=ul[0],$=ul[1];gu<Sl;++gu)X=F,k=$,ul=pu[gu],F=ul[0],$=ul[1],k<=tt?$>tt&&(F-X)*(tt-k)>($-k)*(Le-X)&&++Wi:$<=tt&&(F-X)*(tt-k)<($-k)*(Le-X)&&--Wi;return Wi}function Wa(){yr=rn,Kr=[],an=[],la=!0}function mi(){var Wi=Na(),Oo=la&&Wi,as=(Kr=g.merge(Kr)).length;(Oo||as)&&(xr.polygonStart(),Oo&&(xr.lineStart(),Dt(null,null,1,xr),xr.lineEnd()),as&&fs(Kr,cr,Wi,Dt,xr),xr.polygonEnd()),yr=xr,Kr=an=Qr=null}function eo(){Vi.point=po,an&&an.push(Qr=[]),Ti=!0,gi=!1,Ei=zn=NaN}function Lo(){Kr&&(po(_n,Pn),ri&&gi&&rn.rejoin(),Kr.push(rn.result())),Vi.point=Ha,gi&&yr.lineEnd()}function po(Wi,Oo){var as=dt(Wi,Oo);if(an&&Qr.push([Wi,Oo]),Ti)_n=Wi,Pn=Oo,ri=as,Ti=!1,as&&(yr.lineStart(),yr.point(Wi,Oo));else if(as&&gi)yr.point(Wi,Oo);else{var pu=[Ei=Math.max(Ai,Math.min(Qn,Ei)),zn=Math.max(Ai,Math.min(Qn,zn))],gu=[Wi=Math.max(Ai,Math.min(Qn,Wi)),Oo=Math.max(Ai,Math.min(Qn,Oo))];un(pu,gu,Le,Ne,nt,tt)?(gi||(yr.lineStart(),yr.point(pu[0],pu[1])),yr.point(gu[0],gu[1]),as||yr.lineEnd(),la=!1):as&&(yr.lineStart(),yr.point(Wi,Oo),la=!1)}Ei=Wi,zn=Oo,gi=as}return Vi}}function na(){var Le=0,Ne=0,nt=960,tt=500,dt,Dt,Zt;return Zt={stream:function(Jt){return dt&&Dt===Jt?dt:dt=bi(Le,Ne,nt,tt)(Dt=Jt)},extent:function(Jt){return arguments.length?(Le=+Jt[0][0],Ne=+Jt[0][1],nt=+Jt[1][0],tt=+Jt[1][1],dt=Dt=null,Zt):[[Le,Ne],[nt,tt]]}}}var Oa=v(),fo,uo,Uo,lo={sphere:ne,point:ne,lineStart:go,lineEnd:ne,polygonStart:ne,polygonEnd:ne};function go(){lo.point=Qo,lo.lineEnd=Ho}function Ho(){lo.point=lo.lineEnd=ne}function Qo(Le,Ne){Le*=b,Ne*=b,fo=Le,uo=I(Ne),Uo=P(Ne),lo.point=Go}function Go(Le,Ne){Le*=b,Ne*=b;var nt=I(Ne),tt=P(Ne),dt=_(Le-fo),Dt=P(dt),Zt=I(dt),cr=tt*Zt,Jt=Uo*nt-uo*tt*Dt,xr=uo*nt+Uo*tt*Dt;Oa.add(M(N(cr*cr+Jt*Jt),xr)),fo=Le,uo=nt,Uo=tt}function _s(Le){return Oa.reset(),_e(Le,lo),+Oa}var bs=[null,null],Ks={type:"LineString",coordinates:bs};function Yo(Le,Ne){return bs[0]=Le,bs[1]=Ne,_s(Ks)}var mo={Feature:function(Ne,nt){return rs(Ne.geometry,nt)},FeatureCollection:function(Ne,nt){for(var tt=Ne.features,dt=-1,Dt=tt.length;++dt<Dt;)if(rs(tt[dt].geometry,nt))return!0;return!1}},Rs={Sphere:function(){return!0},Point:function(Ne,nt){return Za(Ne.coordinates,nt)},MultiPoint:function(Ne,nt){for(var tt=Ne.coordinates,dt=-1,Dt=tt.length;++dt<Dt;)if(Za(tt[dt],nt))return!0;return!1},LineString:function(Ne,nt){return qa(Ne.coordinates,nt)},MultiLineString:function(Ne,nt){for(var tt=Ne.coordinates,dt=-1,Dt=tt.length;++dt<Dt;)if(qa(tt[dt],nt))return!0;return!1},Polygon:function(Ne,nt){return Fs(Ne.coordinates,nt)},MultiPolygon:function(Ne,nt){for(var tt=Ne.coordinates,dt=-1,Dt=tt.length;++dt<Dt;)if(Fs(tt[dt],nt))return!0;return!1},GeometryCollection:function(Ne,nt){for(var tt=Ne.geometries,dt=-1,Dt=tt.length;++dt<Dt;)if(rs(tt[dt],nt))return!0;return!1}};function rs(Le,Ne){return Le&&Rs.hasOwnProperty(Le.type)?Rs[Le.type](Le,Ne):!1}function Za(Le,Ne){return Yo(Le,Ne)===0}function qa(Le,Ne){for(var nt,tt,dt,Dt=0,Zt=Le.length;Dt<Zt;Dt++){if(tt=Yo(Le[Dt],Ne),tt===0||Dt>0&&(dt=Yo(Le[Dt],Le[Dt-1]),dt>0&&nt<=dt&&tt<=dt&&(nt+tt-dt)*(1-Math.pow((nt-tt)/dt,2))<r*dt))return!0;nt=tt}return!1}function Fs(Le,Ne){return!!Zs(Le.map(Ou),Ws(Ne))}function Ou(Le){return Le=Le.map(Ws),Le.pop(),Le}function Ws(Le){return[Le[0]*b,Le[1]*b]}function nl(Le,Ne){return(Le&&mo.hasOwnProperty(Le.type)?mo[Le.type]:rs)(Le,Ne)}function Bu(Le,Ne,nt){var tt=g.range(Le,Ne-i,nt).concat(Ne);return function(dt){return tt.map(function(Dt){return[dt,Dt]})}}function su(Le,Ne,nt){var tt=g.range(Le,Ne-i,nt).concat(Ne);return function(dt){return tt.map(function(Dt){return[Dt,dt]})}}function zu(){var Le,Ne,nt,tt,dt,Dt,Zt,cr,Jt=10,xr=Jt,yr=90,rn=360,Kr,an,Qr,_n,Pn=2.5;function ri(){return{type:"MultiLineString",coordinates:Ei()}}function Ei(){return g.range(C(tt/yr)*yr,nt,yr).map(Qr).concat(g.range(C(cr/rn)*rn,Zt,rn).map(_n)).concat(g.range(C(Ne/Jt)*Jt,Le,Jt).filter(function(zn){return _(zn%yr)>i}).map(Kr)).concat(g.range(C(Dt/xr)*xr,dt,xr).filter(function(zn){return _(zn%rn)>i}).map(an))}return ri.lines=function(){return Ei().map(function(zn){return{type:"LineString",coordinates:zn}})},ri.outline=function(){return{type:"Polygon",coordinates:[Qr(tt).concat(_n(Zt).slice(1),Qr(nt).reverse().slice(1),_n(cr).reverse().slice(1))]}},ri.extent=function(zn){return arguments.length?ri.extentMajor(zn).extentMinor(zn):ri.extentMinor()},ri.extentMajor=function(zn){return arguments.length?(tt=+zn[0][0],nt=+zn[1][0],cr=+zn[0][1],Zt=+zn[1][1],tt>nt&&(zn=tt,tt=nt,nt=zn),cr>Zt&&(zn=cr,cr=Zt,Zt=zn),ri.precision(Pn)):[[tt,cr],[nt,Zt]]},ri.extentMinor=function(zn){return arguments.length?(Ne=+zn[0][0],Le=+zn[1][0],Dt=+zn[0][1],dt=+zn[1][1],Ne>Le&&(zn=Ne,Ne=Le,Le=zn),Dt>dt&&(zn=Dt,Dt=dt,dt=zn),ri.precision(Pn)):[[Ne,Dt],[Le,dt]]},ri.step=function(zn){return arguments.length?ri.stepMajor(zn).stepMinor(zn):ri.stepMinor()},ri.stepMajor=function(zn){return arguments.length?(yr=+zn[0],rn=+zn[1],ri):[yr,rn]},ri.stepMinor=function(zn){return arguments.length?(Jt=+zn[0],xr=+zn[1],ri):[Jt,xr]},ri.precision=function(zn){return arguments.length?(Pn=+zn,Kr=Bu(Dt,dt,90),an=su(Ne,Le,Pn),Qr=Bu(cr,Zt,90),_n=su(tt,nt,Pn),ri):Pn},ri.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function uu(){return zu()()}function hu(Le,Ne){var nt=Le[0]*b,tt=Le[1]*b,dt=Ne[0]*b,Dt=Ne[1]*b,Zt=P(tt),cr=I(tt),Jt=P(Dt),xr=I(Dt),yr=Zt*P(nt),rn=Zt*I(nt),Kr=Jt*P(dt),an=Jt*I(dt),Qr=2*J(N(Q(Dt-tt)+Zt*Jt*Q(dt-nt))),_n=I(Qr),Pn=Qr?function(ri){var Ei=I(ri*=Qr)/_n,zn=I(Qr-ri)/_n,gi=zn*yr+Ei*Kr,Ti=zn*rn+Ei*an,la=zn*cr+Ei*xr;return[M(Ti,gi)*d,M(la,N(gi*gi+Ti*Ti))*d]}:function(){return[nt*d,tt*d]};return Pn.distance=Qr,Pn}function Qu(Le){return Le}var qo=v(),du=v(),ns,ru,_u,Hs,Ns={point:ne,lineStart:ne,lineEnd:ne,polygonStart:function(){Ns.lineStart=Js,Ns.lineEnd=Vu},polygonEnd:function(){Ns.lineStart=Ns.lineEnd=Ns.point=ne,qo.add(_(du)),du.reset()},result:function(){var Ne=qo/2;return qo.reset(),Ne}};function Js(){Ns.point=Fu}function Fu(Le,Ne){Ns.point=vu,ns=_u=Le,ru=Hs=Ne}function vu(Le,Ne){du.add(Hs*Le-_u*Ne),_u=Le,Hs=Ne}function Vu(){vu(ns,ru)}var Nu=Infinity,To=Nu,Wu=-Nu,Hu=Wu,Ru={point:$o,lineStart:ne,lineEnd:ne,polygonStart:ne,polygonEnd:ne,result:function(){var Ne=[[Nu,To],[Wu,Hu]];return Wu=Hu=-(To=Nu=Infinity),Ne}};function $o(Le,Ne){Le<Nu&&(Nu=Le),Le>Wu&&(Wu=Le),Ne<To&&(To=Ne),Ne>Hu&&(Hu=Ne)}var dl=0,Gu=0,os=0,Us=0,hs=0,xs=0,il=0,Tu=0,Is=0,lu,bu,nu,Be,Fr={point:jt,lineStart:Vt,lineEnd:gr,polygonStart:function(){Fr.lineStart=en,Fr.lineEnd=Vr},polygonEnd:function(){Fr.point=jt,Fr.lineStart=Vt,Fr.lineEnd=gr},result:function(){var Ne=Is?[il/Is,Tu/Is]:xs?[Us/xs,hs/xs]:os?[dl/os,Gu/os]:[NaN,NaN];return dl=Gu=os=Us=hs=xs=il=Tu=Is=0,Ne}};function jt(Le,Ne){dl+=Le,Gu+=Ne,++os}function Vt(){Fr.point=gt}function gt(Le,Ne){Fr.point=ar,jt(nu=Le,Be=Ne)}function ar(Le,Ne){var nt=Le-nu,tt=Ne-Be,dt=N(nt*nt+tt*tt);Us+=dt*(nu+Le)/2,hs+=dt*(Be+Ne)/2,xs+=dt,jt(nu=Le,Be=Ne)}function gr(){Fr.point=jt}function en(){Fr.point=on}function Vr(){Dn(lu,bu)}function on(Le,Ne){Fr.point=Dn,jt(lu=nu=Le,bu=Be=Ne)}function Dn(Le,Ne){var nt=Le-nu,tt=Ne-Be,dt=N(nt*nt+tt*tt);Us+=dt*(nu+Le)/2,hs+=dt*(Be+Ne)/2,xs+=dt,dt=Be*Le-nu*Ne,il+=dt*(nu+Le),Tu+=dt*(Be+Ne),Is+=dt*3,jt(nu=Le,Be=Ne)}function di(Le){this._context=Le}di.prototype={_radius:4.5,pointRadius:function(Ne){return this._radius=Ne,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Ne,nt){switch(this._point){case 0:{this._context.moveTo(Ne,nt),this._point=1;break}case 1:{this._context.lineTo(Ne,nt);break}default:{this._context.moveTo(Ne+this._radius,nt),this._context.arc(Ne,nt,this._radius,0,u);break}}},result:ne};var xi=v(),ji,ia,ca,ea,ma,Ia={point:ne,lineStart:function(){Ia.point=Fa},lineEnd:function(){ji&&Io(ia,ca),Ia.point=ne},polygonStart:function(){ji=!0},polygonEnd:function(){ji=null},result:function(){var Ne=+xi;return xi.reset(),Ne}};function Fa(Le,Ne){Ia.point=Io,ia=ea=Le,ca=ma=Ne}function Io(Le,Ne){ea-=Le,ma-=Ne,xi.add(N(ea*ea+ma*ma)),ea=Le,ma=Ne}function ho(){this._string=[]}ho.prototype={_radius:4.5,_circle:Ba(4.5),pointRadius:function(Ne){return(Ne=+Ne)!==this._radius&&(this._radius=Ne,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Ne,nt){switch(this._point){case 0:{this._string.push("M",Ne,",",nt),this._point=1;break}case 1:{this._string.push("L",Ne,",",nt);break}default:{this._circle==null&&(this._circle=Ba(this._radius)),this._string.push("M",Ne,",",nt,this._circle);break}}},result:function(){if(this._string.length){var Ne=this._string.join("");return this._string=[],Ne}else return null}};function Ba(Le){return"m0,"+Le+"a"+Le+","+Le+" 0 1,1 0,"+-2*Le+"a"+Le+","+Le+" 0 1,1 0,"+2*Le+"z"}function Mo(Le,Ne){var nt=4.5,tt,dt;function Dt(Zt){return Zt&&(typeof nt=="function"&&dt.pointRadius(+nt.apply(this,arguments)),_e(Zt,tt(dt))),dt.result()}return Dt.area=function(Zt){return _e(Zt,tt(Ns)),Ns.result()},Dt.measure=function(Zt){return _e(Zt,tt(Ia)),Ia.result()},Dt.bounds=function(Zt){return _e(Zt,tt(Ru)),Ru.result()},Dt.centroid=function(Zt){return _e(Zt,tt(Fr)),Fr.result()},Dt.projection=function(Zt){return arguments.length?(tt=Zt==null?(Le=null,Qu):(Le=Zt).stream,Dt):Le},Dt.context=function(Zt){return arguments.length?(dt=Zt==null?(Ne=null,new ho):new di(Ne=Zt),typeof nt!="function"&&dt.pointRadius(nt),Dt):Ne},Dt.pointRadius=function(Zt){return arguments.length?(nt=typeof Zt=="function"?Zt:(dt.pointRadius(+Zt),+Zt),Dt):nt},Dt.projection(Le).context(Ne)}function _o(Le){return{stream:Da(Le)}}function Da(Le){return function(Ne){var nt=new ss;for(var tt in Le)nt[tt]=Le[tt];return nt.stream=Ne,nt}}function ss(){}ss.prototype={constructor:ss,point:function(Ne,nt){this.stream.point(Ne,nt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ko(Le,Ne,nt){var tt=Le.clipExtent&&Le.clipExtent();return Le.scale(150).translate([0,0]),tt!=null&&Le.clipExtent(null),_e(nt,Le.stream(Ru)),Ne(Ru.result()),tt!=null&&Le.clipExtent(tt),Le}function bo(Le,Ne,nt){return ko(Le,function(tt){var dt=Ne[1][0]-Ne[0][0],Dt=Ne[1][1]-Ne[0][1],Zt=Math.min(dt/(tt[1][0]-tt[0][0]),Dt/(tt[1][1]-tt[0][1])),cr=+Ne[0][0]+(dt-Zt*(tt[1][0]+tt[0][0]))/2,Jt=+Ne[0][1]+(Dt-Zt*(tt[1][1]+tt[0][1]))/2;Le.scale(150*Zt).translate([cr,Jt])},nt)}function Zo(Le,Ne,nt){return bo(Le,[[0,0],Ne],nt)}function As(Le,Ne,nt){return ko(Le,function(tt){var dt=+Ne,Dt=dt/(tt[1][0]-tt[0][0]),Zt=(dt-Dt*(tt[1][0]+tt[0][0]))/2,cr=-Dt*tt[0][1];Le.scale(150*Dt).translate([Zt,cr])},nt)}function us(Le,Ne,nt){return ko(Le,function(tt){var dt=+Ne,Dt=dt/(tt[1][1]-tt[0][1]),Zt=-Dt*tt[0][0],cr=(dt-Dt*(tt[1][1]+tt[0][1]))/2;Le.scale(150*Dt).translate([Zt,cr])},nt)}var Mu=16,Qs=P(30*b);function Ls(Le,Ne){return+Ne?al(Le,Ne):Es(Le)}function Es(Le){return Da({point:function(nt,tt){nt=Le(nt,tt),this.stream.point(nt[0],nt[1])}})}function al(Le,Ne){function nt(tt,dt,Dt,Zt,cr,Jt,xr,yr,rn,Kr,an,Qr,_n,Pn){var ri=xr-tt,Ei=yr-dt,zn=ri*ri+Ei*Ei;if(zn>4*Ne&&_n--){var gi=Zt+Kr,Ti=cr+an,la=Jt+Qr,Vi=N(gi*gi+Ti*Ti+la*la),Ha=J(la/=Vi),Na=_(_(la)-1)<i||_(Dt-rn)<i?(Dt+rn)/2:M(Ti,gi),Wa=Le(Na,Ha),mi=Wa[0],eo=Wa[1],Lo=mi-tt,po=eo-dt,Wi=Ei*Lo-ri*po;(Wi*Wi/zn>Ne||_((ri*Lo+Ei*po)/zn-.5)>.3||Zt*Kr+cr*an+Jt*Qr<Qs)&&(nt(tt,dt,Dt,Zt,cr,Jt,mi,eo,Na,gi/=Vi,Ti/=Vi,la,_n,Pn),Pn.point(mi,eo),nt(mi,eo,Na,gi,Ti,la,xr,yr,rn,Kr,an,Qr,_n,Pn))}}return function(tt){var dt,Dt,Zt,cr,Jt,xr,yr,rn,Kr,an,Qr,_n,Pn={point:ri,lineStart:Ei,lineEnd:gi,polygonStart:function(){tt.polygonStart(),Pn.lineStart=Ti},polygonEnd:function(){tt.polygonEnd(),Pn.lineStart=Ei}};function ri(Ha,Na){Ha=Le(Ha,Na),tt.point(Ha[0],Ha[1])}function Ei(){rn=NaN,Pn.point=zn,tt.lineStart()}function zn(Ha,Na){var Wa=V([Ha,Na]),mi=Le(Ha,Na);nt(rn,Kr,yr,an,Qr,_n,rn=mi[0],Kr=mi[1],yr=Ha,an=Wa[0],Qr=Wa[1],_n=Wa[2],Mu,tt),tt.point(rn,Kr)}function gi(){Pn.point=ri,tt.lineEnd()}function Ti(){Ei(),Pn.point=la,Pn.lineEnd=Vi}function la(Ha,Na){zn(dt=Ha,Na),Dt=rn,Zt=Kr,cr=an,Jt=Qr,xr=_n,Pn.point=zn}function Vi(){nt(rn,Kr,yr,an,Qr,_n,Dt,Zt,dt,cr,Jt,xr,Mu,tt),Pn.lineEnd=gi,gi()}return Pn}}var cu=Da({point:function(Ne,nt){this.stream.point(Ne*b,nt*b)}});function zo(Le){return Da({point:function(nt,tt){var dt=Le(nt,tt);return this.stream.point(dt[0],dt[1])}})}function qu(Le,Ne,nt,tt,dt){function Dt(Zt,cr){return Zt*=tt,cr*=dt,[Ne+Le*Zt,nt-Le*cr]}return Dt.invert=function(Zt,cr){return[(Zt-Ne)/Le*tt,(nt-cr)/Le*dt]},Dt}function ol(Le,Ne,nt,tt,dt,Dt){var Zt=P(Dt),cr=I(Dt),Jt=Zt*Le,xr=cr*Le,yr=Zt/Le,rn=cr/Le,Kr=(cr*nt-Zt*Ne)/Le,an=(cr*Ne+Zt*nt)/Le;function Qr(_n,Pn){return _n*=tt,Pn*=dt,[Jt*_n-xr*Pn+Ne,nt-xr*_n-Jt*Pn]}return Qr.invert=function(_n,Pn){return[tt*(yr*_n-rn*Pn+Kr),dt*(an-rn*_n-yr*Pn)]},Qr}function xu(Le){return xo(function(){return Le})()}function xo(Le){var Ne,nt=150,tt=480,dt=250,Dt=0,Zt=0,cr=0,Jt=0,xr=0,yr,rn=0,Kr=1,an=1,Qr=null,_n=Ye,Pn=null,ri,Ei,zn,gi=Qu,Ti=.5,la,Vi,Ha,Na,Wa;function mi(Wi){return Ha(Wi[0]*b,Wi[1]*b)}function eo(Wi){return Wi=Ha.invert(Wi[0],Wi[1]),Wi&&[Wi[0]*d,Wi[1]*d]}mi.stream=function(Wi){return Na&&Wa===Wi?Na:Na=cu(zo(yr)(_n(la(gi(Wa=Wi)))))},mi.preclip=function(Wi){return arguments.length?(_n=Wi,Qr=void 0,po()):_n},mi.postclip=function(Wi){return arguments.length?(gi=Wi,Pn=ri=Ei=zn=null,po()):gi},mi.clipAngle=function(Wi){return arguments.length?(_n=+Wi?hn(Qr=Wi*b):(Qr=null,Ye),po()):Qr*d},mi.clipExtent=function(Wi){return arguments.length?(gi=Wi==null?(Pn=ri=Ei=zn=null,Qu):bi(Pn=+Wi[0][0],ri=+Wi[0][1],Ei=+Wi[1][0],zn=+Wi[1][1]),po()):Pn==null?null:[[Pn,ri],[Ei,zn]]},mi.scale=function(Wi){return arguments.length?(nt=+Wi,Lo()):nt},mi.translate=function(Wi){return arguments.length?(tt=+Wi[0],dt=+Wi[1],Lo()):[tt,dt]},mi.center=function(Wi){return arguments.length?(Dt=Wi[0]%360*b,Zt=Wi[1]%360*b,Lo()):[Dt*d,Zt*d]},mi.rotate=function(Wi){return arguments.length?(cr=Wi[0]%360*b,Jt=Wi[1]%360*b,xr=Wi.length>2?Wi[2]%360*b:0,Lo()):[cr*d,Jt*d,xr*d]},mi.angle=function(Wi){return arguments.length?(rn=Wi%360*b,Lo()):rn*d},mi.reflectX=function(Wi){return arguments.length?(Kr=Wi?-1:1,Lo()):Kr<0},mi.reflectY=function(Wi){return arguments.length?(an=Wi?-1:1,Lo()):an<0},mi.precision=function(Wi){return arguments.length?(la=Ls(Vi,Ti=Wi*Wi),po()):N(Ti)},mi.fitExtent=function(Wi,Oo){return bo(mi,Wi,Oo)},mi.fitSize=function(Wi,Oo){return Zo(mi,Wi,Oo)},mi.fitWidth=function(Wi,Oo){return As(mi,Wi,Oo)},mi.fitHeight=function(Wi,Oo){return us(mi,Wi,Oo)};function Lo(){var Wi=ol(nt,0,0,Kr,an,rn).apply(null,Ne(Dt,Zt)),Oo=(rn?ol:qu)(nt,tt-Wi[0],dt-Wi[1],Kr,an,rn);return yr=$a(cr,Jt,xr),Vi=Yn(Ne,Oo),Ha=Yn(yr,Vi),la=Ls(Vi,Ti),po()}function po(){return Na=Wa=null,mi}return function(){return Ne=Le.apply(this,arguments),mi.invert=Ne.invert&&eo,Lo()}}function Ko(Le){var Ne=0,nt=n/3,tt=xo(Le),dt=tt(Ne,nt);return dt.parallels=function(Dt){return arguments.length?tt(Ne=Dt[0]*b,nt=Dt[1]*b):[Ne*d,nt*d]},dt}function Iu(Le){var Ne=P(Le);function nt(tt,dt){return[tt*Ne,I(dt)/Ne]}return nt.invert=function(tt,dt){return[tt/Ne,J(dt*Ne)]},nt}function Hl(Le,Ne){var nt=I(Le),tt=(nt+I(Ne))/2;if(_(tt)<i)return Iu(Le);var dt=1+nt*(2*tt-nt),Dt=N(dt)/tt;function Zt(cr,Jt){var xr=N(dt-2*tt*I(Jt))/tt;return[xr*I(cr*=tt),Dt-xr*P(cr)]}return Zt.invert=function(cr,Jt){var xr=Dt-Jt,yr=M(cr,_(xr))*j(xr);return xr*tt<0&&(yr-=n*j(cr)*j(xr)),[yr/tt,J((dt-(cr*cr+xr*xr)*tt*tt)/(2*tt))]},Zt}function xl(){return Ko(Hl).scale(155.424).center([0,33.6442])}function yl(){return xl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tc(Le){var Ne=Le.length;return{point:function(tt,dt){for(var Dt=-1;++Dt<Ne;)Le[Dt].point(tt,dt)},sphere:function(){for(var tt=-1;++tt<Ne;)Le[tt].sphere()},lineStart:function(){for(var tt=-1;++tt<Ne;)Le[tt].lineStart()},lineEnd:function(){for(var tt=-1;++tt<Ne;)Le[tt].lineEnd()},polygonStart:function(){for(var tt=-1;++tt<Ne;)Le[tt].polygonStart()},polygonEnd:function(){for(var tt=-1;++tt<Ne;)Le[tt].polygonEnd()}}}function El(){var Le,Ne,nt=yl(),tt,dt=xl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Dt,Zt=xl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),cr,Jt,xr={point:function(an,Qr){Jt=[an,Qr]}};function yr(Kr){var an=Kr[0],Qr=Kr[1];return Jt=null,tt.point(an,Qr),Jt||(Dt.point(an,Qr),Jt)||(cr.point(an,Qr),Jt)}yr.invert=function(Kr){var an=nt.scale(),Qr=nt.translate(),_n=(Kr[0]-Qr[0])/an,Pn=(Kr[1]-Qr[1])/an;return(Pn>=.12&&Pn<.234&&_n>=-.425&&_n<-.214?dt:Pn>=.166&&Pn<.234&&_n>=-.214&&_n<-.115?Zt:nt).invert(Kr)},yr.stream=function(Kr){return Le&&Ne===Kr?Le:Le=Tc([nt.stream(Ne=Kr),dt.stream(Kr),Zt.stream(Kr)])},yr.precision=function(Kr){return arguments.length?(nt.precision(Kr),dt.precision(Kr),Zt.precision(Kr),rn()):nt.precision()},yr.scale=function(Kr){return arguments.length?(nt.scale(Kr),dt.scale(Kr*.35),Zt.scale(Kr),yr.translate(nt.translate())):nt.scale()},yr.translate=function(Kr){if(!arguments.length)return nt.translate();var an=nt.scale(),Qr=+Kr[0],_n=+Kr[1];return tt=nt.translate(Kr).clipExtent([[Qr-.455*an,_n-.238*an],[Qr+.455*an,_n+.238*an]]).stream(xr),Dt=dt.translate([Qr-.307*an,_n+.201*an]).clipExtent([[Qr-.425*an+i,_n+.12*an+i],[Qr-.214*an-i,_n+.234*an-i]]).stream(xr),cr=Zt.translate([Qr-.205*an,_n+.212*an]).clipExtent([[Qr-.214*an+i,_n+.166*an+i],[Qr-.115*an-i,_n+.234*an-i]]).stream(xr),rn()},yr.fitExtent=function(Kr,an){return bo(yr,Kr,an)},yr.fitSize=function(Kr,an){return Zo(yr,Kr,an)},yr.fitWidth=function(Kr,an){return As(yr,Kr,an)},yr.fitHeight=function(Kr,an){return us(yr,Kr,an)};function rn(){return Le=Ne=null,yr}return yr.scale(1070)}function _l(Le){return function(Ne,nt){var tt=P(Ne),dt=P(nt),Dt=Le(tt*dt);return[Dt*dt*I(Ne),Dt*I(nt)]}}function sl(Le){return function(Ne,nt){var tt=N(Ne*Ne+nt*nt),dt=Le(tt),Dt=I(dt),Zt=P(dt);return[M(Ne*Dt,tt*Zt),J(tt&&nt*Dt/tt)]}}var ls=_l(function(Le){return N(2/(1+Le))});ls.invert=sl(function(Le){return 2*J(Le/2)});function gs(){return xu(ls).scale(124.75).clipAngle(180-.001)}var ht=_l(function(Le){return(Le=H(Le))&&Le/I(Le)});ht.invert=sl(function(Le){return Le});function Ut(){return xu(ht).scale(79.4188).clipAngle(180-.001)}function Ht(Le,Ne){return[Le,w(W((s+Ne)/2))]}Ht.invert=function(Le,Ne){return[Le,2*x(O(Ne))-s]};function Kt(){return pr(Ht).scale(961/u)}function pr(Le){var Ne=xu(Le),nt=Ne.center,tt=Ne.scale,dt=Ne.translate,Dt=Ne.clipExtent,Zt=null,cr,Jt,xr;Ne.scale=function(rn){return arguments.length?(tt(rn),yr()):tt()},Ne.translate=function(rn){return arguments.length?(dt(rn),yr()):dt()},Ne.center=function(rn){return arguments.length?(nt(rn),yr()):nt()},Ne.clipExtent=function(rn){return arguments.length?(rn==null?Zt=cr=Jt=xr=null:(Zt=+rn[0][0],cr=+rn[0][1],Jt=+rn[1][0],xr=+rn[1][1]),yr()):Zt==null?null:[[Zt,cr],[Jt,xr]]};function yr(){var rn=n*tt(),Kr=Ne(So(Ne.rotate()).invert([0,0]));return Dt(Zt==null?[[Kr[0]-rn,Kr[1]-rn],[Kr[0]+rn,Kr[1]+rn]]:Le===Ht?[[Math.max(Kr[0]-rn,Zt),cr],[Math.min(Kr[0]+rn,Jt),xr]]:[[Zt,Math.max(Kr[1]-rn,cr)],[Jt,Math.min(Kr[1]+rn,xr)]])}return yr()}function ln(Le){return W((s+Le)/2)}function Rn(Le,Ne){var nt=P(Le),tt=Le===Ne?I(Le):w(nt/P(Ne))/w(ln(Ne)/ln(Le)),dt=nt*S(ln(Le),tt)/tt;if(!tt)return Ht;function Dt(Zt,cr){dt>0?cr<-s+i&&(cr=-s+i):cr>s-i&&(cr=s-i);var Jt=dt/S(ln(cr),tt);return[Jt*I(tt*Zt),dt-Jt*P(tt*Zt)]}return Dt.invert=function(Zt,cr){var Jt=dt-cr,xr=j(tt)*N(Zt*Zt+Jt*Jt),yr=M(Zt,_(Jt))*j(Jt);return Jt*tt<0&&(yr-=n*j(Zt)*j(Jt)),[yr/tt,2*x(S(dt/xr,1/tt))-s]},Dt}function Fn(){return Ko(Rn).scale(109.5).parallels([30,30])}function li(Le,Ne){return[Le,Ne]}li.invert=li;function qi(){return xu(li).scale(152.63)}function Wn(Le,Ne){var nt=P(Le),tt=Le===Ne?I(Le):(nt-P(Ne))/(Ne-Le),dt=nt/tt+Le;if(_(tt)<i)return li;function Dt(Zt,cr){var Jt=dt-cr,xr=tt*Zt;return[Jt*I(xr),dt-Jt*P(xr)]}return Dt.invert=function(Zt,cr){var Jt=dt-cr,xr=M(Zt,_(Jt))*j(Jt);return Jt*tt<0&&(xr-=n*j(Zt)*j(Jt)),[xr/tt,dt-j(tt)*N(Zt*Zt+Jt*Jt)]},Dt}function ga(){return Ko(Wn).scale(131.154).center([0,13.9389])}var ao=1.340264,is=-.081106,vo=893e-6,Et=.003796,bt=N(3)/2,mr=12;function or(Le,Ne){var nt=J(bt*I(Ne)),tt=nt*nt,dt=tt*tt*tt;return[Le*P(nt)/(bt*(ao+3*is*tt+dt*(7*vo+9*Et*tt))),nt*(ao+is*tt+dt*(vo+Et*tt))]}or.invert=function(Le,Ne){for(var nt=Ne,tt=nt*nt,dt=tt*tt*tt,Dt=0,Zt,cr,Jt;Dt<mr&&(cr=nt*(ao+is*tt+dt*(vo+Et*tt))-Ne,Jt=ao+3*is*tt+dt*(7*vo+9*Et*tt),nt-=Zt=cr/Jt,tt=nt*nt,dt=tt*tt*tt,!(_(Zt)<r));++Dt);return[bt*Le*(ao+3*is*tt+dt*(7*vo+9*Et*tt))/P(nt),J(I(nt)/bt)]};function Ir(){return xu(or).scale(177.158)}function yn(Le,Ne){var nt=P(Ne),tt=P(Le)*nt;return[nt*I(Le)/tt,I(Ne)/tt]}yn.invert=sl(x);function jn(){return xu(yn).scale(144.049).clipAngle(60)}function qn(){var Le=1,Ne=0,nt=0,tt=1,dt=1,Dt=0,Zt,cr,Jt=null,xr,yr,rn,Kr=1,an=1,Qr=Da({point:function(Ti,la){var Vi=zn([Ti,la]);this.stream.point(Vi[0],Vi[1])}}),_n=Qu,Pn,ri;function Ei(){return Kr=Le*tt,an=Le*dt,Pn=ri=null,zn}function zn(gi){var Ti=gi[0]*Kr,la=gi[1]*an;if(Dt){var Vi=la*Zt-Ti*cr;Ti=Ti*Zt+la*cr,la=Vi}return[Ti+Ne,la+nt]}return zn.invert=function(gi){var Ti=gi[0]-Ne,la=gi[1]-nt;if(Dt){var Vi=la*Zt+Ti*cr;Ti=Ti*Zt-la*cr,la=Vi}return[Ti/Kr,la/an]},zn.stream=function(gi){return Pn&&ri===gi?Pn:Pn=Qr(_n(ri=gi))},zn.postclip=function(gi){return arguments.length?(_n=gi,Jt=xr=yr=rn=null,Ei()):_n},zn.clipExtent=function(gi){return arguments.length?(_n=gi==null?(Jt=xr=yr=rn=null,Qu):bi(Jt=+gi[0][0],xr=+gi[0][1],yr=+gi[1][0],rn=+gi[1][1]),Ei()):Jt==null?null:[[Jt,xr],[yr,rn]]},zn.scale=function(gi){return arguments.length?(Le=+gi,Ei()):Le},zn.translate=function(gi){return arguments.length?(Ne=+gi[0],nt=+gi[1],Ei()):[Ne,nt]},zn.angle=function(gi){return arguments.length?(Dt=gi%360*b,cr=I(Dt),Zt=P(Dt),Ei()):Dt*d},zn.reflectX=function(gi){return arguments.length?(tt=gi?-1:1,Ei()):tt<0},zn.reflectY=function(gi){return arguments.length?(dt=gi?-1:1,Ei()):dt<0},zn.fitExtent=function(gi,Ti){return bo(zn,gi,Ti)},zn.fitSize=function(gi,Ti){return Zo(zn,gi,Ti)},zn.fitWidth=function(gi,Ti){return As(zn,gi,Ti)},zn.fitHeight=function(gi,Ti){return us(zn,gi,Ti)},zn}function ui(Le,Ne){var nt=Ne*Ne,tt=nt*nt;return[Le*(.8707-.131979*nt+tt*(-.013791+tt*(.003971*nt-.001529*tt))),Ne*(1.007226+nt*(.015085+tt*(-.044475+.028874*nt-.005916*tt)))]}ui.invert=function(Le,Ne){var nt=Ne,tt=25,dt;do{var Dt=nt*nt,Zt=Dt*Dt;nt-=dt=(nt*(1.007226+Dt*(.015085+Zt*(-.044475+.028874*Dt-.005916*Zt)))-Ne)/(1.007226+Dt*(.015085*3+Zt*(-.044475*7+.028874*9*Dt-.005916*11*Zt)))}while(_(dt)>i&&--tt>0);return[Le/(.8707+(Dt=nt*nt)*(-.131979+Dt*(-.013791+Dt*Dt*Dt*(.003971-.001529*Dt)))),nt]};function kn(){return xu(ui).scale(175.295)}function oi(Le,Ne){return[P(Ne)*I(Le),I(Ne)]}oi.invert=sl(J);function bn(){return xu(oi).scale(249.5).clipAngle(90+i)}function Xe(Le,Ne){var nt=P(Ne),tt=1+P(Le)*nt;return[nt*I(Le)/tt,I(Ne)/tt]}Xe.invert=sl(function(Le){return 2*x(Le)});function et(){return xu(Xe).scale(250).clipAngle(142)}function Ct(Le,Ne){return[w(W((s+Ne)/2)),-Le]}Ct.invert=function(Le,Ne){return[-Ne,2*x(O(Le))-s]};function At(){var Le=pr(Ct),Ne=Le.center,nt=Le.rotate;return Le.center=function(tt){return arguments.length?Ne([-tt[1],tt[0]]):(tt=Ne(),[tt[1],-tt[0]])},Le.rotate=function(tt){return arguments.length?nt([tt[0],tt[1],tt.length>2?tt[2]+90:90]):(tt=nt(),[tt[0],tt[1],tt[2]-90])},nt([0,0,90]).scale(159.155)}e.geoAlbers=yl,e.geoAlbersUsa=El,e.geoArea=z,e.geoAzimuthalEqualArea=gs,e.geoAzimuthalEqualAreaRaw=ls,e.geoAzimuthalEquidistant=Ut,e.geoAzimuthalEquidistantRaw=ht,e.geoBounds=xt,e.geoCentroid=Nn,e.geoCircle=ps,e.geoClipAntimeridian=Ye,e.geoClipCircle=hn,e.geoClipExtent=na,e.geoClipRectangle=bi,e.geoConicConformal=Fn,e.geoConicConformalRaw=Rn,e.geoConicEqualArea=xl,e.geoConicEqualAreaRaw=Hl,e.geoConicEquidistant=ga,e.geoConicEquidistantRaw=Wn,e.geoContains=nl,e.geoDistance=Yo,e.geoEqualEarth=Ir,e.geoEqualEarthRaw=or,e.geoEquirectangular=qi,e.geoEquirectangularRaw=li,e.geoGnomonic=jn,e.geoGnomonicRaw=yn,e.geoGraticule=zu,e.geoGraticule10=uu,e.geoIdentity=qn,e.geoInterpolate=hu,e.geoLength=_s,e.geoMercator=Kt,e.geoMercatorRaw=Ht,e.geoNaturalEarth1=kn,e.geoNaturalEarth1Raw=ui,e.geoOrthographic=bn,e.geoOrthographicRaw=oi,e.geoPath=Mo,e.geoProjection=xu,e.geoProjectionMutator=xo,e.geoRotation=So,e.geoStereographic=et,e.geoStereographicRaw=Xe,e.geoStream=_e,e.geoTransform=_o,e.geoTransverseMercator=At,e.geoTransverseMercatorRaw=Ct,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(B,L,o){(function(e,g){g(L,o("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(e,g){"use strict";var v=function(){return new p};function p(){this.reset()}p.prototype={constructor:p,reset:function(){this.s=this.t=0},add:function(bt){h(c,bt,this.t),h(this,c.s,this.s),this.s?this.t+=c.t:this.s=c.t},valueOf:function(){return this.s}};var c=new p;function h(Et,bt,mr){var or=Et.s=bt+mr,Ir=or-bt,yn=or-Ir;Et.t=bt-yn+(mr-Ir)}var i=1e-6,r=1e-12,n=Math.PI,s=n/2,f=n/4,u=n*2,d=180/n,b=n/180,_=Math.abs,x=Math.atan,M=Math.atan2,P=Math.cos,C=Math.ceil,O=Math.exp,w=Math.log,S=Math.pow,I=Math.sin,j=Math.sign||function(Et){return Et>0?1:Et<0?-1:0},N=Math.sqrt,W=Math.tan;function H(Et){return Et>1?0:Et<-1?n:Math.acos(Et)}function J(Et){return Et>1?s:Et<-1?-s:Math.asin(Et)}function Q(Et){return(Et=I(Et/2))*Et}function ne(){}function K(Et,bt){Et&&de.hasOwnProperty(Et.type)&&de[Et.type](Et,bt)}var ie={Feature:function(bt,mr){K(bt.geometry,mr)},FeatureCollection:function(bt,mr){for(var or=bt.features,Ir=-1,yn=or.length;++Ir<yn;)K(or[Ir].geometry,mr)}},de={Sphere:function(bt,mr){mr.sphere()},Point:function(bt,mr){bt=bt.coordinates,mr.point(bt[0],bt[1],bt[2])},MultiPoint:function(bt,mr){for(var or=bt.coordinates,Ir=-1,yn=or.length;++Ir<yn;)bt=or[Ir],mr.point(bt[0],bt[1],bt[2])},LineString:function(bt,mr){we(bt.coordinates,mr,0)},MultiLineString:function(bt,mr){for(var or=bt.coordinates,Ir=-1,yn=or.length;++Ir<yn;)we(or[Ir],mr,0)},Polygon:function(bt,mr){Re(bt.coordinates,mr)},MultiPolygon:function(bt,mr){for(var or=bt.coordinates,Ir=-1,yn=or.length;++Ir<yn;)Re(or[Ir],mr)},GeometryCollection:function(bt,mr){for(var or=bt.geometries,Ir=-1,yn=or.length;++Ir<yn;)K(or[Ir],mr)}};function we(Et,bt,mr){var or=-1,Ir=Et.length-mr,yn;for(bt.lineStart();++or<Ir;)yn=Et[or],bt.point(yn[0],yn[1],yn[2]);bt.lineEnd()}function Re(Et,bt){var mr=-1,or=Et.length;for(bt.polygonStart();++mr<or;)we(Et[mr],bt,1);bt.polygonEnd()}var _e=function(bt,mr){bt&&ie.hasOwnProperty(bt.type)?ie[bt.type](bt,mr):K(bt,mr)},Ue=v(),rt=v(),Fe,Se,ye,Oe,ue,xe={point:ne,lineStart:ne,lineEnd:ne,polygonStart:function(){Ue.reset(),xe.lineStart=Ae,xe.lineEnd=pe},polygonEnd:function(){var bt=+Ue;rt.add(bt<0?u+bt:bt),this.lineStart=this.lineEnd=this.point=ne},sphere:function(){rt.add(u)}};function Ae(){xe.point=be}function pe(){le(Fe,Se)}function be(Et,bt){xe.point=le,Fe=Et,Se=bt,Et*=b,bt*=b,ye=Et,Oe=P(bt=bt/2+f),ue=I(bt)}function le(Et,bt){Et*=b,bt*=b,bt=bt/2+f;var mr=Et-ye,or=mr>=0?1:-1,Ir=or*mr,yn=P(bt),jn=I(bt),qn=ue*jn,ui=Oe*yn+qn*P(Ir),kn=qn*or*I(Ir);Ue.add(M(kn,ui)),ye=Et,Oe=yn,ue=jn}var z=function(bt){return rt.reset(),_e(bt,xe),rt*2};function ae(Et){return[M(Et[1],Et[0]),J(Et[2])]}function V(Et){var bt=Et[0],mr=Et[1],or=P(mr);return[or*P(bt),or*I(bt),I(mr)]}function re(Et,bt){return Et[0]*bt[0]+Et[1]*bt[1]+Et[2]*bt[2]}function te(Et,bt){return[Et[1]*bt[2]-Et[2]*bt[1],Et[2]*bt[0]-Et[0]*bt[2],Et[0]*bt[1]-Et[1]*bt[0]]}function q(Et,bt){Et[0]+=bt[0],Et[1]+=bt[1],Et[2]+=bt[2]}function ve(Et,bt){return[Et[0]*bt,Et[1]*bt,Et[2]*bt]}function Me(Et){var bt=N(Et[0]*Et[0]+Et[1]*Et[1]+Et[2]*Et[2]);Et[0]/=bt,Et[1]/=bt,Et[2]/=bt}var De,ze,We,He,$e,It,Yt,rr,ir=v(),Br,tr,ft={point:st,lineStart:Qe,lineEnd:it,polygonStart:function(){ft.point=zt,ft.lineStart=Qt,ft.lineEnd=Ar,ir.reset(),xe.polygonStart()},polygonEnd:function(){xe.polygonEnd(),ft.point=st,ft.lineStart=Qe,ft.lineEnd=it,Ue<0?(De=-(We=180),ze=-(He=90)):ir>i?He=90:ir<-i&&(ze=-90),tr[0]=De,tr[1]=We}};function st(Et,bt){Br.push(tr=[De=Et,We=Et]),bt<ze&&(ze=bt),bt>He&&(He=bt)}function Tt(Et,bt){var mr=V([Et*b,bt*b]);if(rr){var or=te(rr,mr),Ir=[or[1],-or[0],0],yn=te(Ir,or);Me(yn),yn=ae(yn);var jn=Et-$e,qn=jn>0?1:-1,ui=yn[0]*d*qn,kn,oi=_(jn)>180;oi^(qn*$e<ui&&ui<qn*Et)?(kn=yn[1]*d,kn>He&&(He=kn)):(ui=(ui+360)%360-180,oi^(qn*$e<ui&&ui<qn*Et)?(kn=-yn[1]*d,kn<ze&&(ze=kn)):(bt<ze&&(ze=bt),bt>He&&(He=bt))),oi?Et<$e?zr(De,Et)>zr(De,We)&&(We=Et):zr(Et,We)>zr(De,We)&&(De=Et):We>=De?(Et<De&&(De=Et),Et>We&&(We=Et)):Et>$e?zr(De,Et)>zr(De,We)&&(We=Et):zr(Et,We)>zr(De,We)&&(De=Et)}else Br.push(tr=[De=Et,We=Et]);bt<ze&&(ze=bt),bt>He&&(He=bt),rr=mr,$e=Et}function Qe(){ft.point=Tt}function it(){tr[0]=De,tr[1]=We,ft.point=st,rr=null}function zt(Et,bt){if(rr){var mr=Et-$e;ir.add(_(mr)>180?mr+(mr>0?360:-360):mr)}else It=Et,Yt=bt;xe.point(Et,bt),Tt(Et,bt)}function Qt(){xe.lineStart()}function Ar(){zt(It,Yt),xe.lineEnd(),_(ir)>i&&(De=-(We=180)),tr[0]=De,tr[1]=We,rr=null}function zr(Et,bt){return(bt-=Et)<0?bt+360:bt}function ct(Et,bt){return Et[0]-bt[0]}function ot(Et,bt){return Et[0]<=Et[1]?Et[0]<=bt&&bt<=Et[1]:bt<Et[0]||Et[1]<bt}var xt=function(bt){var mr,or,Ir,yn,jn,qn,ui;if(He=We=-(De=ze=Infinity),Br=[],_e(bt,ft),or=Br.length){for(Br.sort(ct),mr=1,Ir=Br[0],jn=[Ir];mr<or;++mr)yn=Br[mr],ot(Ir,yn[0])||ot(Ir,yn[1])?(zr(Ir[0],yn[1])>zr(Ir[0],Ir[1])&&(Ir[1]=yn[1]),zr(yn[0],Ir[1])>zr(Ir[0],Ir[1])&&(Ir[0]=yn[0])):jn.push(Ir=yn);for(qn=-Infinity,or=jn.length-1,mr=0,Ir=jn[or];mr<=or;Ir=yn,++mr)yn=jn[mr],(ui=zr(Ir[1],yn[0]))>qn&&(qn=ui,De=yn[0],We=Ir[1])}return Br=tr=null,De===Infinity||ze===Infinity?[[NaN,NaN],[NaN,NaN]]:[[De,ze],[We,He]]},Bt,Ke,lt,mt,qe,yt,qt,Er,Zr,Dr,Cr,mn,xn,lr,An,On,Mt={sphere:ne,point:er,lineStart:Tr,lineEnd:wr,polygonStart:function(){Mt.lineStart=Ur,Mt.lineEnd=fn},polygonEnd:function(){Mt.lineStart=Tr,Mt.lineEnd=wr}};function er(Et,bt){Et*=b,bt*=b;var mr=P(bt);$t(mr*P(Et),mr*I(Et),I(bt))}function $t(Et,bt,mr){++Bt,lt+=(Et-lt)/Bt,mt+=(bt-mt)/Bt,qe+=(mr-qe)/Bt}function Tr(){Mt.point=Mr}function Mr(Et,bt){Et*=b,bt*=b;var mr=P(bt);lr=mr*P(Et),An=mr*I(Et),On=I(bt),Mt.point=Hr,$t(lr,An,On)}function Hr(Et,bt){Et*=b,bt*=b;var mr=P(bt),or=mr*P(Et),Ir=mr*I(Et),yn=I(bt),jn=M(N((jn=An*yn-On*Ir)*jn+(jn=On*or-lr*yn)*jn+(jn=lr*Ir-An*or)*jn),lr*or+An*Ir+On*yn);Ke+=jn,yt+=jn*(lr+(lr=or)),qt+=jn*(An+(An=Ir)),Er+=jn*(On+(On=yn)),$t(lr,An,On)}function wr(){Mt.point=er}function Ur(){Mt.point=tn}function fn(){Rr(mn,xn),Mt.point=er}function tn(Et,bt){mn=Et,xn=bt,Et*=b,bt*=b,Mt.point=Rr;var mr=P(bt);lr=mr*P(Et),An=mr*I(Et),On=I(bt),$t(lr,An,On)}function Rr(Et,bt){Et*=b,bt*=b;var mr=P(bt),or=mr*P(Et),Ir=mr*I(Et),yn=I(bt),jn=An*yn-On*Ir,qn=On*or-lr*yn,ui=lr*Ir-An*or,kn=N(jn*jn+qn*qn+ui*ui),oi=J(kn),bn=kn&&-oi/kn;Zr+=bn*jn,Dr+=bn*qn,Cr+=bn*ui,Ke+=oi,yt+=oi*(lr+(lr=or)),qt+=oi*(An+(An=Ir)),Er+=oi*(On+(On=yn)),$t(lr,An,On)}var Nn=function(bt){Bt=Ke=lt=mt=qe=yt=qt=Er=Zr=Dr=Cr=0,_e(bt,Mt);var mr=Zr,or=Dr,Ir=Cr,yn=mr*mr+or*or+Ir*Ir;return yn<r&&(mr=yt,or=qt,Ir=Er,Ke<i&&(mr=lt,or=mt,Ir=qe),yn=mr*mr+or*or+Ir*Ir,yn<r)?[NaN,NaN]:[M(or,mr)*d,J(Ir/N(yn))*d]},En=function(bt){return function(){return bt}},Yn=function(bt,mr){function or(Ir,yn){return Ir=bt(Ir,yn),mr(Ir[0],Ir[1])}return bt.invert&&mr.invert&&(or.invert=function(Ir,yn){return Ir=mr.invert(Ir,yn),Ir&&bt.invert(Ir[0],Ir[1])}),or};function wi(Et,bt){return[Et>n?Et-u:Et<-n?Et+u:Et,bt]}wi.invert=wi;function $a(Et,bt,mr){return(Et%=u)?bt||mr?Yn(Po(Et),Ro(bt,mr)):Po(Et):bt||mr?Ro(bt,mr):wi}function so(Et){return function(bt,mr){return bt+=Et,[bt>n?bt-u:bt<-n?bt+u:bt,mr]}}function Po(Et){var bt=so(Et);return bt.invert=so(-Et),bt}function Ro(Et,bt){var mr=P(Et),or=I(Et),Ir=P(bt),yn=I(bt);function jn(qn,ui){var kn=P(ui),oi=P(qn)*kn,bn=I(qn)*kn,Xe=I(ui),et=Xe*mr+oi*or;return[M(bn*Ir-et*yn,oi*mr-Xe*or),J(et*Ir+bn*yn)]}return jn.invert=function(qn,ui){var kn=P(ui),oi=P(qn)*kn,bn=I(qn)*kn,Xe=I(ui),et=Xe*Ir-bn*yn;return[M(bn*Ir+Xe*yn,oi*mr+et*or),J(et*mr-oi*or)]},jn}var So=function(bt){bt=$a(bt[0]*b,bt[1]*b,bt.length>2?bt[2]*b:0);function mr(or){return or=bt(or[0]*b,or[1]*b),or[0]*=d,or[1]*=d,or}return mr.invert=function(or){return or=bt.invert(or[0]*b,or[1]*b),or[0]*=d,or[1]*=d,or},mr};function Va(Et,bt,mr,or,Ir,yn){if(!!mr){var jn=P(bt),qn=I(bt),ui=or*mr;Ir==null?(Ir=bt+or*u,yn=bt-ui/2):(Ir=ws(jn,Ir),yn=ws(jn,yn),(or>0?Ir<yn:Ir>yn)&&(Ir+=or*u));for(var kn,oi=Ir;or>0?oi>yn:oi<yn;oi-=ui)kn=ae([jn,-qn*P(oi),-qn*I(oi)]),Et.point(kn[0],kn[1])}}function ws(Et,bt){bt=V(bt),bt[0]-=Et,Me(bt);var mr=H(-bt[1]);return((-bt[2]<0?-mr:mr)+u-i)%u}var ps=function(){var bt=En([0,0]),mr=En(90),or=En(6),Ir,yn,jn={point:qn};function qn(kn,oi){Ir.push(kn=yn(kn,oi)),kn[0]*=d,kn[1]*=d}function ui(){var kn=bt.apply(this,arguments),oi=mr.apply(this,arguments)*b,bn=or.apply(this,arguments)*b;return Ir=[],yn=$a(-kn[0]*b,-kn[1]*b,0).invert,Va(jn,oi,bn,1),kn={type:"Polygon",coordinates:[Ir]},Ir=yn=null,kn}return ui.center=function(kn){return arguments.length?(bt=typeof kn=="function"?kn:En([+kn[0],+kn[1]]),ui):bt},ui.radius=function(kn){return arguments.length?(mr=typeof kn=="function"?kn:En(+kn),ui):mr},ui.precision=function(kn){return arguments.length?(or=typeof kn=="function"?kn:En(+kn),ui):or},ui},Ao=function(){var bt=[],mr;return{point:function(Ir,yn){mr.push([Ir,yn])},lineStart:function(){bt.push(mr=[])},lineEnd:ne,rejoin:function(){bt.length>1&&bt.push(bt.pop().concat(bt.shift()))},result:function(){var Ir=bt;return bt=[],mr=null,Ir}}},zs=function(bt,mr,or,Ir,yn,jn){var qn=bt[0],ui=bt[1],kn=mr[0],oi=mr[1],bn=0,Xe=1,et=kn-qn,Ct=oi-ui,At;if(At=or-qn,!(!et&&At>0)){if(At/=et,et<0){if(At<bn)return;At<Xe&&(Xe=At)}else if(et>0){if(At>Xe)return;At>bn&&(bn=At)}if(At=yn-qn,!(!et&&At<0)){if(At/=et,et<0){if(At>Xe)return;At>bn&&(bn=At)}else if(et>0){if(At<bn)return;At<Xe&&(Xe=At)}if(At=Ir-ui,!(!Ct&&At>0)){if(At/=Ct,Ct<0){if(At<bn)return;At<Xe&&(Xe=At)}else if(Ct>0){if(At>Xe)return;At>bn&&(bn=At)}if(At=jn-ui,!(!Ct&&At<0)){if(At/=Ct,Ct<0){if(At>Xe)return;At>bn&&(bn=At)}else if(Ct>0){if(At<bn)return;At<Xe&&(Xe=At)}return bn>0&&(bt[0]=qn+bn*et,bt[1]=ui+bn*Ct),Xe<1&&(mr[0]=qn+Xe*et,mr[1]=ui+Xe*Ct),!0}}}}},Qa=function(bt,mr){return _(bt[0]-mr[0])<i&&_(bt[1]-mr[1])<i};function fs(Et,bt,mr,or){this.x=Et,this.z=bt,this.o=mr,this.e=or,this.v=!1,this.n=this.p=null}var Vs=function(bt,mr,or,Ir,yn){var jn=[],qn=[],ui,kn;if(bt.forEach(function(At){if(!((Le=At.length-1)<=0)){var Le,Ne=At[0],nt=At[Le],tt;if(Qa(Ne,nt)){for(yn.lineStart(),ui=0;ui<Le;++ui)yn.point((Ne=At[ui])[0],Ne[1]);yn.lineEnd();return}jn.push(tt=new fs(Ne,At,null,!0)),qn.push(tt.o=new fs(Ne,null,tt,!1)),jn.push(tt=new fs(nt,At,null,!1)),qn.push(tt.o=new fs(nt,null,tt,!0))}}),!!jn.length){for(qn.sort(mr),Ju(jn),Ju(qn),ui=0,kn=qn.length;ui<kn;++ui)qn[ui].e=or=!or;for(var oi=jn[0],bn,Xe;;){for(var et=oi,Ct=!0;et.v;)if((et=et.n)===oi)return;bn=et.z,yn.lineStart();do{if(et.v=et.o.v=!0,et.e){if(Ct)for(ui=0,kn=bn.length;ui<kn;++ui)yn.point((Xe=bn[ui])[0],Xe[1]);else Ir(et.x,et.n.x,1,yn);et=et.n}else{if(Ct)for(bn=et.p.z,ui=bn.length-1;ui>=0;--ui)yn.point((Xe=bn[ui])[0],Xe[1]);else Ir(et.x,et.p.x,-1,yn);et=et.p}et=et.o,bn=et.z,Ct=!Ct}while(!et.v);yn.lineEnd()}}};function Ju(Et){if(!!(bt=Et.length)){for(var bt,mr=0,or=Et[0],Ir;++mr<bt;)or.n=Ir=Et[mr],Ir.p=or,or=Ir;or.n=Ir=Et[0],Ir.p=or}}var ts=1e9,Zs=-ts;function ys(Et,bt,mr,or){function Ir(kn,oi){return Et<=kn&&kn<=mr&&bt<=oi&&oi<=or}function yn(kn,oi,bn,Xe){var et=0,Ct=0;if(kn==null||(et=jn(kn,bn))!==(Ct=jn(oi,bn))||ui(kn,oi)<0^bn>0)do Xe.point(et===0||et===3?Et:mr,et>1?or:bt);while((et=(et+bn+4)%4)!==Ct);else Xe.point(oi[0],oi[1])}function jn(kn,oi){return _(kn[0]-Et)<i?oi>0?0:3:_(kn[0]-mr)<i?oi>0?2:1:_(kn[1]-bt)<i?oi>0?1:0:oi>0?3:2}function qn(kn,oi){return ui(kn.x,oi.x)}function ui(kn,oi){var bn=jn(kn,1),Xe=jn(oi,1);return bn!==Xe?bn-Xe:bn===0?oi[1]-kn[1]:bn===1?kn[0]-oi[0]:bn===2?kn[1]-oi[1]:oi[0]-kn[0]}return function(kn){var oi=kn,bn=Ao(),Xe,et,Ct,At,Le,Ne,nt,tt,dt,Dt,Zt,cr={point:Jt,lineStart:Kr,lineEnd:an,polygonStart:yr,polygonEnd:rn};function Jt(_n,Pn){Ir(_n,Pn)&&oi.point(_n,Pn)}function xr(){for(var _n=0,Pn=0,ri=et.length;Pn<ri;++Pn)for(var Ei=et[Pn],zn=1,gi=Ei.length,Ti=Ei[0],la,Vi,Ha=Ti[0],Na=Ti[1];zn<gi;++zn)la=Ha,Vi=Na,Ti=Ei[zn],Ha=Ti[0],Na=Ti[1],Vi<=or?Na>or&&(Ha-la)*(or-Vi)>(Na-Vi)*(Et-la)&&++_n:Na<=or&&(Ha-la)*(or-Vi)<(Na-Vi)*(Et-la)&&--_n;return _n}function yr(){oi=bn,Xe=[],et=[],Zt=!0}function rn(){var _n=xr(),Pn=Zt&&_n,ri=(Xe=g.merge(Xe)).length;(Pn||ri)&&(kn.polygonStart(),Pn&&(kn.lineStart(),yn(null,null,1,kn),kn.lineEnd()),ri&&Vs(Xe,qn,_n,yn,kn),kn.polygonEnd()),oi=kn,Xe=et=Ct=null}function Kr(){cr.point=Qr,et&&et.push(Ct=[]),Dt=!0,dt=!1,nt=tt=NaN}function an(){Xe&&(Qr(At,Le),Ne&&dt&&bn.rejoin(),Xe.push(bn.result())),cr.point=Jt,dt&&oi.lineEnd()}function Qr(_n,Pn){var ri=Ir(_n,Pn);if(et&&Ct.push([_n,Pn]),Dt)At=_n,Le=Pn,Ne=ri,Dt=!1,ri&&(oi.lineStart(),oi.point(_n,Pn));else if(ri&&dt)oi.point(_n,Pn);else{var Ei=[nt=Math.max(Zs,Math.min(ts,nt)),tt=Math.max(Zs,Math.min(ts,tt))],zn=[_n=Math.max(Zs,Math.min(ts,_n)),Pn=Math.max(Zs,Math.min(ts,Pn))];zs(Ei,zn,Et,bt,mr,or)?(dt||(oi.lineStart(),oi.point(Ei[0],Ei[1])),oi.point(zn[0],zn[1]),ri||oi.lineEnd(),Zt=!1):ri&&(oi.lineStart(),oi.point(_n,Pn),Zt=!1)}nt=_n,tt=Pn,dt=ri}return cr}}var Lt=function(){var bt=0,mr=0,or=960,Ir=500,yn,jn,qn;return qn={stream:function(kn){return yn&&jn===kn?yn:yn=ys(bt,mr,or,Ir)(jn=kn)},extent:function(kn){return arguments.length?(bt=+kn[0][0],mr=+kn[0][1],or=+kn[1][0],Ir=+kn[1][1],yn=jn=null,qn):[[bt,mr],[or,Ir]]}}},at=v(),Ye=function(bt,mr){var or=mr[0],Ir=mr[1],yn=[I(or),-P(or),0],jn=0,qn=0;at.reset();for(var ui=0,kn=bt.length;ui<kn;++ui)if(!!(bn=(oi=bt[ui]).length))for(var oi,bn,Xe=oi[bn-1],et=Xe[0],Ct=Xe[1]/2+f,At=I(Ct),Le=P(Ct),Ne=0;Ne<bn;++Ne,et=tt,At=Dt,Le=Zt,Xe=nt){var nt=oi[Ne],tt=nt[0],dt=nt[1]/2+f,Dt=I(dt),Zt=P(dt),cr=tt-et,Jt=cr>=0?1:-1,xr=Jt*cr,yr=xr>n,rn=At*Dt;if(at.add(M(rn*Jt*I(xr),Le*Zt+rn*P(xr))),jn+=yr?cr+Jt*u:cr,yr^et>=or^tt>=or){var Kr=te(V(Xe),V(nt));Me(Kr);var an=te(yn,Kr);Me(an);var Qr=(yr^cr>=0?-1:1)*J(an[2]);(Ir>Qr||Ir===Qr&&(Kr[0]||Kr[1]))&&(qn+=yr^cr>=0?1:-1)}}return(jn<-i||jn<i&&at<-i)^qn&1},St=v(),fr,Gr,hn,un={sphere:ne,point:ne,lineStart:Qn,lineEnd:ne,polygonStart:ne,polygonEnd:ne};function Qn(){un.point=bi,un.lineEnd=Ai}function Ai(){un.point=un.lineEnd=ne}function bi(Et,bt){Et*=b,bt*=b,fr=Et,Gr=I(bt),hn=P(bt),un.point=na}function na(Et,bt){Et*=b,bt*=b;var mr=I(bt),or=P(bt),Ir=_(Et-fr),yn=P(Ir),jn=I(Ir),qn=or*jn,ui=hn*mr-Gr*or*yn,kn=Gr*mr+hn*or*yn;St.add(M(N(qn*qn+ui*ui),kn)),fr=Et,Gr=mr,hn=or}var Oa=function(bt){return St.reset(),_e(bt,un),+St},fo=[null,null],uo={type:"LineString",coordinates:fo},Uo=function(bt,mr){return fo[0]=bt,fo[1]=mr,Oa(uo)},lo={Feature:function(bt,mr){return Ho(bt.geometry,mr)},FeatureCollection:function(bt,mr){for(var or=bt.features,Ir=-1,yn=or.length;++Ir<yn;)if(Ho(or[Ir].geometry,mr))return!0;return!1}},go={Sphere:function(){return!0},Point:function(bt,mr){return Qo(bt.coordinates,mr)},MultiPoint:function(bt,mr){for(var or=bt.coordinates,Ir=-1,yn=or.length;++Ir<yn;)if(Qo(or[Ir],mr))return!0;return!1},LineString:function(bt,mr){return Go(bt.coordinates,mr)},MultiLineString:function(bt,mr){for(var or=bt.coordinates,Ir=-1,yn=or.length;++Ir<yn;)if(Go(or[Ir],mr))return!0;return!1},Polygon:function(bt,mr){return _s(bt.coordinates,mr)},MultiPolygon:function(bt,mr){for(var or=bt.coordinates,Ir=-1,yn=or.length;++Ir<yn;)if(_s(or[Ir],mr))return!0;return!1},GeometryCollection:function(bt,mr){for(var or=bt.geometries,Ir=-1,yn=or.length;++Ir<yn;)if(Ho(or[Ir],mr))return!0;return!1}};function Ho(Et,bt){return Et&&go.hasOwnProperty(Et.type)?go[Et.type](Et,bt):!1}function Qo(Et,bt){return Uo(Et,bt)===0}function Go(Et,bt){var mr=Uo(Et[0],Et[1]),or=Uo(Et[0],bt),Ir=Uo(bt,Et[1]);return or+Ir<=mr+i}function _s(Et,bt){return!!Ye(Et.map(bs),Ks(bt))}function bs(Et){return Et=Et.map(Ks),Et.pop(),Et}function Ks(Et){return[Et[0]*b,Et[1]*b]}var Yo=function(bt,mr){return(bt&&lo.hasOwnProperty(bt.type)?lo[bt.type]:Ho)(bt,mr)};function mo(Et,bt,mr){var or=g.range(Et,bt-i,mr).concat(bt);return function(Ir){return or.map(function(yn){return[Ir,yn]})}}function Rs(Et,bt,mr){var or=g.range(Et,bt-i,mr).concat(bt);return function(Ir){return or.map(function(yn){return[yn,Ir]})}}function rs(){var Et,bt,mr,or,Ir,yn,jn,qn,ui=10,kn=ui,oi=90,bn=360,Xe,et,Ct,At,Le=2.5;function Ne(){return{type:"MultiLineString",coordinates:nt()}}function nt(){return g.range(C(or/oi)*oi,mr,oi).map(Ct).concat(g.range(C(qn/bn)*bn,jn,bn).map(At)).concat(g.range(C(bt/ui)*ui,Et,ui).filter(function(tt){return _(tt%oi)>i}).map(Xe)).concat(g.range(C(yn/kn)*kn,Ir,kn).filter(function(tt){return _(tt%bn)>i}).map(et))}return Ne.lines=function(){return nt().map(function(tt){return{type:"LineString",coordinates:tt}})},Ne.outline=function(){return{type:"Polygon",coordinates:[Ct(or).concat(At(jn).slice(1),Ct(mr).reverse().slice(1),At(qn).reverse().slice(1))]}},Ne.extent=function(tt){return arguments.length?Ne.extentMajor(tt).extentMinor(tt):Ne.extentMinor()},Ne.extentMajor=function(tt){return arguments.length?(or=+tt[0][0],mr=+tt[1][0],qn=+tt[0][1],jn=+tt[1][1],or>mr&&(tt=or,or=mr,mr=tt),qn>jn&&(tt=qn,qn=jn,jn=tt),Ne.precision(Le)):[[or,qn],[mr,jn]]},Ne.extentMinor=function(tt){return arguments.length?(bt=+tt[0][0],Et=+tt[1][0],yn=+tt[0][1],Ir=+tt[1][1],bt>Et&&(tt=bt,bt=Et,Et=tt),yn>Ir&&(tt=yn,yn=Ir,Ir=tt),Ne.precision(Le)):[[bt,yn],[Et,Ir]]},Ne.step=function(tt){return arguments.length?Ne.stepMajor(tt).stepMinor(tt):Ne.stepMinor()},Ne.stepMajor=function(tt){return arguments.length?(oi=+tt[0],bn=+tt[1],Ne):[oi,bn]},Ne.stepMinor=function(tt){return arguments.length?(ui=+tt[0],kn=+tt[1],Ne):[ui,kn]},Ne.precision=function(tt){return arguments.length?(Le=+tt,Xe=mo(yn,Ir,90),et=Rs(bt,Et,Le),Ct=mo(qn,jn,90),At=Rs(or,mr,Le),Ne):Le},Ne.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Za(){return rs()()}var qa=function(bt,mr){var or=bt[0]*b,Ir=bt[1]*b,yn=mr[0]*b,jn=mr[1]*b,qn=P(Ir),ui=I(Ir),kn=P(jn),oi=I(jn),bn=qn*P(or),Xe=qn*I(or),et=kn*P(yn),Ct=kn*I(yn),At=2*J(N(Q(jn-Ir)+qn*kn*Q(yn-or))),Le=I(At),Ne=At?function(nt){var tt=I(nt*=At)/Le,dt=I(At-nt)/Le,Dt=dt*bn+tt*et,Zt=dt*Xe+tt*Ct,cr=dt*ui+tt*oi;return[M(Zt,Dt)*d,M(cr,N(Dt*Dt+Zt*Zt))*d]}:function(){return[or*d,Ir*d]};return Ne.distance=At,Ne},Fs=function(bt){return bt},Ou=v(),Ws=v(),nl,Bu,su,zu,uu={point:ne,lineStart:ne,lineEnd:ne,polygonStart:function(){uu.lineStart=hu,uu.lineEnd=du},polygonEnd:function(){uu.lineStart=uu.lineEnd=uu.point=ne,Ou.add(_(Ws)),Ws.reset()},result:function(){var bt=Ou/2;return Ou.reset(),bt}};function hu(){uu.point=Qu}function Qu(Et,bt){uu.point=qo,nl=su=Et,Bu=zu=bt}function qo(Et,bt){Ws.add(zu*Et-su*bt),su=Et,zu=bt}function du(){qo(nl,Bu)}var ns=Infinity,ru=ns,_u=-ns,Hs=_u,Ns={point:Js,lineStart:ne,lineEnd:ne,polygonStart:ne,polygonEnd:ne,result:function(){var bt=[[ns,ru],[_u,Hs]];return _u=Hs=-(ru=ns=Infinity),bt}};function Js(Et,bt){Et<ns&&(ns=Et),Et>_u&&(_u=Et),bt<ru&&(ru=bt),bt>Hs&&(Hs=bt)}var Fu=0,vu=0,Vu=0,Nu=0,To=0,Wu=0,Hu=0,Ru=0,$o=0,dl,Gu,os,Us,hs={point:xs,lineStart:il,lineEnd:lu,polygonStart:function(){hs.lineStart=bu,hs.lineEnd=nu},polygonEnd:function(){hs.point=xs,hs.lineStart=il,hs.lineEnd=lu},result:function(){var bt=$o?[Hu/$o,Ru/$o]:Wu?[Nu/Wu,To/Wu]:Vu?[Fu/Vu,vu/Vu]:[NaN,NaN];return Fu=vu=Vu=Nu=To=Wu=Hu=Ru=$o=0,bt}};function xs(Et,bt){Fu+=Et,vu+=bt,++Vu}function il(){hs.point=Tu}function Tu(Et,bt){hs.point=Is,xs(os=Et,Us=bt)}function Is(Et,bt){var mr=Et-os,or=bt-Us,Ir=N(mr*mr+or*or);Nu+=Ir*(os+Et)/2,To+=Ir*(Us+bt)/2,Wu+=Ir,xs(os=Et,Us=bt)}function lu(){hs.point=xs}function bu(){hs.point=Be}function nu(){Fr(dl,Gu)}function Be(Et,bt){hs.point=Fr,xs(dl=os=Et,Gu=Us=bt)}function Fr(Et,bt){var mr=Et-os,or=bt-Us,Ir=N(mr*mr+or*or);Nu+=Ir*(os+Et)/2,To+=Ir*(Us+bt)/2,Wu+=Ir,Ir=Us*Et-os*bt,Hu+=Ir*(os+Et),Ru+=Ir*(Us+bt),$o+=Ir*3,xs(os=Et,Us=bt)}function jt(Et){this._context=Et}jt.prototype={_radius:4.5,pointRadius:function(bt){return this._radius=bt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(bt,mr){switch(this._point){case 0:{this._context.moveTo(bt,mr),this._point=1;break}case 1:{this._context.lineTo(bt,mr);break}default:{this._context.moveTo(bt+this._radius,mr),this._context.arc(bt,mr,this._radius,0,u);break}}},result:ne};var Vt=v(),gt,ar,gr,en,Vr,on={point:ne,lineStart:function(){on.point=Dn},lineEnd:function(){gt&&di(ar,gr),on.point=ne},polygonStart:function(){gt=!0},polygonEnd:function(){gt=null},result:function(){var bt=+Vt;return Vt.reset(),bt}};function Dn(Et,bt){on.point=di,ar=en=Et,gr=Vr=bt}function di(Et,bt){en-=Et,Vr-=bt,Vt.add(N(en*en+Vr*Vr)),en=Et,Vr=bt}function xi(){this._string=[]}xi.prototype={_radius:4.5,_circle:ji(4.5),pointRadius:function(bt){return(bt=+bt)!==this._radius&&(this._radius=bt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(bt,mr){switch(this._point){case 0:{this._string.push("M",bt,",",mr),this._point=1;break}case 1:{this._string.push("L",bt,",",mr);break}default:{this._circle==null&&(this._circle=ji(this._radius)),this._string.push("M",bt,",",mr,this._circle);break}}},result:function(){if(this._string.length){var bt=this._string.join("");return this._string=[],bt}else return null}};function ji(Et){return"m0,"+Et+"a"+Et+","+Et+" 0 1,1 0,"+-2*Et+"a"+Et+","+Et+" 0 1,1 0,"+2*Et+"z"}var ia=function(bt,mr){var or=4.5,Ir,yn;function jn(qn){return qn&&(typeof or=="function"&&yn.pointRadius(+or.apply(this,arguments)),_e(qn,Ir(yn))),yn.result()}return jn.area=function(qn){return _e(qn,Ir(uu)),uu.result()},jn.measure=function(qn){return _e(qn,Ir(on)),on.result()},jn.bounds=function(qn){return _e(qn,Ir(Ns)),Ns.result()},jn.centroid=function(qn){return _e(qn,Ir(hs)),hs.result()},jn.projection=function(qn){return arguments.length?(Ir=qn==null?(bt=null,Fs):(bt=qn).stream,jn):bt},jn.context=function(qn){return arguments.length?(yn=qn==null?(mr=null,new xi):new jt(mr=qn),typeof or!="function"&&yn.pointRadius(or),jn):mr},jn.pointRadius=function(qn){return arguments.length?(or=typeof qn=="function"?qn:(yn.pointRadius(+qn),+qn),jn):or},jn.projection(bt).context(mr)},ca=function(bt,mr,or,Ir){return function(yn,jn){var qn=mr(jn),ui=yn.invert(Ir[0],Ir[1]),kn=Ao(),oi=mr(kn),bn=!1,Xe,et,Ct,At={point:Le,lineStart:nt,lineEnd:tt,polygonStart:function(){At.point=dt,At.lineStart=Dt,At.lineEnd=Zt,et=[],Xe=[]},polygonEnd:function(){At.point=Le,At.lineStart=nt,At.lineEnd=tt,et=g.merge(et);var Jt=Ye(Xe,ui);et.length?(bn||(jn.polygonStart(),bn=!0),Vs(et,ma,Jt,or,jn)):Jt&&(bn||(jn.polygonStart(),bn=!0),jn.lineStart(),or(null,null,1,jn),jn.lineEnd()),bn&&(jn.polygonEnd(),bn=!1),et=Xe=null},sphere:function(){jn.polygonStart(),jn.lineStart(),or(null,null,1,jn),jn.lineEnd(),jn.polygonEnd()}};function Le(cr,Jt){var xr=yn(cr,Jt);bt(cr=xr[0],Jt=xr[1])&&jn.point(cr,Jt)}function Ne(cr,Jt){var xr=yn(cr,Jt);qn.point(xr[0],xr[1])}function nt(){At.point=Ne,qn.lineStart()}function tt(){At.point=Le,qn.lineEnd()}function dt(cr,Jt){Ct.push([cr,Jt]);var xr=yn(cr,Jt);oi.point(xr[0],xr[1])}function Dt(){oi.lineStart(),Ct=[]}function Zt(){dt(Ct[0][0],Ct[0][1]),oi.lineEnd();var cr=oi.clean(),Jt=kn.result(),xr,yr=Jt.length,rn,Kr,an;if(Ct.pop(),Xe.push(Ct),Ct=null,!!yr){if(cr&1){if(Kr=Jt[0],(rn=Kr.length-1)>0){for(bn||(jn.polygonStart(),bn=!0),jn.lineStart(),xr=0;xr<rn;++xr)jn.point((an=Kr[xr])[0],an[1]);jn.lineEnd()}return}yr>1&&cr&2&&Jt.push(Jt.pop().concat(Jt.shift())),et.push(Jt.filter(ea))}}return At}};function ea(Et){return Et.length>1}function ma(Et,bt){return((Et=Et.x)[0]<0?Et[1]-s-i:s-Et[1])-((bt=bt.x)[0]<0?bt[1]-s-i:s-bt[1])}var Ia=ca(function(){return!0},Fa,ho,[-n,-s]);function Fa(Et){var bt=NaN,mr=NaN,or=NaN,Ir;return{lineStart:function(){Et.lineStart(),Ir=1},point:function(jn,qn){var ui=jn>0?n:-n,kn=_(jn-bt);_(kn-n)<i?(Et.point(bt,mr=(mr+qn)/2>0?s:-s),Et.point(or,mr),Et.lineEnd(),Et.lineStart(),Et.point(ui,mr),Et.point(jn,mr),Ir=0):or!==ui&&kn>=n&&(_(bt-or)<i&&(bt-=or*i),_(jn-ui)<i&&(jn-=ui*i),mr=Io(bt,mr,jn,qn),Et.point(or,mr),Et.lineEnd(),Et.lineStart(),Et.point(ui,mr),Ir=0),Et.point(bt=jn,mr=qn),or=ui},lineEnd:function(){Et.lineEnd(),bt=mr=NaN},clean:function(){return 2-Ir}}}function Io(Et,bt,mr,or){var Ir,yn,jn=I(Et-mr);return _(jn)>i?x((I(bt)*(yn=P(or))*I(mr)-I(or)*(Ir=P(bt))*I(Et))/(Ir*yn*jn)):(bt+or)/2}function ho(Et,bt,mr,or){var Ir;if(Et==null)Ir=mr*s,or.point(-n,Ir),or.point(0,Ir),or.point(n,Ir),or.point(n,0),or.point(n,-Ir),or.point(0,-Ir),or.point(-n,-Ir),or.point(-n,0),or.point(-n,Ir);else if(_(Et[0]-bt[0])>i){var yn=Et[0]<bt[0]?n:-n;Ir=mr*yn/2,or.point(-yn,Ir),or.point(0,Ir),or.point(yn,Ir)}else or.point(bt[0],bt[1])}var Ba=function(bt,mr){var or=P(bt),Ir=or>0,yn=_(or)>i;function jn(bn,Xe,et,Ct){Va(Ct,bt,mr,et,bn,Xe)}function qn(bn,Xe){return P(bn)*P(Xe)>or}function ui(bn){var Xe,et,Ct,At,Le;return{lineStart:function(){At=Ct=!1,Le=1},point:function(nt,tt){var dt=[nt,tt],Dt,Zt=qn(nt,tt),cr=Ir?Zt?0:oi(nt,tt):Zt?oi(nt+(nt<0?n:-n),tt):0;if(!Xe&&(At=Ct=Zt)&&bn.lineStart(),Zt!==Ct&&(Dt=kn(Xe,dt),(!Dt||Qa(Xe,Dt)||Qa(dt,Dt))&&(dt[0]+=i,dt[1]+=i,Zt=qn(dt[0],dt[1]))),Zt!==Ct)Le=0,Zt?(bn.lineStart(),Dt=kn(dt,Xe),bn.point(Dt[0],Dt[1])):(Dt=kn(Xe,dt),bn.point(Dt[0],Dt[1]),bn.lineEnd()),Xe=Dt;else if(yn&&Xe&&Ir^Zt){var Jt;!(cr&et)&&(Jt=kn(dt,Xe,!0))&&(Le=0,Ir?(bn.lineStart(),bn.point(Jt[0][0],Jt[0][1]),bn.point(Jt[1][0],Jt[1][1]),bn.lineEnd()):(bn.point(Jt[1][0],Jt[1][1]),bn.lineEnd(),bn.lineStart(),bn.point(Jt[0][0],Jt[0][1])))}Zt&&(!Xe||!Qa(Xe,dt))&&bn.point(dt[0],dt[1]),Xe=dt,Ct=Zt,et=cr},lineEnd:function(){Ct&&bn.lineEnd(),Xe=null},clean:function(){return Le|(At&&Ct)<<1}}}function kn(bn,Xe,et){var Ct=V(bn),At=V(Xe),Le=[1,0,0],Ne=te(Ct,At),nt=re(Ne,Ne),tt=Ne[0],dt=nt-tt*tt;if(!dt)return!et&&bn;var Dt=or*nt/dt,Zt=-or*tt/dt,cr=te(Le,Ne),Jt=ve(Le,Dt),xr=ve(Ne,Zt);q(Jt,xr);var yr=cr,rn=re(Jt,yr),Kr=re(yr,yr),an=rn*rn-Kr*(re(Jt,Jt)-1);if(!(an<0)){var Qr=N(an),_n=ve(yr,(-rn-Qr)/Kr);if(q(_n,Jt),_n=ae(_n),!et)return _n;var Pn=bn[0],ri=Xe[0],Ei=bn[1],zn=Xe[1],gi;ri<Pn&&(gi=Pn,Pn=ri,ri=gi);var Ti=ri-Pn,la=_(Ti-n)<i,Vi=la||Ti<i;if(!la&&zn<Ei&&(gi=Ei,Ei=zn,zn=gi),Vi?la?Ei+zn>0^_n[1]<(_(_n[0]-Pn)<i?Ei:zn):Ei<=_n[1]&&_n[1]<=zn:Ti>n^(Pn<=_n[0]&&_n[0]<=ri)){var Ha=ve(yr,(-rn+Qr)/Kr);return q(Ha,Jt),[_n,ae(Ha)]}}}function oi(bn,Xe){var et=Ir?bt:n-bt,Ct=0;return bn<-et?Ct|=1:bn>et&&(Ct|=2),Xe<-et?Ct|=4:Xe>et&&(Ct|=8),Ct}return ca(qn,ui,jn,Ir?[0,-bt]:[-n,bt-n])},Mo=function(bt){return{stream:_o(bt)}};function _o(Et){return function(bt){var mr=new Da;for(var or in Et)mr[or]=Et[or];return mr.stream=bt,mr}}function Da(){}Da.prototype={constructor:Da,point:function(bt,mr){this.stream.point(bt,mr)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ss(Et,bt,mr){var or=bt[1][0]-bt[0][0],Ir=bt[1][1]-bt[0][1],yn=Et.clipExtent&&Et.clipExtent();Et.scale(150).translate([0,0]),yn!=null&&Et.clipExtent(null),_e(mr,Et.stream(Ns));var jn=Ns.result(),qn=Math.min(or/(jn[1][0]-jn[0][0]),Ir/(jn[1][1]-jn[0][1])),ui=+bt[0][0]+(or-qn*(jn[1][0]+jn[0][0]))/2,kn=+bt[0][1]+(Ir-qn*(jn[1][1]+jn[0][1]))/2;return yn!=null&&Et.clipExtent(yn),Et.scale(qn*150).translate([ui,kn])}function ko(Et,bt,mr){return ss(Et,[[0,0],bt],mr)}var bo=16,Zo=P(30*b),As=function(bt,mr){return+mr?Mu(bt,mr):us(bt)};function us(Et){return _o({point:function(mr,or){mr=Et(mr,or),this.stream.point(mr[0],mr[1])}})}function Mu(Et,bt){function mr(or,Ir,yn,jn,qn,ui,kn,oi,bn,Xe,et,Ct,At,Le){var Ne=kn-or,nt=oi-Ir,tt=Ne*Ne+nt*nt;if(tt>4*bt&&At--){var dt=jn+Xe,Dt=qn+et,Zt=ui+Ct,cr=N(dt*dt+Dt*Dt+Zt*Zt),Jt=J(Zt/=cr),xr=_(_(Zt)-1)<i||_(yn-bn)<i?(yn+bn)/2:M(Dt,dt),yr=Et(xr,Jt),rn=yr[0],Kr=yr[1],an=rn-or,Qr=Kr-Ir,_n=nt*an-Ne*Qr;(_n*_n/tt>bt||_((Ne*an+nt*Qr)/tt-.5)>.3||jn*Xe+qn*et+ui*Ct<Zo)&&(mr(or,Ir,yn,jn,qn,ui,rn,Kr,xr,dt/=cr,Dt/=cr,Zt,At,Le),Le.point(rn,Kr),mr(rn,Kr,xr,dt,Dt,Zt,kn,oi,bn,Xe,et,Ct,At,Le))}}return function(or){var Ir,yn,jn,qn,ui,kn,oi,bn,Xe,et,Ct,At,Le={point:Ne,lineStart:nt,lineEnd:dt,polygonStart:function(){or.polygonStart(),Le.lineStart=Dt},polygonEnd:function(){or.polygonEnd(),Le.lineStart=nt}};function Ne(Jt,xr){Jt=Et(Jt,xr),or.point(Jt[0],Jt[1])}function nt(){bn=NaN,Le.point=tt,or.lineStart()}function tt(Jt,xr){var yr=V([Jt,xr]),rn=Et(Jt,xr);mr(bn,Xe,oi,et,Ct,At,bn=rn[0],Xe=rn[1],oi=Jt,et=yr[0],Ct=yr[1],At=yr[2],bo,or),or.point(bn,Xe)}function dt(){Le.point=Ne,or.lineEnd()}function Dt(){nt(),Le.point=Zt,Le.lineEnd=cr}function Zt(Jt,xr){tt(Ir=Jt,xr),yn=bn,jn=Xe,qn=et,ui=Ct,kn=At,Le.point=tt}function cr(){mr(bn,Xe,oi,et,Ct,At,yn,jn,Ir,qn,ui,kn,bo,or),Le.lineEnd=dt,dt()}return Le}}var Qs=_o({point:function(bt,mr){this.stream.point(bt*b,mr*b)}});function Ls(Et){return Es(function(){return Et})()}function Es(Et){var bt,mr=150,or=480,Ir=250,yn,jn,qn=0,ui=0,kn=0,oi=0,bn=0,Xe,et,Ct=null,At=Ia,Le=null,Ne,nt,tt,dt=Fs,Dt=.5,Zt=As(rn,Dt),cr,Jt;function xr(Qr){return Qr=et(Qr[0]*b,Qr[1]*b),[Qr[0]*mr+yn,jn-Qr[1]*mr]}function yr(Qr){return Qr=et.invert((Qr[0]-yn)/mr,(jn-Qr[1])/mr),Qr&&[Qr[0]*d,Qr[1]*d]}function rn(Qr,_n){return Qr=bt(Qr,_n),[Qr[0]*mr+yn,jn-Qr[1]*mr]}xr.stream=function(Qr){return cr&&Jt===Qr?cr:cr=Qs(At(Xe,Zt(dt(Jt=Qr))))},xr.clipAngle=function(Qr){return arguments.length?(At=+Qr?Ba(Ct=Qr*b,6*b):(Ct=null,Ia),an()):Ct*d},xr.clipExtent=function(Qr){return arguments.length?(dt=Qr==null?(Le=Ne=nt=tt=null,Fs):ys(Le=+Qr[0][0],Ne=+Qr[0][1],nt=+Qr[1][0],tt=+Qr[1][1]),an()):Le==null?null:[[Le,Ne],[nt,tt]]},xr.scale=function(Qr){return arguments.length?(mr=+Qr,Kr()):mr},xr.translate=function(Qr){return arguments.length?(or=+Qr[0],Ir=+Qr[1],Kr()):[or,Ir]},xr.center=function(Qr){return arguments.length?(qn=Qr[0]%360*b,ui=Qr[1]%360*b,Kr()):[qn*d,ui*d]},xr.rotate=function(Qr){return arguments.length?(kn=Qr[0]%360*b,oi=Qr[1]%360*b,bn=Qr.length>2?Qr[2]%360*b:0,Kr()):[kn*d,oi*d,bn*d]},xr.precision=function(Qr){return arguments.length?(Zt=As(rn,Dt=Qr*Qr),an()):N(Dt)},xr.fitExtent=function(Qr,_n){return ss(xr,Qr,_n)},xr.fitSize=function(Qr,_n){return ko(xr,Qr,_n)};function Kr(){et=Yn(Xe=$a(kn,oi,bn),bt);var Qr=bt(qn,ui);return yn=or-Qr[0]*mr,jn=Ir+Qr[1]*mr,an()}function an(){return cr=Jt=null,xr}return function(){return bt=Et.apply(this,arguments),xr.invert=bt.invert&&yr,Kr()}}function al(Et){var bt=0,mr=n/3,or=Es(Et),Ir=or(bt,mr);return Ir.parallels=function(yn){return arguments.length?or(bt=yn[0]*b,mr=yn[1]*b):[bt*d,mr*d]},Ir}function cu(Et){var bt=P(Et);function mr(or,Ir){return[or*bt,I(Ir)/bt]}return mr.invert=function(or,Ir){return[or/bt,J(Ir*bt)]},mr}function zo(Et,bt){var mr=I(Et),or=(mr+I(bt))/2;if(_(or)<i)return cu(Et);var Ir=1+mr*(2*or-mr),yn=N(Ir)/or;function jn(qn,ui){var kn=N(Ir-2*or*I(ui))/or;return[kn*I(qn*=or),yn-kn*P(qn)]}return jn.invert=function(qn,ui){var kn=yn-ui;return[M(qn,_(kn))/or*j(kn),J((Ir-(qn*qn+kn*kn)*or*or)/(2*or))]},jn}var qu=function(){return al(zo).scale(155.424).center([0,33.6442])},ol=function(){return qu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function xu(Et){var bt=Et.length;return{point:function(or,Ir){for(var yn=-1;++yn<bt;)Et[yn].point(or,Ir)},sphere:function(){for(var or=-1;++or<bt;)Et[or].sphere()},lineStart:function(){for(var or=-1;++or<bt;)Et[or].lineStart()},lineEnd:function(){for(var or=-1;++or<bt;)Et[or].lineEnd()},polygonStart:function(){for(var or=-1;++or<bt;)Et[or].polygonStart()},polygonEnd:function(){for(var or=-1;++or<bt;)Et[or].polygonEnd()}}}var xo=function(){var bt,mr,or=ol(),Ir,yn=qu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),jn,qn=qu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ui,kn,oi={point:function(Ct,At){kn=[Ct,At]}};function bn(et){var Ct=et[0],At=et[1];return kn=null,Ir.point(Ct,At),kn||(jn.point(Ct,At),kn)||(ui.point(Ct,At),kn)}bn.invert=function(et){var Ct=or.scale(),At=or.translate(),Le=(et[0]-At[0])/Ct,Ne=(et[1]-At[1])/Ct;return(Ne>=.12&&Ne<.234&&Le>=-.425&&Le<-.214?yn:Ne>=.166&&Ne<.234&&Le>=-.214&&Le<-.115?qn:or).invert(et)},bn.stream=function(et){return bt&&mr===et?bt:bt=xu([or.stream(mr=et),yn.stream(et),qn.stream(et)])},bn.precision=function(et){return arguments.length?(or.precision(et),yn.precision(et),qn.precision(et),Xe()):or.precision()},bn.scale=function(et){return arguments.length?(or.scale(et),yn.scale(et*.35),qn.scale(et),bn.translate(or.translate())):or.scale()},bn.translate=function(et){if(!arguments.length)return or.translate();var Ct=or.scale(),At=+et[0],Le=+et[1];return Ir=or.translate(et).clipExtent([[At-.455*Ct,Le-.238*Ct],[At+.455*Ct,Le+.238*Ct]]).stream(oi),jn=yn.translate([At-.307*Ct,Le+.201*Ct]).clipExtent([[At-.425*Ct+i,Le+.12*Ct+i],[At-.214*Ct-i,Le+.234*Ct-i]]).stream(oi),ui=qn.translate([At-.205*Ct,Le+.212*Ct]).clipExtent([[At-.214*Ct+i,Le+.166*Ct+i],[At-.115*Ct-i,Le+.234*Ct-i]]).stream(oi),Xe()},bn.fitExtent=function(et,Ct){return ss(bn,et,Ct)},bn.fitSize=function(et,Ct){return ko(bn,et,Ct)};function Xe(){return bt=mr=null,bn}return bn.scale(1070)};function Ko(Et){return function(bt,mr){var or=P(bt),Ir=P(mr),yn=Et(or*Ir);return[yn*Ir*I(bt),yn*I(mr)]}}function Iu(Et){return function(bt,mr){var or=N(bt*bt+mr*mr),Ir=Et(or),yn=I(Ir),jn=P(Ir);return[M(bt*yn,or*jn),J(or&&mr*yn/or)]}}var Hl=Ko(function(Et){return N(2/(1+Et))});Hl.invert=Iu(function(Et){return 2*J(Et/2)});var xl=function(){return Ls(Hl).scale(124.75).clipAngle(180-.001)},yl=Ko(function(Et){return(Et=H(Et))&&Et/I(Et)});yl.invert=Iu(function(Et){return Et});var Tc=function(){return Ls(yl).scale(79.4188).clipAngle(180-.001)};function El(Et,bt){return[Et,w(W((s+bt)/2))]}El.invert=function(Et,bt){return[Et,2*x(O(bt))-s]};var _l=function(){return sl(El).scale(961/u)};function sl(Et){var bt=Ls(Et),mr=bt.center,or=bt.scale,Ir=bt.translate,yn=bt.clipExtent,jn=null,qn,ui,kn;bt.scale=function(bn){return arguments.length?(or(bn),oi()):or()},bt.translate=function(bn){return arguments.length?(Ir(bn),oi()):Ir()},bt.center=function(bn){return arguments.length?(mr(bn),oi()):mr()},bt.clipExtent=function(bn){return arguments.length?(bn==null?jn=qn=ui=kn=null:(jn=+bn[0][0],qn=+bn[0][1],ui=+bn[1][0],kn=+bn[1][1]),oi()):jn==null?null:[[jn,qn],[ui,kn]]};function oi(){var bn=n*or(),Xe=bt(So(bt.rotate()).invert([0,0]));return yn(jn==null?[[Xe[0]-bn,Xe[1]-bn],[Xe[0]+bn,Xe[1]+bn]]:Et===El?[[Math.max(Xe[0]-bn,jn),qn],[Math.min(Xe[0]+bn,ui),kn]]:[[jn,Math.max(Xe[1]-bn,qn)],[ui,Math.min(Xe[1]+bn,kn)]])}return oi()}function ls(Et){return W((s+Et)/2)}function gs(Et,bt){var mr=P(Et),or=Et===bt?I(Et):w(mr/P(bt))/w(ls(bt)/ls(Et)),Ir=mr*S(ls(Et),or)/or;if(!or)return El;function yn(jn,qn){Ir>0?qn<-s+i&&(qn=-s+i):qn>s-i&&(qn=s-i);var ui=Ir/S(ls(qn),or);return[ui*I(or*jn),Ir-ui*P(or*jn)]}return yn.invert=function(jn,qn){var ui=Ir-qn,kn=j(or)*N(jn*jn+ui*ui);return[M(jn,_(ui))/or*j(ui),2*x(S(Ir/kn,1/or))-s]},yn}var ht=function(){return al(gs).scale(109.5).parallels([30,30])};function Ut(Et,bt){return[Et,bt]}Ut.invert=Ut;var Ht=function(){return Ls(Ut).scale(152.63)};function Kt(Et,bt){var mr=P(Et),or=Et===bt?I(Et):(mr-P(bt))/(bt-Et),Ir=mr/or+Et;if(_(or)<i)return Ut;function yn(jn,qn){var ui=Ir-qn,kn=or*jn;return[ui*I(kn),Ir-ui*P(kn)]}return yn.invert=function(jn,qn){var ui=Ir-qn;return[M(jn,_(ui))/or*j(ui),Ir-j(or)*N(jn*jn+ui*ui)]},yn}var pr=function(){return al(Kt).scale(131.154).center([0,13.9389])};function ln(Et,bt){var mr=P(bt),or=P(Et)*mr;return[mr*I(Et)/or,I(bt)/or]}ln.invert=Iu(x);var Rn=function(){return Ls(ln).scale(144.049).clipAngle(60)};function Fn(Et,bt,mr,or){return Et===1&&bt===1&&mr===0&&or===0?Fs:_o({point:function(yn,jn){this.stream.point(yn*Et+mr,jn*bt+or)}})}var li=function(){var bt=1,mr=0,or=0,Ir=1,yn=1,jn=Fs,qn=null,ui,kn,oi,bn=Fs,Xe,et,Ct;function At(){return Xe=et=null,Ct}return Ct={stream:function(Ne){return Xe&&et===Ne?Xe:Xe=jn(bn(et=Ne))},clipExtent:function(Ne){return arguments.length?(bn=Ne==null?(qn=ui=kn=oi=null,Fs):ys(qn=+Ne[0][0],ui=+Ne[0][1],kn=+Ne[1][0],oi=+Ne[1][1]),At()):qn==null?null:[[qn,ui],[kn,oi]]},scale:function(Ne){return arguments.length?(jn=Fn((bt=+Ne)*Ir,bt*yn,mr,or),At()):bt},translate:function(Ne){return arguments.length?(jn=Fn(bt*Ir,bt*yn,mr=+Ne[0],or=+Ne[1]),At()):[mr,or]},reflectX:function(Ne){return arguments.length?(jn=Fn(bt*(Ir=Ne?-1:1),bt*yn,mr,or),At()):Ir<0},reflectY:function(Ne){return arguments.length?(jn=Fn(bt*Ir,bt*(yn=Ne?-1:1),mr,or),At()):yn<0},fitExtent:function(Ne,nt){return ss(Ct,Ne,nt)},fitSize:function(Ne,nt){return ko(Ct,Ne,nt)}}};function qi(Et,bt){return[P(bt)*I(Et),I(bt)]}qi.invert=Iu(J);var Wn=function(){return Ls(qi).scale(249.5).clipAngle(90+i)};function ga(Et,bt){var mr=P(bt),or=1+P(Et)*mr;return[mr*I(Et)/or,I(bt)/or]}ga.invert=Iu(function(Et){return 2*x(Et)});var ao=function(){return Ls(ga).scale(250).clipAngle(142)};function is(Et,bt){return[w(W((s+bt)/2)),-Et]}is.invert=function(Et,bt){return[-bt,2*x(O(Et))-s]};var vo=function(){var bt=sl(is),mr=bt.center,or=bt.rotate;return bt.center=function(Ir){return arguments.length?mr([-Ir[1],Ir[0]]):(Ir=mr(),[Ir[1],-Ir[0]])},bt.rotate=function(Ir){return arguments.length?or([Ir[0],Ir[1],Ir.length>2?Ir[2]+90:90]):(Ir=or(),[Ir[0],Ir[1],Ir[2]-90])},or([0,0,90]).scale(159.155)};e.geoArea=z,e.geoBounds=xt,e.geoCentroid=Nn,e.geoCircle=ps,e.geoClipExtent=Lt,e.geoContains=Yo,e.geoDistance=Uo,e.geoGraticule=rs,e.geoGraticule10=Za,e.geoInterpolate=qa,e.geoLength=Oa,e.geoPath=ia,e.geoAlbers=ol,e.geoAlbersUsa=xo,e.geoAzimuthalEqualArea=xl,e.geoAzimuthalEqualAreaRaw=Hl,e.geoAzimuthalEquidistant=Tc,e.geoAzimuthalEquidistantRaw=yl,e.geoConicConformal=ht,e.geoConicConformalRaw=gs,e.geoConicEqualArea=qu,e.geoConicEqualAreaRaw=zo,e.geoConicEquidistant=pr,e.geoConicEquidistantRaw=Kt,e.geoEquirectangular=Ht,e.geoEquirectangularRaw=Ut,e.geoGnomonic=Rn,e.geoGnomonicRaw=ln,e.geoIdentity=li,e.geoProjection=Ls,e.geoProjectionMutator=Es,e.geoMercator=_l,e.geoMercatorRaw=El,e.geoOrthographic=Wn,e.geoOrthographicRaw=qi,e.geoStereographic=ao,e.geoStereographicRaw=ga,e.geoTransverseMercator=vo,e.geoTransverseMercatorRaw=is,e.geoRotation=So,e.geoStream=_e,e.geoTransform=Mo,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js":function(B,L,o){(function(e,g){g(L,o("./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js"))})(this,function(e,g){"use strict";var v=1e-6,p=1e-12,c=Math.PI,h=c/2,i=c/4,r=c*2,n=180/c,s=c/180,f=Math.abs,u=Math.atan,d=Math.atan2,b=Math.cos,_=Math.ceil,x=Math.exp,M=Math.hypot,P=Math.log,C=Math.pow,O=Math.sin,w=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},S=Math.sqrt,I=Math.tan;function j(Xe){return Xe>1?0:Xe<-1?c:Math.acos(Xe)}function N(Xe){return Xe>1?h:Xe<-1?-h:Math.asin(Xe)}function W(Xe){return(Xe=O(Xe/2))*Xe}function H(){}function J(Xe,et){Xe&&ne.hasOwnProperty(Xe.type)&&ne[Xe.type](Xe,et)}var Q={Feature:function(et,Ct){J(et.geometry,Ct)},FeatureCollection:function(et,Ct){for(var At=et.features,Le=-1,Ne=At.length;++Le<Ne;)J(At[Le].geometry,Ct)}},ne={Sphere:function(et,Ct){Ct.sphere()},Point:function(et,Ct){et=et.coordinates,Ct.point(et[0],et[1],et[2])},MultiPoint:function(et,Ct){for(var At=et.coordinates,Le=-1,Ne=At.length;++Le<Ne;)et=At[Le],Ct.point(et[0],et[1],et[2])},LineString:function(et,Ct){K(et.coordinates,Ct,0)},MultiLineString:function(et,Ct){for(var At=et.coordinates,Le=-1,Ne=At.length;++Le<Ne;)K(At[Le],Ct,0)},Polygon:function(et,Ct){ie(et.coordinates,Ct)},MultiPolygon:function(et,Ct){for(var At=et.coordinates,Le=-1,Ne=At.length;++Le<Ne;)ie(At[Le],Ct)},GeometryCollection:function(et,Ct){for(var At=et.geometries,Le=-1,Ne=At.length;++Le<Ne;)J(At[Le],Ct)}};function K(Xe,et,Ct){var At=-1,Le=Xe.length-Ct,Ne;for(et.lineStart();++At<Le;)Ne=Xe[At],et.point(Ne[0],Ne[1],Ne[2]);et.lineEnd()}function ie(Xe,et){var Ct=-1,At=Xe.length;for(et.polygonStart();++Ct<At;)K(Xe[Ct],et,1);et.polygonEnd()}function de(Xe,et){Xe&&Q.hasOwnProperty(Xe.type)?Q[Xe.type](Xe,et):J(Xe,et)}var we=new g.Adder,Re=new g.Adder,_e,Ue,rt,Fe,Se,ye={point:H,lineStart:H,lineEnd:H,polygonStart:function(){we=new g.Adder,ye.lineStart=Oe,ye.lineEnd=ue},polygonEnd:function(){var et=+we;Re.add(et<0?r+et:et),this.lineStart=this.lineEnd=this.point=H},sphere:function(){Re.add(r)}};function Oe(){ye.point=xe}function ue(){Ae(_e,Ue)}function xe(Xe,et){ye.point=Ae,_e=Xe,Ue=et,Xe*=s,et*=s,rt=Xe,Fe=b(et=et/2+i),Se=O(et)}function Ae(Xe,et){Xe*=s,et*=s,et=et/2+i;var Ct=Xe-rt,At=Ct>=0?1:-1,Le=At*Ct,Ne=b(et),nt=O(et),tt=Se*nt,dt=Fe*Ne+tt*b(Le),Dt=tt*At*O(Le);we.add(d(Dt,dt)),rt=Xe,Fe=Ne,Se=nt}function pe(Xe){return Re=new g.Adder,de(Xe,ye),Re*2}function be(Xe){return[d(Xe[1],Xe[0]),N(Xe[2])]}function le(Xe){var et=Xe[0],Ct=Xe[1],At=b(Ct);return[At*b(et),At*O(et),O(Ct)]}function z(Xe,et){return Xe[0]*et[0]+Xe[1]*et[1]+Xe[2]*et[2]}function ae(Xe,et){return[Xe[1]*et[2]-Xe[2]*et[1],Xe[2]*et[0]-Xe[0]*et[2],Xe[0]*et[1]-Xe[1]*et[0]]}function V(Xe,et){Xe[0]+=et[0],Xe[1]+=et[1],Xe[2]+=et[2]}function re(Xe,et){return[Xe[0]*et,Xe[1]*et,Xe[2]*et]}function te(Xe){var et=S(Xe[0]*Xe[0]+Xe[1]*Xe[1]+Xe[2]*Xe[2]);Xe[0]/=et,Xe[1]/=et,Xe[2]/=et}var q,ve,Me,De,ze,We,He,$e,It,Yt,rr,ir={point:Br,lineStart:ft,lineEnd:st,polygonStart:function(){ir.point=Tt,ir.lineStart=Qe,ir.lineEnd=it,It=new g.Adder,ye.polygonStart()},polygonEnd:function(){ye.polygonEnd(),ir.point=Br,ir.lineStart=ft,ir.lineEnd=st,we<0?(q=-(Me=180),ve=-(De=90)):It>v?De=90:It<-v&&(ve=-90),rr[0]=q,rr[1]=Me},sphere:function(){q=-(Me=180),ve=-(De=90)}};function Br(Xe,et){Yt.push(rr=[q=Xe,Me=Xe]),et<ve&&(ve=et),et>De&&(De=et)}function tr(Xe,et){var Ct=le([Xe*s,et*s]);if($e){var At=ae($e,Ct),Le=[At[1],-At[0],0],Ne=ae(Le,At);te(Ne),Ne=be(Ne);var nt=Xe-ze,tt=nt>0?1:-1,dt=Ne[0]*n*tt,Dt,Zt=f(nt)>180;Zt^(tt*ze<dt&&dt<tt*Xe)?(Dt=Ne[1]*n,Dt>De&&(De=Dt)):(dt=(dt+360)%360-180,Zt^(tt*ze<dt&&dt<tt*Xe)?(Dt=-Ne[1]*n,Dt<ve&&(ve=Dt)):(et<ve&&(ve=et),et>De&&(De=et))),Zt?Xe<ze?zt(q,Xe)>zt(q,Me)&&(Me=Xe):zt(Xe,Me)>zt(q,Me)&&(q=Xe):Me>=q?(Xe<q&&(q=Xe),Xe>Me&&(Me=Xe)):Xe>ze?zt(q,Xe)>zt(q,Me)&&(Me=Xe):zt(Xe,Me)>zt(q,Me)&&(q=Xe)}else Yt.push(rr=[q=Xe,Me=Xe]);et<ve&&(ve=et),et>De&&(De=et),$e=Ct,ze=Xe}function ft(){ir.point=tr}function st(){rr[0]=q,rr[1]=Me,ir.point=Br,$e=null}function Tt(Xe,et){if($e){var Ct=Xe-ze;It.add(f(Ct)>180?Ct+(Ct>0?360:-360):Ct)}else We=Xe,He=et;ye.point(Xe,et),tr(Xe,et)}function Qe(){ye.lineStart()}function it(){Tt(We,He),ye.lineEnd(),f(It)>v&&(q=-(Me=180)),rr[0]=q,rr[1]=Me,$e=null}function zt(Xe,et){return(et-=Xe)<0?et+360:et}function Qt(Xe,et){return Xe[0]-et[0]}function Ar(Xe,et){return Xe[0]<=Xe[1]?Xe[0]<=et&&et<=Xe[1]:et<Xe[0]||Xe[1]<et}function zr(Xe){var et,Ct,At,Le,Ne,nt,tt;if(De=Me=-(q=ve=Infinity),Yt=[],de(Xe,ir),Ct=Yt.length){for(Yt.sort(Qt),et=1,At=Yt[0],Ne=[At];et<Ct;++et)Le=Yt[et],Ar(At,Le[0])||Ar(At,Le[1])?(zt(At[0],Le[1])>zt(At[0],At[1])&&(At[1]=Le[1]),zt(Le[0],At[1])>zt(At[0],At[1])&&(At[0]=Le[0])):Ne.push(At=Le);for(nt=-Infinity,Ct=Ne.length-1,et=0,At=Ne[Ct];et<=Ct;At=Le,++et)Le=Ne[et],(tt=zt(At[1],Le[0]))>nt&&(nt=tt,q=Le[0],Me=At[1])}return Yt=rr=null,q===Infinity||ve===Infinity?[[NaN,NaN],[NaN,NaN]]:[[q,ve],[Me,De]]}var ct,ot,xt,Bt,Ke,lt,mt,qe,yt,qt,Er,Zr,Dr,Cr,mn,xn,lr={sphere:H,point:An,lineStart:Mt,lineEnd:Tr,polygonStart:function(){lr.lineStart=Mr,lr.lineEnd=Hr},polygonEnd:function(){lr.lineStart=Mt,lr.lineEnd=Tr}};function An(Xe,et){Xe*=s,et*=s;var Ct=b(et);On(Ct*b(Xe),Ct*O(Xe),O(et))}function On(Xe,et,Ct){++ct,xt+=(Xe-xt)/ct,Bt+=(et-Bt)/ct,Ke+=(Ct-Ke)/ct}function Mt(){lr.point=er}function er(Xe,et){Xe*=s,et*=s;var Ct=b(et);Cr=Ct*b(Xe),mn=Ct*O(Xe),xn=O(et),lr.point=$t,On(Cr,mn,xn)}function $t(Xe,et){Xe*=s,et*=s;var Ct=b(et),At=Ct*b(Xe),Le=Ct*O(Xe),Ne=O(et),nt=d(S((nt=mn*Ne-xn*Le)*nt+(nt=xn*At-Cr*Ne)*nt+(nt=Cr*Le-mn*At)*nt),Cr*At+mn*Le+xn*Ne);ot+=nt,lt+=nt*(Cr+(Cr=At)),mt+=nt*(mn+(mn=Le)),qe+=nt*(xn+(xn=Ne)),On(Cr,mn,xn)}function Tr(){lr.point=An}function Mr(){lr.point=wr}function Hr(){Ur(Zr,Dr),lr.point=An}function wr(Xe,et){Zr=Xe,Dr=et,Xe*=s,et*=s,lr.point=Ur;var Ct=b(et);Cr=Ct*b(Xe),mn=Ct*O(Xe),xn=O(et),On(Cr,mn,xn)}function Ur(Xe,et){Xe*=s,et*=s;var Ct=b(et),At=Ct*b(Xe),Le=Ct*O(Xe),Ne=O(et),nt=mn*Ne-xn*Le,tt=xn*At-Cr*Ne,dt=Cr*Le-mn*At,Dt=M(nt,tt,dt),Zt=N(Dt),cr=Dt&&-Zt/Dt;yt.add(cr*nt),qt.add(cr*tt),Er.add(cr*dt),ot+=Zt,lt+=Zt*(Cr+(Cr=At)),mt+=Zt*(mn+(mn=Le)),qe+=Zt*(xn+(xn=Ne)),On(Cr,mn,xn)}function fn(Xe){ct=ot=xt=Bt=Ke=lt=mt=qe=0,yt=new g.Adder,qt=new g.Adder,Er=new g.Adder,de(Xe,lr);var et=+yt,Ct=+qt,At=+Er,Le=M(et,Ct,At);return Le<p&&(et=lt,Ct=mt,At=qe,ot<v&&(et=xt,Ct=Bt,At=Ke),Le=M(et,Ct,At),Le<p)?[NaN,NaN]:[d(Ct,et)*n,N(At/Le)*n]}function tn(Xe){return function(){return Xe}}function Rr(Xe,et){function Ct(At,Le){return At=Xe(At,Le),et(At[0],At[1])}return Xe.invert&&et.invert&&(Ct.invert=function(At,Le){return At=et.invert(At,Le),At&&Xe.invert(At[0],At[1])}),Ct}function Nn(Xe,et){return[f(Xe)>c?Xe+Math.round(-Xe/r)*r:Xe,et]}Nn.invert=Nn;function En(Xe,et,Ct){return(Xe%=r)?et||Ct?Rr(wi(Xe),$a(et,Ct)):wi(Xe):et||Ct?$a(et,Ct):Nn}function Yn(Xe){return function(et,Ct){return et+=Xe,[et>c?et-r:et<-c?et+r:et,Ct]}}function wi(Xe){var et=Yn(Xe);return et.invert=Yn(-Xe),et}function $a(Xe,et){var Ct=b(Xe),At=O(Xe),Le=b(et),Ne=O(et);function nt(tt,dt){var Dt=b(dt),Zt=b(tt)*Dt,cr=O(tt)*Dt,Jt=O(dt),xr=Jt*Ct+Zt*At;return[d(cr*Le-xr*Ne,Zt*Ct-Jt*At),N(xr*Le+cr*Ne)]}return nt.invert=function(tt,dt){var Dt=b(dt),Zt=b(tt)*Dt,cr=O(tt)*Dt,Jt=O(dt),xr=Jt*Le-cr*Ne;return[d(cr*Le+Jt*Ne,Zt*Ct+xr*At),N(xr*Ct-Zt*At)]},nt}function so(Xe){Xe=En(Xe[0]*s,Xe[1]*s,Xe.length>2?Xe[2]*s:0);function et(Ct){return Ct=Xe(Ct[0]*s,Ct[1]*s),Ct[0]*=n,Ct[1]*=n,Ct}return et.invert=function(Ct){return Ct=Xe.invert(Ct[0]*s,Ct[1]*s),Ct[0]*=n,Ct[1]*=n,Ct},et}function Po(Xe,et,Ct,At,Le,Ne){if(!!Ct){var nt=b(et),tt=O(et),dt=At*Ct;Le==null?(Le=et+At*r,Ne=et-dt/2):(Le=Ro(nt,Le),Ne=Ro(nt,Ne),(At>0?Le<Ne:Le>Ne)&&(Le+=At*r));for(var Dt,Zt=Le;At>0?Zt>Ne:Zt<Ne;Zt-=dt)Dt=be([nt,-tt*b(Zt),-tt*O(Zt)]),Xe.point(Dt[0],Dt[1])}}function Ro(Xe,et){et=le(et),et[0]-=Xe,te(et);var Ct=j(-et[1]);return((-et[2]<0?-Ct:Ct)+r-v)%r}function So(){var Xe=tn([0,0]),et=tn(90),Ct=tn(6),At,Le,Ne={point:nt};function nt(dt,Dt){At.push(dt=Le(dt,Dt)),dt[0]*=n,dt[1]*=n}function tt(){var dt=Xe.apply(this,arguments),Dt=et.apply(this,arguments)*s,Zt=Ct.apply(this,arguments)*s;return At=[],Le=En(-dt[0]*s,-dt[1]*s,0).invert,Po(Ne,Dt,Zt,1),dt={type:"Polygon",coordinates:[At]},At=Le=null,dt}return tt.center=function(dt){return arguments.length?(Xe=typeof dt=="function"?dt:tn([+dt[0],+dt[1]]),tt):Xe},tt.radius=function(dt){return arguments.length?(et=typeof dt=="function"?dt:tn(+dt),tt):et},tt.precision=function(dt){return arguments.length?(Ct=typeof dt=="function"?dt:tn(+dt),tt):Ct},tt}function Va(){var Xe=[],et;return{point:function(At,Le,Ne){et.push([At,Le,Ne])},lineStart:function(){Xe.push(et=[])},lineEnd:H,rejoin:function(){Xe.length>1&&Xe.push(Xe.pop().concat(Xe.shift()))},result:function(){var At=Xe;return Xe=[],et=null,At}}}function ws(Xe,et){return f(Xe[0]-et[0])<v&&f(Xe[1]-et[1])<v}function ps(Xe,et,Ct,At){this.x=Xe,this.z=et,this.o=Ct,this.e=At,this.v=!1,this.n=this.p=null}function Ao(Xe,et,Ct,At,Le){var Ne=[],nt=[],tt,dt;if(Xe.forEach(function(yr){if(!((rn=yr.length-1)<=0)){var rn,Kr=yr[0],an=yr[rn],Qr;if(ws(Kr,an)){if(!Kr[2]&&!an[2]){for(Le.lineStart(),tt=0;tt<rn;++tt)Le.point((Kr=yr[tt])[0],Kr[1]);Le.lineEnd();return}an[0]+=2*v}Ne.push(Qr=new ps(Kr,yr,null,!0)),nt.push(Qr.o=new ps(Kr,null,Qr,!1)),Ne.push(Qr=new ps(an,yr,null,!1)),nt.push(Qr.o=new ps(an,null,Qr,!0))}}),!!Ne.length){for(nt.sort(et),zs(Ne),zs(nt),tt=0,dt=nt.length;tt<dt;++tt)nt[tt].e=Ct=!Ct;for(var Dt=Ne[0],Zt,cr;;){for(var Jt=Dt,xr=!0;Jt.v;)if((Jt=Jt.n)===Dt)return;Zt=Jt.z,Le.lineStart();do{if(Jt.v=Jt.o.v=!0,Jt.e){if(xr)for(tt=0,dt=Zt.length;tt<dt;++tt)Le.point((cr=Zt[tt])[0],cr[1]);else At(Jt.x,Jt.n.x,1,Le);Jt=Jt.n}else{if(xr)for(Zt=Jt.p.z,tt=Zt.length-1;tt>=0;--tt)Le.point((cr=Zt[tt])[0],cr[1]);else At(Jt.x,Jt.p.x,-1,Le);Jt=Jt.p}Jt=Jt.o,Zt=Jt.z,xr=!xr}while(!Jt.v);Le.lineEnd()}}}function zs(Xe){if(!!(et=Xe.length)){for(var et,Ct=0,At=Xe[0],Le;++Ct<et;)At.n=Le=Xe[Ct],Le.p=At,At=Le;At.n=Le=Xe[0],Le.p=At}}function Qa(Xe){return f(Xe[0])<=c?Xe[0]:w(Xe[0])*((f(Xe[0])+c)%r-c)}function fs(Xe,et){var Ct=Qa(et),At=et[1],Le=O(At),Ne=[O(Ct),-b(Ct),0],nt=0,tt=0,dt=new g.Adder;Le===1?At=h+v:Le===-1&&(At=-h-v);for(var Dt=0,Zt=Xe.length;Dt<Zt;++Dt)if(!!(Jt=(cr=Xe[Dt]).length))for(var cr,Jt,xr=cr[Jt-1],yr=Qa(xr),rn=xr[1]/2+i,Kr=O(rn),an=b(rn),Qr=0;Qr<Jt;++Qr,yr=Pn,Kr=Ei,an=zn,xr=_n){var _n=cr[Qr],Pn=Qa(_n),ri=_n[1]/2+i,Ei=O(ri),zn=b(ri),gi=Pn-yr,Ti=gi>=0?1:-1,la=Ti*gi,Vi=la>c,Ha=Kr*Ei;if(dt.add(d(Ha*Ti*O(la),an*zn+Ha*b(la))),nt+=Vi?gi+Ti*r:gi,Vi^yr>=Ct^Pn>=Ct){var Na=ae(le(xr),le(_n));te(Na);var Wa=ae(Ne,Na);te(Wa);var mi=(Vi^gi>=0?-1:1)*N(Wa[2]);(At>mi||At===mi&&(Na[0]||Na[1]))&&(tt+=Vi^gi>=0?1:-1)}}return(nt<-v||nt<v&&dt<-p)^tt&1}function Vs(Xe,et,Ct,At){return function(Le){var Ne=et(Le),nt=Va(),tt=et(nt),dt=!1,Dt,Zt,cr,Jt={point:xr,lineStart:rn,lineEnd:Kr,polygonStart:function(){Jt.point=an,Jt.lineStart=Qr,Jt.lineEnd=_n,Zt=[],Dt=[]},polygonEnd:function(){Jt.point=xr,Jt.lineStart=rn,Jt.lineEnd=Kr,Zt=g.merge(Zt);var ri=fs(Dt,At);Zt.length?(dt||(Le.polygonStart(),dt=!0),Ao(Zt,ts,ri,Ct,Le)):ri&&(dt||(Le.polygonStart(),dt=!0),Le.lineStart(),Ct(null,null,1,Le),Le.lineEnd()),dt&&(Le.polygonEnd(),dt=!1),Zt=Dt=null},sphere:function(){Le.polygonStart(),Le.lineStart(),Ct(null,null,1,Le),Le.lineEnd(),Le.polygonEnd()}};function xr(Pn,ri){Xe(Pn,ri)&&Le.point(Pn,ri)}function yr(Pn,ri){Ne.point(Pn,ri)}function rn(){Jt.point=yr,Ne.lineStart()}function Kr(){Jt.point=xr,Ne.lineEnd()}function an(Pn,ri){cr.push([Pn,ri]),tt.point(Pn,ri)}function Qr(){tt.lineStart(),cr=[]}function _n(){an(cr[0][0],cr[0][1]),tt.lineEnd();var Pn=tt.clean(),ri=nt.result(),Ei,zn=ri.length,gi,Ti,la;if(cr.pop(),Dt.push(cr),cr=null,!!zn){if(Pn&1){if(Ti=ri[0],(gi=Ti.length-1)>0){for(dt||(Le.polygonStart(),dt=!0),Le.lineStart(),Ei=0;Ei<gi;++Ei)Le.point((la=Ti[Ei])[0],la[1]);Le.lineEnd()}return}zn>1&&Pn&2&&ri.push(ri.pop().concat(ri.shift())),Zt.push(ri.filter(Ju))}}return Jt}}function Ju(Xe){return Xe.length>1}function ts(Xe,et){return((Xe=Xe.x)[0]<0?Xe[1]-h-v:h-Xe[1])-((et=et.x)[0]<0?et[1]-h-v:h-et[1])}var Zs=Vs(function(){return!0},ys,at,[-c,-h]);function ys(Xe){var et=NaN,Ct=NaN,At=NaN,Le;return{lineStart:function(){Xe.lineStart(),Le=1},point:function(nt,tt){var dt=nt>0?c:-c,Dt=f(nt-et);f(Dt-c)<v?(Xe.point(et,Ct=(Ct+tt)/2>0?h:-h),Xe.point(At,Ct),Xe.lineEnd(),Xe.lineStart(),Xe.point(dt,Ct),Xe.point(nt,Ct),Le=0):At!==dt&&Dt>=c&&(f(et-At)<v&&(et-=At*v),f(nt-dt)<v&&(nt-=dt*v),Ct=Lt(et,Ct,nt,tt),Xe.point(At,Ct),Xe.lineEnd(),Xe.lineStart(),Xe.point(dt,Ct),Le=0),Xe.point(et=nt,Ct=tt),At=dt},lineEnd:function(){Xe.lineEnd(),et=Ct=NaN},clean:function(){return 2-Le}}}function Lt(Xe,et,Ct,At){var Le,Ne,nt=O(Xe-Ct);return f(nt)>v?u((O(et)*(Ne=b(At))*O(Ct)-O(At)*(Le=b(et))*O(Xe))/(Le*Ne*nt)):(et+At)/2}function at(Xe,et,Ct,At){var Le;if(Xe==null)Le=Ct*h,At.point(-c,Le),At.point(0,Le),At.point(c,Le),At.point(c,0),At.point(c,-Le),At.point(0,-Le),At.point(-c,-Le),At.point(-c,0),At.point(-c,Le);else if(f(Xe[0]-et[0])>v){var Ne=Xe[0]<et[0]?c:-c;Le=Ct*Ne/2,At.point(-Ne,Le),At.point(0,Le),At.point(Ne,Le)}else At.point(et[0],et[1])}function Ye(Xe){var et=b(Xe),Ct=6*s,At=et>0,Le=f(et)>v;function Ne(Zt,cr,Jt,xr){Po(xr,Xe,Ct,Jt,Zt,cr)}function nt(Zt,cr){return b(Zt)*b(cr)>et}function tt(Zt){var cr,Jt,xr,yr,rn;return{lineStart:function(){yr=xr=!1,rn=1},point:function(an,Qr){var _n=[an,Qr],Pn,ri=nt(an,Qr),Ei=At?ri?0:Dt(an,Qr):ri?Dt(an+(an<0?c:-c),Qr):0;if(!cr&&(yr=xr=ri)&&Zt.lineStart(),ri!==xr&&(Pn=dt(cr,_n),(!Pn||ws(cr,Pn)||ws(_n,Pn))&&(_n[2]=1)),ri!==xr)rn=0,ri?(Zt.lineStart(),Pn=dt(_n,cr),Zt.point(Pn[0],Pn[1])):(Pn=dt(cr,_n),Zt.point(Pn[0],Pn[1],2),Zt.lineEnd()),cr=Pn;else if(Le&&cr&&At^ri){var zn;!(Ei&Jt)&&(zn=dt(_n,cr,!0))&&(rn=0,At?(Zt.lineStart(),Zt.point(zn[0][0],zn[0][1]),Zt.point(zn[1][0],zn[1][1]),Zt.lineEnd()):(Zt.point(zn[1][0],zn[1][1]),Zt.lineEnd(),Zt.lineStart(),Zt.point(zn[0][0],zn[0][1],3)))}ri&&(!cr||!ws(cr,_n))&&Zt.point(_n[0],_n[1]),cr=_n,xr=ri,Jt=Ei},lineEnd:function(){xr&&Zt.lineEnd(),cr=null},clean:function(){return rn|(yr&&xr)<<1}}}function dt(Zt,cr,Jt){var xr=le(Zt),yr=le(cr),rn=[1,0,0],Kr=ae(xr,yr),an=z(Kr,Kr),Qr=Kr[0],_n=an-Qr*Qr;if(!_n)return!Jt&&Zt;var Pn=et*an/_n,ri=-et*Qr/_n,Ei=ae(rn,Kr),zn=re(rn,Pn),gi=re(Kr,ri);V(zn,gi);var Ti=Ei,la=z(zn,Ti),Vi=z(Ti,Ti),Ha=la*la-Vi*(z(zn,zn)-1);if(!(Ha<0)){var Na=S(Ha),Wa=re(Ti,(-la-Na)/Vi);if(V(Wa,zn),Wa=be(Wa),!Jt)return Wa;var mi=Zt[0],eo=cr[0],Lo=Zt[1],po=cr[1],Wi;eo<mi&&(Wi=mi,mi=eo,eo=Wi);var Oo=eo-mi,as=f(Oo-c)<v,pu=as||Oo<v;if(!as&&po<Lo&&(Wi=Lo,Lo=po,po=Wi),pu?as?Lo+po>0^Wa[1]<(f(Wa[0]-mi)<v?Lo:po):Lo<=Wa[1]&&Wa[1]<=po:Oo>c^(mi<=Wa[0]&&Wa[0]<=eo)){var gu=re(Ti,(-la+Na)/Vi);return V(gu,zn),[Wa,be(gu)]}}}function Dt(Zt,cr){var Jt=At?Xe:c-Xe,xr=0;return Zt<-Jt?xr|=1:Zt>Jt&&(xr|=2),cr<-Jt?xr|=4:cr>Jt&&(xr|=8),xr}return Vs(nt,tt,Ne,At?[0,-Xe]:[-c,Xe-c])}function St(Xe,et,Ct,At,Le,Ne){var nt=Xe[0],tt=Xe[1],dt=et[0],Dt=et[1],Zt=0,cr=1,Jt=dt-nt,xr=Dt-tt,yr;if(yr=Ct-nt,!(!Jt&&yr>0)){if(yr/=Jt,Jt<0){if(yr<Zt)return;yr<cr&&(cr=yr)}else if(Jt>0){if(yr>cr)return;yr>Zt&&(Zt=yr)}if(yr=Le-nt,!(!Jt&&yr<0)){if(yr/=Jt,Jt<0){if(yr>cr)return;yr>Zt&&(Zt=yr)}else if(Jt>0){if(yr<Zt)return;yr<cr&&(cr=yr)}if(yr=At-tt,!(!xr&&yr>0)){if(yr/=xr,xr<0){if(yr<Zt)return;yr<cr&&(cr=yr)}else if(xr>0){if(yr>cr)return;yr>Zt&&(Zt=yr)}if(yr=Ne-tt,!(!xr&&yr<0)){if(yr/=xr,xr<0){if(yr>cr)return;yr>Zt&&(Zt=yr)}else if(xr>0){if(yr<Zt)return;yr<cr&&(cr=yr)}return Zt>0&&(Xe[0]=nt+Zt*Jt,Xe[1]=tt+Zt*xr),cr<1&&(et[0]=nt+cr*Jt,et[1]=tt+cr*xr),!0}}}}}var fr=1e9,Gr=-fr;function hn(Xe,et,Ct,At){function Le(Dt,Zt){return Xe<=Dt&&Dt<=Ct&&et<=Zt&&Zt<=At}function Ne(Dt,Zt,cr,Jt){var xr=0,yr=0;if(Dt==null||(xr=nt(Dt,cr))!==(yr=nt(Zt,cr))||dt(Dt,Zt)<0^cr>0)do Jt.point(xr===0||xr===3?Xe:Ct,xr>1?At:et);while((xr=(xr+cr+4)%4)!==yr);else Jt.point(Zt[0],Zt[1])}function nt(Dt,Zt){return f(Dt[0]-Xe)<v?Zt>0?0:3:f(Dt[0]-Ct)<v?Zt>0?2:1:f(Dt[1]-et)<v?Zt>0?1:0:Zt>0?3:2}function tt(Dt,Zt){return dt(Dt.x,Zt.x)}function dt(Dt,Zt){var cr=nt(Dt,1),Jt=nt(Zt,1);return cr!==Jt?cr-Jt:cr===0?Zt[1]-Dt[1]:cr===1?Dt[0]-Zt[0]:cr===2?Dt[1]-Zt[1]:Zt[0]-Dt[0]}return function(Dt){var Zt=Dt,cr=Va(),Jt,xr,yr,rn,Kr,an,Qr,_n,Pn,ri,Ei,zn={point:gi,lineStart:Ha,lineEnd:Na,polygonStart:la,polygonEnd:Vi};function gi(mi,eo){Le(mi,eo)&&Zt.point(mi,eo)}function Ti(){for(var mi=0,eo=0,Lo=xr.length;eo<Lo;++eo)for(var po=xr[eo],Wi=1,Oo=po.length,as=po[0],pu,gu,Sl=as[0],ul=as[1];Wi<Oo;++Wi)pu=Sl,gu=ul,as=po[Wi],Sl=as[0],ul=as[1],gu<=At?ul>At&&(Sl-pu)*(At-gu)>(ul-gu)*(Xe-pu)&&++mi:ul<=At&&(Sl-pu)*(At-gu)<(ul-gu)*(Xe-pu)&&--mi;return mi}function la(){Zt=cr,Jt=[],xr=[],Ei=!0}function Vi(){var mi=Ti(),eo=Ei&&mi,Lo=(Jt=g.merge(Jt)).length;(eo||Lo)&&(Dt.polygonStart(),eo&&(Dt.lineStart(),Ne(null,null,1,Dt),Dt.lineEnd()),Lo&&Ao(Jt,tt,mi,Ne,Dt),Dt.polygonEnd()),Zt=Dt,Jt=xr=yr=null}function Ha(){zn.point=Wa,xr&&xr.push(yr=[]),ri=!0,Pn=!1,Qr=_n=NaN}function Na(){Jt&&(Wa(rn,Kr),an&&Pn&&cr.rejoin(),Jt.push(cr.result())),zn.point=gi,Pn&&Zt.lineEnd()}function Wa(mi,eo){var Lo=Le(mi,eo);if(xr&&yr.push([mi,eo]),ri)rn=mi,Kr=eo,an=Lo,ri=!1,Lo&&(Zt.lineStart(),Zt.point(mi,eo));else if(Lo&&Pn)Zt.point(mi,eo);else{var po=[Qr=Math.max(Gr,Math.min(fr,Qr)),_n=Math.max(Gr,Math.min(fr,_n))],Wi=[mi=Math.max(Gr,Math.min(fr,mi)),eo=Math.max(Gr,Math.min(fr,eo))];St(po,Wi,Xe,et,Ct,At)?(Pn||(Zt.lineStart(),Zt.point(po[0],po[1])),Zt.point(Wi[0],Wi[1]),Lo||Zt.lineEnd(),Ei=!1):Lo&&(Zt.lineStart(),Zt.point(mi,eo),Ei=!1)}Qr=mi,_n=eo,Pn=Lo}return zn}}function un(){var Xe=0,et=0,Ct=960,At=500,Le,Ne,nt;return nt={stream:function(dt){return Le&&Ne===dt?Le:Le=hn(Xe,et,Ct,At)(Ne=dt)},extent:function(dt){return arguments.length?(Xe=+dt[0][0],et=+dt[0][1],Ct=+dt[1][0],At=+dt[1][1],Le=Ne=null,nt):[[Xe,et],[Ct,At]]}}}var Qn,Ai,bi,na,Oa={sphere:H,point:H,lineStart:fo,lineEnd:H,polygonStart:H,polygonEnd:H};function fo(){Oa.point=Uo,Oa.lineEnd=uo}function uo(){Oa.point=Oa.lineEnd=H}function Uo(Xe,et){Xe*=s,et*=s,Ai=Xe,bi=O(et),na=b(et),Oa.point=lo}function lo(Xe,et){Xe*=s,et*=s;var Ct=O(et),At=b(et),Le=f(Xe-Ai),Ne=b(Le),nt=O(Le),tt=At*nt,dt=na*Ct-bi*At*Ne,Dt=bi*Ct+na*At*Ne;Qn.add(d(S(tt*tt+dt*dt),Dt)),Ai=Xe,bi=Ct,na=At}function go(Xe){return Qn=new g.Adder,de(Xe,Oa),+Qn}var Ho=[null,null],Qo={type:"LineString",coordinates:Ho};function Go(Xe,et){return Ho[0]=Xe,Ho[1]=et,go(Qo)}var _s={Feature:function(et,Ct){return Ks(et.geometry,Ct)},FeatureCollection:function(et,Ct){for(var At=et.features,Le=-1,Ne=At.length;++Le<Ne;)if(Ks(At[Le].geometry,Ct))return!0;return!1}},bs={Sphere:function(){return!0},Point:function(et,Ct){return Yo(et.coordinates,Ct)},MultiPoint:function(et,Ct){for(var At=et.coordinates,Le=-1,Ne=At.length;++Le<Ne;)if(Yo(At[Le],Ct))return!0;return!1},LineString:function(et,Ct){return mo(et.coordinates,Ct)},MultiLineString:function(et,Ct){for(var At=et.coordinates,Le=-1,Ne=At.length;++Le<Ne;)if(mo(At[Le],Ct))return!0;return!1},Polygon:function(et,Ct){return Rs(et.coordinates,Ct)},MultiPolygon:function(et,Ct){for(var At=et.coordinates,Le=-1,Ne=At.length;++Le<Ne;)if(Rs(At[Le],Ct))return!0;return!1},GeometryCollection:function(et,Ct){for(var At=et.geometries,Le=-1,Ne=At.length;++Le<Ne;)if(Ks(At[Le],Ct))return!0;return!1}};function Ks(Xe,et){return Xe&&bs.hasOwnProperty(Xe.type)?bs[Xe.type](Xe,et):!1}function Yo(Xe,et){return Go(Xe,et)===0}function mo(Xe,et){for(var Ct,At,Le,Ne=0,nt=Xe.length;Ne<nt;Ne++){if(At=Go(Xe[Ne],et),At===0||Ne>0&&(Le=Go(Xe[Ne],Xe[Ne-1]),Le>0&&Ct<=Le&&At<=Le&&(Ct+At-Le)*(1-Math.pow((Ct-At)/Le,2))<p*Le))return!0;Ct=At}return!1}function Rs(Xe,et){return!!fs(Xe.map(rs),Za(et))}function rs(Xe){return Xe=Xe.map(Za),Xe.pop(),Xe}function Za(Xe){return[Xe[0]*s,Xe[1]*s]}function qa(Xe,et){return(Xe&&_s.hasOwnProperty(Xe.type)?_s[Xe.type]:Ks)(Xe,et)}function Fs(Xe,et,Ct){var At=g.range(Xe,et-v,Ct).concat(et);return function(Le){return At.map(function(Ne){return[Le,Ne]})}}function Ou(Xe,et,Ct){var At=g.range(Xe,et-v,Ct).concat(et);return function(Le){return At.map(function(Ne){return[Ne,Le]})}}function Ws(){var Xe,et,Ct,At,Le,Ne,nt,tt,dt=10,Dt=dt,Zt=90,cr=360,Jt,xr,yr,rn,Kr=2.5;function an(){return{type:"MultiLineString",coordinates:Qr()}}function Qr(){return g.range(_(At/Zt)*Zt,Ct,Zt).map(yr).concat(g.range(_(tt/cr)*cr,nt,cr).map(rn)).concat(g.range(_(et/dt)*dt,Xe,dt).filter(function(_n){return f(_n%Zt)>v}).map(Jt)).concat(g.range(_(Ne/Dt)*Dt,Le,Dt).filter(function(_n){return f(_n%cr)>v}).map(xr))}return an.lines=function(){return Qr().map(function(_n){return{type:"LineString",coordinates:_n}})},an.outline=function(){return{type:"Polygon",coordinates:[yr(At).concat(rn(nt).slice(1),yr(Ct).reverse().slice(1),rn(tt).reverse().slice(1))]}},an.extent=function(_n){return arguments.length?an.extentMajor(_n).extentMinor(_n):an.extentMinor()},an.extentMajor=function(_n){return arguments.length?(At=+_n[0][0],Ct=+_n[1][0],tt=+_n[0][1],nt=+_n[1][1],At>Ct&&(_n=At,At=Ct,Ct=_n),tt>nt&&(_n=tt,tt=nt,nt=_n),an.precision(Kr)):[[At,tt],[Ct,nt]]},an.extentMinor=function(_n){return arguments.length?(et=+_n[0][0],Xe=+_n[1][0],Ne=+_n[0][1],Le=+_n[1][1],et>Xe&&(_n=et,et=Xe,Xe=_n),Ne>Le&&(_n=Ne,Ne=Le,Le=_n),an.precision(Kr)):[[et,Ne],[Xe,Le]]},an.step=function(_n){return arguments.length?an.stepMajor(_n).stepMinor(_n):an.stepMinor()},an.stepMajor=function(_n){return arguments.length?(Zt=+_n[0],cr=+_n[1],an):[Zt,cr]},an.stepMinor=function(_n){return arguments.length?(dt=+_n[0],Dt=+_n[1],an):[dt,Dt]},an.precision=function(_n){return arguments.length?(Kr=+_n,Jt=Fs(Ne,Le,90),xr=Ou(et,Xe,Kr),yr=Fs(tt,nt,90),rn=Ou(At,Ct,Kr),an):Kr},an.extentMajor([[-180,-90+v],[180,90-v]]).extentMinor([[-180,-80-v],[180,80+v]])}function nl(){return Ws()()}function Bu(Xe,et){var Ct=Xe[0]*s,At=Xe[1]*s,Le=et[0]*s,Ne=et[1]*s,nt=b(At),tt=O(At),dt=b(Ne),Dt=O(Ne),Zt=nt*b(Ct),cr=nt*O(Ct),Jt=dt*b(Le),xr=dt*O(Le),yr=2*N(S(W(Ne-At)+nt*dt*W(Le-Ct))),rn=O(yr),Kr=yr?function(an){var Qr=O(an*=yr)/rn,_n=O(yr-an)/rn,Pn=_n*Zt+Qr*Jt,ri=_n*cr+Qr*xr,Ei=_n*tt+Qr*Dt;return[d(ri,Pn)*n,d(Ei,S(Pn*Pn+ri*ri))*n]}:function(){return[Ct*n,At*n]};return Kr.distance=yr,Kr}var su=function(et){return et},zu=new g.Adder,uu=new g.Adder,hu,Qu,qo,du,ns={point:H,lineStart:H,lineEnd:H,polygonStart:function(){ns.lineStart=ru,ns.lineEnd=Ns},polygonEnd:function(){ns.lineStart=ns.lineEnd=ns.point=H,zu.add(f(uu)),uu=new g.Adder},result:function(){var et=zu/2;return zu=new g.Adder,et}};function ru(){ns.point=_u}function _u(Xe,et){ns.point=Hs,hu=qo=Xe,Qu=du=et}function Hs(Xe,et){uu.add(du*Xe-qo*et),qo=Xe,du=et}function Ns(){Hs(hu,Qu)}var Js=Infinity,Fu=Js,vu=-Js,Vu=vu,Nu={point:To,lineStart:H,lineEnd:H,polygonStart:H,polygonEnd:H,result:function(){var et=[[Js,Fu],[vu,Vu]];return vu=Vu=-(Fu=Js=Infinity),et}};function To(Xe,et){Xe<Js&&(Js=Xe),Xe>vu&&(vu=Xe),et<Fu&&(Fu=et),et>Vu&&(Vu=et)}var Wu=0,Hu=0,Ru=0,$o=0,dl=0,Gu=0,os=0,Us=0,hs=0,xs,il,Tu,Is,lu={point:bu,lineStart:nu,lineEnd:jt,polygonStart:function(){lu.lineStart=Vt,lu.lineEnd=gt},polygonEnd:function(){lu.point=bu,lu.lineStart=nu,lu.lineEnd=jt},result:function(){var et=hs?[os/hs,Us/hs]:Gu?[$o/Gu,dl/Gu]:Ru?[Wu/Ru,Hu/Ru]:[NaN,NaN];return Wu=Hu=Ru=$o=dl=Gu=os=Us=hs=0,et}};function bu(Xe,et){Wu+=Xe,Hu+=et,++Ru}function nu(){lu.point=Be}function Be(Xe,et){lu.point=Fr,bu(Tu=Xe,Is=et)}function Fr(Xe,et){var Ct=Xe-Tu,At=et-Is,Le=S(Ct*Ct+At*At);$o+=Le*(Tu+Xe)/2,dl+=Le*(Is+et)/2,Gu+=Le,bu(Tu=Xe,Is=et)}function jt(){lu.point=bu}function Vt(){lu.point=ar}function gt(){gr(xs,il)}function ar(Xe,et){lu.point=gr,bu(xs=Tu=Xe,il=Is=et)}function gr(Xe,et){var Ct=Xe-Tu,At=et-Is,Le=S(Ct*Ct+At*At);$o+=Le*(Tu+Xe)/2,dl+=Le*(Is+et)/2,Gu+=Le,Le=Is*Xe-Tu*et,os+=Le*(Tu+Xe),Us+=Le*(Is+et),hs+=Le*3,bu(Tu=Xe,Is=et)}function en(Xe){this._context=Xe}en.prototype={_radius:4.5,pointRadius:function(et){return this._radius=et,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(et,Ct){switch(this._point){case 0:{this._context.moveTo(et,Ct),this._point=1;break}case 1:{this._context.lineTo(et,Ct);break}default:{this._context.moveTo(et+this._radius,Ct),this._context.arc(et,Ct,this._radius,0,r);break}}},result:H};var Vr=new g.Adder,on,Dn,di,xi,ji,ia={point:H,lineStart:function(){ia.point=ca},lineEnd:function(){on&&ea(Dn,di),ia.point=H},polygonStart:function(){on=!0},polygonEnd:function(){on=null},result:function(){var et=+Vr;return Vr=new g.Adder,et}};function ca(Xe,et){ia.point=ea,Dn=xi=Xe,di=ji=et}function ea(Xe,et){xi-=Xe,ji-=et,Vr.add(S(xi*xi+ji*ji)),xi=Xe,ji=et}function ma(){this._string=[]}ma.prototype={_radius:4.5,_circle:Ia(4.5),pointRadius:function(et){return(et=+et)!==this._radius&&(this._radius=et,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(et,Ct){switch(this._point){case 0:{this._string.push("M",et,",",Ct),this._point=1;break}case 1:{this._string.push("L",et,",",Ct);break}default:{this._circle==null&&(this._circle=Ia(this._radius)),this._string.push("M",et,",",Ct,this._circle);break}}},result:function(){if(this._string.length){var et=this._string.join("");return this._string=[],et}else return null}};function Ia(Xe){return"m0,"+Xe+"a"+Xe+","+Xe+" 0 1,1 0,"+-2*Xe+"a"+Xe+","+Xe+" 0 1,1 0,"+2*Xe+"z"}function Fa(Xe,et){var Ct=4.5,At,Le;function Ne(nt){return nt&&(typeof Ct=="function"&&Le.pointRadius(+Ct.apply(this,arguments)),de(nt,At(Le))),Le.result()}return Ne.area=function(nt){return de(nt,At(ns)),ns.result()},Ne.measure=function(nt){return de(nt,At(ia)),ia.result()},Ne.bounds=function(nt){return de(nt,At(Nu)),Nu.result()},Ne.centroid=function(nt){return de(nt,At(lu)),lu.result()},Ne.projection=function(nt){return arguments.length?(At=nt==null?(Xe=null,su):(Xe=nt).stream,Ne):Xe},Ne.context=function(nt){return arguments.length?(Le=nt==null?(et=null,new ma):new en(et=nt),typeof Ct!="function"&&Le.pointRadius(Ct),Ne):et},Ne.pointRadius=function(nt){return arguments.length?(Ct=typeof nt=="function"?nt:(Le.pointRadius(+nt),+nt),Ne):Ct},Ne.projection(Xe).context(et)}function Io(Xe){return{stream:ho(Xe)}}function ho(Xe){return function(et){var Ct=new Ba;for(var At in Xe)Ct[At]=Xe[At];return Ct.stream=et,Ct}}function Ba(){}Ba.prototype={constructor:Ba,point:function(et,Ct){this.stream.point(et,Ct)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Mo(Xe,et,Ct){var At=Xe.clipExtent&&Xe.clipExtent();return Xe.scale(150).translate([0,0]),At!=null&&Xe.clipExtent(null),de(Ct,Xe.stream(Nu)),et(Nu.result()),At!=null&&Xe.clipExtent(At),Xe}function _o(Xe,et,Ct){return Mo(Xe,function(At){var Le=et[1][0]-et[0][0],Ne=et[1][1]-et[0][1],nt=Math.min(Le/(At[1][0]-At[0][0]),Ne/(At[1][1]-At[0][1])),tt=+et[0][0]+(Le-nt*(At[1][0]+At[0][0]))/2,dt=+et[0][1]+(Ne-nt*(At[1][1]+At[0][1]))/2;Xe.scale(150*nt).translate([tt,dt])},Ct)}function Da(Xe,et,Ct){return _o(Xe,[[0,0],et],Ct)}function ss(Xe,et,Ct){return Mo(Xe,function(At){var Le=+et,Ne=Le/(At[1][0]-At[0][0]),nt=(Le-Ne*(At[1][0]+At[0][0]))/2,tt=-Ne*At[0][1];Xe.scale(150*Ne).translate([nt,tt])},Ct)}function ko(Xe,et,Ct){return Mo(Xe,function(At){var Le=+et,Ne=Le/(At[1][1]-At[0][1]),nt=-Ne*At[0][0],tt=(Le-Ne*(At[1][1]+At[0][1]))/2;Xe.scale(150*Ne).translate([nt,tt])},Ct)}var bo=16,Zo=b(30*s);function As(Xe,et){return+et?Mu(Xe,et):us(Xe)}function us(Xe){return ho({point:function(Ct,At){Ct=Xe(Ct,At),this.stream.point(Ct[0],Ct[1])}})}function Mu(Xe,et){function Ct(At,Le,Ne,nt,tt,dt,Dt,Zt,cr,Jt,xr,yr,rn,Kr){var an=Dt-At,Qr=Zt-Le,_n=an*an+Qr*Qr;if(_n>4*et&&rn--){var Pn=nt+Jt,ri=tt+xr,Ei=dt+yr,zn=S(Pn*Pn+ri*ri+Ei*Ei),gi=N(Ei/=zn),Ti=f(f(Ei)-1)<v||f(Ne-cr)<v?(Ne+cr)/2:d(ri,Pn),la=Xe(Ti,gi),Vi=la[0],Ha=la[1],Na=Vi-At,Wa=Ha-Le,mi=Qr*Na-an*Wa;(mi*mi/_n>et||f((an*Na+Qr*Wa)/_n-.5)>.3||nt*Jt+tt*xr+dt*yr<Zo)&&(Ct(At,Le,Ne,nt,tt,dt,Vi,Ha,Ti,Pn/=zn,ri/=zn,Ei,rn,Kr),Kr.point(Vi,Ha),Ct(Vi,Ha,Ti,Pn,ri,Ei,Dt,Zt,cr,Jt,xr,yr,rn,Kr))}}return function(At){var Le,Ne,nt,tt,dt,Dt,Zt,cr,Jt,xr,yr,rn,Kr={point:an,lineStart:Qr,lineEnd:Pn,polygonStart:function(){At.polygonStart(),Kr.lineStart=ri},polygonEnd:function(){At.polygonEnd(),Kr.lineStart=Qr}};function an(gi,Ti){gi=Xe(gi,Ti),At.point(gi[0],gi[1])}function Qr(){cr=NaN,Kr.point=_n,At.lineStart()}function _n(gi,Ti){var la=le([gi,Ti]),Vi=Xe(gi,Ti);Ct(cr,Jt,Zt,xr,yr,rn,cr=Vi[0],Jt=Vi[1],Zt=gi,xr=la[0],yr=la[1],rn=la[2],bo,At),At.point(cr,Jt)}function Pn(){Kr.point=an,At.lineEnd()}function ri(){Qr(),Kr.point=Ei,Kr.lineEnd=zn}function Ei(gi,Ti){_n(Le=gi,Ti),Ne=cr,nt=Jt,tt=xr,dt=yr,Dt=rn,Kr.point=_n}function zn(){Ct(cr,Jt,Zt,xr,yr,rn,Ne,nt,Le,tt,dt,Dt,bo,At),Kr.lineEnd=Pn,Pn()}return Kr}}var Qs=ho({point:function(et,Ct){this.stream.point(et*s,Ct*s)}});function Ls(Xe){return ho({point:function(Ct,At){var Le=Xe(Ct,At);return this.stream.point(Le[0],Le[1])}})}function Es(Xe,et,Ct,At,Le){function Ne(nt,tt){return nt*=At,tt*=Le,[et+Xe*nt,Ct-Xe*tt]}return Ne.invert=function(nt,tt){return[(nt-et)/Xe*At,(Ct-tt)/Xe*Le]},Ne}function al(Xe,et,Ct,At,Le,Ne){if(!Ne)return Es(Xe,et,Ct,At,Le);var nt=b(Ne),tt=O(Ne),dt=nt*Xe,Dt=tt*Xe,Zt=nt/Xe,cr=tt/Xe,Jt=(tt*Ct-nt*et)/Xe,xr=(tt*et+nt*Ct)/Xe;function yr(rn,Kr){return rn*=At,Kr*=Le,[dt*rn-Dt*Kr+et,Ct-Dt*rn-dt*Kr]}return yr.invert=function(rn,Kr){return[At*(Zt*rn-cr*Kr+Jt),Le*(xr-cr*rn-Zt*Kr)]},yr}function cu(Xe){return zo(function(){return Xe})()}function zo(Xe){var et,Ct=150,At=480,Le=250,Ne=0,nt=0,tt=0,dt=0,Dt=0,Zt,cr=0,Jt=1,xr=1,yr=null,rn=Zs,Kr=null,an,Qr,_n,Pn=su,ri=.5,Ei,zn,gi,Ti,la;function Vi(mi){return gi(mi[0]*s,mi[1]*s)}function Ha(mi){return mi=gi.invert(mi[0],mi[1]),mi&&[mi[0]*n,mi[1]*n]}Vi.stream=function(mi){return Ti&&la===mi?Ti:Ti=Qs(Ls(Zt)(rn(Ei(Pn(la=mi)))))},Vi.preclip=function(mi){return arguments.length?(rn=mi,yr=void 0,Wa()):rn},Vi.postclip=function(mi){return arguments.length?(Pn=mi,Kr=an=Qr=_n=null,Wa()):Pn},Vi.clipAngle=function(mi){return arguments.length?(rn=+mi?Ye(yr=mi*s):(yr=null,Zs),Wa()):yr*n},Vi.clipExtent=function(mi){return arguments.length?(Pn=mi==null?(Kr=an=Qr=_n=null,su):hn(Kr=+mi[0][0],an=+mi[0][1],Qr=+mi[1][0],_n=+mi[1][1]),Wa()):Kr==null?null:[[Kr,an],[Qr,_n]]},Vi.scale=function(mi){return arguments.length?(Ct=+mi,Na()):Ct},Vi.translate=function(mi){return arguments.length?(At=+mi[0],Le=+mi[1],Na()):[At,Le]},Vi.center=function(mi){return arguments.length?(Ne=mi[0]%360*s,nt=mi[1]%360*s,Na()):[Ne*n,nt*n]},Vi.rotate=function(mi){return arguments.length?(tt=mi[0]%360*s,dt=mi[1]%360*s,Dt=mi.length>2?mi[2]%360*s:0,Na()):[tt*n,dt*n,Dt*n]},Vi.angle=function(mi){return arguments.length?(cr=mi%360*s,Na()):cr*n},Vi.reflectX=function(mi){return arguments.length?(Jt=mi?-1:1,Na()):Jt<0},Vi.reflectY=function(mi){return arguments.length?(xr=mi?-1:1,Na()):xr<0},Vi.precision=function(mi){return arguments.length?(Ei=As(zn,ri=mi*mi),Wa()):S(ri)},Vi.fitExtent=function(mi,eo){return _o(Vi,mi,eo)},Vi.fitSize=function(mi,eo){return Da(Vi,mi,eo)},Vi.fitWidth=function(mi,eo){return ss(Vi,mi,eo)},Vi.fitHeight=function(mi,eo){return ko(Vi,mi,eo)};function Na(){var mi=al(Ct,0,0,Jt,xr,cr).apply(null,et(Ne,nt)),eo=al(Ct,At-mi[0],Le-mi[1],Jt,xr,cr);return Zt=En(tt,dt,Dt),zn=Rr(et,eo),gi=Rr(Zt,zn),Ei=As(zn,ri),Wa()}function Wa(){return Ti=la=null,Vi}return function(){return et=Xe.apply(this,arguments),Vi.invert=et.invert&&Ha,Na()}}function qu(Xe){var et=0,Ct=c/3,At=zo(Xe),Le=At(et,Ct);return Le.parallels=function(Ne){return arguments.length?At(et=Ne[0]*s,Ct=Ne[1]*s):[et*n,Ct*n]},Le}function ol(Xe){var et=b(Xe);function Ct(At,Le){return[At*et,O(Le)/et]}return Ct.invert=function(At,Le){return[At/et,N(Le*et)]},Ct}function xu(Xe,et){var Ct=O(Xe),At=(Ct+O(et))/2;if(f(At)<v)return ol(Xe);var Le=1+Ct*(2*At-Ct),Ne=S(Le)/At;function nt(tt,dt){var Dt=S(Le-2*At*O(dt))/At;return[Dt*O(tt*=At),Ne-Dt*b(tt)]}return nt.invert=function(tt,dt){var Dt=Ne-dt,Zt=d(tt,f(Dt))*w(Dt);return Dt*At<0&&(Zt-=c*w(tt)*w(Dt)),[Zt/At,N((Le-(tt*tt+Dt*Dt)*At*At)/(2*At))]},nt}function xo(){return qu(xu).scale(155.424).center([0,33.6442])}function Ko(){return xo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Iu(Xe){var et=Xe.length;return{point:function(At,Le){for(var Ne=-1;++Ne<et;)Xe[Ne].point(At,Le)},sphere:function(){for(var At=-1;++At<et;)Xe[At].sphere()},lineStart:function(){for(var At=-1;++At<et;)Xe[At].lineStart()},lineEnd:function(){for(var At=-1;++At<et;)Xe[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<et;)Xe[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<et;)Xe[At].polygonEnd()}}}function Hl(){var Xe,et,Ct=Ko(),At,Le=xo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ne,nt=xo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),tt,dt,Dt={point:function(xr,yr){dt=[xr,yr]}};function Zt(Jt){var xr=Jt[0],yr=Jt[1];return dt=null,At.point(xr,yr),dt||(Ne.point(xr,yr),dt)||(tt.point(xr,yr),dt)}Zt.invert=function(Jt){var xr=Ct.scale(),yr=Ct.translate(),rn=(Jt[0]-yr[0])/xr,Kr=(Jt[1]-yr[1])/xr;return(Kr>=.12&&Kr<.234&&rn>=-.425&&rn<-.214?Le:Kr>=.166&&Kr<.234&&rn>=-.214&&rn<-.115?nt:Ct).invert(Jt)},Zt.stream=function(Jt){return Xe&&et===Jt?Xe:Xe=Iu([Ct.stream(et=Jt),Le.stream(Jt),nt.stream(Jt)])},Zt.precision=function(Jt){return arguments.length?(Ct.precision(Jt),Le.precision(Jt),nt.precision(Jt),cr()):Ct.precision()},Zt.scale=function(Jt){return arguments.length?(Ct.scale(Jt),Le.scale(Jt*.35),nt.scale(Jt),Zt.translate(Ct.translate())):Ct.scale()},Zt.translate=function(Jt){if(!arguments.length)return Ct.translate();var xr=Ct.scale(),yr=+Jt[0],rn=+Jt[1];return At=Ct.translate(Jt).clipExtent([[yr-.455*xr,rn-.238*xr],[yr+.455*xr,rn+.238*xr]]).stream(Dt),Ne=Le.translate([yr-.307*xr,rn+.201*xr]).clipExtent([[yr-.425*xr+v,rn+.12*xr+v],[yr-.214*xr-v,rn+.234*xr-v]]).stream(Dt),tt=nt.translate([yr-.205*xr,rn+.212*xr]).clipExtent([[yr-.214*xr+v,rn+.166*xr+v],[yr-.115*xr-v,rn+.234*xr-v]]).stream(Dt),cr()},Zt.fitExtent=function(Jt,xr){return _o(Zt,Jt,xr)},Zt.fitSize=function(Jt,xr){return Da(Zt,Jt,xr)},Zt.fitWidth=function(Jt,xr){return ss(Zt,Jt,xr)},Zt.fitHeight=function(Jt,xr){return ko(Zt,Jt,xr)};function cr(){return Xe=et=null,Zt}return Zt.scale(1070)}function xl(Xe){return function(et,Ct){var At=b(et),Le=b(Ct),Ne=Xe(At*Le);return Ne===Infinity?[2,0]:[Ne*Le*O(et),Ne*O(Ct)]}}function yl(Xe){return function(et,Ct){var At=S(et*et+Ct*Ct),Le=Xe(At),Ne=O(Le),nt=b(Le);return[d(et*Ne,At*nt),N(At&&Ct*Ne/At)]}}var Tc=xl(function(Xe){return S(2/(1+Xe))});Tc.invert=yl(function(Xe){return 2*N(Xe/2)});function El(){return cu(Tc).scale(124.75).clipAngle(180-.001)}var _l=xl(function(Xe){return(Xe=j(Xe))&&Xe/O(Xe)});_l.invert=yl(function(Xe){return Xe});function sl(){return cu(_l).scale(79.4188).clipAngle(180-.001)}function ls(Xe,et){return[Xe,P(I((h+et)/2))]}ls.invert=function(Xe,et){return[Xe,2*u(x(et))-h]};function gs(){return ht(ls).scale(961/r)}function ht(Xe){var et=cu(Xe),Ct=et.center,At=et.scale,Le=et.translate,Ne=et.clipExtent,nt=null,tt,dt,Dt;et.scale=function(cr){return arguments.length?(At(cr),Zt()):At()},et.translate=function(cr){return arguments.length?(Le(cr),Zt()):Le()},et.center=function(cr){return arguments.length?(Ct(cr),Zt()):Ct()},et.clipExtent=function(cr){return arguments.length?(cr==null?nt=tt=dt=Dt=null:(nt=+cr[0][0],tt=+cr[0][1],dt=+cr[1][0],Dt=+cr[1][1]),Zt()):nt==null?null:[[nt,tt],[dt,Dt]]};function Zt(){var cr=c*At(),Jt=et(so(et.rotate()).invert([0,0]));return Ne(nt==null?[[Jt[0]-cr,Jt[1]-cr],[Jt[0]+cr,Jt[1]+cr]]:Xe===ls?[[Math.max(Jt[0]-cr,nt),tt],[Math.min(Jt[0]+cr,dt),Dt]]:[[nt,Math.max(Jt[1]-cr,tt)],[dt,Math.min(Jt[1]+cr,Dt)]])}return Zt()}function Ut(Xe){return I((h+Xe)/2)}function Ht(Xe,et){var Ct=b(Xe),At=Xe===et?O(Xe):P(Ct/b(et))/P(Ut(et)/Ut(Xe)),Le=Ct*C(Ut(Xe),At)/At;if(!At)return ls;function Ne(nt,tt){Le>0?tt<-h+v&&(tt=-h+v):tt>h-v&&(tt=h-v);var dt=Le/C(Ut(tt),At);return[dt*O(At*nt),Le-dt*b(At*nt)]}return Ne.invert=function(nt,tt){var dt=Le-tt,Dt=w(At)*S(nt*nt+dt*dt),Zt=d(nt,f(dt))*w(dt);return dt*At<0&&(Zt-=c*w(nt)*w(dt)),[Zt/At,2*u(C(Le/Dt,1/At))-h]},Ne}function Kt(){return qu(Ht).scale(109.5).parallels([30,30])}function pr(Xe,et){return[Xe,et]}pr.invert=pr;function ln(){return cu(pr).scale(152.63)}function Rn(Xe,et){var Ct=b(Xe),At=Xe===et?O(Xe):(Ct-b(et))/(et-Xe),Le=Ct/At+Xe;if(f(At)<v)return pr;function Ne(nt,tt){var dt=Le-tt,Dt=At*nt;return[dt*O(Dt),Le-dt*b(Dt)]}return Ne.invert=function(nt,tt){var dt=Le-tt,Dt=d(nt,f(dt))*w(dt);return dt*At<0&&(Dt-=c*w(nt)*w(dt)),[Dt/At,Le-w(At)*S(nt*nt+dt*dt)]},Ne}function Fn(){return qu(Rn).scale(131.154).center([0,13.9389])}var li=1.340264,qi=-.081106,Wn=893e-6,ga=.003796,ao=S(3)/2,is=12;function vo(Xe,et){var Ct=N(ao*O(et)),At=Ct*Ct,Le=At*At*At;return[Xe*b(Ct)/(ao*(li+3*qi*At+Le*(7*Wn+9*ga*At))),Ct*(li+qi*At+Le*(Wn+ga*At))]}vo.invert=function(Xe,et){for(var Ct=et,At=Ct*Ct,Le=At*At*At,Ne=0,nt,tt,dt;Ne<is&&(tt=Ct*(li+qi*At+Le*(Wn+ga*At))-et,dt=li+3*qi*At+Le*(7*Wn+9*ga*At),Ct-=nt=tt/dt,At=Ct*Ct,Le=At*At*At,!(f(nt)<p));++Ne);return[ao*Xe*(li+3*qi*At+Le*(7*Wn+9*ga*At))/b(Ct),N(O(Ct)/ao)]};function Et(){return cu(vo).scale(177.158)}function bt(Xe,et){var Ct=b(et),At=b(Xe)*Ct;return[Ct*O(Xe)/At,O(et)/At]}bt.invert=yl(u);function mr(){return cu(bt).scale(144.049).clipAngle(60)}function or(){var Xe=1,et=0,Ct=0,At=1,Le=1,Ne=0,nt,tt,dt=null,Dt,Zt,cr,Jt=1,xr=1,yr=ho({point:function(ri,Ei){var zn=_n([ri,Ei]);this.stream.point(zn[0],zn[1])}}),rn=su,Kr,an;function Qr(){return Jt=Xe*At,xr=Xe*Le,Kr=an=null,_n}function _n(Pn){var ri=Pn[0]*Jt,Ei=Pn[1]*xr;if(Ne){var zn=Ei*nt-ri*tt;ri=ri*nt+Ei*tt,Ei=zn}return[ri+et,Ei+Ct]}return _n.invert=function(Pn){var ri=Pn[0]-et,Ei=Pn[1]-Ct;if(Ne){var zn=Ei*nt+ri*tt;ri=ri*nt-Ei*tt,Ei=zn}return[ri/Jt,Ei/xr]},_n.stream=function(Pn){return Kr&&an===Pn?Kr:Kr=yr(rn(an=Pn))},_n.postclip=function(Pn){return arguments.length?(rn=Pn,dt=Dt=Zt=cr=null,Qr()):rn},_n.clipExtent=function(Pn){return arguments.length?(rn=Pn==null?(dt=Dt=Zt=cr=null,su):hn(dt=+Pn[0][0],Dt=+Pn[0][1],Zt=+Pn[1][0],cr=+Pn[1][1]),Qr()):dt==null?null:[[dt,Dt],[Zt,cr]]},_n.scale=function(Pn){return arguments.length?(Xe=+Pn,Qr()):Xe},_n.translate=function(Pn){return arguments.length?(et=+Pn[0],Ct=+Pn[1],Qr()):[et,Ct]},_n.angle=function(Pn){return arguments.length?(Ne=Pn%360*s,tt=O(Ne),nt=b(Ne),Qr()):Ne*n},_n.reflectX=function(Pn){return arguments.length?(At=Pn?-1:1,Qr()):At<0},_n.reflectY=function(Pn){return arguments.length?(Le=Pn?-1:1,Qr()):Le<0},_n.fitExtent=function(Pn,ri){return _o(_n,Pn,ri)},_n.fitSize=function(Pn,ri){return Da(_n,Pn,ri)},_n.fitWidth=function(Pn,ri){return ss(_n,Pn,ri)},_n.fitHeight=function(Pn,ri){return ko(_n,Pn,ri)},_n}function Ir(Xe,et){var Ct=et*et,At=Ct*Ct;return[Xe*(.8707-.131979*Ct+At*(-.013791+At*(.003971*Ct-.001529*At))),et*(1.007226+Ct*(.015085+At*(-.044475+.028874*Ct-.005916*At)))]}Ir.invert=function(Xe,et){var Ct=et,At=25,Le;do{var Ne=Ct*Ct,nt=Ne*Ne;Ct-=Le=(Ct*(1.007226+Ne*(.015085+nt*(-.044475+.028874*Ne-.005916*nt)))-et)/(1.007226+Ne*(.015085*3+nt*(-.044475*7+.028874*9*Ne-.005916*11*nt)))}while(f(Le)>v&&--At>0);return[Xe/(.8707+(Ne=Ct*Ct)*(-.131979+Ne*(-.013791+Ne*Ne*Ne*(.003971-.001529*Ne)))),Ct]};function yn(){return cu(Ir).scale(175.295)}function jn(Xe,et){return[b(et)*O(Xe),O(et)]}jn.invert=yl(N);function qn(){return cu(jn).scale(249.5).clipAngle(90+v)}function ui(Xe,et){var Ct=b(et),At=1+b(Xe)*Ct;return[Ct*O(Xe)/At,O(et)/At]}ui.invert=yl(function(Xe){return 2*u(Xe)});function kn(){return cu(ui).scale(250).clipAngle(142)}function oi(Xe,et){return[P(I((h+et)/2)),-Xe]}oi.invert=function(Xe,et){return[-et,2*u(x(Xe))-h]};function bn(){var Xe=ht(oi),et=Xe.center,Ct=Xe.rotate;return Xe.center=function(At){return arguments.length?et([-At[1],At[0]]):(At=et(),[At[1],-At[0]])},Xe.rotate=function(At){return arguments.length?Ct([At[0],At[1],At.length>2?At[2]+90:90]):(At=Ct(),[At[0],At[1],At[2]-90])},Ct([0,0,90]).scale(159.155)}e.geoAlbers=Ko,e.geoAlbersUsa=Hl,e.geoArea=pe,e.geoAzimuthalEqualArea=El,e.geoAzimuthalEqualAreaRaw=Tc,e.geoAzimuthalEquidistant=sl,e.geoAzimuthalEquidistantRaw=_l,e.geoBounds=zr,e.geoCentroid=fn,e.geoCircle=So,e.geoClipAntimeridian=Zs,e.geoClipCircle=Ye,e.geoClipExtent=un,e.geoClipRectangle=hn,e.geoConicConformal=Kt,e.geoConicConformalRaw=Ht,e.geoConicEqualArea=xo,e.geoConicEqualAreaRaw=xu,e.geoConicEquidistant=Fn,e.geoConicEquidistantRaw=Rn,e.geoContains=qa,e.geoDistance=Go,e.geoEqualEarth=Et,e.geoEqualEarthRaw=vo,e.geoEquirectangular=ln,e.geoEquirectangularRaw=pr,e.geoGnomonic=mr,e.geoGnomonicRaw=bt,e.geoGraticule=Ws,e.geoGraticule10=nl,e.geoIdentity=or,e.geoInterpolate=Bu,e.geoLength=go,e.geoMercator=gs,e.geoMercatorRaw=ls,e.geoNaturalEarth1=yn,e.geoNaturalEarth1Raw=Ir,e.geoOrthographic=qn,e.geoOrthographicRaw=jn,e.geoPath=Fa,e.geoProjection=cu,e.geoProjectionMutator=zo,e.geoRotation=so,e.geoStereographic=kn,e.geoStereographicRaw=ui,e.geoStream=de,e.geoTransform=Io,e.geoTransverseMercator=bn,e.geoTransverseMercatorRaw=oi,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js":function(B,L,o){(function(e,g){g(L,o("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(e,g){"use strict";function v(f,u,d){var b=f.layout,_=[],x=0;Object.keys(f.hexes).forEach(function(W){f.hexes[W].key=W,_.push(f.hexes[W])});var M=g.max(_,function(W){return+W.q}),P=g.min(_,function(W){return+W.q}),C=g.max(_,function(W){return+W.r}),O=g.min(_,function(W){return+W.r}),w=M-P+1,S=C-O+1;b==="odd-r"||b==="even-r"?x=g.min([u/((w+.5)*Math.sqrt(3)),d/((S+1/3)*1.5)]):x=g.min([d/((S+.5)*Math.sqrt(3)),u/((w+1/3)*1.5)]);var I=x*Math.sqrt(3),j=h(b,I,x),N=i(j);return _.forEach(function(W){W.qc=W.q-P,W.rc=C-W.r,W.x=p(W,b,I,x),W.y=c(W,b,I,x),W.vertices=j,W.points=N}),_}function p(f,u,d,b){var _=0,x=0;switch(u){case"odd-r":x=f.rc%2==1?d:d/2,_=f.qc*d+x;break;case"even-r":x=f.rc%2==0?d:d/2,_=f.qc*d+x;break;case"odd-q":case"even-q":_=f.qc*b*1.5+b;break}return _}function c(f,u,d,b){var _=0,x=0;switch(u){case"odd-r":case"even-r":_=f.rc*b*1.5+b;break;case"odd-q":x=f.qc%2==1?d:d/2,_=f.rc*d+x;break;case"even-q":x=f.qc%2==0?d:d/2,_=f.rc*d+x;break}return _}function h(f,u,d){var b=[];switch(f){case"odd-r":case"even-r":b.push({x:0,y:0-d}),b.push({x:0+u*.5,y:0-.5*d}),b.push({x:0+u*.5,y:0+.5*d}),b.push({x:0,y:0+d}),b.push({x:0-u*.5,y:0+.5*d}),b.push({x:0-u*.5,y:0-.5*d});break;case"odd-q":case"even-q":b.push({x:0-d,y:0}),b.push({x:0-.5*d,y:0-u*.5}),b.push({x:0+.5*d,y:0-u*.5}),b.push({x:0+d,y:0}),b.push({x:0+.5*d,y:0+u*.5}),b.push({x:0-.5*d,y:0+u*.5});break}return b}function i(f){var u="";return f.forEach(function(d){u+=d.x+","+d.y+" "}),u.substring(0,u.length-1)}function r(f){var u={};u.layout=f.layout,u.hexes={};var d=[];Object.keys(f.hexes).forEach(function(w){d.push(f.hexes[w])});var b=g.max(d,function(w){return+w.q}),_=g.min(d,function(w){return+w.q}),x=g.max(d,function(w){return+w.r}),M=g.min(d,function(w){return+w.r}),P,C,O;for(P=_;P<=b;P++)for(C=M;C<=x;C++)O="Q"+P+"R"+C,u.hexes[O]={q:P,r:C};return u}function n(f,u,d,b){var _=[],x=f.layout;Object.keys(f.hexes).forEach(function(Re){_.push(f.hexes[Re])});var M=g.max(_,function(Re){return+Re.q}),P=g.min(_,function(Re){return+Re.q}),C=g.max(_,function(Re){return+Re.r}),O=g.min(_,function(Re){return+Re.r}),w=M-P+1,S=C-O+1,I;x==="odd-r"||x==="even-r"?I=g.min([u/((w+.5)*Math.sqrt(3)),d/((S+1/3)*1.5)]):I=g.min([d/((S+.5)*Math.sqrt(3)),u/((w+1/3)*1.5)]);var j=I*Math.sqrt(3),N=[],W=I*I*4,H=_.length;if(H>1){_.forEach(function(Re){Re.qc=Re.q-P,Re.rc=C-Re.r,Re.x=p(Re,x,j,I),Re.y=c(Re,x,j,I)});for(var J=0;J<H-1;J++)for(var Q=J+1;Q<H;Q++){var ne=_[J],K=_[Q];if(ne[b]!==K[b]&&Math.abs(ne.q-K.q)<=1&&Math.abs(ne.r-K.r)<=1&&(ne.x-K.x)*(ne.x-K.x)+(ne.y-K.y)*(ne.y-K.y)<W){var ie={};ie.x=K.x+(ne.x-K.x)/2,ie.y=K.y+(ne.y-K.y)/2;var de={},we=Math.sqrt(3)*4;de.dx=(ne.y-K.y)/we,de.dy=-(ne.x-K.x)/we,N.push({x:ie.x-2*de.dx,y:ie.y-2*de.dy}),N.push({x:ie.x-de.dx,y:ie.y-de.dy}),N.push({x:ie.x,y:ie.y}),N.push({x:ie.x+de.dx,y:ie.y+de.dy}),N.push({x:ie.x+2*de.dx,y:ie.y+2*de.dy})}}}return N}function s(f,u,d,b){var _=[],x=f.layout;Object.keys(f.hexes).forEach(function(_e){_.push(f.hexes[_e])});var M=g.max(_,function(_e){return+_e.q}),P=g.min(_,function(_e){return+_e.q}),C=g.max(_,function(_e){return+_e.r}),O=g.min(_,function(_e){return+_e.r}),w=M-P+1,S=C-O+1,I;x==="odd-r"||x==="even-r"?I=g.min([u/((w+.5)*Math.sqrt(3)),d/((S+1/3)*1.5)]):I=g.min([d/((S+.5)*Math.sqrt(3)),u/((w+1/3)*1.5)]);var j=I*Math.sqrt(3),N=[],W=I*I*4,H=_.length;if(H>1){_.forEach(function(_e){_e.qc=_e.q-P,_e.rc=C-_e.r,_e.x=p(_e,x,j,I),_e.y=c(_e,x,j,I)});for(var J=0;J<H-1;J++)for(var Q=J+1;Q<H;Q++){var ne=_[J],K=_[Q];if(ne[b]!==K[b]&&Math.abs(ne.q-K.q)<=1&&Math.abs(ne.r-K.r)<=1&&(ne.x-K.x)*(ne.x-K.x)+(ne.y-K.y)*(ne.y-K.y)<W){var ie={};ie.x=K.x+(ne.x-K.x)/2,ie.y=K.y+(ne.y-K.y)/2;var de={},we=1;ne[b]<K[b]&&(we=-1);var Re=Math.sqrt(3)*2*we;de.dx=(ne.y-K.y)/Re,de.dy=-(ne.x-K.x)/Re,N.push({x1:ie.x-de.dx,y1:ie.y-de.dy,x2:ie.x+de.dx,y2:ie.y+de.dy})}}}return N}e.renderHexJSON=v,e.getGridForHexJSON=r,e.getBoundaryDotsForHexJSON=n,e.getBoundarySegmentsForHexJSON=s,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";function g(Ke,lt){return Ke.parent===lt.parent?1:2}function v(Ke){return Ke.reduce(p,0)/Ke.length}function p(Ke,lt){return Ke+lt.x}function c(Ke){return 1+Ke.reduce(h,0)}function h(Ke,lt){return Math.max(Ke,lt.y)}function i(Ke){for(var lt;lt=Ke.children;)Ke=lt[0];return Ke}function r(Ke){for(var lt;lt=Ke.children;)Ke=lt[lt.length-1];return Ke}function n(){var Ke=g,lt=1,mt=1,qe=!1;function yt(qt){var Er,Zr=0;qt.eachAfter(function(lr){var An=lr.children;An?(lr.x=v(An),lr.y=c(An)):(lr.x=Er?Zr+=Ke(lr,Er):0,lr.y=0,Er=lr)});var Dr=i(qt),Cr=r(qt),mn=Dr.x-Ke(Dr,Cr)/2,xn=Cr.x+Ke(Cr,Dr)/2;return qt.eachAfter(qe?function(lr){lr.x=(lr.x-qt.x)*lt,lr.y=(qt.y-lr.y)*mt}:function(lr){lr.x=(lr.x-mn)/(xn-mn)*lt,lr.y=(1-(qt.y?lr.y/qt.y:1))*mt})}return yt.separation=function(qt){return arguments.length?(Ke=qt,yt):Ke},yt.size=function(qt){return arguments.length?(qe=!1,lt=+qt[0],mt=+qt[1],yt):qe?null:[lt,mt]},yt.nodeSize=function(qt){return arguments.length?(qe=!0,lt=+qt[0],mt=+qt[1],yt):qe?[lt,mt]:null},yt}function s(Ke){var lt=0,mt=Ke.children,qe=mt&&mt.length;if(!qe)lt=1;else for(;--qe>=0;)lt+=mt[qe].value;Ke.value=lt}function f(){return this.eachAfter(s)}function u(Ke){var lt=this,mt,qe=[lt],yt,qt,Er;do for(mt=qe.reverse(),qe=[];lt=mt.pop();)if(Ke(lt),yt=lt.children,yt)for(qt=0,Er=yt.length;qt<Er;++qt)qe.push(yt[qt]);while(qe.length);return this}function d(Ke){for(var lt=this,mt=[lt],qe,yt;lt=mt.pop();)if(Ke(lt),qe=lt.children,qe)for(yt=qe.length-1;yt>=0;--yt)mt.push(qe[yt]);return this}function b(Ke){for(var lt=this,mt=[lt],qe=[],yt,qt,Er;lt=mt.pop();)if(qe.push(lt),yt=lt.children,yt)for(qt=0,Er=yt.length;qt<Er;++qt)mt.push(yt[qt]);for(;lt=qe.pop();)Ke(lt);return this}function _(Ke){return this.eachAfter(function(lt){for(var mt=+Ke(lt.data)||0,qe=lt.children,yt=qe&&qe.length;--yt>=0;)mt+=qe[yt].value;lt.value=mt})}function x(Ke){return this.eachBefore(function(lt){lt.children&&lt.children.sort(Ke)})}function M(Ke){for(var lt=this,mt=P(lt,Ke),qe=[lt];lt!==mt;)lt=lt.parent,qe.push(lt);for(var yt=qe.length;Ke!==mt;)qe.splice(yt,0,Ke),Ke=Ke.parent;return qe}function P(Ke,lt){if(Ke===lt)return Ke;var mt=Ke.ancestors(),qe=lt.ancestors(),yt=null;for(Ke=mt.pop(),lt=qe.pop();Ke===lt;)yt=Ke,Ke=mt.pop(),lt=qe.pop();return yt}function C(){for(var Ke=this,lt=[Ke];Ke=Ke.parent;)lt.push(Ke);return lt}function O(){var Ke=[];return this.each(function(lt){Ke.push(lt)}),Ke}function w(){var Ke=[];return this.eachBefore(function(lt){lt.children||Ke.push(lt)}),Ke}function S(){var Ke=this,lt=[];return Ke.each(function(mt){mt!==Ke&&lt.push({source:mt.parent,target:mt})}),lt}function I(Ke,lt){var mt=new J(Ke),qe=+Ke.value&&(mt.value=Ke.value),yt,qt=[mt],Er,Zr,Dr,Cr;for(lt==null&&(lt=N);yt=qt.pop();)if(qe&&(yt.value=+yt.data.value),(Zr=lt(yt.data))&&(Cr=Zr.length))for(yt.children=new Array(Cr),Dr=Cr-1;Dr>=0;--Dr)qt.push(Er=yt.children[Dr]=new J(Zr[Dr])),Er.parent=yt,Er.depth=yt.depth+1;return mt.eachBefore(H)}function j(){return I(this).eachBefore(W)}function N(Ke){return Ke.children}function W(Ke){Ke.data=Ke.data.data}function H(Ke){var lt=0;do Ke.height=lt;while((Ke=Ke.parent)&&Ke.height<++lt)}function J(Ke){this.data=Ke,this.depth=this.height=0,this.parent=null}J.prototype=I.prototype={constructor:J,count:f,each:u,eachAfter:b,eachBefore:d,sum:_,sort:x,path:M,ancestors:C,descendants:O,leaves:w,links:S,copy:j};var Q=Array.prototype.slice;function ne(Ke){for(var lt=Ke.length,mt,qe;lt;)qe=Math.random()*lt--|0,mt=Ke[lt],Ke[lt]=Ke[qe],Ke[qe]=mt;return Ke}function K(Ke){for(var lt=0,mt=(Ke=ne(Q.call(Ke))).length,qe=[],yt,qt;lt<mt;)yt=Ke[lt],qt&&we(qt,yt)?++lt:(qt=_e(qe=ie(qe,yt)),lt=0);return qt}function ie(Ke,lt){var mt,qe;if(Re(lt,Ke))return[lt];for(mt=0;mt<Ke.length;++mt)if(de(lt,Ke[mt])&&Re(rt(Ke[mt],lt),Ke))return[Ke[mt],lt];for(mt=0;mt<Ke.length-1;++mt)for(qe=mt+1;qe<Ke.length;++qe)if(de(rt(Ke[mt],Ke[qe]),lt)&&de(rt(Ke[mt],lt),Ke[qe])&&de(rt(Ke[qe],lt),Ke[mt])&&Re(Fe(Ke[mt],Ke[qe],lt),Ke))return[Ke[mt],Ke[qe],lt];throw new Error}function de(Ke,lt){var mt=Ke.r-lt.r,qe=lt.x-Ke.x,yt=lt.y-Ke.y;return mt<0||mt*mt<qe*qe+yt*yt}function we(Ke,lt){var mt=Ke.r-lt.r+1e-6,qe=lt.x-Ke.x,yt=lt.y-Ke.y;return mt>0&&mt*mt>qe*qe+yt*yt}function Re(Ke,lt){for(var mt=0;mt<lt.length;++mt)if(!we(Ke,lt[mt]))return!1;return!0}function _e(Ke){switch(Ke.length){case 1:return Ue(Ke[0]);case 2:return rt(Ke[0],Ke[1]);case 3:return Fe(Ke[0],Ke[1],Ke[2])}}function Ue(Ke){return{x:Ke.x,y:Ke.y,r:Ke.r}}function rt(Ke,lt){var mt=Ke.x,qe=Ke.y,yt=Ke.r,qt=lt.x,Er=lt.y,Zr=lt.r,Dr=qt-mt,Cr=Er-qe,mn=Zr-yt,xn=Math.sqrt(Dr*Dr+Cr*Cr);return{x:(mt+qt+Dr/xn*mn)/2,y:(qe+Er+Cr/xn*mn)/2,r:(xn+yt+Zr)/2}}function Fe(Ke,lt,mt){var qe=Ke.x,yt=Ke.y,qt=Ke.r,Er=lt.x,Zr=lt.y,Dr=lt.r,Cr=mt.x,mn=mt.y,xn=mt.r,lr=qe-Er,An=qe-Cr,On=yt-Zr,Mt=yt-mn,er=Dr-qt,$t=xn-qt,Tr=qe*qe+yt*yt-qt*qt,Mr=Tr-Er*Er-Zr*Zr+Dr*Dr,Hr=Tr-Cr*Cr-mn*mn+xn*xn,wr=An*On-lr*Mt,Ur=(On*Hr-Mt*Mr)/(wr*2)-qe,fn=(Mt*er-On*$t)/wr,tn=(An*Mr-lr*Hr)/(wr*2)-yt,Rr=(lr*$t-An*er)/wr,Nn=fn*fn+Rr*Rr-1,En=2*(qt+Ur*fn+tn*Rr),Yn=Ur*Ur+tn*tn-qt*qt,wi=-(Nn?(En+Math.sqrt(En*En-4*Nn*Yn))/(2*Nn):Yn/En);return{x:qe+Ur+fn*wi,y:yt+tn+Rr*wi,r:wi}}function Se(Ke,lt,mt){var qe=Ke.x-lt.x,yt,qt,Er=Ke.y-lt.y,Zr,Dr,Cr=qe*qe+Er*Er;Cr?(qt=lt.r+mt.r,qt*=qt,Dr=Ke.r+mt.r,Dr*=Dr,qt>Dr?(yt=(Cr+Dr-qt)/(2*Cr),Zr=Math.sqrt(Math.max(0,Dr/Cr-yt*yt)),mt.x=Ke.x-yt*qe-Zr*Er,mt.y=Ke.y-yt*Er+Zr*qe):(yt=(Cr+qt-Dr)/(2*Cr),Zr=Math.sqrt(Math.max(0,qt/Cr-yt*yt)),mt.x=lt.x+yt*qe-Zr*Er,mt.y=lt.y+yt*Er+Zr*qe)):(mt.x=lt.x+mt.r,mt.y=lt.y)}function ye(Ke,lt){var mt=Ke.r+lt.r-1e-6,qe=lt.x-Ke.x,yt=lt.y-Ke.y;return mt>0&&mt*mt>qe*qe+yt*yt}function Oe(Ke){var lt=Ke._,mt=Ke.next._,qe=lt.r+mt.r,yt=(lt.x*mt.r+mt.x*lt.r)/qe,qt=(lt.y*mt.r+mt.y*lt.r)/qe;return yt*yt+qt*qt}function ue(Ke){this._=Ke,this.next=null,this.previous=null}function xe(Ke){if(!(yt=Ke.length))return 0;var lt,mt,qe,yt,qt,Er,Zr,Dr,Cr,mn,xn;if(lt=Ke[0],lt.x=0,lt.y=0,!(yt>1))return lt.r;if(mt=Ke[1],lt.x=-mt.r,mt.x=lt.r,mt.y=0,!(yt>2))return lt.r+mt.r;Se(mt,lt,qe=Ke[2]),lt=new ue(lt),mt=new ue(mt),qe=new ue(qe),lt.next=qe.previous=mt,mt.next=lt.previous=qe,qe.next=mt.previous=lt;e:for(Zr=3;Zr<yt;++Zr){Se(lt._,mt._,qe=Ke[Zr]),qe=new ue(qe),Dr=mt.next,Cr=lt.previous,mn=mt._.r,xn=lt._.r;do if(mn<=xn){if(ye(Dr._,qe._)){mt=Dr,lt.next=mt,mt.previous=lt,--Zr;continue e}mn+=Dr._.r,Dr=Dr.next}else{if(ye(Cr._,qe._)){lt=Cr,lt.next=mt,mt.previous=lt,--Zr;continue e}xn+=Cr._.r,Cr=Cr.previous}while(Dr!==Cr.next);for(qe.previous=lt,qe.next=mt,lt.next=mt.previous=mt=qe,qt=Oe(lt);(qe=qe.next)!==mt;)(Er=Oe(qe))<qt&&(lt=qe,qt=Er);mt=lt.next}for(lt=[mt._],qe=mt;(qe=qe.next)!==mt;)lt.push(qe._);for(qe=K(lt),Zr=0;Zr<yt;++Zr)lt=Ke[Zr],lt.x-=qe.x,lt.y-=qe.y;return qe.r}function Ae(Ke){return xe(Ke),Ke}function pe(Ke){return Ke==null?null:be(Ke)}function be(Ke){if(typeof Ke!="function")throw new Error;return Ke}function le(){return 0}function z(Ke){return function(){return Ke}}function ae(Ke){return Math.sqrt(Ke.value)}function V(){var Ke=null,lt=1,mt=1,qe=le;function yt(qt){return qt.x=lt/2,qt.y=mt/2,Ke?qt.eachBefore(re(Ke)).eachAfter(te(qe,.5)).eachBefore(q(1)):qt.eachBefore(re(ae)).eachAfter(te(le,1)).eachAfter(te(qe,qt.r/Math.min(lt,mt))).eachBefore(q(Math.min(lt,mt)/(2*qt.r))),qt}return yt.radius=function(qt){return arguments.length?(Ke=pe(qt),yt):Ke},yt.size=function(qt){return arguments.length?(lt=+qt[0],mt=+qt[1],yt):[lt,mt]},yt.padding=function(qt){return arguments.length?(qe=typeof qt=="function"?qt:z(+qt),yt):qe},yt}function re(Ke){return function(lt){lt.children||(lt.r=Math.max(0,+Ke(lt)||0))}}function te(Ke,lt){return function(mt){if(qe=mt.children){var qe,yt,qt=qe.length,Er=Ke(mt)*lt||0,Zr;if(Er)for(yt=0;yt<qt;++yt)qe[yt].r+=Er;if(Zr=xe(qe),Er)for(yt=0;yt<qt;++yt)qe[yt].r-=Er;mt.r=Zr+Er}}}function q(Ke){return function(lt){var mt=lt.parent;lt.r*=Ke,mt&&(lt.x=mt.x+Ke*lt.x,lt.y=mt.y+Ke*lt.y)}}function ve(Ke){Ke.x0=Math.round(Ke.x0),Ke.y0=Math.round(Ke.y0),Ke.x1=Math.round(Ke.x1),Ke.y1=Math.round(Ke.y1)}function Me(Ke,lt,mt,qe,yt){for(var qt=Ke.children,Er,Zr=-1,Dr=qt.length,Cr=Ke.value&&(qe-lt)/Ke.value;++Zr<Dr;)Er=qt[Zr],Er.y0=mt,Er.y1=yt,Er.x0=lt,Er.x1=lt+=Er.value*Cr}function De(){var Ke=1,lt=1,mt=0,qe=!1;function yt(Er){var Zr=Er.height+1;return Er.x0=Er.y0=mt,Er.x1=Ke,Er.y1=lt/Zr,Er.eachBefore(qt(lt,Zr)),qe&&Er.eachBefore(ve),Er}function qt(Er,Zr){return function(Dr){Dr.children&&Me(Dr,Dr.x0,Er*(Dr.depth+1)/Zr,Dr.x1,Er*(Dr.depth+2)/Zr);var Cr=Dr.x0,mn=Dr.y0,xn=Dr.x1-mt,lr=Dr.y1-mt;xn<Cr&&(Cr=xn=(Cr+xn)/2),lr<mn&&(mn=lr=(mn+lr)/2),Dr.x0=Cr,Dr.y0=mn,Dr.x1=xn,Dr.y1=lr}}return yt.round=function(Er){return arguments.length?(qe=!!Er,yt):qe},yt.size=function(Er){return arguments.length?(Ke=+Er[0],lt=+Er[1],yt):[Ke,lt]},yt.padding=function(Er){return arguments.length?(mt=+Er,yt):mt},yt}var ze="$",We={depth:-1},He={};function $e(Ke){return Ke.id}function It(Ke){return Ke.parentId}function Yt(){var Ke=$e,lt=It;function mt(qe){var yt,qt,Er=qe.length,Zr,Dr,Cr,mn=new Array(Er),xn,lr,An={};for(qt=0;qt<Er;++qt)yt=qe[qt],Cr=mn[qt]=new J(yt),(xn=Ke(yt,qt,qe))!=null&&(xn+="")&&(lr=ze+(Cr.id=xn),An[lr]=lr in An?He:Cr);for(qt=0;qt<Er;++qt)if(Cr=mn[qt],xn=lt(qe[qt],qt,qe),xn==null||!(xn+="")){if(Zr)throw new Error("multiple roots");Zr=Cr}else{if(Dr=An[ze+xn],!Dr)throw new Error("missing: "+xn);if(Dr===He)throw new Error("ambiguous: "+xn);Dr.children?Dr.children.push(Cr):Dr.children=[Cr],Cr.parent=Dr}if(!Zr)throw new Error("no root");if(Zr.parent=We,Zr.eachBefore(function(On){On.depth=On.parent.depth+1,--Er}).eachBefore(H),Zr.parent=null,Er>0)throw new Error("cycle");return Zr}return mt.id=function(qe){return arguments.length?(Ke=be(qe),mt):Ke},mt.parentId=function(qe){return arguments.length?(lt=be(qe),mt):lt},mt}function rr(Ke,lt){return Ke.parent===lt.parent?1:2}function ir(Ke){var lt=Ke.children;return lt?lt[0]:Ke.t}function Br(Ke){var lt=Ke.children;return lt?lt[lt.length-1]:Ke.t}function tr(Ke,lt,mt){var qe=mt/(lt.i-Ke.i);lt.c-=qe,lt.s+=mt,Ke.c+=qe,lt.z+=mt,lt.m+=mt}function ft(Ke){for(var lt=0,mt=0,qe=Ke.children,yt=qe.length,qt;--yt>=0;)qt=qe[yt],qt.z+=lt,qt.m+=lt,lt+=qt.s+(mt+=qt.c)}function st(Ke,lt,mt){return Ke.a.parent===lt.parent?Ke.a:mt}function Tt(Ke,lt){this._=Ke,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=lt}Tt.prototype=Object.create(J.prototype);function Qe(Ke){for(var lt=new Tt(Ke,0),mt,qe=[lt],yt,qt,Er,Zr;mt=qe.pop();)if(qt=mt._.children)for(mt.children=new Array(Zr=qt.length),Er=Zr-1;Er>=0;--Er)qe.push(yt=mt.children[Er]=new Tt(qt[Er],Er)),yt.parent=mt;return(lt.parent=new Tt(null,0)).children=[lt],lt}function it(){var Ke=rr,lt=1,mt=1,qe=null;function yt(Cr){var mn=Qe(Cr);if(mn.eachAfter(qt),mn.parent.m=-mn.z,mn.eachBefore(Er),qe)Cr.eachBefore(Dr);else{var xn=Cr,lr=Cr,An=Cr;Cr.eachBefore(function(Tr){Tr.x<xn.x&&(xn=Tr),Tr.x>lr.x&&(lr=Tr),Tr.depth>An.depth&&(An=Tr)});var On=xn===lr?1:Ke(xn,lr)/2,Mt=On-xn.x,er=lt/(lr.x+On+Mt),$t=mt/(An.depth||1);Cr.eachBefore(function(Tr){Tr.x=(Tr.x+Mt)*er,Tr.y=Tr.depth*$t})}return Cr}function qt(Cr){var mn=Cr.children,xn=Cr.parent.children,lr=Cr.i?xn[Cr.i-1]:null;if(mn){ft(Cr);var An=(mn[0].z+mn[mn.length-1].z)/2;lr?(Cr.z=lr.z+Ke(Cr._,lr._),Cr.m=Cr.z-An):Cr.z=An}else lr&&(Cr.z=lr.z+Ke(Cr._,lr._));Cr.parent.A=Zr(Cr,lr,Cr.parent.A||xn[0])}function Er(Cr){Cr._.x=Cr.z+Cr.parent.m,Cr.m+=Cr.parent.m}function Zr(Cr,mn,xn){if(mn){for(var lr=Cr,An=Cr,On=mn,Mt=lr.parent.children[0],er=lr.m,$t=An.m,Tr=On.m,Mr=Mt.m,Hr;On=Br(On),lr=ir(lr),On&&lr;)Mt=ir(Mt),An=Br(An),An.a=Cr,Hr=On.z+Tr-lr.z-er+Ke(On._,lr._),Hr>0&&(tr(st(On,Cr,xn),Cr,Hr),er+=Hr,$t+=Hr),Tr+=On.m,er+=lr.m,Mr+=Mt.m,$t+=An.m;On&&!Br(An)&&(An.t=On,An.m+=Tr-$t),lr&&!ir(Mt)&&(Mt.t=lr,Mt.m+=er-Mr,xn=Cr)}return xn}function Dr(Cr){Cr.x*=lt,Cr.y=Cr.depth*mt}return yt.separation=function(Cr){return arguments.length?(Ke=Cr,yt):Ke},yt.size=function(Cr){return arguments.length?(qe=!1,lt=+Cr[0],mt=+Cr[1],yt):qe?null:[lt,mt]},yt.nodeSize=function(Cr){return arguments.length?(qe=!0,lt=+Cr[0],mt=+Cr[1],yt):qe?[lt,mt]:null},yt}function zt(Ke,lt,mt,qe,yt){for(var qt=Ke.children,Er,Zr=-1,Dr=qt.length,Cr=Ke.value&&(yt-mt)/Ke.value;++Zr<Dr;)Er=qt[Zr],Er.x0=lt,Er.x1=qe,Er.y0=mt,Er.y1=mt+=Er.value*Cr}var Qt=(1+Math.sqrt(5))/2;function Ar(Ke,lt,mt,qe,yt,qt){for(var Er=[],Zr=lt.children,Dr,Cr,mn=0,xn=0,lr=Zr.length,An,On,Mt=lt.value,er,$t,Tr,Mr,Hr,wr,Ur;mn<lr;){An=yt-mt,On=qt-qe;do er=Zr[xn++].value;while(!er&&xn<lr);for($t=Tr=er,wr=Math.max(On/An,An/On)/(Mt*Ke),Ur=er*er*wr,Hr=Math.max(Tr/Ur,Ur/$t);xn<lr;++xn){if(er+=Cr=Zr[xn].value,Cr<$t&&($t=Cr),Cr>Tr&&(Tr=Cr),Ur=er*er*wr,Mr=Math.max(Tr/Ur,Ur/$t),Mr>Hr){er-=Cr;break}Hr=Mr}Er.push(Dr={value:er,dice:An<On,children:Zr.slice(mn,xn)}),Dr.dice?Me(Dr,mt,qe,yt,Mt?qe+=On*er/Mt:qt):zt(Dr,mt,qe,Mt?mt+=An*er/Mt:yt,qt),Mt-=er,mn=xn}return Er}var zr=function Ke(lt){function mt(qe,yt,qt,Er,Zr){Ar(lt,qe,yt,qt,Er,Zr)}return mt.ratio=function(qe){return Ke((qe=+qe)>1?qe:1)},mt}(Qt);function ct(){var Ke=zr,lt=!1,mt=1,qe=1,yt=[0],qt=le,Er=le,Zr=le,Dr=le,Cr=le;function mn(lr){return lr.x0=lr.y0=0,lr.x1=mt,lr.y1=qe,lr.eachBefore(xn),yt=[0],lt&&lr.eachBefore(ve),lr}function xn(lr){var An=yt[lr.depth],On=lr.x0+An,Mt=lr.y0+An,er=lr.x1-An,$t=lr.y1-An;er<On&&(On=er=(On+er)/2),$t<Mt&&(Mt=$t=(Mt+$t)/2),lr.x0=On,lr.y0=Mt,lr.x1=er,lr.y1=$t,lr.children&&(An=yt[lr.depth+1]=qt(lr)/2,On+=Cr(lr)-An,Mt+=Er(lr)-An,er-=Zr(lr)-An,$t-=Dr(lr)-An,er<On&&(On=er=(On+er)/2),$t<Mt&&(Mt=$t=(Mt+$t)/2),Ke(lr,On,Mt,er,$t))}return mn.round=function(lr){return arguments.length?(lt=!!lr,mn):lt},mn.size=function(lr){return arguments.length?(mt=+lr[0],qe=+lr[1],mn):[mt,qe]},mn.tile=function(lr){return arguments.length?(Ke=be(lr),mn):Ke},mn.padding=function(lr){return arguments.length?mn.paddingInner(lr).paddingOuter(lr):mn.paddingInner()},mn.paddingInner=function(lr){return arguments.length?(qt=typeof lr=="function"?lr:z(+lr),mn):qt},mn.paddingOuter=function(lr){return arguments.length?mn.paddingTop(lr).paddingRight(lr).paddingBottom(lr).paddingLeft(lr):mn.paddingTop()},mn.paddingTop=function(lr){return arguments.length?(Er=typeof lr=="function"?lr:z(+lr),mn):Er},mn.paddingRight=function(lr){return arguments.length?(Zr=typeof lr=="function"?lr:z(+lr),mn):Zr},mn.paddingBottom=function(lr){return arguments.length?(Dr=typeof lr=="function"?lr:z(+lr),mn):Dr},mn.paddingLeft=function(lr){return arguments.length?(Cr=typeof lr=="function"?lr:z(+lr),mn):Cr},mn}function ot(Ke,lt,mt,qe,yt){var qt=Ke.children,Er,Zr=qt.length,Dr,Cr=new Array(Zr+1);for(Cr[0]=Dr=Er=0;Er<Zr;++Er)Cr[Er+1]=Dr+=qt[Er].value;mn(0,Zr,Ke.value,lt,mt,qe,yt);function mn(xn,lr,An,On,Mt,er,$t){if(xn>=lr-1){var Tr=qt[xn];Tr.x0=On,Tr.y0=Mt,Tr.x1=er,Tr.y1=$t;return}for(var Mr=Cr[xn],Hr=An/2+Mr,wr=xn+1,Ur=lr-1;wr<Ur;){var fn=wr+Ur>>>1;Cr[fn]<Hr?wr=fn+1:Ur=fn}Hr-Cr[wr-1]<Cr[wr]-Hr&&xn+1<wr&&--wr;var tn=Cr[wr]-Mr,Rr=An-tn;if(er-On>$t-Mt){var Nn=(On*Rr+er*tn)/An;mn(xn,wr,tn,On,Mt,Nn,$t),mn(wr,lr,Rr,Nn,Mt,er,$t)}else{var En=(Mt*Rr+$t*tn)/An;mn(xn,wr,tn,On,Mt,er,En),mn(wr,lr,Rr,On,En,er,$t)}}}function xt(Ke,lt,mt,qe,yt){(Ke.depth&1?zt:Me)(Ke,lt,mt,qe,yt)}var Bt=function Ke(lt){function mt(qe,yt,qt,Er,Zr){if((Dr=qe._squarify)&&Dr.ratio===lt)for(var Dr,Cr,mn,xn,lr=-1,An,On=Dr.length,Mt=qe.value;++lr<On;){for(Cr=Dr[lr],mn=Cr.children,xn=Cr.value=0,An=mn.length;xn<An;++xn)Cr.value+=mn[xn].value;Cr.dice?Me(Cr,yt,qt,Er,qt+=(Zr-qt)*Cr.value/Mt):zt(Cr,yt,qt,yt+=(Er-yt)*Cr.value/Mt,Zr),Mt-=Cr.value}else qe._squarify=Dr=Ar(lt,qe,yt,qt,Er,Zr),Dr.ratio=lt}return mt.ratio=function(qe){return Ke((qe=+qe)>1?qe:1)},mt}(Qt);e.cluster=n,e.hierarchy=I,e.pack=V,e.packEnclose=K,e.packSiblings=Ae,e.partition=De,e.stratify=Yt,e.tree=it,e.treemap=ct,e.treemapBinary=ot,e.treemapDice=Me,e.treemapResquarify=Bt,e.treemapSlice=zt,e.treemapSliceDice=xt,e.treemapSquarify=zr,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";var g=Math.PI,v=2*g,p=1e-6,c=v-p;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new h}h.prototype=i.prototype={constructor:h,moveTo:function(n,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+s)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,s){this._+="L"+(this._x1=+n)+","+(this._y1=+s)},quadraticCurveTo:function(n,s,f,u){this._+="Q"+ +n+","+ +s+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(n,s,f,u,d,b){this._+="C"+ +n+","+ +s+","+ +f+","+ +u+","+(this._x1=+d)+","+(this._y1=+b)},arcTo:function(n,s,f,u,d){n=+n,s=+s,f=+f,u=+u,d=+d;var b=this._x1,_=this._y1,x=f-n,M=u-s,P=b-n,C=_-s,O=P*P+C*C;if(d<0)throw new Error("negative radius: "+d);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=s);else if(O>p)if(!(Math.abs(C*x-M*P)>p)||!d)this._+="L"+(this._x1=n)+","+(this._y1=s);else{var w=f-b,S=u-_,I=x*x+M*M,j=w*w+S*S,N=Math.sqrt(I),W=Math.sqrt(O),H=d*Math.tan((g-Math.acos((I+O-j)/(2*N*W)))/2),J=H/W,Q=H/N;Math.abs(J-1)>p&&(this._+="L"+(n+J*P)+","+(s+J*C)),this._+="A"+d+","+d+",0,0,"+ +(C*w>P*S)+","+(this._x1=n+Q*x)+","+(this._y1=s+Q*M)}},arc:function(n,s,f,u,d,b){n=+n,s=+s,f=+f,b=!!b;var _=f*Math.cos(u),x=f*Math.sin(u),M=n+_,P=s+x,C=1^b,O=b?u-d:d-u;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+M+","+P:(Math.abs(this._x1-M)>p||Math.abs(this._y1-P)>p)&&(this._+="L"+M+","+P),!!f&&(O<0&&(O=O%v+v),O>c?this._+="A"+f+","+f+",0,1,"+C+","+(n-_)+","+(s-x)+"A"+f+","+f+",0,1,"+C+","+(this._x1=M)+","+(this._y1=P):O>p&&(this._+="A"+f+","+f+",0,"+ +(O>=g)+","+C+","+(this._x1=n+f*Math.cos(d))+","+(this._y1=s+f*Math.sin(d))))},rect:function(n,s,f,u){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+s)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}},e.path=i,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";var g=Math.PI,v=2*g,p=1e-6,c=v-p;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new h}h.prototype=i.prototype={constructor:h,moveTo:function(n,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+s)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,s){this._+="L"+(this._x1=+n)+","+(this._y1=+s)},quadraticCurveTo:function(n,s,f,u){this._+="Q"+ +n+","+ +s+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(n,s,f,u,d,b){this._+="C"+ +n+","+ +s+","+ +f+","+ +u+","+(this._x1=+d)+","+(this._y1=+b)},arcTo:function(n,s,f,u,d){n=+n,s=+s,f=+f,u=+u,d=+d;var b=this._x1,_=this._y1,x=f-n,M=u-s,P=b-n,C=_-s,O=P*P+C*C;if(d<0)throw new Error("negative radius: "+d);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=s);else if(O>p)if(!(Math.abs(C*x-M*P)>p)||!d)this._+="L"+(this._x1=n)+","+(this._y1=s);else{var w=f-b,S=u-_,I=x*x+M*M,j=w*w+S*S,N=Math.sqrt(I),W=Math.sqrt(O),H=d*Math.tan((g-Math.acos((I+O-j)/(2*N*W)))/2),J=H/W,Q=H/N;Math.abs(J-1)>p&&(this._+="L"+(n+J*P)+","+(s+J*C)),this._+="A"+d+","+d+",0,0,"+ +(C*w>P*S)+","+(this._x1=n+Q*x)+","+(this._y1=s+Q*M)}},arc:function(n,s,f,u,d,b){n=+n,s=+s,f=+f,b=!!b;var _=f*Math.cos(u),x=f*Math.sin(u),M=n+_,P=s+x,C=1^b,O=b?u-d:d-u;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+M+","+P:(Math.abs(this._x1-M)>p||Math.abs(this._y1-P)>p)&&(this._+="L"+M+","+P),!!f&&(O<0&&(O=O%v+v),O>c?this._+="A"+f+","+f+",0,1,"+C+","+(n-_)+","+(s-x)+"A"+f+","+f+",0,1,"+C+","+(this._x1=M)+","+(this._y1=P):O>p&&(this._+="A"+f+","+f+",0,"+ +(O>=g)+","+C+","+(this._x1=n+f*Math.cos(d))+","+(this._y1=s+f*Math.sin(d))))},rect:function(n,s,f,u){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+s)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}},e.path=i,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(B,L,o){var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(g,v){v(L,o("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),o("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),o("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))})(this,function(g,v,p,c){"use strict";function h(j){return j.target.depth}function i(j){return j.depth}function r(j,N){return N-1-j.height}function n(j,N){return j.sourceLinks.length?j.depth:N-1}function s(j){return j.targetLinks.length?j.depth:j.sourceLinks.length?v.min(j.sourceLinks,h)-1:0}function f(j){return function(){return j}}function u(j,N){return b(j.source,N.source)||j.index-N.index}function d(j,N){return b(j.target,N.target)||j.index-N.index}function b(j,N){return j.y0-N.y0}function _(j){return j.value}function x(j){return j.index}function M(j){return j.nodes}function P(j){return j.links}function C(j,N){var W=j.get(N);if(!W)throw new Error("missing: "+N);return W}function O(){var j=0,N=0,W=1,H=1,J=24,Q=8,ne=x,K=n,ie,de=M,we=P,Re=6;function _e(){var Oe={nodes:de.apply(null,arguments),links:we.apply(null,arguments)};return Ue(Oe),rt(Oe),Fe(Oe),Se(Oe),ye(Oe),Oe}_e.update=function(Oe){return ye(Oe),Oe},_e.nodeId=function(Oe){return arguments.length?(ne=typeof Oe=="function"?Oe:f(Oe),_e):ne},_e.nodeAlign=function(Oe){return arguments.length?(K=typeof Oe=="function"?Oe:f(Oe),_e):K},_e.nodeSort=function(Oe){return arguments.length?(ie=Oe,_e):ie},_e.nodeWidth=function(Oe){return arguments.length?(J=+Oe,_e):J},_e.nodePadding=function(Oe){return arguments.length?(Q=+Oe,_e):Q},_e.nodes=function(Oe){return arguments.length?(de=typeof Oe=="function"?Oe:f(Oe),_e):de},_e.links=function(Oe){return arguments.length?(we=typeof Oe=="function"?Oe:f(Oe),_e):we},_e.size=function(Oe){return arguments.length?(j=N=0,W=+Oe[0],H=+Oe[1],_e):[W-j,H-N]},_e.extent=function(Oe){return arguments.length?(j=+Oe[0][0],W=+Oe[1][0],N=+Oe[0][1],H=+Oe[1][1],_e):[[j,N],[W,H]]},_e.iterations=function(Oe){return arguments.length?(Re=+Oe,_e):Re};function Ue(Oe){Oe.nodes.forEach(function(xe,Ae){xe.index=Ae,xe.sourceLinks=[],xe.targetLinks=[]});var ue=p.map(Oe.nodes,ne);Oe.links.forEach(function(xe,Ae){xe.index=Ae;var pe=xe.source,be=xe.target;typeof pe!="object"&&(pe=xe.source=C(ue,pe)),typeof be!="object"&&(be=xe.target=C(ue,be)),pe.sourceLinks.push(xe),be.targetLinks.push(xe)})}function rt(Oe){Oe.nodes.forEach(function(ue){ue.value=Math.max(v.sum(ue.sourceLinks,_),v.sum(ue.targetLinks,_))})}function Fe(Oe){var ue,xe,Ae,pe=Oe.nodes.length;for(ue=Oe.nodes,xe=[],Ae=0;ue.length;++Ae,ue=xe,xe=[]){if(Ae>pe)throw new Error("circular link");ue.forEach(function(le){le.depth=Ae,le.sourceLinks.forEach(function(z){xe.indexOf(z.target)<0&&xe.push(z.target)})})}for(ue=Oe.nodes,xe=[],Ae=0;ue.length;++Ae,ue=xe,xe=[]){if(Ae>pe)throw new Error("circular link");ue.forEach(function(le){le.height=Ae,le.targetLinks.forEach(function(z){xe.indexOf(z.source)<0&&xe.push(z.source)})})}var be=(W-j-J)/(Ae-1);Oe.nodes.forEach(function(le){le.x1=(le.x0=j+Math.max(0,Math.min(Ae-1,Math.floor(K.call(null,le,Ae))))*be)+J})}function Se(Oe){var ue=p.nest().key(function(ae){return ae.x0}).sortKeys(v.ascending).entries(Oe.nodes).map(function(ae){return ae.values});pe(),z();for(var xe=.9,Ae=Re;Ae>0;--Ae,xe*=.9)le(xe),z(),be(xe),z();function pe(){var ae=v.min(ue,function(V){return(H-N-(V.length-1)*Q)/v.sum(V,_)});ue.forEach(function(V){ie!=null&&V.sort(ie),V.forEach(function(re,te){re.y1=(re.y0=te)+re.value*ae})}),Oe.links.forEach(function(V){V.width=V.value*ae})}function be(ae){ue.forEach(function(V){V.forEach(function(re){var te,q,ve,Me,De=re.y0;try{for(var ze=e.__values(re.sourceLinks.sort(d)),We=ze.next();!We.done;We=ze.next()){var He=We.value,$e=He.target,It=He.width,Yt=He.value;if(Yt>0){var rr=0;try{for(var ir=(ve=void 0,e.__values($e.targetLinks)),Br=ir.next();!Br.done;Br=ir.next()){var tr=Br.value,ft=tr.source,st=tr.width;if(ft===re)break;rr+=st+Q/2}}catch(Tt){ve={error:Tt}}finally{try{Br&&!Br.done&&(Me=ir.return)&&Me.call(ir)}finally{if(ve)throw ve.error}}rr=(De-rr-$e.y0)*ae*(Yt/Math.min(re.value,$e.value)),$e.y0+=rr,$e.y1+=rr}De+=It+Q/2}}catch(Tt){te={error:Tt}}finally{try{We&&!We.done&&(q=ze.return)&&q.call(ze)}finally{if(te)throw te.error}}})})}function le(ae){ue.slice().reverse().forEach(function(V){V.forEach(function(re){var te,q,ve,Me,De=re.y0;try{for(var ze=e.__values(re.targetLinks.sort(u)),We=ze.next();!We.done;We=ze.next()){var He=We.value,$e=He.source,It=He.width,Yt=He.value;if(Yt>0){var rr=0;try{for(var ir=(ve=void 0,e.__values($e.sourceLinks)),Br=ir.next();!Br.done;Br=ir.next()){var tr=Br.value,ft=tr.target,st=tr.width;if(ft===re)break;rr+=st+Q/2}}catch(Tt){ve={error:Tt}}finally{try{Br&&!Br.done&&(Me=ir.return)&&Me.call(ir)}finally{if(ve)throw ve.error}}rr=(De-rr-$e.y0)*ae*(Yt/Math.min(re.value,$e.value)),$e.y0+=rr,$e.y1+=rr}De+=It+Q/2}}catch(Tt){te={error:Tt}}finally{try{We&&!We.done&&(q=ze.return)&&q.call(ze)}finally{if(te)throw te.error}}})})}function z(){ue.forEach(function(ae){var V,re,te=N,q=ae.length,ve;for(ie===void 0&&ae.sort(b),ve=0;ve<q;++ve)V=ae[ve],re=te-V.y0,re>0&&(V.y0+=re,V.y1+=re),te=V.y1+Q;if(re=te-Q-H,re>0)for(te=V.y0-=re,V.y1-=re,ve=q-2;ve>=0;--ve)V=ae[ve],re=V.y1+Q-te,re>0&&(V.y0-=re,V.y1-=re),te=V.y0})}}function ye(Oe){Oe.nodes.forEach(function(ue){ue.sourceLinks.sort(d),ue.targetLinks.sort(u)}),Oe.nodes.forEach(function(ue){var xe=ue.y0,Ae=xe;ue.sourceLinks.forEach(function(pe){pe.y0=xe+pe.width/2,xe+=pe.width}),ue.targetLinks.forEach(function(pe){pe.y1=Ae+pe.width/2,Ae+=pe.width})})}return _e}function w(j){return[j.source.x1,j.y0]}function S(j){return[j.target.x0,j.y1]}function I(){return c.linkHorizontal().source(w).target(S)}g.sankey=O,g.sankeyCenter=s,g.sankeyLeft=i,g.sankeyRight=r,g.sankeyJustify=n,g.sankeyLinkHorizontal=I,Object.defineProperty(g,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(B,L,o){(function(e,g){g(L,o("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))})(this,function(e,g){"use strict";function v(Lt){return function(){return Lt}}var p=Math.abs,c=Math.atan2,h=Math.cos,i=Math.max,r=Math.min,n=Math.sin,s=Math.sqrt,f=1e-12,u=Math.PI,d=u/2,b=2*u;function _(Lt){return Lt>1?0:Lt<-1?u:Math.acos(Lt)}function x(Lt){return Lt>=1?d:Lt<=-1?-d:Math.asin(Lt)}function M(Lt){return Lt.innerRadius}function P(Lt){return Lt.outerRadius}function C(Lt){return Lt.startAngle}function O(Lt){return Lt.endAngle}function w(Lt){return Lt&&Lt.padAngle}function S(Lt,at,Ye,St,fr,Gr,hn,un){var Qn=Ye-Lt,Ai=St-at,bi=hn-fr,na=un-Gr,Oa=na*Qn-bi*Ai;if(!(Oa*Oa<f))return Oa=(bi*(at-Gr)-na*(Lt-fr))/Oa,[Lt+Oa*Qn,at+Oa*Ai]}function I(Lt,at,Ye,St,fr,Gr,hn){var un=Lt-Ye,Qn=at-St,Ai=(hn?Gr:-Gr)/s(un*un+Qn*Qn),bi=Ai*Qn,na=-Ai*un,Oa=Lt+bi,fo=at+na,uo=Ye+bi,Uo=St+na,lo=(Oa+uo)/2,go=(fo+Uo)/2,Ho=uo-Oa,Qo=Uo-fo,Go=Ho*Ho+Qo*Qo,_s=fr-Gr,bs=Oa*Uo-uo*fo,Ks=(Qo<0?-1:1)*s(i(0,_s*_s*Go-bs*bs)),Yo=(bs*Qo-Ho*Ks)/Go,mo=(-bs*Ho-Qo*Ks)/Go,Rs=(bs*Qo+Ho*Ks)/Go,rs=(-bs*Ho+Qo*Ks)/Go,Za=Yo-lo,qa=mo-go,Fs=Rs-lo,Ou=rs-go;return Za*Za+qa*qa>Fs*Fs+Ou*Ou&&(Yo=Rs,mo=rs),{cx:Yo,cy:mo,x01:-bi,y01:-na,x11:Yo*(fr/_s-1),y11:mo*(fr/_s-1)}}function j(){var Lt=M,at=P,Ye=v(0),St=null,fr=C,Gr=O,hn=w,un=null;function Qn(){var Ai,bi,na=+Lt.apply(this,arguments),Oa=+at.apply(this,arguments),fo=fr.apply(this,arguments)-d,uo=Gr.apply(this,arguments)-d,Uo=p(uo-fo),lo=uo>fo;if(un||(un=Ai=g.path()),Oa<na&&(bi=Oa,Oa=na,na=bi),!(Oa>f))un.moveTo(0,0);else if(Uo>b-f)un.moveTo(Oa*h(fo),Oa*n(fo)),un.arc(0,0,Oa,fo,uo,!lo),na>f&&(un.moveTo(na*h(uo),na*n(uo)),un.arc(0,0,na,uo,fo,lo));else{var go=fo,Ho=uo,Qo=fo,Go=uo,_s=Uo,bs=Uo,Ks=hn.apply(this,arguments)/2,Yo=Ks>f&&(St?+St.apply(this,arguments):s(na*na+Oa*Oa)),mo=r(p(Oa-na)/2,+Ye.apply(this,arguments)),Rs=mo,rs=mo,Za,qa;if(Yo>f){var Fs=x(Yo/na*n(Ks)),Ou=x(Yo/Oa*n(Ks));(_s-=Fs*2)>f?(Fs*=lo?1:-1,Qo+=Fs,Go-=Fs):(_s=0,Qo=Go=(fo+uo)/2),(bs-=Ou*2)>f?(Ou*=lo?1:-1,go+=Ou,Ho-=Ou):(bs=0,go=Ho=(fo+uo)/2)}var Ws=Oa*h(go),nl=Oa*n(go),Bu=na*h(Go),su=na*n(Go);if(mo>f){var zu=Oa*h(Ho),uu=Oa*n(Ho),hu=na*h(Qo),Qu=na*n(Qo),qo;if(Uo<u&&(qo=S(Ws,nl,hu,Qu,zu,uu,Bu,su))){var du=Ws-qo[0],ns=nl-qo[1],ru=zu-qo[0],_u=uu-qo[1],Hs=1/n(_((du*ru+ns*_u)/(s(du*du+ns*ns)*s(ru*ru+_u*_u)))/2),Ns=s(qo[0]*qo[0]+qo[1]*qo[1]);Rs=r(mo,(na-Ns)/(Hs-1)),rs=r(mo,(Oa-Ns)/(Hs+1))}}bs>f?rs>f?(Za=I(hu,Qu,Ws,nl,Oa,rs,lo),qa=I(zu,uu,Bu,su,Oa,rs,lo),un.moveTo(Za.cx+Za.x01,Za.cy+Za.y01),rs<mo?un.arc(Za.cx,Za.cy,rs,c(Za.y01,Za.x01),c(qa.y01,qa.x01),!lo):(un.arc(Za.cx,Za.cy,rs,c(Za.y01,Za.x01),c(Za.y11,Za.x11),!lo),un.arc(0,0,Oa,c(Za.cy+Za.y11,Za.cx+Za.x11),c(qa.cy+qa.y11,qa.cx+qa.x11),!lo),un.arc(qa.cx,qa.cy,rs,c(qa.y11,qa.x11),c(qa.y01,qa.x01),!lo))):(un.moveTo(Ws,nl),un.arc(0,0,Oa,go,Ho,!lo)):un.moveTo(Ws,nl),!(na>f)||!(_s>f)?un.lineTo(Bu,su):Rs>f?(Za=I(Bu,su,zu,uu,na,-Rs,lo),qa=I(Ws,nl,hu,Qu,na,-Rs,lo),un.lineTo(Za.cx+Za.x01,Za.cy+Za.y01),Rs<mo?un.arc(Za.cx,Za.cy,Rs,c(Za.y01,Za.x01),c(qa.y01,qa.x01),!lo):(un.arc(Za.cx,Za.cy,Rs,c(Za.y01,Za.x01),c(Za.y11,Za.x11),!lo),un.arc(0,0,na,c(Za.cy+Za.y11,Za.cx+Za.x11),c(qa.cy+qa.y11,qa.cx+qa.x11),lo),un.arc(qa.cx,qa.cy,Rs,c(qa.y11,qa.x11),c(qa.y01,qa.x01),!lo))):un.arc(0,0,na,Go,Qo,lo)}if(un.closePath(),Ai)return un=null,Ai+""||null}return Qn.centroid=function(){var Ai=(+Lt.apply(this,arguments)+ +at.apply(this,arguments))/2,bi=(+fr.apply(this,arguments)+ +Gr.apply(this,arguments))/2-u/2;return[h(bi)*Ai,n(bi)*Ai]},Qn.innerRadius=function(Ai){return arguments.length?(Lt=typeof Ai=="function"?Ai:v(+Ai),Qn):Lt},Qn.outerRadius=function(Ai){return arguments.length?(at=typeof Ai=="function"?Ai:v(+Ai),Qn):at},Qn.cornerRadius=function(Ai){return arguments.length?(Ye=typeof Ai=="function"?Ai:v(+Ai),Qn):Ye},Qn.padRadius=function(Ai){return arguments.length?(St=Ai==null?null:typeof Ai=="function"?Ai:v(+Ai),Qn):St},Qn.startAngle=function(Ai){return arguments.length?(fr=typeof Ai=="function"?Ai:v(+Ai),Qn):fr},Qn.endAngle=function(Ai){return arguments.length?(Gr=typeof Ai=="function"?Ai:v(+Ai),Qn):Gr},Qn.padAngle=function(Ai){return arguments.length?(hn=typeof Ai=="function"?Ai:v(+Ai),Qn):hn},Qn.context=function(Ai){return arguments.length?(un=Ai==null?null:Ai,Qn):un},Qn}function N(Lt){this._context=Lt}N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ye):this._context.moveTo(at,Ye);break;case 1:this._point=2;default:this._context.lineTo(at,Ye);break}}};function W(Lt){return new N(Lt)}function H(Lt){return Lt[0]}function J(Lt){return Lt[1]}function Q(){var Lt=H,at=J,Ye=v(!0),St=null,fr=W,Gr=null;function hn(un){var Qn,Ai=un.length,bi,na=!1,Oa;for(St==null&&(Gr=fr(Oa=g.path())),Qn=0;Qn<=Ai;++Qn)!(Qn<Ai&&Ye(bi=un[Qn],Qn,un))===na&&((na=!na)?Gr.lineStart():Gr.lineEnd()),na&&Gr.point(+Lt(bi,Qn,un),+at(bi,Qn,un));if(Oa)return Gr=null,Oa+""||null}return hn.x=function(un){return arguments.length?(Lt=typeof un=="function"?un:v(+un),hn):Lt},hn.y=function(un){return arguments.length?(at=typeof un=="function"?un:v(+un),hn):at},hn.defined=function(un){return arguments.length?(Ye=typeof un=="function"?un:v(!!un),hn):Ye},hn.curve=function(un){return arguments.length?(fr=un,St!=null&&(Gr=fr(St)),hn):fr},hn.context=function(un){return arguments.length?(un==null?St=Gr=null:Gr=fr(St=un),hn):St},hn}function ne(){var Lt=H,at=null,Ye=v(0),St=J,fr=v(!0),Gr=null,hn=W,un=null;function Qn(bi){var na,Oa,fo,uo=bi.length,Uo,lo=!1,go,Ho=new Array(uo),Qo=new Array(uo);for(Gr==null&&(un=hn(go=g.path())),na=0;na<=uo;++na){if(!(na<uo&&fr(Uo=bi[na],na,bi))===lo)if(lo=!lo)Oa=na,un.areaStart(),un.lineStart();else{for(un.lineEnd(),un.lineStart(),fo=na-1;fo>=Oa;--fo)un.point(Ho[fo],Qo[fo]);un.lineEnd(),un.areaEnd()}lo&&(Ho[na]=+Lt(Uo,na,bi),Qo[na]=+Ye(Uo,na,bi),un.point(at?+at(Uo,na,bi):Ho[na],St?+St(Uo,na,bi):Qo[na]))}if(go)return un=null,go+""||null}function Ai(){return Q().defined(fr).curve(hn).context(Gr)}return Qn.x=function(bi){return arguments.length?(Lt=typeof bi=="function"?bi:v(+bi),at=null,Qn):Lt},Qn.x0=function(bi){return arguments.length?(Lt=typeof bi=="function"?bi:v(+bi),Qn):Lt},Qn.x1=function(bi){return arguments.length?(at=bi==null?null:typeof bi=="function"?bi:v(+bi),Qn):at},Qn.y=function(bi){return arguments.length?(Ye=typeof bi=="function"?bi:v(+bi),St=null,Qn):Ye},Qn.y0=function(bi){return arguments.length?(Ye=typeof bi=="function"?bi:v(+bi),Qn):Ye},Qn.y1=function(bi){return arguments.length?(St=bi==null?null:typeof bi=="function"?bi:v(+bi),Qn):St},Qn.lineX0=Qn.lineY0=function(){return Ai().x(Lt).y(Ye)},Qn.lineY1=function(){return Ai().x(Lt).y(St)},Qn.lineX1=function(){return Ai().x(at).y(Ye)},Qn.defined=function(bi){return arguments.length?(fr=typeof bi=="function"?bi:v(!!bi),Qn):fr},Qn.curve=function(bi){return arguments.length?(hn=bi,Gr!=null&&(un=hn(Gr)),Qn):hn},Qn.context=function(bi){return arguments.length?(bi==null?Gr=un=null:un=hn(Gr=bi),Qn):Gr},Qn}function K(Lt,at){return at<Lt?-1:at>Lt?1:at>=Lt?0:NaN}function ie(Lt){return Lt}function de(){var Lt=ie,at=K,Ye=null,St=v(0),fr=v(b),Gr=v(0);function hn(un){var Qn,Ai=un.length,bi,na,Oa=0,fo=new Array(Ai),uo=new Array(Ai),Uo=+St.apply(this,arguments),lo=Math.min(b,Math.max(-b,fr.apply(this,arguments)-Uo)),go,Ho=Math.min(Math.abs(lo)/Ai,Gr.apply(this,arguments)),Qo=Ho*(lo<0?-1:1),Go;for(Qn=0;Qn<Ai;++Qn)(Go=uo[fo[Qn]=Qn]=+Lt(un[Qn],Qn,un))>0&&(Oa+=Go);for(at!=null?fo.sort(function(_s,bs){return at(uo[_s],uo[bs])}):Ye!=null&&fo.sort(function(_s,bs){return Ye(un[_s],un[bs])}),Qn=0,na=Oa?(lo-Ai*Qo)/Oa:0;Qn<Ai;++Qn,Uo=go)bi=fo[Qn],Go=uo[bi],go=Uo+(Go>0?Go*na:0)+Qo,uo[bi]={data:un[bi],index:Qn,value:Go,startAngle:Uo,endAngle:go,padAngle:Ho};return uo}return hn.value=function(un){return arguments.length?(Lt=typeof un=="function"?un:v(+un),hn):Lt},hn.sortValues=function(un){return arguments.length?(at=un,Ye=null,hn):at},hn.sort=function(un){return arguments.length?(Ye=un,at=null,hn):Ye},hn.startAngle=function(un){return arguments.length?(St=typeof un=="function"?un:v(+un),hn):St},hn.endAngle=function(un){return arguments.length?(fr=typeof un=="function"?un:v(+un),hn):fr},hn.padAngle=function(un){return arguments.length?(Gr=typeof un=="function"?un:v(+un),hn):Gr},hn}var we=_e(W);function Re(Lt){this._curve=Lt}Re.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,Ye){this._curve.point(Ye*Math.sin(at),Ye*-Math.cos(at))}};function _e(Lt){function at(Ye){return new Re(Lt(Ye))}return at._curve=Lt,at}function Ue(Lt){var at=Lt.curve;return Lt.angle=Lt.x,delete Lt.x,Lt.radius=Lt.y,delete Lt.y,Lt.curve=function(Ye){return arguments.length?at(_e(Ye)):at()._curve},Lt}function rt(){return Ue(Q().curve(we))}function Fe(){var Lt=ne().curve(we),at=Lt.curve,Ye=Lt.lineX0,St=Lt.lineX1,fr=Lt.lineY0,Gr=Lt.lineY1;return Lt.angle=Lt.x,delete Lt.x,Lt.startAngle=Lt.x0,delete Lt.x0,Lt.endAngle=Lt.x1,delete Lt.x1,Lt.radius=Lt.y,delete Lt.y,Lt.innerRadius=Lt.y0,delete Lt.y0,Lt.outerRadius=Lt.y1,delete Lt.y1,Lt.lineStartAngle=function(){return Ue(Ye())},delete Lt.lineX0,Lt.lineEndAngle=function(){return Ue(St())},delete Lt.lineX1,Lt.lineInnerRadius=function(){return Ue(fr())},delete Lt.lineY0,Lt.lineOuterRadius=function(){return Ue(Gr())},delete Lt.lineY1,Lt.curve=function(hn){return arguments.length?at(_e(hn)):at()._curve},Lt}function Se(Lt,at){return[(at=+at)*Math.cos(Lt-=Math.PI/2),at*Math.sin(Lt)]}var ye=Array.prototype.slice;function Oe(Lt){return Lt.source}function ue(Lt){return Lt.target}function xe(Lt){var at=Oe,Ye=ue,St=H,fr=J,Gr=null;function hn(){var un,Qn=ye.call(arguments),Ai=at.apply(this,Qn),bi=Ye.apply(this,Qn);if(Gr||(Gr=un=g.path()),Lt(Gr,+St.apply(this,(Qn[0]=Ai,Qn)),+fr.apply(this,Qn),+St.apply(this,(Qn[0]=bi,Qn)),+fr.apply(this,Qn)),un)return Gr=null,un+""||null}return hn.source=function(un){return arguments.length?(at=un,hn):at},hn.target=function(un){return arguments.length?(Ye=un,hn):Ye},hn.x=function(un){return arguments.length?(St=typeof un=="function"?un:v(+un),hn):St},hn.y=function(un){return arguments.length?(fr=typeof un=="function"?un:v(+un),hn):fr},hn.context=function(un){return arguments.length?(Gr=un==null?null:un,hn):Gr},hn}function Ae(Lt,at,Ye,St,fr){Lt.moveTo(at,Ye),Lt.bezierCurveTo(at=(at+St)/2,Ye,at,fr,St,fr)}function pe(Lt,at,Ye,St,fr){Lt.moveTo(at,Ye),Lt.bezierCurveTo(at,Ye=(Ye+fr)/2,St,Ye,St,fr)}function be(Lt,at,Ye,St,fr){var Gr=Se(at,Ye),hn=Se(at,Ye=(Ye+fr)/2),un=Se(St,Ye),Qn=Se(St,fr);Lt.moveTo(Gr[0],Gr[1]),Lt.bezierCurveTo(hn[0],hn[1],un[0],un[1],Qn[0],Qn[1])}function le(){return xe(Ae)}function z(){return xe(pe)}function ae(){var Lt=xe(be);return Lt.angle=Lt.x,delete Lt.x,Lt.radius=Lt.y,delete Lt.y,Lt}var V={draw:function(at,Ye){var St=Math.sqrt(Ye/u);at.moveTo(St,0),at.arc(0,0,St,0,b)}},re={draw:function(at,Ye){var St=Math.sqrt(Ye/5)/2;at.moveTo(-3*St,-St),at.lineTo(-St,-St),at.lineTo(-St,-3*St),at.lineTo(St,-3*St),at.lineTo(St,-St),at.lineTo(3*St,-St),at.lineTo(3*St,St),at.lineTo(St,St),at.lineTo(St,3*St),at.lineTo(-St,3*St),at.lineTo(-St,St),at.lineTo(-3*St,St),at.closePath()}},te=Math.sqrt(1/3),q=te*2,ve={draw:function(at,Ye){var St=Math.sqrt(Ye/q),fr=St*te;at.moveTo(0,-St),at.lineTo(fr,0),at.lineTo(0,St),at.lineTo(-fr,0),at.closePath()}},Me=.8908130915292852,De=Math.sin(u/10)/Math.sin(7*u/10),ze=Math.sin(b/10)*De,We=-Math.cos(b/10)*De,He={draw:function(at,Ye){var St=Math.sqrt(Ye*Me),fr=ze*St,Gr=We*St;at.moveTo(0,-St),at.lineTo(fr,Gr);for(var hn=1;hn<5;++hn){var un=b*hn/5,Qn=Math.cos(un),Ai=Math.sin(un);at.lineTo(Ai*St,-Qn*St),at.lineTo(Qn*fr-Ai*Gr,Ai*fr+Qn*Gr)}at.closePath()}},$e={draw:function(at,Ye){var St=Math.sqrt(Ye),fr=-St/2;at.rect(fr,fr,St,St)}},It=Math.sqrt(3),Yt={draw:function(at,Ye){var St=-Math.sqrt(Ye/(It*3));at.moveTo(0,St*2),at.lineTo(-It*St,-St),at.lineTo(It*St,-St),at.closePath()}},rr=-.5,ir=Math.sqrt(3)/2,Br=1/Math.sqrt(12),tr=(Br/2+1)*3,ft={draw:function(at,Ye){var St=Math.sqrt(Ye/tr),fr=St/2,Gr=St*Br,hn=fr,un=St*Br+St,Qn=-hn,Ai=un;at.moveTo(fr,Gr),at.lineTo(hn,un),at.lineTo(Qn,Ai),at.lineTo(rr*fr-ir*Gr,ir*fr+rr*Gr),at.lineTo(rr*hn-ir*un,ir*hn+rr*un),at.lineTo(rr*Qn-ir*Ai,ir*Qn+rr*Ai),at.lineTo(rr*fr+ir*Gr,rr*Gr-ir*fr),at.lineTo(rr*hn+ir*un,rr*un-ir*hn),at.lineTo(rr*Qn+ir*Ai,rr*Ai-ir*Qn),at.closePath()}},st=[V,re,ve,$e,He,Yt,ft];function Tt(){var Lt=v(V),at=v(64),Ye=null;function St(){var fr;if(Ye||(Ye=fr=g.path()),Lt.apply(this,arguments).draw(Ye,+at.apply(this,arguments)),fr)return Ye=null,fr+""||null}return St.type=function(fr){return arguments.length?(Lt=typeof fr=="function"?fr:v(fr),St):Lt},St.size=function(fr){return arguments.length?(at=typeof fr=="function"?fr:v(+fr),St):at},St.context=function(fr){return arguments.length?(Ye=fr==null?null:fr,St):Ye},St}function Qe(){}function it(Lt,at,Ye){Lt._context.bezierCurveTo((2*Lt._x0+Lt._x1)/3,(2*Lt._y0+Lt._y1)/3,(Lt._x0+2*Lt._x1)/3,(Lt._y0+2*Lt._y1)/3,(Lt._x0+4*Lt._x1+at)/6,(Lt._y0+4*Lt._y1+Ye)/6)}function zt(Lt){this._context=Lt}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:it(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ye):this._context.moveTo(at,Ye);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:it(this,at,Ye);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ye}};function Qt(Lt){return new zt(Lt)}function Ar(Lt){this._context=Lt}Ar.prototype={areaStart:Qe,areaEnd:Qe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1,this._x2=at,this._y2=Ye;break;case 1:this._point=2,this._x3=at,this._y3=Ye;break;case 2:this._point=3,this._x4=at,this._y4=Ye,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+Ye)/6);break;default:it(this,at,Ye);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ye}};function zr(Lt){return new Ar(Lt)}function ct(Lt){this._context=Lt}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var St=(this._x0+4*this._x1+at)/6,fr=(this._y0+4*this._y1+Ye)/6;this._line?this._context.lineTo(St,fr):this._context.moveTo(St,fr);break;case 3:this._point=4;default:it(this,at,Ye);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ye}};function ot(Lt){return new ct(Lt)}function xt(Lt,at){this._basis=new zt(Lt),this._beta=at}xt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,Ye=this._y,St=at.length-1;if(St>0)for(var fr=at[0],Gr=Ye[0],hn=at[St]-fr,un=Ye[St]-Gr,Qn=-1,Ai;++Qn<=St;)Ai=Qn/St,this._basis.point(this._beta*at[Qn]+(1-this._beta)*(fr+Ai*hn),this._beta*Ye[Qn]+(1-this._beta)*(Gr+Ai*un));this._x=this._y=null,this._basis.lineEnd()},point:function(at,Ye){this._x.push(+at),this._y.push(+Ye)}};var Bt=function Lt(at){function Ye(St){return at===1?new zt(St):new xt(St,at)}return Ye.beta=function(St){return Lt(+St)},Ye}(.85);function Ke(Lt,at,Ye){Lt._context.bezierCurveTo(Lt._x1+Lt._k*(Lt._x2-Lt._x0),Lt._y1+Lt._k*(Lt._y2-Lt._y0),Lt._x2+Lt._k*(Lt._x1-at),Lt._y2+Lt._k*(Lt._y1-Ye),Lt._x2,Lt._y2)}function lt(Lt,at){this._context=Lt,this._k=(1-at)/6}lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ke(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ye):this._context.moveTo(at,Ye);break;case 1:this._point=2,this._x1=at,this._y1=Ye;break;case 2:this._point=3;default:Ke(this,at,Ye);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ye}};var mt=function Lt(at){function Ye(St){return new lt(St,at)}return Ye.tension=function(St){return Lt(+St)},Ye}(0);function qe(Lt,at){this._context=Lt,this._k=(1-at)/6}qe.prototype={areaStart:Qe,areaEnd:Qe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1,this._x3=at,this._y3=Ye;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ye);break;case 2:this._point=3,this._x5=at,this._y5=Ye;break;default:Ke(this,at,Ye);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ye}};var yt=function Lt(at){function Ye(St){return new qe(St,at)}return Ye.tension=function(St){return Lt(+St)},Ye}(0);function qt(Lt,at){this._context=Lt,this._k=(1-at)/6}qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ke(this,at,Ye);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ye}};var Er=function Lt(at){function Ye(St){return new qt(St,at)}return Ye.tension=function(St){return Lt(+St)},Ye}(0);function Zr(Lt,at,Ye){var St=Lt._x1,fr=Lt._y1,Gr=Lt._x2,hn=Lt._y2;if(Lt._l01_a>f){var un=2*Lt._l01_2a+3*Lt._l01_a*Lt._l12_a+Lt._l12_2a,Qn=3*Lt._l01_a*(Lt._l01_a+Lt._l12_a);St=(St*un-Lt._x0*Lt._l12_2a+Lt._x2*Lt._l01_2a)/Qn,fr=(fr*un-Lt._y0*Lt._l12_2a+Lt._y2*Lt._l01_2a)/Qn}if(Lt._l23_a>f){var Ai=2*Lt._l23_2a+3*Lt._l23_a*Lt._l12_a+Lt._l12_2a,bi=3*Lt._l23_a*(Lt._l23_a+Lt._l12_a);Gr=(Gr*Ai+Lt._x1*Lt._l23_2a-at*Lt._l12_2a)/bi,hn=(hn*Ai+Lt._y1*Lt._l23_2a-Ye*Lt._l12_2a)/bi}Lt._context.bezierCurveTo(St,fr,Gr,hn,Lt._x2,Lt._y2)}function Dr(Lt,at){this._context=Lt,this._alpha=at}Dr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){if(at=+at,Ye=+Ye,this._point){var St=this._x2-at,fr=this._y2-Ye;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(St*St+fr*fr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ye):this._context.moveTo(at,Ye);break;case 1:this._point=2;break;case 2:this._point=3;default:Zr(this,at,Ye);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ye}};var Cr=function Lt(at){function Ye(St){return at?new Dr(St,at):new lt(St,0)}return Ye.alpha=function(St){return Lt(+St)},Ye}(.5);function mn(Lt,at){this._context=Lt,this._alpha=at}mn.prototype={areaStart:Qe,areaEnd:Qe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ye){if(at=+at,Ye=+Ye,this._point){var St=this._x2-at,fr=this._y2-Ye;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(St*St+fr*fr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=Ye;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ye);break;case 2:this._point=3,this._x5=at,this._y5=Ye;break;default:Zr(this,at,Ye);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ye}};var xn=function Lt(at){function Ye(St){return at?new mn(St,at):new qe(St,0)}return Ye.alpha=function(St){return Lt(+St)},Ye}(.5);function lr(Lt,at){this._context=Lt,this._alpha=at}lr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){if(at=+at,Ye=+Ye,this._point){var St=this._x2-at,fr=this._y2-Ye;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(St*St+fr*fr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zr(this,at,Ye);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ye}};var An=function Lt(at){function Ye(St){return at?new lr(St,at):new qt(St,0)}return Ye.alpha=function(St){return Lt(+St)},Ye}(.5);function On(Lt){this._context=Lt}On.prototype={areaStart:Qe,areaEnd:Qe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,Ye){at=+at,Ye=+Ye,this._point?this._context.lineTo(at,Ye):(this._point=1,this._context.moveTo(at,Ye))}};function Mt(Lt){return new On(Lt)}function er(Lt){return Lt<0?-1:1}function $t(Lt,at,Ye){var St=Lt._x1-Lt._x0,fr=at-Lt._x1,Gr=(Lt._y1-Lt._y0)/(St||fr<0&&-0),hn=(Ye-Lt._y1)/(fr||St<0&&-0),un=(Gr*fr+hn*St)/(St+fr);return(er(Gr)+er(hn))*Math.min(Math.abs(Gr),Math.abs(hn),.5*Math.abs(un))||0}function Tr(Lt,at){var Ye=Lt._x1-Lt._x0;return Ye?(3*(Lt._y1-Lt._y0)/Ye-at)/2:at}function Mr(Lt,at,Ye){var St=Lt._x0,fr=Lt._y0,Gr=Lt._x1,hn=Lt._y1,un=(Gr-St)/3;Lt._context.bezierCurveTo(St+un,fr+un*at,Gr-un,hn-un*Ye,Gr,hn)}function Hr(Lt){this._context=Lt}Hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mr(this,this._t0,Tr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ye){var St=NaN;if(at=+at,Ye=+Ye,!(at===this._x1&&Ye===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ye):this._context.moveTo(at,Ye);break;case 1:this._point=2;break;case 2:this._point=3,Mr(this,Tr(this,St=$t(this,at,Ye)),St);break;default:Mr(this,this._t0,St=$t(this,at,Ye));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ye,this._t0=St}}};function wr(Lt){this._context=new Ur(Lt)}(wr.prototype=Object.create(Hr.prototype)).point=function(Lt,at){Hr.prototype.point.call(this,at,Lt)};function Ur(Lt){this._context=Lt}Ur.prototype={moveTo:function(at,Ye){this._context.moveTo(Ye,at)},closePath:function(){this._context.closePath()},lineTo:function(at,Ye){this._context.lineTo(Ye,at)},bezierCurveTo:function(at,Ye,St,fr,Gr,hn){this._context.bezierCurveTo(Ye,at,fr,St,hn,Gr)}};function fn(Lt){return new Hr(Lt)}function tn(Lt){return new wr(Lt)}function Rr(Lt){this._context=Lt}Rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,Ye=this._y,St=at.length;if(St)if(this._line?this._context.lineTo(at[0],Ye[0]):this._context.moveTo(at[0],Ye[0]),St===2)this._context.lineTo(at[1],Ye[1]);else for(var fr=Nn(at),Gr=Nn(Ye),hn=0,un=1;un<St;++hn,++un)this._context.bezierCurveTo(fr[0][hn],Gr[0][hn],fr[1][hn],Gr[1][hn],at[un],Ye[un]);(this._line||this._line!==0&&St===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,Ye){this._x.push(+at),this._y.push(+Ye)}};function Nn(Lt){var at,Ye=Lt.length-1,St,fr=new Array(Ye),Gr=new Array(Ye),hn=new Array(Ye);for(fr[0]=0,Gr[0]=2,hn[0]=Lt[0]+2*Lt[1],at=1;at<Ye-1;++at)fr[at]=1,Gr[at]=4,hn[at]=4*Lt[at]+2*Lt[at+1];for(fr[Ye-1]=2,Gr[Ye-1]=7,hn[Ye-1]=8*Lt[Ye-1]+Lt[Ye],at=1;at<Ye;++at)St=fr[at]/Gr[at-1],Gr[at]-=St,hn[at]-=St*hn[at-1];for(fr[Ye-1]=hn[Ye-1]/Gr[Ye-1],at=Ye-2;at>=0;--at)fr[at]=(hn[at]-fr[at+1])/Gr[at];for(Gr[Ye-1]=(Lt[Ye]+fr[Ye-1])/2,at=0;at<Ye-1;++at)Gr[at]=2*Lt[at+1]-fr[at+1];return[fr,Gr]}function En(Lt){return new Rr(Lt)}function Yn(Lt,at){this._context=Lt,this._t=at}Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,Ye){switch(at=+at,Ye=+Ye,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ye):this._context.moveTo(at,Ye);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Ye),this._context.lineTo(at,Ye);else{var St=this._x*(1-this._t)+at*this._t;this._context.lineTo(St,this._y),this._context.lineTo(St,Ye)}break}}this._x=at,this._y=Ye}};function wi(Lt){return new Yn(Lt,.5)}function $a(Lt){return new Yn(Lt,0)}function so(Lt){return new Yn(Lt,1)}function Po(Lt,at){if((hn=Lt.length)>1)for(var Ye=1,St,fr,Gr=Lt[at[0]],hn,un=Gr.length;Ye<hn;++Ye)for(fr=Gr,Gr=Lt[at[Ye]],St=0;St<un;++St)Gr[St][1]+=Gr[St][0]=isNaN(fr[St][1])?fr[St][0]:fr[St][1]}function Ro(Lt){for(var at=Lt.length,Ye=new Array(at);--at>=0;)Ye[at]=at;return Ye}function So(Lt,at){return Lt[at]}function Va(){var Lt=v([]),at=Ro,Ye=Po,St=So;function fr(Gr){var hn=Lt.apply(this,arguments),un,Qn=Gr.length,Ai=hn.length,bi=new Array(Ai),na;for(un=0;un<Ai;++un){for(var Oa=hn[un],fo=bi[un]=new Array(Qn),uo=0,Uo;uo<Qn;++uo)fo[uo]=Uo=[0,+St(Gr[uo],Oa,uo,Gr)],Uo.data=Gr[uo];fo.key=Oa}for(un=0,na=at(bi);un<Ai;++un)bi[na[un]].index=un;return Ye(bi,na),bi}return fr.keys=function(Gr){return arguments.length?(Lt=typeof Gr=="function"?Gr:v(ye.call(Gr)),fr):Lt},fr.value=function(Gr){return arguments.length?(St=typeof Gr=="function"?Gr:v(+Gr),fr):St},fr.order=function(Gr){return arguments.length?(at=Gr==null?Ro:typeof Gr=="function"?Gr:v(ye.call(Gr)),fr):at},fr.offset=function(Gr){return arguments.length?(Ye=Gr==null?Po:Gr,fr):Ye},fr}function ws(Lt,at){if((St=Lt.length)>0){for(var Ye,St,fr=0,Gr=Lt[0].length,hn;fr<Gr;++fr){for(hn=Ye=0;Ye<St;++Ye)hn+=Lt[Ye][fr][1]||0;if(hn)for(Ye=0;Ye<St;++Ye)Lt[Ye][fr][1]/=hn}Po(Lt,at)}}function ps(Lt,at){if((Qn=Lt.length)>0)for(var Ye,St=0,fr,Gr,hn,un,Qn,Ai=Lt[at[0]].length;St<Ai;++St)for(hn=un=0,Ye=0;Ye<Qn;++Ye)(Gr=(fr=Lt[at[Ye]][St])[1]-fr[0])>0?(fr[0]=hn,fr[1]=hn+=Gr):Gr<0?(fr[1]=un,fr[0]=un+=Gr):(fr[0]=0,fr[1]=Gr)}function Ao(Lt,at){if((fr=Lt.length)>0){for(var Ye=0,St=Lt[at[0]],fr,Gr=St.length;Ye<Gr;++Ye){for(var hn=0,un=0;hn<fr;++hn)un+=Lt[hn][Ye][1]||0;St[Ye][1]+=St[Ye][0]=-un/2}Po(Lt,at)}}function zs(Lt,at){if(!(!((hn=Lt.length)>0)||!((Gr=(fr=Lt[at[0]]).length)>0))){for(var Ye=0,St=1,fr,Gr,hn;St<Gr;++St){for(var un=0,Qn=0,Ai=0;un<hn;++un){for(var bi=Lt[at[un]],na=bi[St][1]||0,Oa=bi[St-1][1]||0,fo=(na-Oa)/2,uo=0;uo<un;++uo){var Uo=Lt[at[uo]],lo=Uo[St][1]||0,go=Uo[St-1][1]||0;fo+=lo-go}Qn+=na,Ai+=fo*na}fr[St-1][1]+=fr[St-1][0]=Ye,Qn&&(Ye-=Ai/Qn)}fr[St-1][1]+=fr[St-1][0]=Ye,Po(Lt,at)}}function Qa(Lt){var at=Lt.map(fs);return Ro(Lt).sort(function(Ye,St){return at[Ye]-at[St]})}function fs(Lt){for(var at=-1,Ye=0,St=Lt.length,fr,Gr=-Infinity;++at<St;)(fr=+Lt[at][1])>Gr&&(Gr=fr,Ye=at);return Ye}function Vs(Lt){var at=Lt.map(Ju);return Ro(Lt).sort(function(Ye,St){return at[Ye]-at[St]})}function Ju(Lt){for(var at=0,Ye=-1,St=Lt.length,fr;++Ye<St;)(fr=+Lt[Ye][1])&&(at+=fr);return at}function ts(Lt){return Vs(Lt).reverse()}function Zs(Lt){var at=Lt.length,Ye,St,fr=Lt.map(Ju),Gr=Qa(Lt),hn=0,un=0,Qn=[],Ai=[];for(Ye=0;Ye<at;++Ye)St=Gr[Ye],hn<un?(hn+=fr[St],Qn.push(St)):(un+=fr[St],Ai.push(St));return Ai.reverse().concat(Qn)}function ys(Lt){return Ro(Lt).reverse()}e.arc=j,e.area=ne,e.areaRadial=Fe,e.curveBasis=Qt,e.curveBasisClosed=zr,e.curveBasisOpen=ot,e.curveBundle=Bt,e.curveCardinal=mt,e.curveCardinalClosed=yt,e.curveCardinalOpen=Er,e.curveCatmullRom=Cr,e.curveCatmullRomClosed=xn,e.curveCatmullRomOpen=An,e.curveLinear=W,e.curveLinearClosed=Mt,e.curveMonotoneX=fn,e.curveMonotoneY=tn,e.curveNatural=En,e.curveStep=wi,e.curveStepAfter=so,e.curveStepBefore=$a,e.line=Q,e.lineRadial=rt,e.linkHorizontal=le,e.linkRadial=ae,e.linkVertical=z,e.pie=de,e.pointRadial=Se,e.radialArea=Fe,e.radialLine=rt,e.stack=Va,e.stackOffsetDiverging=ps,e.stackOffsetExpand=ws,e.stackOffsetNone=Po,e.stackOffsetSilhouette=Ao,e.stackOffsetWiggle=zs,e.stackOrderAppearance=Qa,e.stackOrderAscending=Vs,e.stackOrderDescending=ts,e.stackOrderInsideOut=Zs,e.stackOrderNone=Ro,e.stackOrderReverse=ys,e.symbol=Tt,e.symbolCircle=V,e.symbolCross=re,e.symbolDiamond=ve,e.symbolSquare=$e,e.symbolStar=He,e.symbolTriangle=Yt,e.symbolWye=ft,e.symbols=st,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";function g(Ae){return function(){return Ae}}function v(Ae){return Ae[0]}function p(Ae){return Ae[1]}function c(){this._=null}function h(Ae){Ae.U=Ae.C=Ae.L=Ae.R=Ae.P=Ae.N=null}c.prototype={constructor:c,insert:function(pe,be){var le,z,ae;if(pe){if(be.P=pe,be.N=pe.N,pe.N&&(pe.N.P=be),pe.N=be,pe.R){for(pe=pe.R;pe.L;)pe=pe.L;pe.L=be}else pe.R=be;le=pe}else this._?(pe=n(this._),be.P=null,be.N=pe,pe.P=pe.L=be,le=pe):(be.P=be.N=null,this._=be,le=null);for(be.L=be.R=null,be.U=le,be.C=!0,pe=be;le&&le.C;)z=le.U,le===z.L?(ae=z.R,ae&&ae.C?(le.C=ae.C=!1,z.C=!0,pe=z):(pe===le.R&&(i(this,le),pe=le,le=pe.U),le.C=!1,z.C=!0,r(this,z))):(ae=z.L,ae&&ae.C?(le.C=ae.C=!1,z.C=!0,pe=z):(pe===le.L&&(r(this,le),pe=le,le=pe.U),le.C=!1,z.C=!0,i(this,z))),le=pe.U;this._.C=!1},remove:function(pe){pe.N&&(pe.N.P=pe.P),pe.P&&(pe.P.N=pe.N),pe.N=pe.P=null;var be=pe.U,le,z=pe.L,ae=pe.R,V,re;if(z?ae?V=n(ae):V=z:V=ae,be?be.L===pe?be.L=V:be.R=V:this._=V,z&&ae?(re=V.C,V.C=pe.C,V.L=z,z.U=V,V!==ae?(be=V.U,V.U=pe.U,pe=V.R,be.L=pe,V.R=ae,ae.U=V):(V.U=be,be=V,pe=V.R)):(re=pe.C,pe=V),pe&&(pe.U=be),!re){if(pe&&pe.C){pe.C=!1;return}do{if(pe===this._)break;if(pe===be.L){if(le=be.R,le.C&&(le.C=!1,be.C=!0,i(this,be),le=be.R),le.L&&le.L.C||le.R&&le.R.C){(!le.R||!le.R.C)&&(le.L.C=!1,le.C=!0,r(this,le),le=be.R),le.C=be.C,be.C=le.R.C=!1,i(this,be),pe=this._;break}}else if(le=be.L,le.C&&(le.C=!1,be.C=!0,r(this,be),le=be.L),le.L&&le.L.C||le.R&&le.R.C){(!le.L||!le.L.C)&&(le.R.C=!1,le.C=!0,i(this,le),le=be.L),le.C=be.C,be.C=le.L.C=!1,r(this,be),pe=this._;break}le.C=!0,pe=be,be=be.U}while(!pe.C);pe&&(pe.C=!1)}}};function i(Ae,pe){var be=pe,le=pe.R,z=be.U;z?z.L===be?z.L=le:z.R=le:Ae._=le,le.U=z,be.U=le,be.R=le.L,be.R&&(be.R.U=be),le.L=be}function r(Ae,pe){var be=pe,le=pe.L,z=be.U;z?z.L===be?z.L=le:z.R=le:Ae._=le,le.U=z,be.U=le,be.L=le.R,be.L&&(be.L.U=be),le.R=be}function n(Ae){for(;Ae.L;)Ae=Ae.L;return Ae}function s(Ae,pe,be,le){var z=[null,null],ae=Se.push(z)-1;return z.left=Ae,z.right=pe,be&&u(z,Ae,pe,be),le&&u(z,pe,Ae,le),rt[Ae.index].halfedges.push(ae),rt[pe.index].halfedges.push(ae),z}function f(Ae,pe,be){var le=[pe,be];return le.left=Ae,le}function u(Ae,pe,be,le){!Ae[0]&&!Ae[1]?(Ae[0]=le,Ae.left=pe,Ae.right=be):Ae.left===be?Ae[1]=le:Ae[0]=le}function d(Ae,pe,be,le,z){var ae=Ae[0],V=Ae[1],re=ae[0],te=ae[1],q=V[0],ve=V[1],Me=0,De=1,ze=q-re,We=ve-te,He;if(He=pe-re,!(!ze&&He>0)){if(He/=ze,ze<0){if(He<Me)return;He<De&&(De=He)}else if(ze>0){if(He>De)return;He>Me&&(Me=He)}if(He=le-re,!(!ze&&He<0)){if(He/=ze,ze<0){if(He>De)return;He>Me&&(Me=He)}else if(ze>0){if(He<Me)return;He<De&&(De=He)}if(He=be-te,!(!We&&He>0)){if(He/=We,We<0){if(He<Me)return;He<De&&(De=He)}else if(We>0){if(He>De)return;He>Me&&(Me=He)}if(He=z-te,!(!We&&He<0)){if(He/=We,We<0){if(He>De)return;He>Me&&(Me=He)}else if(We>0){if(He<Me)return;He<De&&(De=He)}return!(Me>0)&&!(De<1)||(Me>0&&(Ae[0]=[re+Me*ze,te+Me*We]),De<1&&(Ae[1]=[re+De*ze,te+De*We])),!0}}}}}function b(Ae,pe,be,le,z){var ae=Ae[1];if(ae)return!0;var V=Ae[0],re=Ae.left,te=Ae.right,q=re[0],ve=re[1],Me=te[0],De=te[1],ze=(q+Me)/2,We=(ve+De)/2,He,$e;if(De===ve){if(ze<pe||ze>=le)return;if(q>Me){if(!V)V=[ze,be];else if(V[1]>=z)return;ae=[ze,z]}else{if(!V)V=[ze,z];else if(V[1]<be)return;ae=[ze,be]}}else if(He=(q-Me)/(De-ve),$e=We-He*ze,He<-1||He>1)if(q>Me){if(!V)V=[(be-$e)/He,be];else if(V[1]>=z)return;ae=[(z-$e)/He,z]}else{if(!V)V=[(z-$e)/He,z];else if(V[1]<be)return;ae=[(be-$e)/He,be]}else if(ve<De){if(!V)V=[pe,He*pe+$e];else if(V[0]>=le)return;ae=[le,He*le+$e]}else{if(!V)V=[le,He*le+$e];else if(V[0]<pe)return;ae=[pe,He*pe+$e]}return Ae[0]=V,Ae[1]=ae,!0}function _(Ae,pe,be,le){for(var z=Se.length,ae;z--;)(!b(ae=Se[z],Ae,pe,be,le)||!d(ae,Ae,pe,be,le)||!(Math.abs(ae[0][0]-ae[1][0])>Re||Math.abs(ae[0][1]-ae[1][1])>Re))&&delete Se[z]}function x(Ae){return rt[Ae.index]={site:Ae,halfedges:[]}}function M(Ae,pe){var be=Ae.site,le=pe.left,z=pe.right;return be===z&&(z=le,le=be),z?Math.atan2(z[1]-le[1],z[0]-le[0]):(be===le?(le=pe[1],z=pe[0]):(le=pe[0],z=pe[1]),Math.atan2(le[0]-z[0],z[1]-le[1]))}function P(Ae,pe){return pe[+(pe.left!==Ae.site)]}function C(Ae,pe){return pe[+(pe.left===Ae.site)]}function O(){for(var Ae=0,pe=rt.length,be,le,z,ae;Ae<pe;++Ae)if((be=rt[Ae])&&(ae=(le=be.halfedges).length)){var V=new Array(ae),re=new Array(ae);for(z=0;z<ae;++z)V[z]=z,re[z]=M(be,Se[le[z]]);for(V.sort(function(te,q){return re[q]-re[te]}),z=0;z<ae;++z)re[z]=le[V[z]];for(z=0;z<ae;++z)le[z]=re[z]}}function w(Ae,pe,be,le){var z=rt.length,ae,V,re,te,q,ve,Me,De,ze,We,He,$e,It=!0;for(ae=0;ae<z;++ae)if(V=rt[ae]){for(re=V.site,q=V.halfedges,te=q.length;te--;)Se[q[te]]||q.splice(te,1);for(te=0,ve=q.length;te<ve;)We=C(V,Se[q[te]]),He=We[0],$e=We[1],Me=P(V,Se[q[++te%ve]]),De=Me[0],ze=Me[1],(Math.abs(He-De)>Re||Math.abs($e-ze)>Re)&&(q.splice(te,0,Se.push(f(re,We,Math.abs(He-Ae)<Re&&le-$e>Re?[Ae,Math.abs(De-Ae)<Re?ze:le]:Math.abs($e-le)<Re&&be-He>Re?[Math.abs(ze-le)<Re?De:be,le]:Math.abs(He-be)<Re&&$e-pe>Re?[be,Math.abs(De-be)<Re?ze:pe]:Math.abs($e-pe)<Re&&He-Ae>Re?[Math.abs(ze-pe)<Re?De:Ae,pe]:null))-1),++ve);ve&&(It=!1)}if(It){var Yt,rr,ir,Br=Infinity;for(ae=0,It=null;ae<z;++ae)(V=rt[ae])&&(re=V.site,Yt=re[0]-Ae,rr=re[1]-pe,ir=Yt*Yt+rr*rr,ir<Br&&(Br=ir,It=V));if(It){var tr=[Ae,pe],ft=[Ae,le],st=[be,le],Tt=[be,pe];It.halfedges.push(Se.push(f(re=It.site,tr,ft))-1,Se.push(f(re,ft,st))-1,Se.push(f(re,st,Tt))-1,Se.push(f(re,Tt,tr))-1)}}for(ae=0;ae<z;++ae)(V=rt[ae])&&(V.halfedges.length||delete rt[ae])}var S=[],I;function j(){h(this),this.x=this.y=this.arc=this.site=this.cy=null}function N(Ae){var pe=Ae.P,be=Ae.N;if(!(!pe||!be)){var le=pe.site,z=Ae.site,ae=be.site;if(le!==ae){var V=z[0],re=z[1],te=le[0]-V,q=le[1]-re,ve=ae[0]-V,Me=ae[1]-re,De=2*(te*Me-q*ve);if(!(De>=-_e)){var ze=te*te+q*q,We=ve*ve+Me*Me,He=(Me*ze-q*We)/De,$e=(te*We-ve*ze)/De,It=S.pop()||new j;It.arc=Ae,It.site=z,It.x=He+V,It.y=(It.cy=$e+re)+Math.sqrt(He*He+$e*$e),Ae.circle=It;for(var Yt=null,rr=Fe._;rr;)if(It.y<rr.y||It.y===rr.y&&It.x<=rr.x)if(rr.L)rr=rr.L;else{Yt=rr.P;break}else if(rr.R)rr=rr.R;else{Yt=rr;break}Fe.insert(Yt,It),Yt||(I=It)}}}}function W(Ae){var pe=Ae.circle;pe&&(pe.P||(I=pe.N),Fe.remove(pe),S.push(pe),h(pe),Ae.circle=null)}var H=[];function J(){h(this),this.edge=this.site=this.circle=null}function Q(Ae){var pe=H.pop()||new J;return pe.site=Ae,pe}function ne(Ae){W(Ae),Ue.remove(Ae),H.push(Ae),h(Ae)}function K(Ae){var pe=Ae.circle,be=pe.x,le=pe.cy,z=[be,le],ae=Ae.P,V=Ae.N,re=[Ae];ne(Ae);for(var te=ae;te.circle&&Math.abs(be-te.circle.x)<Re&&Math.abs(le-te.circle.cy)<Re;)ae=te.P,re.unshift(te),ne(te),te=ae;re.unshift(te),W(te);for(var q=V;q.circle&&Math.abs(be-q.circle.x)<Re&&Math.abs(le-q.circle.cy)<Re;)V=q.N,re.push(q),ne(q),q=V;re.push(q),W(q);var ve=re.length,Me;for(Me=1;Me<ve;++Me)q=re[Me],te=re[Me-1],u(q.edge,te.site,q.site,z);te=re[0],q=re[ve-1],q.edge=s(te.site,q.site,null,z),N(te),N(q)}function ie(Ae){for(var pe=Ae[0],be=Ae[1],le,z,ae,V,re=Ue._;re;)if(ae=de(re,be)-pe,ae>Re)re=re.L;else if(V=pe-we(re,be),V>Re){if(!re.R){le=re;break}re=re.R}else{ae>-Re?(le=re.P,z=re):V>-Re?(le=re,z=re.N):le=z=re;break}x(Ae);var te=Q(Ae);if(Ue.insert(le,te),!(!le&&!z)){if(le===z){W(le),z=Q(le.site),Ue.insert(te,z),te.edge=z.edge=s(le.site,te.site),N(le),N(z);return}if(!z){te.edge=s(le.site,te.site);return}W(le),W(z);var q=le.site,ve=q[0],Me=q[1],De=Ae[0]-ve,ze=Ae[1]-Me,We=z.site,He=We[0]-ve,$e=We[1]-Me,It=2*(De*$e-ze*He),Yt=De*De+ze*ze,rr=He*He+$e*$e,ir=[($e*Yt-ze*rr)/It+ve,(De*rr-He*Yt)/It+Me];u(z.edge,q,We,ir),te.edge=s(q,Ae,null,ir),z.edge=s(Ae,We,null,ir),N(le),N(z)}}function de(Ae,pe){var be=Ae.site,le=be[0],z=be[1],ae=z-pe;if(!ae)return le;var V=Ae.P;if(!V)return-Infinity;be=V.site;var re=be[0],te=be[1],q=te-pe;if(!q)return re;var ve=re-le,Me=1/ae-1/q,De=ve/q;return Me?(-De+Math.sqrt(De*De-2*Me*(ve*ve/(-2*q)-te+q/2+z-ae/2)))/Me+le:(le+re)/2}function we(Ae,pe){var be=Ae.N;if(be)return de(be,pe);var le=Ae.site;return le[1]===pe?le[0]:Infinity}var Re=1e-6,_e=1e-12,Ue,rt,Fe,Se;function ye(Ae,pe,be){return(Ae[0]-be[0])*(pe[1]-Ae[1])-(Ae[0]-pe[0])*(be[1]-Ae[1])}function Oe(Ae,pe){return pe[1]-Ae[1]||pe[0]-Ae[0]}function ue(Ae,pe){var be=Ae.sort(Oe).pop(),le,z,ae;for(Se=[],rt=new Array(Ae.length),Ue=new c,Fe=new c;;)if(ae=I,be&&(!ae||be[1]<ae.y||be[1]===ae.y&&be[0]<ae.x))(be[0]!==le||be[1]!==z)&&(ie(be),le=be[0],z=be[1]),be=Ae.pop();else if(ae)K(ae.arc);else break;if(O(),pe){var V=+pe[0][0],re=+pe[0][1],te=+pe[1][0],q=+pe[1][1];_(V,re,te,q),w(V,re,te,q)}this.edges=Se,this.cells=rt,Ue=Fe=Se=rt=null}ue.prototype={constructor:ue,polygons:function(){var pe=this.edges;return this.cells.map(function(be){var le=be.halfedges.map(function(z){return P(be,pe[z])});return le.data=be.site.data,le})},triangles:function(){var pe=[],be=this.edges;return this.cells.forEach(function(le,z){if(!!(te=(V=le.halfedges).length))for(var ae=le.site,V,re=-1,te,q,ve=be[V[te-1]],Me=ve.left===ae?ve.right:ve.left;++re<te;)q=Me,ve=be[V[re]],Me=ve.left===ae?ve.right:ve.left,q&&Me&&z<q.index&&z<Me.index&&ye(ae,q,Me)<0&&pe.push([ae.data,q.data,Me.data])}),pe},links:function(){return this.edges.filter(function(pe){return pe.right}).map(function(pe){return{source:pe.left.data,target:pe.right.data}})},find:function(pe,be,le){for(var z=this,ae,V=z._found||0,re=z.cells.length,te;!(te=z.cells[V]);)if(++V>=re)return null;var q=pe-te.site[0],ve=be-te.site[1],Me=q*q+ve*ve;do te=z.cells[ae=V],V=null,te.halfedges.forEach(function(De){var ze=z.edges[De],We=ze.left;if(!((We===te.site||!We)&&!(We=ze.right))){var He=pe-We[0],$e=be-We[1],It=He*He+$e*$e;It<Me&&(Me=It,V=We.index)}});while(V!==null);return z._found=ae,le==null||Me<=le*le?te.site:null}};function xe(){var Ae=v,pe=p,be=null;function le(z){return new ue(z.map(function(ae,V){var re=[Math.round(Ae(ae,V,z)/Re)*Re,Math.round(pe(ae,V,z)/Re)*Re];return re.index=V,re.data=ae,re}),be)}return le.polygons=function(z){return le(z).polygons()},le.links=function(z){return le(z).links()},le.triangles=function(z){return le(z).triangles()},le.x=function(z){return arguments.length?(Ae=typeof z=="function"?z:g(+z),le):Ae},le.y=function(z){return arguments.length?(pe=typeof z=="function"?z:g(+z),le):pe},le.extent=function(z){return arguments.length?(be=z==null?null:[[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]],le):be&&[[be[0][0],be[0][1]],[be[1][0],be[1][1]]]},le.size=function(z){return arguments.length?(be=z==null?null:[[0,0],[+z[0],+z[1]]],le):be&&[be[1][0]-be[0][0],be[1][1]-be[0][1]]},le}e.voronoi=xe,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(B,L,o){B.exports={graphlib:o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:o("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:o("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:o("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:o("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:o("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");B.exports={run:v,undo:c};function v(h){var i=h.graph().acyclicer==="greedy"?g(h,r(h)):p(h);e.forEach(i,function(n){var s=h.edge(n);h.removeEdge(n),s.forwardName=n.name,s.reversed=!0,h.setEdge(n.w,n.v,s,e.uniqueId("rev"))});function r(n){return function(s){return n.edge(s).weight}}}function p(h){var i=[],r={},n={};function s(f){e.has(n,f)||(n[f]=!0,r[f]=!0,e.forEach(h.outEdges(f),function(u){e.has(r,u.w)?i.push(u):s(u.w)}),delete r[f])}return e.forEach(h.nodes(),s),i}function c(h){e.forEach(h.edges(),function(i){var r=h.edge(i);if(r.reversed){h.removeEdge(i);var n=r.forwardName;delete r.reversed,delete r.forwardName,h.setEdge(i.w,i.v,r,n)}})}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js");B.exports=v;function v(c){function h(i){var r=c.children(i),n=c.node(i);if(r.length&&e.forEach(r,h),e.has(n,"minRank")){n.borderLeft=[],n.borderRight=[];for(var s=n.minRank,f=n.maxRank+1;s<f;++s)p(c,"borderLeft","_bl",i,n,s),p(c,"borderRight","_br",i,n,s)}}e.forEach(c.children(),h)}function p(c,h,i,r,n,s){var f={width:0,height:0,rank:s,borderType:h},u=n[h][s-1],d=g.addDummyNode(c,"border",f,i);n[h][s]=d,c.setParent(d,r),u&&c.setEdge(u,d,{weight:1})}},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports={adjust:g,undo:v};function g(s){var f=s.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&p(s)}function v(s){var f=s.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&h(s),(f==="lr"||f==="rl")&&(r(s),p(s))}function p(s){e.forEach(s.nodes(),function(f){c(s.node(f))}),e.forEach(s.edges(),function(f){c(s.edge(f))})}function c(s){var f=s.width;s.width=s.height,s.height=f}function h(s){e.forEach(s.nodes(),function(f){i(s.node(f))}),e.forEach(s.edges(),function(f){var u=s.edge(f);e.forEach(u.points,i),e.has(u,"y")&&i(u)})}function i(s){s.y=-s.y}function r(s){e.forEach(s.nodes(),function(f){n(s.node(f))}),e.forEach(s.edges(),function(f){var u=s.edge(f);e.forEach(u.points,n),e.has(u,"x")&&n(u)})}function n(s){var f=s.x;s.x=s.y,s.y=f}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(B,L){B.exports=o;function o(){var v={};v._next=v._prev=v,this._sentinel=v}o.prototype.dequeue=function(){var v=this._sentinel,p=v._prev;if(p!==v)return e(p),p},o.prototype.enqueue=function(v){var p=this._sentinel;v._prev&&v._next&&e(v),v._next=p._next,p._next._prev=v,p._next=v,v._prev=p},o.prototype.toString=function(){for(var v=[],p=this._sentinel,c=p._prev;c!==p;)v.push(JSON.stringify(c,g)),c=c._prev;return"["+v.join(", ")+"]"};function e(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function g(v,p){if(v!=="_next"&&v!=="_prev")return p}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),v=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;B.exports={debugOrdering:p};function p(c){var h=g.buildLayerMatrix(c),i=new v({compound:!0,multigraph:!0}).setGraph({});return e.forEach(c.nodes(),function(r){i.setNode(r,{label:r}),i.setParent(r,"layer"+c.node(r).rank)}),e.forEach(c.edges(),function(r){i.setEdge(r.v,r.w,{},r.name)}),e.forEach(h,function(r,n){var s="layer"+n;i.setNode(s,{rank:"same"}),e.reduce(r,function(f,u){return i.setEdge(f,u,{style:"invis"}),u})}),i}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(B,L,o){var e;try{e=o("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(g){}e||(e=window.graphlib),B.exports=e},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,v=o("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");B.exports=c;var p=e.constant(1);function c(s,f){if(s.nodeCount()<=1)return[];var u=r(s,f||p),d=h(u.graph,u.buckets,u.zeroIdx);return e.flatten(e.map(d,function(b){return s.outEdges(b.v,b.w)}),!0)}function h(s,f,u){for(var d=[],b=f[f.length-1],_=f[0],x;s.nodeCount();){for(;x=_.dequeue();)i(s,f,u,x);for(;x=b.dequeue();)i(s,f,u,x);if(s.nodeCount()){for(var M=f.length-2;M>0;--M)if(x=f[M].dequeue(),x){d=d.concat(i(s,f,u,x,!0));break}}}return d}function i(s,f,u,d,b){var _=b?[]:void 0;return e.forEach(s.inEdges(d.v),function(x){var M=s.edge(x),P=s.node(x.v);b&&_.push({v:x.v,w:x.w}),P.out-=M,n(f,u,P)}),e.forEach(s.outEdges(d.v),function(x){var M=s.edge(x),P=x.w,C=s.node(P);C.in-=M,n(f,u,C)}),s.removeNode(d.v),_}function r(s,f){var u=new g,d=0,b=0;e.forEach(s.nodes(),function(M){u.setNode(M,{v:M,in:0,out:0})}),e.forEach(s.edges(),function(M){var P=u.edge(M.v,M.w)||0,C=f(M),O=P+C;u.setEdge(M.v,M.w,O),b=Math.max(b,u.node(M.v).out+=C),d=Math.max(d,u.node(M.w).in+=C)});var _=e.range(b+d+3).map(function(){return new v}),x=d+1;return e.forEach(u.nodes(),function(M){n(_,x,u.node(M))}),{graph:u,buckets:_,zeroIdx:x}}function n(s,f,u){u.out?u.in?s[u.out-u.in+f].enqueue(u):s[s.length-1].enqueue(u):s[0].enqueue(u)}},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),v=o("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),p=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),c=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,h=o("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),i=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,r=o("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),n=o("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),s=o("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),f=o("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),u=o("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),d=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),b=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;B.exports=_;function _(ye,Oe){var ue=Oe&&Oe.debugTiming?d.time:d.notime;ue("layout",function(){var xe=ue("  buildLayoutGraph",function(){return W(ye)});ue("  runLayout",function(){x(xe,ue)}),ue("  updateInputGraph",function(){M(ye,xe)})})}function x(ye,Oe){Oe("    makeSpaceForEdgeLabels",function(){H(ye)}),Oe("    removeSelfEdges",function(){_e(ye)}),Oe("    acyclic",function(){g.run(ye)}),Oe("    nestingGraph.run",function(){r.run(ye)}),Oe("    rank",function(){p(d.asNonCompoundGraph(ye))}),Oe("    injectEdgeLabelProxies",function(){J(ye)}),Oe("    removeEmptyRanks",function(){i(ye)}),Oe("    nestingGraph.cleanup",function(){r.cleanup(ye)}),Oe("    normalizeRanks",function(){c(ye)}),Oe("    assignRankMinMax",function(){Q(ye)}),Oe("    removeEdgeLabelProxies",function(){ne(ye)}),Oe("    normalize.run",function(){v.run(ye)}),Oe("    parentDummyChains",function(){h(ye)}),Oe("    addBorderSegments",function(){n(ye)}),Oe("    order",function(){f(ye)}),Oe("    insertSelfEdges",function(){Ue(ye)}),Oe("    adjustCoordinateSystem",function(){s.adjust(ye)}),Oe("    position",function(){u(ye)}),Oe("    positionSelfEdges",function(){rt(ye)}),Oe("    removeBorderNodes",function(){Re(ye)}),Oe("    normalize.undo",function(){v.undo(ye)}),Oe("    fixupEdgeLabelCoords",function(){de(ye)}),Oe("    undoCoordinateSystem",function(){s.undo(ye)}),Oe("    translateGraph",function(){K(ye)}),Oe("    assignNodeIntersects",function(){ie(ye)}),Oe("    reversePoints",function(){we(ye)}),Oe("    acyclic.undo",function(){g.undo(ye)})}function M(ye,Oe){e.forEach(ye.nodes(),function(ue){var xe=ye.node(ue),Ae=Oe.node(ue);xe&&(xe.x=Ae.x,xe.y=Ae.y,Oe.children(ue).length&&(xe.width=Ae.width,xe.height=Ae.height))}),e.forEach(ye.edges(),function(ue){var xe=ye.edge(ue),Ae=Oe.edge(ue);xe.points=Ae.points,e.has(Ae,"x")&&(xe.x=Ae.x,xe.y=Ae.y)}),ye.graph().width=Oe.graph().width,ye.graph().height=Oe.graph().height}var P=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},O=["acyclicer","ranker","rankdir","align"],w=["width","height"],S={width:0,height:0},I=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function W(ye){var Oe=new b({multigraph:!0,compound:!0}),ue=Se(ye.graph());return Oe.setGraph(e.merge({},C,Fe(ue,P),e.pick(ue,O))),e.forEach(ye.nodes(),function(xe){var Ae=Se(ye.node(xe));Oe.setNode(xe,e.defaults(Fe(Ae,w),S)),Oe.setParent(xe,ye.parent(xe))}),e.forEach(ye.edges(),function(xe){var Ae=Se(ye.edge(xe));Oe.setEdge(xe,e.merge({},j,Fe(Ae,I),e.pick(Ae,N)))}),Oe}function H(ye){var Oe=ye.graph();Oe.ranksep/=2,e.forEach(ye.edges(),function(ue){var xe=ye.edge(ue);xe.minlen*=2,xe.labelpos.toLowerCase()!=="c"&&(Oe.rankdir==="TB"||Oe.rankdir==="BT"?xe.width+=xe.labeloffset:xe.height+=xe.labeloffset)})}function J(ye){e.forEach(ye.edges(),function(Oe){var ue=ye.edge(Oe);if(ue.width&&ue.height){var xe=ye.node(Oe.v),Ae=ye.node(Oe.w),pe={rank:(Ae.rank-xe.rank)/2+xe.rank,e:Oe};d.addDummyNode(ye,"edge-proxy",pe,"_ep")}})}function Q(ye){var Oe=0;e.forEach(ye.nodes(),function(ue){var xe=ye.node(ue);xe.borderTop&&(xe.minRank=ye.node(xe.borderTop).rank,xe.maxRank=ye.node(xe.borderBottom).rank,Oe=e.max(Oe,xe.maxRank))}),ye.graph().maxRank=Oe}function ne(ye){e.forEach(ye.nodes(),function(Oe){var ue=ye.node(Oe);ue.dummy==="edge-proxy"&&(ye.edge(ue.e).labelRank=ue.rank,ye.removeNode(Oe))})}function K(ye){var Oe=Number.POSITIVE_INFINITY,ue=0,xe=Number.POSITIVE_INFINITY,Ae=0,pe=ye.graph(),be=pe.marginx||0,le=pe.marginy||0;function z(ae){var V=ae.x,re=ae.y,te=ae.width,q=ae.height;Oe=Math.min(Oe,V-te/2),ue=Math.max(ue,V+te/2),xe=Math.min(xe,re-q/2),Ae=Math.max(Ae,re+q/2)}e.forEach(ye.nodes(),function(ae){z(ye.node(ae))}),e.forEach(ye.edges(),function(ae){var V=ye.edge(ae);e.has(V,"x")&&z(V)}),Oe-=be,xe-=le,e.forEach(ye.nodes(),function(ae){var V=ye.node(ae);V.x-=Oe,V.y-=xe}),e.forEach(ye.edges(),function(ae){var V=ye.edge(ae);e.forEach(V.points,function(re){re.x-=Oe,re.y-=xe}),e.has(V,"x")&&(V.x-=Oe),e.has(V,"y")&&(V.y-=xe)}),pe.width=ue-Oe+be,pe.height=Ae-xe+le}function ie(ye){e.forEach(ye.edges(),function(Oe){var ue=ye.edge(Oe),xe=ye.node(Oe.v),Ae=ye.node(Oe.w),pe,be;ue.points?(pe=ue.points[0],be=ue.points[ue.points.length-1]):(ue.points=[],pe=Ae,be=xe),ue.points.unshift(d.intersectRect(xe,pe)),ue.points.push(d.intersectRect(Ae,be))})}function de(ye){e.forEach(ye.edges(),function(Oe){var ue=ye.edge(Oe);if(e.has(ue,"x"))switch((ue.labelpos==="l"||ue.labelpos==="r")&&(ue.width-=ue.labeloffset),ue.labelpos){case"l":ue.x-=ue.width/2+ue.labeloffset;break;case"r":ue.x+=ue.width/2+ue.labeloffset;break}})}function we(ye){e.forEach(ye.edges(),function(Oe){var ue=ye.edge(Oe);ue.reversed&&ue.points.reverse()})}function Re(ye){e.forEach(ye.nodes(),function(Oe){if(ye.children(Oe).length){var ue=ye.node(Oe),xe=ye.node(ue.borderTop),Ae=ye.node(ue.borderBottom),pe=ye.node(e.last(ue.borderLeft)),be=ye.node(e.last(ue.borderRight));ue.width=Math.abs(be.x-pe.x),ue.height=Math.abs(Ae.y-xe.y),ue.x=pe.x+ue.width/2,ue.y=xe.y+ue.height/2}}),e.forEach(ye.nodes(),function(Oe){ye.node(Oe).dummy==="border"&&ye.removeNode(Oe)})}function _e(ye){e.forEach(ye.edges(),function(Oe){if(Oe.v===Oe.w){var ue=ye.node(Oe.v);ue.selfEdges||(ue.selfEdges=[]),ue.selfEdges.push({e:Oe,label:ye.edge(Oe)}),ye.removeEdge(Oe)}})}function Ue(ye){var Oe=d.buildLayerMatrix(ye);e.forEach(Oe,function(ue){var xe=0;e.forEach(ue,function(Ae,pe){var be=ye.node(Ae);be.order=pe+xe,e.forEach(be.selfEdges,function(le){d.addDummyNode(ye,"selfedge",{width:le.label.width,height:le.label.height,rank:be.rank,order:pe+ ++xe,e:le.e,label:le.label},"_se")}),delete be.selfEdges})})}function rt(ye){e.forEach(ye.nodes(),function(Oe){var ue=ye.node(Oe);if(ue.dummy==="selfedge"){var xe=ye.node(ue.e.v),Ae=xe.x+xe.width/2,pe=xe.y,be=ue.x-Ae,le=xe.height/2;ye.setEdge(ue.e,ue.label),ye.removeNode(Oe),ue.label.points=[{x:Ae+2*be/3,y:pe-le},{x:Ae+5*be/6,y:pe-le},{x:Ae+be,y:pe},{x:Ae+5*be/6,y:pe+le},{x:Ae+2*be/3,y:pe+le}],ue.label.x=ue.x,ue.label.y=ue.y}})}function Fe(ye,Oe){return e.mapValues(e.pick(ye,Oe),Number)}function Se(ye){var Oe={};return e.forEach(ye,function(ue,xe){Oe[xe.toLowerCase()]=ue}),Oe}},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(B,L,o){var e;try{e={cloneDeep:o("./node_modules/_lodash@4.17.20@lodash/cloneDeep.js"),constant:o("./node_modules/_lodash@4.17.20@lodash/constant.js"),defaults:o("./node_modules/_lodash@4.17.20@lodash/defaults.js"),each:o("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:o("./node_modules/_lodash@4.17.20@lodash/filter.js"),find:o("./node_modules/_lodash@4.17.20@lodash/find.js"),flatten:o("./node_modules/_lodash@4.17.20@lodash/flatten.js"),forEach:o("./node_modules/_lodash@4.17.20@lodash/forEach.js"),forIn:o("./node_modules/_lodash@4.17.20@lodash/forIn.js"),has:o("./node_modules/_lodash@4.17.20@lodash/has.js"),isUndefined:o("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),last:o("./node_modules/_lodash@4.17.20@lodash/last.js"),map:o("./node_modules/_lodash@4.17.20@lodash/map.js"),mapValues:o("./node_modules/_lodash@4.17.20@lodash/mapValues.js"),max:o("./node_modules/_lodash@4.17.20@lodash/max.js"),merge:o("./node_modules/_lodash@4.17.20@lodash/merge.js"),min:o("./node_modules/_lodash@4.17.20@lodash/min.js"),minBy:o("./node_modules/_lodash@4.17.20@lodash/minBy.js"),now:o("./node_modules/_lodash@4.17.20@lodash/now.js"),pick:o("./node_modules/_lodash@4.17.20@lodash/pick.js"),range:o("./node_modules/_lodash@4.17.20@lodash/range.js"),reduce:o("./node_modules/_lodash@4.17.20@lodash/reduce.js"),sortBy:o("./node_modules/_lodash@4.17.20@lodash/sortBy.js"),uniqueId:o("./node_modules/_lodash@4.17.20@lodash/uniqueId.js"),values:o("./node_modules/_lodash@4.17.20@lodash/values.js"),zipObject:o("./node_modules/_lodash@4.17.20@lodash/zipObject.js")}}catch(g){}e||(e=window._),B.exports=e},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js");B.exports={run:v,cleanup:i};function v(r){var n=g.addDummyNode(r,"root",{},"_root"),s=c(r),f=e.max(e.values(s))-1,u=2*f+1;r.graph().nestingRoot=n,e.forEach(r.edges(),function(b){r.edge(b).minlen*=u});var d=h(r)+1;e.forEach(r.children(),function(b){p(r,n,u,d,f,s,b)}),r.graph().nodeRankFactor=u}function p(r,n,s,f,u,d,b){var _=r.children(b);if(!_.length){b!==n&&r.setEdge(n,b,{weight:0,minlen:s});return}var x=g.addBorderNode(r,"_bt"),M=g.addBorderNode(r,"_bb"),P=r.node(b);r.setParent(x,b),P.borderTop=x,r.setParent(M,b),P.borderBottom=M,e.forEach(_,function(C){p(r,n,s,f,u,d,C);var O=r.node(C),w=O.borderTop?O.borderTop:C,S=O.borderBottom?O.borderBottom:C,I=O.borderTop?f:2*f,j=w!==S?1:u-d[b]+1;r.setEdge(x,w,{weight:I,minlen:j,nestingEdge:!0}),r.setEdge(S,M,{weight:I,minlen:j,nestingEdge:!0})}),r.parent(b)||r.setEdge(n,x,{weight:0,minlen:u+d[b]})}function c(r){var n={};function s(f,u){var d=r.children(f);d&&d.length&&e.forEach(d,function(b){s(b,u+1)}),n[f]=u}return e.forEach(r.children(),function(f){s(f,1)}),n}function h(r){return e.reduce(r.edges(),function(n,s){return n+r.edge(s).weight},0)}function i(r){var n=r.graph();r.removeNode(n.nestingRoot),delete n.nestingRoot,e.forEach(r.edges(),function(s){var f=r.edge(s);f.nestingEdge&&r.removeEdge(s)})}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js");B.exports={run:v,undo:c};function v(h){h.graph().dummyChains=[],e.forEach(h.edges(),function(i){p(h,i)})}function p(h,i){var r=i.v,n=h.node(r).rank,s=i.w,f=h.node(s).rank,u=i.name,d=h.edge(i),b=d.labelRank;if(f!==n+1){h.removeEdge(i);var _,x,M;for(M=0,++n;n<f;++M,++n)d.points=[],x={width:0,height:0,edgeLabel:d,edgeObj:i,rank:n},_=g.addDummyNode(h,"edge",x,"_d"),n===b&&(x.width=d.width,x.height=d.height,x.dummy="edge-label",x.labelpos=d.labelpos),h.setEdge(r,_,{weight:d.weight},u),M===0&&h.graph().dummyChains.push(_),r=_;h.setEdge(r,s,{weight:d.weight},u)}}function c(h){e.forEach(h.graph().dummyChains,function(i){var r=h.node(i),n=r.edgeLabel,s;for(h.setEdge(r.edgeObj,n);r.dummy;)s=h.successors(i)[0],h.removeNode(i),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),i=s,r=h.node(i)})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports=g;function g(v,p,c){var h={},i;e.forEach(c,function(r){for(var n=v.parent(r),s,f;n;){if(s=v.parent(n),s?(f=h[s],h[s]=n):(f=i,i=n),f&&f!==n){p.setEdge(f,n);return}n=s}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports=g;function g(v,p){return e.map(p,function(c){var h=v.inEdges(c);if(h.length){var i=e.reduce(h,function(r,n){var s=v.edge(n),f=v.node(n.v);return{sum:r.sum+s.weight*f.order,weight:r.weight+s.weight}},{sum:0,weight:0});return{v:c,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:c}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;B.exports=v;function v(c,h,i){var r=p(c),n=new g({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return c.node(s)});return e.forEach(c.nodes(),function(s){var f=c.node(s),u=c.parent(s);(f.rank===h||f.minRank<=h&&h<=f.maxRank)&&(n.setNode(s),n.setParent(s,u||r),e.forEach(c[i](s),function(d){var b=d.v===s?d.w:d.v,_=n.edge(b,s),x=e.isUndefined(_)?0:_.weight;n.setEdge(b,s,{weight:c.edge(d).weight+x})}),e.has(f,"minRank")&&n.setNode(s,{borderLeft:f.borderLeft[h],borderRight:f.borderRight[h]}))}),n}function p(c){for(var h;c.hasNode(h=e.uniqueId("_root")););return h}},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports=g;function g(p,c){for(var h=0,i=1;i<c.length;++i)h+=v(p,c[i-1],c[i]);return h}function v(p,c,h){for(var i=e.zipObject(h,e.map(h,function(d,b){return b})),r=e.flatten(e.map(c,function(d){return e.sortBy(e.map(p.outEdges(d),function(b){return{pos:i[b.w],weight:p.edge(b).weight}}),"pos")}),!0),n=1;n<h.length;)n<<=1;var s=2*n-1;n-=1;var f=e.map(new Array(s),function(){return 0}),u=0;return e.forEach(r.forEach(function(d){var b=d.pos+n;f[b]+=d.weight;for(var _=0;b>0;)b%2&&(_+=f[b+1]),b=b-1>>1,f[b]+=d.weight;u+=d.weight*_})),u}},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),v=o("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),p=o("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),c=o("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),h=o("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),i=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,r=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js");B.exports=n;function n(d){var b=r.maxRank(d),_=s(d,e.range(1,b+1),"inEdges"),x=s(d,e.range(b-1,-1,-1),"outEdges"),M=g(d);u(d,M);for(var P=Number.POSITIVE_INFINITY,C,O=0,w=0;w<4;++O,++w){f(O%2?_:x,O%4>=2),M=r.buildLayerMatrix(d);var S=v(d,M);S<P&&(w=0,C=e.cloneDeep(M),P=S)}u(d,C)}function s(d,b,_){return e.map(b,function(x){return c(d,x,_)})}function f(d,b){var _=new i;e.forEach(d,function(x){var M=x.graph().root,P=p(x,M,_,b);e.forEach(P.vs,function(C,O){x.node(C).order=O}),h(x,_,P.vs)})}function u(d,b){e.forEach(b,function(_){e.forEach(_,function(x,M){d.node(x).order=M})})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports=g;function g(v){var p={},c=e.filter(v.nodes(),function(s){return!v.children(s).length}),h=e.max(e.map(c,function(s){return v.node(s).rank})),i=e.map(e.range(h+1),function(){return[]});function r(s){if(!e.has(p,s)){p[s]=!0;var f=v.node(s);i[f.rank].push(s),e.forEach(v.successors(s),r)}}var n=e.sortBy(c,function(s){return v.node(s).rank});return e.forEach(n,r),i}},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports=g;function g(c,h){var i={};e.forEach(c,function(n,s){var f=i[n.v]={indegree:0,in:[],out:[],vs:[n.v],i:s};e.isUndefined(n.barycenter)||(f.barycenter=n.barycenter,f.weight=n.weight)}),e.forEach(h.edges(),function(n){var s=i[n.v],f=i[n.w];!e.isUndefined(s)&&!e.isUndefined(f)&&(f.indegree++,s.out.push(i[n.w]))});var r=e.filter(i,function(n){return!n.indegree});return v(r)}function v(c){var h=[];function i(s){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(s.barycenter)||f.barycenter>=s.barycenter)&&p(s,f)}}function r(s){return function(f){f.in.push(s),--f.indegree==0&&c.push(f)}}for(;c.length;){var n=c.pop();h.push(n),e.forEach(n.in.reverse(),i(n)),e.forEach(n.out,r(n))}return e.map(e.filter(h,function(s){return!s.merged}),function(s){return e.pick(s,["vs","i","barycenter","weight"])})}function p(c,h){var i=0,r=0;c.weight&&(i+=c.barycenter*c.weight,r+=c.weight),h.weight&&(i+=h.barycenter*h.weight,r+=h.weight),c.vs=h.vs.concat(c.vs),c.barycenter=i/r,c.weight=r,c.i=Math.min(h.i,c.i),h.merged=!0}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),v=o("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),p=o("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");B.exports=c;function c(r,n,s,f){var u=r.children(n),d=r.node(n),b=d?d.borderLeft:void 0,_=d?d.borderRight:void 0,x={};b&&(u=e.filter(u,function(S){return S!==b&&S!==_}));var M=g(r,u);e.forEach(M,function(S){if(r.children(S.v).length){var I=c(r,S.v,s,f);x[S.v]=I,e.has(I,"barycenter")&&i(S,I)}});var P=v(M,s);h(P,x);var C=p(P,f);if(b&&(C.vs=e.flatten([b,C.vs,_],!0),r.predecessors(b).length)){var O=r.node(r.predecessors(b)[0]),w=r.node(r.predecessors(_)[0]);e.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+O.order+w.order)/(C.weight+2),C.weight+=2}return C}function h(r,n){e.forEach(r,function(s){s.vs=e.flatten(s.vs.map(function(f){return n[f]?n[f].vs:f}),!0)})}function i(r,n){e.isUndefined(r.barycenter)?(r.barycenter=n.barycenter,r.weight=n.weight):(r.barycenter=(r.barycenter*r.weight+n.barycenter*n.weight)/(r.weight+n.weight),r.weight+=n.weight)}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js");B.exports=v;function v(h,i){var r=g.partition(h,function(x){return e.has(x,"barycenter")}),n=r.lhs,s=e.sortBy(r.rhs,function(x){return-x.i}),f=[],u=0,d=0,b=0;n.sort(c(!!i)),b=p(f,s,b),e.forEach(n,function(x){b+=x.vs.length,f.push(x.vs),u+=x.barycenter*x.weight,d+=x.weight,b=p(f,s,b)});var _={vs:e.flatten(f,!0)};return d&&(_.barycenter=u/d,_.weight=d),_}function p(h,i,r){for(var n;i.length&&(n=e.last(i)).i<=r;)i.pop(),h.push(n.vs),r++;return r}function c(h){return function(i,r){return i.barycenter<r.barycenter?-1:i.barycenter>r.barycenter?1:h?r.i-i.i:i.i-r.i}}},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(B,L,o){var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports=g;function g(c){var h=p(c);e.forEach(c.graph().dummyChains,function(i){for(var r=c.node(i),n=r.edgeObj,s=v(c,h,n.v,n.w),f=s.path,u=s.lca,d=0,b=f[d],_=!0;i!==n.w;){if(r=c.node(i),_){for(;(b=f[d])!==u&&c.node(b).maxRank<r.rank;)d++;b===u&&(_=!1)}if(!_){for(;d<f.length-1&&c.node(b=f[d+1]).minRank<=r.rank;)d++;b=f[d]}c.setParent(i,b),i=c.successors(i)[0]}})}function v(c,h,i,r){var n=[],s=[],f=Math.min(h[i].low,h[r].low),u=Math.max(h[i].lim,h[r].lim),d,b;d=i;do d=c.parent(d),n.push(d);while(d&&(h[d].low>f||u>h[d].lim));for(b=d,d=r;(d=c.parent(d))!==b;)s.push(d);return{path:n.concat(s.reverse()),lca:b}}function p(c){var h={},i=0;function r(n){var s=i;e.forEach(c.children(n),r),h[n]={low:s,lim:i++}}return e.forEach(c.children(),r),h}},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,v=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js");B.exports={positionX:_,findType1Conflicts:p,findType2Conflicts:c,addConflict:i,hasConflict:r,verticalAlignment:n,horizontalCompaction:s,alignCoordinates:d,findSmallestWidthAlignment:u,balance:b};function p(P,C){var O={};function w(S,I){var j=0,N=0,W=S.length,H=e.last(I);return e.forEach(I,function(J,Q){var ne=h(P,J),K=ne?P.node(ne).order:W;(ne||J===H)&&(e.forEach(I.slice(N,Q+1),function(ie){e.forEach(P.predecessors(ie),function(de){var we=P.node(de),Re=we.order;(Re<j||K<Re)&&!(we.dummy&&P.node(ie).dummy)&&i(O,de,ie)})}),N=Q+1,j=K)}),I}return e.reduce(C,w),O}function c(P,C){var O={};function w(I,j,N,W,H){var J;e.forEach(e.range(j,N),function(Q){J=I[Q],P.node(J).dummy&&e.forEach(P.predecessors(J),function(ne){var K=P.node(ne);K.dummy&&(K.order<W||K.order>H)&&i(O,ne,J)})})}function S(I,j){var N=-1,W,H=0;return e.forEach(j,function(J,Q){if(P.node(J).dummy==="border"){var ne=P.predecessors(J);ne.length&&(W=P.node(ne[0]).order,w(j,H,Q,N,W),H=Q,N=W)}w(j,H,j.length,W,I.length)}),j}return e.reduce(C,S),O}function h(P,C){if(P.node(C).dummy)return e.find(P.predecessors(C),function(O){return P.node(O).dummy})}function i(P,C,O){if(C>O){var w=C;C=O,O=w}var S=P[C];S||(P[C]=S={}),S[O]=!0}function r(P,C,O){if(C>O){var w=C;C=O,O=w}return e.has(P[C],O)}function n(P,C,O,w){var S={},I={},j={};return e.forEach(C,function(N){e.forEach(N,function(W,H){S[W]=W,I[W]=W,j[W]=H})}),e.forEach(C,function(N){var W=-1;e.forEach(N,function(H){var J=w(H);if(J.length){J=e.sortBy(J,function(de){return j[de]});for(var Q=(J.length-1)/2,ne=Math.floor(Q),K=Math.ceil(Q);ne<=K;++ne){var ie=J[ne];I[H]===H&&W<j[ie]&&!r(O,H,ie)&&(I[ie]=H,I[H]=S[H]=S[ie],W=j[ie])}}})}),{root:S,align:I}}function s(P,C,O,w,S){var I={},j=f(P,C,O,S),N=S?"borderLeft":"borderRight";function W(Q,ne){for(var K=j.nodes(),ie=K.pop(),de={};ie;)de[ie]?Q(ie):(de[ie]=!0,K.push(ie),K=K.concat(ne(ie))),ie=K.pop()}function H(Q){I[Q]=j.inEdges(Q).reduce(function(ne,K){return Math.max(ne,I[K.v]+j.edge(K))},0)}function J(Q){var ne=j.outEdges(Q).reduce(function(ie,de){return Math.min(ie,I[de.w]-j.edge(de))},Number.POSITIVE_INFINITY),K=P.node(Q);ne!==Number.POSITIVE_INFINITY&&K.borderType!==N&&(I[Q]=Math.max(I[Q],ne))}return W(H,j.predecessors.bind(j)),W(J,j.successors.bind(j)),e.forEach(w,function(Q){I[Q]=I[O[Q]]}),I}function f(P,C,O,w){var S=new g,I=P.graph(),j=x(I.nodesep,I.edgesep,w);return e.forEach(C,function(N){var W;e.forEach(N,function(H){var J=O[H];if(S.setNode(J),W){var Q=O[W],ne=S.edge(Q,J);S.setEdge(Q,J,Math.max(j(P,H,W),ne||0))}W=H})}),S}function u(P,C){return e.minBy(e.values(C),function(O){var w=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY;return e.forIn(O,function(I,j){var N=M(P,j)/2;w=Math.max(I+N,w),S=Math.min(I-N,S)}),w-S})}function d(P,C){var O=e.values(C),w=e.min(O),S=e.max(O);e.forEach(["u","d"],function(I){e.forEach(["l","r"],function(j){var N=I+j,W=P[N],H;if(W!==C){var J=e.values(W);H=j==="l"?w-e.min(J):S-e.max(J),H&&(P[N]=e.mapValues(W,function(Q){return Q+H}))}})})}function b(P,C){return e.mapValues(P.ul,function(O,w){if(C)return P[C.toLowerCase()][w];var S=e.sortBy(e.map(P,w));return(S[1]+S[2])/2})}function _(P){var C=v.buildLayerMatrix(P),O=e.merge(p(P,C),c(P,C)),w={},S;e.forEach(["u","d"],function(j){S=j==="u"?C:e.values(C).reverse(),e.forEach(["l","r"],function(N){N==="r"&&(S=e.map(S,function(Q){return e.values(Q).reverse()}));var W=(j==="u"?P.predecessors:P.successors).bind(P),H=n(P,S,O,W),J=s(P,S,H.root,H.align,N==="r");N==="r"&&(J=e.mapValues(J,function(Q){return-Q})),w[j+N]=J})});var I=u(P,w);return d(w,I),b(w,P.graph().align)}function x(P,C,O){return function(w,S,I){var j=w.node(S),N=w.node(I),W=0,H;if(W+=j.width/2,e.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":H=-j.width/2;break;case"r":H=j.width/2;break}if(H&&(W+=O?H:-H),H=0,W+=(j.dummy?C:P)/2,W+=(N.dummy?C:P)/2,W+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":H=N.width/2;break;case"r":H=-N.width/2;break}return H&&(W+=O?H:-H),H=0,W}}function M(P,C){return P.node(C).width}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),v=o("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;B.exports=p;function p(h){h=g.asNonCompoundGraph(h),c(h),e.forEach(v(h),function(i,r){h.node(r).x=i})}function c(h){var i=g.buildLayerMatrix(h),r=h.graph().ranksep,n=0;e.forEach(i,function(s){var f=e.max(e.map(s,function(u){return h.node(u).height}));e.forEach(s,function(u){h.node(u).y=n+f/2}),n+=f+r})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,v=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;B.exports=p;function p(r){var n=new g({directed:!1}),s=r.nodes()[0],f=r.nodeCount();n.setNode(s,{});for(var u,d;c(n,r)<f;)u=h(n,r),d=n.hasNode(u.v)?v(r,u):-v(r,u),i(n,r,d);return n}function c(r,n){function s(f){e.forEach(n.nodeEdges(f),function(u){var d=u.v,b=f===d?u.w:d;!r.hasNode(b)&&!v(n,u)&&(r.setNode(b,{}),r.setEdge(f,b,{}),s(b))})}return e.forEach(r.nodes(),s),r.nodeCount()}function h(r,n){return e.minBy(n.edges(),function(s){if(r.hasNode(s.v)!==r.hasNode(s.w))return v(n,s)})}function i(r,n,s){e.forEach(r.nodes(),function(f){n.node(f).rank+=s})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),g=e.longestPath,v=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),p=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");B.exports=c;function c(n){switch(n.graph().ranker){case"network-simplex":r(n);break;case"tight-tree":i(n);break;case"longest-path":h(n);break;default:r(n)}}var h=g;function i(n){g(n),v(n)}function r(n){p(n)}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),v=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,p=o("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,c=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,h=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,i=o("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;B.exports=r,r.initLowLimValues=u,r.initCutValues=n,r.calcCutValue=f,r.leaveEdge=b,r.enterEdge=_,r.exchangeEdges=x;function r(O){O=i(O),p(O);var w=g(O);u(w),n(w,O);for(var S,I;S=b(w);)I=_(w,O,S),x(w,O,S,I)}function n(O,w){var S=h(O,O.nodes());S=S.slice(0,S.length-1),e.forEach(S,function(I){s(O,w,I)})}function s(O,w,S){var I=O.node(S),j=I.parent;O.edge(S,j).cutvalue=f(O,w,S)}function f(O,w,S){var I=O.node(S),j=I.parent,N=!0,W=w.edge(S,j),H=0;return W||(N=!1,W=w.edge(j,S)),H=W.weight,e.forEach(w.nodeEdges(S),function(J){var Q=J.v===S,ne=Q?J.w:J.v;if(ne!==j){var K=Q===N,ie=w.edge(J).weight;if(H+=K?ie:-ie,P(O,S,ne)){var de=O.edge(S,ne).cutvalue;H+=K?-de:de}}}),H}function u(O,w){arguments.length<2&&(w=O.nodes()[0]),d(O,{},1,w)}function d(O,w,S,I,j){var N=S,W=O.node(I);return w[I]=!0,e.forEach(O.neighbors(I),function(H){e.has(w,H)||(S=d(O,w,S,H,I))}),W.low=N,W.lim=S++,j?W.parent=j:delete W.parent,S}function b(O){return e.find(O.edges(),function(w){return O.edge(w).cutvalue<0})}function _(O,w,S){var I=S.v,j=S.w;w.hasEdge(I,j)||(I=S.w,j=S.v);var N=O.node(I),W=O.node(j),H=N,J=!1;N.lim>W.lim&&(H=W,J=!0);var Q=e.filter(w.edges(),function(ne){return J===C(O,O.node(ne.v),H)&&J!==C(O,O.node(ne.w),H)});return e.minBy(Q,function(ne){return v(w,ne)})}function x(O,w,S,I){var j=S.v,N=S.w;O.removeEdge(j,N),O.setEdge(I.v,I.w,{}),u(O),n(O,w),M(O,w)}function M(O,w){var S=e.find(O.nodes(),function(j){return!w.node(j).parent}),I=c(O,S);I=I.slice(1),e.forEach(I,function(j){var N=O.node(j).parent,W=w.edge(j,N),H=!1;W||(W=w.edge(N,j),H=!0),w.node(j).rank=w.node(N).rank+(H?W.minlen:-W.minlen)})}function P(O,w,S){return O.hasEdge(w,S)}function C(O,w,S){return S.low<=w.lim&&w.lim<=S.lim}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");B.exports={longestPath:g,slack:v};function g(p){var c={};function h(i){var r=p.node(i);if(e.has(c,i))return r.rank;c[i]=!0;var n=e.min(e.map(p.outEdges(i),function(s){return h(s.w)-p.edge(s).minlen}));return(n===Number.POSITIVE_INFINITY||n===void 0||n===null)&&(n=0),r.rank=n}e.forEach(p.sources(),h)}function v(p,c){return p.node(c.w).rank-p.node(c.v).rank-p.edge(c).minlen}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(B,L,o){"use strict";var e=o("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=o("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;B.exports={addDummyNode:v,simplify:p,asNonCompoundGraph:c,successorWeights:h,predecessorWeights:i,intersectRect:r,buildLayerMatrix:n,normalizeRanks:s,removeEmptyRanks:f,addBorderNode:u,maxRank:d,partition:b,time:_,notime:x};function v(M,P,C,O){var w;do w=e.uniqueId(O);while(M.hasNode(w));return C.dummy=P,M.setNode(w,C),w}function p(M){var P=new g().setGraph(M.graph());return e.forEach(M.nodes(),function(C){P.setNode(C,M.node(C))}),e.forEach(M.edges(),function(C){var O=P.edge(C.v,C.w)||{weight:0,minlen:1},w=M.edge(C);P.setEdge(C.v,C.w,{weight:O.weight+w.weight,minlen:Math.max(O.minlen,w.minlen)})}),P}function c(M){var P=new g({multigraph:M.isMultigraph()}).setGraph(M.graph());return e.forEach(M.nodes(),function(C){M.children(C).length||P.setNode(C,M.node(C))}),e.forEach(M.edges(),function(C){P.setEdge(C,M.edge(C))}),P}function h(M){var P=e.map(M.nodes(),function(C){var O={};return e.forEach(M.outEdges(C),function(w){O[w.w]=(O[w.w]||0)+M.edge(w).weight}),O});return e.zipObject(M.nodes(),P)}function i(M){var P=e.map(M.nodes(),function(C){var O={};return e.forEach(M.inEdges(C),function(w){O[w.v]=(O[w.v]||0)+M.edge(w).weight}),O});return e.zipObject(M.nodes(),P)}function r(M,P){var C=M.x,O=M.y,w=P.x-C,S=P.y-O,I=M.width/2,j=M.height/2;if(!w&&!S)throw new Error("Not possible to find intersection inside of the rectangle");var N,W;return Math.abs(S)*I>Math.abs(w)*j?(S<0&&(j=-j),N=j*w/S,W=j):(w<0&&(I=-I),N=I,W=I*S/w),{x:C+N,y:O+W}}function n(M){var P=e.map(e.range(d(M)+1),function(){return[]});return e.forEach(M.nodes(),function(C){var O=M.node(C),w=O.rank;e.isUndefined(w)||(P[w][O.order]=C)}),P}function s(M){var P=e.min(e.map(M.nodes(),function(C){return M.node(C).rank}));e.forEach(M.nodes(),function(C){var O=M.node(C);e.has(O,"rank")&&(O.rank-=P)})}function f(M){var P=e.min(e.map(M.nodes(),function(S){return M.node(S).rank})),C=[];e.forEach(M.nodes(),function(S){var I=M.node(S).rank-P;C[I]||(C[I]=[]),C[I].push(S)});var O=0,w=M.graph().nodeRankFactor;e.forEach(C,function(S,I){e.isUndefined(S)&&I%w!=0?--O:O&&e.forEach(S,function(j){M.node(j).rank+=O})})}function u(M,P,C,O){var w={width:0,height:0};return arguments.length>=4&&(w.rank=C,w.order=O),v(M,"border",w,P)}function d(M){return e.max(e.map(M.nodes(),function(P){var C=M.node(P).rank;if(!e.isUndefined(C))return C}))}function b(M,P){var C={lhs:[],rhs:[]};return e.forEach(M,function(O){P(O)?C.lhs.push(O):C.rhs.push(O)}),C}function _(M,P){var C=e.now();try{return P()}finally{console.log(M+" time: "+(e.now()-C)+"ms")}}function x(M,P){return P()}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(B,L){B.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");B.exports={Graph:e.Graph,json:o("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:e.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=g;function g(v){var p={},c=[],h;function i(r){e.has(p,r)||(p[r]=!0,h.push(r),e.each(v.successors(r),i),e.each(v.predecessors(r),i))}return e.each(v.nodes(),function(r){h=[],i(r),h.length&&c.push(h)}),c}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=g;function g(p,c,h){e.isArray(c)||(c=[c]);var i=(p.isDirected()?p.successors:p.neighbors).bind(p),r=[],n={};return e.each(c,function(s){if(!p.hasNode(s))throw new Error("Graph does not have node: "+s);v(p,s,h==="post",n,i,r)}),r}function v(p,c,h,i,r,n){e.has(i,c)||(i[c]=!0,h||n.push(c),e.each(r(c),function(s){v(p,s,h,i,r,n)}),h&&n.push(c))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),g=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=v;function v(p,c,h){return g.transform(p.nodes(),function(i,r){i[r]=e(p,r,c,h)},{})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),g=o("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");B.exports=p;var v=e.constant(1);function p(h,i,r,n){return c(h,String(i),r||v,n||function(s){return h.outEdges(s)})}function c(h,i,r,n){var s={},f=new g,u,d,b=function(x){var M=x.v!==u?x.v:x.w,P=s[M],C=r(x),O=d.distance+C;if(C<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+C);O<P.distance&&(P.distance=O,P.predecessor=u,f.decrease(M,O))};for(h.nodes().forEach(function(_){var x=_===i?0:Number.POSITIVE_INFINITY;s[_]={distance:x},f.add(_,x)});f.size()>0&&(u=f.removeMin(),d=s[u],d.distance!==Number.POSITIVE_INFINITY);)n(u).forEach(b);return s}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),g=o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");B.exports=v;function v(p){return e.filter(g(p),function(c){return c.length>1||c.length===1&&p.hasEdge(c[0],c[0])})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=v;var g=e.constant(1);function v(c,h,i){return p(c,h||g,i||function(r){return c.outEdges(r)})}function p(c,h,i){var r={},n=c.nodes();return n.forEach(function(s){r[s]={},r[s][s]={distance:0},n.forEach(function(f){s!==f&&(r[s][f]={distance:Number.POSITIVE_INFINITY})}),i(s).forEach(function(f){var u=f.v===s?f.w:f.v,d=h(f);r[s][u]={distance:d,predecessor:s}})}),n.forEach(function(s){var f=r[s];n.forEach(function(u){var d=r[u];n.forEach(function(b){var _=d[s],x=f[b],M=d[b],P=_.distance+x.distance;P<M.distance&&(M.distance=P,M.predecessor=x.predecessor)})})}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(B,L,o){B.exports={components:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");B.exports=g;function g(v){try{e(v)}catch(p){if(p instanceof e.CycleException)return!1;throw p}return!0}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");B.exports=g;function g(v,p){return e(v,p,"post")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");B.exports=g;function g(v,p){return e(v,p,"pre")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),g=o("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),v=o("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");B.exports=p;function p(c,h){var i=new g,r={},n=new v,s;function f(d){var b=d.v===s?d.w:d.v,_=n.priority(b);if(_!==void 0){var x=h(d);x<_&&(r[b]=s,n.decrease(b,x))}}if(c.nodeCount()===0)return i;e.each(c.nodes(),function(d){n.add(d,Number.POSITIVE_INFINITY),i.setNode(d)}),n.decrease(c.nodes()[0],0);for(var u=!1;n.size()>0;){if(s=n.removeMin(),e.has(r,s))i.setEdge(s,r[s]);else{if(u)throw new Error("Input graph is not connected: "+c);u=!0}c.nodeEdges(s).forEach(f)}return i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=g;function g(v){var p=0,c=[],h={},i=[];function r(n){var s=h[n]={onStack:!0,lowlink:p,index:p++};if(c.push(n),v.successors(n).forEach(function(d){e.has(h,d)?h[d].onStack&&(s.lowlink=Math.min(s.lowlink,h[d].index)):(r(d),s.lowlink=Math.min(s.lowlink,h[d].lowlink))}),s.lowlink===s.index){var f=[],u;do u=c.pop(),h[u].onStack=!1,f.push(u);while(n!==u);i.push(f)}}return v.nodes().forEach(function(n){e.has(h,n)||r(n)}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=g,g.CycleException=v;function g(p){var c={},h={},i=[];function r(n){if(e.has(h,n))throw new v;e.has(c,n)||(h[n]=!0,c[n]=!0,e.each(p.predecessors(n),r),delete h[n],i.push(n))}if(e.each(p.sinks(),r),e.size(c)!==p.nodeCount())throw new v;return i}function v(){}v.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=g;function g(){this._arr=[],this._keyIndices={}}g.prototype.size=function(){return this._arr.length},g.prototype.keys=function(){return this._arr.map(function(v){return v.key})},g.prototype.has=function(v){return e.has(this._keyIndices,v)},g.prototype.priority=function(v){var p=this._keyIndices[v];if(p!==void 0)return this._arr[p].priority},g.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},g.prototype.add=function(v,p){var c=this._keyIndices;if(v=String(v),!e.has(c,v)){var h=this._arr,i=h.length;return c[v]=i,h.push({key:v,priority:p}),this._decrease(i),!0}return!1},g.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},g.prototype.decrease=function(v,p){var c=this._keyIndices[v];if(p>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[c].priority+" New: "+p);this._arr[c].priority=p,this._decrease(c)},g.prototype._heapify=function(v){var p=this._arr,c=2*v,h=c+1,i=v;c<p.length&&(i=p[c].priority<p[i].priority?c:i,h<p.length&&(i=p[h].priority<p[i].priority?h:i),i!==v&&(this._swap(v,i),this._heapify(i)))},g.prototype._decrease=function(v){for(var p=this._arr,c=p[v].priority,h;v!==0&&(h=v>>1,!(p[h].priority<c));)this._swap(v,h),v=h},g.prototype._swap=function(v,p){var c=this._arr,h=this._keyIndices,i=c[v],r=c[p];c[v]=r,c[p]=i,h[r.key]=v,h[i.key]=p}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(B,L,o){"use strict";var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");B.exports=c;var g="\0",v="\0",p="";function c(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[v]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}c.prototype._nodeCount=0,c.prototype._edgeCount=0,c.prototype.isDirected=function(){return this._isDirected},c.prototype.isMultigraph=function(){return this._isMultigraph},c.prototype.isCompound=function(){return this._isCompound},c.prototype.setGraph=function(f){return this._label=f,this},c.prototype.graph=function(){return this._label},c.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},c.prototype.nodeCount=function(){return this._nodeCount},c.prototype.nodes=function(){return e.keys(this._nodes)},c.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(u){return e.isEmpty(f._in[u])})},c.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(u){return e.isEmpty(f._out[u])})},c.prototype.setNodes=function(f,u){var d=arguments,b=this;return e.each(f,function(_){d.length>1?b.setNode(_,u):b.setNode(_)}),this},c.prototype.setNode=function(f,u){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=u),this):(this._nodes[f]=arguments.length>1?u:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=v,this._children[f]={},this._children[v][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},c.prototype.node=function(f){return this._nodes[f]},c.prototype.hasNode=function(f){return e.has(this._nodes,f)},c.prototype.removeNode=function(f){var u=this;if(e.has(this._nodes,f)){var d=function(_){u.removeEdge(u._edgeObjs[_])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(b){u.setParent(b)}),delete this._children[f]),e.each(e.keys(this._in[f]),d),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),d),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},c.prototype.setParent=function(f,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(u))u=v;else{u+="";for(var d=u;!e.isUndefined(d);d=this.parent(d))if(d===f)throw new Error("Setting "+u+" as parent of "+f+" would create a cycle");this.setNode(u)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=u,this._children[u][f]=!0,this},c.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},c.prototype.parent=function(f){if(this._isCompound){var u=this._parent[f];if(u!==v)return u}},c.prototype.children=function(f){if(e.isUndefined(f)&&(f=v),this._isCompound){var u=this._children[f];if(u)return e.keys(u)}else{if(f===v)return this.nodes();if(this.hasNode(f))return[]}},c.prototype.predecessors=function(f){var u=this._preds[f];if(u)return e.keys(u)},c.prototype.successors=function(f){var u=this._sucs[f];if(u)return e.keys(u)},c.prototype.neighbors=function(f){var u=this.predecessors(f);if(u)return e.union(u,this.successors(f))},c.prototype.isLeaf=function(f){var u;return this.isDirected()?u=this.successors(f):u=this.neighbors(f),u.length===0},c.prototype.filterNodes=function(f){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var d=this;e.each(this._nodes,function(x,M){f(M)&&u.setNode(M,x)}),e.each(this._edgeObjs,function(x){u.hasNode(x.v)&&u.hasNode(x.w)&&u.setEdge(x,d.edge(x))});var b={};function _(x){var M=d.parent(x);return M===void 0||u.hasNode(M)?(b[x]=M,M):M in b?b[M]:_(M)}return this._isCompound&&e.each(u.nodes(),function(x){u.setParent(x,_(x))}),u},c.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},c.prototype.edgeCount=function(){return this._edgeCount},c.prototype.edges=function(){return e.values(this._edgeObjs)},c.prototype.setPath=function(f,u){var d=this,b=arguments;return e.reduce(f,function(_,x){return b.length>1?d.setEdge(_,x,u):d.setEdge(_,x),x}),this},c.prototype.setEdge=function(){var f,u,d,b,_=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(f=x.v,u=x.w,d=x.name,arguments.length===2&&(b=arguments[1],_=!0)):(f=x,u=arguments[1],d=arguments[3],arguments.length>2&&(b=arguments[2],_=!0)),f=""+f,u=""+u,e.isUndefined(d)||(d=""+d);var M=r(this._isDirected,f,u,d);if(e.has(this._edgeLabels,M))return _&&(this._edgeLabels[M]=b),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(u),this._edgeLabels[M]=_?b:this._defaultEdgeLabelFn(f,u,d);var P=n(this._isDirected,f,u,d);return f=P.v,u=P.w,Object.freeze(P),this._edgeObjs[M]=P,h(this._preds[u],f),h(this._sucs[f],u),this._in[u][M]=P,this._out[f][M]=P,this._edgeCount++,this},c.prototype.edge=function(f,u,d){var b=arguments.length===1?s(this._isDirected,arguments[0]):r(this._isDirected,f,u,d);return this._edgeLabels[b]},c.prototype.hasEdge=function(f,u,d){var b=arguments.length===1?s(this._isDirected,arguments[0]):r(this._isDirected,f,u,d);return e.has(this._edgeLabels,b)},c.prototype.removeEdge=function(f,u,d){var b=arguments.length===1?s(this._isDirected,arguments[0]):r(this._isDirected,f,u,d),_=this._edgeObjs[b];return _&&(f=_.v,u=_.w,delete this._edgeLabels[b],delete this._edgeObjs[b],i(this._preds[u],f),i(this._sucs[f],u),delete this._in[u][b],delete this._out[f][b],this._edgeCount--),this},c.prototype.inEdges=function(f,u){var d=this._in[f];if(d){var b=e.values(d);return u?e.filter(b,function(_){return _.v===u}):b}},c.prototype.outEdges=function(f,u){var d=this._out[f];if(d){var b=e.values(d);return u?e.filter(b,function(_){return _.w===u}):b}},c.prototype.nodeEdges=function(f,u){var d=this.inEdges(f,u);if(d)return d.concat(this.outEdges(f,u))};function h(f,u){f[u]?f[u]++:f[u]=1}function i(f,u){--f[u]||delete f[u]}function r(f,u,d,b){var _=""+u,x=""+d;if(!f&&_>x){var M=_;_=x,x=M}return _+p+x+p+(e.isUndefined(b)?g:b)}function n(f,u,d,b){var _=""+u,x=""+d;if(!f&&_>x){var M=_;_=x,x=M}var P={v:_,w:x};return b&&(P.name=b),P}function s(f,u){return r(f,u.v,u.w,u.name)}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(B,L,o){B.exports={Graph:o("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:o("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(B,L,o){var e=o("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),g=o("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");B.exports={write:v,read:h};function v(i){var r={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:p(i),edges:c(i)};return e.isUndefined(i.graph())||(r.value=e.clone(i.graph())),r}function p(i){return e.map(i.nodes(),function(r){var n=i.node(r),s=i.parent(r),f={v:r};return e.isUndefined(n)||(f.value=n),e.isUndefined(s)||(f.parent=s),f})}function c(i){return e.map(i.edges(),function(r){var n=i.edge(r),s={v:r.v,w:r.w};return e.isUndefined(r.name)||(s.name=r.name),e.isUndefined(n)||(s.value=n),s})}function h(i){var r=new g(i.options).setGraph(i.value);return e.each(i.nodes,function(n){r.setNode(n.v,n.value),n.parent&&r.setParent(n.v,n.parent)}),e.each(i.edges,function(n){r.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(B,L,o){var e;try{e={clone:o("./node_modules/_lodash@4.17.20@lodash/clone.js"),constant:o("./node_modules/_lodash@4.17.20@lodash/constant.js"),each:o("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:o("./node_modules/_lodash@4.17.20@lodash/filter.js"),has:o("./node_modules/_lodash@4.17.20@lodash/has.js"),isArray:o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),isEmpty:o("./node_modules/_lodash@4.17.20@lodash/isEmpty.js"),isFunction:o("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),isUndefined:o("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),keys:o("./node_modules/_lodash@4.17.20@lodash/keys.js"),map:o("./node_modules/_lodash@4.17.20@lodash/map.js"),reduce:o("./node_modules/_lodash@4.17.20@lodash/reduce.js"),size:o("./node_modules/_lodash@4.17.20@lodash/size.js"),transform:o("./node_modules/_lodash@4.17.20@lodash/transform.js"),union:o("./node_modules/_lodash@4.17.20@lodash/union.js"),values:o("./node_modules/_lodash@4.17.20@lodash/values.js")}}catch(g){}e||(e=window._),B.exports=e},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(B,L){B.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(B,L){B.exports=Array.isArray||function(o){return Object.prototype.toString.call(o)=="[object Array]"}},"./node_modules/_lodash@4.17.20@lodash/_DataView.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=e(g,"DataView");B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_Hash.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_hashClear.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_hashDelete.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_hashGet.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_hashHas.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_hashSet.js");function h(i){var r=-1,n=i==null?0:i.length;for(this.clear();++r<n;){var s=i[r];this.set(s[0],s[1])}}h.prototype.clear=e,h.prototype.delete=g,h.prototype.get=v,h.prototype.has=p,h.prototype.set=c,B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_ListCache.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js");function h(i){var r=-1,n=i==null?0:i.length;for(this.clear();++r<n;){var s=i[r];this.set(s[0],s[1])}}h.prototype.clear=e,h.prototype.delete=g,h.prototype.get=v,h.prototype.has=p,h.prototype.set=c,B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Map.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=e(g,"Map");B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_MapCache.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js");function h(i){var r=-1,n=i==null?0:i.length;for(this.clear();++r<n;){var s=i[r];this.set(s[0],s[1])}}h.prototype.clear=e,h.prototype.delete=g,h.prototype.get=v,h.prototype.has=p,h.prototype.set=c,B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Promise.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=e(g,"Promise");B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_Set.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=e(g,"Set");B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_SetCache.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js");function p(c){var h=-1,i=c==null?0:c.length;for(this.__data__=new e;++h<i;)this.add(c[h])}p.prototype.add=p.prototype.push=g,p.prototype.has=v,B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_Stack.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_stackClear.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_stackDelete.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_stackGet.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_stackHas.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_stackSet.js");function i(r){var n=this.__data__=new e(r);this.size=n.size}i.prototype.clear=g,i.prototype.delete=v,i.prototype.get=p,i.prototype.has=c,i.prototype.set=h,B.exports=i},"./node_modules/_lodash@4.17.20@lodash/_Symbol.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),g=e.Symbol;B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),g=e.Uint8Array;B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_WeakMap.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=e(g,"WeakMap");B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_apply.js":function(B,L){function o(e,g,v){switch(v.length){case 0:return e.call(g);case 1:return e.call(g,v[0]);case 2:return e.call(g,v[0],v[1]);case 3:return e.call(g,v[0],v[1],v[2])}return e.apply(g,v)}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arrayEach.js":function(B,L){function o(e,g){for(var v=-1,p=e==null?0:e.length;++v<p&&g(e[v],v,e)!==!1;);return e}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js":function(B,L){function o(e,g){for(var v=-1,p=e==null?0:e.length,c=0,h=[];++v<p;){var i=e[v];g(i,v,e)&&(h[c++]=i)}return h}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js");function g(v,p){var c=v==null?0:v.length;return!!c&&e(v,p,0)>-1}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js":function(B,L){function o(e,g,v){for(var p=-1,c=e==null?0:e.length;++p<c;)if(v(g,e[p]))return!0;return!1}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseTimes.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=o("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),i=Object.prototype,r=i.hasOwnProperty;function n(s,f){var u=v(s),d=!u&&g(s),b=!u&&!d&&p(s),_=!u&&!d&&!b&&h(s),x=u||d||b||_,M=x?e(s.length,String):[],P=M.length;for(var C in s)(f||r.call(s,C))&&!(x&&(C=="length"||b&&(C=="offset"||C=="parent")||_&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||c(C,P)))&&M.push(C);return M}B.exports=n},"./node_modules/_lodash@4.17.20@lodash/_arrayMap.js":function(B,L){function o(e,g){for(var v=-1,p=e==null?0:e.length,c=Array(p);++v<p;)c[v]=g(e[v],v,e);return c}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arrayPush.js":function(B,L){function o(e,g){for(var v=-1,p=g.length,c=e.length;++v<p;)e[c+v]=g[v];return e}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js":function(B,L){function o(e,g,v,p){var c=-1,h=e==null?0:e.length;for(p&&h&&(v=e[++c]);++c<h;)v=g(v,e[c],c,e);return v}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_arraySome.js":function(B,L){function o(e,g){for(var v=-1,p=e==null?0:e.length;++v<p;)if(g(e[v],v,e))return!0;return!1}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_asciiSize.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),g=e("length");B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/eq.js");function v(p,c,h){(h!==void 0&&!g(p[c],h)||h===void 0&&!(c in p))&&e(p,c,h)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_assignValue.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/eq.js"),v=Object.prototype,p=v.hasOwnProperty;function c(h,i,r){var n=h[i];(!(p.call(h,i)&&g(n,r))||r===void 0&&!(i in h))&&e(h,i,r)}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/eq.js");function g(v,p){for(var c=v.length;c--;)if(e(v[c][0],p))return c;return-1}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseAssign.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/keys.js");function v(p,c){return p&&e(c,g(c),p)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function v(p,c){return p&&e(c,g(c),p)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js");function g(v,p,c){p=="__proto__"&&e?e(v,p,{configurable:!0,enumerable:!0,value:c,writable:!0}):v[p]=c}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseClone.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_baseAssign.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),i=o("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),r=o("./node_modules/_lodash@4.17.20@lodash/_copySymbols.js"),n=o("./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js"),s=o("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),f=o("./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js"),u=o("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),d=o("./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js"),b=o("./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js"),_=o("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),x=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),M=o("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),P=o("./node_modules/_lodash@4.17.20@lodash/isMap.js"),C=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),O=o("./node_modules/_lodash@4.17.20@lodash/isSet.js"),w=o("./node_modules/_lodash@4.17.20@lodash/keys.js"),S=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),I=1,j=2,N=4,W="[object Arguments]",H="[object Array]",J="[object Boolean]",Q="[object Date]",ne="[object Error]",K="[object Function]",ie="[object GeneratorFunction]",de="[object Map]",we="[object Number]",Re="[object Object]",_e="[object RegExp]",Ue="[object Set]",rt="[object String]",Fe="[object Symbol]",Se="[object WeakMap]",ye="[object ArrayBuffer]",Oe="[object DataView]",ue="[object Float32Array]",xe="[object Float64Array]",Ae="[object Int8Array]",pe="[object Int16Array]",be="[object Int32Array]",le="[object Uint8Array]",z="[object Uint8ClampedArray]",ae="[object Uint16Array]",V="[object Uint32Array]",re={};re[W]=re[H]=re[ye]=re[Oe]=re[J]=re[Q]=re[ue]=re[xe]=re[Ae]=re[pe]=re[be]=re[de]=re[we]=re[Re]=re[_e]=re[Ue]=re[rt]=re[Fe]=re[le]=re[z]=re[ae]=re[V]=!0,re[ne]=re[K]=re[Se]=!1;function te(q,ve,Me,De,ze,We){var He,$e=ve&I,It=ve&j,Yt=ve&N;if(Me&&(He=ze?Me(q,De,ze,We):Me(q)),He!==void 0)return He;if(!C(q))return q;var rr=x(q);if(rr){if(He=d(q),!$e)return i(q,He)}else{var ir=u(q),Br=ir==K||ir==ie;if(M(q))return h(q,$e);if(ir==Re||ir==W||Br&&!ze){if(He=It||Br?{}:_(q),!$e)return It?n(q,c(He,q)):r(q,p(He,q))}else{if(!re[ir])return ze?q:{};He=b(q,ir,$e)}}We||(We=new e);var tr=We.get(q);if(tr)return tr;We.set(q,He),O(q)?q.forEach(function(Tt){He.add(te(Tt,ve,Me,Tt,q,We))}):P(q)&&q.forEach(function(Tt,Qe){He.set(Qe,te(Tt,ve,Me,Qe,q,We))});var ft=Yt?It?f:s:It?S:w,st=rr?void 0:ft(q);return g(st||q,function(Tt,Qe){st&&(Qe=Tt,Tt=q[Qe]),v(He,Qe,te(Tt,ve,Me,Qe,q,We))}),He}B.exports=te},"./node_modules/_lodash@4.17.20@lodash/_baseCreate.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),g=Object.create,v=function(){function p(){}return function(c){if(!e(c))return{};if(g)return g(c);p.prototype=c;var h=new p;return p.prototype=void 0,h}}();B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseEach.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js"),v=g(e);B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function g(v,p,c){for(var h=-1,i=v.length;++h<i;){var r=v[h],n=p(r);if(n!=null&&(s===void 0?n===n&&!e(n):c(n,s)))var s=n,f=r}return f}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseFilter.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseEach.js");function g(v,p){var c=[];return e(v,function(h,i,r){p(h,i,r)&&c.push(h)}),c}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js":function(B,L){function o(e,g,v,p){for(var c=e.length,h=v+(p?1:-1);p?h--:++h<c;)if(g(e[h],h,e))return h;return-1}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js");function v(p,c,h,i,r){var n=-1,s=p.length;for(h||(h=g),r||(r=[]);++n<s;){var f=p[n];c>0&&h(f)?c>1?v(f,c-1,h,i,r):e(r,f):i||(r[r.length]=f)}return r}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseFor.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js"),g=e();B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),g=o("./node_modules/_lodash@4.17.20@lodash/keys.js");function v(p,c){return p&&e(p,c,g)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseGet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function v(p,c){c=e(c,p);for(var h=0,i=c.length;p!=null&&h<i;)p=p[g(c[h++])];return h&&h==i?p:void 0}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArray.js");function v(p,c,h){var i=c(p);return g(p)?i:e(i,h(p))}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getRawTag.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_objectToString.js"),p="[object Null]",c="[object Undefined]",h=e?e.toStringTag:void 0;function i(r){return r==null?r===void 0?c:p:h&&h in Object(r)?g(r):v(r)}B.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseGt.js":function(B,L){function o(e,g){return e>g}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseHas.js":function(B,L){var o=Object.prototype,e=o.hasOwnProperty;function g(v,p){return v!=null&&e.call(v,p)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js":function(B,L){function o(e,g){return e!=null&&g in Object(e)}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js");function p(c,h,i){return h===h?v(c,h,i):e(c,g,i)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),v="[object Arguments]";function p(c){return g(c)&&e(c)==v}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function v(p,c,h,i,r){return p===c?!0:p==null||c==null||!g(p)&&!g(c)?p!==p&&c!==c:e(p,c,h,i,v,r)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_equalByTag.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_equalObjects.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),h=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=o("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=o("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n=1,s="[object Arguments]",f="[object Array]",u="[object Object]",d=Object.prototype,b=d.hasOwnProperty;function _(x,M,P,C,O,w){var S=h(x),I=h(M),j=S?f:c(x),N=I?f:c(M);j=j==s?u:j,N=N==s?u:N;var W=j==u,H=N==u,J=j==N;if(J&&i(x)){if(!i(M))return!1;S=!0,W=!1}if(J&&!W)return w||(w=new e),S||r(x)?g(x,M,P,C,O,w):v(x,M,j,P,C,O,w);if(!(P&n)){var Q=W&&b.call(x,"__wrapped__"),ne=H&&b.call(M,"__wrapped__");if(Q||ne){var K=Q?x.value():x,ie=ne?M.value():M;return w||(w=new e),O(K,ie,P,C,w)}}return J?(w||(w=new e),p(x,M,P,C,O,w)):!1}B.exports=_},"./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),v="[object Map]";function p(c){return g(c)&&e(c)==v}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),v=1,p=2;function c(h,i,r,n){var s=r.length,f=s,u=!n;if(h==null)return!f;for(h=Object(h);s--;){var d=r[s];if(u&&d[2]?d[1]!==h[d[0]]:!(d[0]in h))return!1}for(;++s<f;){d=r[s];var b=d[0],_=h[b],x=d[1];if(u&&d[2]){if(_===void 0&&!(b in h))return!1}else{var M=new e;if(n)var P=n(_,x,b,h,i,M);if(!(P===void 0?g(x,_,v|p,n,M):P))return!1}}return!0}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js":function(B,L){function o(e){return e!==e}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_isMasked.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),c=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,i=Function.prototype,r=Object.prototype,n=i.toString,s=r.hasOwnProperty,f=RegExp("^"+n.call(s).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(d){if(!v(d)||g(d))return!1;var b=e(d)?f:h;return b.test(p(d))}B.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),v="[object Set]";function p(c){return g(c)&&e(c)==v}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isLength.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),p="[object Arguments]",c="[object Array]",h="[object Boolean]",i="[object Date]",r="[object Error]",n="[object Function]",s="[object Map]",f="[object Number]",u="[object Object]",d="[object RegExp]",b="[object Set]",_="[object String]",x="[object WeakMap]",M="[object ArrayBuffer]",P="[object DataView]",C="[object Float32Array]",O="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",I="[object Int32Array]",j="[object Uint8Array]",N="[object Uint8ClampedArray]",W="[object Uint16Array]",H="[object Uint32Array]",J={};J[C]=J[O]=J[w]=J[S]=J[I]=J[j]=J[N]=J[W]=J[H]=!0,J[p]=J[c]=J[M]=J[h]=J[P]=J[i]=J[r]=J[n]=J[s]=J[f]=J[u]=J[d]=J[b]=J[_]=J[x]=!1;function Q(ne){return v(ne)&&g(ne.length)&&!!J[e(ne)]}B.exports=Q},"./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseMatches.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js"),v=o("./node_modules/_lodash@4.17.20@lodash/identity.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=o("./node_modules/_lodash@4.17.20@lodash/property.js");function h(i){return typeof i=="function"?i:i==null?v:typeof i=="object"?p(i)?g(i[0],i[1]):e(i):c(i)}B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseKeys.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js"),v=Object.prototype,p=v.hasOwnProperty;function c(h){if(!e(h))return g(h);var i=[];for(var r in Object(h))p.call(h,r)&&r!="constructor"&&i.push(r);return i}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js"),p=Object.prototype,c=p.hasOwnProperty;function h(i){if(!e(i))return v(i);var r=g(i),n=[];for(var s in i)s=="constructor"&&(r||!c.call(i,s))||n.push(s);return n}B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseLt.js":function(B,L){function o(e,g){return e<g}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseMap.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function v(p,c){var h=-1,i=g(p)?Array(p.length):[];return e(p,function(r,n,s){i[++h]=c(r,n,s)}),i}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_baseMatches.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getMatchData.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js");function p(c){var h=g(c);return h.length==1&&h[0][2]?v(h[0][0],h[0][1]):function(i){return i===c||e(i,c,h)}}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),g=o("./node_modules/_lodash@4.17.20@lodash/get.js"),v=o("./node_modules/_lodash@4.17.20@lodash/hasIn.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js"),i=o("./node_modules/_lodash@4.17.20@lodash/_toKey.js"),r=1,n=2;function s(f,u){return p(f)&&c(u)?h(i(f),u):function(d){var b=g(d,f);return b===void 0&&b===u?v(d,f):e(u,b,r|n)}}B.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseMerge.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js"),c=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),h=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),i=o("./node_modules/_lodash@4.17.20@lodash/_safeGet.js");function r(n,s,f,u,d){n!==s&&v(s,function(b,_){if(d||(d=new e),c(b))p(n,s,_,f,r,u,d);else{var x=u?u(i(n,_),b,_+"",n,s,d):void 0;x===void 0&&(x=b),g(n,_,x)}},h)}B.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),h=o("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),i=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=o("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),n=o("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),s=o("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),f=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=o("./node_modules/_lodash@4.17.20@lodash/isPlainObject.js"),d=o("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),b=o("./node_modules/_lodash@4.17.20@lodash/_safeGet.js"),_=o("./node_modules/_lodash@4.17.20@lodash/toPlainObject.js");function x(M,P,C,O,w,S,I){var j=b(M,C),N=b(P,C),W=I.get(N);if(W){e(M,C,W);return}var H=S?S(j,N,C+"",M,P,I):void 0,J=H===void 0;if(J){var Q=i(N),ne=!Q&&n(N),K=!Q&&!ne&&d(N);H=N,Q||ne||K?i(j)?H=j:r(j)?H=p(j):ne?(J=!1,H=g(N,!0)):K?(J=!1,H=v(N,!0)):H=[]:u(N)||h(N)?(H=j,h(j)?H=_(j):(!f(j)||s(j))&&(H=c(N))):J=!1}J&&(I.set(N,H),w(H,N,O,S,I),I.delete(N)),e(M,C,H)}B.exports=x},"./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),i=o("./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js"),r=o("./node_modules/_lodash@4.17.20@lodash/identity.js"),n=o("./node_modules/_lodash@4.17.20@lodash/isArray.js");function s(f,u,d){u.length?u=e(u,function(x){return n(x)?function(M){return g(M,x.length===1?x[0]:x)}:x}):u=[r];var b=-1;u=e(u,h(v));var _=p(f,function(x,M,P){var C=e(u,function(O){return O(x)});return{criteria:C,index:++b,value:x}});return c(_,function(x,M){return i(x,M,d)})}B.exports=s},"./node_modules/_lodash@4.17.20@lodash/_basePick.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_basePickBy.js"),g=o("./node_modules/_lodash@4.17.20@lodash/hasIn.js");function v(p,c){return e(p,c,function(h,i){return g(p,i)})}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_basePickBy.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseSet.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_castPath.js");function p(c,h,i){for(var r=-1,n=h.length,s={};++r<n;){var f=h[r],u=e(c,f);i(u,f)&&g(s,v(f,c),u)}return s}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseProperty.js":function(B,L){function o(e){return function(g){return g==null?void 0:g[e]}}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function g(v){return function(p){return e(p,v)}}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseRange.js":function(B,L){var o=Math.ceil,e=Math.max;function g(v,p,c,h){for(var i=-1,r=e(o((p-v)/(c||1)),0),n=Array(r);r--;)n[h?r:++i]=v,v+=c;return n}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseReduce.js":function(B,L){function o(e,g,v,p,c){return c(e,function(h,i,r){v=p?(p=!1,h):g(v,h,i,r)}),v}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseRest.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/identity.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function p(c,h){return v(g(c,h,e),c+"")}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function h(i,r,n,s){if(!p(i))return i;r=g(r,i);for(var f=-1,u=r.length,d=u-1,b=i;b!=null&&++f<u;){var _=c(r[f]),x=n;if(_==="__proto__"||_==="constructor"||_==="prototype")return i;if(f!=d){var M=b[_];x=s?s(M,_,b):void 0,x===void 0&&(x=p(M)?M:v(r[f+1])?[]:{})}e(b,_,x),b=b[_]}return i}B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/constant.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js"),v=o("./node_modules/_lodash@4.17.20@lodash/identity.js"),p=g?function(c,h){return g(c,"toString",{configurable:!0,enumerable:!1,value:e(h),writable:!0})}:v;B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js":function(B,L){function o(e,g){var v=e.length;for(e.sort(g);v--;)e[v]=e[v].value;return e}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseTimes.js":function(B,L){function o(e,g){for(var v=-1,p=Array(e);++v<e;)p[v]=g(v);return p}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseToString.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),c=1/0,h=e?e.prototype:void 0,i=h?h.toString:void 0;function r(n){if(typeof n=="string")return n;if(v(n))return g(n,r)+"";if(p(n))return i?i.call(n):"";var s=n+"";return s=="0"&&1/n==-c?"-0":s}B.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseUnary.js":function(B,L){function o(e){return function(g){return e(g)}}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseUniq.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_createSet.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),i=200;function r(n,s,f){var u=-1,d=g,b=n.length,_=!0,x=[],M=x;if(f)_=!1,d=v;else if(b>=i){var P=s?null:c(n);if(P)return h(P);_=!1,d=p,M=new e}else M=s?[]:x;e:for(;++u<b;){var C=n[u],O=s?s(C):C;if(C=f||C!==0?C:0,_&&O===O){for(var w=M.length;w--;)if(M[w]===O)continue e;s&&M.push(O),x.push(C)}else d(M,O,f)||(M!==x&&M.push(O),x.push(C))}return x}B.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseValues.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js");function g(v,p){return e(p,function(c){return v[c]})}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js":function(B,L){function o(e,g,v){for(var p=-1,c=e.length,h=g.length,i={};++p<c;){var r=p<h?g[p]:void 0;v(i,e[p],r)}return i}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_cacheHas.js":function(B,L){function o(e,g){return e.has(g)}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_castFunction.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/identity.js");function g(v){return typeof v=="function"?v:e}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_castPath.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_stringToPath.js"),p=o("./node_modules/_lodash@4.17.20@lodash/toString.js");function c(h,i){return e(h)?h:g(h,i)?[h]:v(p(h))}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js");function g(v){var p=new v.constructor(v.byteLength);return new e(p).set(new e(v)),p}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js":function(B,L,o){(function(e){var g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=L&&!L.nodeType&&L,p=v&&typeof e=="object"&&e&&!e.nodeType&&e,c=p&&p.exports===v,h=c?g.Buffer:void 0,i=h?h.allocUnsafe:void 0;function r(n,s){if(s)return n.slice();var f=n.length,u=i?i(f):new n.constructor(f);return n.copy(u),u}e.exports=r}).call(this,o("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(B))},"./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function g(v,p){var c=p?e(v.buffer):v.buffer;return new v.constructor(c,v.byteOffset,v.byteLength)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js":function(B,L){var o=/\w*$/;function e(g){var v=new g.constructor(g.source,o.exec(g));return v.lastIndex=g.lastIndex,v}B.exports=e},"./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),g=e?e.prototype:void 0,v=g?g.valueOf:void 0;function p(c){return v?Object(v.call(c)):{}}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function g(v,p){var c=p?e(v.buffer):v.buffer;return new v.constructor(c,v.byteOffset,v.length)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_compareAscending.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function g(v,p){if(v!==p){var c=v!==void 0,h=v===null,i=v===v,r=e(v),n=p!==void 0,s=p===null,f=p===p,u=e(p);if(!s&&!u&&!r&&v>p||r&&n&&f&&!s&&!u||h&&n&&f||!c&&f||!i)return 1;if(!h&&!r&&!u&&v<p||u&&c&&i&&!h&&!r||s&&c&&i||!n&&i||!f)return-1}return 0}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_compareAscending.js");function g(v,p,c){for(var h=-1,i=v.criteria,r=p.criteria,n=i.length,s=c.length;++h<n;){var f=e(i[h],r[h]);if(f){if(h>=s)return f;var u=c[h];return f*(u=="desc"?-1:1)}}return v.index-p.index}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_copyArray.js":function(B,L){function o(e,g){var v=-1,p=e.length;for(g||(g=Array(p));++v<p;)g[v]=e[v];return g}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_copyObject.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js");function v(p,c,h,i){var r=!h;h||(h={});for(var n=-1,s=c.length;++n<s;){var f=c[n],u=i?i(h[f],p[f],f,h,p):void 0;u===void 0&&(u=p[f]),r?g(h,f,u):e(h,f,u)}return h}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_copySymbols.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js");function v(p,c){return e(p,g(p),c)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js");function v(p,c){return e(p,g(p),c)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_coreJsData.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),g=e["__core-js_shared__"];B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_createAssigner.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js");function v(p){return e(function(c,h){var i=-1,r=h.length,n=r>1?h[r-1]:void 0,s=r>2?h[2]:void 0;for(n=p.length>3&&typeof n=="function"?(r--,n):void 0,s&&g(h[0],h[1],s)&&(n=r<3?void 0:n,r=1),c=Object(c);++i<r;){var f=h[i];f&&p(c,f,i,n)}return c})}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function g(v,p){return function(c,h){if(c==null)return c;if(!e(c))return v(c,h);for(var i=c.length,r=p?i:-1,n=Object(c);(p?r--:++r<i)&&h(n[r],r,n)!==!1;);return c}}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js":function(B,L){function o(e){return function(g,v,p){for(var c=-1,h=Object(g),i=p(g),r=i.length;r--;){var n=i[e?r:++c];if(v(h[n],n,h)===!1)break}return g}}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_createFind.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),v=o("./node_modules/_lodash@4.17.20@lodash/keys.js");function p(c){return function(h,i,r){var n=Object(h);if(!g(h)){var s=e(i,3);h=v(h),i=function(d){return s(n[d],d,n)}}var f=c(h,i,r);return f>-1?n[s?h[f]:f]:void 0}}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_createRange.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseRange.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),v=o("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function p(c){return function(h,i,r){return r&&typeof r!="number"&&g(h,i,r)&&(i=r=void 0),h=v(h),i===void 0?(i=h,h=0):i=v(i),r=r===void 0?h<i?1:-1:v(r),e(h,i,r,c)}}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_createSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Set.js"),g=o("./node_modules/_lodash@4.17.20@lodash/noop.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),p=1/0,c=e&&1/v(new e([,-0]))[1]==p?function(h){return new e(h)}:g;B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_defineProperty.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=function(){try{var v=e(Object,"defineProperty");return v({},"",{}),v}catch(p){}}();B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_equalArrays.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_arraySome.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),p=1,c=2;function h(i,r,n,s,f,u){var d=n&p,b=i.length,_=r.length;if(b!=_&&!(d&&_>b))return!1;var x=u.get(i),M=u.get(r);if(x&&M)return x==r&&M==i;var P=-1,C=!0,O=n&c?new e:void 0;for(u.set(i,r),u.set(r,i);++P<b;){var w=i[P],S=r[P];if(s)var I=d?s(S,w,P,r,i,u):s(w,S,P,i,r,u);if(I!==void 0){if(I)continue;C=!1;break}if(O){if(!g(r,function(j,N){if(!v(O,N)&&(w===j||f(w,j,n,s,u)))return O.push(N)})){C=!1;break}}else if(!(w===S||f(w,S,n,s,u))){C=!1;break}}return u.delete(i),u.delete(r),C}B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_equalByTag.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js"),v=o("./node_modules/_lodash@4.17.20@lodash/eq.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_mapToArray.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),i=1,r=2,n="[object Boolean]",s="[object Date]",f="[object Error]",u="[object Map]",d="[object Number]",b="[object RegExp]",_="[object Set]",x="[object String]",M="[object Symbol]",P="[object ArrayBuffer]",C="[object DataView]",O=e?e.prototype:void 0,w=O?O.valueOf:void 0;function S(I,j,N,W,H,J,Q){switch(N){case C:if(I.byteLength!=j.byteLength||I.byteOffset!=j.byteOffset)return!1;I=I.buffer,j=j.buffer;case P:return!(I.byteLength!=j.byteLength||!J(new g(I),new g(j)));case n:case s:case d:return v(+I,+j);case f:return I.name==j.name&&I.message==j.message;case b:case x:return I==j+"";case u:var ne=c;case _:var K=W&i;if(ne||(ne=h),I.size!=j.size&&!K)return!1;var ie=Q.get(I);if(ie)return ie==j;W|=r,Q.set(I,j);var de=p(ne(I),ne(j),W,H,J,Q);return Q.delete(I),de;case M:if(w)return w.call(I)==w.call(j)}return!1}B.exports=S},"./node_modules/_lodash@4.17.20@lodash/_equalObjects.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),g=1,v=Object.prototype,p=v.hasOwnProperty;function c(h,i,r,n,s,f){var u=r&g,d=e(h),b=d.length,_=e(i),x=_.length;if(b!=x&&!u)return!1;for(var M=b;M--;){var P=d[M];if(!(u?P in i:p.call(i,P)))return!1}var C=f.get(h),O=f.get(i);if(C&&O)return C==i&&O==h;var w=!0;f.set(h,i),f.set(i,h);for(var S=u;++M<b;){P=d[M];var I=h[P],j=i[P];if(n)var N=u?n(j,I,P,i,h,f):n(I,j,P,h,i,f);if(!(N===void 0?I===j||s(I,j,r,n,f):N)){w=!1;break}S||(S=P=="constructor")}if(w&&!S){var W=h.constructor,H=i.constructor;W!=H&&"constructor"in h&&"constructor"in i&&!(typeof W=="function"&&W instanceof W&&typeof H=="function"&&H instanceof H)&&(w=!1)}return f.delete(h),f.delete(i),w}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_flatRest.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/flatten.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function p(c){return v(g(c,void 0,e),c+"")}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js":function(B,L,o){(function(e){var g=typeof e=="object"&&e&&e.Object===Object&&e;B.exports=g}).call(this,o("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),v=o("./node_modules/_lodash@4.17.20@lodash/keys.js");function p(c){return e(c,v,g)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js"),v=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function p(c){return e(c,v,g)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_getMapData.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_isKeyable.js");function g(v,p){var c=v.__data__;return e(p)?c[typeof p=="string"?"string":"hash"]:c.map}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_getMatchData.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),g=o("./node_modules/_lodash@4.17.20@lodash/keys.js");function v(p){for(var c=g(p),h=c.length;h--;){var i=c[h],r=p[i];c[h]=[i,r,e(r)]}return c}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_getNative.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getValue.js");function v(p,c){var h=g(p,c);return e(h)?h:void 0}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_getPrototype.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),g=e(Object.getPrototypeOf,Object);B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_getRawTag.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),g=Object.prototype,v=g.hasOwnProperty,p=g.toString,c=e?e.toStringTag:void 0;function h(i){var r=v.call(i,c),n=i[c];try{i[c]=void 0;var s=!0}catch(u){}var f=p.call(i);return s&&(r?i[c]=n:delete i[c]),f}B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbols.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),g=o("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),v=Object.prototype,p=v.propertyIsEnumerable,c=Object.getOwnPropertySymbols,h=c?function(i){return i==null?[]:(i=Object(i),e(c(i),function(r){return p.call(i,r)}))}:g;B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),p=o("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),c=Object.getOwnPropertySymbols,h=c?function(i){for(var r=[];i;)e(r,v(i)),i=g(i);return r}:p;B.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getTag.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_DataView.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_Map.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_Promise.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_Set.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_WeakMap.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),i=o("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),r="[object Map]",n="[object Object]",s="[object Promise]",f="[object Set]",u="[object WeakMap]",d="[object DataView]",b=i(e),_=i(g),x=i(v),M=i(p),P=i(c),C=h;(e&&C(new e(new ArrayBuffer(1)))!=d||g&&C(new g)!=r||v&&C(v.resolve())!=s||p&&C(new p)!=f||c&&C(new c)!=u)&&(C=function(w){var S=h(w),I=S==n?w.constructor:void 0,j=I?i(I):"";if(j)switch(j){case b:return d;case _:return r;case x:return s;case M:return f;case P:return u}return S}),B.exports=C},"./node_modules/_lodash@4.17.20@lodash/_getValue.js":function(B,L){function o(e,g){return e==null?void 0:e[g]}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_hasPath.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=o("./node_modules/_lodash@4.17.20@lodash/isLength.js"),h=o("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function i(r,n,s){n=e(n,r);for(var f=-1,u=n.length,d=!1;++f<u;){var b=h(n[f]);if(!(d=r!=null&&s(r,b)))break;r=r[b]}return d||++f!=u?d:(u=r==null?0:r.length,!!u&&c(u)&&p(b,u)&&(v(r)||g(r)))}B.exports=i},"./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js":function(B,L){var o="\\ud800-\\udfff",e="\\u0300-\\u036f",g="\\ufe20-\\ufe2f",v="\\u20d0-\\u20ff",p=e+g+v,c="\\ufe0e\\ufe0f",h="\\u200d",i=RegExp("["+h+o+p+c+"]");function r(n){return i.test(n)}B.exports=r},"./node_modules/_lodash@4.17.20@lodash/_hashClear.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js");function g(){this.__data__=e?e(null):{},this.size=0}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_hashDelete.js":function(B,L){function o(e){var g=this.has(e)&&delete this.__data__[e];return this.size-=g?1:0,g}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_hashGet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),g="__lodash_hash_undefined__",v=Object.prototype,p=v.hasOwnProperty;function c(h){var i=this.__data__;if(e){var r=i[h];return r===g?void 0:r}return p.call(i,h)?i[h]:void 0}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_hashHas.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),g=Object.prototype,v=g.hasOwnProperty;function p(c){var h=this.__data__;return e?h[c]!==void 0:v.call(h,c)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_hashSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),g="__lodash_hash_undefined__";function v(p,c){var h=this.__data__;return this.size+=this.has(p)?0:1,h[p]=e&&c===void 0?g:c,this}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js":function(B,L){var o=Object.prototype,e=o.hasOwnProperty;function g(v){var p=v.length,c=new v.constructor(p);return p&&typeof v[0]=="string"&&e.call(v,"index")&&(c.index=v.index,c.input=v.input),c}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),h="[object Boolean]",i="[object Date]",r="[object Map]",n="[object Number]",s="[object RegExp]",f="[object Set]",u="[object String]",d="[object Symbol]",b="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",I="[object Uint16Array]",j="[object Uint32Array]";function N(W,H,J){var Q=W.constructor;switch(H){case b:return e(W);case h:case i:return new Q(+W);case _:return g(W,J);case x:case M:case P:case C:case O:case w:case S:case I:case j:return c(W,J);case r:return new Q;case n:case u:return new Q(W);case s:return v(W);case f:return new Q;case d:return p(W)}}B.exports=N},"./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js");function p(c){return typeof c.constructor=="function"&&!v(c)?e(g(c)):{}}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),p=e?e.isConcatSpreadable:void 0;function c(h){return v(h)||g(h)||!!(p&&h&&h[p])}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isIndex.js":function(B,L){var o=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function g(v,p){var c=typeof v;return p=p==null?o:p,!!p&&(c=="number"||c!="symbol"&&e.test(v))&&v>-1&&v%1==0&&v<p}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/eq.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isObject.js");function c(h,i,r){if(!p(r))return!1;var n=typeof i;return(n=="number"?g(r)&&v(i,r.length):n=="string"&&i in r)?e(r[i],h):!1}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isKey.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/;function c(h,i){if(e(h))return!1;var r=typeof h;return r=="number"||r=="symbol"||r=="boolean"||h==null||g(h)?!0:p.test(h)||!v.test(h)||i!=null&&h in Object(i)}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isKeyable.js":function(B,L){function o(e){var g=typeof e;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?e!=="__proto__":e===null}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_isMasked.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_coreJsData.js"),g=function(){var p=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}();function v(p){return!!g&&g in p}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_isPrototype.js":function(B,L){var o=Object.prototype;function e(g){var v=g&&g.constructor,p=typeof v=="function"&&v.prototype||o;return g===p}B.exports=e},"./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isObject.js");function g(v){return v===v&&!e(v)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js":function(B,L){function o(){this.__data__=[],this.size=0}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js"),g=Array.prototype,v=g.splice;function p(c){var h=this.__data__,i=e(h,c);if(i<0)return!1;var r=h.length-1;return i==r?h.pop():v.call(h,i,1),--this.size,!0}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function g(v){var p=this.__data__,c=e(p,v);return c<0?void 0:p[c][1]}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function g(v){return e(this.__data__,v)>-1}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function g(v,p){var c=this.__data__,h=e(c,v);return h<0?(++this.size,c.push([v,p])):c[h][1]=p,this}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_Hash.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_Map.js");function p(){this.size=0,this.__data__={hash:new e,map:new(v||g),string:new e}}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function g(v){var p=e(this,v).delete(v);return this.size-=p?1:0,p}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function g(v){return e(this,v).get(v)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function g(v){return e(this,v).has(v)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function g(v,p){var c=e(this,v),h=c.size;return c.set(v,p),this.size+=c.size==h?0:1,this}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_mapToArray.js":function(B,L){function o(e){var g=-1,v=Array(e.size);return e.forEach(function(p,c){v[++g]=[c,p]}),v}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js":function(B,L){function o(e,g){return function(v){return v==null?!1:v[e]===g&&(g!==void 0||e in Object(v))}}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/memoize.js"),g=500;function v(p){var c=e(p,function(i){return h.size===g&&h.clear(),i}),h=c.cache;return c}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),g=e(Object,"create");B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),g=e(Object.keys,Object);B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js":function(B,L){function o(e){var g=[];if(e!=null)for(var v in Object(e))g.push(v);return g}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js":function(B,L,o){(function(e){var g=o("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),v=L&&!L.nodeType&&L,p=v&&typeof e=="object"&&e&&!e.nodeType&&e,c=p&&p.exports===v,h=c&&g.process,i=function(){try{var r=p&&p.require&&p.require("util").types;return r||h&&h.binding&&h.binding("util")}catch(n){}}();e.exports=i}).call(this,o("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(B))},"./node_modules/_lodash@4.17.20@lodash/_objectToString.js":function(B,L){var o=Object.prototype,e=o.toString;function g(v){return e.call(v)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_overArg.js":function(B,L){function o(e,g){return function(v){return e(g(v))}}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_overRest.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_apply.js"),g=Math.max;function v(p,c,h){return c=g(c===void 0?p.length-1:c,0),function(){for(var i=arguments,r=-1,n=g(i.length-c,0),s=Array(n);++r<n;)s[r]=i[c+r];r=-1;for(var f=Array(c+1);++r<c;)f[r]=i[r];return f[c]=h(s),e(p,this,f)}}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_root.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),g=typeof self=="object"&&self&&self.Object===Object&&self,v=e||g||Function("return this")();B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_safeGet.js":function(B,L){function o(e,g){if(!(g==="constructor"&&typeof e[g]=="function")&&g!="__proto__")return e[g]}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js":function(B,L){var o="__lodash_hash_undefined__";function e(g){return this.__data__.set(g,o),this}B.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js":function(B,L){function o(e){return this.__data__.has(e)}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_setToArray.js":function(B,L){function o(e){var g=-1,v=Array(e.size);return e.forEach(function(p){v[++g]=p}),v}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_setToString.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_shortOut.js"),v=g(e);B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_shortOut.js":function(B,L){var o=800,e=16,g=Date.now;function v(p){var c=0,h=0;return function(){var i=g(),r=e-(i-h);if(h=i,r>0){if(++c>=o)return arguments[0]}else c=0;return p.apply(void 0,arguments)}}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_stackClear.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_ListCache.js");function g(){this.__data__=new e,this.size=0}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_stackDelete.js":function(B,L){function o(e){var g=this.__data__,v=g.delete(e);return this.size=g.size,v}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_stackGet.js":function(B,L){function o(e){return this.__data__.get(e)}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_stackHas.js":function(B,L){function o(e){return this.__data__.has(e)}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_stackSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_Map.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),p=200;function c(h,i){var r=this.__data__;if(r instanceof e){var n=r.__data__;if(!g||n.length<p-1)return n.push([h,i]),this.size=++r.size,this;r=this.__data__=new v(n)}return r.set(h,i),this.size=r.size,this}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js":function(B,L){function o(e,g,v){for(var p=v-1,c=e.length;++p<c;)if(e[p]===g)return p;return-1}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/_stringSize.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_asciiSize.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js");function p(c){return g(c)?v(c):e(c)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_stringToPath.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js"),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,p=e(function(c){var h=[];return c.charCodeAt(0)===46&&h.push(""),c.replace(g,function(i,r,n,s){h.push(n?s.replace(v,"$1"):r||i)}),h});B.exports=p},"./node_modules/_lodash@4.17.20@lodash/_toKey.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),g=1/0;function v(p){if(typeof p=="string"||e(p))return p;var c=p+"";return c=="0"&&1/p==-g?"-0":c}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/_toSource.js":function(B,L){var o=Function.prototype,e=o.toString;function g(v){if(v!=null){try{return e.call(v)}catch(p){}try{return v+""}catch(p){}}return""}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js":function(B,L){var o="\\ud800-\\udfff",e="\\u0300-\\u036f",g="\\ufe20-\\ufe2f",v="\\u20d0-\\u20ff",p=e+g+v,c="\\ufe0e\\ufe0f",h="["+o+"]",i="["+p+"]",r="\\ud83c[\\udffb-\\udfff]",n="(?:"+i+"|"+r+")",s="[^"+o+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",b=n+"?",_="["+c+"]?",x="(?:"+d+"(?:"+[s,f,u].join("|")+")"+_+b+")*",M=_+b+x,P="(?:"+[s+i+"?",i,f,u,h].join("|")+")",C=RegExp(r+"(?="+r+")|"+P+M,"g");function O(w){for(var S=C.lastIndex=0;C.test(w);)++S;return S}B.exports=O},"./node_modules/_lodash@4.17.20@lodash/clone.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),g=4;function v(p){return e(p,g)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/cloneDeep.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),g=1,v=4;function p(c){return e(c,g|v)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/constant.js":function(B,L){function o(e){return function(){return e}}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/defaults.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),g=o("./node_modules/_lodash@4.17.20@lodash/eq.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),p=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),c=Object.prototype,h=c.hasOwnProperty,i=e(function(r,n){r=Object(r);var s=-1,f=n.length,u=f>2?n[2]:void 0;for(u&&v(n[0],n[1],u)&&(f=1);++s<f;)for(var d=n[s],b=p(d),_=-1,x=b.length;++_<x;){var M=b[_],P=r[M];(P===void 0||g(P,c[M])&&!h.call(r,M))&&(r[M]=d[M])}return r});B.exports=i},"./node_modules/_lodash@4.17.20@lodash/each.js":function(B,L,o){B.exports=o("./node_modules/_lodash@4.17.20@lodash/forEach.js")},"./node_modules/_lodash@4.17.20@lodash/eq.js":function(B,L){function o(e,g){return e===g||e!==e&&g!==g}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/filter.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseFilter.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isArray.js");function c(h,i){var r=p(h)?e:g;return r(h,v(i,3))}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/find.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_createFind.js"),g=o("./node_modules/_lodash@4.17.20@lodash/findIndex.js"),v=e(g);B.exports=v},"./node_modules/_lodash@4.17.20@lodash/findIndex.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),v=o("./node_modules/_lodash@4.17.20@lodash/toInteger.js"),p=Math.max;function c(h,i,r){var n=h==null?0:h.length;if(!n)return-1;var s=r==null?0:v(r);return s<0&&(s=p(n+s,0)),e(h,g(i,3),s)}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/flatten.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js");function g(v){var p=v==null?0:v.length;return p?e(v,1):[]}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/forEach.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isArray.js");function c(h,i){var r=p(h)?e:g;return r(h,v(i))}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/forIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),v=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function p(c,h){return c==null?c:e(c,g(h),v)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/get.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function g(v,p,c){var h=v==null?void 0:e(v,p);return h===void 0?c:h}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/has.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseHas.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function v(p,c){return p!=null&&g(p,c,e)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/hasIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function v(p,c){return p!=null&&g(p,c,e)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/identity.js":function(B,L){function o(e){return e}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/isArguments.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),v=Object.prototype,p=v.hasOwnProperty,c=v.propertyIsEnumerable,h=e(function(){return arguments}())?e:function(i){return g(i)&&p.call(i,"callee")&&!c.call(i,"callee")};B.exports=h},"./node_modules/_lodash@4.17.20@lodash/isArray.js":function(B,L){var o=Array.isArray;B.exports=o},"./node_modules/_lodash@4.17.20@lodash/isArrayLike.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isLength.js");function v(p){return p!=null&&g(p.length)&&!e(p)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function v(p){return g(p)&&e(p)}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/isBuffer.js":function(B,L,o){(function(e){var g=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),v=o("./node_modules/_lodash@4.17.20@lodash/stubFalse.js"),p=L&&!L.nodeType&&L,c=p&&typeof e=="object"&&e&&!e.nodeType&&e,h=c&&c.exports===p,i=h?g.Buffer:void 0,r=i?i.isBuffer:void 0,n=r||v;e.exports=n}).call(this,o("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(B))},"./node_modules/_lodash@4.17.20@lodash/isEmpty.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),h=o("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=o("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),r=o("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n="[object Map]",s="[object Set]",f=Object.prototype,u=f.hasOwnProperty;function d(b){if(b==null)return!0;if(c(b)&&(p(b)||typeof b=="string"||typeof b.splice=="function"||h(b)||r(b)||v(b)))return!b.length;var _=g(b);if(_==n||_==s)return!b.size;if(i(b))return!e(b).length;for(var x in b)if(u.call(b,x))return!1;return!0}B.exports=d},"./node_modules/_lodash@4.17.20@lodash/isFunction.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),v="[object AsyncFunction]",p="[object Function]",c="[object GeneratorFunction]",h="[object Proxy]";function i(r){if(!g(r))return!1;var n=e(r);return n==p||n==c||n==v||n==h}B.exports=i},"./node_modules/_lodash@4.17.20@lodash/isLength.js":function(B,L){var o=9007199254740991;function e(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}B.exports=e},"./node_modules/_lodash@4.17.20@lodash/isMap.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),p=v&&v.isMap,c=p?g(p):e;B.exports=c},"./node_modules/_lodash@4.17.20@lodash/isObject.js":function(B,L){function o(e){var g=typeof e;return e!=null&&(g=="object"||g=="function")}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/isObjectLike.js":function(B,L){function o(e){return e!=null&&typeof e=="object"}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/isPlainObject.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),p="[object Object]",c=Function.prototype,h=Object.prototype,i=c.toString,r=h.hasOwnProperty,n=i.call(Object);function s(f){if(!v(f)||e(f)!=p)return!1;var u=g(f);if(u===null)return!0;var d=r.call(u,"constructor")&&u.constructor;return typeof d=="function"&&d instanceof d&&i.call(d)==n}B.exports=s},"./node_modules/_lodash@4.17.20@lodash/isSet.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),p=v&&v.isSet,c=p?g(p):e;B.exports=c},"./node_modules/_lodash@4.17.20@lodash/isString.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),p="[object String]";function c(h){return typeof h=="string"||!g(h)&&v(h)&&e(h)==p}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/isSymbol.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),v="[object Symbol]";function p(c){return typeof c=="symbol"||g(c)&&e(c)==v}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/isTypedArray.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),p=v&&v.isTypedArray,c=p?g(p):e;B.exports=c},"./node_modules/_lodash@4.17.20@lodash/isUndefined.js":function(B,L){function o(e){return e===void 0}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/keys.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function p(c){return v(c)?e(c):g(c)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/keysIn.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function p(c){return v(c)?e(c,!0):g(c)}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/last.js":function(B,L){function o(e){var g=e==null?0:e.length;return g?e[g-1]:void 0}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/map.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isArray.js");function c(h,i){var r=p(h)?e:v;return r(h,g(i,3))}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/mapValues.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js");function p(c,h){var i={};return h=v(h,3),g(c,function(r,n,s){e(i,n,h(r,n,s))}),i}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/max.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseGt.js"),v=o("./node_modules/_lodash@4.17.20@lodash/identity.js");function p(c){return c&&c.length?e(c,v,g):void 0}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/memoize.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),g="Expected a function";function v(p,c){if(typeof p!="function"||c!=null&&typeof c!="function")throw new TypeError(g);var h=function i(){var r=arguments,n=c?c.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var f=p.apply(this,r);return i.cache=s.set(n,f)||s,f};return h.cache=new(v.Cache||e),h}v.Cache=e,B.exports=v},"./node_modules/_lodash@4.17.20@lodash/merge.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseMerge.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_createAssigner.js"),v=g(function(p,c,h){e(p,c,h)});B.exports=v},"./node_modules/_lodash@4.17.20@lodash/min.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseLt.js"),v=o("./node_modules/_lodash@4.17.20@lodash/identity.js");function p(c){return c&&c.length?e(c,v,g):void 0}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/minBy.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseLt.js");function p(c,h){return c&&c.length?e(c,g(h,2),v):void 0}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/noop.js":function(B,L){function o(){}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/now.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_root.js"),g=function(){return e.Date.now()};B.exports=g},"./node_modules/_lodash@4.17.20@lodash/pick.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_basePick.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_flatRest.js"),v=g(function(p,c){return p==null?{}:e(p,c)});B.exports=v},"./node_modules/_lodash@4.17.20@lodash/property.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function c(h){return v(h)?e(p(h)):g(h)}B.exports=c},"./node_modules/_lodash@4.17.20@lodash/range.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_createRange.js"),g=e();B.exports=g},"./node_modules/_lodash@4.17.20@lodash/reduce.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_baseReduce.js"),c=o("./node_modules/_lodash@4.17.20@lodash/isArray.js");function h(i,r,n){var s=c(i)?e:p,f=arguments.length<3;return s(i,v(r,4),n,f,g)}B.exports=h},"./node_modules/_lodash@4.17.20@lodash/size.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=o("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isString.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_stringSize.js"),h="[object Map]",i="[object Set]";function r(n){if(n==null)return 0;if(v(n))return p(n)?c(n):n.length;var s=g(n);return s==h||s==i?n.size:e(n).length}B.exports=r},"./node_modules/_lodash@4.17.20@lodash/sortBy.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),c=v(function(h,i){if(h==null)return[];var r=i.length;return r>1&&p(h,i[0],i[1])?i=[]:r>2&&p(i[0],i[1],i[2])&&(i=[i[0]]),g(h,e(i,1),[])});B.exports=c},"./node_modules/_lodash@4.17.20@lodash/stubArray.js":function(B,L){function o(){return[]}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/stubFalse.js":function(B,L){function o(){return!1}B.exports=o},"./node_modules/_lodash@4.17.20@lodash/toFinite.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/toNumber.js"),g=1/0,v=17976931348623157e292;function p(c){if(!c)return c===0?c:0;if(c=e(c),c===g||c===-g){var h=c<0?-1:1;return h*v}return c===c?c:0}B.exports=p},"./node_modules/_lodash@4.17.20@lodash/toInteger.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function g(v){var p=e(v),c=p%1;return p===p?c?p-c:p:0}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/toNumber.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),v=0/0,p=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,i=/^0o[0-7]+$/i,r=parseInt;function n(s){if(typeof s=="number")return s;if(g(s))return v;if(e(s)){var f=typeof s.valueOf=="function"?s.valueOf():s;s=e(f)?f+"":f}if(typeof s!="string")return s===0?s:+s;s=s.replace(p,"");var u=h.test(s);return u||i.test(s)?r(s.slice(2),u?2:8):c.test(s)?v:+s}B.exports=n},"./node_modules/_lodash@4.17.20@lodash/toPlainObject.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),g=o("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function v(p){return e(p,g(p))}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/toString.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseToString.js");function g(v){return v==null?"":e(v)}B.exports=g},"./node_modules/_lodash@4.17.20@lodash/transform.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),p=o("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=o("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),h=o("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=o("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=o("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),n=o("./node_modules/_lodash@4.17.20@lodash/isObject.js"),s=o("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js");function f(u,d,b){var _=h(u),x=_||i(u)||s(u);if(d=p(d,4),b==null){var M=u&&u.constructor;x?b=_?new M:[]:n(u)?b=r(M)?g(c(u)):{}:b={}}return(x?e:v)(u,function(P,C,O){return d(b,P,C,O)}),b}B.exports=f},"./node_modules/_lodash@4.17.20@lodash/union.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),v=o("./node_modules/_lodash@4.17.20@lodash/_baseUniq.js"),p=o("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),c=g(function(h){return v(e(h,1,p,!0))});B.exports=c},"./node_modules/_lodash@4.17.20@lodash/uniqueId.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/toString.js"),g=0;function v(p){var c=++g;return e(p)+c}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/values.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_baseValues.js"),g=o("./node_modules/_lodash@4.17.20@lodash/keys.js");function v(p){return p==null?[]:e(p,g(p))}B.exports=v},"./node_modules/_lodash@4.17.20@lodash/zipObject.js":function(B,L,o){var e=o("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),g=o("./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js");function v(p,c){return g(p||[],c||[],e)}B.exports=v},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(B,L){B.exports=g;var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function g(c){var h=[];return c.replace(e,function(i,r,n){var s=r.toLowerCase();for(n=p(n),s=="m"&&n.length>2&&(h.push([r].concat(n.splice(0,2))),s="l",r=r=="m"?"l":"L");;){if(n.length==o[s])return n.unshift(r),h.push(n);if(n.length<o[s])throw new Error("malformed path data");h.push([r].concat(n.splice(0,o[s])))}}),h}var v=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function p(c){var h=c.match(v);return h?h.map(Number):[]}},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(B,L,o){var e=o("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),g=o("./node_modules/_isarray@0.0.1@isarray/index.js"),v=o("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");B.exports=p;function p(r){if(!(this instanceof p))return new p(r);this._path=g(r)?r:e(r),this._path=v(this._path),this._path=i(this._path),this._path=h(this._path)}p.prototype.at=function(r,n){return this._walk(r,n).pos},p.prototype.length=function(){return this._walk(null).length},p.prototype._walk=function(r,n){for(var s=[0,0],f=[0,0,0],u=[0,0],d=0,b=0;b<this._path.length;b++){var _=this._path[b];if(_[0]==="M"){if(s[0]=_[1],s[1]=_[2],r===0)return{length:d,pos:s}}else if(_[0]==="C"){f[0]=u[0]=s[0],f[1]=u[1]=s[1],f[2]=d;for(var x=100,M=0;M<=x;M++){var P=M/x,C=I(_,P),O=j(_,P);if(d+=c(s[0],s[1],C,O),s[0]=C,s[1]=O,typeof r=="number"&&d>=r){var w=(d-r)/(d-f[2]),S=[s[0]*(1-w)+f[0]*w,s[1]*(1-w)+f[1]*w];return{length:d,pos:S}}f[0]=s[0],f[1]=s[1],f[2]=d}}else if(_[0]==="Q"){f[0]=u[0]=s[0],f[1]=u[1]=s[1],f[2]=d;for(var x=100,M=0;M<=x;M++){var P=M/x,C=N(_,P),O=W(_,P);if(d+=c(s[0],s[1],C,O),s[0]=C,s[1]=O,typeof r=="number"&&d>=r){var w=(d-r)/(d-f[2]),S=[s[0]*(1-w)+f[0]*w,s[1]*(1-w)+f[1]*w];return{length:d,pos:S}}f[0]=s[0],f[1]=s[1],f[2]=d}}else if(_[0]==="L"){if(f[0]=s[0],f[1]=s[1],f[2]=d,d+=c(s[0],s[1],_[1],_[2]),s[0]=_[1],s[1]=_[2],typeof r=="number"&&d>=r){var w=(d-r)/(d-f[2]),S=[s[0]*(1-w)+f[0]*w,s[1]*(1-w)+f[1]*w];return{length:d,pos:S}}f[0]=s[0],f[1]=s[1],f[2]=d}}return{length:d,pos:s};function I(H,J){return Math.pow(1-J,3)*u[0]+3*Math.pow(1-J,2)*J*H[1]+3*(1-J)*Math.pow(J,2)*H[3]+Math.pow(J,3)*H[5]}function j(H,J){return Math.pow(1-J,3)*u[1]+3*Math.pow(1-J,2)*J*H[2]+3*(1-J)*Math.pow(J,2)*H[4]+Math.pow(J,3)*H[6]}function N(H,J){return Math.pow(1-J,2)*u[0]+2*(1-J)*J*H[1]+Math.pow(J,2)*H[3]}function W(H,J){return Math.pow(1-J,2)*u[1]+2*(1-J)*J*H[2]+Math.pow(J,2)*H[4]}};function c(r,n,s,f){var u=r-s,d=n-f;return Math.sqrt(u*u+d*d)}function h(r){for(var n,s=0,f=0,u={S:{to:"C",x:3},T:{to:"Q",x:1}},d=0,b=r.length;d<b;d++){var _=r[d],x=u[_[0]];x&&(_[0]=x.to,n&&(n[0]===x.to?(s=2*n[x.x+2]-n[x.x],f=2*n[x.x+3]-n[x.x+1]):(s=n[n.length-2],f=n[n.length-1])),_.splice(1,0,s,f)),n=_}return r}function i(r){for(var n=[],s=["L",0,0],f,u=0,d=r.length;u<d;u++){var b=r[u];switch(b[0]){case"M":s=["L",b[1],b[2]],n.push(b);break;case"Z":n.push(s);break;case"H":f=n[n.length-1]||["L",0,0],n.push(["L",b[1],f[f.length-1]]);break;case"V":f=n[n.length-1]||["L",0,0],n.push(["L",f[f.length-2],b[1]]);break;default:n.push(b)}}return n}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(B,L,o){var e,g,v;(function(p,c){if(!0)g=[B],e=c,v=typeof e=="function"?e.apply(L,g):e,v!==void 0&&(B.exports=v);else var h})(this,function(p){"use strict";function c(b,_,x){return _ in b?Object.defineProperty(b,_,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[_]=x,b}var h=Object.assign||function(b){for(var _=1;_<arguments.length;_++){var x=arguments[_];for(var M in x)Object.prototype.hasOwnProperty.call(x,M)&&(b[M]=x[M])}return b};function i(b){if(Array.isArray(b)){for(var _=0,x=Array(b.length);_<b.length;_++)x[_]=b[_];return x}else return Array.from(b)}var r={order:2,precision:2,period:null};function n(b,_){var x=[],M=[];b.forEach(function(S,I){S[1]!==null&&(M.push(S),x.push(_[I]))});var P=M.reduce(function(S,I){return S+I[1]},0),C=P/M.length,O=M.reduce(function(S,I){var j=I[1]-C;return S+j*j},0),w=M.reduce(function(S,I,j){var N=x[j],W=I[1]-N[1];return S+W*W},0);return 1-w/O}function s(b,_){for(var x=b,M=b.length-1,P=[_],C=0;C<M;C++){for(var O=C,w=C+1;w<M;w++)Math.abs(x[C][w])>Math.abs(x[C][O])&&(O=w);for(var S=C;S<M+1;S++){var I=x[S][C];x[S][C]=x[S][O],x[S][O]=I}for(var j=C+1;j<M;j++)for(var N=M;N>=C;N--)x[N][j]-=x[N][C]*x[C][j]/x[C][C]}for(var W=M-1;W>=0;W--){for(var H=0,J=W+1;J<M;J++)H+=x[J][W]*P[J];P[W]=(x[M][W]-H)/x[W][W]}return P}function f(b,_){var x=Math.pow(10,_);return Math.round(b*x)/x}var u={linear:function(_,x){for(var M=[0,0,0,0,0],P=0,C=0;C<_.length;C++)_[C][1]!==null&&(P++,M[0]+=_[C][0],M[1]+=_[C][1],M[2]+=_[C][0]*_[C][0],M[3]+=_[C][0]*_[C][1],M[4]+=_[C][1]*_[C][1]);var O=P*M[2]-M[0]*M[0],w=P*M[3]-M[0]*M[1],S=O===0?0:f(w/O,x.precision),I=f(M[1]/P-S*M[0]/P,x.precision),j=function(H){return[f(H,x.precision),f(S*H+I,x.precision)]},N=_.map(function(W){return j(W[0])});return{points:N,predict:j,equation:[S,I],r2:f(n(_,N),x.precision),string:I===0?"y = "+S+"x":"y = "+S+"x + "+I}},exponential:function(_,x){for(var M=[0,0,0,0,0,0],P=0;P<_.length;P++)_[P][1]!==null&&(M[0]+=_[P][0],M[1]+=_[P][1],M[2]+=_[P][0]*_[P][0]*_[P][1],M[3]+=_[P][1]*Math.log(_[P][1]),M[4]+=_[P][0]*_[P][1]*Math.log(_[P][1]),M[5]+=_[P][0]*_[P][1]);var C=M[1]*M[2]-M[5]*M[5],O=Math.exp((M[2]*M[3]-M[5]*M[4])/C),w=(M[1]*M[4]-M[5]*M[3])/C,S=f(O,x.precision),I=f(w,x.precision),j=function(H){return[f(H,x.precision),f(S*Math.exp(I*H),x.precision)]},N=_.map(function(W){return j(W[0])});return{points:N,predict:j,equation:[S,I],string:"y = "+S+"e^("+I+"x)",r2:f(n(_,N),x.precision)}},logarithmic:function(_,x){for(var M=[0,0,0,0],P=_.length,C=0;C<P;C++)_[C][1]!==null&&(M[0]+=Math.log(_[C][0]),M[1]+=_[C][1]*Math.log(_[C][0]),M[2]+=_[C][1],M[3]+=Math.pow(Math.log(_[C][0]),2));var O=(P*M[1]-M[2]*M[0])/(P*M[3]-M[0]*M[0]),w=f(O,x.precision),S=f((M[2]-w*M[0])/P,x.precision),I=function(W){return[f(W,x.precision),f(f(S+w*Math.log(W),x.precision),x.precision)]},j=_.map(function(N){return I(N[0])});return{points:j,predict:I,equation:[S,w],string:"y = "+S+" + "+w+" ln(x)",r2:f(n(_,j),x.precision)}},power:function(_,x){for(var M=[0,0,0,0,0],P=_.length,C=0;C<P;C++)_[C][1]!==null&&(M[0]+=Math.log(_[C][0]),M[1]+=Math.log(_[C][1])*Math.log(_[C][0]),M[2]+=Math.log(_[C][1]),M[3]+=Math.pow(Math.log(_[C][0]),2));var O=(P*M[1]-M[0]*M[2])/(P*M[3]-Math.pow(M[0],2)),w=(M[2]-O*M[0])/P,S=f(Math.exp(w),x.precision),I=f(O,x.precision),j=function(H){return[f(H,x.precision),f(f(S*Math.pow(H,I),x.precision),x.precision)]},N=_.map(function(W){return j(W[0])});return{points:N,predict:j,equation:[S,I],string:"y = "+S+"x^"+I,r2:f(n(_,N),x.precision)}},polynomial:function(_,x){for(var M=[],P=[],C=0,O=0,w=_.length,S=x.order+1,I=0;I<S;I++){for(var j=0;j<w;j++)_[j][1]!==null&&(C+=Math.pow(_[j][0],I)*_[j][1]);M.push(C),C=0;for(var N=[],W=0;W<S;W++){for(var H=0;H<w;H++)_[H][1]!==null&&(O+=Math.pow(_[H][0],I+W));N.push(O),O=0}P.push(N)}P.push(M);for(var J=s(P,S).map(function(de){return f(de,x.precision)}),Q=function(we){return[f(we,x.precision),f(J.reduce(function(Re,_e,Ue){return Re+_e*Math.pow(we,Ue)},0),x.precision)]},ne=_.map(function(de){return Q(de[0])}),K="y = ",ie=J.length-1;ie>=0;ie--)ie>1?K+=J[ie]+"x^"+ie+" + ":ie===1?K+=J[ie]+"x + ":K+=J[ie];return{string:K,points:ne,predict:Q,equation:[].concat(i(J)).reverse(),r2:f(n(_,ne),x.precision)}}};function d(){var b=function(x,M){return h({_round:f},x,c({},M,function(P,C){return u[M](P,h({},r,C))}))};return Object.keys(u).reduce(b,{})}p.exports=d()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";function g(V){if(V.length===0)return 0;for(var re,te=V[0],q=0,ve=1;ve<V.length;ve++)re=te+V[ve],Math.abs(te)>=Math.abs(V[ve])?q+=te-re+V[ve]:q+=V[ve]-re+te,te=re;return te+q}function v(V){if(V.length===0)throw new Error("mean requires at least one data point");return g(V)/V.length}function p(V,re){var te,q,ve=v(V),Me=0;if(re===2)for(q=0;q<V.length;q++)Me+=(te=V[q]-ve)*te;else for(q=0;q<V.length;q++)Me+=Math.pow(V[q]-ve,re);return Me}function c(V){if(V.length===0)throw new Error("variance requires at least one data point");return p(V,2)/V.length}function h(V){if(V.length===1)return 0;var re=c(V);return Math.sqrt(re)}function i(V){if(V.length===0)throw new Error("mode requires at least one data point");if(V.length===1)return V[0];for(var re=V[0],te=NaN,q=0,ve=1,Me=1;Me<V.length+1;Me++)V[Me]!==re?(q<ve&&(q=ve,te=re),ve=1,re=V[Me]):ve++;return te}function r(V){return V.slice().sort(function(re,te){return re-te})}function n(V){if(V.length===0)throw new Error("min requires at least one data point");for(var re=V[0],te=1;te<V.length;te++)V[te]<re&&(re=V[te]);return re}function s(V){if(V.length===0)throw new Error("max requires at least one data point");for(var re=V[0],te=1;te<V.length;te++)V[te]>re&&(re=V[te]);return re}function f(V,re){var te=V.length*re;if(V.length===0)throw new Error("quantile requires at least one data point.");if(re<0||1<re)throw new Error("quantiles must be between 0 and 1");return re===1?V[V.length-1]:re===0?V[0]:te%1!=0?V[Math.ceil(te)-1]:V.length%2==0?(V[te-1]+V[te])/2:V[te]}function u(V,re,te,q){for(te=te||0,q=q||V.length-1;te<q;){if(600<q-te){var ve=q-te+1,Me=re-te+1,De=Math.log(ve),ze=.5*Math.exp(2*De/3),We=.5*Math.sqrt(De*ze*(ve-ze)/ve);Me-ve/2<0&&(We*=-1),u(V,re,Math.max(te,Math.floor(re-Me*ze/ve+We)),Math.min(q,Math.floor(re+(ve-Me)*ze/ve+We)))}var He=V[re],$e=te,It=q;for(d(V,te,re),V[q]>He&&d(V,te,q);$e<It;){for(d(V,$e,It),$e++,It--;V[$e]<He;)$e++;for(;V[It]>He;)It--}V[te]===He?d(V,te,It):d(V,++It,q),It<=re&&(te=It+1),re<=It&&(q=It-1)}}function d(V,re,te){var q=V[re];V[re]=V[te],V[te]=q}function b(V,re){var te=V.slice();if(Array.isArray(re)){(function(Me,De){for(var ze=[0],We=0;We<De.length;We++)ze.push(M(Me.length,De[We]));ze.push(Me.length-1),ze.sort(x);for(var He=[0,ze.length-1];He.length;){var $e=Math.ceil(He.pop()),It=Math.floor(He.pop());if(!($e-It<=1)){var Yt=Math.floor((It+$e)/2);_(Me,ze[Yt],ze[It],ze[$e]),He.push(It,Yt,Yt,$e)}}})(te,re);for(var q=[],ve=0;ve<re.length;ve++)q[ve]=f(te,re[ve]);return q}return _(te,M(te.length,re),0,te.length-1),f(te,re)}function _(V,re,te,q){re%1==0?u(V,re,te,q):(u(V,re=Math.floor(re),te,q),u(V,re+1,re+1,q))}function x(V,re){return V-re}function M(V,re){var te=V*re;return re===1?V-1:re===0?0:te%1!=0?Math.ceil(te)-1:V%2==0?te-.5:te}function P(V,re){if(re<V[0])return 0;if(re>V[V.length-1])return 1;var te=function(Me,De){for(var ze=0,We=0,He=Me.length;We<He;)De<=Me[ze=We+He>>>1]?He=ze:We=-~ze;return We}(V,re);if(V[te]!==re)return te/V.length;te++;var q=function(Me,De){for(var ze=0,We=0,He=Me.length;We<He;)De>=Me[ze=We+He>>>1]?We=-~ze:He=ze;return We}(V,re);if(q===te)return te/V.length;var ve=q-te+1;return ve*(q+te)/2/ve/V.length}function C(V){var re=b(V,.75),te=b(V,.25);if(typeof re=="number"&&typeof te=="number")return re-te}function O(V){return+b(V,.5)}function w(V){for(var re=O(V),te=[],q=0;q<V.length;q++)te.push(Math.abs(V[q]-re));return O(te)}function S(V,re){re=re||Math.random;for(var te,q,ve=V.length;0<ve;)q=Math.floor(re()*ve--),te=V[ve],V[ve]=V[q],V[q]=te;return V}function I(V,re){return S(V.slice().slice(),re)}function j(V){for(var re,te=0,q=0;q<V.length;q++)q!==0&&V[q]===re||(re=V[q],te++);return te}function N(V,re){for(var te=[],q=0;q<V;q++){for(var ve=[],Me=0;Me<re;Me++)ve.push(0);te.push(ve)}return te}function W(V,re,te,q){var ve;if(0<V){var Me=(te[re]-te[V-1])/(re-V+1);ve=q[re]-q[V-1]-(re-V+1)*Me*Me}else ve=q[re]-te[re]*te[re]/(re+1);return ve<0?0:ve}function H(V,re,te,q,ve,Me,De){if(!(re<V)){var ze=Math.floor((V+re)/2);q[te][ze]=q[te-1][ze-1],ve[te][ze]=ze;var We=te;te<V&&(We=Math.max(We,ve[te][V-1]||0)),We=Math.max(We,ve[te-1][ze]||0);var He,$e,It,Yt=ze-1;re<q.length-1&&(Yt=Math.min(Yt,ve[te][re+1]||0));for(var rr=Yt;We<=rr&&!((He=W(rr,ze,Me,De))+q[te-1][We-1]>=q[te][ze]);--rr)($e=W(We,ze,Me,De)+q[te-1][We-1])<q[te][ze]&&(q[te][ze]=$e,ve[te][ze]=We),We++,(It=He+q[te-1][rr-1])<q[te][ze]&&(q[te][ze]=It,ve[te][ze]=rr);H(V,ze-1,te,q,ve,Me,De),H(ze+1,re,te,q,ve,Me,De)}}function J(V,re){if(V.length!==re.length)throw new Error("sampleCovariance requires samples with equal lengths");if(V.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var te=v(V),q=v(re),ve=0,Me=0;Me<V.length;Me++)ve+=(V[Me]-te)*(re[Me]-q);return ve/(V.length-1)}function Q(V){if(V.length<2)throw new Error("sampleVariance requires at least two data points");return p(V,2)/(V.length-1)}function ne(V){var re=Q(V);return Math.sqrt(re)}function K(V,re,te,q){return(V*re+te*q)/(re+q)}function ie(V){if(V.length===0)throw new Error("rootMeanSquare requires at least one data point");for(var re=0,te=0;te<V.length;te++)re+=Math.pow(V[te],2);return Math.sqrt(re/V.length)}function de(){this.totalCount=0,this.data={}}function we(){this.weights=[],this.bias=0}de.prototype.train=function(V,re){for(var te in this.data[re]||(this.data[re]={}),V){var q=V[te];this.data[re][te]===void 0&&(this.data[re][te]={}),this.data[re][te][q]===void 0&&(this.data[re][te][q]=0),this.data[re][te][q]++}this.totalCount++},de.prototype.score=function(V){var re,te={};for(var q in V){var ve=V[q];for(re in this.data)te[re]={},this.data[re][q]?te[re][q+"_"+ve]=(this.data[re][q][ve]||0)/this.totalCount:te[re][q+"_"+ve]=0}var Me={};for(re in te)for(var De in Me[re]=0,te[re])Me[re]+=te[re][De];return Me},we.prototype.predict=function(V){if(V.length!==this.weights.length)return null;for(var re=0,te=0;te<this.weights.length;te++)re+=this.weights[te]*V[te];return 0<(re+=this.bias)?1:0},we.prototype.train=function(V,re){if(re!==0&&re!==1)return null;V.length!==this.weights.length&&(this.weights=V,this.bias=1);var te=this.predict(V);if(te!==re){for(var q=re-te,ve=0;ve<this.weights.length;ve++)this.weights[ve]+=q*V[ve];this.bias+=q}return this};var Re=1e-4;function _e(V){if(V<0)throw new Error("factorial requires a non-negative value");if(Math.floor(V)!==V)throw new Error("factorial requires an integer input");for(var re=1,te=2;te<=V;te++)re*=te;return re}var Ue=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],rt=Math.log(Math.sqrt(2*Math.PI)),Fe={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},Se=Math.sqrt(2*Math.PI),ye={gaussian:function(re){return Math.exp(-.5*re*re)/Se}},Oe={nrd:function(re){var te=ne(re),q=C(re);return typeof q=="number"&&(te=Math.min(te,q/1.34)),1.06*te*Math.pow(re.length,-.2)}};function ue(V,re,te){var q,ve;if(re===void 0)q=ye.gaussian;else if(typeof re=="string"){if(!ye[re])throw new Error('Unknown kernel "'+re+'"');q=ye[re]}else q=re;if(te===void 0)ve=Oe.nrd(V);else if(typeof te=="string"){if(!Oe[te])throw new Error('Unknown bandwidth method "'+te+'"');ve=Oe[te](V)}else ve=te;return function(Me){var De=0,ze=0;for(De=0;De<V.length;De++)ze+=q((Me-V[De])/ve);return ze/ve/V.length}}var xe=Math.sqrt(2*Math.PI);function Ae(V){for(var re=V,te=V,q=1;q<15;q++)re+=te*=V*V/(2*q+1);return Math.round(1e4*(.5+re/xe*Math.exp(-V*V/2)))/1e4}for(var pe=[],be=0;be<=3.09;be+=.01)pe.push(Ae(be));function le(V){var re=1/(1+.5*Math.abs(V)),te=re*Math.exp(-Math.pow(V,2)-1.26551223+1.00002368*re+.37409196*Math.pow(re,2)+.09678418*Math.pow(re,3)-.18628806*Math.pow(re,4)+.27886807*Math.pow(re,5)-1.13520398*Math.pow(re,6)+1.48851587*Math.pow(re,7)-.82215223*Math.pow(re,8)+.17087277*Math.pow(re,9));return 0<=V?1-te:te-1}function z(V){var re=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),te=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*re)+Math.log(1-V*V)/2,2)-Math.log(1-V*V)/re)-(2/(Math.PI*re)+Math.log(1-V*V)/2));return 0<=V?te:-te}function ae(V){if(typeof V=="number")return V<0?-1:V===0?0:1;throw new TypeError("not a number")}e.linearRegression=function(V){var re,te,q=V.length;if(q===1)te=V[re=0][1];else{for(var ve,Me,De,ze=0,We=0,He=0,$e=0,It=0;It<q;It++)ze+=Me=(ve=V[It])[0],We+=De=ve[1],He+=Me*Me,$e+=Me*De;te=We/q-(re=(q*$e-ze*We)/(q*He-ze*ze))*ze/q}return{m:re,b:te}},e.linearRegressionLine=function(V){return function(re){return V.b+V.m*re}},e.standardDeviation=h,e.rSquared=function(V,re){if(V.length<2)return 1;for(var te,q=0,ve=0;ve<V.length;ve++)q+=V[ve][1];te=q/V.length;for(var Me=0,De=0;De<V.length;De++)Me+=Math.pow(te-V[De][1],2);for(var ze=0,We=0;We<V.length;We++)ze+=Math.pow(V[We][1]-re(V[We][0]),2);return 1-ze/Me},e.mode=function(V){return i(r(V))},e.modeFast=function(V){for(var re,te=new Map,q=0,ve=0;ve<V.length;ve++){var Me=te.get(V[ve]);Me===void 0?Me=1:Me++,q<Me&&(re=V[ve],q=Me),te.set(V[ve],Me)}if(q===0)throw new Error("mode requires at last one data point");return re},e.modeSorted=i,e.min=n,e.max=s,e.extent=function(V){if(V.length===0)throw new Error("extent requires at least one data point");for(var re=V[0],te=V[0],q=1;q<V.length;q++)V[q]>te&&(te=V[q]),V[q]<re&&(re=V[q]);return[re,te]},e.minSorted=function(V){return V[0]},e.maxSorted=function(V){return V[V.length-1]},e.extentSorted=function(V){return[V[0],V[V.length-1]]},e.sum=g,e.sumSimple=function(V){for(var re=0,te=0;te<V.length;te++)re+=V[te];return re},e.product=function(V){for(var re=1,te=0;te<V.length;te++)re*=V[te];return re},e.quantile=b,e.quantileSorted=f,e.quantileRank=function(V,re){return P(r(V),re)},e.quantileRankSorted=P,e.interquartileRange=C,e.iqr=C,e.medianAbsoluteDeviation=w,e.mad=w,e.chunk=function(V,re){var te=[];if(re<1)throw new Error("chunk size must be a positive number");if(Math.floor(re)!==re)throw new Error("chunk size must be an integer");for(var q=0;q<V.length;q+=re)te.push(V.slice(q,q+re));return te},e.sampleWithReplacement=function(V,re,te){if(V.length===0)return[];te=te||Math.random;for(var q=V.length,ve=[],Me=0;Me<re;Me++){var De=Math.floor(te()*q);ve.push(V[De])}return ve},e.shuffle=I,e.shuffleInPlace=S,e.sample=function(V,re,te){return I(V,te).slice(0,re)},e.ckmeans=function(V,re){if(re>V.length)throw new Error("cannot generate more classes than there are data values");var te=r(V);if(j(te)===1)return[te];var q=N(re,te.length),ve=N(re,te.length);(function(He,$e,It){for(var Yt,rr=$e[0].length,ir=He[Math.floor(rr/2)],Br=[],tr=[],ft=0;ft<rr;++ft)Yt=He[ft]-ir,ft===0?(Br.push(Yt),tr.push(Yt*Yt)):(Br.push(Br[ft-1]+Yt),tr.push(tr[ft-1]+Yt*Yt)),$e[0][ft]=W(0,ft,Br,tr),It[0][ft]=0;for(var st=1;st<$e.length;++st)H(st<$e.length-1?st:rr-1,rr-1,st,$e,It,Br,tr)})(te,q,ve);for(var Me=[],De=ve[0].length-1,ze=ve.length-1;0<=ze;ze--){var We=ve[ze][De];Me[ze]=te.slice(We,De+1),0<ze&&(De=We-1)}return Me},e.uniqueCountSorted=j,e.sumNthPowerDeviations=p,e.equalIntervalBreaks=function(V,re){if(V.length<2)return V;for(var te=n(V),q=s(V),ve=[te],Me=(q-te)/re,De=1;De<re;De++)ve.push(ve[0]+Me*De);return ve.push(q),ve},e.sampleCovariance=J,e.sampleCorrelation=function(V,re){return J(V,re)/ne(V)/ne(re)},e.sampleVariance=Q,e.sampleStandardDeviation=ne,e.sampleSkewness=function(V){if(V.length<3)throw new Error("sampleSkewness requires at least three data points");for(var re,te=v(V),q=0,ve=0,Me=0;Me<V.length;Me++)q+=(re=V[Me]-te)*re,ve+=re*re*re;var De=V.length-1,ze=Math.sqrt(q/De),We=V.length;return We*ve/((We-1)*(We-2)*Math.pow(ze,3))},e.sampleKurtosis=function(V){var re=V.length;if(re<4)throw new Error("sampleKurtosis requires at least four data points");for(var te,q=v(V),ve=0,Me=0,De=0;De<re;De++)ve+=(te=V[De]-q)*te,Me+=te*te*te*te;return(re-1)/((re-2)*(re-3))*(re*(re+1)*Me/(ve*ve)-3*(re-1))},e.permutationsHeap=function(V){for(var re=new Array(V.length),te=[V.slice()],q=0;q<V.length;q++)re[q]=0;for(q=0;q<V.length;)if(re[q]<q){var ve=0;q%2!=0&&(ve=re[q]);var Me=V[ve];V[ve]=V[q],V[q]=Me,te.push(V.slice()),re[q]++,q=0}else re[q]=0,q++;return te},e.combinations=function V(re,te){var q,ve,Me,De,ze=[];for(q=0;q<re.length;q++)if(te===1)ze.push([re[q]]);else for(Me=V(re.slice(q+1,re.length),te-1),ve=0;ve<Me.length;ve++)(De=Me[ve]).unshift(re[q]),ze.push(De);return ze},e.combinationsReplacement=function V(re,te){for(var q=[],ve=0;ve<re.length;ve++)if(te===1)q.push([re[ve]]);else for(var Me=V(re.slice(ve,re.length),te-1),De=0;De<Me.length;De++)q.push([re[ve]].concat(Me[De]));return q},e.addToMean=function(V,re,te){return V+(te-V)/(re+1)},e.combineMeans=K,e.combineVariances=function(V,re,te,q,ve,Me){var De=K(re,te,ve,Me);return(te*(V+Math.pow(re-De,2))+Me*(q+Math.pow(ve-De,2)))/(te+Me)},e.geometricMean=function(V){if(V.length===0)throw new Error("geometricMean requires at least one data point");for(var re=1,te=0;te<V.length;te++){if(V[te]<=0)throw new Error("geometricMean requires only positive numbers as input");re*=V[te]}return Math.pow(re,1/V.length)},e.harmonicMean=function(V){if(V.length===0)throw new Error("harmonicMean requires at least one data point");for(var re=0,te=0;te<V.length;te++){if(V[te]<=0)throw new Error("harmonicMean requires only positive numbers as input");re+=1/V[te]}return V.length/re},e.average=v,e.mean=v,e.median=O,e.medianSorted=function(V){return f(V,.5)},e.subtractFromMean=function(V,re,te){return(V*re-te)/(re-1)},e.rootMeanSquare=ie,e.rms=ie,e.variance=c,e.tTest=function(V,re){return(v(V)-re)/(h(V)/Math.sqrt(V.length))},e.tTestTwoSample=function(V,re,te){var q=V.length,ve=re.length;if(!q||!ve)return null;te||(te=0);var Me=v(V),De=v(re),ze=Q(V),We=Q(re);if(typeof Me=="number"&&typeof De=="number"&&typeof ze=="number"&&typeof We=="number"){var He=((q-1)*ze+(ve-1)*We)/(q+ve-2);return(Me-De-te)/Math.sqrt(He*(1/q+1/ve))}},e.BayesianClassifier=de,e.bayesian=de,e.PerceptronModel=we,e.perceptron=we,e.epsilon=Re,e.factorial=_e,e.gamma=function V(re){if(typeof(te=re)=="number"&&isFinite(te)&&Math.floor(te)===te)return re<=0?NaN:_e(re-1);var te;if(--re<0)return Math.PI/(Math.sin(Math.PI*-re)*V(-re));var q=re+.25;return Math.pow(re/Math.E,re)*Math.sqrt(2*Math.PI*(re+1/6))*(1+1/144/Math.pow(q,2)-1/12960/Math.pow(q,3)-257/207360/Math.pow(q,4)-52/2612736/Math.pow(q,5)+5741173/9405849600/Math.pow(q,6)+37529/18811699200/Math.pow(q,7))},e.gammaln=function(V){if(V<=0)return 1/0;V--;for(var re=Ue[0],te=1;te<15;te++)re+=Ue[te]/(V+te);var q=5.2421875+V;return rt+Math.log(re)-q+(V+.5)*Math.log(q)},e.bernoulliDistribution=function(V){if(V<0||1<V)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-V,V]},e.binomialDistribution=function(V,re){if(!(re<0||1<re||V<=0||V%1!=0)){for(var te=0,q=0,ve=[],Me=1;ve[te]=Me*Math.pow(re,te)*Math.pow(1-re,V-te),q+=ve[te],Me=Me*(V-++te+1)/te,q<1-Re;);return ve}},e.poissonDistribution=function(V){if(!(V<=0)){for(var re=0,te=0,q=[],ve=1;q[re]=Math.exp(-V)*Math.pow(V,re)/ve,te+=q[re],ve*=++re,te<1-Re;);return q}},e.chiSquaredDistributionTable=Fe,e.chiSquaredGoodnessOfFit=function(V,re,te){for(var q,ve,Me=0,De=re(v(V)),ze=[],We=[],He=0;He<V.length;He++)ze[V[He]]===void 0&&(ze[V[He]]=0),ze[V[He]]++;for(He=0;He<ze.length;He++)ze[He]===void 0&&(ze[He]=0);for(ve in De)ve in ze&&(We[+ve]=De[ve]*V.length);for(ve=We.length-1;0<=ve;ve--)We[ve]<3&&(We[ve-1]+=We[ve],We.pop(),ze[ve-1]+=ze[ve],ze.pop());for(ve=0;ve<ze.length;ve++)Me+=Math.pow(ze[ve]-We[ve],2)/We[ve];return q=ze.length-1-1,Fe[q][te]<Me},e.kernelDensityEstimation=ue,e.kde=ue,e.zScore=function(V,re,te){return(V-re)/te},e.cumulativeStdNormalProbability=function(V){var re=Math.abs(V),te=Math.min(Math.round(100*re),pe.length-1);return 0<=V?pe[te]:+(1-pe[te]).toFixed(4)},e.standardNormalTable=pe,e.errorFunction=le,e.erf=le,e.inverseErrorFunction=z,e.probit=function(V){return V===0?V=Re:1<=V&&(V=1-Re),Math.sqrt(2)*z(2*V-1)},e.permutationTest=function(V,re,te,q){if(q===void 0&&(q=1e4),te===void 0&&(te="two_side"),te!=="two_side"&&te!=="greater"&&te!=="less")throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var ve=v(V)-v(re),Me=new Array(q),De=V.concat(re),ze=Math.floor(De.length/2),We=0;We<q;We++){S(De);var He=De.slice(0,ze),$e=De.slice(ze,De.length),It=v(He)-v($e);Me[We]=It}var Yt=0;if(te==="two_side")for(We=0;We<=q;We++)Math.abs(Me[We])>=Math.abs(ve)&&(Yt+=1);else if(te==="greater")for(We=0;We<=q;We++)Me[We]>=ve&&(Yt+=1);else for(We=0;We<=q;We++)Me[We]<=ve&&(Yt+=1);return Yt/q},e.bisect=function(V,re,te,q,ve){if(typeof V!="function")throw new TypeError("func must be a function");for(var Me=0;Me<q;Me++){var De=(re+te)/2;if(V(De)===0||Math.abs((te-re)/2)<ve)return De;ae(V(De))===ae(V(re))?re=De:te=De}throw new Error("maximum number of iterations exceeded")},e.quickselect=u,e.sign=ae,e.numericSort=r,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(B,L,o){(function(e,g){g(L)})(this,function(e){"use strict";function g(O){return O}function v(O){if(O==null)return g;var w,S,I=O.scale[0],j=O.scale[1],N=O.translate[0],W=O.translate[1];return function(H,J){J||(w=S=0);var Q=2,ne=H.length,K=new Array(ne);for(K[0]=(w+=H[0])*I+N,K[1]=(S+=H[1])*j+W;Q<ne;)K[Q]=H[Q],++Q;return K}}function p(O){var w=v(O.transform),S,I=Infinity,j=I,N=-I,W=-I;function H(Q){Q=w(Q),Q[0]<I&&(I=Q[0]),Q[0]>N&&(N=Q[0]),Q[1]<j&&(j=Q[1]),Q[1]>W&&(W=Q[1])}function J(Q){switch(Q.type){case"GeometryCollection":Q.geometries.forEach(J);break;case"Point":H(Q.coordinates);break;case"MultiPoint":Q.coordinates.forEach(H);break}}O.arcs.forEach(function(Q){for(var ne=-1,K=Q.length,ie;++ne<K;)ie=w(Q[ne],ne),ie[0]<I&&(I=ie[0]),ie[0]>N&&(N=ie[0]),ie[1]<j&&(j=ie[1]),ie[1]>W&&(W=ie[1])});for(S in O.objects)J(O.objects[S]);return[I,j,N,W]}function c(O,w){for(var S,I=O.length,j=I-w;j<--I;)S=O[j],O[j++]=O[I],O[I]=S}function h(O,w){return typeof w=="string"&&(w=O.objects[w]),w.type==="GeometryCollection"?{type:"FeatureCollection",features:w.geometries.map(function(S){return i(O,S)})}:i(O,w)}function i(O,w){var S=w.id,I=w.bbox,j=w.properties==null?{}:w.properties,N=r(O,w);return S==null&&I==null?{type:"Feature",properties:j,geometry:N}:I==null?{type:"Feature",id:S,properties:j,geometry:N}:{type:"Feature",id:S,bbox:I,properties:j,geometry:N}}function r(O,w){var S=v(O.transform),I=O.arcs;function j(ne,K){K.length&&K.pop();for(var ie=I[ne<0?~ne:ne],de=0,we=ie.length;de<we;++de)K.push(S(ie[de],de));ne<0&&c(K,we)}function N(ne){return S(ne)}function W(ne){for(var K=[],ie=0,de=ne.length;ie<de;++ie)j(ne[ie],K);return K.length<2&&K.push(K[0]),K}function H(ne){for(var K=W(ne);K.length<4;)K.push(K[0]);return K}function J(ne){return ne.map(H)}function Q(ne){var K=ne.type,ie;switch(K){case"GeometryCollection":return{type:K,geometries:ne.geometries.map(Q)};case"Point":ie=N(ne.coordinates);break;case"MultiPoint":ie=ne.coordinates.map(N);break;case"LineString":ie=W(ne.arcs);break;case"MultiLineString":ie=ne.arcs.map(W);break;case"Polygon":ie=J(ne.arcs);break;case"MultiPolygon":ie=ne.arcs.map(J);break;default:return null}return{type:K,coordinates:ie}}return Q(w)}function n(O,w){var S={},I={},j={},N=[],W=-1;w.forEach(function(Q,ne){var K=O.arcs[Q<0?~Q:Q],ie;K.length<3&&!K[1][0]&&!K[1][1]&&(ie=w[++W],w[W]=Q,w[ne]=ie)}),w.forEach(function(Q){var ne=H(Q),K=ne[0],ie=ne[1],de,we;if(de=j[K])if(delete j[de.end],de.push(Q),de.end=ie,we=I[ie]){delete I[we.start];var Re=we===de?de:de.concat(we);I[Re.start=de.start]=j[Re.end=we.end]=Re}else I[de.start]=j[de.end]=de;else if(de=I[ie])if(delete I[de.start],de.unshift(Q),de.start=K,we=j[K]){delete j[we.end];var _e=we===de?de:we.concat(de);I[_e.start=we.start]=j[_e.end=de.end]=_e}else I[de.start]=j[de.end]=de;else de=[Q],I[de.start=K]=j[de.end=ie]=de});function H(Q){var ne=O.arcs[Q<0?~Q:Q],K=ne[0],ie;return O.transform?(ie=[0,0],ne.forEach(function(de){ie[0]+=de[0],ie[1]+=de[1]})):ie=ne[ne.length-1],Q<0?[ie,K]:[K,ie]}function J(Q,ne){for(var K in Q){var ie=Q[K];delete ne[ie.start],delete ie.start,delete ie.end,ie.forEach(function(de){S[de<0?~de:de]=1}),N.push(ie)}}return J(j,I),J(I,j),w.forEach(function(Q){S[Q<0?~Q:Q]||N.push([Q])}),N}function s(O){return r(O,f.apply(this,arguments))}function f(O,w,S){var I,j,N;if(arguments.length>1)I=u(O,w,S);else for(j=0,I=new Array(N=O.arcs.length);j<N;++j)I[j]=j;return{type:"MultiLineString",arcs:n(O,I)}}function u(O,w,S){var I=[],j=[],N;function W(K){var ie=K<0?~K:K;(j[ie]||(j[ie]=[])).push({i:K,g:N})}function H(K){K.forEach(W)}function J(K){K.forEach(H)}function Q(K){K.forEach(J)}function ne(K){switch(N=K,K.type){case"GeometryCollection":K.geometries.forEach(ne);break;case"LineString":H(K.arcs);break;case"MultiLineString":case"Polygon":J(K.arcs);break;case"MultiPolygon":Q(K.arcs);break}}return ne(w),j.forEach(S==null?function(K){I.push(K[0].i)}:function(K){S(K[0].g,K[K.length-1].g)&&I.push(K[0].i)}),I}function d(O){for(var w=-1,S=O.length,I,j=O[S-1],N=0;++w<S;)I=j,j=O[w],N+=I[0]*j[1]-I[1]*j[0];return Math.abs(N)}function b(O){return r(O,_.apply(this,arguments))}function _(O,w){var S={},I=[],j=[];w.forEach(N);function N(J){switch(J.type){case"GeometryCollection":J.geometries.forEach(N);break;case"Polygon":W(J.arcs);break;case"MultiPolygon":J.arcs.forEach(W);break}}function W(J){J.forEach(function(Q){Q.forEach(function(ne){(S[ne=ne<0?~ne:ne]||(S[ne]=[])).push(J)})}),I.push(J)}function H(J){return d(r(O,{type:"Polygon",arcs:[J]}).coordinates[0])}return I.forEach(function(J){if(!J._){var Q=[],ne=[J];for(J._=1,j.push(Q);J=ne.pop();)Q.push(J),J.forEach(function(K){K.forEach(function(ie){S[ie<0?~ie:ie].forEach(function(de){de._||(de._=1,ne.push(de))})})})}}),I.forEach(function(J){delete J._}),{type:"MultiPolygon",arcs:j.map(function(J){var Q=[],ne;if(J.forEach(function(Re){Re.forEach(function(_e){_e.forEach(function(Ue){S[Ue<0?~Ue:Ue].length<2&&Q.push(Ue)})})}),Q=n(O,Q),(ne=Q.length)>1)for(var K=1,ie=H(Q[0]),de,we;K<ne;++K)(de=H(Q[K]))>ie&&(we=Q[0],Q[0]=Q[K],Q[K]=we,ie=de);return Q}).filter(function(J){return J.length>0})}}function x(O,w){for(var S=0,I=O.length;S<I;){var j=S+I>>>1;O[j]<w?S=j+1:I=j}return S}function M(O){var w={},S=O.map(function(){return[]});function I(Re,_e){Re.forEach(function(Ue){Ue<0&&(Ue=~Ue);var rt=w[Ue];rt?rt.push(_e):w[Ue]=[_e]})}function j(Re,_e){Re.forEach(function(Ue){I(Ue,_e)})}function N(Re,_e){Re.type==="GeometryCollection"?Re.geometries.forEach(function(Ue){N(Ue,_e)}):Re.type in W&&W[Re.type](Re.arcs,_e)}var W={LineString:I,MultiLineString:j,Polygon:j,MultiPolygon:function(_e,Ue){_e.forEach(function(rt){j(rt,Ue)})}};O.forEach(N);for(var H in w)for(var J=w[H],Q=J.length,ne=0;ne<Q;++ne)for(var K=ne+1;K<Q;++K){var ie=J[ne],de=J[K],we;(we=S[ie])[H=x(we,de)]!==de&&we.splice(H,0,de),(we=S[de])[H=x(we,ie)]!==ie&&we.splice(H,0,ie)}return S}function P(O){if(O==null)return g;var w,S,I=O.scale[0],j=O.scale[1],N=O.translate[0],W=O.translate[1];return function(H,J){J||(w=S=0);var Q=2,ne=H.length,K=new Array(ne),ie=Math.round((H[0]-N)/I),de=Math.round((H[1]-W)/j);for(K[0]=ie-w,w=ie,K[1]=de-S,S=de;Q<ne;)K[Q]=H[Q],++Q;return K}}function C(O,w){if(O.transform)throw new Error("already quantized");if(!w||!w.scale){if(!((W=Math.floor(w))>=2))throw new Error("n must be \u22652");J=O.bbox||p(O);var S=J[0],I=J[1],j=J[2],N=J[3],W;w={scale:[j-S?(j-S)/(W-1):1,N-I?(N-I)/(W-1):1],translate:[S,I]}}else J=O.bbox;var H=P(w),J,Q,ne=O.objects,K={};function ie(Re){return H(Re)}function de(Re){var _e;switch(Re.type){case"GeometryCollection":_e={type:"GeometryCollection",geometries:Re.geometries.map(de)};break;case"Point":_e={type:"Point",coordinates:ie(Re.coordinates)};break;case"MultiPoint":_e={type:"MultiPoint",coordinates:Re.coordinates.map(ie)};break;default:return Re}return Re.id!=null&&(_e.id=Re.id),Re.bbox!=null&&(_e.bbox=Re.bbox),Re.properties!=null&&(_e.properties=Re.properties),_e}function we(Re){var _e=0,Ue=1,rt=Re.length,Fe,Se=new Array(rt);for(Se[0]=H(Re[0],0);++_e<rt;)((Fe=H(Re[_e],_e))[0]||Fe[1])&&(Se[Ue++]=Fe);return Ue===1&&(Se[Ue++]=[0,0]),Se.length=Ue,Se}for(Q in ne)K[Q]=de(ne[Q]);return{type:"Topology",bbox:J,transform:w,objects:K,arcs:O.arcs.map(we)}}e.bbox=p,e.feature=h,e.merge=b,e.mergeArcs=_,e.mesh=s,e.meshArcs=f,e.neighbors=M,e.quantize=C,e.transform=v,e.untransform=P,Object.defineProperty(e,"__esModule",{value:!0})})},"./node_modules/_tslib@2.1.0@tslib/tslib.js":function(B,L,o){(function(e){var g,v;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var p,c,h,i,r,n,s,f,u,d,b,_,x,M,P,C,O,w,S,I,j,N,W,H;(function(J){var Q=typeof e=="object"?e:typeof self=="object"?self:typeof this=="object"?this:{};g=[L],v=function(K){J(ne(Q,ne(K)))}.apply(L,g),v!==void 0&&(B.exports=v);function ne(K,ie){return K!==Q&&(typeof Object.create=="function"?Object.defineProperty(K,"__esModule",{value:!0}):K.__esModule=!0),function(de,we){return K[de]=ie?ie(de,we):we}}})(function(J){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ie){K.__proto__=ie}||function(K,ie){for(var de in ie)Object.prototype.hasOwnProperty.call(ie,de)&&(K[de]=ie[de])};p=function(ie,de){if(typeof de!="function"&&de!==null)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");Q(ie,de);function we(){this.constructor=ie}ie.prototype=de===null?Object.create(de):(we.prototype=de.prototype,new we)},c=Object.assign||function(K){for(var ie,de=1,we=arguments.length;de<we;de++){ie=arguments[de];for(var Re in ie)Object.prototype.hasOwnProperty.call(ie,Re)&&(K[Re]=ie[Re])}return K},h=function(ie,de){var we={};for(var Re in ie)Object.prototype.hasOwnProperty.call(ie,Re)&&de.indexOf(Re)<0&&(we[Re]=ie[Re]);if(ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,Re=Object.getOwnPropertySymbols(ie);_e<Re.length;_e++)de.indexOf(Re[_e])<0&&Object.prototype.propertyIsEnumerable.call(ie,Re[_e])&&(we[Re[_e]]=ie[Re[_e]]);return we},i=function(ie,de,we,Re){var _e=arguments.length,Ue=_e<3?de:Re===null?Re=Object.getOwnPropertyDescriptor(de,we):Re,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ue=Reflect.decorate(ie,de,we,Re);else for(var Fe=ie.length-1;Fe>=0;Fe--)(rt=ie[Fe])&&(Ue=(_e<3?rt(Ue):_e>3?rt(de,we,Ue):rt(de,we))||Ue);return _e>3&&Ue&&Object.defineProperty(de,we,Ue),Ue},r=function(ie,de){return function(we,Re){de(we,Re,ie)}},n=function(ie,de){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ie,de)},s=function(ie,de,we,Re){function _e(Ue){return Ue instanceof we?Ue:new we(function(rt){rt(Ue)})}return new(we||(we=Promise))(function(Ue,rt){function Fe(Oe){try{ye(Re.next(Oe))}catch(ue){rt(ue)}}function Se(Oe){try{ye(Re.throw(Oe))}catch(ue){rt(ue)}}function ye(Oe){Oe.done?Ue(Oe.value):_e(Oe.value).then(Fe,Se)}ye((Re=Re.apply(ie,de||[])).next())})},f=function(ie,de){var we={label:0,sent:function(){if(Ue[0]&1)throw Ue[1];return Ue[1]},trys:[],ops:[]},Re,_e,Ue,rt;return rt={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(rt[Symbol.iterator]=function(){return this}),rt;function Fe(ye){return function(Oe){return Se([ye,Oe])}}function Se(ye){if(Re)throw new TypeError("Generator is already executing.");for(;we;)try{if(Re=1,_e&&(Ue=ye[0]&2?_e.return:ye[0]?_e.throw||((Ue=_e.return)&&Ue.call(_e),0):_e.next)&&!(Ue=Ue.call(_e,ye[1])).done)return Ue;switch(_e=0,Ue&&(ye=[ye[0]&2,Ue.value]),ye[0]){case 0:case 1:Ue=ye;break;case 4:return we.label++,{value:ye[1],done:!1};case 5:we.label++,_e=ye[1],ye=[0];continue;case 7:ye=we.ops.pop(),we.trys.pop();continue;default:if(Ue=we.trys,!(Ue=Ue.length>0&&Ue[Ue.length-1])&&(ye[0]===6||ye[0]===2)){we=0;continue}if(ye[0]===3&&(!Ue||ye[1]>Ue[0]&&ye[1]<Ue[3])){we.label=ye[1];break}if(ye[0]===6&&we.label<Ue[1]){we.label=Ue[1],Ue=ye;break}if(Ue&&we.label<Ue[2]){we.label=Ue[2],we.ops.push(ye);break}Ue[2]&&we.ops.pop(),we.trys.pop();continue}ye=de.call(ie,we)}catch(Oe){ye=[6,Oe],_e=0}finally{Re=Ue=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}},u=function(ie,de){for(var we in ie)we!=="default"&&!Object.prototype.hasOwnProperty.call(de,we)&&H(de,ie,we)},H=Object.create?function(K,ie,de,we){we===void 0&&(we=de),Object.defineProperty(K,we,{enumerable:!0,get:function(){return ie[de]}})}:function(K,ie,de,we){we===void 0&&(we=de),K[we]=ie[de]},d=function(ie){var de=typeof Symbol=="function"&&Symbol.iterator,we=de&&ie[de],Re=0;if(we)return we.call(ie);if(ie&&typeof ie.length=="number")return{next:function(){return ie&&Re>=ie.length&&(ie=void 0),{value:ie&&ie[Re++],done:!ie}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(ie,de){var we=typeof Symbol=="function"&&ie[Symbol.iterator];if(!we)return ie;var Re=we.call(ie),_e,Ue=[],rt;try{for(;(de===void 0||de-- >0)&&!(_e=Re.next()).done;)Ue.push(_e.value)}catch(Fe){rt={error:Fe}}finally{try{_e&&!_e.done&&(we=Re.return)&&we.call(Re)}finally{if(rt)throw rt.error}}return Ue},_=function(){for(var ie=[],de=0;de<arguments.length;de++)ie=ie.concat(b(arguments[de]));return ie},x=function(){for(var ie=0,de=0,we=arguments.length;de<we;de++)ie+=arguments[de].length;for(var Re=Array(ie),_e=0,de=0;de<we;de++)for(var Ue=arguments[de],rt=0,Fe=Ue.length;rt<Fe;rt++,_e++)Re[_e]=Ue[rt];return Re},M=function(ie,de){for(var we=0,Re=de.length,_e=ie.length;we<Re;we++,_e++)ie[_e]=de[we];return ie},P=function(ie){return this instanceof P?(this.v=ie,this):new P(ie)},C=function(ie,de,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re=we.apply(ie,de||[]),_e,Ue=[];return _e={},rt("next"),rt("throw"),rt("return"),_e[Symbol.asyncIterator]=function(){return this},_e;function rt(xe){Re[xe]&&(_e[xe]=function(Ae){return new Promise(function(pe,be){Ue.push([xe,Ae,pe,be])>1||Fe(xe,Ae)})})}function Fe(xe,Ae){try{Se(Re[xe](Ae))}catch(pe){ue(Ue[0][3],pe)}}function Se(xe){xe.value instanceof P?Promise.resolve(xe.value.v).then(ye,Oe):ue(Ue[0][2],xe)}function ye(xe){Fe("next",xe)}function Oe(xe){Fe("throw",xe)}function ue(xe,Ae){xe(Ae),Ue.shift(),Ue.length&&Fe(Ue[0][0],Ue[0][1])}},O=function(ie){var de,we;return de={},Re("next"),Re("throw",function(_e){throw _e}),Re("return"),de[Symbol.iterator]=function(){return this},de;function Re(_e,Ue){de[_e]=ie[_e]?function(rt){return(we=!we)?{value:P(ie[_e](rt)),done:_e==="return"}:Ue?Ue(rt):rt}:Ue}},w=function(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de=ie[Symbol.asyncIterator],we;return de?de.call(ie):(ie=typeof d=="function"?d(ie):ie[Symbol.iterator](),we={},Re("next"),Re("throw"),Re("return"),we[Symbol.asyncIterator]=function(){return this},we);function Re(Ue){we[Ue]=ie[Ue]&&function(rt){return new Promise(function(Fe,Se){rt=ie[Ue](rt),_e(Fe,Se,rt.done,rt.value)})}}function _e(Ue,rt,Fe,Se){Promise.resolve(Se).then(function(ye){Ue({value:ye,done:Fe})},rt)}},S=function(ie,de){return Object.defineProperty?Object.defineProperty(ie,"raw",{value:de}):ie.raw=de,ie};var ne=Object.create?function(K,ie){Object.defineProperty(K,"default",{enumerable:!0,value:ie})}:function(K,ie){K.default=ie};I=function(ie){if(ie&&ie.__esModule)return ie;var de={};if(ie!=null)for(var we in ie)we!=="default"&&Object.prototype.hasOwnProperty.call(ie,we)&&H(de,ie,we);return ne(de,ie),de},j=function(ie){return ie&&ie.__esModule?ie:{default:ie}},N=function(ie,de){if(!de.has(ie))throw new TypeError("attempted to get private field on non-instance");return de.get(ie)},W=function(ie,de,we){if(!de.has(ie))throw new TypeError("attempted to set private field on non-instance");return de.set(ie,we),we},J("__extends",p),J("__assign",c),J("__rest",h),J("__decorate",i),J("__param",r),J("__metadata",n),J("__awaiter",s),J("__generator",f),J("__exportStar",u),J("__createBinding",H),J("__values",d),J("__read",b),J("__spread",_),J("__spreadArrays",x),J("__spreadArray",M),J("__await",P),J("__asyncGenerator",C),J("__asyncDelegator",O),J("__asyncValues",w),J("__makeTemplateObject",S),J("__importStar",I),J("__importDefault",j),J("__classPrivateFieldGet",N),J("__classPrivateFieldSet",W)})}).call(this,o("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_webpack@4.46.0@webpack/buildin/global.js":function(B,L){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){typeof window=="object"&&(o=window)}B.exports=o},"./node_modules/_webpack@4.46.0@webpack/buildin/module.js":function(B,L){B.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(B,L,o){var e;/*!
* EventEmitter v5.2.9 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - https://oli.me.uk/
* @preserve
*/(function(g){"use strict";function v(){}var p=v.prototype,c=g.EventEmitter;function h(n,s){for(var f=n.length;f--;)if(n[f].listener===s)return f;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}p.getListeners=function(s){var f=this._getEvents(),u,d;if(s instanceof RegExp){u={};for(d in f)f.hasOwnProperty(d)&&s.test(d)&&(u[d]=f[d])}else u=f[s]||(f[s]=[]);return u},p.flattenListeners=function(s){var f=[],u;for(u=0;u<s.length;u+=1)f.push(s[u].listener);return f},p.getListenersAsObject=function(s){var f=this.getListeners(s),u;return f instanceof Array&&(u={},u[s]=f),u||f};function r(n){return typeof n=="function"||n instanceof RegExp?!0:n&&typeof n=="object"?r(n.listener):!1}p.addListener=function(s,f){if(!r(f))throw new TypeError("listener must be a function");var u=this.getListenersAsObject(s),d=typeof f=="object",b;for(b in u)u.hasOwnProperty(b)&&h(u[b],f)===-1&&u[b].push(d?f:{listener:f,once:!1});return this},p.on=i("addListener"),p.addOnceListener=function(s,f){return this.addListener(s,{listener:f,once:!0})},p.once=i("addOnceListener"),p.defineEvent=function(s){return this.getListeners(s),this},p.defineEvents=function(s){for(var f=0;f<s.length;f+=1)this.defineEvent(s[f]);return this},p.removeListener=function(s,f){var u=this.getListenersAsObject(s),d,b;for(b in u)u.hasOwnProperty(b)&&(d=h(u[b],f),d!==-1&&u[b].splice(d,1));return this},p.off=i("removeListener"),p.addListeners=function(s,f){return this.manipulateListeners(!1,s,f)},p.removeListeners=function(s,f){return this.manipulateListeners(!0,s,f)},p.manipulateListeners=function(s,f,u){var d,b,_=s?this.removeListener:this.addListener,x=s?this.removeListeners:this.addListeners;if(typeof f=="object"&&!(f instanceof RegExp))for(d in f)f.hasOwnProperty(d)&&(b=f[d])&&(typeof b=="function"?_.call(this,d,b):x.call(this,d,b));else for(d=u.length;d--;)_.call(this,f,u[d]);return this},p.removeEvent=function(s){var f=typeof s,u=this._getEvents(),d;if(f==="string")delete u[s];else if(s instanceof RegExp)for(d in u)u.hasOwnProperty(d)&&s.test(d)&&delete u[d];else delete this._events;return this},p.removeAllListeners=i("removeEvent"),p.emitEvent=function(s,f){var u=this.getListenersAsObject(s),d,b,_,x,M;for(x in u)if(u.hasOwnProperty(x))for(d=u[x].slice(0),_=0;_<d.length;_++)b=d[_],b.once===!0&&this.removeListener(s,b.listener),M=b.listener.apply(this,f||[]),M===this._getOnceReturnValue()&&this.removeListener(s,b.listener);return this},p.trigger=i("emitEvent"),p.emit=function(s){var f=Array.prototype.slice.call(arguments,1);return this.emitEvent(s,f)},p.setOnceReturnValue=function(s){return this._onceReturnValue=s,this},p._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},p._getEvents=function(){return this._events||(this._events={})},v.noConflict=function(){return g.EventEmitter=c,v},e=function(){return v}.call(g,o,g,B),e!==void 0&&(B.exports=e)})(typeof window!="undefined"?window:this||{})},"./src/api/geo.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),p=o("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),c=o("./src/view.ts"),h=e.__importDefault(o("./src/util/get-geo-projection.ts")),i={geoArea:function(n){return v.geoArea(n)},geoAreaByName:function(n){return v.geoArea(this.geoFeatureByName(n))},geoCentroid:function(n){return v.geoCentroid(n)},geoCentroidByName:function(n){return v.geoCentroid(this.geoFeatureByName(n))},geoDistance:function(n,s){return v.geoDistance(n,s)},geoLength:function(n){return v.geoLength(n)},geoLengthByName:function(n){return v.geoLength(this.geoFeatureByName(n))},geoContains:function(n,s){return v.geoContains(n,s)},geoFeatureByName:function(n){var s=this.rows,f;return s.some(function(u){return u.name===n?(f=u,!0):!1}),f},geoFeatureByPosition:function(n){var s=this.rows,f;return s.some(function(u){return v.geoContains(u,n)?(f=u,!0):!1}),f},geoNameByPosition:function(n){var s=this.geoFeatureByPosition(n);if(s)return s.name},getGeoProjection:h.default,geoProject:function(n,s,f){return s=h.default(s,f),p.geoProject(n,s)},geoProjectByName:function(n,s,f){return s=h.default(s,f),p.geoProject(this.geoFeatureByName(n),s)},geoProjectPosition:function(n,s,f){var u=h.default(s,f);return u(n)},geoProjectInvert:function(n,s,f){var u=h.default(s,f);return u.invert(n)}};g.assign(c.View.prototype,i)},"./src/api/hierarchy.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/view.ts");e.assign(g.View.prototype,{getAllNodes:function(){var p=[],c=this.root;return c&&c.each?c.each(function(h){p.push(h)}):c&&c.eachNode&&c.eachNode(function(h){p.push(h)}),p},getAllLinks:function(){for(var p=[],c=[this.root],h;h=c.pop();){var i=h.children;i&&i.forEach(function(r){p.push({source:h,target:r}),c.push(r)})}return p}}),e.assign(g.View.prototype,{getAllEdges:g.View.prototype.getAllLinks})},"./src/api/partition.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/partition.ts")),p=o("./src/view.ts");g.assign(p.View.prototype,{partition:function(h,i){return i===void 0&&(i=[]),v.default(this.rows,h,i)},group:function(h,i){i===void 0&&(i=[]);var r=this.partition(h,i);return g.values(r)},groups:function(h,i){return i===void 0&&(i=[]),this.group(h,i)}})},"./src/api/statistics.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importStar(o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./src/view.ts"),c=e.__importDefault(o("./src/util/p-by-fraction.ts")),h=e.__importDefault(o("./src/constants.ts")),i=h.default.STATISTICS_METHODS;function r(s,f){var u=s.getColumn(f);return v.isArray(u)&&v.isArray(u[0])&&(u=v.flattenDeep(u)),u}i.forEach(function(s){p.View.prototype[s]=function(f){return g[s](r(this,f))}});var n=g.quantile;v.assign(p.View.prototype,{average:p.View.prototype.mean,quantile:function(f,u){return n(r(this,f),u)},quantiles:function(f,u){var d=r(this,f);return u.map(function(b){return n(d,b)})},quantilesByFraction:function(f,u){return this.quantiles(f,c.default(u))},range:function(f){return[this.min(f),this.max(f)]},extent:function(f){return this.range(f)}})},"./src/connector/default.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts");g.DataSet.registerConnector("default",function(v,p){var c;if(e.isString(v)?c=p.getView(v):c=v,!c)throw new TypeError("Invalid dataView");return e.deepMix([],c.rows)})},"./src/connector/dsv.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),v=o("./src/data-set.ts");v.DataSet.registerConnector("dsv",function(p,c){c===void 0&&(c={});var h=c.delimiter||",";if(!e.isString(h))throw new TypeError("Invalid delimiter: must be a string!");return g.dsvFormat(h).parse(p)}),v.DataSet.registerConnector("csv",function(p){return g.csvParse(p)}),v.DataSet.registerConnector("tsv",function(p){return g.tsvParse(p)})},"./src/connector/geo-graticule.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),g=o("./src/data-set.ts");function v(p,c){c.dataType="geo-graticule";var h=e.geoGraticule().lines();return h.map(function(i,r){return i.index=""+r,i}),c.rows=h,h}L.default=v,g.DataSet.registerConnector("geo-graticule",v)},"./src/connector/geojson.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importDefault(o("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=o("./src/data-set.ts"),h=p.geoPath();function i(r,n,s){s.dataType=c.DataSet.CONSTANTS.GEO;var f=v.deepMix([],r.features);return f.forEach(function(u){u.name=u.properties.name,u.longitude=[],u.latitude=[];var d=u.pathData=h(u),b=g.default(d);b._path.forEach(function(x){u.longitude.push(x[1]),u.latitude.push(x[2])});var _=h.centroid(u);u.centroidX=_[0],u.centroidY=_[1]}),f}c.DataSet.registerConnector("geo",i),c.DataSet.registerConnector("geojson",i),c.DataSet.registerConnector("GeoJSON",i),L.default=i},"./src/connector/graph.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v={nodes:function(h){return h.nodes},edges:function(h){return h.edges}};function p(c,h,i){h=e.assign({},v,h),i.dataType=g.DataSet.CONSTANTS.GRAPH;var r=h.nodes,n=h.edges;if(r&&!e.isFunction(r))throw new TypeError("Invalid nodes: must be a function!");if(n&&!e.isFunction(n))throw new TypeError("Invalid edges: must be a function!");return i.rows=i.graph={nodes:r(c),edges:n(c)},e.assign(i,i.graph),i.rows}g.DataSet.registerConnector("graph",p),g.DataSet.registerConnector("diagram",p)},"./src/connector/hexjson.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js"),v=o("./src/data-set.ts"),p={width:1,height:1};function c(i){return i.cx=i.x,i.cy=i.y,i.x=[],i.y=[],i.vertices.forEach(function(r){i.x.push(r.x+i.cx),i.y.push(r.y+i.cy)}),i}function h(i,r,n){n.dataType=v.DataSet.CONSTANTS.HEX,r=e.assign({},p,r);var s=r.width,f=r.height,u=e.deepMix([],i);n._HexJSON=u;var d=n._GridHexJSON=g.getGridForHexJSON(u),b=n.rows=g.renderHexJSON(u,s,f).map(c);return n._gridRows=g.renderHexJSON(d,s,f).map(c),b}v.DataSet.registerConnector("hex",h),v.DataSet.registerConnector("hexjson",h),v.DataSet.registerConnector("hex-json",h),v.DataSet.registerConnector("HexJSON",h),L.default=h},"./src/connector/hierarchy.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),v=o("./src/data-set.ts");function p(c,h,i){i.dataType=v.DataSet.CONSTANTS.HIERARCHY;var r=h&&h.children?h.children:null;if(r&&!e.isFunction(r))throw new TypeError("Invalid children: must be a function!");return h.pureData?i.rows=i.root=c:i.rows=i.root=g.hierarchy(c,r),c}v.DataSet.registerConnector("hierarchy",p),v.DataSet.registerConnector("tree",p)},"./src/connector/topojson.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),p=e.__importDefault(o("./src/connector/geojson.ts")),c=o("./src/data-set.ts");function h(i,r,n){var s=r.object;if(!g.isString(s))throw new TypeError("Invalid object: must be a string!");var f=v.feature(i,i.objects[s]);return p.default(f,void 0,n)}c.DataSet.registerConnector("topojson",h),c.DataSet.registerConnector("TopoJSON",h)},"./src/constants.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.DataSet=void 0;var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),p=o("./src/view.ts"),c=e.__importDefault(o("./src/constants.ts")),h=function(i){e.__extends(r,i);function r(n){n===void 0&&(n={state:{}});var s=i.call(this)||this;return s.isDataSet=!0,s._onChangeTimer=null,s.views={},s.state={},s.state=n.state,s}return r.registerConnector=function(n,s){r.connectors[n]=s},r.getConnector=function(n){return r.connectors[n]||r.connectors.default},r.registerTransform=function(n,s){r.transforms[n]=s},r.getTransform=function(n){return r.transforms[n]||r.transforms.default},r.prototype._getUniqueViewName=function(){for(var n=g.uniqueId("view_");this.views[n];)n=g.uniqueId("view_");return n},r.prototype.createView=function(n,s){if(g.isNil(n)&&(n=this._getUniqueViewName()),g.isObject(n)&&(s=n,n=this._getUniqueViewName()),this.views[n])throw new Error("data view exists: "+n);var f=new p.View(this,s);return this.views[n]=f,f},r.prototype.getView=function(n){return this.views[n]},r.prototype.setView=function(n,s){this.views[n]=s},r.prototype.setState=function(n,s){var f=this;this.state[n]=s,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){f.emit("statechange",n,s)},16)},r.CONSTANTS=c.default,r.connectors={},r.transforms={},r.DataSet=r,r.DataView=p.View,r.View=p.View,r.version="____DATASET_VERSION____",r}(v.default);L.DataSet=h,g.assign(h,c.default),g.assign(h.prototype,{view:h.prototype.createView}),p.View.DataSet=h},"./src/index.ts":function(B,L,o){"use strict";o("./src/api/geo.ts"),o("./src/api/hierarchy.ts"),o("./src/api/partition.ts"),o("./src/api/statistics.ts"),o("./src/connector/default.ts"),o("./src/connector/dsv.ts"),o("./src/connector/geo-graticule.ts"),o("./src/connector/geojson.ts"),o("./src/connector/graph.ts"),o("./src/connector/hexjson.ts"),o("./src/connector/hierarchy.ts"),o("./src/connector/topojson.ts"),o("./src/transform/default.ts"),o("./src/transform/filter.ts"),o("./src/transform/fold.ts"),o("./src/transform/map.ts"),o("./src/transform/partition.ts"),o("./src/transform/percent.ts"),o("./src/transform/pick.ts"),o("./src/transform/proportion.ts"),o("./src/transform/rename.ts"),o("./src/transform/reverse.ts"),o("./src/transform/sort.ts"),o("./src/transform/sort-by.ts"),o("./src/transform/subset.ts"),o("./src/transform/fill-rows.ts"),o("./src/transform/impute.ts"),o("./src/transform/aggregate.ts"),o("./src/transform/regression.ts"),o("./src/transform/kde.ts"),o("./src/transform/bin/hexagon.ts"),o("./src/transform/bin/histogram.ts"),o("./src/transform/bin/quantile.ts"),o("./src/transform/bin/rectangle.ts"),o("./src/transform/geo/centroid.ts"),o("./src/transform/geo/projection.ts"),o("./src/transform/geo/region.ts"),o("./src/transform/diagram/arc.ts"),o("./src/transform/diagram/dagre.ts"),o("./src/transform/diagram/sankey.ts"),o("./src/transform/diagram/voronoi.ts"),o("./src/transform/hierarchy/cluster.ts"),o("./src/transform/hierarchy/compact-box.ts"),o("./src/transform/hierarchy/dendrogram.ts"),o("./src/transform/hierarchy/indented.ts"),o("./src/transform/hierarchy/pack.ts"),o("./src/transform/hierarchy/partition.ts"),o("./src/transform/hierarchy/tree.ts"),o("./src/transform/hierarchy/treemap.ts"),o("./src/transform/tag-cloud.ts"),o("./src/transform/waffle.ts"),o("./src/transform/kernel-smooth/density.ts"),o("./src/transform/kernel-smooth/regression.ts");var e=o("./src/data-set.ts");B.exports=e.DataSet},"./src/transform/aggregate.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importStar(o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),p=e.__importDefault(o("./src/util/partition.ts")),c=o("./src/data-set.ts"),h=c.DataSet.registerTransform,i=o("./src/util/option-parser.ts"),r={as:[],fields:[],groupBy:[],operations:[]},n="count",s={count:function(d){return d.length},distinct:function(d,b){var _=g.uniq(d.map(function(x){return x[b]}));return _.length}};c.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(u){s[u]=function(d,b){var _=d.map(function(x){return x[b]});return g.isArray(_)&&g.isArray(_[0])&&(_=g.flattenDeep(_)),v[u](_)}}),s.average=s.mean;function f(u,d){d=g.assign({},r,d);var b=i.getFields(d);if(!g.isArray(b))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var _=d.as||[];g.isString(_)&&(_=[_]);var x=d.operations;g.isString(x)&&(x=[x]);var M=[n];if((!g.isArray(x)||!x.length)&&(console.warn('operations is not defined, will use [ "count" ] directly.'),x=M,_=x),!(x.length===1&&x[0]===n)){if(x.length!==b.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(_.length!==b.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var P=p.default(u.rows,d.groupBy),C=[];g.forIn(P,function(O){var w=O[0];x.forEach(function(S,I){var j=_[I],N=b[I];w[j]=s[S](O,N)}),C.push(w)}),u.rows=C}h("aggregate",f),h("summary",f),L.default={VALID_AGGREGATES:g.keys(s)}},"./src/transform/bin/hexagon.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./src/data-set.ts"),p=o("./src/util/option-parser.ts"),c={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},h=Math.sqrt(3),i=Math.PI/3,r=[0,i,2*i,3*i,4*i,5*i];function n(d,b,_,x){return Math.sqrt((d-_)*(d-_)+(b-x)*(b-x))}function s(d,b,_){var x=d-_;b=b/2;var M=Math.floor(x/b),P=b*(M+(Math.abs(M%2)===1?1:0)),C=b*(M+(Math.abs(M%2)===1?0:1));return[P+_,C+_]}function f(d,b,_){b===void 0&&(b=[1,1]),_===void 0&&(_=[0,0]);var x={},M=e.__read(b,2),P=M[0],C=M[1],O=e.__read(_,2),w=O[0],S=O[1];return d.forEach(function(I){var j,N,W=e.__read(I,2),H=W[0],J=W[1],Q=e.__read(s(H,P,w),2),ne=Q[0],K=Q[1],ie=e.__read(s(J,C,S),2),de=ie[0],we=ie[1],Re=n(H,J,ne,de),_e=n(H,J,K,we),Ue,rt,Fe;Re<_e?(Ue="x"+ne+"y"+de,j=e.__read([ne,de],2),rt=j[0],Fe=j[1]):(Ue="x"+K+"y"+we,N=e.__read([K,we],2),rt=N[0],Fe=N[1]),x[Ue]=x[Ue]||{x:rt,y:Fe,count:0},x[Ue].count++}),x}function u(d,b){b=g.assign({},c,b);var _=p.getFields(b);if(!g.isArray(_)||_.length!==2)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var x=e.__read(_,2),M=x[0],P=x[1],C=d.range(M),O=d.range(P),w=C[1]-C[0],S=O[1]-O[0],I=b.binWidth||[];if(I.length!==2){var j=e.__read(b.bins,2),N=j[0],W=j[1];if(N<=0||W<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");I=[w/N,S/W]}var H=e.__read(b.offset,2),J=H[0],Q=H[1],ne=3*I[0]/(h*I[1]),K=d.rows.map(function(ye){return[ye[M],ne*ye[P]]}),ie=f(K,[I[0],ne*I[1]],[J,ne*Q]),de=e.__read(b.as,3),we=de[0],Re=de[1],_e=de[2];if(!we||!Re||!_e)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var Ue=I[0]/h,rt=r.map(function(ye){return[Math.sin(ye)*Ue,-Math.cos(ye)*Ue]}),Fe=[],Se=0;b.sizeByCount&&g.forIn(ie,function(ye){ye.count>Se&&(Se=ye.count)}),g.forIn(ie,function(ye){var Oe=ye.x,ue=ye.y,xe=ye.count,Ae={};Ae[_e]=xe,b.sizeByCount?(Ae[we]=rt.map(function(pe){return Oe+ye.count/Se*pe[0]}),Ae[Re]=rt.map(function(pe){return(ue+ye.count/Se*pe[1])/ne})):(Ae[we]=rt.map(function(pe){return Oe+pe[0]}),Ae[Re]=rt.map(function(pe){return(ue+pe[1])/ne})),Fe.push(Ae)}),d.rows=Fe}v.DataSet.registerTransform("bin.hexagon",u),v.DataSet.registerTransform("bin.hex",u),v.DataSet.registerTransform("hexbin",u)},"./src/transform/bin/histogram.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/partition.ts")),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={as:["x","count"],bins:void 0,offset:0,groupBy:[]};function i(s,f,u){var d=s-u,b=Math.floor(d/f);return[b*f+u,(b+1)*f+u]}function r(s){return Math.ceil(Math.log(s)/Math.LN2)+1}function n(s,f){f=g.assign({},h,f);var u=c.getField(f);if(s.rows.length!==0){var d=s.range(u),b=d[1]-d[0],_=f.binWidth,x=f.bins;if(!_&&x){if(x<=0)throw new TypeError("Invalid bins: it must be a positive number!");_=b/x}if(!_&&!x){var M=r(s.rows.length);_=b/M}var P=f.offset%_,C=[],O=f.groupBy,w=v.default(s.rows,O);g.forIn(w,function(S){var I={},j=S.map(function(Q){return Q[u]});j.forEach(function(Q){var ne=e.__read(i(Q,_,P),2),K=ne[0],ie=ne[1],de=K+"-"+ie;I[de]=I[de]||{x0:K,x1:ie,count:0},I[de].count++});var N=e.__read(f.as,2),W=N[0],H=N[1];if(!W||!H)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var J=g.pick(S[0],O);g.forIn(I,function(Q){var ne=g.assign({},J);ne[W]=[Q.x0,Q.x1],ne[H]=Q.count,C.push(ne)})}),s.rows=C}}p.DataSet.registerTransform("bin.histogram",n),p.DataSet.registerTransform("bin.dot",n)},"./src/transform/bin/quantile.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),p=e.__importDefault(o("./src/util/partition.ts")),c=e.__importDefault(o("./src/util/p-by-fraction.ts")),h=o("./src/data-set.ts"),i=h.DataSet.registerTransform,r=o("./src/util/option-parser.ts"),n={as:"_bin",groupBy:[],fraction:4};function s(f,u){u=g.assign({},n,u);var d=r.getField(u),b=u.as;if(!g.isString(b))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var _=u.p,x=u.fraction;(!g.isArray(_)||_.length===0)&&(_=c.default(x));var M=f.rows,P=u.groupBy,C=p.default(M,P),O=[];g.forIn(C,function(w){var S=w[0],I=w.map(function(N){return N[d]}),j=_.map(function(N){return v.quantile(I,N)});S[b]=j,O.push(S)}),f.rows=O}i("bin.quantile",s)},"./src/transform/bin/rectangle.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./src/data-set.ts"),p=v.DataSet.registerTransform,c=o("./src/util/option-parser.ts"),h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function i(n,s,f){var u=n-f,d=Math.floor(u/s);return[d*s+f,(d+1)*s+f]}function r(n,s){s=g.assign({},h,s);var f=e.__read(c.getFields(s),2),u=f[0],d=f[1];if(!u||!d)throw new TypeError("Invalid fields: must be an array with 2 strings!");var b=n.range(u),_=n.range(d),x=b[1]-b[0],M=_[1]-_[0],P=s.binWidth||[];if(P.length!==2){var C=e.__read(s.bins,2),O=C[0],w=C[1];if(O<=0||w<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");P=[x/O,M/w]}var S=n.rows.map(function(de){return[de[u],de[d]]}),I={},j=e.__read(s.offset,2),N=j[0],W=j[1];S.forEach(function(de){var we=e.__read(i(de[0],P[0],N),2),Re=we[0],_e=we[1],Ue=e.__read(i(de[1],P[1],W),2),rt=Ue[0],Fe=Ue[1],Se=Re+"-"+_e+"-"+rt+"-"+Fe;I[Se]=I[Se]||{x0:Re,x1:_e,y0:rt,y1:Fe,count:0},I[Se].count++});var H=[],J=e.__read(s.as,3),Q=J[0],ne=J[1],K=J[2];if(!Q||!ne||!K)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(!s.sizeByCount)g.forIn(I,function(de){var we={};we[Q]=[de.x0,de.x1,de.x1,de.x0],we[ne]=[de.y0,de.y0,de.y1,de.y1],we[K]=de.count,H.push(we)});else{var ie=0;g.forIn(I,function(de){de.count>ie&&(ie=de.count)}),g.forIn(I,function(de){var we=de.x0,Re=de.x1,_e=de.y0,Ue=de.y1,rt=de.count,Fe=rt/ie,Se=e.__read([(we+Re)/2,(_e+Ue)/2],2),ye=Se[0],Oe=Se[1],ue=(Re-we)*Fe/2,xe=(Ue-_e)*Fe/2,Ae=ye-ue,pe=ye+ue,be=Oe-xe,le=Oe+xe,z={};z[Q]=[Ae,pe,pe,Ae],z[ne]=[be,be,le,le],z[K]=rt,H.push(z)})}n.rows=H}p("bin.rectangle",r),p("bin.rect",r)},"./src/transform/default.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./src/data-set.ts");e.DataSet.registerTransform("default",function(g){return g})},"./src/transform/diagram/arc.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(f){return f.id},source:function(f){return f.source},target:function(f){return f.target},sourceWeight:function(f){return f.value||1},targetWeight:function(f){return f.value||1},sortBy:null};function p(s,f,u){return u===void 0&&(u={}),s.forEach(function(d){var b=f.edgeSource(d),_=f.edgeTarget(d);u[b]||(u[b]={id:b}),u[_]||(u[_]={id:_})}),e.values(u)}function c(s,f,u){e.forIn(s,function(d,b){d.inEdges=f.filter(function(_){return""+u.target(_)==""+b}),d.outEdges=f.filter(function(_){return""+u.source(_)==""+b}),d.edges=d.outEdges.concat(d.inEdges),d.frequency=d.edges.length,d.value=0,d.inEdges.forEach(function(_){d.value+=u.targetWeight(_)}),d.outEdges.forEach(function(_){d.value+=u.sourceWeight(_)})})}function h(s,f){var u={weight:function(_,x){return x.value-_.value},frequency:function(_,x){return x.frequency-_.frequency},id:function(_,x){return(""+f.id(_)).localeCompare(""+f.id(x))}},d=u[f.sortBy];!d&&e.isFunction(f.sortBy)&&(d=f.sortBy),d&&s.sort(d)}function i(s,f){var u=s.length;if(!u)throw new TypeError("Invalid nodes: it's empty!");if(f.weight){var d=f.marginRatio;if(d<0||d>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var b=d/(2*u),_=f.thickness;if(_<=0||_>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var x=0;s.forEach(function(P){x+=P.value}),s.forEach(function(P){P.weight=P.value/x,P.width=P.weight*(1-d),P.height=_}),s.forEach(function(P,C){for(var O=0,w=C-1;w>=0;w--)O+=s[w].width+2*b;var S=P.minX=b+O,I=P.maxX=P.minX+P.width,j=P.minY=f.y-_/2,N=P.maxY=j+_;P.x=[S,I,I,S],P.y=[j,j,N,N]})}else{var M=1/u;s.forEach(function(P,C){P.x=(C+.5)*M,P.y=f.y})}}function r(s,f,u){if(u.weight){var d={};e.forIn(s,function(b,_){d[_]=b.value}),f.forEach(function(b){var _=u.source(b),x=u.target(b),M=s[_],P=s[x];if(M&&P){var C=d[_],O=u.sourceWeight(b),w=M.minX+(M.value-C)/M.value*M.width,S=w+O/M.value*M.width;d[_]-=O;var I=d[x],j=u.targetWeight(b),N=P.minX+(P.value-I)/P.value*P.width,W=N+j/P.value*P.width;d[x]-=j;var H=u.y;b.x=[w,S,N,W],b.y=[H,H,H,H]}})}else f.forEach(function(b){var _=s[u.source(b)],x=s[u.target(b)];_&&x&&(b.x=[_.x,x.x],b.y=[_.y,x.y])})}function n(s,f){f=e.assign({},v,f);var u={},d=s.nodes,b=s.edges;(!e.isArray(d)||d.length===0)&&(d=p(b,f,u)),d.forEach(function(_){var x=f.id(_);u[x]=_}),c(u,b,f),h(d,f),i(d,f),r(u,b,f),s.nodes=d,s.edges=b}g.DataSet.registerTransform("diagram.arc",n),g.DataSet.registerTransform("arc",n)},"./src/transform/diagram/dagre.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./node_modules/_dagre@0.8.5@dagre/index.js")),p=o("./src/data-set.ts"),c={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(r){return r.source},target:function(r){return r.target}};function h(i,r){r=g.assign({},c,r);var n=new v.default.graphlib.Graph;n.setGraph({}),n.setDefaultEdgeLabel(function(){return{}}),i.nodes.forEach(function(u){var d=r.nodeId?r.nodeId(u):u.id;!u.height&&!u.width&&(u.height=u.width=r.edgesep),n.setNode(d,u)}),i.edges.forEach(function(u){n.setEdge(r.source(u),r.target(u))}),v.default.layout(n);var s=[],f=[];n.nodes().forEach(function(u){var d=n.node(u),b=d.x,_=d.y,x=d.height,M=d.width;d.x=[b-M/2,b+M/2,b+M/2,b-M/2],d.y=[_+x/2,_+x/2,_-x/2,_-x/2],s.push(d)}),n.edges().forEach(function(u){var d=n.edge(u).points,b={};b.x=d.map(function(_){return _.x}),b.y=d.map(function(_){return _.y}),f.push(b)}),i.nodes=s,i.edges=f}p.DataSet.registerTransform("diagram.dagre",h),p.DataSet.registerTransform("dagre",h)},"./src/transform/diagram/sankey.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),v=o("./src/data-set.ts"),p={sankeyLeft:g.sankeyLeft,sankeyRight:g.sankeyRight,sankeyCenter:g.sankeyCenter,sankeyJustify:g.sankeyJustify},c={value:function(r){return r.value},source:function(r){return r.source},target:function(r){return r.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};function h(i,r){r=e.assign({},c,r);var n=null;e.isString(r.nodeAlign)?n=p[r.nodeAlign]:e.isFunction(r.nodeAlign)&&(n=r.nodeAlign);var s=g.sankey().nodeSort(r.sort).links(function(f){return f.edges}).nodeWidth(r.nodeWidth).nodePadding(r.nodePadding).extent([[0,0],[1,1]]);e.isFunction(r.nodeId)&&s.nodeId(r.nodeId),n&&s.nodeAlign(n),s(i),i.nodes.forEach(function(f){var u=f.x0,d=f.x1,b=f.y0,_=f.y1;f.x=[u,d,d,u],f.y=[b,b,_,_]}),i.edges.forEach(function(f){var u=f.source,d=f.target,b=u.x1,_=d.x0;f.x=[b,b,_,_];var x=f.width/2;f.y=[f.y0+x,f.y0-x,f.y1+x,f.y1-x]})}v.DataSet.registerTransform("diagram.sankey",h),v.DataSet.registerTransform("sankey",h)},"./src/transform/diagram/voronoi.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importStar(o("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./src/data-set.ts"),c=p.DataSet.registerTransform,h=o("./src/util/option-parser.ts"),i={as:["_x","_y"]};function r(n,s){s=v.assign({},i,s);var f=s.as;if(!v.isArray(f)||f.length!==2)throw new TypeError("Invalid as: must be an array with two strings!");var u=f[0],d=f[1],b=h.getFields(s);if(!v.isArray(b)||b.length!==2)throw new TypeError("Invalid fields: must be an array with two strings!");var _=b[0],x=b[1],M=n.rows,P=M.map(function(w){return[w[_],w[x]]}),C=g.voronoi();s.extend&&C.extent(s.extend),s.size&&C.size(s.size);var O=C(P).polygons();M.forEach(function(w,S){var I=O[S].filter(function(j){return!!j});w[u]=I.map(function(j){return j[0]}),w[d]=I.map(function(j){return j[1]})})}c("diagram.voronoi",r),c("voronoi",r)},"./src/transform/fill-rows.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/partition.ts")),p=o("./src/data-set.ts"),c={fillBy:"group",groupBy:[],orderBy:[]};function h(r,n){var s=r.map(function(f){return f});return n.forEach(function(f){var u=s.indexOf(f);u>-1&&s.splice(u,1)}),s}function i(r,n){n=g.assign({},c,n);var s=r.rows,f=n.groupBy,u=n.orderBy,d=v.default(s,f,u),b=0,_=[];g.forIn(d,function(S){S.length>b&&(b=S.length,_=S)});var x=[],M={};if(_.forEach(function(S){var I=u.map(function(j){return S[j]}).join("-");x.push(I),M[I]=S}),n.fillBy==="order"){var P=_[0],C=[],O={};s.forEach(function(S){var I=u.map(function(j){return S[j]}).join("-");C.indexOf(I)===-1&&(C.push(I),O[I]=S)});var w=h(C,x);w.forEach(function(S){var I={};f.forEach(function(j){I[j]=P[j]}),u.forEach(function(j){I[j]=O[S][j]}),s.push(I),_.push(I),x.push(S),M[S]=I}),b=_.length}g.forIn(d,function(S){if(S!==_&&S.length<b){var I=S[0],j=[];S.forEach(function(W){j.push(u.map(function(H){return W[H]}).join("-"))});var N=h(x,j);N.some(function(W,H){if(H>=b-S.length)return!0;var J=M[W],Q={};return f.forEach(function(ne){Q[ne]=I[ne]}),u.forEach(function(ne){Q[ne]=J[ne]}),s.push(Q),!1})}})}p.DataSet.registerTransform("fill-rows",i),p.DataSet.registerTransform("fillRows",i)},"./src/transform/filter.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./src/data-set.ts");function g(v){return!!v}e.DataSet.registerTransform("filter",function(v,p){v.rows=v.rows.filter(p.callback||g)})},"./src/transform/fold.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v=o("./src/util/option-parser.ts"),p={fields:[],key:"key",retains:[],value:"value"};g.DataSet.registerTransform("fold",function(c,h){var i=c.getColumnNames();h=e.assign({},p,h);var r=v.getFields(h);r.length===0&&(console.warn("warning: option fields is not specified, will fold all columns."),r=i);var n=h.key,s=h.value,f=h.retains;(!f||f.length===0)&&(f=e.difference(i,r));var u=[];c.rows.forEach(function(d){r.forEach(function(b){var _=e.pick(d,f);_[n]=b,_[s]=d[b],u.push(_)})}),c.rows=u})},"./src/transform/geo/centroid.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v=g.DataSet.registerTransform,p=o("./src/util/option-parser.ts"),c={as:["_centroid_x","_centroid_y"]};function h(i,r){r=e.assign({},c,r);var n=p.getField(r),s=r.geoView||r.geoDataView;if(e.isString(s)&&i.dataSet&&(s=i.dataSet.getView(s)),!s||s.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var f=r.as;if(!e.isArray(f)||f.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var u=f[0],d=f[1];i.rows.forEach(function(b){var _=s.geoFeatureByName(b[n]);_&&(s._projectedAs?(b[u]=_[s._projectedAs[2]],b[d]=_[s._projectedAs[3]]):(b[u]=_.centroidX,b[d]=_.centroidY))})}v("geo.centroid",h)},"./src/transform/geo/projection.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),p=e.__importDefault(o("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),c=o("./src/data-set.ts"),h=c.DataSet.registerTransform,i=e.__importDefault(o("./src/util/get-geo-projection.ts")),r={as:["_x","_y","_centroid_x","_centroid_y"]};function n(s,f){if(s.dataType!=="geo"&&s.dataType!=="geo-graticule")throw new TypeError("Invalid dataView: this transform is for Geo data only!");f=g.assign({},r,f);var u=f.projection;if(!u)throw new TypeError("Invalid projection!");u=i.default(u);var d=v.geoPath(u),b=f.as;if(!g.isArray(b)||b.length!==4)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');s._projectedAs=b;var _=e.__read(b,4),x=_[0],M=_[1],P=_[2],C=_[3];s.rows.forEach(function(O){O[x]=[],O[M]=[];var w=d(O);if(w){var S=p.default(w);S._path.forEach(function(j){O[x].push(j[1]),O[M].push(j[2])});var I=d.centroid(O);O[P]=I[0],O[C]=I[1]}}),s.rows=s.rows.filter(function(O){return O[x].length!==0})}h("geo.projection",n)},"./src/transform/geo/region.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v=g.DataSet.registerTransform,p=o("./src/util/option-parser.ts"),c={as:["_x","_y"]};function h(i,r){r=e.assign({},c,r);var n=p.getField(r),s=r.geoView||r.geoDataView;if(e.isString(s)&&(s=i.dataSet.getView(s)),!s||s.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var f=r.as;if(!e.isArray(f)||f.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var u=f[0],d=f[1];i.rows.forEach(function(b){var _=s.geoFeatureByName(b[n]);_&&(s._projectedAs?(b[u]=_[s._projectedAs[0]],b[d]=_[s._projectedAs[1]]):(b[u]=_.longitude,b[d]=_.latitude))})}v("geo.region",h)},"./src/transform/hierarchy/cluster.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importStar(o("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function i(r,n){if(r.dataType!==p.DataSet.CONSTANTS.HIERARCHY||!r.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var s=r.root;n=v.assign({},h,n);var f=n.as;if(!v.isArray(f)||f.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var u=void 0;try{u=c.getField(n)}catch(x){console.warn(x)}u&&s.sum(function(x){return x[u]});var d=g.cluster();d.size(n.size),n.nodeSize&&d.nodeSize(n.nodeSize),n.separation&&d.separation(n.separation),d(s);var b=f[0],_=f[1];s.each(function(x){x[b]=x.x,x[_]=x.y})}p.DataSet.registerTransform("hierarchy.cluster",i),p.DataSet.registerTransform("dendrogram",i)},"./src/transform/hierarchy/compact-box.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importDefault(o("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),v=o("./src/data-set.ts"),p={};function c(h,i){var r=h.root;if(i=Object.assign({},p,i),h.dataType!==v.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=g.default.compactBox(r,i)}v.DataSet.registerTransform("hierarchy.compact-box",c),v.DataSet.registerTransform("compact-box-tree",c),v.DataSet.registerTransform("non-layered-tidy-tree",c),v.DataSet.registerTransform("mindmap-logical",c)},"./src/transform/hierarchy/dendrogram.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importDefault(o("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),v=o("./src/data-set.ts"),p={};function c(h,i){var r=h.root;if(i=Object.assign({},p,i),h.dataType!==v.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=g.default.dendrogram(r,i)}v.DataSet.registerTransform("hierarchy.dendrogram",c),v.DataSet.registerTransform("dendrogram",c)},"./src/transform/hierarchy/indented.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importDefault(o("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),v=o("./src/data-set.ts"),p={};function c(h,i){var r=h.root;if(i=Object.assign({},p,i),h.dataType!==v.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=g.default.indented(r,i)}v.DataSet.registerTransform("hierarchy.indented",c),v.DataSet.registerTransform("indented-tree",c)},"./src/transform/hierarchy/pack.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importStar(o("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function i(r,n){if(r.dataType!==p.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var s=r.root;n=g.assign({},h,n);var f=n.as;if(!g.isArray(f)||f.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var u;try{u=c.getField(n)}catch(M){console.warn(M)}u&&s.sum(function(M){return M[u]}).sort(function(M,P){return P[u]-M[u]});var d=v.pack();d.size(n.size),n.padding&&d.padding(n.padding),d(s);var b=f[0],_=f[1],x=f[2];s.each(function(M){M[b]=M.x,M[_]=M.y,M[x]=M.r})}p.DataSet.registerTransform("hierarchy.pack",i),p.DataSet.registerTransform("hierarchy.circle-packing",i),p.DataSet.registerTransform("circle-packing",i)},"./src/transform/hierarchy/partition.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importStar(o("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function i(r,n){if(r.dataType!==p.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var s=r.root;n=v.assign({},h,n);var f=n.as;if(!v.isArray(f)||f.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var u;try{u=c.getField(n)}catch(x){console.warn(x)}u&&s.sum(function(x){return x[u]});var d=g.partition();d.size(n.size).round(n.round).padding(n.padding),d(s);var b=f[0],_=f[1];s.each(function(x){x[b]=[x.x0,x.x1,x.x1,x.x0],x[_]=[x.y1,x.y1,x.y0,x.y0],["x0","x1","y0","y1"].forEach(function(M){f.indexOf(M)===-1&&delete x[M]})})}p.DataSet.registerTransform("hierarchy.partition",i),p.DataSet.registerTransform("adjacency",i)},"./src/transform/hierarchy/tree.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importStar(o("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function i(r,n){if(r.dataType!==p.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var s=r.root;n=v.assign({},h,n);var f=n.as;if(!v.isArray(f)||f.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var u;try{u=c.getField(n)}catch(x){console.warn(x)}u&&s.sum(function(x){return x[u]});var d=g.tree();d.size(n.size),n.nodeSize&&d.nodeSize(n.nodeSize),n.separation&&d.separation(n.separation),d(s);var b=f[0],_=f[1];s.each(function(x){x[b]=x.x,x[_]=x.y})}p.DataSet.registerTransform("hierarchy.tree",i),p.DataSet.registerTransform("tree",i)},"./src/transform/hierarchy/treemap.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importStar(o("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function i(r,n){if(r.dataType!==p.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var s=r.root;n=v.assign({},h,n);var f=n.as;if(!v.isArray(f)||f.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var u;try{u=c.getField(n)}catch(x){console.warn(x)}u&&s.sum(function(x){return x[u]});var d=g.treemap();d.tile(g[n.tile]).size(n.size).round(n.round).padding(n.padding).paddingInner(n.paddingInner).paddingOuter(n.paddingOuter).paddingTop(n.paddingTop).paddingRight(n.paddingRight).paddingBottom(n.paddingBottom).paddingLeft(n.paddingLeft),d(s);var b=f[0],_=f[1];s.each(function(x){x[b]=[x.x0,x.x1,x.x1,x.x0],x[_]=[x.y1,x.y1,x.y0,x.y0],["x0","x1","y0","y1"].forEach(function(M){f.indexOf(M)===-1&&delete x[M]})})}p.DataSet.registerTransform("hierarchy.treemap",i),p.DataSet.registerTransform("treemap",i)},"./src/transform/impute.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importStar(o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),p=e.__importDefault(o("./src/util/partition.ts")),c=o("./src/data-set.ts"),h=o("./src/util/option-parser.ts"),i={groupBy:[]};function r(u){return u.filter(function(d){return!g.isUndefined(d)})}var n=["mean","median","max","min"],s={};n.forEach(function(u){s[u]=function(d,b){return v[u](b)}}),s.value=function(u,d,b){return b};function f(u,d){d=g.assign({},i,d);var b=h.getField(d),_=d.method;if(!_)throw new TypeError("Invalid method!");if(_==="value"&&!g.has(d,"value"))throw new TypeError("Invalid value: it is nil.");var x=r(u.getColumn(b)),M=p.default(u.rows,d.groupBy);g.forIn(M,function(P){var C=r(P.map(function(O){return O[b]}));C.length===0&&(C=x),P.forEach(function(O){if(g.isUndefined(O[b]))if(g.isFunction(_))O[b]=_(O,C,d.value,P);else if(g.isString(_))O[b]=s[_](O,C,d.value);else throw new TypeError("Invalid method: must be a function or one of "+n.join(", "))})})}c.DataSet.registerTransform("impute",f)},"./src/transform/kde.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/get-series-values.ts")),p=e.__importDefault(o("./src/util/kernel.ts")),c=e.__importStar(o("./src/util/bandwidth.ts")),h=e.__importDefault(o("./src/util/partition.ts")),i=o("./src/data-set.ts"),r=o("./src/util/option-parser.ts"),n=o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),s={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},f=g.keys(p.default),u=g.keys(c);function d(b,_){_=g.assign({},s,_);var x=r.getFields(_);if(!g.isArray(x)||x.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var M=_.as;if(!g.isArray(M)||M.length!==3)throw new TypeError("invalid as: must be an array of 3 strings!");var P=_.method;if(g.isString(P)){if(f.indexOf(P)===-1)throw new TypeError("invalid method: "+P+". Must be one of "+f.join(", "));P=p.default[P]}if(!g.isFunction(P))throw new TypeError("invalid method: kernel method must be a function!");var C=_.extent;if(!g.isArray(C)||C.length===0){var O=[];g.each(x,function(W){var H=b.range(W);O=O.concat(H)}),C=[Math.min.apply(Math,e.__spread(O)),Math.max.apply(Math,e.__spread(O))]}var w=_.bandwidth;g.isString(w)&&c[w]?w=c[w](b.getColumn(x[0])):g.isFunction(w)?w=w(b.getColumn(x[0])):(!g.isNumber(w)||w<=0)&&(w=c.nrd(b.getColumn(x[0])));var S=v.default(C,_.step?_.step:w),I=[],j=_.groupBy,N=h.default(b.rows,j);g.forIn(N,function(W){var H={};g.each(x,function(J){var Q=g.pick(W[0],j);H[J]=n.kernelDensityEstimation(W.map(function(we){return we[J]}),P,w);var ne=e.__read(M,3),K=ne[0],ie=ne[1],de=ne[2];Q[K]=J,Q[ie]=[],Q[de]=[],g.each(S,function(we){var Re=H[J](we);Re>=_.minSize&&(Q[ie].push(we),Q[de].push(Re))}),I.push(Q)})}),b.rows=I}i.DataSet.registerTransform("kernel-density-estimation",d),i.DataSet.registerTransform("kde",d),i.DataSet.registerTransform("KDE",d),L.default={KERNEL_METHODS:f,BANDWIDTH_METHODS:u}},"./src/transform/kernel-smooth/density.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/get-series-values.ts")),p=e.__importDefault(o("./src/util/kernel.ts")),c=o("./src/data-set.ts"),h=o("./src/util/option-parser.ts"),i=o("./src/util/bandwidth.ts"),r={as:["x","y","z"],method:"gaussian"},n=g.keys(p.default);function s(f,u){var d,b;u=g.assign({},r,u);var _=h.getFields(u);if(!g.isArray(_)||_.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings!");var x=e.__read(u.as,3),M=x[0],P=x[1],C=x[2];if(!g.isString(M)||!g.isString(P)||!g.isString(C))throw new TypeError("invalid as: must be an array of 3 strings!");var O;if(g.isString(u.method)){if(n.indexOf(u.method)===-1)throw new TypeError("invalid method: "+u.method+". Must be one of "+n.join(", "));O=p.default[u.method]}var w=e.__read(_,2),S=w[0],I=w[1],j=u.extent,N=u.bandwidth,W,H;j&&Array.isArray(j)&&Array.isArray(j[0])&&Array.isArray(j[1])?(d=e.__read(j,2),W=d[0],H=d[1]):(W=f.range(S),H=f.range(I));var J,Q;N&&Array.isArray(N)&&N.slice(0,2).every(g.isNumber)&&N.slice(0,2).every(function(Oe){return Oe>0})?(b=e.__read(N,2),J=b[0],Q=b[1]):(J=i.silverman(f.getColumn(S)),Q=i.silverman(f.getColumn(I)));for(var ne=v.default(W,J),K=v.default(H,Q),ie=f.rows.length,de=[],we=0;we<ne.length;we++)for(var Re=0;Re<K.length;Re++){for(var _e=0,Ue=ne[we],rt=K[Re],Fe=0;Fe<ie;Fe++)_e+=O((Ue-f.rows[Fe][S])/J)*O((rt-f.rows[Fe][I])/Q);var Se=1/(ie*J*Q)*_e,ye={};ye[M]=Ue,ye[P]=rt,ye[C]=Se,de.push(ye)}f.rows=de}c.DataSet.registerTransform("kernel-smooth.density",s),c.DataSet.registerTransform("kernel.density",s),L.default={KERNEL_METHODS:n}},"./src/transform/kernel-smooth/regression.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/get-series-values.ts")),p=e.__importDefault(o("./src/util/kernel.ts")),c=o("./src/data-set.ts"),h=o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),i=o("./src/util/option-parser.ts"),r=o("./src/util/bandwidth.ts"),n={as:["x","y"],method:"gaussian"},s=g.keys(p.default);function f(b,_,x,M){var P=(M-x)/_;return b(P)}function u(b){return function(_){return g.isArray(_)?_.map(function(x){return b(x)}):b(_)}}function d(b,_){_=g.assign({},n,_);var x=i.getFields(_);if(!g.isArray(x)||!(x.length===1||x.length===2))throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var M=e.__read(_.as,2),P=M[0],C=M[1];if(!g.isString(P)||!g.isString(C))throw new TypeError("invalid as: must be an array of 2 strings!");var O,w=_.method;if(g.isString(w)){if(s.indexOf(w)===-1)throw new TypeError("invalid method: "+w+". Must be one of "+s.join(", "));O=p.default[w]}var S=e.__read(x,2),I=S[0],j=S[1],N=b.getColumn(I),W=_.extent;(W||!g.isArray(W))&&(W=b.range(I));var H=_.bandwidth;(!H||!g.isNumber(H)||H<=0)&&(H=r.silverman(N));var J=v.default(W,H),Q=N.length,ne=f.bind(null,O,H),K;if(g.isNil(j))K=u(function(we){var Re=N.map(function(rt){return ne(we,rt)}),_e=h.sum(Re),Ue=Q*H;return!_e||!Ue?0:_e/Ue});else{var ie=b.getColumn(j);K=u(function(we){var Re=N.map(function(rt){return ne(we,rt)}),_e=h.sum(Re.map(function(rt,Fe){return rt*ie[Fe]})),Ue=h.sum(Re);return!_e||!Ue?0:_e/Ue})}var de=J.map(function(we){var Re={};return Re[P]=we,Re[C]=K(we),Re});b.rows=de}c.DataSet.registerTransform("kernel-smooth.regression",d),c.DataSet.registerTransform("kernel.regression",d),L.default={KERNEL_METHODS:s}},"./src/transform/map.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./src/data-set.ts");function g(v){return v}e.DataSet.registerTransform("map",function(v,p){v.rows=v.rows.map(p.callback||g)})},"./src/transform/partition.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/partition.ts")),p=o("./src/data-set.ts"),c={groupBy:[],orderBy:[]};p.DataSet.registerTransform("partition",function(i,r){r=g.assign({},c,r),i.rows=v.default(i.rows,r.groupBy,r.orderBy)});function h(i,r){r=g.assign({},c,r),i.rows=g.values(v.default(i.rows,r.groupBy,r.orderBy))}p.DataSet.registerTransform("group",h),p.DataSet.registerTransform("groups",h)},"./src/transform/percent.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),p=e.__importDefault(o("./src/util/partition.ts")),c=o("./src/data-set.ts"),h=o("./src/util/option-parser.ts"),i={groupBy:[],as:"_percent"};function r(n,s){s=g.assign({},i,s);var f=h.getField(s),u=s.dimension,d=s.groupBy,b=s.as;if(!g.isString(u))throw new TypeError("Invalid dimension: must be a string!");if(g.isArray(b)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),b=b[0]),!g.isString(b))throw new TypeError("Invalid as: must be a string!");var _=n.rows,x=[],M=p.default(_,d);g.forIn(M,function(P){var C=v.sum(P.map(function(w){return w[f]})),O=p.default(P,[u]);g.forIn(O,function(w){var S=v.sum(w.map(function(N){return N[f]})),I=w[0],j=I[u];I[f]=S,I[u]=j,C===0?I[b]=0:I[b]=S/C,x.push(I)})}),n.rows=x}c.DataSet.registerTransform("percent",r)},"./src/transform/pick.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v=o("./src/util/option-parser.ts");g.DataSet.registerTransform("pick",function(p,c){var h=v.getFields(c,p.getColumnNames());p.rows=p.rows.map(function(i){return e.pick(i,h)})})},"./src/transform/proportion.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/partition.ts")),p=o("./src/data-set.ts"),c=o("./src/util/option-parser.ts"),h={groupBy:[],as:"_proportion"};function i(r,n){n=g.assign({},h,n);var s=c.getField(n),f=n.dimension,u=n.groupBy,d=n.as;if(!g.isString(f))throw new TypeError("Invalid dimension: must be a string!");if(g.isArray(d)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),d=d[0]),!g.isString(d))throw new TypeError("Invalid as: must be a string!");var b=r.rows,_=[],x=v.default(b,u);g.forIn(x,function(M){var P=M.length,C=v.default(M,[f]);g.forIn(C,function(O){var w=O.length,S=O[0],I=S[f];S[s]=w,S[f]=I,S[d]=w/P,_.push(S)})}),r.rows=_}p.DataSet.registerTransform("proportion",i)},"./src/transform/regression.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importDefault(o("./node_modules/_regression@2.0.1@regression/dist/regression.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),p=e.__importDefault(o("./src/util/get-series-values.ts")),c=o("./src/data-set.ts"),h=o("./src/util/option-parser.ts"),i=o("./src/util/bandwidth.ts"),r={as:["x","y"],method:"linear",order:2,precision:2},n=["linear","exponential","logarithmic","power","polynomial"];function s(f,u){u=v.assign({},r,u);var d=h.getFields(u);if(!v.isArray(d)||d.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings.");var b=e.__read(d,2),_=b[0],x=b[1],M=u.method;if(n.indexOf(M)===-1)throw new TypeError("invalid method: "+M+". Must be one of "+n.join(", "));var P=f.rows.map(function(H){return[H[_],H[x]]}),C=g.default[M](P,u),O=u.extent;(!v.isArray(O)||O.length!==2)&&(O=f.range(_));var w=u.bandwidth;(!v.isNumber(w)||w<=0)&&(w=i.silverman(f.getColumn(_)));var S=p.default(O,w),I=[],j=e.__read(u.as,2),N=j[0],W=j[1];S.forEach(function(H){var J={},Q=e.__read(C.predict(H),2),ne=Q[0],K=Q[1];J[N]=ne,J[W]=K,isFinite(K)&&I.push(J)}),f.rows=I}c.DataSet.registerTransform("regression",s),L.default={REGRESSION_METHODS:n}},"./src/transform/rename.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts");function v(p,c){var h=c.map||{},i={};e.isPlainObject(h)&&e.forIn(h,function(r,n){e.isString(r)&&e.isString(n)&&(i[n]=r)}),p.rows.forEach(function(r){e.forIn(i,function(n,s){var f=r[s];delete r[s],r[n]=f})})}g.DataSet.registerTransform("rename",v),g.DataSet.registerTransform("rename-fields",v)},"./src/transform/reverse.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./src/data-set.ts");e.DataSet.registerTransform("reverse",function(g){g.rows.reverse()})},"./src/transform/sort-by.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g=o("./src/data-set.ts"),v=o("./src/util/option-parser.ts"),p=["ASC","DESC"];function c(h,i){var r=v.getFields(i,[h.getColumnName(0)]);if(!e.isArray(r))throw new TypeError("Invalid fields: must be an array with strings!");h.rows=e.sortBy(h.rows,r);var n=i.order;if(n&&p.indexOf(n)===-1)throw new TypeError("Invalid order: "+n+" must be one of "+p.join(", "));n==="DESC"&&h.rows.reverse()}g.DataSet.registerTransform("sort-by",c),g.DataSet.registerTransform("sortBy",c)},"./src/transform/sort.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./src/data-set.ts");e.DataSet.registerTransform("sort",function(g,v){var p=g.getColumnName(0);g.rows.sort(v.callback||function(c,h){return c[p]-h[p]})})},"./src/transform/subset.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./src/data-set.ts"),g=o("./src/util/option-parser.ts");e.DataSet.registerTransform("subset",function(v,p){var c=p.startRowIndex||0,h=p.endRowIndex||v.rows.length-1,i=g.getFields(p,v.getColumnNames());v.rows=v.getSubset(c,h,i)})},"./src/transform/tag-cloud.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./src/data-set.ts"),p=e.__importDefault(o("./src/util/tag-cloud.ts")),c=o("./src/util/option-parser.ts"),h={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function i(r,n){n=g.assign({},h,n);var s=p.default();if(!n.size[0]||!n.size[1]){r.rows=[],r._tagCloud=s;return}["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval"].forEach(function(I){n[I]&&s[I](n[I])});var f=c.getFields(n),u=e.__read(f,2),d=u[0],b=u[1];if(!g.isString(d)||!g.isString(b))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var _=r.rows.map(function(I){return I.text=I[d],I.value=I[b],I});s.words(_),n.imageMask&&s.createMask(n.imageMask);var x=s.start(),M=x._tags,P=x._bounds||[{x:0,y:0},{x:n.size[0],y:n.size[1]}];M.forEach(function(I){I.x+=n.size[0]/2,I.y+=n.size[1]/2});var C=e.__read(n.size,2),O=C[0],w=C[1],S=x.hasImage;M.push({text:"",value:0,x:S?0:P[0].x,y:S?0:P[0].y,opacity:0}),M.push({text:"",value:0,x:S?O:P[1].x,y:S?w:P[1].y,opacity:0}),r.rows=M,r._tagCloud=x}v.DataSet.registerTransform("tag-cloud",i),v.DataSet.registerTransform("word-cloud",i)},"./src/transform/waffle.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),p=e.__importDefault(o("./src/util/partition.ts")),c=o("./src/data-set.ts"),h=o("./src/util/option-parser.ts"),i={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function r(n,s){s=g.assign({},i,s);var f=h.getFields(s),u=e.__read(f,2),d=u[0],b=u[1],_=e.__read(s.as,2),x=_[0],M=_[1],P=s.groupBy,C=p.default(n.rows,P),O=g.keys(C),w=e.__read(s.size,2),S=w[0],I=w[1],j=s.maxCount,N=O.length,W=I/N,H=s.rows,J=s.gapRatio,Q=[],ne=s.scale,K=0,ie=0;g.forIn(C,function(de){var we=v.sum(g.map(de,function(_e){return _e[b]})),Re=Math.ceil(we*ne/H);we*ne>j&&(ne=j/we,Re=Math.ceil(we*ne/H)),ie=S/Re}),g.forIn(C,function(de){var we=[K*W,(K+1)*W],Re=we[1]-we[0],_e=Re*(1-J)/H,Ue=0,rt=0;g.each(de,function(Fe){for(var Se=Fe[b],ye=Math.round(Se*ne),Oe=0;Oe<ye;Oe++){rt===H&&(rt=0,Ue++);var ue=g.pick(Fe,[d,b].concat(P));ue[x]=Ue*ie+ie/2,ue[M]=rt*_e+_e/2+we[0],ue._wStep=ie,ue._hStep=_e,rt++,Q.push(ue)}}),K+=1}),n.rows=Q}c.DataSet.registerTransform("waffle",r)},"./src/util/bandwidth.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.nrd=L.silverman=void 0;var e=o("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");function g(p){var c=e.standardDeviation(p),h=4*Math.pow(c,5),i=3*p.length;return Math.pow(h/i,.2)}L.silverman=g;function v(p){var c=e.standardDeviation(p),h=e.interquartileRange(p);return typeof h=="number"&&(c=Math.min(c,h/1.34)),1.06*c*Math.pow(p.length,-.2)}L.nrd=v},"./src/util/get-geo-projection.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importStar(o("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),p=e.__importStar(o("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),c=e.__importStar(o("./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js"));L.default=function(h,i){if(i===void 0&&(i=!1),g.isFunction(h))return i?h:h();if(g.isString(h)){if(v[h])return i?v[h]:v[h]();if(p[h])return i?p[h]:p[h]();if(c[h])return i?c[h]:c[h]()}return null}},"./src/util/get-series-values.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js");L.default=function(g,v){for(var p=v||1,c=e.__read(g,2),h=c[0],i=c[1],r=[],n=h;n<i;)r.push(n),n+=p;return r.push(i),r}},"./src/util/kernel.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(v){return Math.abs(v)<=1?.5:0}function g(v){var p=1-Math.pow(Math.abs(v),3);return Math.pow(p,3)}L.default={boxcar:e,cosine:function(p){return Math.abs(p)<=1?Math.PI/4*Math.cos(Math.PI/2*p):0},epanechnikov:function(p){return Math.abs(p)<1?.75*(1-p*p):0},gaussian:function(p){return .3989422804*Math.exp(-.5*p*p)},quartic:function(p){if(Math.abs(p)<1){var c=1-p*p;return 15/16*c*c}return 0},triangular:function(p){var c=Math.abs(p);return c<1?1-c:0},tricube:function(p){return Math.abs(p)<1?70/81*g(p):0},triweight:function(p){if(Math.abs(p)<1){var c=1-p*p;return 35/32*c*c*c}return 0},uniform:e}},"./src/util/option-parser.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getFields=L.getField=void 0;var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),g="Invalid field: it must be a string!",v="Invalid fields: it must be an array!";function p(h,i){var r=h.field,n=h.fields;if(e.isString(r))return r;if(e.isArray(r))return console.warn(g),r[0];if(console.warn(g+" will try to get fields instead."),e.isString(n))return n;if(e.isArray(n)&&n.length)return n[0];if(i)return i;throw new TypeError(g)}L.getField=p;function c(h,i){var r=h.field,n=h.fields;if(e.isArray(n))return n;if(e.isString(n))return console.warn(v),[n];if(console.warn(v+" will try to get field instead."),e.isString(r))return console.warn(v),[r];if(e.isArray(r)&&r.length)return console.warn(v),r;if(i)return i;throw new TypeError(v)}L.getFields=c},"./src/util/p-by-fraction.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e){for(var g=1/e,v=[],p=0;p<=1;p=p+g)v.push(p);return v}},"./src/util/partition.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),v=e.__importDefault(o("./src/util/simple-sort-by.ts"));L.default=function(p,c,h){h===void 0&&(h=[]);var i=p;h&&h.length&&(i=v.default(p,h));var r;g.isFunction(c)?r=c:g.isArray(c)?r=function(f){return"_"+c.map(function(u){return f[u]}).join("-")}:g.isString(c)&&(r=function(f){return"_"+f[c]});var n=g.groupBy(i,r);return n}},"./src/util/simple-sort-by.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function g(v,p){p===void 0&&(p=[]);var c=void 0;return e.isFunction(p)?c=p:e.isArray(p)?c=function(i,r){for(var n=0;n<p.length;n++){var s=p[n];if(i[s]<r[s])return-1;if(i[s]>r[s])return 1}return 0}:e.isString(p)&&(c=function(i,r){return i[p]<r[p]?-1:i[p]>r[p]?1:0}),v.sort(c)}L.default=g},"./src/util/tag-cloud.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=Math.PI/180,v=1<<11>>5,p=1<<11;function c(S){return S.text}function h(){return"serif"}function i(){return"normal"}function r(S){return S.value}function n(){return~~(Math.random()*2)*90}function s(){return 1}function f(S,I,j,N){if(!I.sprite){var W=S.context,H=S.ratio;W.clearRect(0,0,(v<<5)/H,p/H);var J=0,Q=0,ne=0,K=j.length;for(--N;++N<K;){I=j[N],W.save(),W.font=I.style+" "+I.weight+" "+~~((I.size+1)/H)+"px "+I.font;var ie=W.measureText(I.text+"m").width*H,de=I.size<<1;if(I.rotate){var we=Math.sin(I.rotate*g),Re=Math.cos(I.rotate*g),_e=ie*Re,Ue=ie*we,rt=de*Re,Fe=de*we;ie=Math.max(Math.abs(_e+Fe),Math.abs(_e-Fe))+31>>5<<5,de=~~Math.max(Math.abs(Ue+rt),Math.abs(Ue-rt))}else ie=ie+31>>5<<5;if(de>ne&&(ne=de),J+ie>=v<<5&&(J=0,Q+=ne,ne=0),Q+de>=p)break;W.translate((J+(ie>>1))/H,(Q+(de>>1))/H),I.rotate&&W.rotate(I.rotate*g),W.fillText(I.text,0,0),I.padding&&(W.lineWidth=2*I.padding,W.strokeText(I.text,0,0)),W.restore(),I.width=ie,I.height=de,I.xoff=J,I.yoff=Q,I.x1=ie>>1,I.y1=de>>1,I.x0=-I.x1,I.y0=-I.y1,I.hasText=!0,J+=ie}for(var Se=W.getImageData(0,0,(v<<5)/H,p/H).data,ye=[];--N>=0;)if(I=j[N],!!I.hasText){for(var ie=I.width,Oe=ie>>5,de=I.y1-I.y0,ue=0;ue<de*Oe;ue++)ye[ue]=0;if(J=I.xoff,J==null)return;Q=I.yoff;for(var xe=0,Ae=-1,pe=0;pe<de;pe++){for(var ue=0;ue<ie;ue++){var be=Oe*pe+(ue>>5),le=Se[(Q+pe)*(v<<5)+(J+ue)<<2]?1<<31-ue%32:0;ye[be]|=le,xe|=le}xe?Ae=pe:(I.y0++,de--,pe--,Q++)}I.y1=I.y0+Ae,I.sprite=ye.slice(0,(I.y1-I.y0)*Oe)}}}function u(S,I,j){j>>=5;for(var N=S.sprite,W=S.width>>5,H=S.x-(W<<4),J=H&127,Q=32-J,ne=S.y1-S.y0,K=(S.y+S.y0)*j+(H>>5),ie,de=0;de<ne;de++){ie=0;for(var we=0;we<=W;we++)if((ie<<Q|(we<W?(ie=N[de*W+we])>>>J:0))&I[K+we])return!0;K+=j}return!1}function d(S,I){var j=S[0],N=S[1];I.x+I.x0<j.x&&(j.x=I.x+I.x0),I.y+I.y0<j.y&&(j.y=I.y+I.y0),I.x+I.x1>N.x&&(N.x=I.x+I.x1),I.y+I.y1>N.y&&(N.y=I.y+I.y1)}function b(S,I){return S.x+S.x1>I[0].x&&S.x+S.x0<I[1].x&&S.y+S.y1>I[0].y&&S.y+S.y0<I[1].y}function _(S){var I=S[0]/S[1];return function(j){return[I*(j*=.1)*Math.cos(j),j*Math.sin(j)]}}function x(S){var I=4,j=I*S[0]/S[1],N=0,W=0;return function(H){var J=H<0?-1:1;switch(Math.sqrt(1+4*J*H)-J&3){case 0:N+=j;break;case 1:W+=I;break;case 2:N-=j;break;default:W-=I;break}return[N,W]}}function M(S){for(var I=[],j=-1;++j<S;)I[j]=0;return I}function P(){return document.createElement("canvas")}function C(S){return typeof S=="function"?S:function(){return S}}var O={archimedean:_,rectangular:x};function w(){var S=[256,256],I=c,j=h,N=r,W=i,H=i,J=n,Q=s,ne=_,K=[],ie=Infinity,de=Math.random,we=P,Re={};Re.canvas=function(rt){return arguments.length?(we=C(rt),Re):we},Re.start=function(){var rt=e.__read(S,2),Fe=rt[0],Se=rt[1],ye=_e(we()),Oe=Re.board?Re.board:M((S[0]>>5)*S[1]),ue=K.length,xe=[],Ae=K.map(function(z,ae){return z.text=I.call(this,z,ae),z.font=j.call(this,z,ae),z.style=W.call(this,z,ae),z.weight=H.call(this,z,ae),z.rotate=J.call(this,z,ae),z.size=~~N.call(this,z,ae),z.padding=Q.call(this,z,ae),z}).sort(function(z,ae){return ae.size-z.size}),pe=-1,be=Re.board?[{x:0,y:0},{x:Fe,y:Se}]:null;le();function le(){for(var z=Date.now();Date.now()-z<ie&&++pe<ue;){var ae=Ae[pe];ae.x=Fe*(de()+.5)>>1,ae.y=Se*(de()+.5)>>1,f(ye,ae,Ae,pe),ae.hasText&&Ue(Oe,ae,be)&&(xe.push(ae),be?Re.hasImage||d(be,ae):be=[{x:ae.x+ae.x0,y:ae.y+ae.y0},{x:ae.x+ae.x1,y:ae.y+ae.y1}],ae.x-=S[0]>>1,ae.y-=S[1]>>1)}Re._tags=xe,Re._bounds=be}return Re};function _e(rt){rt.width=rt.height=1;var Fe=Math.sqrt(rt.getContext("2d").getImageData(0,0,1,1).data.length>>2);rt.width=(v<<5)/Fe,rt.height=p/Fe;var Se=rt.getContext("2d");return Se.fillStyle=Se.strokeStyle="red",Se.textAlign="center",{context:Se,ratio:Fe}}function Ue(rt,Fe,Se){for(var ye=Fe.x,Oe=Fe.y,ue=Math.sqrt(S[0]*S[0]+S[1]*S[1]),xe=ne(S),Ae=de()<.5?1:-1,pe,be=-Ae,le,z;(pe=xe(be+=Ae))&&(le=~~pe[0],z=~~pe[1],!(Math.min(Math.abs(le),Math.abs(z))>=ue));)if(Fe.x=ye+le,Fe.y=Oe+z,!(Fe.x+Fe.x0<0||Fe.y+Fe.y0<0||Fe.x+Fe.x1>S[0]||Fe.y+Fe.y1>S[1])&&(!Se||!u(Fe,rt,S[0]))&&(!Se||b(Fe,Se))){for(var ae=Fe.sprite,V=Fe.width>>5,re=S[0]>>5,te=Fe.x-(V<<4),q=te&127,ve=32-q,Me=Fe.y1-Fe.y0,De=void 0,ze=(Fe.y+Fe.y0)*re+(te>>5),We=0;We<Me;We++){De=0;for(var He=0;He<=V;He++)rt[ze+He]|=De<<ve|(He<V?(De=ae[We*V+He])>>>q:0);ze+=re}return delete Fe.sprite,!0}return!1}return Re.createMask=function(rt){var Fe=document.createElement("canvas"),Se=e.__read(S,2),ye=Se[0],Oe=Se[1];if(!(!ye||!Oe)){var ue=ye>>5,xe=M((ye>>5)*Oe);Fe.width=ye,Fe.height=Oe;var Ae=Fe.getContext("2d");Ae.drawImage(rt,0,0,rt.width,rt.height,0,0,ye,Oe);for(var pe=Ae.getImageData(0,0,ye,Oe).data,be=0;be<Oe;be++)for(var le=0;le<ye;le++){var z=ue*be+(le>>5),ae=be*ye+le<<2,V=pe[ae]>=250&&pe[ae+1]>=250&&pe[ae+2]>=250,re=V?1<<31-le%32:0;xe[z]|=re}Re.board=xe,Re.hasImage=!0}},Re.timeInterval=function(rt){return arguments.length?(ie=rt==null?Infinity:rt,Re):ie},Re.words=function(rt){return arguments.length?(K=rt,Re):K},Re.size=function(rt){return arguments.length?(S=[+rt[0],+rt[1]],Re):S},Re.font=function(rt){return arguments.length?(j=C(rt),Re):j},Re.fontStyle=function(rt){return arguments.length?(W=C(rt),Re):W},Re.fontWeight=function(rt){return arguments.length?(H=C(rt),Re):H},Re.rotate=function(rt){return arguments.length?(J=C(rt),Re):J},Re.text=function(rt){return arguments.length?(I=C(rt),Re):I},Re.spiral=function(rt){return arguments.length?(ne=O[rt]||rt,Re):ne},Re.fontSize=function(rt){return arguments.length?(N=C(rt),Re):N},Re.padding=function(rt){return arguments.length?(Q=C(rt),Re):Q},Re.random=function(rt){return arguments.length?(de=rt,Re):de},Re}L.default=w},"./src/view.ts":function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.View=void 0;var e=o("./node_modules/_tslib@2.1.0@tslib/tslib.js"),g=e.__importDefault(o("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),v=o("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function p(h){var i={};return v.forIn(h,function(r,n){v.isObject(r)&&r.isView?i[n]=r:v.isArray(r)?i[n]=r.concat([]):v.isPlainObject(r)?i[n]=v.clone(r):i[n]=r}),i}var c=function(h){e.__extends(i,h);function i(r,n){var s=h.call(this)||this;if(s.isView=!0,s.isDataView=!0,s.watchingStates=null,s.dataType="table",s.transforms=[],s.origin=[],s.rows=[],r&&r.isDataSet?s.dataSet=r:(s.dataSet=null,n=r),s.loose=!s.dataSet,n&&(s.watchingStates=n.watchingStates),!s.loose){var f=s.watchingStates;r.on("statechange",function(u){v.isArray(f)?f.indexOf(u)>-1&&s._reExecute():s._reExecute()})}return s}return i.prototype._parseStateExpression=function(r){var n=this.dataSet;if(n!==null){var s=/^\$state\.(\w+)/.exec(r);return s?n.state[s[1]]:r}},i.prototype._preparseOptions=function(r){var n=this,s=p(r);return this.loose||v.forIn(s,function(f,u){v.isString(f)&&/^\$state\./.test(f)&&(s[u]=n._parseStateExpression(f))}),s},i.prototype._prepareSource=function(r,n){if(this._source={source:r,options:n},n){var s=this._preparseOptions(n);this.origin=i.DataSet.getConnector(s.type)(r,s,this)}else if(r instanceof i||v.isString(r))this.origin=i.DataSet.getConnector("default")(r,this.dataSet);else if(v.isArray(r))this.origin=r;else if(v.isObject(r)&&r.type){var s=this._preparseOptions(r);this.origin=i.DataSet.getConnector(s.type)(s,this)}else throw new TypeError("Invalid source");return this.rows=v.deepMix([],this.origin),this},i.prototype.source=function(r,n){return this._prepareSource(r,n)._reExecuteTransforms(),this.trigger("change",[]),this},i.prototype.transform=function(r){return r&&r.type&&(this.transforms.push(r),this._executeTransform(r)),this},i.prototype._executeTransform=function(r){r=this._preparseOptions(r);var n=i.DataSet.getTransform(r.type);n(this,r)},i.prototype._reExecuteTransforms=function(){var r=this;this.transforms.forEach(function(n){r._executeTransform(n)})},i.prototype.addRow=function(r){this.rows.push(r)},i.prototype.removeRow=function(r){this.rows.splice(r,1)},i.prototype.updateRow=function(r,n){v.assign(this.rows[r],n)},i.prototype.findRows=function(r){return this.rows.filter(function(n){return v.isMatch(n,r)})},i.prototype.findRow=function(r){return v.find(this.rows,r)},i.prototype.getColumnNames=function(){var r=this.rows[0];return r?v.keys(r):[]},i.prototype.getColumnName=function(r){return this.getColumnNames()[r]},i.prototype.getColumnIndex=function(r){var n=this.getColumnNames();return n.indexOf(r)},i.prototype.getColumn=function(r){return this.rows.map(function(n){return n[r]})},i.prototype.getColumnData=function(r){return this.getColumn(r)},i.prototype.getSubset=function(r,n,s){for(var f=[],u=r;u<=n;u++)f.push(v.pick(this.rows[u],s));return f},i.prototype.toString=function(r){return r===void 0&&(r=!1),r?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},i.prototype._reExecute=function(){var r=this._source,n=r.source,s=r.options;this._prepareSource(n,s),this._reExecuteTransforms(),this.trigger("change",[])},i}(g.default);L.View=c}})})},"cq/+":function(br,Ot,Ee){var he=Ee("mc0g"),B=he();br.exports=B},cvCv:function(br,Ot){function Ee(he){return function(){return he}}br.exports=Ee},dA7e:function(br,Ot,Ee){br.exports.VectorTile=Ee("B93f"),br.exports.VectorTileFeature=Ee("HfwV"),br.exports.VectorTileLayer=Ee("DiGy")},dQpi:function(br,Ot,Ee){var he=Ee("yGk4"),B=Ee("vN+2"),L=Ee("rEGp"),o=1/0,e=he&&1/L(new he([,-0]))[1]==o?function(g){return new he(g)}:B;br.exports=e},dTAl:function(br,Ot,Ee){var he=Ee("GoyQ"),B=Object.create,L=function(){function o(){}return function(e){if(!he(e))return{};if(B)return B(e);o.prototype=e;var g=new o;return o.prototype=void 0,g}}();br.exports=L},eRUA:function(br,Ot,Ee){"use strict";br.exports=B;var he=Ee("kVK+");function B(N){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(N)?N:new Uint8Array(N||0),this.pos=0,this.type=0,this.length=this.buf.length}B.Varint=0,B.Fixed64=1,B.Bytes=2,B.Fixed32=5;var L=(1<<16)*(1<<16),o=1/L,e=12,g=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");B.prototype={destroy:function(){this.buf=null},readFields:function(W,H,J){for(J=J||this.length;this.pos<J;){var Q=this.readVarint(),ne=Q>>3,K=this.pos;this.type=Q&7,W(ne,H,this),this.pos===K&&this.skip(Q)}return H},readMessage:function(W,H){return this.readFields(W,H,this.readVarint()+this.pos)},readFixed32:function(){var W=C(this.buf,this.pos);return this.pos+=4,W},readSFixed32:function(){var W=w(this.buf,this.pos);return this.pos+=4,W},readFixed64:function(){var W=C(this.buf,this.pos)+C(this.buf,this.pos+4)*L;return this.pos+=8,W},readSFixed64:function(){var W=C(this.buf,this.pos)+w(this.buf,this.pos+4)*L;return this.pos+=8,W},readFloat:function(){var W=he.read(this.buf,this.pos,!0,23,4);return this.pos+=4,W},readDouble:function(){var W=he.read(this.buf,this.pos,!0,52,8);return this.pos+=8,W},readVarint:function(W){var H=this.buf,J,Q;return Q=H[this.pos++],J=Q&127,Q<128||(Q=H[this.pos++],J|=(Q&127)<<7,Q<128)||(Q=H[this.pos++],J|=(Q&127)<<14,Q<128)||(Q=H[this.pos++],J|=(Q&127)<<21,Q<128)?J:(Q=H[this.pos],J|=(Q&15)<<28,v(J,W,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var W=this.readVarint();return W%2==1?(W+1)/-2:W/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var W=this.readVarint()+this.pos,H=this.pos;return this.pos=W,W-H>=e&&g?I(this.buf,H,W):S(this.buf,H,W)},readBytes:function(){var W=this.readVarint()+this.pos,H=this.buf.subarray(this.pos,W);return this.pos=W,H},readPackedVarint:function(W,H){if(this.type!==B.Bytes)return W.push(this.readVarint(H));var J=p(this);for(W=W||[];this.pos<J;)W.push(this.readVarint(H));return W},readPackedSVarint:function(W){if(this.type!==B.Bytes)return W.push(this.readSVarint());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readSVarint());return W},readPackedBoolean:function(W){if(this.type!==B.Bytes)return W.push(this.readBoolean());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readBoolean());return W},readPackedFloat:function(W){if(this.type!==B.Bytes)return W.push(this.readFloat());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readFloat());return W},readPackedDouble:function(W){if(this.type!==B.Bytes)return W.push(this.readDouble());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readDouble());return W},readPackedFixed32:function(W){if(this.type!==B.Bytes)return W.push(this.readFixed32());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readFixed32());return W},readPackedSFixed32:function(W){if(this.type!==B.Bytes)return W.push(this.readSFixed32());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readSFixed32());return W},readPackedFixed64:function(W){if(this.type!==B.Bytes)return W.push(this.readFixed64());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readFixed64());return W},readPackedSFixed64:function(W){if(this.type!==B.Bytes)return W.push(this.readSFixed64());var H=p(this);for(W=W||[];this.pos<H;)W.push(this.readSFixed64());return W},skip:function(W){var H=W&7;if(H===B.Varint)for(;this.buf[this.pos++]>127;);else if(H===B.Bytes)this.pos=this.readVarint()+this.pos;else if(H===B.Fixed32)this.pos+=4;else if(H===B.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+H)},writeTag:function(W,H){this.writeVarint(W<<3|H)},realloc:function(W){for(var H=this.length||16;H<this.pos+W;)H*=2;if(H!==this.length){var J=new Uint8Array(H);J.set(this.buf),this.buf=J,this.length=H}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(W){this.realloc(4),O(this.buf,W,this.pos),this.pos+=4},writeSFixed32:function(W){this.realloc(4),O(this.buf,W,this.pos),this.pos+=4},writeFixed64:function(W){this.realloc(8),O(this.buf,W&-1,this.pos),O(this.buf,Math.floor(W*o),this.pos+4),this.pos+=8},writeSFixed64:function(W){this.realloc(8),O(this.buf,W&-1,this.pos),O(this.buf,Math.floor(W*o),this.pos+4),this.pos+=8},writeVarint:function(W){if(W=+W||0,W>268435455||W<0){h(W,this);return}this.realloc(4),this.buf[this.pos++]=W&127|(W>127?128:0),!(W<=127)&&(this.buf[this.pos++]=(W>>>=7)&127|(W>127?128:0),!(W<=127)&&(this.buf[this.pos++]=(W>>>=7)&127|(W>127?128:0),!(W<=127)&&(this.buf[this.pos++]=W>>>7&127)))},writeSVarint:function(W){this.writeVarint(W<0?-W*2-1:W*2)},writeBoolean:function(W){this.writeVarint(Boolean(W))},writeString:function(W){W=String(W),this.realloc(W.length*4),this.pos++;var H=this.pos;this.pos=j(this.buf,W,this.pos);var J=this.pos-H;J>=128&&n(H,J,this),this.pos=H-1,this.writeVarint(J),this.pos+=J},writeFloat:function(W){this.realloc(4),he.write(this.buf,W,this.pos,!0,23,4),this.pos+=4},writeDouble:function(W){this.realloc(8),he.write(this.buf,W,this.pos,!0,52,8),this.pos+=8},writeBytes:function(W){var H=W.length;this.writeVarint(H),this.realloc(H);for(var J=0;J<H;J++)this.buf[this.pos++]=W[J]},writeRawMessage:function(W,H){this.pos++;var J=this.pos;W(H,this);var Q=this.pos-J;Q>=128&&n(J,Q,this),this.pos=J-1,this.writeVarint(Q),this.pos+=Q},writeMessage:function(W,H,J){this.writeTag(W,B.Bytes),this.writeRawMessage(H,J)},writePackedVarint:function(W,H){H.length&&this.writeMessage(W,s,H)},writePackedSVarint:function(W,H){H.length&&this.writeMessage(W,f,H)},writePackedBoolean:function(W,H){H.length&&this.writeMessage(W,b,H)},writePackedFloat:function(W,H){H.length&&this.writeMessage(W,u,H)},writePackedDouble:function(W,H){H.length&&this.writeMessage(W,d,H)},writePackedFixed32:function(W,H){H.length&&this.writeMessage(W,_,H)},writePackedSFixed32:function(W,H){H.length&&this.writeMessage(W,x,H)},writePackedFixed64:function(W,H){H.length&&this.writeMessage(W,M,H)},writePackedSFixed64:function(W,H){H.length&&this.writeMessage(W,P,H)},writeBytesField:function(W,H){this.writeTag(W,B.Bytes),this.writeBytes(H)},writeFixed32Field:function(W,H){this.writeTag(W,B.Fixed32),this.writeFixed32(H)},writeSFixed32Field:function(W,H){this.writeTag(W,B.Fixed32),this.writeSFixed32(H)},writeFixed64Field:function(W,H){this.writeTag(W,B.Fixed64),this.writeFixed64(H)},writeSFixed64Field:function(W,H){this.writeTag(W,B.Fixed64),this.writeSFixed64(H)},writeVarintField:function(W,H){this.writeTag(W,B.Varint),this.writeVarint(H)},writeSVarintField:function(W,H){this.writeTag(W,B.Varint),this.writeSVarint(H)},writeStringField:function(W,H){this.writeTag(W,B.Bytes),this.writeString(H)},writeFloatField:function(W,H){this.writeTag(W,B.Fixed32),this.writeFloat(H)},writeDoubleField:function(W,H){this.writeTag(W,B.Fixed64),this.writeDouble(H)},writeBooleanField:function(W,H){this.writeVarintField(W,Boolean(H))}};function v(N,W,H){var J=H.buf,Q,ne;if(ne=J[H.pos++],Q=(ne&112)>>4,ne<128||(ne=J[H.pos++],Q|=(ne&127)<<3,ne<128)||(ne=J[H.pos++],Q|=(ne&127)<<10,ne<128)||(ne=J[H.pos++],Q|=(ne&127)<<17,ne<128)||(ne=J[H.pos++],Q|=(ne&127)<<24,ne<128)||(ne=J[H.pos++],Q|=(ne&1)<<31,ne<128))return c(N,Q,W);throw new Error("Expected varint not more than 10 bytes")}function p(N){return N.type===B.Bytes?N.readVarint()+N.pos:N.pos+1}function c(N,W,H){return H?W*4294967296+(N>>>0):(W>>>0)*4294967296+(N>>>0)}function h(N,W){var H,J;if(N>=0?(H=N%4294967296|0,J=N/4294967296|0):(H=~(-N%4294967296),J=~(-N/4294967296),H^4294967295?H=H+1|0:(H=0,J=J+1|0)),N>=18446744073709552e3||N<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");W.realloc(10),i(H,J,W),r(J,W)}function i(N,W,H){H.buf[H.pos++]=N&127|128,N>>>=7,H.buf[H.pos++]=N&127|128,N>>>=7,H.buf[H.pos++]=N&127|128,N>>>=7,H.buf[H.pos++]=N&127|128,N>>>=7,H.buf[H.pos]=N&127}function r(N,W){var H=(N&7)<<4;W.buf[W.pos++]|=H|((N>>>=3)?128:0),!!N&&(W.buf[W.pos++]=N&127|((N>>>=7)?128:0),!!N&&(W.buf[W.pos++]=N&127|((N>>>=7)?128:0),!!N&&(W.buf[W.pos++]=N&127|((N>>>=7)?128:0),!!N&&(W.buf[W.pos++]=N&127|((N>>>=7)?128:0),!!N&&(W.buf[W.pos++]=N&127)))))}function n(N,W,H){var J=W<=16383?1:W<=2097151?2:W<=268435455?3:Math.floor(Math.log(W)/(Math.LN2*7));H.realloc(J);for(var Q=H.pos-1;Q>=N;Q--)H.buf[Q+J]=H.buf[Q]}function s(N,W){for(var H=0;H<N.length;H++)W.writeVarint(N[H])}function f(N,W){for(var H=0;H<N.length;H++)W.writeSVarint(N[H])}function u(N,W){for(var H=0;H<N.length;H++)W.writeFloat(N[H])}function d(N,W){for(var H=0;H<N.length;H++)W.writeDouble(N[H])}function b(N,W){for(var H=0;H<N.length;H++)W.writeBoolean(N[H])}function _(N,W){for(var H=0;H<N.length;H++)W.writeFixed32(N[H])}function x(N,W){for(var H=0;H<N.length;H++)W.writeSFixed32(N[H])}function M(N,W){for(var H=0;H<N.length;H++)W.writeFixed64(N[H])}function P(N,W){for(var H=0;H<N.length;H++)W.writeSFixed64(N[H])}function C(N,W){return(N[W]|N[W+1]<<8|N[W+2]<<16)+N[W+3]*16777216}function O(N,W,H){N[H]=W,N[H+1]=W>>>8,N[H+2]=W>>>16,N[H+3]=W>>>24}function w(N,W){return(N[W]|N[W+1]<<8|N[W+2]<<16)+(N[W+3]<<24)}function S(N,W,H){for(var J="",Q=W;Q<H;){var ne=N[Q],K=null,ie=ne>239?4:ne>223?3:ne>191?2:1;if(Q+ie>H)break;var de,we,Re;ie===1?ne<128&&(K=ne):ie===2?(de=N[Q+1],(de&192)==128&&(K=(ne&31)<<6|de&63,K<=127&&(K=null))):ie===3?(de=N[Q+1],we=N[Q+2],(de&192)==128&&(we&192)==128&&(K=(ne&15)<<12|(de&63)<<6|we&63,(K<=2047||K>=55296&&K<=57343)&&(K=null))):ie===4&&(de=N[Q+1],we=N[Q+2],Re=N[Q+3],(de&192)==128&&(we&192)==128&&(Re&192)==128&&(K=(ne&15)<<18|(de&63)<<12|(we&63)<<6|Re&63,(K<=65535||K>=1114112)&&(K=null))),K===null?(K=65533,ie=1):K>65535&&(K-=65536,J+=String.fromCharCode(K>>>10&1023|55296),K=56320|K&1023),J+=String.fromCharCode(K),Q+=ie}return J}function I(N,W,H){return g.decode(N.subarray(W,H))}function j(N,W,H){for(var J=0,Q,ne;J<W.length;J++){if(Q=W.charCodeAt(J),Q>55295&&Q<57344)if(ne)if(Q<56320){N[H++]=239,N[H++]=191,N[H++]=189,ne=Q;continue}else Q=ne-55296<<10|Q-56320|65536,ne=null;else{Q>56319||J+1===W.length?(N[H++]=239,N[H++]=191,N[H++]=189):ne=Q;continue}else ne&&(N[H++]=239,N[H++]=191,N[H++]=189,ne=null);Q<128?N[H++]=Q:(Q<2048?N[H++]=Q>>6|192:(Q<65536?N[H++]=Q>>12|224:(N[H++]=Q>>18|240,N[H++]=Q>>12&63|128),N[H++]=Q>>6&63|128),N[H++]=Q&63|128)}return H}},ezZc:function(br,Ot,Ee){"use strict";var he=Ee("U1ZX"),B=Ee.n(he),L=Ee("aEx7")},fbvF:function(br,Ot,Ee){(function(he,B){br.exports=B()})(this,function(){"use strict";var he=function(nr){return nr instanceof Uint8Array||nr instanceof Uint16Array||nr instanceof Uint32Array||nr instanceof Int8Array||nr instanceof Int16Array||nr instanceof Int32Array||nr instanceof Float32Array||nr instanceof Float64Array||nr instanceof Uint8ClampedArray},B=function(nr,Xr){for(var Gn=Object.keys(Xr),vi=0;vi<Gn.length;++vi)nr[Gn[vi]]=Xr[Gn[vi]];return nr},L=`
`;function o(kt){return typeof atob!="undefined"?atob(kt):"base64:"+kt}function e(kt){var nr=new Error("(regl) "+kt);throw console.error(nr),nr}function g(kt,nr){kt||e(nr)}function v(kt){return kt?": "+kt:""}function p(kt,nr,Xr){kt in nr||e("unknown parameter ("+kt+")"+v(Xr)+". possible values: "+Object.keys(nr).join())}function c(kt,nr){he(kt)||e("invalid parameter type"+v(nr)+". must be a typed array")}function h(kt,nr){switch(nr){case"number":return typeof kt=="number";case"object":return typeof kt=="object";case"string":return typeof kt=="string";case"boolean":return typeof kt=="boolean";case"function":return typeof kt=="function";case"undefined":return typeof kt=="undefined";case"symbol":return typeof kt=="symbol"}}function i(kt,nr,Xr){h(kt,nr)||e("invalid parameter type"+v(Xr)+". expected "+nr+", got "+typeof kt)}function r(kt,nr){kt>=0&&(kt|0)===kt||e("invalid parameter type, ("+kt+")"+v(nr)+". must be a nonnegative integer")}function n(kt,nr,Xr){nr.indexOf(kt)<0&&e("invalid value"+v(Xr)+". must be one of: "+nr)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function f(kt){Object.keys(kt).forEach(function(nr){s.indexOf(nr)<0&&e('invalid regl constructor argument "'+nr+'". must be one of '+s)})}function u(kt,nr){for(kt=kt+"";kt.length<nr;)kt=" "+kt;return kt}function d(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(kt,nr){this.number=kt,this.line=nr,this.errors=[]}function _(kt,nr,Xr){this.file=kt,this.line=nr,this.message=Xr}function x(){var kt=new Error,nr=(kt.stack||kt).toString(),Xr=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(nr);if(Xr)return Xr[1];var Gn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(nr);return Gn?Gn[1]:"unknown"}function M(){var kt=new Error,nr=(kt.stack||kt).toString(),Xr=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(nr);if(Xr)return Xr[1];var Gn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(nr);return Gn?Gn[1]:"unknown"}function P(kt,nr){var Xr=kt.split(`
`),Gn=1,vi=0,fi={unknown:new d,0:new d};fi.unknown.name=fi[0].name=nr||x(),fi.unknown.lines.push(new b(0,""));for(var Ln=0;Ln<Xr.length;++Ln){var Li=Xr[Ln],Bi=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Li);if(Bi)switch(Bi[1]){case"line":var Hi=/(\d+)(\s+\d+)?/.exec(Bi[2]);Hi&&(Gn=Hi[1]|0,Hi[2]&&(vi=Hi[2]|0,vi in fi||(fi[vi]=new d)));break;case"define":var zi=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Bi[2]);zi&&(fi[vi].name=zi[1]?o(zi[2]):zi[2]);break}fi[vi].lines.push(new b(Gn++,Li))}return Object.keys(fi).forEach(function(Gi){var aa=fi[Gi];aa.lines.forEach(function(Yi){aa.index[Yi.number]=Yi})}),fi}function C(kt){var nr=[];return kt.split(`
`).forEach(function(Xr){if(!(Xr.length<5)){var Gn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Xr);Gn?nr.push(new _(Gn[1]|0,Gn[2]|0,Gn[3].trim())):Xr.length>0&&nr.push(new _("unknown",0,Xr))}}),nr}function O(kt,nr){nr.forEach(function(Xr){var Gn=kt[Xr.file];if(Gn){var vi=Gn.index[Xr.line];if(vi){vi.errors.push(Xr),Gn.hasErrors=!0;return}}kt.unknown.hasErrors=!0,kt.unknown.lines[0].errors.push(Xr)})}function w(kt,nr,Xr,Gn,vi){if(!kt.getShaderParameter(nr,kt.COMPILE_STATUS)){var fi=kt.getShaderInfoLog(nr),Ln=Gn===kt.FRAGMENT_SHADER?"fragment":"vertex";J(Xr,"string",Ln+" shader source must be a string",vi);var Li=P(Xr,vi),Bi=C(fi);O(Li,Bi),Object.keys(Li).forEach(function(Hi){var zi=Li[Hi];if(!zi.hasErrors)return;var Gi=[""],aa=[""];function Yi(Fi,$n){Gi.push(Fi),aa.push($n||"")}Yi("file number "+Hi+": "+zi.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),zi.lines.forEach(function(Fi){if(Fi.errors.length>0){Yi(u(Fi.number,4)+"|  ","background-color:yellow; font-weight:bold"),Yi(Fi.line+L,"color:red; background-color:yellow; font-weight:bold");var $n=0;Fi.errors.forEach(function(Xn){var Ui=Xn.message,oa=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ui);if(oa){var pi=oa[1];switch(Ui=oa[2],pi){case"assign":pi="=";break}$n=Math.max(Fi.line.indexOf(pi,$n),0)}else $n=0;Yi(u("| ",6)),Yi(u("^^^",$n+3)+L,"font-weight:bold"),Yi(u("| ",6)),Yi(Ui+L,"font-weight:bold")}),Yi(u("| ",6)+L)}else Yi(u(Fi.number,4)+"|  "),Yi(Fi.line+L,"color:red")}),typeof document!="undefined"&&!window.chrome?(aa[0]=Gi.join("%c"),console.log.apply(console,aa)):console.log(Gi.join(""))}),g.raise("Error compiling "+Ln+" shader, "+Li[0].name)}}function S(kt,nr,Xr,Gn,vi){if(!kt.getProgramParameter(nr,kt.LINK_STATUS)){var fi=kt.getProgramInfoLog(nr),Ln=P(Xr,vi),Li=P(Gn,vi),Bi='Error linking program with vertex shader, "'+Li[0].name+'", and fragment shader "'+Ln[0].name+'"';typeof document!="undefined"?console.log("%c"+Bi+L+"%c"+fi,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Bi+L+fi),g.raise(Bi)}}function I(kt){kt._commandRef=x()}function j(kt,nr,Xr,Gn){I(kt);function vi(Bi){return Bi?Gn.id(Bi):0}kt._fragId=vi(kt.static.frag),kt._vertId=vi(kt.static.vert);function fi(Bi,Hi){Object.keys(Hi).forEach(function(zi){Bi[Gn.id(zi)]=!0})}var Ln=kt._uniformSet={};fi(Ln,nr.static),fi(Ln,nr.dynamic);var Li=kt._attributeSet={};fi(Li,Xr.static),fi(Li,Xr.dynamic),kt._hasCount="count"in kt.static||"count"in kt.dynamic||"elements"in kt.static||"elements"in kt.dynamic}function N(kt,nr){var Xr=M();e(kt+" in command "+(nr||x())+(Xr==="unknown"?"":" called from "+Xr))}function W(kt,nr,Xr){kt||N(nr,Xr||x())}function H(kt,nr,Xr,Gn){kt in nr||N("unknown parameter ("+kt+")"+v(Xr)+". possible values: "+Object.keys(nr).join(),Gn||x())}function J(kt,nr,Xr,Gn){h(kt,nr)||N("invalid parameter type"+v(Xr)+". expected "+nr+", got "+typeof kt,Gn||x())}function Q(kt){kt()}function ne(kt,nr,Xr){kt.texture?n(kt.texture._texture.internalformat,nr,"unsupported texture format for attachment"):n(kt.renderbuffer._renderbuffer.format,Xr,"unsupported renderbuffer format for attachment")}var K=33071,ie=9728,de=9984,we=9985,Re=9986,_e=9987,Ue=5120,rt=5121,Fe=5122,Se=5123,ye=5124,Oe=5125,ue=5126,xe=32819,Ae=32820,pe=33635,be=34042,le=36193,z={};z[Ue]=z[rt]=1,z[Fe]=z[Se]=z[le]=z[pe]=z[xe]=z[Ae]=2,z[ye]=z[Oe]=z[ue]=z[be]=4;function ae(kt,nr){return kt===Ae||kt===xe||kt===pe?2:kt===be?4:z[kt]*nr}function V(kt){return!(kt&kt-1)&&!!kt}function re(kt,nr,Xr){var Gn,vi=nr.width,fi=nr.height,Ln=nr.channels;g(vi>0&&vi<=Xr.maxTextureSize&&fi>0&&fi<=Xr.maxTextureSize,"invalid texture shape"),(kt.wrapS!==K||kt.wrapT!==K)&&g(V(vi)&&V(fi),"incompatible wrap mode for texture, both width and height must be power of 2"),nr.mipmask===1?vi!==1&&fi!==1&&g(kt.minFilter!==de&&kt.minFilter!==Re&&kt.minFilter!==we&&kt.minFilter!==_e,"min filter requires mipmap"):(g(V(vi)&&V(fi),"texture must be a square power of 2 to support mipmapping"),g(nr.mipmask===(vi<<1)-1,"missing or incomplete mipmap data")),nr.type===ue&&(Xr.extensions.indexOf("oes_texture_float_linear")<0&&g(kt.minFilter===ie&&kt.magFilter===ie,"filter not supported, must enable oes_texture_float_linear"),g(!kt.genMipmaps,"mipmap generation not supported with float textures"));var Li=nr.images;for(Gn=0;Gn<16;++Gn)if(Li[Gn]){var Bi=vi>>Gn,Hi=fi>>Gn;g(nr.mipmask&1<<Gn,"missing mipmap data");var zi=Li[Gn];if(g(zi.width===Bi&&zi.height===Hi,"invalid shape for mip images"),g(zi.format===nr.format&&zi.internalformat===nr.internalformat&&zi.type===nr.type,"incompatible type for mip image"),!zi.compressed)if(zi.data){var Gi=Math.ceil(ae(zi.type,Ln)*Bi/zi.unpackAlignment)*zi.unpackAlignment;g(zi.data.byteLength===Gi*Hi,"invalid data for image, buffer size is inconsistent with image format")}else zi.element||zi.copy}else kt.genMipmaps||g((nr.mipmask&1<<Gn)==0,"extra mipmap data");nr.compressed&&g(!kt.genMipmaps,"mipmap generation for compressed images not supported")}function te(kt,nr,Xr,Gn){var vi=kt.width,fi=kt.height,Ln=kt.channels;g(vi>0&&vi<=Gn.maxTextureSize&&fi>0&&fi<=Gn.maxTextureSize,"invalid texture shape"),g(vi===fi,"cube map must be square"),g(nr.wrapS===K&&nr.wrapT===K,"wrap mode not supported by cube map");for(var Li=0;Li<Xr.length;++Li){var Bi=Xr[Li];g(Bi.width===vi&&Bi.height===fi,"inconsistent cube map face shape"),nr.genMipmaps&&(g(!Bi.compressed,"can not generate mipmap for compressed textures"),g(Bi.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Hi=Bi.images,zi=0;zi<16;++zi){var Gi=Hi[zi];if(Gi){var aa=vi>>zi,Yi=fi>>zi;g(Bi.mipmask&1<<zi,"missing mipmap data"),g(Gi.width===aa&&Gi.height===Yi,"invalid shape for mip images"),g(Gi.format===kt.format&&Gi.internalformat===kt.internalformat&&Gi.type===kt.type,"incompatible type for mip image"),Gi.compressed||(Gi.data?g(Gi.data.byteLength===aa*Yi*Math.max(ae(Gi.type,Ln),Gi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Gi.element||Gi.copy)}}}}var q=B(g,{optional:Q,raise:e,commandRaise:N,command:W,parameter:p,commandParameter:H,constructor:f,type:i,commandType:J,isTypedArray:c,nni:r,oneOf:n,shaderError:w,linkError:S,callSite:M,saveCommandRef:I,saveDrawInfo:j,framebufferFormat:ne,guessCommand:x,texture2D:re,textureCube:te}),ve=0,Me=0;function De(kt,nr){this.id=ve++,this.type=kt,this.data=nr}function ze(kt){return kt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function We(kt){if(kt.length===0)return[];var nr=kt.charAt(0),Xr=kt.charAt(kt.length-1);if(kt.length>1&&nr===Xr&&(nr==='"'||nr==="'"))return['"'+ze(kt.substr(1,kt.length-2))+'"'];var Gn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(kt);if(Gn)return We(kt.substr(0,Gn.index)).concat(We(Gn[1])).concat(We(kt.substr(Gn.index+Gn[0].length)));var vi=kt.split(".");if(vi.length===1)return['"'+ze(kt)+'"'];for(var fi=[],Ln=0;Ln<vi.length;++Ln)fi=fi.concat(We(vi[Ln]));return fi}function He(kt){return"["+We(kt).join("][")+"]"}function $e(kt,nr){return new De(kt,He(nr+""))}function It(kt){return typeof kt=="function"&&!kt._reglType||kt instanceof De}function Yt(kt,nr){return typeof kt=="function"?new De(Me,kt):kt}var rr={DynamicVariable:De,define:$e,isDynamic:It,unbox:Yt,accessor:He},ir={next:typeof requestAnimationFrame=="function"?function(kt){return requestAnimationFrame(kt)}:function(kt){return setTimeout(kt,16)},cancel:typeof cancelAnimationFrame=="function"?function(kt){return cancelAnimationFrame(kt)}:clearTimeout},Br=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function tr(){var kt={"":0},nr=[""];return{id:function(Gn){var vi=kt[Gn];return vi||(vi=kt[Gn]=nr.length,nr.push(Gn),vi)},str:function(Gn){return nr[Gn]}}}function ft(kt,nr,Xr){var Gn=document.createElement("canvas");B(Gn.style,{border:0,margin:0,padding:0,top:0,left:0}),kt.appendChild(Gn),kt===document.body&&(Gn.style.position="absolute",B(kt.style,{margin:0,padding:0}));function vi(){var Li=window.innerWidth,Bi=window.innerHeight;if(kt!==document.body){var Hi=kt.getBoundingClientRect();Li=Hi.right-Hi.left,Bi=Hi.bottom-Hi.top}Gn.width=Xr*Li,Gn.height=Xr*Bi,B(Gn.style,{width:Li+"px",height:Bi+"px"})}var fi;kt!==document.body&&typeof ResizeObserver=="function"?(fi=new ResizeObserver(function(){setTimeout(vi)}),fi.observe(kt)):window.addEventListener("resize",vi,!1);function Ln(){fi?fi.disconnect():window.removeEventListener("resize",vi),kt.removeChild(Gn)}return vi(),{canvas:Gn,onDestroy:Ln}}function st(kt,nr){function Xr(Gn){try{return kt.getContext(Gn,nr)}catch(vi){return null}}return Xr("webgl")||Xr("experimental-webgl")||Xr("webgl-experimental")}function Tt(kt){return typeof kt.nodeName=="string"&&typeof kt.appendChild=="function"&&typeof kt.getBoundingClientRect=="function"}function Qe(kt){return typeof kt.drawArrays=="function"||typeof kt.drawElements=="function"}function it(kt){return typeof kt=="string"?kt.split():(q(Array.isArray(kt),"invalid extension array"),kt)}function zt(kt){return typeof kt=="string"?(q(typeof document!="undefined","not supported outside of DOM"),document.querySelector(kt)):kt}function Qt(kt){var nr=kt||{},Xr,Gn,vi,fi,Ln={},Li=[],Bi=[],Hi=typeof window=="undefined"?1:window.devicePixelRatio,zi=!1,Gi=function($n){$n&&q.raise($n)},aa=function(){};if(typeof nr=="string"?(q(typeof document!="undefined","selector queries only supported in DOM enviroments"),Xr=document.querySelector(nr),q(Xr,"invalid query string for element")):typeof nr=="object"?Tt(nr)?Xr=nr:Qe(nr)?(fi=nr,vi=fi.canvas):(q.constructor(nr),"gl"in nr?fi=nr.gl:"canvas"in nr?vi=zt(nr.canvas):"container"in nr&&(Gn=zt(nr.container)),"attributes"in nr&&(Ln=nr.attributes,q.type(Ln,"object","invalid context attributes")),"extensions"in nr&&(Li=it(nr.extensions)),"optionalExtensions"in nr&&(Bi=it(nr.optionalExtensions)),"onDone"in nr&&(q.type(nr.onDone,"function","invalid or missing onDone callback"),Gi=nr.onDone),"profile"in nr&&(zi=!!nr.profile),"pixelRatio"in nr&&(Hi=+nr.pixelRatio,q(Hi>0,"invalid pixel ratio"))):q.raise("invalid arguments to regl"),Xr&&(Xr.nodeName.toLowerCase()==="canvas"?vi=Xr:Gn=Xr),!fi){if(!vi){q(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Yi=ft(Gn||document.body,Gi,Hi);if(!Yi)return null;vi=Yi.canvas,aa=Yi.onDestroy}Ln.premultipliedAlpha===void 0&&(Ln.premultipliedAlpha=!0),fi=st(vi,Ln)}return fi?{gl:fi,canvas:vi,container:Gn,extensions:Li,optionalExtensions:Bi,pixelRatio:Hi,profile:zi,onDone:Gi,onDestroy:aa}:(aa(),Gi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ar(kt,nr){var Xr={};function Gn(Ln){q.type(Ln,"string","extension name must be string");var Li=Ln.toLowerCase(),Bi;try{Bi=Xr[Li]=kt.getExtension(Li)}catch(Hi){}return!!Bi}for(var vi=0;vi<nr.extensions.length;++vi){var fi=nr.extensions[vi];if(!Gn(fi))return nr.onDestroy(),nr.onDone('"'+fi+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return nr.optionalExtensions.forEach(Gn),{extensions:Xr,restore:function(){Object.keys(Xr).forEach(function(Li){if(Xr[Li]&&!Gn(Li))throw new Error("(regl): error restoring extension "+Li)})}}}function zr(kt,nr){for(var Xr=Array(kt),Gn=0;Gn<kt;++Gn)Xr[Gn]=nr(Gn);return Xr}var ct=5120,ot=5121,xt=5122,Bt=5123,Ke=5124,lt=5125,mt=5126;function qe(kt){for(var nr=16;nr<=1<<28;nr*=16)if(kt<=nr)return nr;return 0}function yt(kt){var nr,Xr;return nr=(kt>65535)<<4,kt>>>=nr,Xr=(kt>255)<<3,kt>>>=Xr,nr|=Xr,Xr=(kt>15)<<2,kt>>>=Xr,nr|=Xr,Xr=(kt>3)<<1,kt>>>=Xr,nr|=Xr,nr|kt>>1}function qt(){var kt=zr(8,function(){return[]});function nr(fi){var Ln=qe(fi),Li=kt[yt(Ln)>>2];return Li.length>0?Li.pop():new ArrayBuffer(Ln)}function Xr(fi){kt[yt(fi.byteLength)>>2].push(fi)}function Gn(fi,Ln){var Li=null;switch(fi){case ct:Li=new Int8Array(nr(Ln),0,Ln);break;case ot:Li=new Uint8Array(nr(Ln),0,Ln);break;case xt:Li=new Int16Array(nr(2*Ln),0,Ln);break;case Bt:Li=new Uint16Array(nr(2*Ln),0,Ln);break;case Ke:Li=new Int32Array(nr(4*Ln),0,Ln);break;case lt:Li=new Uint32Array(nr(4*Ln),0,Ln);break;case mt:Li=new Float32Array(nr(4*Ln),0,Ln);break;default:return null}return Li.length!==Ln?Li.subarray(0,Ln):Li}function vi(fi){Xr(fi.buffer)}return{alloc:nr,free:Xr,allocType:Gn,freeType:vi}}var Er=qt();Er.zero=qt();var Zr=3408,Dr=3410,Cr=3411,mn=3412,xn=3413,lr=3414,An=3415,On=33901,Mt=33902,er=3379,$t=3386,Tr=34921,Mr=36347,Hr=36348,wr=35661,Ur=35660,fn=34930,tn=36349,Rr=34076,Nn=34024,En=7936,Yn=7937,wi=7938,$a=35724,so=34047,Po=36063,Ro=34852,So=3553,Va=34067,ws=34069,ps=33984,Ao=6408,zs=5126,Qa=5121,fs=36160,Vs=36053,Ju=36064,ts=16384,Zs=function(nr,Xr){var Gn=1;Xr.ext_texture_filter_anisotropic&&(Gn=nr.getParameter(so));var vi=1,fi=1;Xr.webgl_draw_buffers&&(vi=nr.getParameter(Ro),fi=nr.getParameter(Po));var Ln=!!Xr.oes_texture_float;if(Ln){var Li=nr.createTexture();nr.bindTexture(So,Li),nr.texImage2D(So,0,Ao,1,1,0,Ao,zs,null);var Bi=nr.createFramebuffer();if(nr.bindFramebuffer(fs,Bi),nr.framebufferTexture2D(fs,Ju,So,Li,0),nr.bindTexture(So,null),nr.checkFramebufferStatus(fs)!==Vs)Ln=!1;else{nr.viewport(0,0,1,1),nr.clearColor(1,0,0,1),nr.clear(ts);var Hi=Er.allocType(zs,4);nr.readPixels(0,0,1,1,Ao,zs,Hi),nr.getError()?Ln=!1:(nr.deleteFramebuffer(Bi),nr.deleteTexture(Li),Ln=Hi[0]===1),Er.freeType(Hi)}}var zi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Gi=!0;if(!zi){var aa=nr.createTexture(),Yi=Er.allocType(Qa,36);nr.activeTexture(ps),nr.bindTexture(Va,aa),nr.texImage2D(ws,0,Ao,3,3,0,Ao,Qa,Yi),Er.freeType(Yi),nr.bindTexture(Va,null),nr.deleteTexture(aa),Gi=!nr.getError()}return{colorBits:[nr.getParameter(Dr),nr.getParameter(Cr),nr.getParameter(mn),nr.getParameter(xn)],depthBits:nr.getParameter(lr),stencilBits:nr.getParameter(An),subpixelBits:nr.getParameter(Zr),extensions:Object.keys(Xr).filter(function(Fi){return!!Xr[Fi]}),maxAnisotropic:Gn,maxDrawbuffers:vi,maxColorAttachments:fi,pointSizeDims:nr.getParameter(On),lineWidthDims:nr.getParameter(Mt),maxViewportDims:nr.getParameter($t),maxCombinedTextureUnits:nr.getParameter(wr),maxCubeMapSize:nr.getParameter(Rr),maxRenderbufferSize:nr.getParameter(Nn),maxTextureUnits:nr.getParameter(fn),maxTextureSize:nr.getParameter(er),maxAttributes:nr.getParameter(Tr),maxVertexUniforms:nr.getParameter(Mr),maxVertexTextureUnits:nr.getParameter(Ur),maxVaryingVectors:nr.getParameter(Hr),maxFragmentUniforms:nr.getParameter(tn),glsl:nr.getParameter($a),renderer:nr.getParameter(Yn),vendor:nr.getParameter(En),version:nr.getParameter(wi),readFloat:Ln,npotTextureCube:Gi}};function ys(kt){return!!kt&&typeof kt=="object"&&Array.isArray(kt.shape)&&Array.isArray(kt.stride)&&typeof kt.offset=="number"&&kt.shape.length===kt.stride.length&&(Array.isArray(kt.data)||he(kt.data))}var Lt=function(nr){return Object.keys(nr).map(function(Xr){return nr[Xr]})},at={shape:un,flatten:hn};function Ye(kt,nr,Xr){for(var Gn=0;Gn<nr;++Gn)Xr[Gn]=kt[Gn]}function St(kt,nr,Xr,Gn){for(var vi=0,fi=0;fi<nr;++fi)for(var Ln=kt[fi],Li=0;Li<Xr;++Li)Gn[vi++]=Ln[Li]}function fr(kt,nr,Xr,Gn,vi,fi){for(var Ln=fi,Li=0;Li<nr;++Li)for(var Bi=kt[Li],Hi=0;Hi<Xr;++Hi)for(var zi=Bi[Hi],Gi=0;Gi<Gn;++Gi)vi[Ln++]=zi[Gi]}function Gr(kt,nr,Xr,Gn,vi){for(var fi=1,Ln=Xr+1;Ln<nr.length;++Ln)fi*=nr[Ln];var Li=nr[Xr];if(nr.length-Xr==4){var Bi=nr[Xr+1],Hi=nr[Xr+2],zi=nr[Xr+3];for(Ln=0;Ln<Li;++Ln)fr(kt[Ln],Bi,Hi,zi,Gn,vi),vi+=fi}else for(Ln=0;Ln<Li;++Ln)Gr(kt[Ln],nr,Xr+1,Gn,vi),vi+=fi}function hn(kt,nr,Xr,Gn){var vi=1;if(nr.length)for(var fi=0;fi<nr.length;++fi)vi*=nr[fi];else vi=0;var Ln=Gn||Er.allocType(Xr,vi);switch(nr.length){case 0:break;case 1:Ye(kt,nr[0],Ln);break;case 2:St(kt,nr[0],nr[1],Ln);break;case 3:fr(kt,nr[0],nr[1],nr[2],Ln,0);break;default:Gr(kt,nr,0,Ln,0)}return Ln}function un(kt){for(var nr=[],Xr=kt;Xr.length;Xr=Xr[0])nr.push(Xr.length);return nr}var Qn={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ai=5120,bi=5122,na=5124,Oa=5121,fo=5123,uo=5125,Uo=5126,lo=5126,go={int8:Ai,int16:bi,int32:na,uint8:Oa,uint16:fo,uint32:uo,float:Uo,float32:lo},Ho=35048,Qo=35040,Go={dynamic:Ho,stream:Qo,static:35044},_s=at.flatten,bs=at.shape,Ks=35044,Yo=35040,mo=5121,Rs=5126,rs=[];rs[5120]=1,rs[5122]=2,rs[5124]=4,rs[5121]=1,rs[5123]=2,rs[5125]=4,rs[5126]=4;function Za(kt){return Qn[Object.prototype.toString.call(kt)]|0}function qa(kt,nr){for(var Xr=0;Xr<nr.length;++Xr)kt[Xr]=nr[Xr]}function Fs(kt,nr,Xr,Gn,vi,fi,Ln){for(var Li=0,Bi=0;Bi<Xr;++Bi)for(var Hi=0;Hi<Gn;++Hi)kt[Li++]=nr[vi*Bi+fi*Hi+Ln]}function Ou(kt,nr,Xr,Gn){var vi=0,fi={};function Ln($n){this.id=vi++,this.buffer=kt.createBuffer(),this.type=$n,this.usage=Ks,this.byteLength=0,this.dimension=1,this.dtype=mo,this.persistentData=null,Xr.profile&&(this.stats={size:0})}Ln.prototype.bind=function(){kt.bindBuffer(this.type,this.buffer)},Ln.prototype.destroy=function(){aa(this)};var Li=[];function Bi($n,Xn){var Ui=Li.pop();return Ui||(Ui=new Ln($n)),Ui.bind(),Gi(Ui,Xn,Yo,0,1,!1),Ui}function Hi($n){Li.push($n)}function zi($n,Xn,Ui){$n.byteLength=Xn.byteLength,kt.bufferData($n.type,Xn,Ui)}function Gi($n,Xn,Ui,oa,pi,wa){var Di;if($n.usage=Ui,Array.isArray(Xn)){if($n.dtype=oa||Rs,Xn.length>0){var $i;if(Array.isArray(Xn[0])){Di=bs(Xn);for(var Si=1,Qi=1;Qi<Di.length;++Qi)Si*=Di[Qi];$n.dimension=Si,$i=_s(Xn,Di,$n.dtype),zi($n,$i,Ui),wa?$n.persistentData=$i:Er.freeType($i)}else if(typeof Xn[0]=="number"){$n.dimension=pi;var Ra=Er.allocType($n.dtype,Xn.length);qa(Ra,Xn),zi($n,Ra,Ui),wa?$n.persistentData=Ra:Er.freeType(Ra)}else he(Xn[0])?($n.dimension=Xn[0].length,$n.dtype=oa||Za(Xn[0])||Rs,$i=_s(Xn,[Xn.length,Xn[0].length],$n.dtype),zi($n,$i,Ui),wa?$n.persistentData=$i:Er.freeType($i)):q.raise("invalid buffer data")}}else if(he(Xn))$n.dtype=oa||Za(Xn),$n.dimension=pi,zi($n,Xn,Ui),wa&&($n.persistentData=new Uint8Array(new Uint8Array(Xn.buffer)));else if(ys(Xn)){Di=Xn.shape;var co=Xn.stride,ra=Xn.offset,ki=0,_i=0,Ua=0,Vo=0;Di.length===1?(ki=Di[0],_i=1,Ua=co[0],Vo=0):Di.length===2?(ki=Di[0],_i=Di[1],Ua=co[0],Vo=co[1]):q.raise("invalid shape"),$n.dtype=oa||Za(Xn.data)||Rs,$n.dimension=_i;var sa=Er.allocType($n.dtype,ki*_i);Fs(sa,Xn.data,ki,_i,Ua,Vo,ra),zi($n,sa,Ui),wa?$n.persistentData=sa:Er.freeType(sa)}else Xn instanceof ArrayBuffer?($n.dtype=mo,$n.dimension=pi,zi($n,Xn,Ui),wa&&($n.persistentData=new Uint8Array(new Uint8Array(Xn)))):q.raise("invalid buffer data")}function aa($n){nr.bufferCount--,Gn($n);var Xn=$n.buffer;q(Xn,"buffer must not be deleted already"),kt.deleteBuffer(Xn),$n.buffer=null,delete fi[$n.id]}function Yi($n,Xn,Ui,oa){nr.bufferCount++;var pi=new Ln(Xn);fi[pi.id]=pi;function wa(Si){var Qi=Ks,Ra=null,co=0,ra=0,ki=1;return Array.isArray(Si)||he(Si)||ys(Si)||Si instanceof ArrayBuffer?Ra=Si:typeof Si=="number"?co=Si|0:Si&&(q.type(Si,"object","buffer arguments must be an object, a number or an array"),"data"in Si&&(q(Ra===null||Array.isArray(Ra)||he(Ra)||ys(Ra),"invalid data for buffer"),Ra=Si.data),"usage"in Si&&(q.parameter(Si.usage,Go,"invalid buffer usage"),Qi=Go[Si.usage]),"type"in Si&&(q.parameter(Si.type,go,"invalid buffer type"),ra=go[Si.type]),"dimension"in Si&&(q.type(Si.dimension,"number","invalid dimension"),ki=Si.dimension|0),"length"in Si&&(q.nni(co,"buffer length must be a nonnegative integer"),co=Si.length|0)),pi.bind(),Ra?Gi(pi,Ra,Qi,ra,ki,oa):(co&&kt.bufferData(pi.type,co,Qi),pi.dtype=ra||mo,pi.usage=Qi,pi.dimension=ki,pi.byteLength=co),Xr.profile&&(pi.stats.size=pi.byteLength*rs[pi.dtype]),wa}function Di(Si,Qi){q(Qi+Si.byteLength<=pi.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Si.byteLength+" starting from offset "+Qi+" to a buffer of size "+pi.byteLength),kt.bufferSubData(pi.type,Qi,Si)}function $i(Si,Qi){var Ra=(Qi||0)|0,co;if(pi.bind(),he(Si)||Si instanceof ArrayBuffer)Di(Si,Ra);else if(Array.isArray(Si)){if(Si.length>0)if(typeof Si[0]=="number"){var ra=Er.allocType(pi.dtype,Si.length);qa(ra,Si),Di(ra,Ra),Er.freeType(ra)}else if(Array.isArray(Si[0])||he(Si[0])){co=bs(Si);var ki=_s(Si,co,pi.dtype);Di(ki,Ra),Er.freeType(ki)}else q.raise("invalid buffer data")}else if(ys(Si)){co=Si.shape;var _i=Si.stride,Ua=0,Vo=0,sa=0,Fo=0;co.length===1?(Ua=co[0],Vo=1,sa=_i[0],Fo=0):co.length===2?(Ua=co[0],Vo=co[1],sa=_i[0],Fo=_i[1]):q.raise("invalid shape");var Eo=Array.isArray(Si.data)?pi.dtype:Za(Si.data),oo=Er.allocType(Eo,Ua*Vo);Fs(oo,Si.data,Ua,Vo,sa,Fo,Si.offset),Di(oo,Ra),Er.freeType(oo)}else q.raise("invalid data for buffer subdata");return wa}return Ui||wa($n),wa._reglType="buffer",wa._buffer=pi,wa.subdata=$i,Xr.profile&&(wa.stats=pi.stats),wa.destroy=function(){aa(pi)},wa}function Fi(){Lt(fi).forEach(function($n){$n.buffer=kt.createBuffer(),kt.bindBuffer($n.type,$n.buffer),kt.bufferData($n.type,$n.persistentData||$n.byteLength,$n.usage)})}return Xr.profile&&(nr.getTotalBufferSize=function(){var $n=0;return Object.keys(fi).forEach(function(Xn){$n+=fi[Xn].stats.size}),$n}),{create:Yi,createStream:Bi,destroyStream:Hi,clear:function(){Lt(fi).forEach(aa),Li.forEach(aa)},getBuffer:function(Xn){return Xn&&Xn._buffer instanceof Ln?Xn._buffer:null},restore:Fi,_initBuffer:Gi}}var Ws=0,nl=0,Bu=1,su=1,zu=4,uu=4,hu={points:Ws,point:nl,lines:Bu,line:su,triangles:zu,triangle:uu,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Qu=0,qo=1,du=4,ns=5120,ru=5121,_u=5122,Hs=5123,Ns=5124,Js=5125,Fu=34963,vu=35040,Vu=35044;function Nu(kt,nr,Xr,Gn){var vi={},fi=0,Ln={uint8:ru,uint16:Hs};nr.oes_element_index_uint&&(Ln.uint32=Js);function Li(Fi){this.id=fi++,vi[this.id]=this,this.buffer=Fi,this.primType=du,this.vertCount=0,this.type=0}Li.prototype.bind=function(){this.buffer.bind()};var Bi=[];function Hi(Fi){var $n=Bi.pop();return $n||($n=new Li(Xr.create(null,Fu,!0,!1)._buffer)),Gi($n,Fi,vu,-1,-1,0,0),$n}function zi(Fi){Bi.push(Fi)}function Gi(Fi,$n,Xn,Ui,oa,pi,wa){Fi.buffer.bind();var Di;if($n){var $i=wa;!wa&&(!he($n)||ys($n)&&!he($n.data))&&($i=nr.oes_element_index_uint?Js:Hs),Xr._initBuffer(Fi.buffer,$n,Xn,$i,3)}else kt.bufferData(Fu,pi,Xn),Fi.buffer.dtype=Di||ru,Fi.buffer.usage=Xn,Fi.buffer.dimension=3,Fi.buffer.byteLength=pi;if(Di=wa,!wa){switch(Fi.buffer.dtype){case ru:case ns:Di=ru;break;case Hs:case _u:Di=Hs;break;case Js:case Ns:Di=Js;break;default:q.raise("unsupported type for element array")}Fi.buffer.dtype=Di}Fi.type=Di,q(Di!==Js||!!nr.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Si=oa;Si<0&&(Si=Fi.buffer.byteLength,Di===Hs?Si>>=1:Di===Js&&(Si>>=2)),Fi.vertCount=Si;var Qi=Ui;if(Ui<0){Qi=du;var Ra=Fi.buffer.dimension;Ra===1&&(Qi=Qu),Ra===2&&(Qi=qo),Ra===3&&(Qi=du)}Fi.primType=Qi}function aa(Fi){Gn.elementsCount--,q(Fi.buffer!==null,"must not double destroy elements"),delete vi[Fi.id],Fi.buffer.destroy(),Fi.buffer=null}function Yi(Fi,$n){var Xn=Xr.create(null,Fu,!0),Ui=new Li(Xn._buffer);Gn.elementsCount++;function oa(pi){if(!pi)Xn(),Ui.primType=du,Ui.vertCount=0,Ui.type=ru;else if(typeof pi=="number")Xn(pi),Ui.primType=du,Ui.vertCount=pi|0,Ui.type=ru;else{var wa=null,Di=Vu,$i=-1,Si=-1,Qi=0,Ra=0;Array.isArray(pi)||he(pi)||ys(pi)?wa=pi:(q.type(pi,"object","invalid arguments for elements"),"data"in pi&&(wa=pi.data,q(Array.isArray(wa)||he(wa)||ys(wa),"invalid data for element buffer")),"usage"in pi&&(q.parameter(pi.usage,Go,"invalid element buffer usage"),Di=Go[pi.usage]),"primitive"in pi&&(q.parameter(pi.primitive,hu,"invalid element buffer primitive"),$i=hu[pi.primitive]),"count"in pi&&(q(typeof pi.count=="number"&&pi.count>=0,"invalid vertex count for elements"),Si=pi.count|0),"type"in pi&&(q.parameter(pi.type,Ln,"invalid buffer type"),Ra=Ln[pi.type]),"length"in pi?Qi=pi.length|0:(Qi=Si,Ra===Hs||Ra===_u?Qi*=2:(Ra===Js||Ra===Ns)&&(Qi*=4))),Gi(Ui,wa,Di,$i,Si,Qi,Ra)}return oa}return oa(Fi),oa._reglType="elements",oa._elements=Ui,oa.subdata=function(pi,wa){return Xn.subdata(pi,wa),oa},oa.destroy=function(){aa(Ui)},oa}return{create:Yi,createStream:Hi,destroyStream:zi,getElements:function($n){return typeof $n=="function"&&$n._elements instanceof Li?$n._elements:null},clear:function(){Lt(vi).forEach(aa)}}}var To=new Float32Array(1),Wu=new Uint32Array(To.buffer),Hu=5123;function Ru(kt){for(var nr=Er.allocType(Hu,kt.length),Xr=0;Xr<kt.length;++Xr)if(isNaN(kt[Xr]))nr[Xr]=65535;else if(kt[Xr]===Infinity)nr[Xr]=31744;else if(kt[Xr]===-Infinity)nr[Xr]=64512;else{To[0]=kt[Xr];var Gn=Wu[0],vi=Gn>>>31<<15,fi=(Gn<<1>>>24)-127,Ln=Gn>>13&(1<<10)-1;if(fi<-24)nr[Xr]=vi;else if(fi<-14){var Li=-14-fi;nr[Xr]=vi+(Ln+(1<<10)>>Li)}else fi>15?nr[Xr]=vi+31744:nr[Xr]=vi+(fi+15<<10)+Ln}return nr}function $o(kt){return Array.isArray(kt)||he(kt)}var dl=function(nr){return!(nr&nr-1)&&!!nr},Gu=34467,os=3553,Us=34067,hs=34069,xs=6408,il=6406,Tu=6407,Is=6409,lu=6410,bu=32854,nu=32855,Be=36194,Fr=32819,jt=32820,Vt=33635,gt=34042,ar=6402,gr=34041,en=35904,Vr=35906,on=36193,Dn=33776,di=33777,xi=33778,ji=33779,ia=35986,ca=35987,ea=34798,ma=35840,Ia=35841,Fa=35842,Io=35843,ho=36196,Ba=5121,Mo=5123,_o=5125,Da=5126,ss=10242,ko=10243,bo=10497,Zo=33071,As=33648,us=10240,Mu=10241,Qs=9728,Ls=9729,Es=9984,al=9985,cu=9986,zo=9987,qu=33170,ol=4352,xu=4353,xo=4354,Ko=34046,Iu=3317,Hl=37440,xl=37441,yl=37443,Tc=37444,El=33984,_l=[Es,cu,al,zo],sl=[0,Is,lu,Tu,xs],ls={};ls[Is]=ls[il]=ls[ar]=1,ls[gr]=ls[lu]=2,ls[Tu]=ls[en]=3,ls[xs]=ls[Vr]=4;function gs(kt){return"[object "+kt+"]"}var ht=gs("HTMLCanvasElement"),Ut=gs("OffscreenCanvas"),Ht=gs("CanvasRenderingContext2D"),Kt=gs("ImageBitmap"),pr=gs("HTMLImageElement"),ln=gs("HTMLVideoElement"),Rn=Object.keys(Qn).concat([ht,Ut,Ht,Kt,pr,ln]),Fn=[];Fn[Ba]=1,Fn[Da]=4,Fn[on]=2,Fn[Mo]=2,Fn[_o]=4;var li=[];li[bu]=2,li[nu]=2,li[Be]=2,li[gr]=4,li[Dn]=.5,li[di]=.5,li[xi]=1,li[ji]=1,li[ia]=.5,li[ca]=1,li[ea]=1,li[ma]=.5,li[Ia]=.25,li[Fa]=.5,li[Io]=.25,li[ho]=.5;function qi(kt){return Array.isArray(kt)&&(kt.length===0||typeof kt[0]=="number")}function Wn(kt){if(!Array.isArray(kt))return!1;var nr=kt.length;return!(nr===0||!$o(kt[0]))}function ga(kt){return Object.prototype.toString.call(kt)}function ao(kt){return ga(kt)===ht}function is(kt){return ga(kt)===Ut}function vo(kt){return ga(kt)===Ht}function Et(kt){return ga(kt)===Kt}function bt(kt){return ga(kt)===pr}function mr(kt){return ga(kt)===ln}function or(kt){if(!kt)return!1;var nr=ga(kt);return Rn.indexOf(nr)>=0?!0:qi(kt)||Wn(kt)||ys(kt)}function Ir(kt){return Qn[Object.prototype.toString.call(kt)]|0}function yn(kt,nr){var Xr=nr.length;switch(kt.type){case Ba:case Mo:case _o:case Da:var Gn=Er.allocType(kt.type,Xr);Gn.set(nr),kt.data=Gn;break;case on:kt.data=Ru(nr);break;default:q.raise("unsupported texture type, must specify a typed array")}}function jn(kt,nr){return Er.allocType(kt.type===on?Da:kt.type,nr)}function qn(kt,nr){kt.type===on?(kt.data=Ru(nr),Er.freeType(nr)):kt.data=nr}function ui(kt,nr,Xr,Gn,vi,fi){for(var Ln=kt.width,Li=kt.height,Bi=kt.channels,Hi=Ln*Li*Bi,zi=jn(kt,Hi),Gi=0,aa=0;aa<Li;++aa)for(var Yi=0;Yi<Ln;++Yi)for(var Fi=0;Fi<Bi;++Fi)zi[Gi++]=nr[Xr*Yi+Gn*aa+vi*Fi+fi];qn(kt,zi)}function kn(kt,nr,Xr,Gn,vi,fi){var Ln;if(typeof li[kt]!="undefined"?Ln=li[kt]:Ln=ls[kt]*Fn[nr],fi&&(Ln*=6),vi){for(var Li=0,Bi=Xr;Bi>=1;)Li+=Ln*Bi*Bi,Bi/=2;return Li}else return Ln*Xr*Gn}function oi(kt,nr,Xr,Gn,vi,fi,Ln){var Li={"don't care":ol,"dont care":ol,nice:xo,fast:xu},Bi={repeat:bo,clamp:Zo,mirror:As},Hi={nearest:Qs,linear:Ls},zi=B({mipmap:zo,"nearest mipmap nearest":Es,"linear mipmap nearest":al,"nearest mipmap linear":cu,"linear mipmap linear":zo},Hi),Gi={none:0,browser:Tc},aa={uint8:Ba,rgba4:Fr,rgb565:Vt,"rgb5 a1":jt},Yi={alpha:il,luminance:Is,"luminance alpha":lu,rgb:Tu,rgba:xs,rgba4:bu,"rgb5 a1":nu,rgb565:Be},Fi={};nr.ext_srgb&&(Yi.srgb=en,Yi.srgba=Vr),nr.oes_texture_float&&(aa.float32=aa.float=Da),nr.oes_texture_half_float&&(aa.float16=aa["half float"]=on),nr.webgl_depth_texture&&(B(Yi,{depth:ar,"depth stencil":gr}),B(aa,{uint16:Mo,uint32:_o,"depth stencil":gt})),nr.webgl_compressed_texture_s3tc&&B(Fi,{"rgb s3tc dxt1":Dn,"rgba s3tc dxt1":di,"rgba s3tc dxt3":xi,"rgba s3tc dxt5":ji}),nr.webgl_compressed_texture_atc&&B(Fi,{"rgb atc":ia,"rgba atc explicit alpha":ca,"rgba atc interpolated alpha":ea}),nr.webgl_compressed_texture_pvrtc&&B(Fi,{"rgb pvrtc 4bppv1":ma,"rgb pvrtc 2bppv1":Ia,"rgba pvrtc 4bppv1":Fa,"rgba pvrtc 2bppv1":Io}),nr.webgl_compressed_texture_etc1&&(Fi["rgb etc1"]=ho);var $n=Array.prototype.slice.call(kt.getParameter(Gu));Object.keys(Fi).forEach(function(kr){var ii=Fi[kr];$n.indexOf(ii)>=0&&(Yi[kr]=ii)});var Xn=Object.keys(Yi);Xr.textureFormats=Xn;var Ui=[];Object.keys(Yi).forEach(function(kr){var ii=Yi[kr];Ui[ii]=kr});var oa=[];Object.keys(aa).forEach(function(kr){var ii=aa[kr];oa[ii]=kr});var pi=[];Object.keys(Hi).forEach(function(kr){var ii=Hi[kr];pi[ii]=kr});var wa=[];Object.keys(zi).forEach(function(kr){var ii=zi[kr];wa[ii]=kr});var Di=[];Object.keys(Bi).forEach(function(kr){var ii=Bi[kr];Di[ii]=kr});var $i=Xn.reduce(function(kr,ii){var Hn=Yi[ii];return Hn===Is||Hn===il||Hn===Is||Hn===lu||Hn===ar||Hn===gr||nr.ext_srgb&&(Hn===en||Hn===Vr)?kr[Hn]=Hn:Hn===nu||ii.indexOf("rgba")>=0?kr[Hn]=xs:kr[Hn]=Tu,kr},{});function Si(){this.internalformat=xs,this.format=xs,this.type=Ba,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Tc,this.width=0,this.height=0,this.channels=0}function Qi(kr,ii){kr.internalformat=ii.internalformat,kr.format=ii.format,kr.type=ii.type,kr.compressed=ii.compressed,kr.premultiplyAlpha=ii.premultiplyAlpha,kr.flipY=ii.flipY,kr.unpackAlignment=ii.unpackAlignment,kr.colorSpace=ii.colorSpace,kr.width=ii.width,kr.height=ii.height,kr.channels=ii.channels}function Ra(kr,ii){if(!(typeof ii!="object"||!ii)){if("premultiplyAlpha"in ii&&(q.type(ii.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),kr.premultiplyAlpha=ii.premultiplyAlpha),"flipY"in ii&&(q.type(ii.flipY,"boolean","invalid texture flip"),kr.flipY=ii.flipY),"alignment"in ii&&(q.oneOf(ii.alignment,[1,2,4,8],"invalid texture unpack alignment"),kr.unpackAlignment=ii.alignment),"colorSpace"in ii&&(q.parameter(ii.colorSpace,Gi,"invalid colorSpace"),kr.colorSpace=Gi[ii.colorSpace]),"type"in ii){var Hn=ii.type;q(nr.oes_texture_float||!(Hn==="float"||Hn==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),q(nr.oes_texture_half_float||!(Hn==="half float"||Hn==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),q(nr.webgl_depth_texture||!(Hn==="uint16"||Hn==="uint32"||Hn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),q.parameter(Hn,aa,"invalid texture type"),kr.type=aa[Hn]}var fa=kr.width,Do=kr.height,au=kr.channels,sr=!1;"shape"in ii?(q(Array.isArray(ii.shape)&&ii.shape.length>=2,"shape must be an array"),fa=ii.shape[0],Do=ii.shape[1],ii.shape.length===3&&(au=ii.shape[2],q(au>0&&au<=4,"invalid number of channels"),sr=!0),q(fa>=0&&fa<=Xr.maxTextureSize,"invalid width"),q(Do>=0&&Do<=Xr.maxTextureSize,"invalid height")):("radius"in ii&&(fa=Do=ii.radius,q(fa>=0&&fa<=Xr.maxTextureSize,"invalid radius")),"width"in ii&&(fa=ii.width,q(fa>=0&&fa<=Xr.maxTextureSize,"invalid width")),"height"in ii&&(Do=ii.height,q(Do>=0&&Do<=Xr.maxTextureSize,"invalid height")),"channels"in ii&&(au=ii.channels,q(au>0&&au<=4,"invalid number of channels"),sr=!0)),kr.width=fa|0,kr.height=Do|0,kr.channels=au|0;var Pr=!1;if("format"in ii){var $r=ii.format;q(nr.webgl_depth_texture||!($r==="depth"||$r==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),q.parameter($r,Yi,"invalid texture format");var Zn=kr.internalformat=Yi[$r];kr.format=$i[Zn],$r in aa&&("type"in ii||(kr.type=aa[$r])),$r in Fi&&(kr.compressed=!0),Pr=!0}!sr&&Pr?kr.channels=ls[kr.format]:sr&&!Pr?kr.channels!==sl[kr.format]&&(kr.format=kr.internalformat=sl[kr.channels]):Pr&&sr&&q(kr.channels===ls[kr.format],"number of channels inconsistent with specified format")}}function co(kr){kt.pixelStorei(Hl,kr.flipY),kt.pixelStorei(xl,kr.premultiplyAlpha),kt.pixelStorei(yl,kr.colorSpace),kt.pixelStorei(Iu,kr.unpackAlignment)}function ra(){Si.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ki(kr,ii){var Hn=null;if(or(ii)?Hn=ii:ii&&(q.type(ii,"object","invalid pixel data type"),Ra(kr,ii),"x"in ii&&(kr.xOffset=ii.x|0),"y"in ii&&(kr.yOffset=ii.y|0),or(ii.data)&&(Hn=ii.data)),q(!kr.compressed||Hn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ii.copy){q(!Hn,"can not specify copy and data field for the same texture");var fa=vi.viewportWidth,Do=vi.viewportHeight;kr.width=kr.width||fa-kr.xOffset,kr.height=kr.height||Do-kr.yOffset,kr.needsCopy=!0,q(kr.xOffset>=0&&kr.xOffset<fa&&kr.yOffset>=0&&kr.yOffset<Do&&kr.width>0&&kr.width<=fa&&kr.height>0&&kr.height<=Do,"copy texture read out of bounds")}else if(!Hn)kr.width=kr.width||1,kr.height=kr.height||1,kr.channels=kr.channels||4;else if(he(Hn))kr.channels=kr.channels||4,kr.data=Hn,!("type"in ii)&&kr.type===Ba&&(kr.type=Ir(Hn));else if(qi(Hn))kr.channels=kr.channels||4,yn(kr,Hn),kr.alignment=1,kr.needsFree=!0;else if(ys(Hn)){var au=Hn.data;!Array.isArray(au)&&kr.type===Ba&&(kr.type=Ir(au));var sr=Hn.shape,Pr=Hn.stride,$r,Zn,Vn,sn,gn,Sn;sr.length===3?(Vn=sr[2],Sn=Pr[2]):(q(sr.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Vn=1,Sn=1),$r=sr[0],Zn=sr[1],sn=Pr[0],gn=Pr[1],kr.alignment=1,kr.width=$r,kr.height=Zn,kr.channels=Vn,kr.format=kr.internalformat=sl[Vn],kr.needsFree=!0,ui(kr,au,sn,gn,Sn,Hn.offset)}else if(ao(Hn)||is(Hn)||vo(Hn))ao(Hn)||is(Hn)?kr.element=Hn:kr.element=Hn.canvas,kr.width=kr.element.width,kr.height=kr.element.height,kr.channels=4;else if(Et(Hn))kr.element=Hn,kr.width=Hn.width,kr.height=Hn.height,kr.channels=4;else if(bt(Hn))kr.element=Hn,kr.width=Hn.naturalWidth,kr.height=Hn.naturalHeight,kr.channels=4;else if(mr(Hn))kr.element=Hn,kr.width=Hn.videoWidth,kr.height=Hn.videoHeight,kr.channels=4;else if(Wn(Hn)){var Nr=kr.width||Hn[0].length,dn=kr.height||Hn.length,Or=kr.channels;$o(Hn[0][0])?Or=Or||Hn[0][0].length:Or=Or||1;for(var pn=at.shape(Hn),ai=1,ci=0;ci<pn.length;++ci)ai*=pn[ci];var Ri=jn(kr,ai);at.flatten(Hn,pn,"",Ri),qn(kr,Ri),kr.alignment=1,kr.width=Nr,kr.height=dn,kr.channels=Or,kr.format=kr.internalformat=sl[Or],kr.needsFree=!0}kr.type===Da?q(Xr.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):kr.type===on&&q(Xr.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function _i(kr,ii,Hn){var fa=kr.element,Do=kr.data,au=kr.internalformat,sr=kr.format,Pr=kr.type,$r=kr.width,Zn=kr.height;co(kr),fa?kt.texImage2D(ii,Hn,sr,sr,Pr,fa):kr.compressed?kt.compressedTexImage2D(ii,Hn,au,$r,Zn,0,Do):kr.needsCopy?(Gn(),kt.copyTexImage2D(ii,Hn,sr,kr.xOffset,kr.yOffset,$r,Zn,0)):kt.texImage2D(ii,Hn,sr,$r,Zn,0,sr,Pr,Do||null)}function Ua(kr,ii,Hn,fa,Do){var au=kr.element,sr=kr.data,Pr=kr.internalformat,$r=kr.format,Zn=kr.type,Vn=kr.width,sn=kr.height;co(kr),au?kt.texSubImage2D(ii,Do,Hn,fa,$r,Zn,au):kr.compressed?kt.compressedTexSubImage2D(ii,Do,Hn,fa,Pr,Vn,sn,sr):kr.needsCopy?(Gn(),kt.copyTexSubImage2D(ii,Do,Hn,fa,kr.xOffset,kr.yOffset,Vn,sn)):kt.texSubImage2D(ii,Do,Hn,fa,Vn,sn,$r,Zn,sr)}var Vo=[];function sa(){return Vo.pop()||new ra}function Fo(kr){kr.needsFree&&Er.freeType(kr.data),ra.call(kr),Vo.push(kr)}function Eo(){Si.call(this),this.genMipmaps=!1,this.mipmapHint=ol,this.mipmask=0,this.images=Array(16)}function oo(kr,ii,Hn){var fa=kr.images[0]=sa();kr.mipmask=1,fa.width=kr.width=ii,fa.height=kr.height=Hn,fa.channels=kr.channels=4}function js(kr,ii){var Hn=null;if(or(ii))Hn=kr.images[0]=sa(),Qi(Hn,kr),ki(Hn,ii),kr.mipmask=1;else if(Ra(kr,ii),Array.isArray(ii.mipmap))for(var fa=ii.mipmap,Do=0;Do<fa.length;++Do)Hn=kr.images[Do]=sa(),Qi(Hn,kr),Hn.width>>=Do,Hn.height>>=Do,ki(Hn,fa[Do]),kr.mipmask|=1<<Do;else Hn=kr.images[0]=sa(),Qi(Hn,kr),ki(Hn,ii),kr.mipmask=1;Qi(kr,kr.images[0]),kr.compressed&&(kr.internalformat===Dn||kr.internalformat===di||kr.internalformat===xi||kr.internalformat===ji)&&q(kr.width%4==0&&kr.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Ol(kr,ii){for(var Hn=kr.images,fa=0;fa<Hn.length;++fa){if(!Hn[fa])return;_i(Hn[fa],ii,fa)}}var Yl=[];function Jo(){var kr=Yl.pop()||new Eo;Si.call(kr),kr.mipmask=0;for(var ii=0;ii<16;++ii)kr.images[ii]=null;return kr}function Tl(kr){for(var ii=kr.images,Hn=0;Hn<ii.length;++Hn)ii[Hn]&&Fo(ii[Hn]),ii[Hn]=null;Yl.push(kr)}function Lu(){this.minFilter=Qs,this.magFilter=Qs,this.wrapS=Zo,this.wrapT=Zo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ol}function Ml(kr,ii){if("min"in ii){var Hn=ii.min;q.parameter(Hn,zi),kr.minFilter=zi[Hn],_l.indexOf(kr.minFilter)>=0&&!("faces"in ii)&&(kr.genMipmaps=!0)}if("mag"in ii){var fa=ii.mag;q.parameter(fa,Hi),kr.magFilter=Hi[fa]}var Do=kr.wrapS,au=kr.wrapT;if("wrap"in ii){var sr=ii.wrap;typeof sr=="string"?(q.parameter(sr,Bi),Do=au=Bi[sr]):Array.isArray(sr)&&(q.parameter(sr[0],Bi),q.parameter(sr[1],Bi),Do=Bi[sr[0]],au=Bi[sr[1]])}else{if("wrapS"in ii){var Pr=ii.wrapS;q.parameter(Pr,Bi),Do=Bi[Pr]}if("wrapT"in ii){var $r=ii.wrapT;q.parameter($r,Bi),au=Bi[$r]}}if(kr.wrapS=Do,kr.wrapT=au,"anisotropic"in ii){var Zn=ii.anisotropic;q(typeof Zn=="number"&&Zn>=1&&Zn<=Xr.maxAnisotropic,"aniso samples must be between 1 and "),kr.anisotropic=ii.anisotropic}if("mipmap"in ii){var Vn=!1;switch(typeof ii.mipmap){case"string":q.parameter(ii.mipmap,Li,"invalid mipmap hint"),kr.mipmapHint=Li[ii.mipmap],kr.genMipmaps=!0,Vn=!0;break;case"boolean":Vn=kr.genMipmaps=ii.mipmap;break;case"object":q(Array.isArray(ii.mipmap),"invalid mipmap type"),kr.genMipmaps=!1,Vn=!0;break;default:q.raise("invalid mipmap type")}Vn&&!("min"in ii)&&(kr.minFilter=Es)}}function Cl(kr,ii){kt.texParameteri(ii,Mu,kr.minFilter),kt.texParameteri(ii,us,kr.magFilter),kt.texParameteri(ii,ss,kr.wrapS),kt.texParameteri(ii,ko,kr.wrapT),nr.ext_texture_filter_anisotropic&&kt.texParameteri(ii,Ko,kr.anisotropic),kr.genMipmaps&&(kt.hint(qu,kr.mipmapHint),kt.generateMipmap(ii))}var el=0,Dl={},ec=Xr.maxTextureUnits,Pl=Array(ec).map(function(){return null});function Wo(kr){Si.call(this),this.mipmask=0,this.internalformat=xs,this.id=el++,this.refCount=1,this.target=kr,this.texture=kt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Lu,Ln.profile&&(this.stats={size:0})}function tc(kr){kt.activeTexture(El),kt.bindTexture(kr.target,kr.texture)}function Gs(){var kr=Pl[0];kr?kt.bindTexture(kr.target,kr.texture):kt.bindTexture(os,null)}function no(kr){var ii=kr.texture;q(ii,"must not double destroy texture");var Hn=kr.unit,fa=kr.target;Hn>=0&&(kt.activeTexture(El+Hn),kt.bindTexture(fa,null),Pl[Hn]=null),kt.deleteTexture(ii),kr.texture=null,kr.params=null,kr.pixels=null,kr.refCount=0,delete Dl[kr.id],fi.textureCount--}B(Wo.prototype,{bind:function(){var ii=this;ii.bindCount+=1;var Hn=ii.unit;if(Hn<0){for(var fa=0;fa<ec;++fa){var Do=Pl[fa];if(Do){if(Do.bindCount>0)continue;Do.unit=-1}Pl[fa]=ii,Hn=fa;break}Hn>=ec&&q.raise("insufficient number of texture units"),Ln.profile&&fi.maxTextureUnits<Hn+1&&(fi.maxTextureUnits=Hn+1),ii.unit=Hn,kt.activeTexture(El+Hn),kt.bindTexture(ii.target,ii.texture)}return Hn},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&no(this)}});function No(kr,ii){var Hn=new Wo(os);Dl[Hn.id]=Hn,fi.textureCount++;function fa(sr,Pr){var $r=Hn.texInfo;Lu.call($r);var Zn=Jo();return typeof sr=="number"?typeof Pr=="number"?oo(Zn,sr|0,Pr|0):oo(Zn,sr|0,sr|0):sr?(q.type(sr,"object","invalid arguments to regl.texture"),Ml($r,sr),js(Zn,sr)):oo(Zn,1,1),$r.genMipmaps&&(Zn.mipmask=(Zn.width<<1)-1),Hn.mipmask=Zn.mipmask,Qi(Hn,Zn),q.texture2D($r,Zn,Xr),Hn.internalformat=Zn.internalformat,fa.width=Zn.width,fa.height=Zn.height,tc(Hn),Ol(Zn,os),Cl($r,os),Gs(),Tl(Zn),Ln.profile&&(Hn.stats.size=kn(Hn.internalformat,Hn.type,Zn.width,Zn.height,$r.genMipmaps,!1)),fa.format=Ui[Hn.internalformat],fa.type=oa[Hn.type],fa.mag=pi[$r.magFilter],fa.min=wa[$r.minFilter],fa.wrapS=Di[$r.wrapS],fa.wrapT=Di[$r.wrapT],fa}function Do(sr,Pr,$r,Zn){q(!!sr,"must specify image data");var Vn=Pr|0,sn=$r|0,gn=Zn|0,Sn=sa();return Qi(Sn,Hn),Sn.width=0,Sn.height=0,ki(Sn,sr),Sn.width=Sn.width||(Hn.width>>gn)-Vn,Sn.height=Sn.height||(Hn.height>>gn)-sn,q(Hn.type===Sn.type&&Hn.format===Sn.format&&Hn.internalformat===Sn.internalformat,"incompatible format for texture.subimage"),q(Vn>=0&&sn>=0&&Vn+Sn.width<=Hn.width&&sn+Sn.height<=Hn.height,"texture.subimage write out of bounds"),q(Hn.mipmask&1<<gn,"missing mipmap data"),q(Sn.data||Sn.element||Sn.needsCopy,"missing image data"),tc(Hn),Ua(Sn,os,Vn,sn,gn),Gs(),Fo(Sn),fa}function au(sr,Pr){var $r=sr|0,Zn=Pr|0||$r;if($r===Hn.width&&Zn===Hn.height)return fa;fa.width=Hn.width=$r,fa.height=Hn.height=Zn,tc(Hn);for(var Vn=0;Hn.mipmask>>Vn;++Vn){var sn=$r>>Vn,gn=Zn>>Vn;if(!sn||!gn)break;kt.texImage2D(os,Vn,Hn.format,sn,gn,0,Hn.format,Hn.type,null)}return Gs(),Ln.profile&&(Hn.stats.size=kn(Hn.internalformat,Hn.type,$r,Zn,!1,!1)),fa}return fa(kr,ii),fa.subimage=Do,fa.resize=au,fa._reglType="texture2d",fa._texture=Hn,Ln.profile&&(fa.stats=Hn.stats),fa.destroy=function(){Hn.decRef()},fa}function Os(kr,ii,Hn,fa,Do,au){var sr=new Wo(Us);Dl[sr.id]=sr,fi.cubeCount++;var Pr=new Array(6);function $r(sn,gn,Sn,Nr,dn,Or){var pn,ai=sr.texInfo;for(Lu.call(ai),pn=0;pn<6;++pn)Pr[pn]=Jo();if(typeof sn=="number"||!sn){var ci=sn|0||1;for(pn=0;pn<6;++pn)oo(Pr[pn],ci,ci)}else if(typeof sn=="object")if(gn)js(Pr[0],sn),js(Pr[1],gn),js(Pr[2],Sn),js(Pr[3],Nr),js(Pr[4],dn),js(Pr[5],Or);else if(Ml(ai,sn),Ra(sr,sn),"faces"in sn){var Ri=sn.faces;for(q(Array.isArray(Ri)&&Ri.length===6,"cube faces must be a length 6 array"),pn=0;pn<6;++pn)q(typeof Ri[pn]=="object"&&!!Ri[pn],"invalid input for cube map face"),Qi(Pr[pn],sr),js(Pr[pn],Ri[pn])}else for(pn=0;pn<6;++pn)js(Pr[pn],sn);else q.raise("invalid arguments to cube map");for(Qi(sr,Pr[0]),Xr.npotTextureCube||q(dl(sr.width)&&dl(sr.height),"your browser does not support non power or two texture dimensions"),ai.genMipmaps?sr.mipmask=(Pr[0].width<<1)-1:sr.mipmask=Pr[0].mipmask,q.textureCube(sr,ai,Pr,Xr),sr.internalformat=Pr[0].internalformat,$r.width=Pr[0].width,$r.height=Pr[0].height,tc(sr),pn=0;pn<6;++pn)Ol(Pr[pn],hs+pn);for(Cl(ai,Us),Gs(),Ln.profile&&(sr.stats.size=kn(sr.internalformat,sr.type,$r.width,$r.height,ai.genMipmaps,!0)),$r.format=Ui[sr.internalformat],$r.type=oa[sr.type],$r.mag=pi[ai.magFilter],$r.min=wa[ai.minFilter],$r.wrapS=Di[ai.wrapS],$r.wrapT=Di[ai.wrapT],pn=0;pn<6;++pn)Tl(Pr[pn]);return $r}function Zn(sn,gn,Sn,Nr,dn){q(!!gn,"must specify image data"),q(typeof sn=="number"&&sn===(sn|0)&&sn>=0&&sn<6,"invalid face");var Or=Sn|0,pn=Nr|0,ai=dn|0,ci=sa();return Qi(ci,sr),ci.width=0,ci.height=0,ki(ci,gn),ci.width=ci.width||(sr.width>>ai)-Or,ci.height=ci.height||(sr.height>>ai)-pn,q(sr.type===ci.type&&sr.format===ci.format&&sr.internalformat===ci.internalformat,"incompatible format for texture.subimage"),q(Or>=0&&pn>=0&&Or+ci.width<=sr.width&&pn+ci.height<=sr.height,"texture.subimage write out of bounds"),q(sr.mipmask&1<<ai,"missing mipmap data"),q(ci.data||ci.element||ci.needsCopy,"missing image data"),tc(sr),Ua(ci,hs+sn,Or,pn,ai),Gs(),Fo(ci),$r}function Vn(sn){var gn=sn|0;if(gn!==sr.width){$r.width=sr.width=gn,$r.height=sr.height=gn,tc(sr);for(var Sn=0;Sn<6;++Sn)for(var Nr=0;sr.mipmask>>Nr;++Nr)kt.texImage2D(hs+Sn,Nr,sr.format,gn>>Nr,gn>>Nr,0,sr.format,sr.type,null);return Gs(),Ln.profile&&(sr.stats.size=kn(sr.internalformat,sr.type,$r.width,$r.height,!1,!0)),$r}}return $r(kr,ii,Hn,fa,Do,au),$r.subimage=Zn,$r.resize=Vn,$r._reglType="textureCube",$r._texture=sr,Ln.profile&&($r.stats=sr.stats),$r.destroy=function(){sr.decRef()},$r}function rc(){for(var kr=0;kr<ec;++kr)kt.activeTexture(El+kr),kt.bindTexture(os,null),Pl[kr]=null;Lt(Dl).forEach(no),fi.cubeCount=0,fi.textureCount=0}Ln.profile&&(fi.getTotalTextureSize=function(){var kr=0;return Object.keys(Dl).forEach(function(ii){kr+=Dl[ii].stats.size}),kr});function _c(){for(var kr=0;kr<ec;++kr){var ii=Pl[kr];ii&&(ii.bindCount=0,ii.unit=-1,Pl[kr]=null)}Lt(Dl).forEach(function(Hn){Hn.texture=kt.createTexture(),kt.bindTexture(Hn.target,Hn.texture);for(var fa=0;fa<32;++fa)if((Hn.mipmask&1<<fa)!=0)if(Hn.target===os)kt.texImage2D(os,fa,Hn.internalformat,Hn.width>>fa,Hn.height>>fa,0,Hn.internalformat,Hn.type,null);else for(var Do=0;Do<6;++Do)kt.texImage2D(hs+Do,fa,Hn.internalformat,Hn.width>>fa,Hn.height>>fa,0,Hn.internalformat,Hn.type,null);Cl(Hn.texInfo,Hn.target)})}return{create2D:No,createCube:Os,clear:rc,getTexture:function(ii){return null},restore:_c}}var bn=36161,Xe=32854,et=32855,Ct=36194,At=33189,Le=36168,Ne=34041,nt=35907,tt=34836,dt=34842,Dt=34843,Zt=[];Zt[Xe]=2,Zt[et]=2,Zt[Ct]=2,Zt[At]=2,Zt[Le]=1,Zt[Ne]=4,Zt[nt]=4,Zt[tt]=16,Zt[dt]=8,Zt[Dt]=6;function cr(kt,nr,Xr){return Zt[kt]*nr*Xr}var Jt=function(nr,Xr,Gn,vi,fi){var Ln={rgba4:Xe,rgb565:Ct,"rgb5 a1":et,depth:At,stencil:Le,"depth stencil":Ne};Xr.ext_srgb&&(Ln.srgba=nt),Xr.ext_color_buffer_half_float&&(Ln.rgba16f=dt,Ln.rgb16f=Dt),Xr.webgl_color_buffer_float&&(Ln.rgba32f=tt);var Li=[];Object.keys(Ln).forEach(function(Fi){var $n=Ln[Fi];Li[$n]=Fi});var Bi=0,Hi={};function zi(Fi){this.id=Bi++,this.refCount=1,this.renderbuffer=Fi,this.format=Xe,this.width=0,this.height=0,fi.profile&&(this.stats={size:0})}zi.prototype.decRef=function(){--this.refCount<=0&&Gi(this)};function Gi(Fi){var $n=Fi.renderbuffer;q($n,"must not double destroy renderbuffer"),nr.bindRenderbuffer(bn,null),nr.deleteRenderbuffer($n),Fi.renderbuffer=null,Fi.refCount=0,delete Hi[Fi.id],vi.renderbufferCount--}function aa(Fi,$n){var Xn=new zi(nr.createRenderbuffer());Hi[Xn.id]=Xn,vi.renderbufferCount++;function Ui(pi,wa){var Di=0,$i=0,Si=Xe;if(typeof pi=="object"&&pi){var Qi=pi;if("shape"in Qi){var Ra=Qi.shape;q(Array.isArray(Ra)&&Ra.length>=2,"invalid renderbuffer shape"),Di=Ra[0]|0,$i=Ra[1]|0}else"radius"in Qi&&(Di=$i=Qi.radius|0),"width"in Qi&&(Di=Qi.width|0),"height"in Qi&&($i=Qi.height|0);"format"in Qi&&(q.parameter(Qi.format,Ln,"invalid renderbuffer format"),Si=Ln[Qi.format])}else typeof pi=="number"?(Di=pi|0,typeof wa=="number"?$i=wa|0:$i=Di):pi?q.raise("invalid arguments to renderbuffer constructor"):Di=$i=1;if(q(Di>0&&$i>0&&Di<=Gn.maxRenderbufferSize&&$i<=Gn.maxRenderbufferSize,"invalid renderbuffer size"),!(Di===Xn.width&&$i===Xn.height&&Si===Xn.format))return Ui.width=Xn.width=Di,Ui.height=Xn.height=$i,Xn.format=Si,nr.bindRenderbuffer(bn,Xn.renderbuffer),nr.renderbufferStorage(bn,Si,Di,$i),q(nr.getError()===0,"invalid render buffer format"),fi.profile&&(Xn.stats.size=cr(Xn.format,Xn.width,Xn.height)),Ui.format=Li[Xn.format],Ui}function oa(pi,wa){var Di=pi|0,$i=wa|0||Di;return Di===Xn.width&&$i===Xn.height||(q(Di>0&&$i>0&&Di<=Gn.maxRenderbufferSize&&$i<=Gn.maxRenderbufferSize,"invalid renderbuffer size"),Ui.width=Xn.width=Di,Ui.height=Xn.height=$i,nr.bindRenderbuffer(bn,Xn.renderbuffer),nr.renderbufferStorage(bn,Xn.format,Di,$i),q(nr.getError()===0,"invalid render buffer format"),fi.profile&&(Xn.stats.size=cr(Xn.format,Xn.width,Xn.height))),Ui}return Ui(Fi,$n),Ui.resize=oa,Ui._reglType="renderbuffer",Ui._renderbuffer=Xn,fi.profile&&(Ui.stats=Xn.stats),Ui.destroy=function(){Xn.decRef()},Ui}fi.profile&&(vi.getTotalRenderbufferSize=function(){var Fi=0;return Object.keys(Hi).forEach(function($n){Fi+=Hi[$n].stats.size}),Fi});function Yi(){Lt(Hi).forEach(function(Fi){Fi.renderbuffer=nr.createRenderbuffer(),nr.bindRenderbuffer(bn,Fi.renderbuffer),nr.renderbufferStorage(bn,Fi.format,Fi.width,Fi.height)}),nr.bindRenderbuffer(bn,null)}return{create:aa,clear:function(){Lt(Hi).forEach(Gi)},restore:Yi}},xr=36160,yr=36161,rn=3553,Kr=34069,an=36064,Qr=36096,_n=36128,Pn=33306,ri=36053,Ei=36054,zn=36055,gi=36057,Ti=36061,la=36193,Vi=5121,Ha=5126,Na=6407,Wa=6408,mi=6402,eo=[Na,Wa],Lo=[];Lo[Wa]=4,Lo[Na]=3;var po=[];po[Vi]=1,po[Ha]=4,po[la]=2;var Wi=32854,Oo=32855,as=36194,pu=33189,gu=36168,Sl=34041,ul=35907,X=34836,k=34842,F=34843,$=[Wi,Oo,as,ul,k,F,X],G={};G[ri]="complete",G[Ei]="incomplete attachment",G[gi]="incomplete dimensions",G[zn]="incomplete, missing attachment",G[Ti]="unsupported";function ee(kt,nr,Xr,Gn,vi,fi){var Ln={cur:null,next:null,dirty:!1,setFBO:null},Li=["rgba"],Bi=["rgba4","rgb565","rgb5 a1"];nr.ext_srgb&&Bi.push("srgba"),nr.ext_color_buffer_half_float&&Bi.push("rgba16f","rgb16f"),nr.webgl_color_buffer_float&&Bi.push("rgba32f");var Hi=["uint8"];nr.oes_texture_half_float&&Hi.push("half float","float16"),nr.oes_texture_float&&Hi.push("float","float32");function zi(ra,ki,_i){this.target=ra,this.texture=ki,this.renderbuffer=_i;var Ua=0,Vo=0;ki?(Ua=ki.width,Vo=ki.height):_i&&(Ua=_i.width,Vo=_i.height),this.width=Ua,this.height=Vo}function Gi(ra){ra&&(ra.texture&&ra.texture._texture.decRef(),ra.renderbuffer&&ra.renderbuffer._renderbuffer.decRef())}function aa(ra,ki,_i){if(!!ra)if(ra.texture){var Ua=ra.texture._texture,Vo=Math.max(1,Ua.width),sa=Math.max(1,Ua.height);q(Vo===ki&&sa===_i,"inconsistent width/height for supplied texture"),Ua.refCount+=1}else{var Fo=ra.renderbuffer._renderbuffer;q(Fo.width===ki&&Fo.height===_i,"inconsistent width/height for renderbuffer"),Fo.refCount+=1}}function Yi(ra,ki){ki&&(ki.texture?kt.framebufferTexture2D(xr,ra,ki.target,ki.texture._texture.texture,0):kt.framebufferRenderbuffer(xr,ra,yr,ki.renderbuffer._renderbuffer.renderbuffer))}function Fi(ra){var ki=rn,_i=null,Ua=null,Vo=ra;typeof ra=="object"&&(Vo=ra.data,"target"in ra&&(ki=ra.target|0)),q.type(Vo,"function","invalid attachment data");var sa=Vo._reglType;return sa==="texture2d"?(_i=Vo,q(ki===rn)):sa==="textureCube"?(_i=Vo,q(ki>=Kr&&ki<Kr+6,"invalid cube map target")):sa==="renderbuffer"?(Ua=Vo,ki=yr):q.raise("invalid regl object for attachment"),new zi(ki,_i,Ua)}function $n(ra,ki,_i,Ua,Vo){if(_i){var sa=Gn.create2D({width:ra,height:ki,format:Ua,type:Vo});return sa._texture.refCount=0,new zi(rn,sa,null)}else{var Fo=vi.create({width:ra,height:ki,format:Ua});return Fo._renderbuffer.refCount=0,new zi(yr,null,Fo)}}function Xn(ra){return ra&&(ra.texture||ra.renderbuffer)}function Ui(ra,ki,_i){ra&&(ra.texture?ra.texture.resize(ki,_i):ra.renderbuffer&&ra.renderbuffer.resize(ki,_i),ra.width=ki,ra.height=_i)}var oa=0,pi={};function wa(){this.id=oa++,pi[this.id]=this,this.framebuffer=kt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Di(ra){ra.colorAttachments.forEach(Gi),Gi(ra.depthAttachment),Gi(ra.stencilAttachment),Gi(ra.depthStencilAttachment)}function $i(ra){var ki=ra.framebuffer;q(ki,"must not double destroy framebuffer"),kt.deleteFramebuffer(ki),ra.framebuffer=null,fi.framebufferCount--,delete pi[ra.id]}function Si(ra){var ki;kt.bindFramebuffer(xr,ra.framebuffer);var _i=ra.colorAttachments;for(ki=0;ki<_i.length;++ki)Yi(an+ki,_i[ki]);for(ki=_i.length;ki<Xr.maxColorAttachments;++ki)kt.framebufferTexture2D(xr,an+ki,rn,null,0);kt.framebufferTexture2D(xr,Pn,rn,null,0),kt.framebufferTexture2D(xr,Qr,rn,null,0),kt.framebufferTexture2D(xr,_n,rn,null,0),Yi(Qr,ra.depthAttachment),Yi(_n,ra.stencilAttachment),Yi(Pn,ra.depthStencilAttachment);var Ua=kt.checkFramebufferStatus(xr);!kt.isContextLost()&&Ua!==ri&&q.raise("framebuffer configuration not supported, status = "+G[Ua]),kt.bindFramebuffer(xr,Ln.next?Ln.next.framebuffer:null),Ln.cur=Ln.next,kt.getError()}function Qi(ra,ki){var _i=new wa;fi.framebufferCount++;function Ua(sa,Fo){var Eo;q(Ln.next!==_i,"can not update framebuffer which is currently in use");var oo=0,js=0,Ol=!0,Yl=!0,Jo=null,Tl=!0,Lu="rgba",Ml="uint8",Cl=1,el=null,Dl=null,ec=null,Pl=!1;if(typeof sa=="number")oo=sa|0,js=Fo|0||oo;else if(!sa)oo=js=1;else{q.type(sa,"object","invalid arguments for framebuffer");var Wo=sa;if("shape"in Wo){var tc=Wo.shape;q(Array.isArray(tc)&&tc.length>=2,"invalid shape for framebuffer"),oo=tc[0],js=tc[1]}else"radius"in Wo&&(oo=js=Wo.radius),"width"in Wo&&(oo=Wo.width),"height"in Wo&&(js=Wo.height);("color"in Wo||"colors"in Wo)&&(Jo=Wo.color||Wo.colors,Array.isArray(Jo)&&q(Jo.length===1||nr.webgl_draw_buffers,"multiple render targets not supported")),Jo||("colorCount"in Wo&&(Cl=Wo.colorCount|0,q(Cl>0,"invalid color buffer count")),"colorTexture"in Wo&&(Tl=!!Wo.colorTexture,Lu="rgba4"),"colorType"in Wo&&(Ml=Wo.colorType,Tl?(q(nr.oes_texture_float||!(Ml==="float"||Ml==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),q(nr.oes_texture_half_float||!(Ml==="half float"||Ml==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ml==="half float"||Ml==="float16"?(q(nr.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Lu="rgba16f"):(Ml==="float"||Ml==="float32")&&(q(nr.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Lu="rgba32f"),q.oneOf(Ml,Hi,"invalid color type")),"colorFormat"in Wo&&(Lu=Wo.colorFormat,Li.indexOf(Lu)>=0?Tl=!0:Bi.indexOf(Lu)>=0?Tl=!1:Tl?q.oneOf(Wo.colorFormat,Li,"invalid color format for texture"):q.oneOf(Wo.colorFormat,Bi,"invalid color format for renderbuffer"))),("depthTexture"in Wo||"depthStencilTexture"in Wo)&&(Pl=!!(Wo.depthTexture||Wo.depthStencilTexture),q(!Pl||nr.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Wo&&(typeof Wo.depth=="boolean"?Ol=Wo.depth:(el=Wo.depth,Yl=!1)),"stencil"in Wo&&(typeof Wo.stencil=="boolean"?Yl=Wo.stencil:(Dl=Wo.stencil,Ol=!1)),"depthStencil"in Wo&&(typeof Wo.depthStencil=="boolean"?Ol=Yl=Wo.depthStencil:(ec=Wo.depthStencil,Ol=!1,Yl=!1))}var Gs=null,no=null,No=null,Os=null;if(Array.isArray(Jo))Gs=Jo.map(Fi);else if(Jo)Gs=[Fi(Jo)];else for(Gs=new Array(Cl),Eo=0;Eo<Cl;++Eo)Gs[Eo]=$n(oo,js,Tl,Lu,Ml);q(nr.webgl_draw_buffers||Gs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),q(Gs.length<=Xr.maxColorAttachments,"too many color attachments, not supported"),oo=oo||Gs[0].width,js=js||Gs[0].height,el?no=Fi(el):Ol&&!Yl&&(no=$n(oo,js,Pl,"depth","uint32")),Dl?No=Fi(Dl):Yl&&!Ol&&(No=$n(oo,js,!1,"stencil","uint8")),ec?Os=Fi(ec):!el&&!Dl&&Yl&&Ol&&(Os=$n(oo,js,Pl,"depth stencil","depth stencil")),q(!!el+!!Dl+!!ec<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var rc=null;for(Eo=0;Eo<Gs.length;++Eo)if(aa(Gs[Eo],oo,js),q(!Gs[Eo]||Gs[Eo].texture&&eo.indexOf(Gs[Eo].texture._texture.format)>=0||Gs[Eo].renderbuffer&&$.indexOf(Gs[Eo].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Eo+" is invalid"),Gs[Eo]&&Gs[Eo].texture){var _c=Lo[Gs[Eo].texture._texture.format]*po[Gs[Eo].texture._texture.type];rc===null?rc=_c:q(rc===_c,"all color attachments much have the same number of bits per pixel.")}return aa(no,oo,js),q(!no||no.texture&&no.texture._texture.format===mi||no.renderbuffer&&no.renderbuffer._renderbuffer.format===pu,"invalid depth attachment for framebuffer object"),aa(No,oo,js),q(!No||No.renderbuffer&&No.renderbuffer._renderbuffer.format===gu,"invalid stencil attachment for framebuffer object"),aa(Os,oo,js),q(!Os||Os.texture&&Os.texture._texture.format===Sl||Os.renderbuffer&&Os.renderbuffer._renderbuffer.format===Sl,"invalid depth-stencil attachment for framebuffer object"),Di(_i),_i.width=oo,_i.height=js,_i.colorAttachments=Gs,_i.depthAttachment=no,_i.stencilAttachment=No,_i.depthStencilAttachment=Os,Ua.color=Gs.map(Xn),Ua.depth=Xn(no),Ua.stencil=Xn(No),Ua.depthStencil=Xn(Os),Ua.width=_i.width,Ua.height=_i.height,Si(_i),Ua}function Vo(sa,Fo){q(Ln.next!==_i,"can not resize a framebuffer which is currently in use");var Eo=Math.max(sa|0,1),oo=Math.max(Fo|0||Eo,1);if(Eo===_i.width&&oo===_i.height)return Ua;for(var js=_i.colorAttachments,Ol=0;Ol<js.length;++Ol)Ui(js[Ol],Eo,oo);return Ui(_i.depthAttachment,Eo,oo),Ui(_i.stencilAttachment,Eo,oo),Ui(_i.depthStencilAttachment,Eo,oo),_i.width=Ua.width=Eo,_i.height=Ua.height=oo,Si(_i),Ua}return Ua(ra,ki),B(Ua,{resize:Vo,_reglType:"framebuffer",_framebuffer:_i,destroy:function(){$i(_i),Di(_i)},use:function(Fo){Ln.setFBO({framebuffer:Ua},Fo)}})}function Ra(ra){var ki=Array(6);function _i(Vo){var sa;q(ki.indexOf(Ln.next)<0,"can not update framebuffer which is currently in use");var Fo={color:null},Eo=0,oo=null,js="rgba",Ol="uint8",Yl=1;if(typeof Vo=="number")Eo=Vo|0;else if(!Vo)Eo=1;else{q.type(Vo,"object","invalid arguments for framebuffer");var Jo=Vo;if("shape"in Jo){var Tl=Jo.shape;q(Array.isArray(Tl)&&Tl.length>=2,"invalid shape for framebuffer"),q(Tl[0]===Tl[1],"cube framebuffer must be square"),Eo=Tl[0]}else"radius"in Jo&&(Eo=Jo.radius|0),"width"in Jo?(Eo=Jo.width|0,"height"in Jo&&q(Jo.height===Eo,"must be square")):"height"in Jo&&(Eo=Jo.height|0);("color"in Jo||"colors"in Jo)&&(oo=Jo.color||Jo.colors,Array.isArray(oo)&&q(oo.length===1||nr.webgl_draw_buffers,"multiple render targets not supported")),oo||("colorCount"in Jo&&(Yl=Jo.colorCount|0,q(Yl>0,"invalid color buffer count")),"colorType"in Jo&&(q.oneOf(Jo.colorType,Hi,"invalid color type"),Ol=Jo.colorType),"colorFormat"in Jo&&(js=Jo.colorFormat,q.oneOf(Jo.colorFormat,Li,"invalid color format for texture"))),"depth"in Jo&&(Fo.depth=Jo.depth),"stencil"in Jo&&(Fo.stencil=Jo.stencil),"depthStencil"in Jo&&(Fo.depthStencil=Jo.depthStencil)}var Lu;if(oo)if(Array.isArray(oo))for(Lu=[],sa=0;sa<oo.length;++sa)Lu[sa]=oo[sa];else Lu=[oo];else{Lu=Array(Yl);var Ml={radius:Eo,format:js,type:Ol};for(sa=0;sa<Yl;++sa)Lu[sa]=Gn.createCube(Ml)}for(Fo.color=Array(Lu.length),sa=0;sa<Lu.length;++sa){var Cl=Lu[sa];q(typeof Cl=="function"&&Cl._reglType==="textureCube","invalid cube map"),Eo=Eo||Cl.width,q(Cl.width===Eo&&Cl.height===Eo,"invalid cube map shape"),Fo.color[sa]={target:Kr,data:Lu[sa]}}for(sa=0;sa<6;++sa){for(var el=0;el<Lu.length;++el)Fo.color[el].target=Kr+sa;sa>0&&(Fo.depth=ki[0].depth,Fo.stencil=ki[0].stencil,Fo.depthStencil=ki[0].depthStencil),ki[sa]?ki[sa](Fo):ki[sa]=Qi(Fo)}return B(_i,{width:Eo,height:Eo,color:Lu})}function Ua(Vo){var sa,Fo=Vo|0;if(q(Fo>0&&Fo<=Xr.maxCubeMapSize,"invalid radius for cube fbo"),Fo===_i.width)return _i;var Eo=_i.color;for(sa=0;sa<Eo.length;++sa)Eo[sa].resize(Fo);for(sa=0;sa<6;++sa)ki[sa].resize(Fo);return _i.width=_i.height=Fo,_i}return _i(ra),B(_i,{faces:ki,resize:Ua,_reglType:"framebufferCube",destroy:function(){ki.forEach(function(sa){sa.destroy()})}})}function co(){Ln.cur=null,Ln.next=null,Ln.dirty=!0,Lt(pi).forEach(function(ra){ra.framebuffer=kt.createFramebuffer(),Si(ra)})}return B(Ln,{getFramebuffer:function(ki){if(typeof ki=="function"&&ki._reglType==="framebuffer"){var _i=ki._framebuffer;if(_i instanceof wa)return _i}return null},create:Qi,createCube:Ra,clear:function(){Lt(pi).forEach($i)},restore:co})}var ce=5126,fe=34962;function Pe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ce,this.offset=0,this.stride=0,this.divisor=0}function Ie(kt,nr,Xr,Gn,vi){for(var fi=Xr.maxAttributes,Ln=new Array(fi),Li=0;Li<fi;++Li)Ln[Li]=new Pe;var Bi=0,Hi={},zi={Record:Pe,scope:{},state:Ln,currentVAO:null,targetVAO:null,restore:aa()?pi:function(){},createVAO:wa,getVAO:Fi,destroyBuffer:Gi,setVAO:aa()?$n:Xn,clear:aa()?Ui:function(){}};function Gi(Di){for(var $i=0;$i<Ln.length;++$i){var Si=Ln[$i];Si.buffer===Di&&(kt.disableVertexAttribArray($i),Si.buffer=null)}}function aa(){return nr.oes_vertex_array_object}function Yi(){return nr.angle_instanced_arrays}function Fi(Di){return typeof Di=="function"&&Di._vao?Di._vao:null}function $n(Di){if(Di!==zi.currentVAO){var $i=aa();Di?$i.bindVertexArrayOES(Di.vao):$i.bindVertexArrayOES(null),zi.currentVAO=Di}}function Xn(Di){if(Di!==zi.currentVAO){if(Di)Di.bindAttrs();else for(var $i=Yi(),Si=0;Si<Ln.length;++Si){var Qi=Ln[Si];Qi.buffer?(kt.enableVertexAttribArray(Si),kt.vertexAttribPointer(Si,Qi.size,Qi.type,Qi.normalized,Qi.stride,Qi.offfset),$i&&$i.vertexAttribDivisorANGLE(Si,Qi.divisor)):(kt.disableVertexAttribArray(Si),kt.vertexAttrib4f(Si,Qi.x,Qi.y,Qi.z,Qi.w))}zi.currentVAO=Di}}function Ui(){Lt(Hi).forEach(function(Di){Di.destroy()})}function oa(){this.id=++Bi,this.attributes=[];var Di=aa();Di?this.vao=Di.createVertexArrayOES():this.vao=null,Hi[this.id]=this,this.buffers=[]}oa.prototype.bindAttrs=function(){for(var Di=Yi(),$i=this.attributes,Si=0;Si<$i.length;++Si){var Qi=$i[Si];Qi.buffer?(kt.enableVertexAttribArray(Si),kt.bindBuffer(fe,Qi.buffer.buffer),kt.vertexAttribPointer(Si,Qi.size,Qi.type,Qi.normalized,Qi.stride,Qi.offset),Di&&Di.vertexAttribDivisorANGLE(Si,Qi.divisor)):(kt.disableVertexAttribArray(Si),kt.vertexAttrib4f(Si,Qi.x,Qi.y,Qi.z,Qi.w))}for(var Ra=$i.length;Ra<fi;++Ra)kt.disableVertexAttribArray(Ra)},oa.prototype.refresh=function(){var Di=aa();Di&&(Di.bindVertexArrayOES(this.vao),this.bindAttrs(),zi.currentVAO=this)},oa.prototype.destroy=function(){if(this.vao){var Di=aa();this===zi.currentVAO&&(zi.currentVAO=null,Di.bindVertexArrayOES(null)),Di.deleteVertexArrayOES(this.vao),this.vao=null}Hi[this.id]&&(delete Hi[this.id],Gn.vaoCount-=1)};function pi(){var Di=aa();Di&&Lt(Hi).forEach(function($i){$i.refresh()})}function wa(Di){var $i=new oa;Gn.vaoCount+=1;function Si(Qi){q(Array.isArray(Qi),"arguments to vertex array constructor must be an array"),q(Qi.length<fi,"too many attributes"),q(Qi.length>0,"must specify at least one attribute");for(var Ra=0;Ra<$i.buffers.length;++Ra)$i.buffers[Ra].destroy();$i.buffers.length=0;var co=$i.attributes;co.length=Qi.length;for(var ra=0;ra<Qi.length;++ra){var ki=Qi[ra],_i=co[ra]=new Pe;if(Array.isArray(ki)||he(ki)||ys(ki)){var Ua=vi.create(ki,fe,!1,!0);_i.buffer=vi.getBuffer(Ua),_i.size=_i.buffer.dimension|0,_i.normalized=!1,_i.type=_i.buffer.dtype,_i.offset=0,_i.stride=0,_i.divisor=0,_i.state=1,$i.buffers.push(Ua)}else vi.getBuffer(ki)?(_i.buffer=vi.getBuffer(ki),_i.size=_i.buffer.dimension|0,_i.normalized=!1,_i.type=_i.buffer.dtype,_i.offset=0,_i.stride=0,_i.divisor=0,_i.state=1):vi.getBuffer(ki.buffer)?(_i.buffer=vi.getBuffer(ki.buffer),_i.size=(+ki.size||_i.buffer.dimension)|0,_i.normalized=!!ki.normalized||!1,"type"in ki?(q.parameter(ki.type,go,"invalid buffer type"),_i.type=go[ki.type]):_i.type=_i.buffer.dtype,_i.offset=(ki.offset||0)|0,_i.stride=(ki.stride||0)|0,_i.divisor=(ki.divisor||0)|0,_i.state=1,q(_i.size>=1&&_i.size<=4,"size must be between 1 and 4"),q(_i.offset>=0,"invalid offset"),q(_i.stride>=0&&_i.stride<=255,"stride must be between 0 and 255"),q(_i.divisor>=0,"divisor must be positive"),q(!_i.divisor||!!nr.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ki?(q(ra>0,"first attribute must not be a constant"),_i.x=+ki.x||0,_i.y=+ki.y||0,_i.z=+ki.z||0,_i.w=+ki.w||0,_i.state=2):q(!1,"invalid attribute spec for location "+ra)}return $i.refresh(),Si}return Si.destroy=function(){$i.destroy()},Si._vao=$i,Si._reglType="vao",Si(Di)}return zi}var ke=35632,Ge=35633,Je=35718,vt=35721;function _t(kt,nr,Xr,Gn){var vi={},fi={};function Ln($n,Xn,Ui,oa){this.name=$n,this.id=Xn,this.location=Ui,this.info=oa}function Li($n,Xn){for(var Ui=0;Ui<$n.length;++Ui)if($n[Ui].id===Xn.id){$n[Ui].location=Xn.location;return}$n.push(Xn)}function Bi($n,Xn,Ui){var oa=$n===ke?vi:fi,pi=oa[Xn];if(!pi){var wa=nr.str(Xn);pi=kt.createShader($n),kt.shaderSource(pi,wa),kt.compileShader(pi),q.shaderError(kt,pi,wa,$n,Ui),oa[Xn]=pi}return pi}var Hi={},zi=[],Gi=0;function aa($n,Xn){this.id=Gi++,this.fragId=$n,this.vertId=Xn,this.program=null,this.uniforms=[],this.attributes=[],Gn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Yi($n,Xn,Ui){var oa,pi,wa=Bi(ke,$n.fragId),Di=Bi(Ge,$n.vertId),$i=$n.program=kt.createProgram();if(kt.attachShader($i,wa),kt.attachShader($i,Di),Ui)for(oa=0;oa<Ui.length;++oa){var Si=Ui[oa];kt.bindAttribLocation($i,Si[0],Si[1])}kt.linkProgram($i),q.linkError(kt,$i,nr.str($n.fragId),nr.str($n.vertId),Xn);var Qi=kt.getProgramParameter($i,Je);Gn.profile&&($n.stats.uniformsCount=Qi);var Ra=$n.uniforms;for(oa=0;oa<Qi;++oa)if(pi=kt.getActiveUniform($i,oa),pi)if(pi.size>1)for(var co=0;co<pi.size;++co){var ra=pi.name.replace("[0]","["+co+"]");Li(Ra,new Ln(ra,nr.id(ra),kt.getUniformLocation($i,ra),pi))}else Li(Ra,new Ln(pi.name,nr.id(pi.name),kt.getUniformLocation($i,pi.name),pi));var ki=kt.getProgramParameter($i,vt);Gn.profile&&($n.stats.attributesCount=ki);var _i=$n.attributes;for(oa=0;oa<ki;++oa)pi=kt.getActiveAttrib($i,oa),pi&&Li(_i,new Ln(pi.name,nr.id(pi.name),kt.getAttribLocation($i,pi.name),pi))}Gn.profile&&(Xr.getMaxUniformsCount=function(){var $n=0;return zi.forEach(function(Xn){Xn.stats.uniformsCount>$n&&($n=Xn.stats.uniformsCount)}),$n},Xr.getMaxAttributesCount=function(){var $n=0;return zi.forEach(function(Xn){Xn.stats.attributesCount>$n&&($n=Xn.stats.attributesCount)}),$n});function Fi(){vi={},fi={};for(var $n=0;$n<zi.length;++$n)Yi(zi[$n],null,zi[$n].attributes.map(function(Xn){return[Xn.location,Xn.name]}))}return{clear:function(){var Xn=kt.deleteShader.bind(kt);Lt(vi).forEach(Xn),vi={},Lt(fi).forEach(Xn),fi={},zi.forEach(function(Ui){kt.deleteProgram(Ui.program)}),zi.length=0,Hi={},Xr.shaderCount=0},program:function(Xn,Ui,oa,pi){q.command(Xn>=0,"missing vertex shader",oa),q.command(Ui>=0,"missing fragment shader",oa);var wa=Hi[Ui];wa||(wa=Hi[Ui]={});var Di=wa[Xn];if(Di&&!pi)return Di;var $i=new aa(Ui,Xn);return Xr.shaderCount++,Yi($i,oa,pi),Di||(wa[Xn]=$i),zi.push($i),$i},restore:Fi,shader:Bi,frag:-1,vert:-1}}var Rt=6408,Pt=5121,Gt=3333,ur=5126;function hr(kt,nr,Xr,Gn,vi,fi,Ln){function Li(zi){var Gi;nr.next===null?(q(vi.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Gi=Pt):(q(nr.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Gi=nr.next.colorAttachments[0].texture._texture.type,fi.oes_texture_float?(q(Gi===Pt||Gi===ur,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Gi===ur&&q(Ln.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):q(Gi===Pt,"Reading from a framebuffer is only allowed for the type 'uint8'"));var aa=0,Yi=0,Fi=Gn.framebufferWidth,$n=Gn.framebufferHeight,Xn=null;he(zi)?Xn=zi:zi&&(q.type(zi,"object","invalid arguments to regl.read()"),aa=zi.x|0,Yi=zi.y|0,q(aa>=0&&aa<Gn.framebufferWidth,"invalid x offset for regl.read"),q(Yi>=0&&Yi<Gn.framebufferHeight,"invalid y offset for regl.read"),Fi=(zi.width||Gn.framebufferWidth-aa)|0,$n=(zi.height||Gn.framebufferHeight-Yi)|0,Xn=zi.data||null),Xn&&(Gi===Pt?q(Xn instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Gi===ur&&q(Xn instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),q(Fi>0&&Fi+aa<=Gn.framebufferWidth,"invalid width for read pixels"),q($n>0&&$n+Yi<=Gn.framebufferHeight,"invalid height for read pixels"),Xr();var Ui=Fi*$n*4;return Xn||(Gi===Pt?Xn=new Uint8Array(Ui):Gi===ur&&(Xn=Xn||new Float32Array(Ui))),q.isTypedArray(Xn,"data buffer for regl.read() must be a typedarray"),q(Xn.byteLength>=Ui,"data buffer for regl.read() too small"),kt.pixelStorei(Gt,4),kt.readPixels(aa,Yi,Fi,$n,Rt,Gi,Xn),Xn}function Bi(zi){var Gi;return nr.setFBO({framebuffer:zi.framebuffer},function(){Gi=Li(zi)}),Gi}function Hi(zi){return!zi||!("framebuffer"in zi)?Li(zi):Bi(zi)}return Hi}function nn(kt){return Array.prototype.slice.call(kt)}function Yr(kt){return nn(kt).join("")}function Tn(){var kt=0,nr=[],Xr=[];function Gn(Gi){for(var aa=0;aa<Xr.length;++aa)if(Xr[aa]===Gi)return nr[aa];var Yi="g"+kt++;return nr.push(Yi),Xr.push(Gi),Yi}function vi(){var Gi=[];function aa(){Gi.push.apply(Gi,nn(arguments))}var Yi=[];function Fi(){var $n="v"+kt++;return Yi.push($n),arguments.length>0&&(Gi.push($n,"="),Gi.push.apply(Gi,nn(arguments)),Gi.push(";")),$n}return B(aa,{def:Fi,toString:function(){return Yr([Yi.length>0?"var "+Yi.join(",")+";":"",Yr(Gi)])}})}function fi(){var Gi=vi(),aa=vi(),Yi=Gi.toString,Fi=aa.toString;function $n(Xn,Ui){aa(Xn,Ui,"=",Gi.def(Xn,Ui),";")}return B(function(){Gi.apply(Gi,nn(arguments))},{def:Gi.def,entry:Gi,exit:aa,save:$n,set:function(Ui,oa,pi){$n(Ui,oa),Gi(Ui,oa,"=",pi,";")},toString:function(){return Yi()+Fi()}})}function Ln(){var Gi=Yr(arguments),aa=fi(),Yi=fi(),Fi=aa.toString,$n=Yi.toString;return B(aa,{then:function(){return aa.apply(aa,nn(arguments)),this},else:function(){return Yi.apply(Yi,nn(arguments)),this},toString:function(){var Ui=$n();return Ui&&(Ui="else{"+Ui+"}"),Yr(["if(",Gi,"){",Fi(),"}",Ui])}})}var Li=vi(),Bi={};function Hi(Gi,aa){var Yi=[];function Fi(){var pi="a"+Yi.length;return Yi.push(pi),pi}aa=aa||0;for(var $n=0;$n<aa;++$n)Fi();var Xn=fi(),Ui=Xn.toString,oa=Bi[Gi]=B(Xn,{arg:Fi,toString:function(){return Yr(["function(",Yi.join(),"){",Ui(),"}"])}});return oa}function zi(){var Gi=['"use strict";',Li,"return {"];Object.keys(Bi).forEach(function(Fi){Gi.push('"',Fi,'":',Bi[Fi].toString(),",")}),Gi.push("}");var aa=Yr(Gi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Yi=Function.apply(null,nr.concat(aa));return Yi.apply(null,Xr)}return{global:Li,link:Gn,block:vi,proc:Hi,scope:fi,cond:Ln,compile:zi}}var In="xyzw".split(""),si=5121,ni=1,Ci=2,Ji=0,ha=1,ya=2,to=3,wo=4,ta="dither",Ka="blend.enable",Ga="blend.color",ua="blend.equation",Xa="blend.func",Ea="depth.enable",ro="depth.func",Co="depth.range",iu="depth.mask",$s="colorMask",Eu="cull.enable",Ds="cull.face",qs="frontFace",vl="lineWidth",Xu="polygonOffset.enable",pc="polygonOffset.offset",Rc="sample.alpha",Ll="sample.enable",dc="sample.coverage",_f="stencil.enable",bf="stencil.mask",Ic="stencil.func",Kc="stencil.opFront",kc="stencil.opBack",zc="scissor.enable",af="scissor.box",Gl="viewport",ll="profile",ac="framebuffer",of="vert",Lc="frag",cl="elements",fl="primitive",Su="count",Xl="offset",ql="instances",Dc="vao",fh="Width",wh="Height",xf=ac+fh,gc=ac+wh,Rh=Gl+fh,jf=Gl+wh,Vc="drawingBuffer",oc=Vc+fh,tp=Vc+wh,Cd=[Xa,ua,Ic,Kc,kc,dc,Gl,af,pc],sc=34962,Pd=34963,rp=35632,np=35633,Kh=3553,ip=34067,Jh=2884,sv=3042,Bf=3024,Ih=2960,ap=2929,op=3089,uv=32823,sp=32926,up=32928,wd=5126,Qh=35664,hh=35665,Lh=35666,Ef=5124,qh=35667,fu=35668,Yf=35669,ed=35670,Wc=35671,$f=35672,Ff=35673,dh=35674,vh=35675,Sf=35676,Zf=35678,Kf=35680,lv=4,mc=1028,Nf=1029,td=2304,Rd=2305,Id=32775,Ld=32776,jc=519,Af=7680,Dd=0,uc=1,cv=32774,fv=513,Uf=36160,kf=36064,sf={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},rd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Jf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Jc={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},hv={frag:rp,vert:np},yc={cw:td,ccw:Rd};function Dh(kt){return Array.isArray(kt)||he(kt)||ys(kt)}function jh(kt){return kt.sort(function(nr,Xr){return nr===Gl?-1:Xr===Gl?1:nr<Xr?-1:1})}function lc(kt,nr,Xr,Gn){this.thisDep=kt,this.contextDep=nr,this.propDep=Xr,this.append=Gn}function Xo(kt){return kt&&!(kt.thisDep||kt.contextDep||kt.propDep)}function Al(kt){return new lc(!1,!1,!1,kt)}function ei(kt,nr){var Xr=kt.type;if(Xr===Ji){var Gn=kt.data.length;return new lc(!0,Gn>=1,Gn>=2,nr)}else if(Xr===wo){var vi=kt.data;return new lc(vi.thisDep,vi.contextDep,vi.propDep,nr)}else return new lc(Xr===to,Xr===ya,Xr===ha,nr)}var Bh=new lc(!1,!1,!1,function(){});function ph(kt,nr,Xr,Gn,vi,fi,Ln,Li,Bi,Hi,zi,Gi,aa,Yi,Fi){var $n=Hi.Record,Xn={add:32774,subtract:32778,"reverse subtract":32779};Xr.ext_blend_minmax&&(Xn.min=Id,Xn.max=Ld);var Ui=Xr.angle_instanced_arrays,oa=Xr.webgl_draw_buffers,pi={dirty:!0,profile:Fi.profile},wa={},Di=[],$i={},Si={};function Qi(sr){return sr.replace(".","_")}function Ra(sr,Pr,$r){var Zn=Qi(sr);Di.push(sr),wa[Zn]=pi[Zn]=!!$r,$i[Zn]=Pr}function co(sr,Pr,$r){var Zn=Qi(sr);Di.push(sr),Array.isArray($r)?(pi[Zn]=$r.slice(),wa[Zn]=$r.slice()):pi[Zn]=wa[Zn]=$r,Si[Zn]=Pr}Ra(ta,Bf),Ra(Ka,sv),co(Ga,"blendColor",[0,0,0,0]),co(ua,"blendEquationSeparate",[cv,cv]),co(Xa,"blendFuncSeparate",[uc,Dd,uc,Dd]),Ra(Ea,ap,!0),co(ro,"depthFunc",fv),co(Co,"depthRange",[0,1]),co(iu,"depthMask",!0),co($s,$s,[!0,!0,!0,!0]),Ra(Eu,Jh),co(Ds,"cullFace",Nf),co(qs,qs,Rd),co(vl,vl,1),Ra(Xu,uv),co(pc,"polygonOffset",[0,0]),Ra(Rc,sp),Ra(Ll,up),co(dc,"sampleCoverage",[1,!1]),Ra(_f,Ih),co(bf,"stencilMask",-1),co(Ic,"stencilFunc",[jc,0,-1]),co(Kc,"stencilOpSeparate",[mc,Af,Af,Af]),co(kc,"stencilOpSeparate",[Nf,Af,Af,Af]),Ra(zc,op),co(af,"scissor",[0,0,kt.drawingBufferWidth,kt.drawingBufferHeight]),co(Gl,Gl,[0,0,kt.drawingBufferWidth,kt.drawingBufferHeight]);var ra={gl:kt,context:aa,strings:nr,next:wa,current:pi,draw:Gi,elements:fi,buffer:vi,shader:zi,attributes:Hi.state,vao:Hi,uniforms:Bi,framebuffer:Li,extensions:Xr,timer:Yi,isBufferArgs:Dh},ki={primTypes:hu,compareFuncs:Jf,blendFuncs:sf,blendEquations:Xn,stencilOps:Jc,glTypes:go,orientationType:yc};q.optional(function(){ra.isArrayLike=$o}),oa&&(ki.backBuffer=[Nf],ki.drawBuffer=zr(Gn.maxDrawbuffers,function(sr){return sr===0?[0]:zr(sr,function(Pr){return kf+Pr})}));var _i=0;function Ua(){var sr=Tn(),Pr=sr.link,$r=sr.global;sr.id=_i++,sr.batchId="0";var Zn=Pr(ra),Vn=sr.shared={props:"a0"};Object.keys(ra).forEach(function(dn){Vn[dn]=$r.def(Zn,".",dn)}),q.optional(function(){sr.CHECK=Pr(q),sr.commandStr=q.guessCommand(),sr.command=Pr(sr.commandStr),sr.assert=function(dn,Or,pn){dn("if(!(",Or,"))",this.CHECK,".commandRaise(",Pr(pn),",",this.command,");")},ki.invalidBlendCombinations=rd});var sn=sr.next={},gn=sr.current={};Object.keys(Si).forEach(function(dn){Array.isArray(pi[dn])&&(sn[dn]=$r.def(Vn.next,".",dn),gn[dn]=$r.def(Vn.current,".",dn))});var Sn=sr.constants={};Object.keys(ki).forEach(function(dn){Sn[dn]=$r.def(JSON.stringify(ki[dn]))}),sr.invoke=function(dn,Or){switch(Or.type){case Ji:var pn=["this",Vn.context,Vn.props,sr.batchId];return dn.def(Pr(Or.data),".call(",pn.slice(0,Math.max(Or.data.length+1,4)),")");case ha:return dn.def(Vn.props,Or.data);case ya:return dn.def(Vn.context,Or.data);case to:return dn.def("this",Or.data);case wo:return Or.data.append(sr,dn),Or.data.ref}},sr.attribCache={};var Nr={};return sr.scopeAttrib=function(dn){var Or=nr.id(dn);if(Or in Nr)return Nr[Or];var pn=Hi.scope[Or];pn||(pn=Hi.scope[Or]=new $n);var ai=Nr[Or]=Pr(pn);return ai},sr}function Vo(sr){var Pr=sr.static,$r=sr.dynamic,Zn;if(ll in Pr){var Vn=!!Pr[ll];Zn=Al(function(gn,Sn){return Vn}),Zn.enable=Vn}else if(ll in $r){var sn=$r[ll];Zn=ei(sn,function(gn,Sn){return gn.invoke(Sn,sn)})}return Zn}function sa(sr,Pr){var $r=sr.static,Zn=sr.dynamic;if(ac in $r){var Vn=$r[ac];return Vn?(Vn=Li.getFramebuffer(Vn),q.command(Vn,"invalid framebuffer object"),Al(function(gn,Sn){var Nr=gn.link(Vn),dn=gn.shared;Sn.set(dn.framebuffer,".next",Nr);var Or=dn.context;return Sn.set(Or,"."+xf,Nr+".width"),Sn.set(Or,"."+gc,Nr+".height"),Nr})):Al(function(gn,Sn){var Nr=gn.shared;Sn.set(Nr.framebuffer,".next","null");var dn=Nr.context;return Sn.set(dn,"."+xf,dn+"."+oc),Sn.set(dn,"."+gc,dn+"."+tp),"null"})}else if(ac in Zn){var sn=Zn[ac];return ei(sn,function(gn,Sn){var Nr=gn.invoke(Sn,sn),dn=gn.shared,Or=dn.framebuffer,pn=Sn.def(Or,".getFramebuffer(",Nr,")");q.optional(function(){gn.assert(Sn,"!"+Nr+"||"+pn,"invalid framebuffer object")}),Sn.set(Or,".next",pn);var ai=dn.context;return Sn.set(ai,"."+xf,pn+"?"+pn+".width:"+ai+"."+oc),Sn.set(ai,"."+gc,pn+"?"+pn+".height:"+ai+"."+tp),pn})}else return null}function Fo(sr,Pr,$r){var Zn=sr.static,Vn=sr.dynamic;function sn(Nr){if(Nr in Zn){var dn=Zn[Nr];q.commandType(dn,"object","invalid "+Nr,$r.commandStr);var Or=!0,pn=dn.x|0,ai=dn.y|0,ci,Ri;return"width"in dn?(ci=dn.width|0,q.command(ci>=0,"invalid "+Nr,$r.commandStr)):Or=!1,"height"in dn?(Ri=dn.height|0,q.command(Ri>=0,"invalid "+Nr,$r.commandStr)):Or=!1,new lc(!Or&&Pr&&Pr.thisDep,!Or&&Pr&&Pr.contextDep,!Or&&Pr&&Pr.propDep,function(Ta,_a){var Sa=Ta.shared.context,Ya=ci;"width"in dn||(Ya=_a.def(Sa,".",xf,"-",pn));var ja=Ri;return"height"in dn||(ja=_a.def(Sa,".",gc,"-",ai)),[pn,ai,Ya,ja]})}else if(Nr in Vn){var Oi=Vn[Nr],Ni=ei(Oi,function(Ta,_a){var Sa=Ta.invoke(_a,Oi);q.optional(function(){Ta.assert(_a,Sa+"&&typeof "+Sa+'==="object"',"invalid "+Nr)});var Ya=Ta.shared.context,ja=_a.def(Sa,".x|0"),Xs=_a.def(Sa,".y|0"),wl=_a.def('"width" in ',Sa,"?",Sa,".width|0:","(",Ya,".",xf,"-",ja,")"),Qc=_a.def('"height" in ',Sa,"?",Sa,".height|0:","(",Ya,".",gc,"-",Xs,")");return q.optional(function(){Ta.assert(_a,wl+">=0&&"+Qc+">=0","invalid "+Nr)}),[ja,Xs,wl,Qc]});return Pr&&(Ni.thisDep=Ni.thisDep||Pr.thisDep,Ni.contextDep=Ni.contextDep||Pr.contextDep,Ni.propDep=Ni.propDep||Pr.propDep),Ni}else return Pr?new lc(Pr.thisDep,Pr.contextDep,Pr.propDep,function(Ta,_a){var Sa=Ta.shared.context;return[0,0,_a.def(Sa,".",xf),_a.def(Sa,".",gc)]}):null}var gn=sn(Gl);if(gn){var Sn=gn;gn=new lc(gn.thisDep,gn.contextDep,gn.propDep,function(Nr,dn){var Or=Sn.append(Nr,dn),pn=Nr.shared.context;return dn.set(pn,"."+Rh,Or[2]),dn.set(pn,"."+jf,Or[3]),Or})}return{viewport:gn,scissor_box:sn(af)}}function Eo(sr,Pr){var $r=sr.static,Zn=typeof $r[Lc]=="string"&&typeof $r[of]=="string";if(Zn){if(Object.keys(Pr.dynamic).length>0)return null;var Vn=Pr.static,sn=Object.keys(Vn);if(sn.length>0&&typeof Vn[sn[0]]=="number"){for(var gn=[],Sn=0;Sn<sn.length;++Sn)q(typeof Vn[sn[Sn]]=="number","must specify all vertex attribute locations when using vaos"),gn.push([Vn[sn[Sn]]|0,sn[Sn]]);return gn}}return null}function oo(sr,Pr,$r){var Zn=sr.static,Vn=sr.dynamic;function sn(Or){if(Or in Zn){var pn=nr.id(Zn[Or]);q.optional(function(){zi.shader(hv[Or],pn,q.guessCommand())});var ai=Al(function(){return pn});return ai.id=pn,ai}else if(Or in Vn){var ci=Vn[Or];return ei(ci,function(Ri,Oi){var Ni=Ri.invoke(Oi,ci),Ta=Oi.def(Ri.shared.strings,".id(",Ni,")");return q.optional(function(){Oi(Ri.shared.shader,".shader(",hv[Or],",",Ta,",",Ri.command,");")}),Ta})}return null}var gn=sn(Lc),Sn=sn(of),Nr=null,dn;return Xo(gn)&&Xo(Sn)?(Nr=zi.program(Sn.id,gn.id,null,$r),dn=Al(function(Or,pn){return Or.link(Nr)})):dn=new lc(gn&&gn.thisDep||Sn&&Sn.thisDep,gn&&gn.contextDep||Sn&&Sn.contextDep,gn&&gn.propDep||Sn&&Sn.propDep,function(Or,pn){var ai=Or.shared.shader,ci;gn?ci=gn.append(Or,pn):ci=pn.def(ai,".",Lc);var Ri;Sn?Ri=Sn.append(Or,pn):Ri=pn.def(ai,".",of);var Oi=ai+".program("+Ri+","+ci;return q.optional(function(){Oi+=","+Or.command}),pn.def(Oi+")")}),{frag:gn,vert:Sn,progVar:dn,program:Nr}}function js(sr,Pr){var $r=sr.static,Zn=sr.dynamic;function Vn(){if(cl in $r){var Or=$r[cl];Dh(Or)?Or=fi.getElements(fi.create(Or,!0)):Or&&(Or=fi.getElements(Or),q.command(Or,"invalid elements",Pr.commandStr));var pn=Al(function(ci,Ri){if(Or){var Oi=ci.link(Or);return ci.ELEMENTS=Oi,Oi}return ci.ELEMENTS=null,null});return pn.value=Or,pn}else if(cl in Zn){var ai=Zn[cl];return ei(ai,function(ci,Ri){var Oi=ci.shared,Ni=Oi.isBufferArgs,Ta=Oi.elements,_a=ci.invoke(Ri,ai),Sa=Ri.def("null"),Ya=Ri.def(Ni,"(",_a,")"),ja=ci.cond(Ya).then(Sa,"=",Ta,".createStream(",_a,");").else(Sa,"=",Ta,".getElements(",_a,");");return q.optional(function(){ci.assert(ja.else,"!"+_a+"||"+Sa,"invalid elements")}),Ri.entry(ja),Ri.exit(ci.cond(Ya).then(Ta,".destroyStream(",Sa,");")),ci.ELEMENTS=Sa,Sa})}return null}var sn=Vn();function gn(){if(fl in $r){var Or=$r[fl];return q.commandParameter(Or,hu,"invalid primitve",Pr.commandStr),Al(function(ai,ci){return hu[Or]})}else if(fl in Zn){var pn=Zn[fl];return ei(pn,function(ai,ci){var Ri=ai.constants.primTypes,Oi=ai.invoke(ci,pn);return q.optional(function(){ai.assert(ci,Oi+" in "+Ri,"invalid primitive, must be one of "+Object.keys(hu))}),ci.def(Ri,"[",Oi,"]")})}else if(sn)return Xo(sn)?sn.value?Al(function(ai,ci){return ci.def(ai.ELEMENTS,".primType")}):Al(function(){return lv}):new lc(sn.thisDep,sn.contextDep,sn.propDep,function(ai,ci){var Ri=ai.ELEMENTS;return ci.def(Ri,"?",Ri,".primType:",lv)});return null}function Sn(Or,pn){if(Or in $r){var ai=$r[Or]|0;return q.command(!pn||ai>=0,"invalid "+Or,Pr.commandStr),Al(function(Ri,Oi){return pn&&(Ri.OFFSET=ai),ai})}else if(Or in Zn){var ci=Zn[Or];return ei(ci,function(Ri,Oi){var Ni=Ri.invoke(Oi,ci);return pn&&(Ri.OFFSET=Ni,q.optional(function(){Ri.assert(Oi,Ni+">=0","invalid "+Or)})),Ni})}else if(pn&&sn)return Al(function(Ri,Oi){return Ri.OFFSET="0",0});return null}var Nr=Sn(Xl,!0);function dn(){if(Su in $r){var Or=$r[Su]|0;return q.command(typeof Or=="number"&&Or>=0,"invalid vertex count",Pr.commandStr),Al(function(){return Or})}else if(Su in Zn){var pn=Zn[Su];return ei(pn,function(Ri,Oi){var Ni=Ri.invoke(Oi,pn);return q.optional(function(){Ri.assert(Oi,"typeof "+Ni+'==="number"&&'+Ni+">=0&&"+Ni+"===("+Ni+"|0)","invalid vertex count")}),Ni})}else if(sn)if(Xo(sn)){if(sn)return Nr?new lc(Nr.thisDep,Nr.contextDep,Nr.propDep,function(Ri,Oi){var Ni=Oi.def(Ri.ELEMENTS,".vertCount-",Ri.OFFSET);return q.optional(function(){Ri.assert(Oi,Ni+">=0","invalid vertex offset/element buffer too small")}),Ni}):Al(function(Ri,Oi){return Oi.def(Ri.ELEMENTS,".vertCount")});var ai=Al(function(){return-1});return q.optional(function(){ai.MISSING=!0}),ai}else{var ci=new lc(sn.thisDep||Nr.thisDep,sn.contextDep||Nr.contextDep,sn.propDep||Nr.propDep,function(Ri,Oi){var Ni=Ri.ELEMENTS;return Ri.OFFSET?Oi.def(Ni,"?",Ni,".vertCount-",Ri.OFFSET,":-1"):Oi.def(Ni,"?",Ni,".vertCount:-1")});return q.optional(function(){ci.DYNAMIC=!0}),ci}return null}return{elements:sn,primitive:gn(),count:dn(),instances:Sn(ql,!1),offset:Nr}}function Ol(sr,Pr){var $r=sr.static,Zn=sr.dynamic,Vn={};return Di.forEach(function(sn){var gn=Qi(sn);function Sn(Nr,dn){if(sn in $r){var Or=Nr($r[sn]);Vn[gn]=Al(function(){return Or})}else if(sn in Zn){var pn=Zn[sn];Vn[gn]=ei(pn,function(ai,ci){return dn(ai,ci,ai.invoke(ci,pn))})}}switch(sn){case Eu:case Ka:case ta:case _f:case Ea:case zc:case Xu:case Rc:case Ll:case iu:return Sn(function(Nr){return q.commandType(Nr,"boolean",sn,Pr.commandStr),Nr},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,"typeof "+Or+'==="boolean"',"invalid flag "+sn,Nr.commandStr)}),Or});case ro:return Sn(function(Nr){return q.commandParameter(Nr,Jf,"invalid "+sn,Pr.commandStr),Jf[Nr]},function(Nr,dn,Or){var pn=Nr.constants.compareFuncs;return q.optional(function(){Nr.assert(dn,Or+" in "+pn,"invalid "+sn+", must be one of "+Object.keys(Jf))}),dn.def(pn,"[",Or,"]")});case Co:return Sn(function(Nr){return q.command($o(Nr)&&Nr.length===2&&typeof Nr[0]=="number"&&typeof Nr[1]=="number"&&Nr[0]<=Nr[1],"depth range is 2d array",Pr.commandStr),Nr},function(Nr,dn,Or){q.optional(function(){Nr.assert(dn,Nr.shared.isArrayLike+"("+Or+")&&"+Or+".length===2&&typeof "+Or+'[0]==="number"&&typeof '+Or+'[1]==="number"&&'+Or+"[0]<="+Or+"[1]","depth range must be a 2d array")});var pn=dn.def("+",Or,"[0]"),ai=dn.def("+",Or,"[1]");return[pn,ai]});case Xa:return Sn(function(Nr){q.commandType(Nr,"object","blend.func",Pr.commandStr);var dn="srcRGB"in Nr?Nr.srcRGB:Nr.src,Or="srcAlpha"in Nr?Nr.srcAlpha:Nr.src,pn="dstRGB"in Nr?Nr.dstRGB:Nr.dst,ai="dstAlpha"in Nr?Nr.dstAlpha:Nr.dst;return q.commandParameter(dn,sf,gn+".srcRGB",Pr.commandStr),q.commandParameter(Or,sf,gn+".srcAlpha",Pr.commandStr),q.commandParameter(pn,sf,gn+".dstRGB",Pr.commandStr),q.commandParameter(ai,sf,gn+".dstAlpha",Pr.commandStr),q.command(rd.indexOf(dn+", "+pn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+dn+", "+pn+")",Pr.commandStr),[sf[dn],sf[pn],sf[Or],sf[ai]]},function(Nr,dn,Or){var pn=Nr.constants.blendFuncs;q.optional(function(){Nr.assert(dn,Or+"&&typeof "+Or+'==="object"',"invalid blend func, must be an object")});function ai(Sa,Ya){var ja=dn.def('"',Sa,Ya,'" in ',Or,"?",Or,".",Sa,Ya,":",Or,".",Sa);return q.optional(function(){Nr.assert(dn,ja+" in "+pn,"invalid "+sn+"."+Sa+Ya+", must be one of "+Object.keys(sf))}),ja}var ci=ai("src","RGB"),Ri=ai("dst","RGB");q.optional(function(){var Sa=Nr.constants.invalidBlendCombinations;Nr.assert(dn,Sa+".indexOf("+ci+'+", "+'+Ri+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Oi=dn.def(pn,"[",ci,"]"),Ni=dn.def(pn,"[",ai("src","Alpha"),"]"),Ta=dn.def(pn,"[",Ri,"]"),_a=dn.def(pn,"[",ai("dst","Alpha"),"]");return[Oi,Ta,Ni,_a]});case ua:return Sn(function(Nr){if(typeof Nr=="string")return q.commandParameter(Nr,Xn,"invalid "+sn,Pr.commandStr),[Xn[Nr],Xn[Nr]];if(typeof Nr=="object")return q.commandParameter(Nr.rgb,Xn,sn+".rgb",Pr.commandStr),q.commandParameter(Nr.alpha,Xn,sn+".alpha",Pr.commandStr),[Xn[Nr.rgb],Xn[Nr.alpha]];q.commandRaise("invalid blend.equation",Pr.commandStr)},function(Nr,dn,Or){var pn=Nr.constants.blendEquations,ai=dn.def(),ci=dn.def(),Ri=Nr.cond("typeof ",Or,'==="string"');return q.optional(function(){function Oi(Ni,Ta,_a){Nr.assert(Ni,_a+" in "+pn,"invalid "+Ta+", must be one of "+Object.keys(Xn))}Oi(Ri.then,sn,Or),Nr.assert(Ri.else,Or+"&&typeof "+Or+'==="object"',"invalid "+sn),Oi(Ri.else,sn+".rgb",Or+".rgb"),Oi(Ri.else,sn+".alpha",Or+".alpha")}),Ri.then(ai,"=",ci,"=",pn,"[",Or,"];"),Ri.else(ai,"=",pn,"[",Or,".rgb];",ci,"=",pn,"[",Or,".alpha];"),dn(Ri),[ai,ci]});case Ga:return Sn(function(Nr){return q.command($o(Nr)&&Nr.length===4,"blend.color must be a 4d array",Pr.commandStr),zr(4,function(dn){return+Nr[dn]})},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,Nr.shared.isArrayLike+"("+Or+")&&"+Or+".length===4","blend.color must be a 4d array")}),zr(4,function(pn){return dn.def("+",Or,"[",pn,"]")})});case bf:return Sn(function(Nr){return q.commandType(Nr,"number",gn,Pr.commandStr),Nr|0},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,"typeof "+Or+'==="number"',"invalid stencil.mask")}),dn.def(Or,"|0")});case Ic:return Sn(function(Nr){q.commandType(Nr,"object",gn,Pr.commandStr);var dn=Nr.cmp||"keep",Or=Nr.ref||0,pn="mask"in Nr?Nr.mask:-1;return q.commandParameter(dn,Jf,sn+".cmp",Pr.commandStr),q.commandType(Or,"number",sn+".ref",Pr.commandStr),q.commandType(pn,"number",sn+".mask",Pr.commandStr),[Jf[dn],Or,pn]},function(Nr,dn,Or){var pn=Nr.constants.compareFuncs;q.optional(function(){function Oi(){Nr.assert(dn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Oi(Or+"&&typeof ",Or,'==="object"'),Oi('!("cmp" in ',Or,")||(",Or,".cmp in ",pn,")")});var ai=dn.def('"cmp" in ',Or,"?",pn,"[",Or,".cmp]",":",Af),ci=dn.def(Or,".ref|0"),Ri=dn.def('"mask" in ',Or,"?",Or,".mask|0:-1");return[ai,ci,Ri]});case Kc:case kc:return Sn(function(Nr){q.commandType(Nr,"object",gn,Pr.commandStr);var dn=Nr.fail||"keep",Or=Nr.zfail||"keep",pn=Nr.zpass||"keep";return q.commandParameter(dn,Jc,sn+".fail",Pr.commandStr),q.commandParameter(Or,Jc,sn+".zfail",Pr.commandStr),q.commandParameter(pn,Jc,sn+".zpass",Pr.commandStr),[sn===kc?Nf:mc,Jc[dn],Jc[Or],Jc[pn]]},function(Nr,dn,Or){var pn=Nr.constants.stencilOps;q.optional(function(){Nr.assert(dn,Or+"&&typeof "+Or+'==="object"',"invalid "+sn)});function ai(ci){return q.optional(function(){Nr.assert(dn,'!("'+ci+'" in '+Or+")||("+Or+"."+ci+" in "+pn+")","invalid "+sn+"."+ci+", must be one of "+Object.keys(Jc))}),dn.def('"',ci,'" in ',Or,"?",pn,"[",Or,".",ci,"]:",Af)}return[sn===kc?Nf:mc,ai("fail"),ai("zfail"),ai("zpass")]});case pc:return Sn(function(Nr){q.commandType(Nr,"object",gn,Pr.commandStr);var dn=Nr.factor|0,Or=Nr.units|0;return q.commandType(dn,"number",gn+".factor",Pr.commandStr),q.commandType(Or,"number",gn+".units",Pr.commandStr),[dn,Or]},function(Nr,dn,Or){q.optional(function(){Nr.assert(dn,Or+"&&typeof "+Or+'==="object"',"invalid "+sn)});var pn=dn.def(Or,".factor|0"),ai=dn.def(Or,".units|0");return[pn,ai]});case Ds:return Sn(function(Nr){var dn=0;return Nr==="front"?dn=mc:Nr==="back"&&(dn=Nf),q.command(!!dn,gn,Pr.commandStr),dn},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,Or+'==="front"||'+Or+'==="back"',"invalid cull.face")}),dn.def(Or,'==="front"?',mc,":",Nf)});case vl:return Sn(function(Nr){return q.command(typeof Nr=="number"&&Nr>=Gn.lineWidthDims[0]&&Nr<=Gn.lineWidthDims[1],"invalid line width, must be a positive number between "+Gn.lineWidthDims[0]+" and "+Gn.lineWidthDims[1],Pr.commandStr),Nr},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,"typeof "+Or+'==="number"&&'+Or+">="+Gn.lineWidthDims[0]+"&&"+Or+"<="+Gn.lineWidthDims[1],"invalid line width")}),Or});case qs:return Sn(function(Nr){return q.commandParameter(Nr,yc,gn,Pr.commandStr),yc[Nr]},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,Or+'==="cw"||'+Or+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),dn.def(Or+'==="cw"?'+td+":"+Rd)});case $s:return Sn(function(Nr){return q.command($o(Nr)&&Nr.length===4,"color.mask must be length 4 array",Pr.commandStr),Nr.map(function(dn){return!!dn})},function(Nr,dn,Or){return q.optional(function(){Nr.assert(dn,Nr.shared.isArrayLike+"("+Or+")&&"+Or+".length===4","invalid color.mask")}),zr(4,function(pn){return"!!"+Or+"["+pn+"]"})});case dc:return Sn(function(Nr){q.command(typeof Nr=="object"&&Nr,gn,Pr.commandStr);var dn="value"in Nr?Nr.value:1,Or=!!Nr.invert;return q.command(typeof dn=="number"&&dn>=0&&dn<=1,"sample.coverage.value must be a number between 0 and 1",Pr.commandStr),[dn,Or]},function(Nr,dn,Or){q.optional(function(){Nr.assert(dn,Or+"&&typeof "+Or+'==="object"',"invalid sample.coverage")});var pn=dn.def('"value" in ',Or,"?+",Or,".value:1"),ai=dn.def("!!",Or,".invert");return[pn,ai]})}}),Vn}function Yl(sr,Pr){var $r=sr.static,Zn=sr.dynamic,Vn={};return Object.keys($r).forEach(function(sn){var gn=$r[sn],Sn;if(typeof gn=="number"||typeof gn=="boolean")Sn=Al(function(){return gn});else if(typeof gn=="function"){var Nr=gn._reglType;Nr==="texture2d"||Nr==="textureCube"?Sn=Al(function(dn){return dn.link(gn)}):Nr==="framebuffer"||Nr==="framebufferCube"?(q.command(gn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+sn+'"',Pr.commandStr),Sn=Al(function(dn){return dn.link(gn.color[0])})):q.commandRaise('invalid data for uniform "'+sn+'"',Pr.commandStr)}else $o(gn)?Sn=Al(function(dn){var Or=dn.global.def("[",zr(gn.length,function(pn){return q.command(typeof gn[pn]=="number"||typeof gn[pn]=="boolean","invalid uniform "+sn,dn.commandStr),gn[pn]}),"]");return Or}):q.commandRaise('invalid or missing data for uniform "'+sn+'"',Pr.commandStr);Sn.value=gn,Vn[sn]=Sn}),Object.keys(Zn).forEach(function(sn){var gn=Zn[sn];Vn[sn]=ei(gn,function(Sn,Nr){return Sn.invoke(Nr,gn)})}),Vn}function Jo(sr,Pr){var $r=sr.static,Zn=sr.dynamic,Vn={};return Object.keys($r).forEach(function(sn){var gn=$r[sn],Sn=nr.id(sn),Nr=new $n;if(Dh(gn))Nr.state=ni,Nr.buffer=vi.getBuffer(vi.create(gn,sc,!1,!0)),Nr.type=0;else{var dn=vi.getBuffer(gn);if(dn)Nr.state=ni,Nr.buffer=dn,Nr.type=0;else if(q.command(typeof gn=="object"&&gn,"invalid data for attribute "+sn,Pr.commandStr),"constant"in gn){var Or=gn.constant;Nr.buffer="null",Nr.state=Ci,typeof Or=="number"?Nr.x=Or:(q.command($o(Or)&&Or.length>0&&Or.length<=4,"invalid constant for attribute "+sn,Pr.commandStr),In.forEach(function(Ta,_a){_a<Or.length&&(Nr[Ta]=Or[_a])}))}else{Dh(gn.buffer)?dn=vi.getBuffer(vi.create(gn.buffer,sc,!1,!0)):dn=vi.getBuffer(gn.buffer),q.command(!!dn,'missing buffer for attribute "'+sn+'"',Pr.commandStr);var pn=gn.offset|0;q.command(pn>=0,'invalid offset for attribute "'+sn+'"',Pr.commandStr);var ai=gn.stride|0;q.command(ai>=0&&ai<256,'invalid stride for attribute "'+sn+'", must be integer betweeen [0, 255]',Pr.commandStr);var ci=gn.size|0;q.command(!("size"in gn)||ci>0&&ci<=4,'invalid size for attribute "'+sn+'", must be 1,2,3,4',Pr.commandStr);var Ri=!!gn.normalized,Oi=0;"type"in gn&&(q.commandParameter(gn.type,go,"invalid type for attribute "+sn,Pr.commandStr),Oi=go[gn.type]);var Ni=gn.divisor|0;"divisor"in gn&&(q.command(Ni===0||Ui,'cannot specify divisor for attribute "'+sn+'", instancing not supported',Pr.commandStr),q.command(Ni>=0,'invalid divisor for attribute "'+sn+'"',Pr.commandStr)),q.optional(function(){var Ta=Pr.commandStr,_a=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(gn).forEach(function(Sa){q.command(_a.indexOf(Sa)>=0,'unknown parameter "'+Sa+'" for attribute pointer "'+sn+'" (valid parameters are '+_a+")",Ta)})}),Nr.buffer=dn,Nr.state=ni,Nr.size=ci,Nr.normalized=Ri,Nr.type=Oi||dn.dtype,Nr.offset=pn,Nr.stride=ai,Nr.divisor=Ni}}Vn[sn]=Al(function(Ta,_a){var Sa=Ta.attribCache;if(Sn in Sa)return Sa[Sn];var Ya={isStream:!1};return Object.keys(Nr).forEach(function(ja){Ya[ja]=Nr[ja]}),Nr.buffer&&(Ya.buffer=Ta.link(Nr.buffer),Ya.type=Ya.type||Ya.buffer+".dtype"),Sa[Sn]=Ya,Ya})}),Object.keys(Zn).forEach(function(sn){var gn=Zn[sn];function Sn(Nr,dn){var Or=Nr.invoke(dn,gn),pn=Nr.shared,ai=Nr.constants,ci=pn.isBufferArgs,Ri=pn.buffer;q.optional(function(){Nr.assert(dn,Or+"&&(typeof "+Or+'==="object"||typeof '+Or+'==="function")&&('+ci+"("+Or+")||"+Ri+".getBuffer("+Or+")||"+Ri+".getBuffer("+Or+".buffer)||"+ci+"("+Or+'.buffer)||("constant" in '+Or+"&&(typeof "+Or+'.constant==="number"||'+pn.isArrayLike+"("+Or+".constant))))",'invalid dynamic attribute "'+sn+'"')});var Oi={isStream:dn.def(!1)},Ni=new $n;Ni.state=ni,Object.keys(Ni).forEach(function(Ya){Oi[Ya]=dn.def(""+Ni[Ya])});var Ta=Oi.buffer,_a=Oi.type;dn("if(",ci,"(",Or,")){",Oi.isStream,"=true;",Ta,"=",Ri,".createStream(",sc,",",Or,");",_a,"=",Ta,".dtype;","}else{",Ta,"=",Ri,".getBuffer(",Or,");","if(",Ta,"){",_a,"=",Ta,".dtype;",'}else if("constant" in ',Or,"){",Oi.state,"=",Ci,";","if(typeof "+Or+'.constant === "number"){',Oi[In[0]],"=",Or,".constant;",In.slice(1).map(function(Ya){return Oi[Ya]}).join("="),"=0;","}else{",In.map(function(Ya,ja){return Oi[Ya]+"="+Or+".constant.length>"+ja+"?"+Or+".constant["+ja+"]:0;"}).join(""),"}}else{","if(",ci,"(",Or,".buffer)){",Ta,"=",Ri,".createStream(",sc,",",Or,".buffer);","}else{",Ta,"=",Ri,".getBuffer(",Or,".buffer);","}",_a,'="type" in ',Or,"?",ai.glTypes,"[",Or,".type]:",Ta,".dtype;",Oi.normalized,"=!!",Or,".normalized;");function Sa(Ya){dn(Oi[Ya],"=",Or,".",Ya,"|0;")}return Sa("size"),Sa("offset"),Sa("stride"),Sa("divisor"),dn("}}"),dn.exit("if(",Oi.isStream,"){",Ri,".destroyStream(",Ta,");","}"),Oi}Vn[sn]=ei(gn,Sn)}),Vn}function Tl(sr,Pr){var $r=sr.static,Zn=sr.dynamic;if(Dc in $r){var Vn=$r[Dc];return Vn!==null&&Hi.getVAO(Vn)===null&&(Vn=Hi.createVAO(Vn)),Al(function(gn){return gn.link(Hi.getVAO(Vn))})}else if(Dc in Zn){var sn=Zn[Dc];return ei(sn,function(gn,Sn){var Nr=gn.invoke(Sn,sn);return Sn.def(gn.shared.vao+".getVAO("+Nr+")")})}return null}function Lu(sr){var Pr=sr.static,$r=sr.dynamic,Zn={};return Object.keys(Pr).forEach(function(Vn){var sn=Pr[Vn];Zn[Vn]=Al(function(gn,Sn){return typeof sn=="number"||typeof sn=="boolean"?""+sn:gn.link(sn)})}),Object.keys($r).forEach(function(Vn){var sn=$r[Vn];Zn[Vn]=ei(sn,function(gn,Sn){return gn.invoke(Sn,sn)})}),Zn}function Ml(sr,Pr,$r,Zn,Vn){var sn=sr.static,gn=sr.dynamic;q.optional(function(){var Sa=[ac,of,Lc,cl,fl,Xl,Su,ql,ll,Dc].concat(Di);function Ya(ja){Object.keys(ja).forEach(function(Xs){q.command(Sa.indexOf(Xs)>=0,'unknown parameter "'+Xs+'"',Vn.commandStr)})}Ya(sn),Ya(gn)});var Sn=Eo(sr,Pr),Nr=sa(sr,Vn),dn=Fo(sr,Nr,Vn),Or=js(sr,Vn),pn=Ol(sr,Vn),ai=oo(sr,Vn,Sn);function ci(Sa){var Ya=dn[Sa];Ya&&(pn[Sa]=Ya)}ci(Gl),ci(Qi(af));var Ri=Object.keys(pn).length>0,Oi={framebuffer:Nr,draw:Or,shader:ai,state:pn,dirty:Ri,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Oi.profile=Vo(sr,Vn),Oi.uniforms=Yl($r,Vn),Oi.drawVAO=Oi.scopeVAO=Tl(sr,Vn),!Oi.drawVAO&&ai.program&&!Sn&&Xr.angle_instanced_arrays){var Ni=!0,Ta=ai.program.attributes.map(function(Sa){var Ya=Pr.static[Sa];return Ni=Ni&&!!Ya,Ya});if(Ni&&Ta.length>0){var _a=Hi.getVAO(Hi.createVAO(Ta));Oi.drawVAO=new lc(null,null,null,function(Sa,Ya){return Sa.link(_a)}),Oi.useVAO=!0}}return Sn?Oi.useVAO=!0:Oi.attributes=Jo(Pr,Vn),Oi.context=Lu(Zn,Vn),Oi}function Cl(sr,Pr,$r){var Zn=sr.shared,Vn=Zn.context,sn=sr.scope();Object.keys($r).forEach(function(gn){Pr.save(Vn,"."+gn);var Sn=$r[gn];sn(Vn,".",gn,"=",Sn.append(sr,Pr),";")}),Pr(sn)}function el(sr,Pr,$r,Zn){var Vn=sr.shared,sn=Vn.gl,gn=Vn.framebuffer,Sn;oa&&(Sn=Pr.def(Vn.extensions,".webgl_draw_buffers"));var Nr=sr.constants,dn=Nr.drawBuffer,Or=Nr.backBuffer,pn;$r?pn=$r.append(sr,Pr):pn=Pr.def(gn,".next"),Zn||Pr("if(",pn,"!==",gn,".cur){"),Pr("if(",pn,"){",sn,".bindFramebuffer(",Uf,",",pn,".framebuffer);"),oa&&Pr(Sn,".drawBuffersWEBGL(",dn,"[",pn,".colorAttachments.length]);"),Pr("}else{",sn,".bindFramebuffer(",Uf,",null);"),oa&&Pr(Sn,".drawBuffersWEBGL(",Or,");"),Pr("}",gn,".cur=",pn,";"),Zn||Pr("}")}function Dl(sr,Pr,$r){var Zn=sr.shared,Vn=Zn.gl,sn=sr.current,gn=sr.next,Sn=Zn.current,Nr=Zn.next,dn=sr.cond(Sn,".dirty");Di.forEach(function(Or){var pn=Qi(Or);if(!(pn in $r.state)){var ai,ci;if(pn in gn){ai=gn[pn],ci=sn[pn];var Ri=zr(pi[pn].length,function(Ni){return dn.def(ai,"[",Ni,"]")});dn(sr.cond(Ri.map(function(Ni,Ta){return Ni+"!=="+ci+"["+Ta+"]"}).join("||")).then(Vn,".",Si[pn],"(",Ri,");",Ri.map(function(Ni,Ta){return ci+"["+Ta+"]="+Ni}).join(";"),";"))}else{ai=dn.def(Nr,".",pn);var Oi=sr.cond(ai,"!==",Sn,".",pn);dn(Oi),pn in $i?Oi(sr.cond(ai).then(Vn,".enable(",$i[pn],");").else(Vn,".disable(",$i[pn],");"),Sn,".",pn,"=",ai,";"):Oi(Vn,".",Si[pn],"(",ai,");",Sn,".",pn,"=",ai,";")}}}),Object.keys($r.state).length===0&&dn(Sn,".dirty=false;"),Pr(dn)}function ec(sr,Pr,$r,Zn){var Vn=sr.shared,sn=sr.current,gn=Vn.current,Sn=Vn.gl;jh(Object.keys($r)).forEach(function(Nr){var dn=$r[Nr];if(!(Zn&&!Zn(dn))){var Or=dn.append(sr,Pr);if($i[Nr]){var pn=$i[Nr];Xo(dn)?Or?Pr(Sn,".enable(",pn,");"):Pr(Sn,".disable(",pn,");"):Pr(sr.cond(Or).then(Sn,".enable(",pn,");").else(Sn,".disable(",pn,");")),Pr(gn,".",Nr,"=",Or,";")}else if($o(Or)){var ai=sn[Nr];Pr(Sn,".",Si[Nr],"(",Or,");",Or.map(function(ci,Ri){return ai+"["+Ri+"]="+ci}).join(";"),";")}else Pr(Sn,".",Si[Nr],"(",Or,");",gn,".",Nr,"=",Or,";")}})}function Pl(sr,Pr){Ui&&(sr.instancing=Pr.def(sr.shared.extensions,".angle_instanced_arrays"))}function Wo(sr,Pr,$r,Zn,Vn){var sn=sr.shared,gn=sr.stats,Sn=sn.current,Nr=sn.timer,dn=$r.profile;function Or(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var pn,ai;function ci(Sa){pn=Pr.def(),Sa(pn,"=",Or(),";"),typeof Vn=="string"?Sa(gn,".count+=",Vn,";"):Sa(gn,".count++;"),Yi&&(Zn?(ai=Pr.def(),Sa(ai,"=",Nr,".getNumPendingQueries();")):Sa(Nr,".beginQuery(",gn,");"))}function Ri(Sa){Sa(gn,".cpuTime+=",Or(),"-",pn,";"),Yi&&(Zn?Sa(Nr,".pushScopeStats(",ai,",",Nr,".getNumPendingQueries(),",gn,");"):Sa(Nr,".endQuery();"))}function Oi(Sa){var Ya=Pr.def(Sn,".profile");Pr(Sn,".profile=",Sa,";"),Pr.exit(Sn,".profile=",Ya,";")}var Ni;if(dn){if(Xo(dn)){dn.enable?(ci(Pr),Ri(Pr.exit),Oi("true")):Oi("false");return}Ni=dn.append(sr,Pr),Oi(Ni)}else Ni=Pr.def(Sn,".profile");var Ta=sr.block();ci(Ta),Pr("if(",Ni,"){",Ta,"}");var _a=sr.block();Ri(_a),Pr.exit("if(",Ni,"){",_a,"}")}function tc(sr,Pr,$r,Zn,Vn){var sn=sr.shared;function gn(Nr){switch(Nr){case Qh:case qh:case Wc:return 2;case hh:case fu:case $f:return 3;case Lh:case Yf:case Ff:return 4;default:return 1}}function Sn(Nr,dn,Or){var pn=sn.gl,ai=Pr.def(Nr,".location"),ci=Pr.def(sn.attributes,"[",ai,"]"),Ri=Or.state,Oi=Or.buffer,Ni=[Or.x,Or.y,Or.z,Or.w],Ta=["buffer","normalized","offset","stride"];function _a(){Pr("if(!",ci,".buffer){",pn,".enableVertexAttribArray(",ai,");}");var Ya=Or.type,ja;if(Or.size?ja=Pr.def(Or.size,"||",dn):ja=dn,Pr("if(",ci,".type!==",Ya,"||",ci,".size!==",ja,"||",Ta.map(function(wl){return ci+"."+wl+"!=="+Or[wl]}).join("||"),"){",pn,".bindBuffer(",sc,",",Oi,".buffer);",pn,".vertexAttribPointer(",[ai,ja,Ya,Or.normalized,Or.stride,Or.offset],");",ci,".type=",Ya,";",ci,".size=",ja,";",Ta.map(function(wl){return ci+"."+wl+"="+Or[wl]+";"}).join(""),"}"),Ui){var Xs=Or.divisor;Pr("if(",ci,".divisor!==",Xs,"){",sr.instancing,".vertexAttribDivisorANGLE(",[ai,Xs],");",ci,".divisor=",Xs,";}")}}function Sa(){Pr("if(",ci,".buffer){",pn,".disableVertexAttribArray(",ai,");",ci,".buffer=null;","}if(",In.map(function(Ya,ja){return ci+"."+Ya+"!=="+Ni[ja]}).join("||"),"){",pn,".vertexAttrib4f(",ai,",",Ni,");",In.map(function(Ya,ja){return ci+"."+Ya+"="+Ni[ja]+";"}).join(""),"}")}Ri===ni?_a():Ri===Ci?Sa():(Pr("if(",Ri,"===",ni,"){"),_a(),Pr("}else{"),Sa(),Pr("}"))}Zn.forEach(function(Nr){var dn=Nr.name,Or=$r.attributes[dn],pn;if(Or){if(!Vn(Or))return;pn=Or.append(sr,Pr)}else{if(!Vn(Bh))return;var ai=sr.scopeAttrib(dn);q.optional(function(){sr.assert(Pr,ai+".state","missing attribute "+dn)}),pn={},Object.keys(new $n).forEach(function(ci){pn[ci]=Pr.def(ai,".",ci)})}Sn(sr.link(Nr),gn(Nr.info.type),pn)})}function Gs(sr,Pr,$r,Zn,Vn){for(var sn=sr.shared,gn=sn.gl,Sn,Nr=0;Nr<Zn.length;++Nr){var dn=Zn[Nr],Or=dn.name,pn=dn.info.type,ai=$r.uniforms[Or],ci=sr.link(dn),Ri=ci+".location",Oi;if(ai){if(!Vn(ai))continue;if(Xo(ai)){var Ni=ai.value;if(q.command(Ni!==null&&typeof Ni!="undefined",'missing uniform "'+Or+'"',sr.commandStr),pn===Zf||pn===Kf){q.command(typeof Ni=="function"&&(pn===Zf&&(Ni._reglType==="texture2d"||Ni._reglType==="framebuffer")||pn===Kf&&(Ni._reglType==="textureCube"||Ni._reglType==="framebufferCube")),"invalid texture for uniform "+Or,sr.commandStr);var Ta=sr.link(Ni._texture||Ni.color[0]._texture);Pr(gn,".uniform1i(",Ri,",",Ta+".bind());"),Pr.exit(Ta,".unbind();")}else if(pn===dh||pn===vh||pn===Sf){q.optional(function(){q.command($o(Ni),"invalid matrix for uniform "+Or,sr.commandStr),q.command(pn===dh&&Ni.length===4||pn===vh&&Ni.length===9||pn===Sf&&Ni.length===16,"invalid length for matrix uniform "+Or,sr.commandStr)});var _a=sr.global.def("new Float32Array(["+Array.prototype.slice.call(Ni)+"])"),Sa=2;pn===vh?Sa=3:pn===Sf&&(Sa=4),Pr(gn,".uniformMatrix",Sa,"fv(",Ri,",false,",_a,");")}else{switch(pn){case wd:q.commandType(Ni,"number","uniform "+Or,sr.commandStr),Sn="1f";break;case Qh:q.command($o(Ni)&&Ni.length===2,"uniform "+Or,sr.commandStr),Sn="2f";break;case hh:q.command($o(Ni)&&Ni.length===3,"uniform "+Or,sr.commandStr),Sn="3f";break;case Lh:q.command($o(Ni)&&Ni.length===4,"uniform "+Or,sr.commandStr),Sn="4f";break;case ed:q.commandType(Ni,"boolean","uniform "+Or,sr.commandStr),Sn="1i";break;case Ef:q.commandType(Ni,"number","uniform "+Or,sr.commandStr),Sn="1i";break;case Wc:q.command($o(Ni)&&Ni.length===2,"uniform "+Or,sr.commandStr),Sn="2i";break;case qh:q.command($o(Ni)&&Ni.length===2,"uniform "+Or,sr.commandStr),Sn="2i";break;case $f:q.command($o(Ni)&&Ni.length===3,"uniform "+Or,sr.commandStr),Sn="3i";break;case fu:q.command($o(Ni)&&Ni.length===3,"uniform "+Or,sr.commandStr),Sn="3i";break;case Ff:q.command($o(Ni)&&Ni.length===4,"uniform "+Or,sr.commandStr),Sn="4i";break;case Yf:q.command($o(Ni)&&Ni.length===4,"uniform "+Or,sr.commandStr),Sn="4i";break}Pr(gn,".uniform",Sn,"(",Ri,",",$o(Ni)?Array.prototype.slice.call(Ni):Ni,");")}continue}else Oi=ai.append(sr,Pr)}else{if(!Vn(Bh))continue;Oi=Pr.def(sn.uniforms,"[",nr.id(Or),"]")}pn===Zf?Pr("if(",Oi,"&&",Oi,'._reglType==="framebuffer"){',Oi,"=",Oi,".color[0];","}"):pn===Kf&&Pr("if(",Oi,"&&",Oi,'._reglType==="framebufferCube"){',Oi,"=",Oi,".color[0];","}"),q.optional(function(){function Qc(Of,id){sr.assert(Pr,Of,'bad data or missing for uniform "'+Or+'".  '+id)}function Bd(Of){Qc("typeof "+Oi+'==="'+Of+'"',"invalid type, expected "+Of)}function Hc(Of,id){Qc(sn.isArrayLike+"("+Oi+")&&"+Oi+".length==="+Of,"invalid vector, should have length "+Of,sr.commandStr)}function _v(Of){Qc("typeof "+Oi+'==="function"&&'+Oi+'._reglType==="texture'+(Of===Kh?"2d":"Cube")+'"',"invalid texture type",sr.commandStr)}switch(pn){case Ef:Bd("number");break;case qh:Hc(2,"number");break;case fu:Hc(3,"number");break;case Yf:Hc(4,"number");break;case wd:Bd("number");break;case Qh:Hc(2,"number");break;case hh:Hc(3,"number");break;case Lh:Hc(4,"number");break;case ed:Bd("boolean");break;case Wc:Hc(2,"boolean");break;case $f:Hc(3,"boolean");break;case Ff:Hc(4,"boolean");break;case dh:Hc(4,"number");break;case vh:Hc(9,"number");break;case Sf:Hc(16,"number");break;case Zf:_v(Kh);break;case Kf:_v(ip);break}});var Ya=1;switch(pn){case Zf:case Kf:var ja=Pr.def(Oi,"._texture");Pr(gn,".uniform1i(",Ri,",",ja,".bind());"),Pr.exit(ja,".unbind();");continue;case Ef:case ed:Sn="1i";break;case qh:case Wc:Sn="2i",Ya=2;break;case fu:case $f:Sn="3i",Ya=3;break;case Yf:case Ff:Sn="4i",Ya=4;break;case wd:Sn="1f";break;case Qh:Sn="2f",Ya=2;break;case hh:Sn="3f",Ya=3;break;case Lh:Sn="4f",Ya=4;break;case dh:Sn="Matrix2fv";break;case vh:Sn="Matrix3fv";break;case Sf:Sn="Matrix4fv";break}if(Pr(gn,".uniform",Sn,"(",Ri,","),Sn.charAt(0)==="M"){var Xs=Math.pow(pn-dh+2,2),wl=sr.global.def("new Float32Array(",Xs,")");Pr("false,(Array.isArray(",Oi,")||",Oi," instanceof Float32Array)?",Oi,":(",zr(Xs,function(Qc){return wl+"["+Qc+"]="+Oi+"["+Qc+"]"}),",",wl,")")}else Ya>1?Pr(zr(Ya,function(Qc){return Oi+"["+Qc+"]"})):Pr(Oi);Pr(");")}}function no(sr,Pr,$r,Zn){var Vn=sr.shared,sn=Vn.gl,gn=Vn.draw,Sn=Zn.draw;function Nr(){var ja=Sn.elements,Xs,wl=Pr;return ja?((ja.contextDep&&Zn.contextDynamic||ja.propDep)&&(wl=$r),Xs=ja.append(sr,wl)):Xs=wl.def(gn,".",cl),Xs&&wl("if("+Xs+")"+sn+".bindBuffer("+Pd+","+Xs+".buffer.buffer);"),Xs}function dn(){var ja=Sn.count,Xs,wl=Pr;return ja?((ja.contextDep&&Zn.contextDynamic||ja.propDep)&&(wl=$r),Xs=ja.append(sr,wl),q.optional(function(){ja.MISSING&&sr.assert(Pr,"false","missing vertex count"),ja.DYNAMIC&&sr.assert(wl,Xs+">=0","missing vertex count")})):(Xs=wl.def(gn,".",Su),q.optional(function(){sr.assert(wl,Xs+">=0","missing vertex count")})),Xs}var Or=Nr();function pn(ja){var Xs=Sn[ja];return Xs?Xs.contextDep&&Zn.contextDynamic||Xs.propDep?Xs.append(sr,$r):Xs.append(sr,Pr):Pr.def(gn,".",ja)}var ai=pn(fl),ci=pn(Xl),Ri=dn();if(typeof Ri=="number"){if(Ri===0)return}else $r("if(",Ri,"){"),$r.exit("}");var Oi,Ni;Ui&&(Oi=pn(ql),Ni=sr.instancing);var Ta=Or+".type",_a=Sn.elements&&Xo(Sn.elements);function Sa(){function ja(){$r(Ni,".drawElementsInstancedANGLE(",[ai,Ri,Ta,ci+"<<(("+Ta+"-"+si+")>>1)",Oi],");")}function Xs(){$r(Ni,".drawArraysInstancedANGLE(",[ai,ci,Ri,Oi],");")}Or?_a?ja():($r("if(",Or,"){"),ja(),$r("}else{"),Xs(),$r("}")):Xs()}function Ya(){function ja(){$r(sn+".drawElements("+[ai,Ri,Ta,ci+"<<(("+Ta+"-"+si+")>>1)"]+");")}function Xs(){$r(sn+".drawArrays("+[ai,ci,Ri]+");")}Or?_a?ja():($r("if(",Or,"){"),ja(),$r("}else{"),Xs(),$r("}")):Xs()}Ui&&(typeof Oi!="number"||Oi>=0)?typeof Oi=="string"?($r("if(",Oi,">0){"),Sa(),$r("}else if(",Oi,"<0){"),Ya(),$r("}")):Sa():Ya()}function No(sr,Pr,$r,Zn,Vn){var sn=Ua(),gn=sn.proc("body",Vn);return q.optional(function(){sn.commandStr=Pr.commandStr,sn.command=sn.link(Pr.commandStr)}),Ui&&(sn.instancing=gn.def(sn.shared.extensions,".angle_instanced_arrays")),sr(sn,gn,$r,Zn),sn.compile().body}function Os(sr,Pr,$r,Zn){Pl(sr,Pr),$r.useVAO?$r.drawVAO?Pr(sr.shared.vao,".setVAO(",$r.drawVAO.append(sr,Pr),");"):Pr(sr.shared.vao,".setVAO(",sr.shared.vao,".targetVAO);"):(Pr(sr.shared.vao,".setVAO(null);"),tc(sr,Pr,$r,Zn.attributes,function(){return!0})),Gs(sr,Pr,$r,Zn.uniforms,function(){return!0}),no(sr,Pr,Pr,$r)}function rc(sr,Pr){var $r=sr.proc("draw",1);Pl(sr,$r),Cl(sr,$r,Pr.context),el(sr,$r,Pr.framebuffer),Dl(sr,$r,Pr),ec(sr,$r,Pr.state),Wo(sr,$r,Pr,!1,!0);var Zn=Pr.shader.progVar.append(sr,$r);if($r(sr.shared.gl,".useProgram(",Zn,".program);"),Pr.shader.program)Os(sr,$r,Pr,Pr.shader.program);else{$r(sr.shared.vao,".setVAO(null);");var Vn=sr.global.def("{}"),sn=$r.def(Zn,".id"),gn=$r.def(Vn,"[",sn,"]");$r(sr.cond(gn).then(gn,".call(this,a0);").else(gn,"=",Vn,"[",sn,"]=",sr.link(function(Sn){return No(Os,sr,Pr,Sn,1)}),"(",Zn,");",gn,".call(this,a0);"))}Object.keys(Pr.state).length>0&&$r(sr.shared.current,".dirty=true;")}function _c(sr,Pr,$r,Zn){sr.batchId="a1",Pl(sr,Pr);function Vn(){return!0}tc(sr,Pr,$r,Zn.attributes,Vn),Gs(sr,Pr,$r,Zn.uniforms,Vn),no(sr,Pr,Pr,$r)}function kr(sr,Pr,$r,Zn){Pl(sr,Pr);var Vn=$r.contextDep,sn=Pr.def(),gn="a0",Sn="a1",Nr=Pr.def();sr.shared.props=Nr,sr.batchId=sn;var dn=sr.scope(),Or=sr.scope();Pr(dn.entry,"for(",sn,"=0;",sn,"<",Sn,";++",sn,"){",Nr,"=",gn,"[",sn,"];",Or,"}",dn.exit);function pn(Ta){return Ta.contextDep&&Vn||Ta.propDep}function ai(Ta){return!pn(Ta)}if($r.needsContext&&Cl(sr,Or,$r.context),$r.needsFramebuffer&&el(sr,Or,$r.framebuffer),ec(sr,Or,$r.state,pn),$r.profile&&pn($r.profile)&&Wo(sr,Or,$r,!1,!0),Zn)$r.useVAO?$r.drawVAO?pn($r.drawVAO)?Or(sr.shared.vao,".setVAO(",$r.drawVAO.append(sr,Or),");"):dn(sr.shared.vao,".setVAO(",$r.drawVAO.append(sr,dn),");"):dn(sr.shared.vao,".setVAO(",sr.shared.vao,".targetVAO);"):(dn(sr.shared.vao,".setVAO(null);"),tc(sr,dn,$r,Zn.attributes,ai),tc(sr,Or,$r,Zn.attributes,pn)),Gs(sr,dn,$r,Zn.uniforms,ai),Gs(sr,Or,$r,Zn.uniforms,pn),no(sr,dn,Or,$r);else{var ci=sr.global.def("{}"),Ri=$r.shader.progVar.append(sr,Or),Oi=Or.def(Ri,".id"),Ni=Or.def(ci,"[",Oi,"]");Or(sr.shared.gl,".useProgram(",Ri,".program);","if(!",Ni,"){",Ni,"=",ci,"[",Oi,"]=",sr.link(function(Ta){return No(_c,sr,$r,Ta,2)}),"(",Ri,");}",Ni,".call(this,a0[",sn,"],",sn,");")}}function ii(sr,Pr){var $r=sr.proc("batch",2);sr.batchId="0",Pl(sr,$r);var Zn=!1,Vn=!0;Object.keys(Pr.context).forEach(function(ci){Zn=Zn||Pr.context[ci].propDep}),Zn||(Cl(sr,$r,Pr.context),Vn=!1);var sn=Pr.framebuffer,gn=!1;sn?(sn.propDep?Zn=gn=!0:sn.contextDep&&Zn&&(gn=!0),gn||el(sr,$r,sn)):el(sr,$r,null),Pr.state.viewport&&Pr.state.viewport.propDep&&(Zn=!0);function Sn(ci){return ci.contextDep&&Zn||ci.propDep}Dl(sr,$r,Pr),ec(sr,$r,Pr.state,function(ci){return!Sn(ci)}),(!Pr.profile||!Sn(Pr.profile))&&Wo(sr,$r,Pr,!1,"a1"),Pr.contextDep=Zn,Pr.needsContext=Vn,Pr.needsFramebuffer=gn;var Nr=Pr.shader.progVar;if(Nr.contextDep&&Zn||Nr.propDep)kr(sr,$r,Pr,null);else{var dn=Nr.append(sr,$r);if($r(sr.shared.gl,".useProgram(",dn,".program);"),Pr.shader.program)kr(sr,$r,Pr,Pr.shader.program);else{$r(sr.shared.vao,".setVAO(null);");var Or=sr.global.def("{}"),pn=$r.def(dn,".id"),ai=$r.def(Or,"[",pn,"]");$r(sr.cond(ai).then(ai,".call(this,a0,a1);").else(ai,"=",Or,"[",pn,"]=",sr.link(function(ci){return No(kr,sr,Pr,ci,2)}),"(",dn,");",ai,".call(this,a0,a1);"))}}Object.keys(Pr.state).length>0&&$r(sr.shared.current,".dirty=true;")}function Hn(sr,Pr){var $r=sr.proc("scope",3);sr.batchId="a2";var Zn=sr.shared,Vn=Zn.current;Cl(sr,$r,Pr.context),Pr.framebuffer&&Pr.framebuffer.append(sr,$r),jh(Object.keys(Pr.state)).forEach(function(gn){var Sn=Pr.state[gn],Nr=Sn.append(sr,$r);$o(Nr)?Nr.forEach(function(dn,Or){$r.set(sr.next[gn],"["+Or+"]",dn)}):$r.set(Zn.next,"."+gn,Nr)}),Wo(sr,$r,Pr,!0,!0),[cl,Xl,Su,ql,fl].forEach(function(gn){var Sn=Pr.draw[gn];!Sn||$r.set(Zn.draw,"."+gn,""+Sn.append(sr,$r))}),Object.keys(Pr.uniforms).forEach(function(gn){$r.set(Zn.uniforms,"["+nr.id(gn)+"]",Pr.uniforms[gn].append(sr,$r))}),Object.keys(Pr.attributes).forEach(function(gn){var Sn=Pr.attributes[gn].append(sr,$r),Nr=sr.scopeAttrib(gn);Object.keys(new $n).forEach(function(dn){$r.set(Nr,"."+dn,Sn[dn])})}),Pr.scopeVAO&&$r.set(Zn.vao,".targetVAO",Pr.scopeVAO.append(sr,$r));function sn(gn){var Sn=Pr.shader[gn];Sn&&$r.set(Zn.shader,"."+gn,Sn.append(sr,$r))}sn(of),sn(Lc),Object.keys(Pr.state).length>0&&($r(Vn,".dirty=true;"),$r.exit(Vn,".dirty=true;")),$r("a1(",sr.shared.context,",a0,",sr.batchId,");")}function fa(sr){if(!(typeof sr!="object"||$o(sr))){for(var Pr=Object.keys(sr),$r=0;$r<Pr.length;++$r)if(rr.isDynamic(sr[Pr[$r]]))return!0;return!1}}function Do(sr,Pr,$r){var Zn=Pr.static[$r];if(!Zn||!fa(Zn))return;var Vn=sr.global,sn=Object.keys(Zn),gn=!1,Sn=!1,Nr=!1,dn=sr.global.def("{}");sn.forEach(function(pn){var ai=Zn[pn];if(rr.isDynamic(ai)){typeof ai=="function"&&(ai=Zn[pn]=rr.unbox(ai));var ci=ei(ai,null);gn=gn||ci.thisDep,Nr=Nr||ci.propDep,Sn=Sn||ci.contextDep}else{switch(Vn(dn,".",pn,"="),typeof ai){case"number":Vn(ai);break;case"string":Vn('"',ai,'"');break;case"object":Array.isArray(ai)&&Vn("[",ai.join(),"]");break;default:Vn(sr.link(ai));break}Vn(";")}});function Or(pn,ai){sn.forEach(function(ci){var Ri=Zn[ci];if(!!rr.isDynamic(Ri)){var Oi=pn.invoke(ai,Ri);ai(dn,".",ci,"=",Oi,";")}})}Pr.dynamic[$r]=new rr.DynamicVariable(wo,{thisDep:gn,contextDep:Sn,propDep:Nr,ref:dn,append:Or}),delete Pr.static[$r]}function au(sr,Pr,$r,Zn,Vn){var sn=Ua();sn.stats=sn.link(Vn),Object.keys(Pr.static).forEach(function(Sn){Do(sn,Pr,Sn)}),Cd.forEach(function(Sn){Do(sn,sr,Sn)});var gn=Ml(sr,Pr,$r,Zn,sn);return rc(sn,gn),Hn(sn,gn),ii(sn,gn),sn.compile()}return{next:wa,current:pi,procs:function(){var sr=Ua(),Pr=sr.proc("poll"),$r=sr.proc("refresh"),Zn=sr.block();Pr(Zn),$r(Zn);var Vn=sr.shared,sn=Vn.gl,gn=Vn.next,Sn=Vn.current;Zn(Sn,".dirty=false;"),el(sr,Pr),el(sr,$r,null,!0);var Nr;Ui&&(Nr=sr.link(Ui)),Xr.oes_vertex_array_object&&$r(sr.link(Xr.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var dn=0;dn<Gn.maxAttributes;++dn){var Or=$r.def(Vn.attributes,"[",dn,"]"),pn=sr.cond(Or,".buffer");pn.then(sn,".enableVertexAttribArray(",dn,");",sn,".bindBuffer(",sc,",",Or,".buffer.buffer);",sn,".vertexAttribPointer(",dn,",",Or,".size,",Or,".type,",Or,".normalized,",Or,".stride,",Or,".offset);").else(sn,".disableVertexAttribArray(",dn,");",sn,".vertexAttrib4f(",dn,",",Or,".x,",Or,".y,",Or,".z,",Or,".w);",Or,".buffer=null;"),$r(pn),Ui&&$r(Nr,".vertexAttribDivisorANGLE(",dn,",",Or,".divisor);")}return $r(sr.shared.vao,".currentVAO=null;",sr.shared.vao,".setVAO(",sr.shared.vao,".targetVAO);"),Object.keys($i).forEach(function(ai){var ci=$i[ai],Ri=Zn.def(gn,".",ai),Oi=sr.block();Oi("if(",Ri,"){",sn,".enable(",ci,")}else{",sn,".disable(",ci,")}",Sn,".",ai,"=",Ri,";"),$r(Oi),Pr("if(",Ri,"!==",Sn,".",ai,"){",Oi,"}")}),Object.keys(Si).forEach(function(ai){var ci=Si[ai],Ri=pi[ai],Oi,Ni,Ta=sr.block();if(Ta(sn,".",ci,"("),$o(Ri)){var _a=Ri.length;Oi=sr.global.def(gn,".",ai),Ni=sr.global.def(Sn,".",ai),Ta(zr(_a,function(Sa){return Oi+"["+Sa+"]"}),");",zr(_a,function(Sa){return Ni+"["+Sa+"]="+Oi+"["+Sa+"];"}).join("")),Pr("if(",zr(_a,function(Sa){return Oi+"["+Sa+"]!=="+Ni+"["+Sa+"]"}).join("||"),"){",Ta,"}")}else Oi=Zn.def(gn,".",ai),Ni=Zn.def(Sn,".",ai),Ta(Oi,");",Sn,".",ai,"=",Oi,";"),Pr("if(",Oi,"!==",Ni,"){",Ta,"}");$r(Ta)}),sr.compile()}(),compile:au}}function dv(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var vv=34918,pv=34919,jd=35007,gv=function(nr,Xr){if(!Xr.ext_disjoint_timer_query)return null;var Gn=[];function vi(){return Gn.pop()||Xr.ext_disjoint_timer_query.createQueryEXT()}function fi(oa){Gn.push(oa)}var Ln=[];function Li(oa){var pi=vi();Xr.ext_disjoint_timer_query.beginQueryEXT(jd,pi),Ln.push(pi),Fi(Ln.length-1,Ln.length,oa)}function Bi(){Xr.ext_disjoint_timer_query.endQueryEXT(jd)}function Hi(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var zi=[];function Gi(){return zi.pop()||new Hi}function aa(oa){zi.push(oa)}var Yi=[];function Fi(oa,pi,wa){var Di=Gi();Di.startQueryIndex=oa,Di.endQueryIndex=pi,Di.sum=0,Di.stats=wa,Yi.push(Di)}var $n=[],Xn=[];function Ui(){var oa,pi,wa=Ln.length;if(wa!==0){Xn.length=Math.max(Xn.length,wa+1),$n.length=Math.max($n.length,wa+1),$n[0]=0,Xn[0]=0;var Di=0;for(oa=0,pi=0;pi<Ln.length;++pi){var $i=Ln[pi];Xr.ext_disjoint_timer_query.getQueryObjectEXT($i,pv)?(Di+=Xr.ext_disjoint_timer_query.getQueryObjectEXT($i,vv),fi($i)):Ln[oa++]=$i,$n[pi+1]=Di,Xn[pi+1]=oa}for(Ln.length=oa,oa=0,pi=0;pi<Yi.length;++pi){var Si=Yi[pi],Qi=Si.startQueryIndex,Ra=Si.endQueryIndex;Si.sum+=$n[Ra]-$n[Qi];var co=Xn[Qi],ra=Xn[Ra];ra===co?(Si.stats.gpuTime+=Si.sum/1e6,aa(Si)):(Si.startQueryIndex=co,Si.endQueryIndex=ra,Yi[oa++]=Si)}Yi.length=oa}}return{beginQuery:Li,endQuery:Bi,pushScopeStats:Fi,update:Ui,getNumPendingQueries:function(){return Ln.length},clear:function(){Gn.push.apply(Gn,Ln);for(var pi=0;pi<Gn.length;pi++)Xr.ext_disjoint_timer_query.deleteQueryEXT(Gn[pi]);Ln.length=0,Gn.length=0},restore:function(){Ln.length=0,Gn.length=0}}},lp=16384,Uu=256,Fh=1024,Nh=34962,nd="webglcontextlost",gh="webglcontextrestored",mh=1,mv=2,$p=3;function yv(kt,nr){for(var Xr=0;Xr<kt.length;++Xr)if(kt[Xr]===nr)return Xr;return-1}function Bc(kt){var nr=Qt(kt);if(!nr)return null;var Xr=nr.gl,Gn=Xr.getContextAttributes(),vi=Xr.isContextLost(),fi=Ar(Xr,nr);if(!fi)return null;var Ln=tr(),Li=dv(),Bi=fi.extensions,Hi=gv(Xr,Bi),zi=Br(),Gi=Xr.drawingBufferWidth,aa=Xr.drawingBufferHeight,Yi={tick:0,time:0,viewportWidth:Gi,viewportHeight:aa,framebufferWidth:Gi,framebufferHeight:aa,drawingBufferWidth:Gi,drawingBufferHeight:aa,pixelRatio:nr.pixelRatio},Fi={},$n={elements:null,primitive:4,count:-1,offset:0,instances:-1},Xn=Zs(Xr,Bi),Ui=Ou(Xr,Li,nr,pi),oa=Ie(Xr,Bi,Xn,Li,Ui);function pi(no){return oa.destroyBuffer(no)}var wa=Nu(Xr,Bi,Ui,Li),Di=_t(Xr,Ln,Li,nr),$i=oi(Xr,Bi,Xn,function(){Ra.procs.poll()},Yi,Li,nr),Si=Jt(Xr,Bi,Xn,Li,nr),Qi=ee(Xr,Bi,Xn,$i,Si,Li),Ra=ph(Xr,Ln,Bi,Xn,Ui,wa,$i,Qi,Fi,oa,Di,$n,Yi,Hi,nr),co=hr(Xr,Qi,Ra.procs.poll,Yi,Gn,Bi,Xn),ra=Ra.next,ki=Xr.canvas,_i=[],Ua=[],Vo=[],sa=[nr.onDestroy],Fo=null;function Eo(){if(_i.length===0){Hi&&Hi.update(),Fo=null;return}Fo=ir.next(Eo),ec();for(var no=_i.length-1;no>=0;--no){var No=_i[no];No&&No(Yi,null,0)}Xr.flush(),Hi&&Hi.update()}function oo(){!Fo&&_i.length>0&&(Fo=ir.next(Eo))}function js(){Fo&&(ir.cancel(Eo),Fo=null)}function Ol(no){no.preventDefault(),vi=!0,js(),Ua.forEach(function(No){No()})}function Yl(no){Xr.getError(),vi=!1,fi.restore(),Di.restore(),Ui.restore(),$i.restore(),Si.restore(),Qi.restore(),oa.restore(),Hi&&Hi.restore(),Ra.procs.refresh(),oo(),Vo.forEach(function(No){No()})}ki&&(ki.addEventListener(nd,Ol,!1),ki.addEventListener(gh,Yl,!1));function Jo(){_i.length=0,js(),ki&&(ki.removeEventListener(nd,Ol),ki.removeEventListener(gh,Yl)),Di.clear(),Qi.clear(),Si.clear(),$i.clear(),wa.clear(),Ui.clear(),oa.clear(),Hi&&Hi.clear(),sa.forEach(function(no){no()})}function Tl(no){q(!!no,"invalid args to regl({...})"),q.type(no,"object","invalid args to regl({...})");function No(Vn){var sn=B({},Vn);delete sn.uniforms,delete sn.attributes,delete sn.context,delete sn.vao,"stencil"in sn&&sn.stencil.op&&(sn.stencil.opBack=sn.stencil.opFront=sn.stencil.op,delete sn.stencil.op);function gn(Sn){if(Sn in sn){var Nr=sn[Sn];delete sn[Sn],Object.keys(Nr).forEach(function(dn){sn[Sn+"."+dn]=Nr[dn]})}}return gn("blend"),gn("depth"),gn("cull"),gn("stencil"),gn("polygonOffset"),gn("scissor"),gn("sample"),"vao"in Vn&&(sn.vao=Vn.vao),sn}function Os(Vn){var sn={},gn={};return Object.keys(Vn).forEach(function(Sn){var Nr=Vn[Sn];rr.isDynamic(Nr)?gn[Sn]=rr.unbox(Nr,Sn):sn[Sn]=Nr}),{dynamic:gn,static:sn}}var rc=Os(no.context||{}),_c=Os(no.uniforms||{}),kr=Os(no.attributes||{}),ii=Os(No(no)),Hn={gpuTime:0,cpuTime:0,count:0},fa=Ra.compile(ii,kr,_c,rc,Hn),Do=fa.draw,au=fa.batch,sr=fa.scope,Pr=[];function $r(Vn){for(;Pr.length<Vn;)Pr.push(null);return Pr}function Zn(Vn,sn){var gn;if(vi&&q.raise("context lost"),typeof Vn=="function")return sr.call(this,null,Vn,0);if(typeof sn=="function")if(typeof Vn=="number")for(gn=0;gn<Vn;++gn)sr.call(this,null,sn,gn);else if(Array.isArray(Vn))for(gn=0;gn<Vn.length;++gn)sr.call(this,Vn[gn],sn,gn);else return sr.call(this,Vn,sn,0);else if(typeof Vn=="number"){if(Vn>0)return au.call(this,$r(Vn|0),Vn|0)}else if(Array.isArray(Vn)){if(Vn.length)return au.call(this,Vn,Vn.length)}else return Do.call(this,Vn)}return B(Zn,{stats:Hn})}var Lu=Qi.setFBO=Tl({framebuffer:rr.define.call(null,mh,"framebuffer")});function Ml(no,No){var Os=0;Ra.procs.poll();var rc=No.color;rc&&(Xr.clearColor(+rc[0]||0,+rc[1]||0,+rc[2]||0,+rc[3]||0),Os|=lp),"depth"in No&&(Xr.clearDepth(+No.depth),Os|=Uu),"stencil"in No&&(Xr.clearStencil(No.stencil|0),Os|=Fh),q(!!Os,"called regl.clear with no buffer specified"),Xr.clear(Os)}function Cl(no){if(q(typeof no=="object"&&no,"regl.clear() takes an object as input"),"framebuffer"in no)if(no.framebuffer&&no.framebuffer_reglType==="framebufferCube")for(var No=0;No<6;++No)Lu(B({framebuffer:no.framebuffer.faces[No]},no),Ml);else Lu(no,Ml);else Ml(null,no)}function el(no){q.type(no,"function","regl.frame() callback must be a function"),_i.push(no);function No(){var Os=yv(_i,no);q(Os>=0,"cannot cancel a frame twice");function rc(){var _c=yv(_i,rc);_i[_c]=_i[_i.length-1],_i.length-=1,_i.length<=0&&js()}_i[Os]=rc}return oo(),{cancel:No}}function Dl(){var no=ra.viewport,No=ra.scissor_box;no[0]=no[1]=No[0]=No[1]=0,Yi.viewportWidth=Yi.framebufferWidth=Yi.drawingBufferWidth=no[2]=No[2]=Xr.drawingBufferWidth,Yi.viewportHeight=Yi.framebufferHeight=Yi.drawingBufferHeight=no[3]=No[3]=Xr.drawingBufferHeight}function ec(){Yi.tick+=1,Yi.time=Wo(),Dl(),Ra.procs.poll()}function Pl(){Dl(),Ra.procs.refresh(),Hi&&Hi.update()}function Wo(){return(Br()-zi)/1e3}Pl();function tc(no,No){q.type(No,"function","listener callback must be a function");var Os;switch(no){case"frame":return el(No);case"lost":Os=Ua;break;case"restore":Os=Vo;break;case"destroy":Os=sa;break;default:q.raise("invalid event, must be one of frame,lost,restore,destroy")}return Os.push(No),{cancel:function(){for(var _c=0;_c<Os.length;++_c)if(Os[_c]===No){Os[_c]=Os[Os.length-1],Os.pop();return}}}}var Gs=B(Tl,{clear:Cl,prop:rr.define.bind(null,mh),context:rr.define.bind(null,mv),this:rr.define.bind(null,$p),draw:Tl({}),buffer:function(No){return Ui.create(No,Nh,!1,!1)},elements:function(No){return wa.create(No,!1)},texture:$i.create2D,cube:$i.createCube,renderbuffer:Si.create,framebuffer:Qi.create,framebufferCube:Qi.createCube,vao:oa.createVAO,attributes:Gn,frame:el,on:tc,limits:Xn,hasExtension:function(No){return Xn.extensions.indexOf(No.toLowerCase())>=0},read:co,destroy:Jo,_gl:Xr,_refresh:Pl,poll:function(){ec(),Hi&&Hi.update()},now:Wo,stats:Li});return nr.onDone(null,Gs),Gs}return Bc})},fdMe:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return he});function he(B,L){var o=L.callback;return o&&(B.dataArray=B.dataArray.map(o)),B}},fhzG:function(br,Ot,Ee){"use strict";var he=Ee("q1tI"),B=Ee("lT4e");if(typeof he=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var L=new he.Component().updater;br.exports=B(he.Component,he.isValidElement,L)},g4R6:function(br,Ot){function Ee(he,B,L){return he===he&&(L!==void 0&&(he=he<=L?he:L),B!==void 0&&(he=he>=B?he:B)),he}br.exports=Ee},gFfm:function(br,Ot){function Ee(he,B){for(var L=-1,o=he==null?0:he.length;++L<o&&B(he[L],L,he)!==!1;);return he}br.exports=Ee},gMG2:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return P});var he={},B={},L=34,o=10,e=13;function g(C){return new Function("d","return {"+C.map(function(O,w){return JSON.stringify(O)+": d["+w+'] || ""'}).join(",")+"}")}function v(C,O){var w=g(C);return function(S,I){return O(w(S),I,C)}}function p(C){var O=Object.create(null),w=[];return C.forEach(function(S){for(var I in S)I in O||w.push(O[I]=I)}),w}function c(C,O){var w=C+"",S=w.length;return S<O?new Array(O-S+1).join(0)+w:w}function h(C){return C<0?"-"+c(-C,6):C>9999?"+"+c(C,6):c(C,4)}function i(C){var O=C.getUTCHours(),w=C.getUTCMinutes(),S=C.getUTCSeconds(),I=C.getUTCMilliseconds();return isNaN(C)?"Invalid Date":h(C.getUTCFullYear(),4)+"-"+c(C.getUTCMonth()+1,2)+"-"+c(C.getUTCDate(),2)+(I?"T"+c(O,2)+":"+c(w,2)+":"+c(S,2)+"."+c(I,3)+"Z":S?"T"+c(O,2)+":"+c(w,2)+":"+c(S,2)+"Z":w||O?"T"+c(O,2)+":"+c(w,2)+"Z":"")}var r=function(C){var O=new RegExp('["'+C+`
\r]`),w=C.charCodeAt(0);function S(ne,K){var ie,de,we=I(ne,function(Re,_e){if(ie)return ie(Re,_e-1);de=Re,ie=K?v(Re,K):g(Re)});return we.columns=de||[],we}function I(ne,K){var ie=[],de=ne.length,we=0,Re=0,_e,Ue=de<=0,rt=!1;ne.charCodeAt(de-1)===o&&--de,ne.charCodeAt(de-1)===e&&--de;function Fe(){if(Ue)return B;if(rt)return rt=!1,he;var ye,Oe=we,ue;if(ne.charCodeAt(Oe)===L){for(;we++<de&&ne.charCodeAt(we)!==L||ne.charCodeAt(++we)===L;);return(ye=we)>=de?Ue=!0:(ue=ne.charCodeAt(we++))===o?rt=!0:ue===e&&(rt=!0,ne.charCodeAt(we)===o&&++we),ne.slice(Oe+1,ye-1).replace(/""/g,'"')}for(;we<de;){if((ue=ne.charCodeAt(ye=we++))===o)rt=!0;else if(ue===e)rt=!0,ne.charCodeAt(we)===o&&++we;else if(ue!==w)continue;return ne.slice(Oe,ye)}return Ue=!0,ne.slice(Oe,de)}for(;(_e=Fe())!==B;){for(var Se=[];_e!==he&&_e!==B;)Se.push(_e),_e=Fe();K&&(Se=K(Se,Re++))==null||ie.push(Se)}return ie}function j(ne,K){return ne.map(function(ie){return K.map(function(de){return Q(ie[de])}).join(C)})}function N(ne,K){return K==null&&(K=p(ne)),[K.map(Q).join(C)].concat(j(ne,K)).join(`
`)}function W(ne,K){return K==null&&(K=p(ne)),j(ne,K).join(`
`)}function H(ne){return ne.map(J).join(`
`)}function J(ne){return ne.map(Q).join(C)}function Q(ne){return ne==null?"":ne instanceof Date?i(ne):O.test(ne+="")?'"'+ne.replace(/"/g,'""')+'"':ne}return{parse:S,parseRows:I,format:N,formatBody:W,formatRows:H,formatRow:J,formatValue:Q}},n=r(","),s=n.parse,f=n.parseRows,u=n.format,d=n.formatBody,b=n.formatRows,_=n.formatRow,x=n.formatValue,M=Ee("5zYK");function P(C,O){var w=s(C);return Object(M.a)(w,O)}},h1nZ:function(br,Ot,Ee){"use strict";Ee.d(Ot,"c",function(){return Se}),Ee.d(Ot,"j",function(){return ye}),Ee.d(Ot,"d",function(){return Oe}),Ee.d(Ot,"e",function(){return ue}),Ee.d(Ot,"f",function(){return xe}),Ee.d(Ot,"b",function(){return pe}),Ee.d(Ot,"n",function(){return be}),Ee.d(Ot,"i",function(){return le}),Ee.d(Ot,"g",function(){return z}),Ee.d(Ot,"l",function(){return ae}),Ee.d(Ot,"o",function(){return V}),Ee.d(Ot,"a",function(){return re}),Ee.d(Ot,"h",function(){return te}),Ee.d(Ot,"s",function(){return v}),Ee.d(Ot,"t",function(){return il}),Ee.d(Ot,"r",function(){return Is}),Ee.d(Ot,"q",function(){return lu}),Ee.d(Ot,"p",function(){return Va}),Ee.d(Ot,"m",function(){return bu}),Ee.d(Ot,"k",function(){return nu}),Ee.d(Ot,"u",function(){return d});var he=Ee("fWQN"),B=Ee("mtLc"),L=Ee("VTBJ"),o=Ee("rePB"),e=Ee("Hel2"),g=function(Be){return Be.Normal="normal",Be.PostProcessing="post-processing",Be}({}),v=function(Be){return Be[Be.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Be[Be.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Be[Be.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Be[Be.POINTS=0]="POINTS",Be[Be.LINES=1]="LINES",Be[Be.LINE_LOOP=2]="LINE_LOOP",Be[Be.LINE_STRIP=3]="LINE_STRIP",Be[Be.TRIANGLES=4]="TRIANGLES",Be[Be.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Be[Be.TRIANGLE_FAN=6]="TRIANGLE_FAN",Be[Be.ZERO=0]="ZERO",Be[Be.ONE=1]="ONE",Be[Be.SRC_COLOR=768]="SRC_COLOR",Be[Be.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Be[Be.SRC_ALPHA=770]="SRC_ALPHA",Be[Be.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Be[Be.DST_ALPHA=772]="DST_ALPHA",Be[Be.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Be[Be.DST_COLOR=774]="DST_COLOR",Be[Be.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Be[Be.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Be[Be.FUNC_ADD=32774]="FUNC_ADD",Be[Be.BLEND_EQUATION=32777]="BLEND_EQUATION",Be[Be.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Be[Be.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Be[Be.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Be[Be.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Be[Be.MAX_EXT=32776]="MAX_EXT",Be[Be.MIN_EXT=32775]="MIN_EXT",Be[Be.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Be[Be.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Be[Be.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Be[Be.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Be[Be.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Be[Be.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Be[Be.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Be[Be.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Be[Be.BLEND_COLOR=32773]="BLEND_COLOR",Be[Be.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Be[Be.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Be[Be.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Be[Be.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Be[Be.STREAM_DRAW=35040]="STREAM_DRAW",Be[Be.STATIC_DRAW=35044]="STATIC_DRAW",Be[Be.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Be[Be.BUFFER_SIZE=34660]="BUFFER_SIZE",Be[Be.BUFFER_USAGE=34661]="BUFFER_USAGE",Be[Be.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Be[Be.FRONT=1028]="FRONT",Be[Be.BACK=1029]="BACK",Be[Be.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Be[Be.CULL_FACE=2884]="CULL_FACE",Be[Be.BLEND=3042]="BLEND",Be[Be.DITHER=3024]="DITHER",Be[Be.STENCIL_TEST=2960]="STENCIL_TEST",Be[Be.DEPTH_TEST=2929]="DEPTH_TEST",Be[Be.SCISSOR_TEST=3089]="SCISSOR_TEST",Be[Be.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Be[Be.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Be[Be.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Be[Be.NO_ERROR=0]="NO_ERROR",Be[Be.INVALID_ENUM=1280]="INVALID_ENUM",Be[Be.INVALID_VALUE=1281]="INVALID_VALUE",Be[Be.INVALID_OPERATION=1282]="INVALID_OPERATION",Be[Be.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Be[Be.CW=2304]="CW",Be[Be.CCW=2305]="CCW",Be[Be.LINE_WIDTH=2849]="LINE_WIDTH",Be[Be.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Be[Be.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Be[Be.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Be[Be.FRONT_FACE=2886]="FRONT_FACE",Be[Be.DEPTH_RANGE=2928]="DEPTH_RANGE",Be[Be.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Be[Be.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Be[Be.DEPTH_FUNC=2932]="DEPTH_FUNC",Be[Be.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Be[Be.STENCIL_FUNC=2962]="STENCIL_FUNC",Be[Be.STENCIL_FAIL=2964]="STENCIL_FAIL",Be[Be.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Be[Be.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Be[Be.STENCIL_REF=2967]="STENCIL_REF",Be[Be.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Be[Be.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Be[Be.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Be[Be.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Be[Be.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Be[Be.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Be[Be.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Be[Be.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Be[Be.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Be[Be.VIEWPORT=2978]="VIEWPORT",Be[Be.SCISSOR_BOX=3088]="SCISSOR_BOX",Be[Be.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Be[Be.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Be[Be.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Be[Be.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Be[Be.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Be[Be.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Be[Be.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Be[Be.RED_BITS=3410]="RED_BITS",Be[Be.GREEN_BITS=3411]="GREEN_BITS",Be[Be.BLUE_BITS=3412]="BLUE_BITS",Be[Be.ALPHA_BITS=3413]="ALPHA_BITS",Be[Be.DEPTH_BITS=3414]="DEPTH_BITS",Be[Be.STENCIL_BITS=3415]="STENCIL_BITS",Be[Be.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Be[Be.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Be[Be.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Be[Be.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Be[Be.SAMPLES=32937]="SAMPLES",Be[Be.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Be[Be.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Be[Be.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Be[Be.DONT_CARE=4352]="DONT_CARE",Be[Be.FASTEST=4353]="FASTEST",Be[Be.NICEST=4354]="NICEST",Be[Be.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Be[Be.BYTE=5120]="BYTE",Be[Be.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Be[Be.SHORT=5122]="SHORT",Be[Be.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Be[Be.INT=5124]="INT",Be[Be.UNSIGNED_INT=5125]="UNSIGNED_INT",Be[Be.FLOAT=5126]="FLOAT",Be[Be.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Be[Be.ALPHA=6406]="ALPHA",Be[Be.RGB=6407]="RGB",Be[Be.RGBA=6408]="RGBA",Be[Be.LUMINANCE=6409]="LUMINANCE",Be[Be.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Be[Be.RED=6403]="RED",Be[Be.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Be[Be.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Be[Be.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Be[Be.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Be[Be.VERTEX_SHADER=35633]="VERTEX_SHADER",Be[Be.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Be[Be.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Be[Be.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Be[Be.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Be[Be.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Be[Be.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Be[Be.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Be[Be.SHADER_TYPE=35663]="SHADER_TYPE",Be[Be.DELETE_STATUS=35712]="DELETE_STATUS",Be[Be.LINK_STATUS=35714]="LINK_STATUS",Be[Be.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Be[Be.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Be[Be.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Be[Be.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Be[Be.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Be[Be.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Be[Be.NEVER=512]="NEVER",Be[Be.LESS=513]="LESS",Be[Be.EQUAL=514]="EQUAL",Be[Be.LEQUAL=515]="LEQUAL",Be[Be.GREATER=516]="GREATER",Be[Be.NOTEQUAL=517]="NOTEQUAL",Be[Be.GEQUAL=518]="GEQUAL",Be[Be.ALWAYS=519]="ALWAYS",Be[Be.KEEP=7680]="KEEP",Be[Be.REPLACE=7681]="REPLACE",Be[Be.INCR=7682]="INCR",Be[Be.DECR=7683]="DECR",Be[Be.INVERT=5386]="INVERT",Be[Be.INCR_WRAP=34055]="INCR_WRAP",Be[Be.DECR_WRAP=34056]="DECR_WRAP",Be[Be.VENDOR=7936]="VENDOR",Be[Be.RENDERER=7937]="RENDERER",Be[Be.VERSION=7938]="VERSION",Be[Be.NEAREST=9728]="NEAREST",Be[Be.LINEAR=9729]="LINEAR",Be[Be.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Be[Be.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Be[Be.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Be[Be.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Be[Be.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Be[Be.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Be[Be.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Be[Be.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Be[Be.TEXTURE_2D=3553]="TEXTURE_2D",Be[Be.TEXTURE=5890]="TEXTURE",Be[Be.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Be[Be.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Be[Be.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Be[Be.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Be[Be.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Be[Be.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Be[Be.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Be[Be.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Be[Be.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Be[Be.TEXTURE0=33984]="TEXTURE0",Be[Be.TEXTURE1=33985]="TEXTURE1",Be[Be.TEXTURE2=33986]="TEXTURE2",Be[Be.TEXTURE3=33987]="TEXTURE3",Be[Be.TEXTURE4=33988]="TEXTURE4",Be[Be.TEXTURE5=33989]="TEXTURE5",Be[Be.TEXTURE6=33990]="TEXTURE6",Be[Be.TEXTURE7=33991]="TEXTURE7",Be[Be.TEXTURE8=33992]="TEXTURE8",Be[Be.TEXTURE9=33993]="TEXTURE9",Be[Be.TEXTURE10=33994]="TEXTURE10",Be[Be.TEXTURE11=33995]="TEXTURE11",Be[Be.TEXTURE12=33996]="TEXTURE12",Be[Be.TEXTURE13=33997]="TEXTURE13",Be[Be.TEXTURE14=33998]="TEXTURE14",Be[Be.TEXTURE15=33999]="TEXTURE15",Be[Be.TEXTURE16=34e3]="TEXTURE16",Be[Be.TEXTURE17=34001]="TEXTURE17",Be[Be.TEXTURE18=34002]="TEXTURE18",Be[Be.TEXTURE19=34003]="TEXTURE19",Be[Be.TEXTURE20=34004]="TEXTURE20",Be[Be.TEXTURE21=34005]="TEXTURE21",Be[Be.TEXTURE22=34006]="TEXTURE22",Be[Be.TEXTURE23=34007]="TEXTURE23",Be[Be.TEXTURE24=34008]="TEXTURE24",Be[Be.TEXTURE25=34009]="TEXTURE25",Be[Be.TEXTURE26=34010]="TEXTURE26",Be[Be.TEXTURE27=34011]="TEXTURE27",Be[Be.TEXTURE28=34012]="TEXTURE28",Be[Be.TEXTURE29=34013]="TEXTURE29",Be[Be.TEXTURE30=34014]="TEXTURE30",Be[Be.TEXTURE31=34015]="TEXTURE31",Be[Be.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Be[Be.REPEAT=10497]="REPEAT",Be[Be.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Be[Be.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Be[Be.FLOAT_VEC2=35664]="FLOAT_VEC2",Be[Be.FLOAT_VEC3=35665]="FLOAT_VEC3",Be[Be.FLOAT_VEC4=35666]="FLOAT_VEC4",Be[Be.INT_VEC2=35667]="INT_VEC2",Be[Be.INT_VEC3=35668]="INT_VEC3",Be[Be.INT_VEC4=35669]="INT_VEC4",Be[Be.BOOL=35670]="BOOL",Be[Be.BOOL_VEC2=35671]="BOOL_VEC2",Be[Be.BOOL_VEC3=35672]="BOOL_VEC3",Be[Be.BOOL_VEC4=35673]="BOOL_VEC4",Be[Be.FLOAT_MAT2=35674]="FLOAT_MAT2",Be[Be.FLOAT_MAT3=35675]="FLOAT_MAT3",Be[Be.FLOAT_MAT4=35676]="FLOAT_MAT4",Be[Be.SAMPLER_2D=35678]="SAMPLER_2D",Be[Be.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Be[Be.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Be[Be.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Be[Be.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Be[Be.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Be[Be.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Be[Be.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Be[Be.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Be[Be.COMPILE_STATUS=35713]="COMPILE_STATUS",Be[Be.LOW_FLOAT=36336]="LOW_FLOAT",Be[Be.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Be[Be.HIGH_FLOAT=36338]="HIGH_FLOAT",Be[Be.LOW_INT=36339]="LOW_INT",Be[Be.MEDIUM_INT=36340]="MEDIUM_INT",Be[Be.HIGH_INT=36341]="HIGH_INT",Be[Be.FRAMEBUFFER=36160]="FRAMEBUFFER",Be[Be.RENDERBUFFER=36161]="RENDERBUFFER",Be[Be.RGBA4=32854]="RGBA4",Be[Be.RGB5_A1=32855]="RGB5_A1",Be[Be.RGB565=36194]="RGB565",Be[Be.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Be[Be.STENCIL_INDEX=6401]="STENCIL_INDEX",Be[Be.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Be[Be.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Be[Be.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Be[Be.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Be[Be.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Be[Be.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Be[Be.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Be[Be.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Be[Be.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Be[Be.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Be[Be.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Be[Be.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Be[Be.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Be[Be.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Be[Be.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Be[Be.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Be[Be.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Be[Be.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Be[Be.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Be[Be.NONE=0]="NONE",Be[Be.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Be[Be.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Be[Be.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Be[Be.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Be[Be.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Be[Be.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Be[Be.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Be[Be.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Be[Be.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Be[Be.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Be[Be.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Be[Be.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Be[Be.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Be[Be.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Be}({}),p=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,c=e.N.camelCase,h=e.N.isNil,i=e.N.upperFirst,r=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"shaderModuleService",void 0),Object(o.a)(this,"rendererService",void 0),Object(o.a)(this,"config",void 0),Object(o.a)(this,"quad",p),Object(o.a)(this,"enabled",!0),Object(o.a)(this,"renderToScreen",!1),Object(o.a)(this,"model",void 0),Object(o.a)(this,"name",void 0),Object(o.a)(this,"optionsToUpdate",{})}return Object(B.a)(Be,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(jt){this.name=jt}},{key:"getType",value:function(){return g.PostProcessing}},{key:"init",value:function(jt,Vt){this.config=Vt,this.rendererService=jt.getContainer().rendererService,this.shaderModuleService=jt.getContainer().shaderModuleService;var gt=this.rendererService,ar=gt.createAttribute,gr=gt.createBuffer,en=gt.createModel,Vr=this.setupShaders(),on=Vr.vs,Dn=Vr.fs,di=Vr.uniforms;this.model=en({vs:on,fs:Dn,attributes:{a_Position:ar({buffer:gr({data:[-4,-4,4,-4,0,4],type:v.FLOAT}),size:2})},uniforms:Object(L.a)(Object(L.a)({u_Texture:null},di),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(jt,Vt){var gt=this,ar=jt.multiPassRenderer.getPostProcessor(),gr=this.rendererService,en=gr.useFramebuffer,Vr=gr.getViewportSize,on=gr.clear,Dn=Vr(),di=Dn.width,xi=Dn.height;en(this.renderToScreen?null:ar.getWriteFBO(),function(){on({framebuffer:ar.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var ji=Object(L.a)({u_BloomFinal:0,u_Texture:ar.getReadFBO(),u_ViewportSize:[di,xi]},gt.convertOptionsToUniforms(gt.optionsToUpdate));Vt&&(ji.u_BloomFinal=1,ji.u_Texture2=Vt),gt.model.draw({uniforms:ji})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(jt){this.enabled=jt}},{key:"setRenderToScreen",value:function(jt){this.renderToScreen=jt}},{key:"updateOptions",value:function(jt){this.optionsToUpdate=Object(L.a)(Object(L.a)({},this.optionsToUpdate),jt)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(jt){var Vt={};return Object.keys(jt).forEach(function(gt){h(jt[gt])||(Vt["u_".concat(i(c(gt)))]=jt[gt])}),Vt}}]),Be}();function n(Be){var Fr=0;switch(Be){case"vec2":case"ivec2":Fr=2;break;case"vec3":case"ivec3":Fr=3;break;case"vec4":case"ivec4":case"mat2":Fr=4;break;case"mat3":Fr=9;break;case"mat4":Fr=16;break;default:}return Fr}var s=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function f(Be){var Fr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,jt={};return Be=Be.replace(s,function(Vt,gt,ar){var gr=ar.split(":"),en=gr[0].trim(),Vr="";switch(gr.length>1&&(Vr=gr[1].trim()),gt){case"bool":Vr=Vr==="true";break;case"float":case"int":Vr=Number(Vr);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":Vr?Vr=Vr.replace("[","").replace("]","").split(",").reduce(function(on,Dn){return on.push(Number(Dn.trim())),on},[]):Vr=new Array(n(gt)).fill(0);break;default:}return jt[en]=Vr,"".concat(Fr?"uniform ":"").concat(gt," ").concat(en,`;
`)}),{content:Be,uniforms:jt}}function u(Be){var Fr=f(Be,!0),jt=Fr.content,Vt=Fr.uniforms;return jt=jt.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,function(gt,ar,gr){gr=gr.trim().replace(/^.*$/gm,function(Dn){return"uniform ".concat(Dn)});var en=f(gr),Vr=en.content,on=en.uniforms;return Object.assign(Vt,on),"".concat(ar,`{
`).concat(Vr,`
};`)}),{content:jt,uniforms:Vt}}function d(Be){var Fr={};return Be.replace(s,function(jt,Vt,gt){var ar=gt.trim();return Fr[ar]?"":(Fr[ar]=!0,"uniform ".concat(Vt," ").concat(ar,`;
`))})}var b=Ee("tJVT"),_=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function x(Be){return _.indexOf(Be)}var M=e.N.clamp,P=2,C=4,O=64,w=128,S=256,I=512,j=8192,N=16384,W=32768,H=32768*2,J=131072,Q=262144,ne=524288,K=1048576,ie=2097152,de=4194304,we=8388608,Re=16777216,_e=16777216*2;function Ue(Be,Fr){return Be=M(Math.floor(Be),0,255),Fr=M(Math.floor(Fr),0,255),256*Be+Fr}function rt(Be){var Fr=Be.color,jt=Be.radius,Vt=Be.tileX,gt=Be.tileY,ar=Be.shape,gr=Be.opacity,en=Be.stroke,Vr=Be.strokeWidth,on=Be.strokeOpacity,Dn=[],di=[],xi=[],ji=[Ue(Fr[0],Fr[1]),Ue(Fr[2],Fr[3])],ia=[Ue(en[0],en[1]),Ue(en[2],en[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(ca){var ea=Object(b.a)(ca,2),ma=ea[0],Ia=ea[1];Dn.push([].concat(ji,[(ma+1)*we+(Ia+1)*ie+x(ar)*J+jt,(Vt+512)*ne+(gt+512)*O])),di.push([].concat(ia,[Vr,on])),xi.push([gr,0,0,0])}),{packedBuffer:Dn,packedBuffer2:di,packedBuffer3:xi}}function Fe(Be,Fr){if(Be===0&&!Fr)return 0;if(Be===1&&Fr)return 4294967295;var jt=Fr?1:0,Vt=Math.floor(Be*127);return Vt*_e+jt*Re+Vt*J+jt*H+Vt*I+jt*S+Vt*P+jt}var Se={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},ye=function(Be){return Be.TOPRIGHT="topright",Be.TOPLEFT="topleft",Be.BOTTOMRIGHT="bottomright",Be.BOTTOMLEFT="bottomleft",Be.TOPCENTER="topcenter",Be.BOTTOMCENTER="bottomcenter",Be.LEFTCENTER="leftcenter",Be.RIGHTCENTER="rightcenter",Be.LEFTTOP="lefttop",Be.RIGHTTOP="righttop",Be.LEFTBOTTOM="leftbottom",Be.RIGHTBOTTOM="rightbottom",Be}({}),Oe=function(Be){return Be[Be.LNGLAT=1]="LNGLAT",Be[Be.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",Be[Be.VECTOR_TILE=3]="VECTOR_TILE",Be[Be.IDENTITY=4]="IDENTITY",Be[Be.METER_OFFSET=5]="METER_OFFSET",Be}({}),ue={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"},xe={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},Ae=function(Be){return Be.Hover="hover",Be.Click="click",Be.Select="select",Be.Active="active",Be.Drag="drag",Be}({}),pe=function(Be){return Be.normal="normal",Be.additive="additive",Be.subtractive="subtractive",Be.min="min",Be.max="max",Be.none="none",Be}({}),be=function(Be){return Be.MULTIPLE="MULTIPLE",Be.SINGLE="SINGLE",Be}({}),le=function(Be){return Be.AND="and",Be.OR="or",Be}({}),z=function(Be){return Be.INIT="init",Be.UPDATE="update",Be}({}),ae=function(Be){return Be.LINEAR="linear",Be.SEQUENTIAL="sequential",Be.POWER="power",Be.LOG="log",Be.IDENTITY="identity",Be.TIME="time",Be.QUANTILE="quantile",Be.QUANTIZE="quantize",Be.THRESHOLD="threshold",Be.CAT="cat",Be.DIVERGING="diverging",Be.CUSTOM="threshold",Be}({}),V=function(Be){return Be.CONSTANT="constant",Be.VARIABLE="variable",Be}({}),re=function(Be){return Be[Be.Attribute=0]="Attribute",Be[Be.InstancedAttribute=1]="InstancedAttribute",Be[Be.Uniform=2]="Uniform",Be}({}),te=["mapload","mapchange","mapAfterFrameChange"],q=Ee("rAM+"),ve=Ee("tS8v"),Me=Ee("yKVA"),De=Ee("879j"),ze=Ee("rxlC"),We=Ee.n(ze),He=Ee("uhBA"),$e=Ee.n(He),It=30;function Yt(Be){var Fr=Be.characterSet,jt=Be.getFontWidth,Vt=Be.fontHeight,gt=Be.buffer,ar=Be.maxCanvasWidth,gr=Be.mapping,en=gr===void 0?{}:gr,Vr=Be.xOffset,on=Vr===void 0?0:Vr,Dn=Be.yOffset,di=Dn===void 0?0:Dn,xi=0,ji=on;Array.from(Fr).forEach(function(ca,ea){if(!en[ca]){var ma=jt(ca,ea);ji+It>ar&&(ji=0,xi++),en[ca]={x:ji,y:di+xi*It,width:It,height:It,advance:ma},ji+=It}});var ia=Vt+gt*2;return{mapping:en,xOffset:ji,yOffset:di+xi*ia,canvasHeight:Br(di+(xi+1)*ia)}}function rr(Be,Fr,jt){var Vt=0,gt=0,ar=0,gr=[],en={},Vr=Object(q.a)(Be),on;try{for(Vr.s();!(on=Vr.n()).done;){var Dn=on.value;if(!en[Dn.id]){var di=Dn.size;Vt+di+Fr>jt&&(ir(en,gr,gt),Vt=0,gt=ar+gt+Fr,ar=0,gr=[]),gr.push({icon:Dn,xOffset:Vt}),Vt=Vt+di+Fr,ar=Math.max(ar,di)}}}catch(ji){Vr.e(ji)}finally{Vr.f()}gr.length>0&&ir(en,gr,gt);var xi=Br(ar+gt+Fr);return{mapping:en,canvasHeight:xi}}function ir(Be,Fr,jt){var Vt=Object(q.a)(Fr),gt;try{for(Vt.s();!(gt=Vt.n()).done;){var ar=gt.value,gr=ar.icon,en=ar.xOffset;Be[gr.id]=Object(L.a)(Object(L.a)({},gr),{},{x:en,y:jt,image:gr.image,width:gr.width,height:gr.height})}}catch(Vr){Vt.e(Vr)}finally{Vt.f()}}function Br(Be){return Math.pow(2,Math.ceil(Math.log2(Be)))}var tr=xt(),ft="sans-serif",st="normal",Tt=24,Qe=3,it=.25,zt=8,Qt=1024,Ar=1,zr=1,ct=3,ot=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function xt(){for(var Be=[],Fr=32;Fr<128;Fr++)Be.push(String.fromCharCode(Fr));return Be}function Bt(Be,Fr,jt,Vt){Be.font="".concat(Vt," ").concat(jt,"px ").concat(Fr),Be.fillStyle="black",Be.textBaseline="middle"}function Ke(Be,Fr){for(var jt=0;jt<Be.length;jt++)Fr.data[4*jt+3]=Be[jt]}var lt=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){var Vt;Object(he.a)(this,jt);for(var gt=arguments.length,ar=new Array(gt),gr=0;gr<gt;gr++)ar[gr]=arguments[gr];return Vt=Fr.call.apply(Fr,[this].concat(ar)),Object(o.a)(Object(ve.a)(Vt),"fontAtlas",void 0),Object(o.a)(Object(ve.a)(Vt),"iconFontMap",void 0),Object(o.a)(Object(ve.a)(Vt),"iconFontGlyphs",{}),Object(o.a)(Object(ve.a)(Vt),"fontOptions",void 0),Object(o.a)(Object(ve.a)(Vt),"key",void 0),Object(o.a)(Object(ve.a)(Vt),"cache",new e.b(ct)),Vt}return Object(B.a)(jt,[{key:"scale",get:function(){return zr}},{key:"canvas",get:function(){var gt=this.cache.get(this.key);return gt&&gt.data}},{key:"mapping",get:function(){var gt=this.cache.get(this.key);return gt&&gt.mapping||{}}},{key:"getCanvasByKey",value:function(gt){var ar=this.cache.get(gt);return ar&&ar.data}},{key:"getMappingByKey",value:function(gt){var ar=this.cache.get(gt);return ar&&ar.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:ft,fontWeight:st,characterSet:tr,fontSize:Tt,buffer:Qe,sdf:!0,cutoff:it,radius:zt,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(gt){var ar=this;gt.forEach(function(gr){ar.iconFontGlyphs[gr.name]=gr.unicode})}},{key:"addIconFont",value:function(gt,ar){this.iconFontMap.set(gt,ar)}},{key:"getIconFontKey",value:function(gt){return this.iconFontMap.get(gt)||gt}},{key:"getGlyph",value:function(gt){return this.iconFontGlyphs[gt]?String.fromCharCode(parseInt(this.iconFontGlyphs[gt],16)):""}},{key:"setFontOptions",value:function(gt){this.fontOptions=Object(L.a)(Object(L.a)({},this.fontOptions),gt),this.key=this.getKey();var ar=this.getNewChars(this.key,this.fontOptions.characterSet),gr=this.cache.get(this.key);if(!(gr&&ar.length===0)){var en=this.generateFontAtlas(this.key,ar,gr);this.fontAtlas=en,this.cache.set(this.key,en)}}},{key:"addFontFace",value:function(gt,ar){var gr=this,en=document.createElement("style");en.type="text/css",en.innerText=`
        @font-face{
            font-family: '`.concat(gt,`';
            src: url('`).concat(ar,`') format('woff2'),
            url('`).concat(ar,`') format('woff'),
            url('`).concat(ar,`') format('truetype');
        }`),en.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(gt),"L7text"),document.fonts.ready.then(function(){gr.emit("fontloaded",{fontFamily:gt})})}catch(Vr){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(Vr)}},document.getElementsByTagName("head")[0].appendChild(en)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(gt,ar,gr){var en=this.fontOptions,Vr=en.fontFamily,on=en.fontWeight,Dn=en.fontSize,di=en.buffer,xi=en.sdf,ji=en.radius,ia=en.cutoff,ca=en.iconfont,ea=gr&&gr.data;ea||(ea=window.document.createElement("canvas"),ea.width=Qt);var ma=ea.getContext("2d",{willReadFrequently:!0});Bt(ma,Vr,Dn,on);var Ia=Yt(Object(L.a)({getFontWidth:function(Es){return ma.measureText(Es).width},fontHeight:Dn*zr,buffer:di,characterSet:ar,maxCanvasWidth:Qt},gr&&{mapping:gr.mapping,xOffset:gr.xOffset,yOffset:gr.yOffset})),Fa=Ia.mapping,Io=Ia.canvasHeight,ho=Ia.xOffset,Ba=Ia.yOffset,Mo=ma.getImageData(0,0,ea.width,ea.height);if(ea.height=Io,ma.putImageData(Mo,0,0),Bt(ma,Vr,Dn,on),xi){var _o=new We.a(Dn,di,ji,ia,Vr,on),Da=ma.getImageData(0,0,_o.size,_o.size),ss=Object(q.a)(ar),ko;try{for(ss.s();!(ko=ss.n()).done;){var bo=ko.value;if(ca){var Zo=String.fromCharCode(parseInt(bo.replace("&#x","").replace(";",""),16)),As=_o.draw(Zo);Ke(As,Da)}else Ke(_o.draw(bo),Da);ma.putImageData(Da,Fa[bo].x,Fa[bo].y)}}catch(Ls){ss.e(Ls)}finally{ss.f()}}else{var us=Object(q.a)(ar),Mu;try{for(us.s();!(Mu=us.n()).done;){var Qs=Mu.value;ma.fillText(Qs,Fa[Qs].x,Fa[Qs].y+Dn*Ar)}}catch(Ls){us.e(Ls)}finally{us.f()}}return{xOffset:ho,yOffset:Ba,mapping:Fa,data:ea,width:ea.width,height:ea.height}}},{key:"getKey",value:function(){var gt=this.fontOptions,ar=gt.fontFamily,gr=gt.fontWeight;return"".concat(ar,"_").concat(gr)}},{key:"getNewChars",value:function(gt,ar){var gr=this.cache.get(gt);if(!gr)return ar;var en=[],Vr=gr.mapping,on=new Set(Object.keys(Vr)),Dn=new Set(ar);return Dn.forEach(function(di){on.has(di)||en.push(di)}),en}}]),jt}(He.EventEmitter),mt=Ee("qLMh"),qe=Ee("HaE+"),yt=3,qt=1024,Er=64,Zr=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){var Vt;Object(he.a)(this,jt);for(var gt=arguments.length,ar=new Array(gt),gr=0;gr<gt;gr++)ar[gr]=arguments[gr];return Vt=Fr.call.apply(Fr,[this].concat(ar)),Object(o.a)(Object(ve.a)(Vt),"canvasHeight",128),Object(o.a)(Object(ve.a)(Vt),"texture",void 0),Object(o.a)(Object(ve.a)(Vt),"canvas",void 0),Object(o.a)(Object(ve.a)(Vt),"iconData",void 0),Object(o.a)(Object(ve.a)(Vt),"iconMap",void 0),Object(o.a)(Object(ve.a)(Vt),"ctx",void 0),Object(o.a)(Object(ve.a)(Vt),"loadingImageCount",0),Vt}return Object(B.a)(jt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(gt,ar){var gr=this;return Object(qe.a)(Object(mt.a)().mark(function en(){var Vr,on;return Object(mt.a)().wrap(function(di){for(;;)switch(di.prev=di.next){case 0:return Vr=new Image,gr.loadingImageCount++,gr.hasImage(gt)?console.warn("Image Id already exists"):gr.iconData.push({id:gt,size:Er}),gr.updateIconMap(),di.next=6,gr.loadImage(ar);case 6:Vr=di.sent,on=gr.iconData.find(function(xi){return xi.id===gt}),on&&(on.image=Vr,on.width=Vr.width,on.height=Vr.height),gr.update();case 10:case"end":return di.stop()}},en)}))()}},{key:"addImageMini",value:function(gt,ar,gr){var en=this,Vr=gr.getSceneConfig().canvas,on=Vr.createImage();if(this.loadingImageCount++,this.hasImage(gt))throw new Error("Image Id already exists");this.iconData.push({id:gt,size:Er}),this.updateIconMap(),this.loadImageMini(ar,Vr).then(function(Dn){on=Dn;var di=en.iconData.find(function(xi){return xi.id===gt});di&&(di.image=on,di.width=on.width,di.height=on.height),en.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(gt){return this.iconMap.hasOwnProperty(gt)}},{key:"removeImage",value:function(gt){this.hasImage(gt)&&(this.iconData=this.iconData.filter(function(ar){return ar.id!==gt}),delete this.iconMap[gt],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(gt){return new Promise(function(ar,gr){if(gt instanceof HTMLImageElement){ar(gt);return}var en=new Image;en.crossOrigin="anonymous",en.onload=function(){ar(en)},en.onerror=function(){gr(new Error("Could not load image at "+gt))},en.src=gt instanceof File?URL.createObjectURL(gt):gt})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var gt=this;this.canvas.width=qt,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(ar){var gr=gt.iconMap[ar],en=gr.x,Vr=gr.y,on=gr.image,Dn=gr.width,di=Dn===void 0?64:Dn,xi=gr.height,ji=xi===void 0?64:xi,ia=Math.max(di,ji),ca=ia/Er,ea=ji/ca,ma=di/ca;on&&gt.ctx.drawImage(on,en+(Er-ma)/2,Vr+(Er-ea)/2,ma,ea)})}},{key:"updateIconMap",value:function(){var gt=rr(this.iconData,yt,qt),ar=gt.mapping,gr=gt.canvasHeight;this.iconMap=ar,this.canvasHeight=gr}},{key:"loadImageMini",value:function(gt,ar){return new Promise(function(gr,en){var Vr=ar.createImage();Vr.crossOrigin="anonymous",Vr.onload=function(){gr(Vr)},Vr.onerror=function(){en(new Error("Could not load image at "+gt))},Vr.src=gt})}}]),jt}(He.EventEmitter),Dr=Ee("IOcx"),Cr=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"viewport",void 0),Object(o.a)(this,"overridedViewProjectionMatrix",void 0),Object(o.a)(this,"viewMatrixInverse",void 0),Object(o.a)(this,"cameraPosition",void 0)}return Object(B.a)(Be,[{key:"init",value:function(){}},{key:"update",value:function(jt){this.viewport=jt,this.viewMatrixInverse=Dr.b.create(),Dr.b.invert(this.viewMatrixInverse,jt.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var jt=this.viewport.getCenter(),Vt=Object(b.a)(jt,2),gt=Vt[0],ar=Vt[1];return[gt,ar]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(jt,Vt){return this.viewport.projectFlat(jt,Vt)}},{key:"setViewProjectionMatrix",value:function(jt){this.overridedViewProjectionMatrix=jt}}]),Be}(),mn=Ee("oBTY"),xn={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},lr=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"container",void 0),Object(o.a)(this,"controlCorners",void 0),Object(o.a)(this,"controlContainer",void 0),Object(o.a)(this,"scene",void 0),Object(o.a)(this,"mapsService",void 0),Object(o.a)(this,"controls",[]),Object(o.a)(this,"unAddControls",[])}return Object(B.a)(Be,[{key:"init",value:function(jt,Vt){this.container=jt.container,this.scene=Vt,this.mapsService=Vt.mapService,this.initControlPos()}},{key:"addControl",value:function(jt,Vt){var gt=Vt.mapService;gt.map?(jt.addTo(this.scene),this.controls.push(jt)):this.unAddControls.push(jt)}},{key:"getControlByName",value:function(jt){return this.controls.find(function(Vt){return Vt.controlOption.name===jt})}},{key:"removeControl",value:function(jt){var Vt=this.controls.indexOf(jt);return Vt>-1&&this.controls.splice(Vt,1),jt.remove(),this}},{key:"addControls",value:function(){var jt=this;this.unAddControls.forEach(function(Vt){Vt.addTo(jt.scene),jt.controls.push(Vt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var jt=Object(q.a)(this.controls),Vt;try{for(jt.s();!(Vt=jt.n()).done;){var gt=Vt.value;gt.remove()}}catch(ar){jt.e(ar)}finally{jt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var jt=this.controlCorners={},Vt="l7-",gt=this.controlContainer=e.a.create("div",Vt+"control-container",this.container);function ar(){var en=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Vr=en.map(function(on){return Vt+on}).join(" ");jt[en.filter(function(on){return!["row","column"].includes(on)}).join("")]=e.a.create("div",Vr,gt)}function gr(en){var Vr=en.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat(Object(mn.a)(Vr),[xn[en]])}Object.values(ye).forEach(function(en){ar(gr(en))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var jt in this.controlCorners)this.controlCorners[jt]&&e.a.remove(this.controlCorners[jt]);this.controlContainer&&e.a.remove(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var jt=this,Vt=window.MutationObserver;if(!!Vt)for(var gt=0,ar=Object.keys(this.controlCorners);gt<ar.length;gt++){var gr=ar[gt],en=gr.match(/^(top|bottom)(left|right)$/);en&&function(){var Vr=Object(b.a)(en,3),on=Vr[1],Dn=Vr[2],di=jt.controlCorners["".concat(on).concat(Dn)],xi=new Vt(function(ji){var ia=Object(b.a)(ji,1),ca=ia[0].target;di&&(di.style[on]=ca.clientHeight+"px")});xi.observe(jt.controlCorners["".concat(Dn).concat(on)],{childList:!0,attributes:!0})}()}}}]),Be}(),An=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"container",void 0),Object(o.a)(this,"scene",void 0),Object(o.a)(this,"mapsService",void 0),Object(o.a)(this,"markers",[]),Object(o.a)(this,"markerLayers",[]),Object(o.a)(this,"unAddMarkers",[]),Object(o.a)(this,"unAddMarkerLayers",[])}return Object(B.a)(Be,[{key:"addMarkerLayer",value:function(jt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(jt),jt.addTo(this.scene)):this.unAddMarkerLayers.push(jt)}},{key:"removeMarkerLayer",value:function(jt){jt.destroy(),this.markerLayers.indexOf(jt);var Vt=this.markerLayers.indexOf(jt);Vt>-1&&this.markerLayers.splice(Vt,1)}},{key:"addMarker",value:function(jt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(jt),jt.addTo(this.scene)):this.unAddMarkers.push(jt)}},{key:"addMarkers",value:function(){var jt=this;this.unAddMarkers.forEach(function(Vt){Vt.addTo(jt.scene),jt.markers.push(Vt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var jt=this;this.unAddMarkerLayers.forEach(function(Vt){jt.markerLayers.push(Vt),Vt.addTo(jt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(jt){jt.remove(),this.markers.indexOf(jt);var Vt=this.markers.indexOf(jt);Vt>-1&&this.markers.splice(Vt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(jt){this.scene=jt,this.mapsService=jt.mapService}},{key:"destroy",value:function(){this.markers.forEach(function(jt){jt.remove()}),this.markers=[],this.markerLayers.forEach(function(jt){jt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(jt){jt.destroy()}}]),Be}(),On=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"scene",void 0),Object(o.a)(this,"mapsService",void 0),Object(o.a)(this,"popups",[]),Object(o.a)(this,"unAddPopups",[])}return Object(B.a)(Be,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(jt){jt!=null&&jt.isOpen()&&jt.remove();var Vt=this.popups.indexOf(jt);Vt>-1&&this.popups.splice(Vt,1);var gt=this.unAddPopups.indexOf(jt);gt>-1&&this.unAddPopups.splice(gt,1)}},{key:"destroy",value:function(){this.popups.forEach(function(jt){return jt.remove()})}},{key:"addPopup",value:function(jt){var Vt=this;jt&&jt.getOptions().autoClose&&[].concat(Object(mn.a)(this.popups),Object(mn.a)(this.unAddPopups)).forEach(function(gt){gt.getOptions().autoClose&&Vt.removePopup(gt)}),this.isMarkerReady?(jt.addTo(this.scene),this.popups.push(jt)):this.unAddPopups.push(jt),jt.on("close",function(){Vt.removePopup(jt)})}},{key:"initPopup",value:function(){var jt=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(Vt){jt.addPopup(Vt),jt.unAddPopups=[]})}},{key:"init",value:function(jt){this.scene=jt,this.mapsService=jt.mapService}}]),Be}(),Mt={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},er=Mt,$t=e.N.merge,Tr={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Mr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:le.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},Hr=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"sceneConfigCache",{}),Object(o.a)(this,"layerConfigCache",{}),Object(o.a)(this,"layerAttributeConfigCache",{})}return Object(B.a)(Be,[{key:"getSceneConfig",value:function(jt){return this.sceneConfigCache[jt]}},{key:"getSceneWarninfo",value:function(jt){return er[jt]}},{key:"setSceneConfig",value:function(jt,Vt){this.sceneConfigCache[jt]=Object(L.a)(Object(L.a)({},Tr),Vt)}},{key:"getLayerConfig",value:function(jt){return this.layerConfigCache[jt]}},{key:"setLayerConfig",value:function(jt,Vt,gt){this.layerConfigCache[Vt]=Object(L.a)({},$t({},this.sceneConfigCache[jt],Mr,gt))}},{key:"getAttributeConfig",value:function(jt){return this.layerAttributeConfigCache[jt]}},{key:"setAttributeConfig",value:function(jt,Vt){this.layerAttributeConfigCache[jt]=Object(L.a)(Object(L.a)({},this.layerAttributeConfigCache[jt]),Vt)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),Be}(),wr=Math.PI/180,Ur=512,fn=4003e4;function tn(Be){var Fr=Be.latitude,jt=Fr===void 0?0:Fr,Vt=Be.zoom,gt=Vt===void 0?0:Vt,ar=Be.scale,gr=Be.highPrecision,en=gr===void 0?!1:gr,Vr=Be.flipY,on=Vr===void 0?!1:Vr;ar=ar!==void 0?ar:Math.pow(2,gt);var Dn={},di=Ur*ar,xi=Math.cos(jt*wr),ji=di/360,ia=ji/xi,ca=di/fn/xi;if(Dn.pixelsPerMeter=[ca,-ca,ca],Dn.metersPerPixel=[1/ca,-1/ca,1/ca],Dn.pixelsPerDegree=[ji,-ia,ca],Dn.degreesPerPixel=[1/ji,-1/ia,1/ca],en){var ea=wr*Math.tan(jt*wr)/xi,ma=ji*ea/2,Ia=di/fn*ea,Fa=Ia/ia*ca;Dn.pixelsPerDegree2=[0,-ma,Ia],Dn.pixelsPerMeter2=[Fa,0,Fa],on&&(Dn.pixelsPerDegree2[1]=-Dn.pixelsPerDegree2[1],Dn.pixelsPerMeter2[1]=-Dn.pixelsPerMeter2[1])}return on&&(Dn.pixelsPerMeter[1]=-Dn.pixelsPerMeter[1],Dn.metersPerPixel[1]=-Dn.metersPerPixel[1],Dn.pixelsPerDegree[1]=-Dn.pixelsPerDegree[1],Dn.degreesPerPixel[1]=-Dn.degreesPerPixel[1]),Dn}var Rr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Nn=function(){function Be(Fr){Object(he.a)(this,Be),Object(o.a)(this,"needRefresh",!0),Object(o.a)(this,"coordinateSystem",void 0),Object(o.a)(this,"viewportCenter",void 0),Object(o.a)(this,"viewportCenterProjection",void 0),Object(o.a)(this,"pixelsPerDegree",void 0),Object(o.a)(this,"pixelsPerDegree2",void 0),Object(o.a)(this,"pixelsPerMeter",void 0),this.cameraService=Fr}return Object(B.a)(Be,[{key:"refresh",value:function(jt){var Vt=this.cameraService.getZoom(),gt=jt||this.cameraService.getCenter(),ar=tn({latitude:gt[1],zoom:Vt}),gr=ar.pixelsPerMeter,en=ar.pixelsPerDegree;this.viewportCenter=gt,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=gr,this.pixelsPerDegree=en,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Oe.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Oe.LNGLAT_OFFSET&&this.calculateLnglatOffset(gt,Vt),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(jt){this.coordinateSystem=jt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(jt,Vt,gt,ar){var gr=tn({latitude:jt[1],zoom:Vt,scale:gt,flipY:ar,highPrecision:!0}),en=gr.pixelsPerMeter,Vr=gr.pixelsPerDegree,on=gr.pixelsPerDegree2,Dn=this.cameraService.getViewMatrix(),di=this.cameraService.getProjectionMatrix(),xi=Dr.b.multiply([],di,Dn),ji=this.cameraService.projectFlat([Math.fround(jt[0]),Math.fround(jt[1])],Math.pow(2,Vt));this.viewportCenterProjection=Dr.e.transformMat4([],[ji[0],ji[1],0,1],xi),Dn=this.cameraService.getViewMatrixUncentered()||Dn,xi=Dr.b.multiply([],di,Dn),xi=Dr.b.multiply([],xi,Rr),this.cameraService.setViewProjectionMatrix(xi),this.pixelsPerMeter=en,this.pixelsPerDegree=Vr,this.pixelsPerDegree2=on}}]),Be}(),En=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){var Vt;Object(he.a)(this,jt);for(var gt=arguments.length,ar=new Array(gt),gr=0;gr<gt;gr++)ar[gr]=arguments[gr];return Vt=Fr.call.apply(Fr,[this].concat(ar)),Object(o.a)(Object(ve.a)(Vt),"renderMap",new Map),Object(o.a)(Object(ve.a)(Vt),"enable",!1),Object(o.a)(Object(ve.a)(Vt),"renderEnable",!1),Object(o.a)(Object(ve.a)(Vt),"cacheLogs",{}),Vt}return Object(B.a)(jt,[{key:"setEnable",value:function(gt){this.enable=!!gt}},{key:"log",value:function(gt,ar){var gr=this;if(!!this.enable){var en=gt.split("."),Vr=null;en.forEach(function(on,Dn){Vr!==null?(Vr[on]||(Vr[on]={}),Dn!==en.length-1&&(Vr=Vr[on])):(gr.cacheLogs[on]||(gr.cacheLogs[on]={}),Dn!==en.length-1&&(Vr=gr.cacheLogs[on])),Dn===en.length-1&&(Vr[on]=Object(L.a)(Object(L.a)({time:Date.now()},Vr[on]),ar))})}}},{key:"getLog",value:function(gt){var ar=this;switch(typeof gt){case"string":return this.cacheLogs[gt];case"object":return gt.map(function(gr){return ar.cacheLogs[gr]}).filter(function(gr){return gr!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(gt){delete this.cacheLogs[gt]}},{key:"generateRenderUid",value:function(){return this.renderEnable?Object(e.H)():""}},{key:"renderDebug",value:function(gt){this.renderEnable=gt}},{key:"renderStart",value:function(gt){if(!(!this.renderEnable||!this.enable)){var ar=this.renderMap.get(gt)||{};this.renderMap.set(gt,Object(L.a)(Object(L.a)({},ar),{},{renderUid:gt,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(gt){if(!(!this.renderEnable||!this.enable)){var ar=this.renderMap.get(gt);if(ar){var gr=ar.renderStart,en=Date.now();this.emit("renderEnd",Object(L.a)(Object(L.a)({},ar),{},{renderEnd:en,renderDuration:en-gr})),this.renderMap.delete(gt)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),jt}(He.EventEmitter),Yn=Ee("yLV6"),wi=Ee.n(Yn),$a={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},so=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(Vt){var gt;return Object(he.a)(this,jt),gt=Fr.call(this),Object(o.a)(Object(ve.a)(gt),"indragging",!1),Object(o.a)(Object(ve.a)(gt),"hammertime",void 0),Object(o.a)(Object(ve.a)(gt),"lastClickTime",0),Object(o.a)(Object(ve.a)(gt),"lastClickXY",[-1,-1]),Object(o.a)(Object(ve.a)(gt),"clickTimer",void 0),Object(o.a)(Object(ve.a)(gt),"$containter",void 0),Object(o.a)(Object(ve.a)(gt),"onDrag",function(ar){var gr=gt.interactionEvent(ar);gr.type=$a[gr.type],gr.type==="dragging"?gt.indragging=!0:gt.indragging=!1,gt.emit(Ae.Drag,gr)}),Object(o.a)(Object(ve.a)(gt),"onHammer",function(ar){ar.srcEvent.stopPropagation();var gr=gt.interactionEvent(ar);gt.emit(Ae.Hover,gr)}),Object(o.a)(Object(ve.a)(gt),"onTouch",function(ar){var gr=ar.touches[0];gt.onHover({clientX:gr.clientX,clientY:gr.clientY,type:"touchstart"})}),Object(o.a)(Object(ve.a)(gt),"onTouchEnd",function(ar){if(ar.changedTouches.length>0){var gr=ar.changedTouches[0];gt.onHover({clientX:gr.clientX,clientY:gr.clientY,type:"touchend"})}}),Object(o.a)(Object(ve.a)(gt),"onTouchMove",function(ar){var gr=ar.changedTouches[0];gt.onHover({clientX:gr.clientX,clientY:gr.clientY,type:"touchmove"})}),Object(o.a)(Object(ve.a)(gt),"onHover",function(ar){var gr=ar.clientX,en=ar.clientY,Vr=gr,on=en,Dn=ar.type,di=gt.mapService.getMapContainer();if(di){var xi=di.getBoundingClientRect(),ji=xi.top,ia=xi.left;Vr=Vr-ia-di.clientLeft,on=on-ji-di.clientTop}var ca=gt.mapService.containerToLngLat([Vr,on]);if(Dn==="click"){gt.isDoubleTap(Vr,on,ca);return}if(Dn==="touch"){gt.isDoubleTap(Vr,on,ca);return}Dn!=="click"&&Dn!=="dblclick"&&gt.emit(Ae.Hover,{x:Vr,y:on,lngLat:ca,type:Dn,target:ar})}),gt.container=Vt,gt}return Object(B.a)(jt,[{key:"mapService",get:function(){return this.container.mapService}},{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Ae.Hover)}},{key:"triggerHover",value:function(gt){var ar=gt.x,gr=gt.y;this.emit(Ae.Hover,{x:ar,y:gr})}},{key:"triggerSelect",value:function(gt){this.emit(Ae.Select,{featureId:gt})}},{key:"triggerActive",value:function(gt){this.emit(Ae.Active,{featureId:gt})}},{key:"addEventListenerOnMap",value:function(){var gt=this.mapService.getMapContainer();if(gt){var ar=new wi.a.Manager(gt);ar.add(new wi.a.Tap({event:"dblclick",taps:2})),ar.add(new wi.a.Tap({event:"click"})),ar.add(new wi.a.Pan({threshold:0,pointers:0})),ar.add(new wi.a.Press({})),ar.on("dblclick click",this.onHammer),ar.on("panstart panmove panend pancancel",this.onDrag),gt.addEventListener("touchstart",this.onTouch),gt.addEventListener("touchend",this.onTouchEnd),gt.addEventListener("mousemove",this.onHover),gt.addEventListener("touchmove",this.onTouchMove),gt.addEventListener("mousedown",this.onHover,!0),gt.addEventListener("mouseup",this.onHover),gt.addEventListener("contextmenu",this.onHover),this.hammertime=ar}}},{key:"removeEventListenerOnMap",value:function(){var gt=this.mapService.getMapContainer();gt&&(gt.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),gt.removeEventListener("touchstart",this.onTouch),gt.removeEventListener("touchend",this.onTouchEnd),gt.removeEventListener("mousedown",this.onHover),gt.removeEventListener("mouseup",this.onHover),gt.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(gt){var ar=gt.type,gr=gt.pointerType,en,Vr;gr==="touch"?(Vr=Math.floor(gt.pointers[0].clientY),en=Math.floor(gt.pointers[0].clientX)):(Vr=Math.floor(gt.srcEvent.y),en=Math.floor(gt.srcEvent.x));var on=this.mapService.getMapContainer();if(on){var Dn=on.getBoundingClientRect(),di=Dn.top,xi=Dn.left;en-=xi,Vr-=di}var ji=this.mapService.containerToLngLat([en,Vr]);return{x:en,y:Vr,lngLat:ji,type:ar,target:gt.srcEvent}}},{key:"isDoubleTap",value:function(gt,ar,gr){var en=this,Vr=new Date().getTime(),on="click";Vr-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-gt)<10&&Math.abs(this.lastClickXY[1]-ar)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),on="dblclick",this.emit(Ae.Hover,{x:gt,y:ar,lngLat:gr,type:on})):(this.lastClickTime=Vr,this.lastClickXY=[gt,ar],this.clickTimer=setTimeout(function(){on="click",en.emit(Ae.Hover,{x:gt,y:ar,lngLat:gr,type:on})},400))}}]),jt}($e.a),Po=0;function Ro(Be){var Fr=Be;if(typeof Be=="string"&&(Fr=document.getElementById(Be)),Fr){var jt=document.createElement("div");return jt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,jt.id="l7-scene-".concat(Po++),jt.classList.add("l7-scene"),Fr.appendChild(jt),jt}return null}function So(Be){var Fr,jt=!0;if((Be==null||(Fr=Be.target)===null||Fr===void 0?void 0:Fr.target)instanceof HTMLElement)for(var Vt,gt=Be==null||(Vt=Be.target)===null||Vt===void 0?void 0:Vt.target;gt;){var ar,gr=Array.from(gt.classList);if(gr.includes("l7-marker")||gr.includes("l7-popup")){jt=!1;break}gt=(ar=gt)===null||ar===void 0?void 0:ar.parentElement}return jt}var Va=function(Be){return Be[Be.SAMPLED=0]="SAMPLED",Be[Be.RENDER_TARGET=1]="RENDER_TARGET",Be}({}),ws=function(){function Be(Fr){Object(he.a)(this,Be);var jt=this;Object(o.a)(this,"pickedColors",void 0),Object(o.a)(this,"pickedTileLayers",[]),Object(o.a)(this,"pickingFBO",void 0),Object(o.a)(this,"width",0),Object(o.a)(this,"height",0),Object(o.a)(this,"alreadyInPicking",!1),Object(o.a)(this,"pickBufferScale",1),Object(o.a)(this,"pickFromPickingFBO",function(){var Vt=Object(qe.a)(Object(mt.a)().mark(function gt(ar,gr){var en,Vr,on,Dn,di,xi,ji,ia,ca,ea,ma,Ia,Fa,Io,ho,Ba,Mo,_o,Da,ss,ko,bo,Zo,As,us,Mu,Qs;return Object(mt.a)().wrap(function(Es){for(;;)switch(Es.prev=Es.next){case 0:if(en=gr.x,Vr=gr.y,on=gr.lngLat,Dn=gr.type,di=gr.target,ji=!1,ia=jt.rendererService,ca=ia.readPixels,ea=ia.readPixelsAsync,ma=ia.getViewportSize,Ia=ia.queryVerdorInfo,Fa=ma(),Io=Fa.width,ho=Fa.height,Ba=ar.getLayerConfig(),Mo=Ba.enableHighlight,_o=Ba.enableSelect,Da=en*e.a.DPR,ss=Vr*e.a.DPR,!(Da>Io-1*e.a.DPR||Da<0||ss>ho-1*e.a.DPR||ss<0)){Es.next=9;break}return Es.abrupt("return",!1);case 9:if(bo=Ia()==="WebGPU",!bo){Es.next=16;break}return Es.next=13,ea({x:Math.floor(Da/jt.pickBufferScale),y:Math.floor((ho-(Vr+1)*e.a.DPR)/jt.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:jt.pickingFBO});case 13:ko=Es.sent,Es.next=17;break;case 16:ko=ca({x:Math.floor(Da/jt.pickBufferScale),y:Math.floor((ho-(Vr+1)*e.a.DPR)/jt.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:jt.pickingFBO});case 17:return jt.pickedColors=ko,ko[0]!==0||ko[1]!==0||ko[2]!==0?(Zo=Object(e.p)(ko),As=ar.layerPickService.getFeatureById(Zo),Zo!==ar.getCurrentPickId()&&Dn==="mousemove"&&(Dn="mouseenter"),us={x:en,y:Vr,type:Dn,lngLat:on,featureId:Zo,feature:As,target:di},As&&(ji=!0,ar.setCurrentPickId(Zo),jt.triggerHoverOnLayer(ar,us))):(Mu={x:en,y:Vr,lngLat:on,type:ar.getCurrentPickId()!==null&&Dn==="mousemove"?"mouseout":"un"+Dn,featureId:null,target:di,feature:null},jt.triggerHoverOnLayer(ar,Object(L.a)(Object(L.a)({},Mu),{},{type:"unpick"})),jt.triggerHoverOnLayer(ar,Mu),ar.setCurrentPickId(null)),Mo&&ar.layerPickService.highlightPickedFeature(ko),_o&&Dn==="click"&&((xi=ko)===null||xi===void 0?void 0:xi.toString())!==[0,0,0,0].toString()&&(Qs=Object(e.p)(ko),ar.getCurrentSelectedId()===null||Qs!==ar.getCurrentSelectedId()?(ar.layerPickService.selectFeature(ko),ar.setCurrentSelectedId(Qs)):(ar.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),ar.setCurrentSelectedId(null))),Es.abrupt("return",ji);case 22:case"end":return Es.stop()}},gt)}));return function(gt,ar){return Vt.apply(this,arguments)}}()),this.container=Fr}return Object(B.a)(Be,[{key:"mapService",get:function(){return this.container.mapService}},{key:"rendererService",get:function(){return this.container.rendererService}},{key:"configService",get:function(){return this.container.globalConfigService}},{key:"interactionService",get:function(){return this.container.interactionService}},{key:"layerService",get:function(){return this.container.layerService}},{key:"init",value:function(jt){var Vt=this.rendererService,gt=Vt.createTexture2D,ar=Vt.createFramebuffer,gr=Vt.getViewportSize,en=gr(),Vr=en.width,on=en.height;this.pickBufferScale=this.configService.getSceneConfig(jt).pickBufferScale||1,Vr=Math.round(Vr/this.pickBufferScale),on=Math.round(on/this.pickBufferScale);var Dn=gt({width:Vr,height:on,usage:Va.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=ar({color:Dn,depth:!0,width:Vr,height:on}),this.interactionService.on(Ae.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(jt,Vt,gt){var ar=this;return Object(qe.a)(Object(mt.a)().mark(function gr(){var en,Vr,on,Dn;return Object(mt.a)().wrap(function(xi){for(;;)switch(xi.prev=xi.next){case 0:return en=ar.rendererService,Vr=en.useFramebufferAsync,on=en.clear,ar.resizePickingFBO(),jt.hooks.beforePickingEncode.call(),xi.next=5,Vr(ar.pickingFBO,Object(qe.a)(Object(mt.a)().mark(function ji(){return Object(mt.a)().wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:on({framebuffer:ar.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),jt.renderModels({ispick:!0});case 2:case"end":return ca.stop()}},ji)})));case 5:return jt.hooks.afterPickingEncode.call(),xi.next=8,ar.pickBox(jt,Vt);case 8:Dn=xi.sent,gt(Dn);case 10:case"end":return xi.stop()}},gr)}))()}},{key:"pickBox",value:function(jt,Vt){var gt=this;return Object(qe.a)(Object(mt.a)().mark(function ar(){var gr,en,Vr,on,Dn,di,xi,ji,ia,ca,ea,ma,Ia,Fa,Io,ho,Ba,Mo,_o,Da,ss;return Object(mt.a)().wrap(function(bo){for(;;)switch(bo.prev=bo.next){case 0:if(gr=Vt.map(function(Zo){var As=Zo<0?0:Zo;return Math.floor(As*e.a.DPR/gt.pickBufferScale)}),en=Object(b.a)(gr,4),Vr=en[0],on=en[1],Dn=en[2],di=en[3],xi=gt.rendererService,ji=xi.readPixelsAsync,ia=xi.getViewportSize,ca=ia(),ea=ca.width,ma=ca.height,!(Vr>(ea-1)*e.a.DPR/gt.pickBufferScale||Dn<0||on>(ma-1)*e.a.DPR/gt.pickBufferScale||di<0)){bo.next=5;break}return bo.abrupt("return",[]);case 5:return Ia=Math.min(ea/gt.pickBufferScale,Dn)-Vr,Fa=Math.min(ma/gt.pickBufferScale,di)-on,bo.next=9,ji({x:Vr,y:Math.floor(ma/gt.pickBufferScale-(di+1)),width:Ia,height:Fa,data:new Uint8Array(Ia*Fa*4),framebuffer:gt.pickingFBO});case 9:for(Io=bo.sent,ho=[],Ba={},Mo=0;Mo<Io.length/4;Mo=Mo+1)_o=Io.slice(Mo*4,Mo*4+4),Da=Object(e.p)(_o),Da!==-1&&!Ba[Da]&&(ss=jt.layerPickService.getFeatureById(Da),ho.push(Object(L.a)(Object(L.a)({},ss),{},{pickedFeatureIdx:Da})),Ba[Da]=!0);return bo.abrupt("return",ho);case 14:case"end":return bo.stop()}},ar)}))()}},{key:"handleCursor",value:function(jt,Vt){var gt=jt.getLayerConfig(),ar=gt.cursor,gr=ar===void 0?"":ar,en=gt.cursorEnabled;if(en){var Vr=this.mapService.getType(),on=Vr==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Dn=on==null?void 0:on.style.getPropertyValue("cursor");Vt==="unmousemove"&&Dn!==""?on==null||on.style.setProperty("cursor",""):Vt==="mousemove"&&(on==null||on.style.setProperty("cursor",gr))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"pickingAllLayer",value:function(jt){var Vt=this;return Object(qe.a)(Object(mt.a)().mark(function gt(){return Object(mt.a)().wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(!(!Vt.layerService.needPick(jt.type)||!Vt.isPickingAllLayer())){gr.next=2;break}return gr.abrupt("return");case 2:return Vt.alreadyInPicking=!0,gr.next=5,Vt.pickingLayers(jt);case 5:Vt.layerService.renderLayers(),Vt.alreadyInPicking=!1;case 7:case"end":return gr.stop()}},gt)}))()}},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var jt=this.rendererService.getViewportSize,Vt=jt(),gt=Vt.width,ar=Vt.height;(this.width!==gt||this.height!==ar)&&(this.pickingFBO.resize({width:Math.round(gt/this.pickBufferScale),height:Math.round(ar/this.pickBufferScale)}),this.width=gt,this.height=ar)}},{key:"pickingLayers",value:function(jt){var Vt=this;return Object(qe.a)(Object(mt.a)().mark(function gt(){var ar,gr,en,Vr,on,Dn,di,xi;return Object(mt.a)().wrap(function(ia){for(;;)switch(ia.prev=ia.next){case 0:ar=Vt.rendererService,gr=ar.clear,en=ar.useFramebufferAsync,Vt.resizePickingFBO(),Vr=Vt.layerService.getRenderList(),on=Object(q.a)(Vr.filter(function(ca){return ca.needPick(jt.type)}).reverse()),ia.prev=4,di=Object(mt.a)().mark(function ca(){var ea,ma;return Object(mt.a)().wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:return ea=Dn.value,Fa.next=3,en(Vt.pickingFBO,Object(qe.a)(Object(mt.a)().mark(function Io(){return Object(mt.a)().wrap(function(Ba){for(;;)switch(Ba.prev=Ba.next){case 0:gr({framebuffer:Vt.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ea.layerPickService.pickRender(jt);case 2:case"end":return Ba.stop()}},Io)})));case 3:return Fa.next=5,Vt.pickFromPickingFBO(ea,jt);case 5:if(ma=Fa.sent,Vt.layerService.pickedLayerId=ma?+ea.id:-1,!(ma&&!ea.getLayerConfig().enablePropagation)){Fa.next=9;break}return Fa.abrupt("return","break");case 9:case"end":return Fa.stop()}},ca)}),on.s();case 7:if((Dn=on.n()).done){ia.next=14;break}return ia.delegateYield(di(),"t0",9);case 9:if(xi=ia.t0,xi!=="break"){ia.next=12;break}return ia.abrupt("break",14);case 12:ia.next=7;break;case 14:ia.next=19;break;case 16:ia.prev=16,ia.t1=ia.catch(4),on.e(ia.t1);case 19:return ia.prev=19,on.f(),ia.finish(19);case 22:case"end":return ia.stop()}},gt,null,[[4,16,19,22]])}))()}},{key:"triggerHoverOnLayer",value:function(jt,Vt){So(Vt)&&(this.handleCursor(jt,Vt.type),jt.emit(Vt.type,Vt))}}]),Be}(),ps=function(){function Be(){var Fr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Object(he.a)(this,Be),Object(o.a)(this,"autoStart",void 0),Object(o.a)(this,"startTime",0),Object(o.a)(this,"oldTime",0),Object(o.a)(this,"running",!1),Object(o.a)(this,"elapsedTime",0),this.autoStart=Fr}return Object(B.a)(Be,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var jt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Vt=(typeof performance=="undefined"?Date:performance).now();jt=(Vt-this.oldTime)/1e3,this.oldTime=Vt,this.elapsedTime+=jt}return jt}}]),Be}(),Ao=e.N.throttle,zs=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(Vt){var gt;return Object(he.a)(this,jt),gt=Fr.call(this),Object(o.a)(Object(ve.a)(gt),"pickedLayerId",-1),Object(o.a)(Object(ve.a)(gt),"clock",new ps),Object(o.a)(Object(ve.a)(gt),"alreadyInRendering",!1),Object(o.a)(Object(ve.a)(gt),"layers",[]),Object(o.a)(Object(ve.a)(gt),"layerList",[]),Object(o.a)(Object(ve.a)(gt),"layerRenderID",void 0),Object(o.a)(Object(ve.a)(gt),"sceneInited",!1),Object(o.a)(Object(ve.a)(gt),"animateInstanceCount",0),Object(o.a)(Object(ve.a)(gt),"shaderPicking",!0),Object(o.a)(Object(ve.a)(gt),"enableRender",!0),Object(o.a)(Object(ve.a)(gt),"reRender",Ao(function(){gt.renderLayers()},32)),Object(o.a)(Object(ve.a)(gt),"throttleRenderLayers",Ao(function(){gt.renderLayers()},16)),gt.container=Vt,gt}return Object(B.a)(jt,[{key:"renderService",get:function(){return this.container.rendererService}},{key:"mapService",get:function(){return this.container.mapService}},{key:"debugService",get:function(){return this.container.debugService}},{key:"needPick",value:function(gt){return this.updateLayerRenderList(),this.layerList.some(function(ar){return ar.needPick(gt)})}},{key:"add",value:function(gt){var ar=this;this.layers.push(gt),this.sceneInited&&gt.init().then(function(){ar.renderLayers()})}},{key:"addMask",value:function(gt){var ar=this;this.sceneInited&&gt.init().then(function(){ar.renderLayers()})}},{key:"initLayers",value:function(){var gt=this;return Object(qe.a)(Object(mt.a)().mark(function ar(){return Object(mt.a)().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:gt.sceneInited=!0,gt.layers.forEach(function(){var Vr=Object(qe.a)(Object(mt.a)().mark(function on(Dn){return Object(mt.a)().wrap(function(xi){for(;;)switch(xi.prev=xi.next){case 0:if(Dn.startInit){xi.next=4;break}return xi.next=3,Dn.init();case 3:gt.updateLayerRenderList();case 4:case"end":return xi.stop()}},on)}));return function(on){return Vr.apply(this,arguments)}}());case 2:case"end":return en.stop()}},ar)}))()}},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(gt){return this.layers.find(function(ar){return ar.id===gt})}},{key:"getLayerByName",value:function(gt){return this.layers.find(function(ar){return ar.name===gt})}},{key:"remove",value:function(gt,ar){var gr=this;return Object(qe.a)(Object(mt.a)().mark(function en(){return Object(mt.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:ar?ar.layerChildren=ar.layerChildren.filter(function(Dn){return Dn!==gt}):gr.layers=gr.layers.filter(function(Dn){return Dn!==gt}),gt.destroy(),gr.reRender(),gr.emit("layerChange",gr.layers);case 4:case"end":return on.stop()}},en)}))()}},{key:"removeAllLayers",value:function(){var gt=this;return Object(qe.a)(Object(mt.a)().mark(function ar(){return Object(mt.a)().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:gt.destroy(),gt.reRender();case 2:case"end":return en.stop()}},ar)}))()}},{key:"setEnableRender",value:function(gt){this.enableRender=gt}},{key:"renderLayers",value:function(){var gt=this;return Object(qe.a)(Object(mt.a)().mark(function ar(){var gr,en,Vr,on,Dn,di,xi,ji,ia;return Object(mt.a)().wrap(function(ea){for(;;)switch(ea.prev=ea.next){case 0:if(!(gt.alreadyInRendering||!gt.enableRender)){ea.next=2;break}return ea.abrupt("return");case 2:gt.updateLayerRenderList(),gr=gt.debugService.generateRenderUid(),gt.debugService.renderStart(gr),gt.alreadyInRendering=!0,gt.clear(),en=Object(q.a)(gt.layerList);try{for(en.s();!(Vr=en.n()).done;)on=Vr.value,on.prerender()}catch(ma){en.e(ma)}finally{en.f()}gt.renderService.beginFrame(),Dn=Object(q.a)(gt.layerList),ea.prev=11,Dn.s();case 13:if((di=Dn.n()).done){ea.next=25;break}if(xi=di.value,ji=xi.getLayerConfig(),ia=ji.enableMask,xi.masks.filter(function(ma){return ma.inited}).length>0&&ia&&gt.renderMask(xi.masks),!xi.getLayerConfig().enableMultiPassRenderer){ea.next=22;break}return ea.next=20,xi.renderMultiPass();case 20:ea.next=23;break;case 22:xi.render();case 23:ea.next=13;break;case 25:ea.next=30;break;case 27:ea.prev=27,ea.t0=ea.catch(11),Dn.e(ea.t0);case 30:return ea.prev=30,Dn.f(),ea.finish(30);case 33:gt.renderService.endFrame(),gt.debugService.renderEnd(gr),gt.alreadyInRendering=!1;case 36:case"end":return ea.stop()}},ar,null,[[11,27,30,33]])}))()}},{key:"renderMask",value:function(gt){var ar=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var gr=gt.length>1?be.MULTIPLE:be.SINGLE,en=Object(q.a)(gt),Vr;try{for(en.s();!(Vr=en.n()).done;){var on=Vr.value;on.render({isStencil:!0,stencilType:gr,stencilIndex:ar++})}}catch(Dn){en.e(Dn)}finally{en.f()}}},{key:"beforeRenderData",value:function(gt){var ar=this;return Object(qe.a)(Object(mt.a)().mark(function gr(){var en;return Object(mt.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,gt.hooks.beforeRenderData.promise();case 2:en=on.sent,en&&ar.renderLayers();case 4:case"end":return on.stop()}},gr)}))()}},{key:"renderTileLayerMask",value:function(gt){var ar=0,gr=gt.getLayerConfig(),en=gr.enableMask,Vr=en===void 0?!0:en,on=gt.tileMask?1:0,Dn=gt.masks.filter(function(ca){return ca.inited});on=on+(Vr?Dn.length:1);var di=on>1?be.MULTIPLE:be.SINGLE;if((gt.tileMask||Dn.length&&Vr)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),Dn.length&&Vr){var xi=Object(q.a)(Dn),ji;try{for(xi.s();!(ji=xi.n()).done;){var ia=ji.value;ia.render({isStencil:!0,stencilType:di,stencilIndex:ar++})}}catch(ca){xi.e(ca)}finally{xi.f()}}gt.tileMask&&gt.tileMask.render({isStencil:!0,stencilType:di,stencilIndex:ar++,stencilOperation:le.OR})}},{key:"renderTileLayer",value:function(gt){var ar=this;return Object(qe.a)(Object(mt.a)().mark(function gr(){return Object(mt.a)().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:if(ar.renderTileLayerMask(gt),!gt.getLayerConfig().enableMultiPassRenderer){Vr.next=6;break}return Vr.next=4,gt.renderMultiPass();case 4:Vr.next=8;break;case 6:return Vr.next=8,gt.render();case 8:case"end":return Vr.stop()}},gr)}))()}},{key:"updateLayerRenderList",value:function(){var gt=this;this.layerList=[],this.layers.filter(function(ar){return ar.inited}).filter(function(ar){return ar.isVisible()}).sort(function(ar,gr){return ar.zIndex-gr.zIndex}).forEach(function(ar){gt.layerList.push(ar)})}},{key:"destroy",value:function(){this.layers.forEach(function(gt){gt.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var gt=Object(e.R)(this.mapService.bgColor);this.renderService.clear({color:gt,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){window.cancelAnimationFrame(this.layerRenderID)}}]),jt}(He.EventEmitter),Qa=Ee("jrin"),fs=Ee("Ff2n"),Vs=e.N.isNil,Ju=function(){function Be(Fr){var jt=this;Object(he.a)(this,Be),Object(o.a)(this,"name",void 0),Object(o.a)(this,"type",void 0),Object(o.a)(this,"scale",void 0),Object(o.a)(this,"descriptor",void 0),Object(o.a)(this,"featureBufferLayout",[]),Object(o.a)(this,"needRescale",!1),Object(o.a)(this,"needRemapping",!1),Object(o.a)(this,"needRegenerateVertices",!1),Object(o.a)(this,"featureRange",{startIndex:0,endIndex:Infinity}),Object(o.a)(this,"vertexAttribute",void 0),Object(o.a)(this,"defaultCallback",function(Vt){if(Vt.length===0){var gt;return((gt=jt.scale)===null||gt===void 0?void 0:gt.defaultValues)||[]}return Vt.map(function(ar,gr){var en,Vr=(en=jt.scale)===null||en===void 0?void 0:en.scalers[gr].func,on=Vr(ar);return on})}),this.setProps(Fr)}return Object(B.a)(Be,[{key:"setProps",value:function(jt){Object.assign(this,jt)}},{key:"mapping",value:function(jt){var Vt;if((Vt=this.scale)!==null&&Vt!==void 0&&Vt.callback){var gt,ar,gr=(ar=this.scale)===null||ar===void 0?void 0:(gt=ar).callback.apply(gt,Object(mn.a)(jt));if(!Vs(gr))return[gr]}return this.defaultCallback(jt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),Be}(),ts,Zs=["buffer","update","name"],ys=["buffer","update","name"],Lt=(ts={},Object(Qa.a)(ts,v.FLOAT,4),Object(Qa.a)(ts,v.UNSIGNED_BYTE,1),Object(Qa.a)(ts,v.UNSIGNED_SHORT,2),ts),at=function(){function Be(Fr){Object(he.a)(this,Be),Object(o.a)(this,"attributesAndIndices",void 0),Object(o.a)(this,"attributes",[]),Object(o.a)(this,"triangulation",void 0),Object(o.a)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=Fr}return Object(B.a)(Be,[{key:"registerStyleAttribute",value:function(jt){var Vt=this.getLayerStyleAttribute(jt.name||"");return Vt?Vt.setProps(jt):(Vt=new Ju(jt),this.attributes.push(Vt)),Vt}},{key:"unRegisterStyleAttribute",value:function(jt){var Vt=this.attributes.findIndex(function(gt){return gt.name===jt});Vt>-1&&this.attributes.splice(Vt,1)}},{key:"updateScaleAttribute",value:function(jt){this.attributes.forEach(function(Vt){var gt,ar=Vt.name,gr=(gt=Vt.scale)===null||gt===void 0?void 0:gt.field;(jt[ar]||gr&&jt[gr])&&(Vt.needRescale=!0,Vt.needRemapping=!0,Vt.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(jt,Vt,gt){var ar=this.getLayerStyleAttribute(jt);ar||(ar=this.registerStyleAttribute(Object(L.a)(Object(L.a)({},Vt),{},{name:jt})));var gr=Vt.scale;gr&&ar&&(ar.scale=gr,ar.needRescale=!0,ar.needRemapping=!0,ar.needRegenerateVertices=!0,gt&&gt.featureRange&&(ar.featureRange=gt.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(jt){return this.attributes.find(function(Vt){return Vt.name===jt})}},{key:"getLayerAttributeScale",value:function(jt){var Vt,gt=this.getLayerStyleAttribute(jt),ar=gt==null||(Vt=gt.scale)===null||Vt===void 0?void 0:Vt.scalers;return ar&&ar[0]?ar[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(jt,Vt){var gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,ar=arguments.length>3?arguments[3]:void 0,gr=arguments.length>4?arguments[4]:void 0,en=this.attributes.find(function(ho){return ho.name===jt});if(en&&en.descriptor){var Vr=en.descriptor,on=Vr.update,Dn=Vr.buffer,di=Vr.size,xi=di===void 0?0:di,ji=Lt[Dn.type||v.FLOAT];if(on){var ia=this.featureLayout,ca=ia.elements,ea=ia.sizePerElement,ma=ca.slice(gt,ar);if(!ma.length)return;var Ia=ma[0].offset,Fa=Ia*xi*ji,Io=ma.map(function(ho,Ba){for(var Mo=ho.featureIdx,_o=ho.vertices,Da=ho.normals,ss=_o.length/ea,ko=[],bo=0;bo<ss;bo++){var Zo=Da?Da.slice(bo*3,bo*3+3):[];ko.push.apply(ko,Object(mn.a)(on(Vt[Mo],Mo,_o.slice(bo*ea,bo*ea+ea),Ba,Zo)))}return ko}).flat();en.vertexAttribute.updateBuffer({data:Io,offset:Fa}),gr==null||gr.emit("legend:".concat(jt),gr.getLegend(jt))}}}},{key:"createAttributesAndIndices",value:function(jt,Vt,gt,ar){var gr=this;this.featureLayout={sizePerElement:0,elements:[]},Vt&&(this.triangulation=Vt);var en=this.attributes.map(function(Ia){return Ia.resetDescriptor(),Ia.descriptor}),Vr=0,on=0,Dn=[],di=3;jt.forEach(function(Ia,Fa){var Io=gr.triangulation(Ia,gt),ho=Io.indices,Ba=Io.vertices,Mo=Io.normals,_o=Io.size,Da=Io.indexes,ss=Io.count;typeof ss=="number"&&(on+=ss),ho.forEach(function(As){Dn.push(As+Vr)}),di=_o;var ko=Ba.length/_o;gr.featureLayout.sizePerElement=di,gr.featureLayout.elements.push({featureIdx:Fa,vertices:Ba,normals:Mo,offset:Vr}),Vr+=ko;for(var bo=function(us){var Mu=(Mo==null?void 0:Mo.slice(us*3,us*3+3))||[],Qs=Ba.slice(us*_o,us*_o+_o),Ls=0;Da&&Da[us]!==void 0&&(Ls=Da[us]),en.forEach(function(Es,al){if(Es&&Es.update){var cu;(cu=Es.buffer.data).push.apply(cu,Object(mn.a)(Es.update(Ia,Fa,Qs,us,Mu,Ls)))}})},Zo=0;Zo<ko;Zo++)bo(Zo)});var xi=this.rendererService,ji=xi.createAttribute,ia=xi.createBuffer,ca=xi.createElements,ea={};en.forEach(function(Ia,Fa){if(Ia){var Io=Ia.buffer,ho=Ia.update,Ba=Ia.name,Mo=Object(fs.a)(Ia,Zs),_o=ji(Object(L.a)({buffer:ia(Io)},Mo));ea[Ia.name||""]=_o,gr.attributes[Fa].vertexAttribute=_o}});var ma=ca({data:Dn,type:v.UNSIGNED_INT,count:Dn.length});return this.attributesAndIndices={attributes:ea,elements:ma,count:on},Object.values(this.attributes).filter(function(Ia){return Ia.scale}).forEach(function(Ia){var Fa=Ia.name;ar==null||ar.emit("legend:".concat(Fa),ar.getLegend(Fa))}),this.attributesAndIndices}},{key:"createAttributes",value:function(jt,Vt){var gt=this;this.featureLayout={sizePerElement:0,elements:[]},Vt&&(this.triangulation=Vt);var ar=this.attributes.map(function(ji){return ji.resetDescriptor(),ji.descriptor}),gr=0,en=[],Vr=3;jt.forEach(function(ji,ia){var ca=gt.triangulation(ji),ea=ca.indices,ma=ca.vertices,Ia=ca.normals,Fa=ca.size,Io=ca.indexes;ea.forEach(function(_o){en.push(_o+gr)}),Vr=Fa;var ho=ma.length/Fa;gt.featureLayout.sizePerElement=Vr,gt.featureLayout.elements.push({featureIdx:ia,vertices:ma,normals:Ia,offset:gr}),gr+=ho;for(var Ba=function(Da){var ss=(Ia==null?void 0:Ia.slice(Da*3,Da*3+3))||[],ko=ma.slice(Da*Fa,Da*Fa+Fa),bo=0;Io&&Io[Da]!==void 0&&(bo=Io[Da]),ar.forEach(function(Zo,As){if(Zo&&Zo.update){var us;(us=Zo.buffer.data).push.apply(us,Object(mn.a)(Zo.update(ji,ia,ko,Da,ss,bo)))}})},Mo=0;Mo<ho;Mo++)Ba(Mo)});var on=this.rendererService,Dn=on.createAttribute,di=on.createBuffer,xi={};return ar.forEach(function(ji,ia){if(ji){var ca=ji.buffer,ea=ji.update,ma=ji.name,Ia=Object(fs.a)(ji,ys),Fa=Dn(Object(L.a)({buffer:di(ca)},Ia));xi[ji.name||""]=Fa,gt.attributes[ia].vertexAttribute=Fa}}),{attributes:xi}}},{key:"clearAllAttributes",value:function(){var jt;this.attributes.forEach(function(Vt){Vt.vertexAttribute&&Vt.vertexAttribute.destroy()}),(jt=this.attributesAndIndices)===null||jt===void 0||jt.elements.destroy(),this.attributes=[]}}]),Be}(),Ye=Ee("xp6e"),St=Ee("7sSR"),fr=Ee.n(St),Gr=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(Vt){var gt;return Object(he.a)(this,jt),gt=Fr.call(this),Object(o.a)(Object(ve.a)(gt),"destroyed",!1),Object(o.a)(Object(ve.a)(gt),"loaded",!1),Object(o.a)(Object(ve.a)(gt),"id",void 0),Object(o.a)(Object(ve.a)(gt),"inited",!1),Object(o.a)(Object(ve.a)(gt),"rendering",!1),Object(o.a)(Object(ve.a)(gt),"$container",void 0),Object(o.a)(Object(ve.a)(gt),"canvas",void 0),Object(o.a)(Object(ve.a)(gt),"markerContainer",void 0),Object(o.a)(Object(ve.a)(gt),"resizeDetector",void 0),Object(o.a)(Object(ve.a)(gt),"hooks",void 0),Object(o.a)(Object(ve.a)(gt),"handleWindowResized",function(){gt.emit("resize"),gt.$container&&(gt.initContainer(),gt.coordinateSystemService.needRefresh=!0,gt.render())}),Object(o.a)(Object(ve.a)(gt),"handleMapCameraChanged",function(ar){gt.cameraService.update(ar),gt.render()}),gt.container=Vt,gt.hooks={init:new Ye.b},gt.id=Vt.id,gt}return Object(B.a)(jt,[{key:"iconService",get:function(){return this.container.iconService}},{key:"fontService",get:function(){return this.container.fontService}},{key:"controlService",get:function(){return this.container.controlService}},{key:"configService",get:function(){return this.container.globalConfigService}},{key:"map",get:function(){return this.container.mapService}},{key:"coordinateSystemService",get:function(){return this.container.coordinateSystemService}},{key:"rendererService",get:function(){return this.container.rendererService}},{key:"layerService",get:function(){return this.container.layerService}},{key:"debugService",get:function(){return this.container.debugService}},{key:"cameraService",get:function(){return this.container.cameraService}},{key:"interactionService",get:function(){return this.container.interactionService}},{key:"pickingService",get:function(){return this.container.pickingService}},{key:"shaderModuleService",get:function(){return this.container.shaderModuleService}},{key:"markerService",get:function(){return this.container.markerService}},{key:"popupService",get:function(){return this.container.popupService}},{key:"init",value:function(gt){var ar=this,gr=this;this.configService.setSceneConfig(this.id,gt),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return ar.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(qe.a)(Object(mt.a)().mark(function en(){return Object(mt.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return gr.debugService.log("map.mapInitStart",{type:gr.map.version}),on.next=3,new Promise(function(Dn){gr.map.onCameraChanged(function(di){gr.cameraService.init(),gr.cameraService.update(di),Dn()}),gr.map.init()});case 3:gr.map.onCameraChanged(gr.handleMapCameraChanged),gr.map.addMarkerContainer(),gr.markerService.addMarkers(),gr.markerService.addMarkerLayers(),gr.popupService.initPopup(),gr.interactionService.init(),gr.interactionService.on(Ae.Drag,gr.addSceneEvent.bind(gr));case 10:case"end":return on.stop()}},en)}))),this.hooks.init.tapPromise("initRenderer",Object(qe.a)(Object(mt.a)().mark(function en(){var Vr,on,Dn,di;return Object(mt.a)().wrap(function(ji){for(;;)switch(ji.prev=ji.next){case 0:if(on=((Vr=gr.map)===null||Vr===void 0?void 0:Vr.getOverlayContainer())||void 0,on?gr.$container=on:gr.$container=Ro(gr.configService.getSceneConfig(gr.id).id||""),!gr.$container){ji.next=15;break}return Dn=gt.canvas,gr.canvas=Dn||e.a.create("canvas","",gr.$container),gr.setCanvas(),ji.next=8,gr.rendererService.init(gr.canvas,gr.configService.getSceneConfig(gr.id),gt.gl);case 8:gr.registerContextLost(),gr.initContainer(),gr.resizeDetector=fr()({strategy:"scroll"}),gr.resizeDetector.listenTo(gr.$container,gr.handleWindowResized),window.matchMedia&&((di=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||di===void 0||di.addListener(gr.handleWindowResized.bind("screen"))),ji.next=16;break;case 15:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 16:gr.pickingService.init(gr.id);case 17:case"end":return ji.stop()}},en)}))),this.render()}},{key:"registerContextLost",value:function(){var gt=this,ar=this.rendererService.getCanvas();ar&&ar.addEventListener("webglcontextlost",function(){return gt.emit("webglcontextlost")})}},{key:"addLayer",value:function(gt){this.layerService.sceneService=this,this.layerService.add(gt)}},{key:"addMask",value:function(gt){this.layerService.sceneService=this,this.layerService.addMask(gt)}},{key:"render",value:function(){var gt=this;return Object(qe.a)(Object(mt.a)().mark(function ar(){return Object(mt.a)().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:if(!(gt.rendering||gt.destroyed)){en.next=2;break}return en.abrupt("return");case 2:if(gt.rendering=!0,gt.inited){en.next=16;break}return en.next=6,gt.hooks.init.promise();case 6:return gt.destroyed&&gt.destroy(),en.next=9,gt.layerService.initLayers();case 9:gt.layerService.renderLayers(),gt.controlService.addControls(),gt.loaded=!0,gt.emit("loaded"),gt.inited=!0,en.next=20;break;case 16:return en.next=18,gt.layerService.initLayers();case 18:return en.next=20,gt.layerService.renderLayers();case 20:gt.rendering=!1;case 21:case"end":return en.stop()}},ar)}))()}},{key:"addFontFace",value:function(gt,ar){this.fontService.addFontFace(gt,ar)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(gt){var ar=this;return Object(qe.a)(Object(mt.a)().mark(function gr(){var en,Vr,on;return Object(mt.a)().wrap(function(di){for(;;)switch(di.prev=di.next){case 0:return Vr=(en=ar.$container)===null||en===void 0?void 0:en.getElementsByTagName("canvas")[0],di.next=3,ar.render();case 3:return on=gt==="jpg"?Vr==null?void 0:Vr.toDataURL("image/jpeg"):Vr==null?void 0:Vr.toDataURL("image/png"),di.abrupt("return",on);case 5:case"end":return di.stop()}},gr)}))()}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var gt=this.$container.parentElement;gt!==null&&(this.markerContainer=e.a.create("div","l7-marker-container",gt))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var gt=this,ar;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var gr;(gr=gt.$container)===null||gr===void 0||gr.removeChild(gt.canvas),gt.canvas=null,gt.rendererService.destroy()}),(ar=this.$container)===null||ar===void 0||(ar=ar.parentNode)===null||ar===void 0||ar.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var gt,ar,gr=e.a.DPR,en=((gt=this.$container)===null||gt===void 0?void 0:gt.clientWidth)||400,Vr=((ar=this.$container)===null||ar===void 0?void 0:ar.clientHeight)||300,on=this.canvas;on&&(on.width=en*gr,on.height=Vr*gr),this.rendererService.viewport({x:0,y:0,width:gr*en,height:gr*Vr})}},{key:"setCanvas",value:function(){var gt,ar,gr=e.a.DPR,en=((gt=this.$container)===null||gt===void 0?void 0:gt.clientWidth)||400,Vr=((ar=this.$container)===null||ar===void 0?void 0:ar.clientHeight)||300,on=this.canvas;on.width=en*gr,on.height=Vr*gr,on.style.width="100%",on.style.height="100%"}},{key:"addSceneEvent",value:function(gt){this.emit(gt.type,gt)}}]),jt}(He.EventEmitter),hn=e.N.uniq,un="#define PI 3.14159265359",Qn=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Ai=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,bi=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,na=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Oa=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,fo=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,uo=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Uo=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,lo=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,go=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,Ho=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Qo=/precision\s+(high|low|medium)p\s+float/,Go=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,_s=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,bs=/void\s+main\s*\([^)]*\)\s*\{\n?/,Ks=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"moduleCache",{}),Object(o.a)(this,"rawContentCache",{})}return Object(B.a)(Be,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:un,fs:un}),this.registerModule("decode",{vs:Ai,fs:""}),this.registerModule("scene_uniforms",{vs:go,fs:go}),this.registerModule("picking_uniforms",{vs:fo,fs:fo}),this.registerModule("projection",{vs:Uo,fs:Uo}),this.registerModule("project",{vs:uo,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Ho}),this.registerModule("lighting",{vs:bi,fs:""}),this.registerModule("light",{vs:Qn,fs:""}),this.registerModule("picking",{vs:Oa,fs:na}),this.registerModule("rotation_2d",{vs:lo,fs:""})}},{key:"registerModule",value:function(jt,Vt){Vt.vs=Vt.vs.replace(/\r\n/g,`
`),Vt.fs=Vt.fs.replace(/\r\n/g,`
`);var gt=Vt.vs,ar=Vt.fs,gr=Vt.uniforms,en=Vt.defines,Vr=Vt.inject,on=u(gt),Dn=on.content,di=on.uniforms,xi=u(ar),ji=xi.content,ia=xi.uniforms;this.rawContentCache[jt]={fs:ji,defines:en,inject:Vr,uniforms:Object(L.a)(Object(L.a)(Object(L.a)({},di),ia),gr),vs:Dn}}},{key:"getModule",value:function(jt){var Vt=this,gt=this.rawContentCache[jt].vs,ar=this.rawContentCache[jt].fs,gr=this.rawContentCache[jt],en=gr.defines,Vr=en===void 0?{}:en,on=gr.inject,Dn=on===void 0?{}:on,di={};Dn["vs:#decl"]&&(gt=Dn["vs:#decl"]+gt,di=u(Dn["vs:#decl"]).uniforms),Dn["vs:#main-start"]&&(gt=gt.replace(bs,function(Ba){return Ba+Dn["vs:#main-start"]})),Dn["fs:#decl"]&&(ar=Dn["fs:#decl"]+ar);var xi=Yo(Vr);gt=xi+gt;var ji=this.processModule(gt,[],"vs"),ia=ji.content,ca=ji.includeList,ea=this.processModule(ar,[],"fs"),ma=ea.content,Ia=ea.includeList,Fa=hn(ca.concat(Ia).concat(jt)).reduce(function(Ba,Mo){return Object(L.a)(Object(L.a)({},Ba),Vt.rawContentCache[Mo].uniforms)},Object(L.a)({},di)),Io=(Qo.test(ma)?"":Go)+ia,ho=(Qo.test(ma)?"":Go)+ma;return this.moduleCache[jt]={vs:Io.trim(),fs:ho.trim(),uniforms:Fa},this.moduleCache[jt]}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"processModule",value:function(jt,Vt,gt){var ar=this,gr=jt.replace(_s,function(en,Vr){var on=Vr.split(" "),Dn=on[0].replace(/"/g,"");if(Vt.indexOf(Dn)>-1)return"";var di=ar.rawContentCache[Dn][gt];Vt.push(Dn);var xi=ar.processModule(di,Vt,gt),ji=xi.content;return ji});return{content:gr,includeList:Vt}}}]),Be}();function Yo(Be){var Fr=Object.keys(Be).reduce(function(jt,Vt){return jt+"#define ".concat(Vt.toUpperCase()," ").concat(Be[Vt],`
`)},`
`);return Fr}var mo=Ee("w4Tj"),Rs=Ee("oZsa"),rs=function(){function Be(){Object(he.a)(this,Be),Object(o.a)(this,"shaderModuleService",void 0),Object(o.a)(this,"rendererService",void 0),Object(o.a)(this,"cameraService",void 0),Object(o.a)(this,"mapService",void 0),Object(o.a)(this,"interactionService",void 0),Object(o.a)(this,"layerService",void 0),Object(o.a)(this,"config",void 0)}return Object(B.a)(Be,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return g.Normal}},{key:"init",value:function(jt,Vt){this.config=Vt,this.rendererService=jt.getContainer().rendererService,this.cameraService=jt.getContainer().cameraService,this.mapService=jt.getContainer().mapService,this.interactionService=jt.getContainer().interactionService,this.layerService=jt.getContainer().layerService,this.shaderModuleService=jt.getContainer().shaderModuleService}},{key:"render",value:function(jt){}}]),Be}(),Za=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(gt,ar){Object(mo.a)(Object(Rs.a)(jt.prototype),"init",this).call(this,gt,ar)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),jt}(rs),qa=function(){function Be(Fr){Object(he.a)(this,Be),Object(o.a)(this,"passes",[]),Object(o.a)(this,"layer",void 0),Object(o.a)(this,"renderFlag",void 0),Object(o.a)(this,"width",0),Object(o.a)(this,"height",0),this.postProcessor=Fr}return Object(B.a)(Be,[{key:"setLayer",value:function(jt){this.layer=jt}},{key:"setRenderFlag",value:function(jt){this.renderFlag=jt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var jt=this;return Object(qe.a)(Object(mt.a)().mark(function Vt(){var gt,ar,gr;return Object(mt.a)().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:gt=Object(q.a)(jt.passes),Vr.prev=1,gt.s();case 3:if((ar=gt.n()).done){Vr.next=9;break}return gr=ar.value,Vr.next=7,gr.render(jt.layer);case 7:Vr.next=3;break;case 9:Vr.next=14;break;case 11:Vr.prev=11,Vr.t0=Vr.catch(1),gt.e(Vr.t0);case 14:return Vr.prev=14,gt.f(),Vr.finish(14);case 17:return Vr.next=19,jt.postProcessor.render(jt.layer);case 19:case"end":return Vr.stop()}},Vt,null,[[1,11,14,17]])}))()}},{key:"resize",value:function(jt,Vt){(this.width!==jt||this.height!==Vt)&&(this.postProcessor.resize(jt,Vt),this.width=jt,this.height=Vt)}},{key:"add",value:function(jt,Vt){jt.getType()===g.PostProcessing?this.postProcessor.add(jt,this.layer,Vt):(jt.init(this.layer,Vt),this.passes.push(jt))}},{key:"insert",value:function(jt,Vt,gt){jt.init(this.layer,Vt),this.passes.splice(gt,0,jt)}},{key:"destroy",value:function(){this.passes.length=0}}]),Be}(),Fs=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){var Vt;Object(he.a)(this,jt);for(var gt,ar=arguments.length,gr=new Array(ar),en=0;en<ar;en++)gr[en]=arguments[en];return Vt=Fr.call.apply(Fr,[this].concat(gr)),gt=Object(ve.a)(Vt),Object(o.a)(Object(ve.a)(Vt),"pickingFBO",void 0),Object(o.a)(Object(ve.a)(Vt),"layer",void 0),Object(o.a)(Object(ve.a)(Vt),"width",0),Object(o.a)(Object(ve.a)(Vt),"height",0),Object(o.a)(Object(ve.a)(Vt),"alreadyInRendering",!1),Object(o.a)(Object(ve.a)(Vt),"pickFromPickingFBO",function(Vr){var on=Vr.x,Dn=Vr.y,di=Vr.lngLat,xi=Vr.type;if(!(!Vt.layer.isVisible()||!Vt.layer.needPick(xi))){var ji=Vt.rendererService,ia=ji.getViewportSize,ca=ji.readPixelsAsync,ea=ji.useFramebuffer,ma=ia(),Ia=ma.width,Fa=ma.height,Io=Vt.layer.getLayerConfig(),ho=Io.enableHighlight,Ba=Io.enableSelect,Mo=on*e.a.DPR,_o=Dn*e.a.DPR;if(!(Mo>Ia||Mo<0||_o>Fa||_o<0)){var Da;ea(Vt.pickingFBO,Object(qe.a)(Object(mt.a)().mark(function ss(){var ko,bo,Zo,As,us;return Object(mt.a)().wrap(function(Qs){for(;;)switch(Qs.prev=Qs.next){case 0:return Qs.next=2,ca({x:Math.round(Mo),y:Math.round(Fa-(Dn+1)*e.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:gt.pickingFBO});case 2:Da=Qs.sent,Da[0]!==0||Da[1]!==0||Da[2]!==0?(bo=Object(e.p)(Da),Zo=gt.layer.getSource().getFeatureById(bo),As={x:on,y:Dn,type:xi,lngLat:di,featureId:bo,feature:Zo},Zo&&(gt.layer.setCurrentPickId(bo),gt.triggerHoverOnLayer(As))):(us={x:on,y:Dn,lngLat:di,type:gt.layer.getCurrentPickId()===null?"un"+xi:"mouseout",featureId:null,feature:null},gt.triggerHoverOnLayer(Object(L.a)(Object(L.a)({},us),{},{type:"unpick"})),gt.triggerHoverOnLayer(us),gt.layer.setCurrentPickId(null)),ho&&gt.highlightPickedFeature(Da),Ba&&xi==="click"&&((ko=Da)===null||ko===void 0?void 0:ko.toString())!==[0,0,0,0].toString()&&gt.selectFeature(Da);case 6:case"end":return Qs.stop()}},ss)})))}}}),Vt}return Object(B.a)(jt,[{key:"getType",value:function(){return g.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(gt,ar){Object(mo.a)(Object(Rs.a)(jt.prototype),"init",this).call(this,gt,ar),this.layer=gt;var gr=this.rendererService,en=gr.createTexture2D,Vr=gr.createFramebuffer,on=gr.getViewportSize,Dn=on(),di=Dn.width,xi=Dn.height,ji=en({width:di,height:xi,wrapS:v.CLAMP_TO_EDGE,wrapT:v.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=Vr({color:ji}),this.interactionService.on(Ae.Hover,this.pickFromPickingFBO),this.interactionService.on(Ae.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Ae.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(gt){var ar=this;if(!this.alreadyInRendering){var gr=this.rendererService,en=gr.getViewportSize,Vr=gr.useFramebuffer,on=gr.clear,Dn=en(),di=Dn.width,xi=Dn.height;this.alreadyInRendering=!0,(this.width!==di||this.height!==xi)&&(this.pickingFBO.resize({width:di,height:xi}),this.width=di,this.height=xi),Vr(this.pickingFBO,function(){on({framebuffer:ar.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var ji=ar.layer.multiPassRenderer.getRenderFlag();ar.layer.multiPassRenderer.setRenderFlag(!1),gt.hooks.beforePickingEncode.call(),gt.render(),gt.hooks.afterPickingEncode.call(),ar.layer.multiPassRenderer.setRenderFlag(ji),ar.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(gt){this.layer.emit(gt.type,gt)}},{key:"highlightPickedFeature",value:function(gt){var ar=Object(b.a)(gt,3),gr=ar[0],en=ar[1],Vr=ar[2];this.layer.hooks.beforeHighlight.call([gr,en,Vr]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(gt){var ar=Object(b.a)(gt,3),gr=ar[0],en=ar[1],Vr=ar[2];this.layer.hooks.beforeSelect.call([gr,en,Vr]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(gt){var ar=gt.featureId,gr=Object(e.r)(ar);this.selectFeature(new Uint8Array(gr))}},{key:"highlightFeatureHandle",value:function(gt){var ar=gt.featureId,gr=Object(e.r)(ar);this.highlightPickedFeature(new Uint8Array(gr))}}]),jt}(rs),Ou=function(){function Be(Fr){Object(he.a)(this,Be),Object(o.a)(this,"passes",[]),Object(o.a)(this,"readFBO",void 0),Object(o.a)(this,"writeFBO",void 0),this.rendererService=Fr,this.init()}return Object(B.a)(Be,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var jt=this.rendererService,Vt=jt.getViewportSize,gt=jt.createTexture2D,ar=Vt(),gr=ar.width,en=ar.height;return gt({x:0,y:0,width:gr,height:en,copy:!0})}},{key:"getReadFBOTex",value:function(){var jt=this,Vt=this,gt=this.rendererService.useFramebuffer;return new Promise(function(ar){gt(jt.readFBO,Object(qe.a)(Object(mt.a)().mark(function gr(){return Object(mt.a)().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:ar(Vt.getCurrentFBOTex());case 1:case"end":return Vr.stop()}},gr)})))})}},{key:"renderBloomPass",value:function(jt,Vt){var gt=this;return Object(qe.a)(Object(mt.a)().mark(function ar(){var gr,en;return Object(mt.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,gt.getReadFBOTex();case 2:gr=on.sent,en=0;case 4:if(!(en<4)){on.next=11;break}return on.next=7,Vt.render(jt,gr);case 7:gt.swap(),en++,on.next=4;break;case 11:case"end":return on.stop()}},ar)}))()}},{key:"render",value:function(jt){var Vt=this;return Object(qe.a)(Object(mt.a)().mark(function gt(){var ar,gr;return Object(mt.a)().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:ar=0;case 1:if(!(ar<Vt.passes.length)){Vr.next=15;break}if(gr=Vt.passes[ar],gr.setRenderToScreen(Vt.isLastEnabledPass(ar)),gr.getName()!=="bloom"){Vr.next=9;break}return Vr.next=7,Vt.renderBloomPass(jt,gr);case 7:Vr.next=12;break;case 9:return Vr.next=11,gr.render(jt);case 11:ar!==Vt.passes.length-1&&Vt.swap();case 12:ar++,Vr.next=1;break;case 15:case"end":return Vr.stop()}},gt)}))()}},{key:"resize",value:function(jt,Vt){this.readFBO.resize({width:jt,height:Vt}),this.writeFBO.resize({width:jt,height:Vt})}},{key:"add",value:function(jt,Vt,gt){jt.init(Vt,gt),this.passes.push(jt)}},{key:"insert",value:function(jt,Vt,gt,ar){jt.init(gt,ar),this.passes.splice(Vt,0,jt)}},{key:"getPostProcessingPassByName",value:function(jt){return this.passes.find(function(Vt){return Vt.getName()===jt})}},{key:"init",value:function(){var jt=this.rendererService,Vt=jt.createFramebuffer,gt=jt.createTexture2D;this.readFBO=Vt({color:gt({width:1,height:1,wrapS:v.CLAMP_TO_EDGE,wrapT:v.CLAMP_TO_EDGE,usage:Va.RENDER_TARGET})}),this.writeFBO=Vt({color:gt({width:1,height:1,wrapS:v.CLAMP_TO_EDGE,wrapT:v.CLAMP_TO_EDGE,usage:Va.RENDER_TARGET})})}},{key:"isLastEnabledPass",value:function(jt){for(var Vt=jt+1;Vt<this.passes.length;Vt++)if(this.passes[Vt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var jt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=jt}}]),Be}(),Ws=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"getType",value:function(){return g.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(gt,ar){Object(mo.a)(Object(Rs.a)(jt.prototype),"init",this).call(this,gt,ar)}},{key:"render",value:function(gt){var ar=this.rendererService,gr=ar.useFramebuffer,en=ar.clear,Vr=gt.multiPassRenderer.getPostProcessor().getReadFBO();gr(Vr,function(){en({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Vr}),gt.multiPassRenderer.setRenderFlag(!1),gt.models.forEach(function(on){on.draw({uniforms:gt.layerModel.getUninforms()})}),gt.multiPassRenderer.setRenderFlag(!0)})}}]),jt}(rs),nl=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Bu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,su=e.N.isNil,zu=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Bu,fs:nl});var gt=this.shaderModuleService.getModule("blur-pass"),ar=gt.vs,gr=gt.fs,en=gt.uniforms,Vr=this.rendererService.getViewportSize(),on=Vr.width,Dn=Vr.height;return{vs:ar,fs:gr,uniforms:Object(L.a)(Object(L.a)({},en),{},{u_ViewportSize:[on,Dn]})}}},{key:"convertOptionsToUniforms",value:function(gt){var ar={};return su(gt.bloomRadius)||(ar.u_radius=gt.bloomRadius),su(gt.bloomIntensity)||(ar.u_intensity=gt.bloomIntensity),su(gt.bloomBaseRadio)||(ar.u_baseRadio=gt.bloomBaseRadio),ar}}]),jt}(r),uu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,hu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Qu=e.N.isNil,qo=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:hu,fs:uu});var gt=this.shaderModuleService.getModule("blur-pass"),ar=gt.vs,gr=gt.fs,en=gt.uniforms,Vr=this.rendererService.getViewportSize(),on=Vr.width,Dn=Vr.height;return{vs:ar,fs:gr,uniforms:Object(L.a)(Object(L.a)({},en),{},{u_ViewportSize:[on,Dn]})}}},{key:"convertOptionsToUniforms",value:function(gt){var ar={};return Qu(gt.blurRadius)||(ar.u_BlurDir=[gt.blurRadius,0]),ar}}]),jt}(r),du=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,ns=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ru=e.N.isNil,_u=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ns,fs:du});var gt=this.shaderModuleService.getModule("blur-pass"),ar=gt.vs,gr=gt.fs,en=gt.uniforms,Vr=this.rendererService.getViewportSize(),on=Vr.width,Dn=Vr.height;return{vs:ar,fs:gr,uniforms:Object(L.a)(Object(L.a)({},en),{},{u_ViewportSize:[on,Dn]})}}},{key:"convertOptionsToUniforms",value:function(gt){var ar={};return ru(gt.blurRadius)||(ar.u_BlurDir=[0,gt.blurRadius]),ar}}]),jt}(r),Hs=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Ns=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Js=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Ns,fs:Hs});var gt=this.shaderModuleService.getModule("colorhalftone-pass"),ar=gt.vs,gr=gt.fs,en=gt.uniforms,Vr=this.rendererService.getViewportSize(),on=Vr.width,Dn=Vr.height;return{vs:ar,fs:gr,uniforms:Object(L.a)(Object(L.a)({},en),{},{u_ViewportSize:[on,Dn]})}}}]),jt}(r),Fu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,vu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Vu=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:vu,fs:Fu}),this.shaderModuleService.getModule("copy-pass")}}]),jt}(r),Nu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,To=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Wu=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:To,fs:Nu});var gt=this.shaderModuleService.getModule("hexagonalpixelate-pass"),ar=gt.vs,gr=gt.fs,en=gt.uniforms,Vr=this.rendererService.getViewportSize(),on=Vr.width,Dn=Vr.height;return{vs:ar,fs:gr,uniforms:Object(L.a)(Object(L.a)({},en),{},{u_ViewportSize:[on,Dn]})}}}]),jt}(r),Hu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Ru=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,$o=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:Ru,fs:Hu});var gt=this.shaderModuleService.getModule("ink-pass"),ar=gt.vs,gr=gt.fs,en=gt.uniforms,Vr=this.rendererService.getViewportSize(),on=Vr.width,Dn=Vr.height;return{vs:ar,fs:gr,uniforms:Object(L.a)(Object(L.a)({},en),{},{u_ViewportSize:[on,Dn]})}}}]),jt}(r),dl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Gu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,os=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Gu,fs:dl}),this.shaderModuleService.getModule("noise-pass")}}]),jt}(r),Us=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,hs=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,xs=function(Be){Object(Me.a)(jt,Be);var Fr=Object(De.a)(jt);function jt(){return Object(he.a)(this,jt),Fr.apply(this,arguments)}return Object(B.a)(jt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Us,fs:hs}),this.shaderModuleService.getModule("sepia-pass")}}]),jt}(r),il=new Hr,Tu=0;function Is(){var Be=new Ks,Fr=new En,jt=new Cr,Vt=new Nn(jt),gt=new lt,ar=new Zr,gr=new An,en=new On,Vr=new lr,on={id:"".concat(Tu++),globalConfigService:il,shaderModuleService:Be,debugService:Fr,cameraService:jt,coordinateSystemService:Vt,fontService:gt,iconService:ar,markerService:gr,popupService:en,controlService:Vr,customRenderService:{}},Dn=new zs(on);on.layerService=Dn;var di=new Gr(on);on.sceneService=di;var xi=new so(on);on.interactionService=xi;var ji=new ws(on);on.pickingService=ji;var ia={clear:new Za,pixelPicking:new Fs,render:new Ws};on.normalPassFactory=function(ea){return ia[ea]};var ca={copy:new Vu,bloom:new zu,blurH:new qo,blurV:new _u,noise:new os,sepia:new xs,colorHalftone:new Js,hexagonalPixelate:new Wu,ink:new $o};return on.postProcessingPass=ca,on.postProcessingPassFactory=function(ea){return ca[ea]},on}function lu(Be){var Fr=Object(L.a)({},Be);return Fr.postProcessor=new Ou(Fr.rendererService),Fr.multiPassRenderer=new qa(Fr.postProcessor),Fr.styleAttributeService=new at(Fr.rendererService),Fr}var bu=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],nu=function(Be){return Be.IMAGE="image",Be.CUSTOMIMAGE="customImage",Be.ARRAYBUFFER="arraybuffer",Be.RGB="rgb",Be.TERRAINRGB="terrainRGB",Be.CUSTOMRGB="customRGB",Be.CUSTOMARRAYBUFFER="customArrayBuffer",Be.CUSTOMTERRAINRGB="customTerrainRGB",Be}({})},hOQH:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return u});var he=Ee("qLMh"),B=Ee("tJVT"),L=Ee("rAM+"),o=Object.defineProperty,e=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=function(b,_,x){return _ in b?o(b,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):b[_]=x},i=function(b,_){for(var x in _||(_={}))p.call(_,x)&&h(b,x,_[x]);if(v){var M=Object(L.a)(v(_)),P;try{for(M.s();!(P=M.n()).done;){var x=P.value;c.call(_,x)&&h(b,x,_[x])}}catch(C){M.e(C)}finally{M.f()}}return b},r=function(b,_){return e(b,g(_))},n=function(b,_,x){return new Promise(function(M,P){var C=function(I){try{w(x.next(I))}catch(j){P(j)}},O=function(I){try{w(x.throw(I))}catch(j){P(j)}},w=function(I){return I.done?M(I.value):Promise.resolve(I.value).then(C,O)};w((x=x.apply(b,_)).next())})},s={tileSize:256,minZoom:0,maxZoom:Infinity,zoomOffset:0},f=function(b){return n(void 0,null,Object(he.a)().mark(function _(){return Object(he.a)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",new Promise(function(P){var C=Object(B.a)(b.bounds,4),O=C[0],w=C[1],S=C[2],I=C[3],j={layers:{testTile:{features:[{type:"Feature",properties:{key:b.x+"/"+b.y+"/"+b.z,x:(O+S)/2,y:(w+I)/2},geometry:{type:"LineString",coordinates:[[S,I],[S,w],[O,w],[O,w]]}}]}}};P(j)}));case 1:case"end":return M.stop()}},_)}))};function u(d,b){var _=function(P){return f(P)},x=r(i(i({},s),b),{getTileData:_});return{data:d,dataArray:[],tilesetOptions:x,isTile:!0}}},heNW:function(br,Ot){function Ee(he,B,L){switch(L.length){case 0:return he.call(B);case 1:return he.call(B,L[0]);case 2:return he.call(B,L[0],L[1]);case 3:return he.call(B,L[0],L[1],L[2])}return he.apply(B,L)}br.exports=Ee},hi0z:function(br,Ot,Ee){"use strict";(function(he,B){br.exports=B()})(this,function(){function he(h){var i=[];return h.AMapUI&&i.push(B(h.AMapUI)),h.Loca&&i.push(L(h.Loca)),Promise.all(i)}function B(h){return new Promise(function(i,r){var n=[];if(h.plugins)for(var s=0;s<h.plugins.length;s+=1)e.AMapUI.plugins.indexOf(h.plugins[s])==-1&&n.push(h.plugins[s]);if(g.AMapUI===o.failed)r("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(g.AMapUI===o.notload){g.AMapUI=o.loading,e.AMapUI.version=h.version||e.AMapUI.version,s=e.AMapUI.version;var f=document.body||document.head,u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/ui/"+s+"/main.js",u.onerror=function(d){g.AMapUI=o.failed,r("\u8BF7\u6C42 AMapUI \u5931\u8D25")},u.onload=function(){if(g.AMapUI=o.loaded,n.length)window.AMapUI.loadUI(n,function(){for(var d=0,b=n.length;d<b;d++){var _=n[d].split("/").slice(-1)[0];window.AMapUI[_]=arguments[d]}for(i();v.AMapUI.length;)v.AMapUI.splice(0,1)[0]()});else for(i();v.AMapUI.length;)v.AMapUI.splice(0,1)[0]()},f.appendChild(u)}else g.AMapUI===o.loaded?h.version&&h.version!==e.AMapUI.version?r("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):n.length?window.AMapUI.loadUI(n,function(){for(var d=0,b=n.length;d<b;d++){var _=n[d].split("/").slice(-1)[0];window.AMapUI[_]=arguments[d]}i()}):i():h.version&&h.version!==e.AMapUI.version?r("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):v.AMapUI.push(function(d){d?r(d):n.length?window.AMapUI.loadUI(n,function(){for(var b=0,_=n.length;b<_;b++){var x=n[b].split("/").slice(-1)[0];window.AMapUI[x]=arguments[b]}i()}):i()})})}function L(h){return new Promise(function(i,r){if(g.Loca===o.failed)r("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(g.Loca===o.notload){g.Loca=o.loading,e.Loca.version=h.version||e.Loca.version;var n=e.Loca.version,s=e.AMap.version.startsWith("2"),f=n.startsWith("2");if(s&&!f||!s&&f)r("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{s=e.key,f=document.body||document.head;var u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/loca?v="+n+"&key="+s,u.onerror=function(d){g.Loca=o.failed,r("\u8BF7\u6C42 AMapUI \u5931\u8D25")},u.onload=function(){for(g.Loca=o.loaded,i();v.Loca.length;)v.Loca.splice(0,1)[0]()},f.appendChild(u)}}else g.Loca===o.loaded?h.version&&h.version!==e.Loca.version?r("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):i():h.version&&h.version!==e.Loca.version?r("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):v.Loca.push(function(d){d?r(d):r()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(h){h.notload="notload",h.loading="loading",h.loaded="loaded",h.failed="failed"})(o||(o={}));var e={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},g={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},v={AMap:[],AMapUI:[],Loca:[]},p=[],c=function(i){typeof i=="function"&&(g.AMap===o.loaded?i(window.AMap):p.push(i))};return{load:function(i){return new Promise(function(r,n){if(g.AMap==o.failed)n("");else if(g.AMap==o.notload){var s=i.key,f=i.version,u=i.plugins;s?(window.AMap&&location.host!=="lbs.amap.com"&&n("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),e.key=s,e.AMap.version=f||e.AMap.version,e.AMap.plugins=u||e.AMap.plugins,g.AMap=o.loading,f=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)g.AMap=o.failed,n(b);else for(g.AMap=o.loaded,he(i).then(function(){r(window.AMap)}).catch(n);p.length;)p.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+e.AMap.version+"&key="+s+"&plugin="+e.AMap.plugins.join(","),u.onerror=function(b){g.AMap=o.failed,n(b)},f.appendChild(u)):n("\u8BF7\u586B\u5199key")}else if(g.AMap==o.loaded)if(i.key&&i.key!==e.key)n("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(i.version&&i.version!==e.AMap.version)n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(s=[],i.plugins)for(f=0;f<i.plugins.length;f+=1)e.AMap.plugins.indexOf(i.plugins[f])==-1&&s.push(i.plugins[f]);s.length?window.AMap.plugin(s,function(){he(i).then(function(){r(window.AMap)}).catch(n)}):he(i).then(function(){r(window.AMap)}).catch(n)}else if(i.key&&i.key!==e.key)n("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(i.version&&i.version!==e.AMap.version)n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var d=[];if(i.plugins)for(f=0;f<i.plugins.length;f+=1)e.AMap.plugins.indexOf(i.plugins[f])==-1&&d.push(i.plugins[f]);c(function(){d.length?window.AMap.plugin(d,function(){he(i).then(function(){r(window.AMap)}).catch(n)}):he(i).then(function(){r(window.AMap)}).catch(n)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,e={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},g={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},v={AMap:[],AMapUI:[],Loca:[]}}}})},hypo:function(br,Ot,Ee){var he=Ee("O0oS");function B(L,o,e){o=="__proto__"&&he?he(L,o,{configurable:!0,enumerable:!0,value:e,writable:!0}):L[o]=e}br.exports=B},hzCD:function(br,Ot,Ee){var he=Ee("EA7m"),B=Ee("0Q2g"),L=he(B);br.exports=L},ia6Y:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return u});var he=Ee("qLMh"),B=Ee("rAM+"),L=Ee("Hel2"),o=Ee("p9j5"),e=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,i=function(b,_,x){return _ in b?e(b,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):b[_]=x},r=function(b,_){for(var x in _||(_={}))c.call(_,x)&&i(b,x,_[x]);if(p){var M=Object(B.a)(p(_)),P;try{for(M.s();!(P=M.n()).done;){var x=P.value;h.call(_,x)&&i(b,x,_[x])}}catch(C){M.e(C)}finally{M.f()}}return b},n=function(b,_){return g(b,v(_))},s=function(b,_,x){return new Promise(function(M,P){var C=function(I){try{w(x.next(I))}catch(j){P(j)}},O=function(I){try{w(x.throw(I))}catch(j){P(j)}},w=function(I){return I.done?M(I.value):Promise.resolve(I.value).then(C,O)};w((x=x.apply(b,_)).next())})},f=function(b,_,x,M){return s(void 0,null,Object(he.a)().mark(function P(){var C,O;return Object(he.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return C={x:_.x,y:_.y,z:_.z},O=Object(L.F)(b,C),S.abrupt("return",new Promise(function(I){M?M(C,function(j,N){if(j||!N){var W={layers:{defaultLayer:{features:[]}}},H=new o.a(W,_.x,_.y,_.z);I(H)}else{var J={layers:{defaultLayer:{features:N.features}}},Q=new o.a(J,_.x,_.y,_.z);I(Q)}}):Object(L.C)(n(r({},x),{url:O}),function(j,N){if(j||!N){var W={layers:{defaultLayer:{features:[]}}},H=new o.a(W,_.x,_.y,_.z);I(H)}else{var J=JSON.parse(N),Q={layers:{defaultLayer:{features:J}}},ne=new o.a(Q,_.x,_.y,_.z);I(ne)}})}));case 3:case"end":return S.stop()}},P)}))};function u(d,b){var _=function(P,C){return f(d,C,b==null?void 0:b.requestParameters,b.getCustomData)},x=n(r({},b),{getTileData:_});return{dataArray:[],tilesetOptions:x,isTile:!0}}},itsj:function(br,Ot){function Ee(he,B){if(!(B==="constructor"&&typeof he[B]=="function")&&B!="__proto__")return he[B]}br.exports=Ee},jCWc:function(br,Ot,Ee){"use strict";var he=Ee("EFp3"),B=Ee.n(he),L=Ee("1GLa")},"jbM+":function(br,Ot,Ee){var he=Ee("R/W3");function B(L,o){var e=L==null?0:L.length;return!!e&&he(L,o,0)>-1}br.exports=B},jeLo:function(br,Ot,Ee){var he=Ee("juv8"),B=Ee("mTTR");function L(o){return he(o,B(o))}br.exports=L},juv8:function(br,Ot,Ee){var he=Ee("MrPd"),B=Ee("hypo");function L(o,e,g,v){var p=!g;g||(g={});for(var c=-1,h=e.length;++c<h;){var i=e[c],r=v?v(g[i],o[i],i,g,o):void 0;r===void 0&&(r=o[i]),p?B(g,i,r):he(g,i,r)}return g}br.exports=L},kPKH:function(br,Ot,Ee){"use strict";var he=Ee("/kpp");Ot.a=he.a},"kVK+":function(br,Ot){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ot.read=function(Ee,he,B,L,o){var e,g,v=o*8-L-1,p=(1<<v)-1,c=p>>1,h=-7,i=B?o-1:0,r=B?-1:1,n=Ee[he+i];for(i+=r,e=n&(1<<-h)-1,n>>=-h,h+=v;h>0;e=e*256+Ee[he+i],i+=r,h-=8);for(g=e&(1<<-h)-1,e>>=-h,h+=L;h>0;g=g*256+Ee[he+i],i+=r,h-=8);if(e===0)e=1-c;else{if(e===p)return g?NaN:(n?-1:1)*Infinity;g=g+Math.pow(2,L),e=e-c}return(n?-1:1)*g*Math.pow(2,e-L)},Ot.write=function(Ee,he,B,L,o,e){var g,v,p,c=e*8-o-1,h=(1<<c)-1,i=h>>1,r=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,n=L?0:e-1,s=L?1:-1,f=he<0||he===0&&1/he<0?1:0;for(he=Math.abs(he),isNaN(he)||he===Infinity?(v=isNaN(he)?1:0,g=h):(g=Math.floor(Math.log(he)/Math.LN2),he*(p=Math.pow(2,-g))<1&&(g--,p*=2),g+i>=1?he+=r/p:he+=r*Math.pow(2,1-i),he*p>=2&&(g++,p/=2),g+i>=h?(v=0,g=h):g+i>=1?(v=(he*p-1)*Math.pow(2,o),g=g+i):(v=he*Math.pow(2,i-1)*Math.pow(2,o),g=0));o>=8;Ee[B+n]=v&255,n+=s,v/=256,o-=8);for(g=g<<o|v,c+=o;c>0;Ee[B+n]=g&255,n+=s,g/=256,c-=8);Ee[B+n-s]|=f*128}},l94r:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return W});var he=Ee("qLMh"),B=Ee("fWQN"),L=Ee("mtLc"),o=Ee("yKVA"),e=Ee("879j"),g=Ee("rAM+"),v=Ee("xp6e"),p=Ee("Hel2"),c=Ee("uhBA"),h=Ee("ISu3"),i=Ee("qxNg");function r(H){if(H.length===0)throw new Error("max requires at least one data point");for(var J=H[0],Q=1;Q<H.length;Q++)H[Q]>J&&(J=H[Q]);return J}function n(H){if(H.length===0)throw new Error("min requires at least one data point");for(var J=H[0],Q=1;Q<H.length;Q++)H[Q]<J&&(J=H[Q]);return J}function s(H){if(H.length===0)return 0;for(var J=H[0],Q=0,ne,K=1;K<H.length;K++)ne=J+H[K]*1,Math.abs(J)>=Math.abs(H[K])?Q+=J-ne+H[K]:Q+=H[K]-ne+J,J=ne;return J+Q*1}function f(H){if(H.length===0)throw new Error("mean requires at least one data point");return s(H)/H.length}var u={min:n,max:r,mean:f,sum:s},d=Ee("0cpV"),b=Object.defineProperty,_=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,P=function(J,Q,ne){return Q in J?b(J,Q,{enumerable:!0,configurable:!0,writable:!0,value:ne}):J[Q]=ne},C=function(J,Q){for(var ne in Q||(Q={}))x.call(Q,ne)&&P(J,ne,Q[ne]);if(_){var K=Object(g.a)(_(Q)),ie;try{for(K.s();!(ie=K.n()).done;){var ne=ie.value;M.call(Q,ne)&&P(J,ne,Q[ne])}}catch(de){K.e(de)}finally{K.f()}}return J},O=function(J,Q,ne){return new Promise(function(K,ie){var de=function(Ue){try{Re(ne.next(Ue))}catch(rt){ie(rt)}},we=function(Ue){try{Re(ne.throw(Ue))}catch(rt){ie(rt)}},Re=function(Ue){return Ue.done?K(Ue.value):Promise.resolve(Ue.value).then(de,we)};Re((ne=ne.apply(J,Q)).next())})},w=p.N.cloneDeep,S=p.N.isFunction,I=p.N.isString,j=p.N.mergeWith;function N(H,J){if(Array.isArray(J))return J}var W=function(H){Object(o.a)(Q,H);var J=Object(e.a)(Q);function Q(ne,K){var ie;return Object(B.a)(this,Q),ie=J.call(this),ie.type="source",ie.isTile=!1,ie.inited=!1,ie.hooks={init:new v.e},ie.parser={type:"geojson"},ie.transforms=[],ie.cluster=!1,ie.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},ie.invalidExtent=!1,ie.dataArrayChanged=!1,ie.cfg={autoRender:!0},ie.originData=ne,ie.initCfg(K),ie.init().then(function(){ie.inited=!0,ie.emit("update",{type:"inited"})}),ie}return Object(L.a)(Q,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(K){return this.clusterIndex.getClusters(this.caculClusterExtent(2),K)}},{key:"getClustersLeaves",value:function(K){return this.clusterIndex.getLeaves(K,Infinity)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(K){var ie=this,de=this.clusterOptions,we=de.method,Re=we===void 0?"sum":we,_e=de.field,Ue=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(K));this.clusterOptions.zoom=K,Ue.forEach(function(rt){rt.id||(rt.properties.point_count=1)}),(_e||S(Re))&&(Ue=Ue.map(function(rt){var Fe=rt.id;if(Fe){var Se=ie.clusterIndex.getLeaves(Fe,Infinity),ye=Se.map(function(xe){return xe.properties}),Oe;if(I(Re)&&_e){var ue=Object(d.c)(ye,_e);Oe=u[Re](ue)}S(Re)&&(Oe=Re(ye)),rt.properties.stat=Oe}else rt.properties.point_count=1;return rt})),this.data=Object(h.a)("geojson")({type:"FeatureCollection",features:Ue}),this.executeTrans()}},{key:"getFeatureById",value:function(K){var ie=this.parser,de=ie.type,we=de===void 0?"geojson":de,Re=ie.geometry;if(we==="geojson"&&!this.cluster){var _e=K<this.originData.features.length?this.originData.features[K]:"null",Ue=w(_e);if((Ue==null?void 0:Ue.properties)&&(this.transforms.length!==0||this.dataArrayChanged)){var rt=this.data.dataArray.find(function(Fe){return Fe._id===K});Ue.properties=rt}return Ue}else return we==="json"&&Re?this.data.dataArray.find(function(Fe){return Fe._id===K}):K<this.data.dataArray.length?this.data.dataArray[K]:"null"}},{key:"updateFeaturePropertiesById",value:function(K,ie){this.data.dataArray=this.data.dataArray.map(function(de){return de._id===K?C(C({},de),ie):de}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(K,ie){var de=this.data.dataArray.find(function(we){return we[K]===ie});return de==null?void 0:de._id}},{key:"setData",value:function(K,ie){var de=this;this.originData=K,this.dataArrayChanged=!1,this.initCfg(ie),this.init().then(function(){de.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var K;(K=this.tileset)==null||K.reloadAll()}},{key:"reloadTilebyId",value:function(K,ie,de){var we;(we=this.tileset)==null||we.reloadTileById(K,ie,de)}},{key:"reloadTileByLnglat",value:function(K,ie,de){var we;(we=this.tileset)==null||we.reloadTileByLnglat(K,ie,de)}},{key:"getTileExtent",value:function(K,ie){var de;return(de=this.tileset)==null?void 0:de.getTileExtent(K,ie)}},{key:"getTileByZXY",value:function(K,ie,de){var we;return(we=this.tileset)==null?void 0:we.getTileByZXY(K,ie,de)}},{key:"reloadTileByExtent",value:function(K,ie){var de;(de=this.tileset)==null||de.reloadTileByExtent(K,ie)}},{key:"destroy",value:function(){var K;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(K=this.tileset)==null||K.destroy()}},{key:"processData",value:function(){return O(this,null,Object(he.a)().mark(function K(){var ie=this;return Object(he.a)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",new Promise(function(Re,_e){try{ie.excuteParser(),ie.initCluster(),ie.executeTrans(),Re({})}catch(Ue){_e(Ue)}}));case 1:case"end":return we.stop()}},K)}))}},{key:"initCfg",value:function(K){this.cfg=j(this.cfg,K,N);var ie=this.cfg;ie&&(ie.parser&&(this.parser=ie.parser),ie.transforms&&(this.transforms=ie.transforms),this.cluster=ie.cluster||!1,ie.clusterOptions&&(this.cluster=!0,this.clusterOptions=C(C({},this.clusterOptions),ie.clusterOptions)))}},{key:"init",value:function(){return O(this,null,Object(he.a)().mark(function K(){return Object(he.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return this.inited=!1,de.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return de.stop()}},K,this)}))}},{key:"excuteParser",value:function(){var K=this.parser,ie=K.type||"geojson",de=Object(h.a)(ie);this.data=de(this.originData,K),this.tileset=this.initTileset(),!K.cancelExtent&&(this.extent=Object(p.s)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(K){this.center=[(K[0]+K[2])/2,(K[1]+K[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var K=this.data.tilesetOptions;if(!!K){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(K),this.tileset;var ie=new p.e(C({},K));return ie}}},{key:"executeTrans",value:function(){var K=this,ie=this.transforms;ie.forEach(function(de){var we=de.type,Re=Object(h.b)(we)(K.data,de);Object.assign(K.data,Re)})}},{key:"initCluster",value:function(){if(!!this.cluster){var K=this.clusterOptions||{};this.clusterIndex=Object(i.a)(this.data,K)}}},{key:"caculClusterExtent",value:function(K){var ie=[[-Infinity,-Infinity],[Infinity,Infinity]];return this.invalidExtent||(ie=Object(p.Q)(Object(p.k)(this.extent),K)),ie[0].concat(ie[1])}}]),Q}(c.EventEmitter)},lJbI:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return L});var he=Ee("OoWq"),B=Ee("0cpV");function L(o,e){var g=e.extent,v=g===void 0?[121.168,30.2828,121.384,30.4219]:g,p=e.coordinates,c=e.width,h=e.height,i=e.min,r=e.max,n=e.format,s=e.operation,f,u,d;if(n===void 0||Object(B.d)(o))f=Array.from(o),u=c,d=h;else{var b=Array.isArray(o)?o:[o];f=Object(he.a)(b,n,s)}var _=Object(B.a)(p,v),x={_id:1,dataArray:[{_id:1,data:f,width:u,height:d,min:i,max:r,coordinates:_}]};return x}},lT4e:function(br,Ot,Ee){"use strict";var he=Ee("MgzW"),B={},L=function(r){};function o(i,r,n,s,f,u,d,b){if(L(r),!i){var _;if(r===void 0)_=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[n,s,f,u,d,b],M=0;_=new Error(r.replace(/%s/g,function(){return x[M++]})),_.name="Invariant Violation"}throw _.framesToPop=1,_}}var e=function(){};if(!1)var g;var v="mixins";function p(i){return i}var c;c={};function h(i,r,n){var s=[],f={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},u={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},d={displayName:function(Q,ne){Q.displayName=ne},mixins:function(Q,ne){if(ne)for(var K=0;K<ne.length;K++)x(Q,ne[K])},childContextTypes:function(Q,ne){Q.childContextTypes=he({},Q.childContextTypes,ne)},contextTypes:function(Q,ne){Q.contextTypes=he({},Q.contextTypes,ne)},getDefaultProps:function(Q,ne){Q.getDefaultProps?Q.getDefaultProps=C(Q.getDefaultProps,ne):Q.getDefaultProps=ne},propTypes:function(Q,ne){Q.propTypes=he({},Q.propTypes,ne)},statics:function(Q,ne){M(Q,ne)},autobind:function(){}};function b(J,Q,ne){for(var K in Q)Q.hasOwnProperty(K)}function _(J,Q){var ne=f.hasOwnProperty(Q)?f[Q]:null;N.hasOwnProperty(Q)&&o(ne==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",Q),J&&o(ne==="DEFINE_MANY"||ne==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",Q)}function x(J,Q){if(!Q){if(!1)var ne,K;return}o(typeof Q!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!r(Q),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var ie=J.prototype,de=ie.__reactAutoBindPairs;Q.hasOwnProperty(v)&&d.mixins(J,Q.mixins);for(var we in Q)if(!!Q.hasOwnProperty(we)&&we!==v){var Re=Q[we],_e=ie.hasOwnProperty(we);if(_(_e,we),d.hasOwnProperty(we))d[we](J,Re);else{var Ue=f.hasOwnProperty(we),rt=typeof Re=="function",Fe=rt&&!Ue&&!_e&&Q.autobind!==!1;if(Fe)de.push(we,Re),ie[we]=Re;else if(_e){var Se=f[we];o(Ue&&(Se==="DEFINE_MANY_MERGED"||Se==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",Se,we),Se==="DEFINE_MANY_MERGED"?ie[we]=C(ie[we],Re):Se==="DEFINE_MANY"&&(ie[we]=O(ie[we],Re))}else ie[we]=Re}}}function M(J,Q){if(!!Q)for(var ne in Q){var K=Q[ne];if(!!Q.hasOwnProperty(ne)){var ie=ne in d;o(!ie,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',ne);var de=ne in J;if(de){var we=u.hasOwnProperty(ne)?u[ne]:null;o(we==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",ne),J[ne]=C(J[ne],K);return}J[ne]=K}}}function P(J,Q){o(J&&Q&&typeof J=="object"&&typeof Q=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var ne in Q)Q.hasOwnProperty(ne)&&(o(J[ne]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",ne),J[ne]=Q[ne]);return J}function C(J,Q){return function(){var K=J.apply(this,arguments),ie=Q.apply(this,arguments);if(K==null)return ie;if(ie==null)return K;var de={};return P(de,K),P(de,ie),de}}function O(J,Q){return function(){J.apply(this,arguments),Q.apply(this,arguments)}}function w(J,Q){var ne=Q.bind(J);if(!1)var K,ie;return ne}function S(J){for(var Q=J.__reactAutoBindPairs,ne=0;ne<Q.length;ne+=2){var K=Q[ne],ie=Q[ne+1];J[K]=w(J,ie)}}var I={componentDidMount:function(){this.__isMounted=!0}},j={componentWillUnmount:function(){this.__isMounted=!1}},N={replaceState:function(Q,ne){this.updater.enqueueReplaceState(this,Q,ne)},isMounted:function(){return!!this.__isMounted}},W=function(){};he(W.prototype,i.prototype,N);function H(J){var Q=p(function(K,ie,de){this.__reactAutoBindPairs.length&&S(this),this.props=K,this.context=ie,this.refs=B,this.updater=de||n,this.state=null;var we=this.getInitialState?this.getInitialState():null;o(typeof we=="object"&&!Array.isArray(we),"%s.getInitialState(): must return an object or null",Q.displayName||"ReactCompositeComponent"),this.state=we});Q.prototype=new W,Q.prototype.constructor=Q,Q.prototype.__reactAutoBindPairs=[],s.forEach(x.bind(null,Q)),x(Q,I),x(Q,J),x(Q,j),Q.getDefaultProps&&(Q.defaultProps=Q.getDefaultProps()),o(Q.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var ne in f)Q.prototype[ne]||(Q.prototype[ne]=null);return Q}return H}br.exports=h},lnY3:function(br,Ot,Ee){},mNz5:function(br,Ot,Ee){var he=Ee("dt0z"),B=0;function L(o){var e=++B;return he(o)+e}br.exports=L},mTTR:function(br,Ot,Ee){var he=Ee("b80T"),B=Ee("QcOe"),L=Ee("MMmD");function o(e){return L(e)?he(e,!0):B(e)}br.exports=o},mc0g:function(br,Ot){function Ee(he){return function(B,L,o){for(var e=-1,g=Object(B),v=o(B),p=v.length;p--;){var c=v[he?p:++e];if(L(g[c],c,g)===!1)break}return B}}br.exports=Ee},mpbz:function(br,Ot,Ee){(function(he,B){br.exports=B()})(this,function(){"use strict";function he(w,S,I,j,N,W){if(!(N-j<=I)){var H=j+N>>1;B(w,S,H,j,N,W%2),he(w,S,I,j,H-1,W+1),he(w,S,I,H+1,N,W+1)}}function B(w,S,I,j,N,W){for(;N>j;){if(N-j>600){var H=N-j+1,J=I-j+1,Q=Math.log(H),ne=.5*Math.exp(2*Q/3),K=.5*Math.sqrt(Q*ne*(H-ne)/H)*(J-H/2<0?-1:1),ie=Math.max(j,Math.floor(I-J*ne/H+K)),de=Math.min(N,Math.floor(I+(H-J)*ne/H+K));B(w,S,I,ie,de,W)}var we=S[2*I+W],Re=j,_e=N;for(L(w,S,j,I),S[2*N+W]>we&&L(w,S,j,N);Re<_e;){for(L(w,S,Re,_e),Re++,_e--;S[2*Re+W]<we;)Re++;for(;S[2*_e+W]>we;)_e--}S[2*j+W]===we?L(w,S,j,_e):(_e++,L(w,S,_e,N)),_e<=I&&(j=_e+1),I<=_e&&(N=_e-1)}}function L(w,S,I,j){o(w,I,j),o(S,2*I,2*j),o(S,2*I+1,2*j+1)}function o(w,S,I){var j=w[S];w[S]=w[I],w[I]=j}function e(w,S,I,j,N,W,H){for(var J=[0,w.length-1,0],Q=[],ne,K;J.length;){var ie=J.pop(),de=J.pop(),we=J.pop();if(de-we<=H){for(var Re=we;Re<=de;Re++)ne=S[2*Re],K=S[2*Re+1],ne>=I&&ne<=N&&K>=j&&K<=W&&Q.push(w[Re]);continue}var _e=Math.floor((we+de)/2);ne=S[2*_e],K=S[2*_e+1],ne>=I&&ne<=N&&K>=j&&K<=W&&Q.push(w[_e]);var Ue=(ie+1)%2;(ie===0?I<=ne:j<=K)&&(J.push(we),J.push(_e-1),J.push(Ue)),(ie===0?N>=ne:W>=K)&&(J.push(_e+1),J.push(de),J.push(Ue))}return Q}function g(w,S,I,j,N,W){for(var H=[0,w.length-1,0],J=[],Q=N*N;H.length;){var ne=H.pop(),K=H.pop(),ie=H.pop();if(K-ie<=W){for(var de=ie;de<=K;de++)v(S[2*de],S[2*de+1],I,j)<=Q&&J.push(w[de]);continue}var we=Math.floor((ie+K)/2),Re=S[2*we],_e=S[2*we+1];v(Re,_e,I,j)<=Q&&J.push(w[we]);var Ue=(ne+1)%2;(ne===0?I-N<=Re:j-N<=_e)&&(H.push(ie),H.push(we-1),H.push(Ue)),(ne===0?I+N>=Re:j+N>=_e)&&(H.push(we+1),H.push(K),H.push(Ue))}return J}function v(w,S,I,j){var N=w-I,W=S-j;return N*N+W*W}var p=function(S){return S[0]},c=function(S){return S[1]},h=function(S,I,j,N,W){I===void 0&&(I=p),j===void 0&&(j=c),N===void 0&&(N=64),W===void 0&&(W=Float64Array),this.nodeSize=N,this.points=S;for(var H=S.length<65536?Uint16Array:Uint32Array,J=this.ids=new H(S.length),Q=this.coords=new W(S.length*2),ne=0;ne<S.length;ne++)J[ne]=ne,Q[2*ne]=I(S[ne]),Q[2*ne+1]=j(S[ne]);he(J,Q,N,0,J.length-1,0)};h.prototype.range=function(S,I,j,N){return e(this.ids,this.coords,S,I,j,N,this.nodeSize)},h.prototype.within=function(S,I,j){return g(this.ids,this.coords,S,I,j,this.nodeSize)};var i={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(S){return S}},r=Math.fround||function(w){return function(S){return w[0]=+S,w[0]}}(new Float32Array(1)),n=function(S){this.options=P(Object.create(i),S),this.trees=new Array(this.options.maxZoom+1)};n.prototype.load=function(S){var I=this.options,j=I.log,N=I.minZoom,W=I.maxZoom,H=I.nodeSize;j&&console.time("total time");var J="prepare "+S.length+" points";j&&console.time(J),this.points=S;for(var Q=[],ne=0;ne<S.length;ne++)!S[ne].geometry||Q.push(f(S[ne],ne));this.trees[W+1]=new h(Q,C,O,H,Float32Array),j&&console.timeEnd(J);for(var K=W;K>=N;K--){var ie=+Date.now();Q=this._cluster(Q,K),this.trees[K]=new h(Q,C,O,H,Float32Array),j&&console.log("z%d: %d clusters in %dms",K,Q.length,+Date.now()-ie)}return j&&console.timeEnd("total time"),this},n.prototype.getClusters=function(S,I){var j=((S[0]+180)%360+360)%360-180,N=Math.max(-90,Math.min(90,S[1])),W=S[2]===180?180:((S[2]+180)%360+360)%360-180,H=Math.max(-90,Math.min(90,S[3]));if(S[2]-S[0]>=360)j=-180,W=180;else if(j>W){var J=this.getClusters([j,N,180,H],I),Q=this.getClusters([-180,N,W,H],I);return J.concat(Q)}for(var ne=this.trees[this._limitZoom(I)],K=ne.range(b(j),_(H),b(W),_(N)),ie=[],de=0,we=K;de<we.length;de+=1){var Re=we[de],_e=ne.points[Re];ie.push(_e.numPoints?u(_e):this.points[_e.index])}return ie},n.prototype.getChildren=function(S){var I=this._getOriginId(S),j=this._getOriginZoom(S),N="No cluster with the specified id.",W=this.trees[j];if(!W)throw new Error(N);var H=W.points[I];if(!H)throw new Error(N);for(var J=this.options.radius/(this.options.extent*Math.pow(2,j-1)),Q=W.within(H.x,H.y,J),ne=[],K=0,ie=Q;K<ie.length;K+=1){var de=ie[K],we=W.points[de];we.parentId===S&&ne.push(we.numPoints?u(we):this.points[we.index])}if(ne.length===0)throw new Error(N);return ne},n.prototype.getLeaves=function(S,I,j){I=I||10,j=j||0;var N=[];return this._appendLeaves(N,S,I,j,0),N},n.prototype.getTile=function(S,I,j){var N=this.trees[this._limitZoom(S)],W=Math.pow(2,S),H=this.options,J=H.extent,Q=H.radius,ne=Q/J,K=(j-ne)/W,ie=(j+1+ne)/W,de={features:[]};return this._addTileFeatures(N.range((I-ne)/W,K,(I+1+ne)/W,ie),N.points,I,j,W,de),I===0&&this._addTileFeatures(N.range(1-ne/W,K,1,ie),N.points,W,j,W,de),I===W-1&&this._addTileFeatures(N.range(0,K,ne/W,ie),N.points,-1,j,W,de),de.features.length?de:null},n.prototype.getClusterExpansionZoom=function(S){for(var I=this._getOriginZoom(S)-1;I<=this.options.maxZoom;){var j=this.getChildren(S);if(I++,j.length!==1)break;S=j[0].properties.cluster_id}return I},n.prototype._appendLeaves=function(S,I,j,N,W){for(var H=this.getChildren(I),J=0,Q=H;J<Q.length;J+=1){var ne=Q[J],K=ne.properties;if(K&&K.cluster?W+K.point_count<=N?W+=K.point_count:W=this._appendLeaves(S,K.cluster_id,j,N,W):W<N?W++:S.push(ne),S.length===j)break}return W},n.prototype._addTileFeatures=function(S,I,j,N,W,H){for(var J=0,Q=S;J<Q.length;J+=1){var ne=Q[J],K=I[ne],ie=K.numPoints,de=void 0,we=void 0,Re=void 0;if(ie)de=d(K),we=K.x,Re=K.y;else{var _e=this.points[K.index];de=_e.properties,we=b(_e.geometry.coordinates[0]),Re=_(_e.geometry.coordinates[1])}var Ue={type:1,geometry:[[Math.round(this.options.extent*(we*W-j)),Math.round(this.options.extent*(Re*W-N))]],tags:de},rt=void 0;ie?rt=K.id:this.options.generateId?rt=K.index:this.points[K.index].id&&(rt=this.points[K.index].id),rt!==void 0&&(Ue.id=rt),H.features.push(Ue)}},n.prototype._limitZoom=function(S){return Math.max(this.options.minZoom,Math.min(Math.floor(+S),this.options.maxZoom+1))},n.prototype._cluster=function(S,I){for(var j=[],N=this.options,W=N.radius,H=N.extent,J=N.reduce,Q=N.minPoints,ne=W/(H*Math.pow(2,I)),K=0;K<S.length;K++){var ie=S[K];if(!(ie.zoom<=I)){ie.zoom=I;for(var de=this.trees[I+1],we=de.within(ie.x,ie.y,ne),Re=ie.numPoints||1,_e=Re,Ue=0,rt=we;Ue<rt.length;Ue+=1){var Fe=rt[Ue],Se=de.points[Fe];Se.zoom>I&&(_e+=Se.numPoints||1)}if(_e>Re&&_e>=Q){for(var ye=ie.x*Re,Oe=ie.y*Re,ue=J&&Re>1?this._map(ie,!0):null,xe=(K<<5)+(I+1)+this.points.length,Ae=0,pe=we;Ae<pe.length;Ae+=1){var be=pe[Ae],le=de.points[be];if(!(le.zoom<=I)){le.zoom=I;var z=le.numPoints||1;ye+=le.x*z,Oe+=le.y*z,le.parentId=xe,J&&(ue||(ue=this._map(ie,!0)),J(ue,this._map(le)))}}ie.parentId=xe,j.push(s(ye/_e,Oe/_e,xe,_e,ue))}else if(j.push(ie),_e>1)for(var ae=0,V=we;ae<V.length;ae+=1){var re=V[ae],te=de.points[re];te.zoom<=I||(te.zoom=I,j.push(te))}}}return j},n.prototype._getOriginId=function(S){return S-this.points.length>>5},n.prototype._getOriginZoom=function(S){return(S-this.points.length)%32},n.prototype._map=function(S,I){if(S.numPoints)return I?P({},S.properties):S.properties;var j=this.points[S.index].properties,N=this.options.map(j);return I&&N===j?P({},N):N};function s(w,S,I,j,N){return{x:r(w),y:r(S),zoom:Infinity,id:I,parentId:-1,numPoints:j,properties:N}}function f(w,S){var I=w.geometry.coordinates,j=I[0],N=I[1];return{x:r(b(j)),y:r(_(N)),zoom:Infinity,index:S,parentId:-1}}function u(w){return{type:"Feature",id:w.id,properties:d(w),geometry:{type:"Point",coordinates:[x(w.x),M(w.y)]}}}function d(w){var S=w.numPoints,I=S>=1e4?Math.round(S/1e3)+"k":S>=1e3?Math.round(S/100)/10+"k":S;return P(P({},w.properties),{cluster:!0,cluster_id:w.id,point_count:S,point_count_abbreviated:I})}function b(w){return w/360+.5}function _(w){var S=Math.sin(w*Math.PI/180),I=.5-.25*Math.log((1+S)/(1-S))/Math.PI;return I<0?0:I>1?1:I}function x(w){return(w-.5)*360}function M(w){var S=(180-w*360)*Math.PI/180;return 360*Math.atan(Math.exp(S))/Math.PI-90}function P(w,S){for(var I in S)w[I]=S[I];return w}function C(w){return w.x}function O(w){return w.y}return n})},"mv/X":function(br,Ot,Ee){var he=Ee("ljhN"),B=Ee("MMmD"),L=Ee("wJg7"),o=Ee("GoyQ");function e(g,v,p){if(!o(p))return!1;var c=typeof v;return(c=="number"?B(p)&&L(v,p.length):c=="string"&&v in p)?he(p[v],g):!1}br.exports=e},mwIZ:function(br,Ot,Ee){var he=Ee("ZWtO");function B(L,o,e){var g=L==null?void 0:he(L,o);return g===void 0?e:g}br.exports=B},"n+fv":function(br,Ot,Ee){"use strict";Ee.r(Ot),Ee.d(Ot,"create",function(){return B}),Ee.d(Ot,"clone",function(){return L}),Ee.d(Ot,"length",function(){return o}),Ee.d(Ot,"fromValues",function(){return e}),Ee.d(Ot,"copy",function(){return g}),Ee.d(Ot,"set",function(){return v}),Ee.d(Ot,"add",function(){return p}),Ee.d(Ot,"subtract",function(){return c}),Ee.d(Ot,"multiply",function(){return h}),Ee.d(Ot,"divide",function(){return i}),Ee.d(Ot,"ceil",function(){return r}),Ee.d(Ot,"floor",function(){return n}),Ee.d(Ot,"min",function(){return s}),Ee.d(Ot,"max",function(){return f}),Ee.d(Ot,"round",function(){return u}),Ee.d(Ot,"scale",function(){return d}),Ee.d(Ot,"scaleAndAdd",function(){return b}),Ee.d(Ot,"distance",function(){return _}),Ee.d(Ot,"squaredDistance",function(){return x}),Ee.d(Ot,"squaredLength",function(){return M}),Ee.d(Ot,"negate",function(){return P}),Ee.d(Ot,"inverse",function(){return C}),Ee.d(Ot,"normalize",function(){return O}),Ee.d(Ot,"dot",function(){return w}),Ee.d(Ot,"cross",function(){return S}),Ee.d(Ot,"lerp",function(){return I}),Ee.d(Ot,"hermite",function(){return j}),Ee.d(Ot,"bezier",function(){return N}),Ee.d(Ot,"random",function(){return W}),Ee.d(Ot,"transformMat4",function(){return H}),Ee.d(Ot,"transformMat3",function(){return J}),Ee.d(Ot,"transformQuat",function(){return Q}),Ee.d(Ot,"rotateX",function(){return ne}),Ee.d(Ot,"rotateY",function(){return K}),Ee.d(Ot,"rotateZ",function(){return ie}),Ee.d(Ot,"angle",function(){return de}),Ee.d(Ot,"zero",function(){return we}),Ee.d(Ot,"str",function(){return Re}),Ee.d(Ot,"exactEquals",function(){return _e}),Ee.d(Ot,"equals",function(){return Ue}),Ee.d(Ot,"sub",function(){return rt}),Ee.d(Ot,"mul",function(){return Fe}),Ee.d(Ot,"div",function(){return Se}),Ee.d(Ot,"dist",function(){return ye}),Ee.d(Ot,"sqrDist",function(){return Oe}),Ee.d(Ot,"len",function(){return ue}),Ee.d(Ot,"sqrLen",function(){return xe}),Ee.d(Ot,"forEach",function(){return Ae});var he=Ee("yU0y");function B(){var pe=new he.a(3);return he.a!=Float32Array&&(pe[0]=0,pe[1]=0,pe[2]=0),pe}function L(pe){var be=new he.a(3);return be[0]=pe[0],be[1]=pe[1],be[2]=pe[2],be}function o(pe){var be=pe[0],le=pe[1],z=pe[2];return Math.hypot(be,le,z)}function e(pe,be,le){var z=new he.a(3);return z[0]=pe,z[1]=be,z[2]=le,z}function g(pe,be){return pe[0]=be[0],pe[1]=be[1],pe[2]=be[2],pe}function v(pe,be,le,z){return pe[0]=be,pe[1]=le,pe[2]=z,pe}function p(pe,be,le){return pe[0]=be[0]+le[0],pe[1]=be[1]+le[1],pe[2]=be[2]+le[2],pe}function c(pe,be,le){return pe[0]=be[0]-le[0],pe[1]=be[1]-le[1],pe[2]=be[2]-le[2],pe}function h(pe,be,le){return pe[0]=be[0]*le[0],pe[1]=be[1]*le[1],pe[2]=be[2]*le[2],pe}function i(pe,be,le){return pe[0]=be[0]/le[0],pe[1]=be[1]/le[1],pe[2]=be[2]/le[2],pe}function r(pe,be){return pe[0]=Math.ceil(be[0]),pe[1]=Math.ceil(be[1]),pe[2]=Math.ceil(be[2]),pe}function n(pe,be){return pe[0]=Math.floor(be[0]),pe[1]=Math.floor(be[1]),pe[2]=Math.floor(be[2]),pe}function s(pe,be,le){return pe[0]=Math.min(be[0],le[0]),pe[1]=Math.min(be[1],le[1]),pe[2]=Math.min(be[2],le[2]),pe}function f(pe,be,le){return pe[0]=Math.max(be[0],le[0]),pe[1]=Math.max(be[1],le[1]),pe[2]=Math.max(be[2],le[2]),pe}function u(pe,be){return pe[0]=Math.round(be[0]),pe[1]=Math.round(be[1]),pe[2]=Math.round(be[2]),pe}function d(pe,be,le){return pe[0]=be[0]*le,pe[1]=be[1]*le,pe[2]=be[2]*le,pe}function b(pe,be,le,z){return pe[0]=be[0]+le[0]*z,pe[1]=be[1]+le[1]*z,pe[2]=be[2]+le[2]*z,pe}function _(pe,be){var le=be[0]-pe[0],z=be[1]-pe[1],ae=be[2]-pe[2];return Math.hypot(le,z,ae)}function x(pe,be){var le=be[0]-pe[0],z=be[1]-pe[1],ae=be[2]-pe[2];return le*le+z*z+ae*ae}function M(pe){var be=pe[0],le=pe[1],z=pe[2];return be*be+le*le+z*z}function P(pe,be){return pe[0]=-be[0],pe[1]=-be[1],pe[2]=-be[2],pe}function C(pe,be){return pe[0]=1/be[0],pe[1]=1/be[1],pe[2]=1/be[2],pe}function O(pe,be){var le=be[0],z=be[1],ae=be[2],V=le*le+z*z+ae*ae;return V>0&&(V=1/Math.sqrt(V)),pe[0]=be[0]*V,pe[1]=be[1]*V,pe[2]=be[2]*V,pe}function w(pe,be){return pe[0]*be[0]+pe[1]*be[1]+pe[2]*be[2]}function S(pe,be,le){var z=be[0],ae=be[1],V=be[2],re=le[0],te=le[1],q=le[2];return pe[0]=ae*q-V*te,pe[1]=V*re-z*q,pe[2]=z*te-ae*re,pe}function I(pe,be,le,z){var ae=be[0],V=be[1],re=be[2];return pe[0]=ae+z*(le[0]-ae),pe[1]=V+z*(le[1]-V),pe[2]=re+z*(le[2]-re),pe}function j(pe,be,le,z,ae,V){var re=V*V,te=re*(2*V-3)+1,q=re*(V-2)+V,ve=re*(V-1),Me=re*(3-2*V);return pe[0]=be[0]*te+le[0]*q+z[0]*ve+ae[0]*Me,pe[1]=be[1]*te+le[1]*q+z[1]*ve+ae[1]*Me,pe[2]=be[2]*te+le[2]*q+z[2]*ve+ae[2]*Me,pe}function N(pe,be,le,z,ae,V){var re=1-V,te=re*re,q=V*V,ve=te*re,Me=3*V*te,De=3*q*re,ze=q*V;return pe[0]=be[0]*ve+le[0]*Me+z[0]*De+ae[0]*ze,pe[1]=be[1]*ve+le[1]*Me+z[1]*De+ae[1]*ze,pe[2]=be[2]*ve+le[2]*Me+z[2]*De+ae[2]*ze,pe}function W(pe,be){be=be||1;var le=he.c()*2*Math.PI,z=he.c()*2-1,ae=Math.sqrt(1-z*z)*be;return pe[0]=Math.cos(le)*ae,pe[1]=Math.sin(le)*ae,pe[2]=z*be,pe}function H(pe,be,le){var z=be[0],ae=be[1],V=be[2],re=le[3]*z+le[7]*ae+le[11]*V+le[15];return re=re||1,pe[0]=(le[0]*z+le[4]*ae+le[8]*V+le[12])/re,pe[1]=(le[1]*z+le[5]*ae+le[9]*V+le[13])/re,pe[2]=(le[2]*z+le[6]*ae+le[10]*V+le[14])/re,pe}function J(pe,be,le){var z=be[0],ae=be[1],V=be[2];return pe[0]=z*le[0]+ae*le[3]+V*le[6],pe[1]=z*le[1]+ae*le[4]+V*le[7],pe[2]=z*le[2]+ae*le[5]+V*le[8],pe}function Q(pe,be,le){var z=le[0],ae=le[1],V=le[2],re=le[3],te=be[0],q=be[1],ve=be[2],Me=ae*ve-V*q,De=V*te-z*ve,ze=z*q-ae*te,We=ae*ze-V*De,He=V*Me-z*ze,$e=z*De-ae*Me,It=re*2;return Me*=It,De*=It,ze*=It,We*=2,He*=2,$e*=2,pe[0]=te+Me+We,pe[1]=q+De+He,pe[2]=ve+ze+$e,pe}function ne(pe,be,le,z){var ae=[],V=[];return ae[0]=be[0]-le[0],ae[1]=be[1]-le[1],ae[2]=be[2]-le[2],V[0]=ae[0],V[1]=ae[1]*Math.cos(z)-ae[2]*Math.sin(z),V[2]=ae[1]*Math.sin(z)+ae[2]*Math.cos(z),pe[0]=V[0]+le[0],pe[1]=V[1]+le[1],pe[2]=V[2]+le[2],pe}function K(pe,be,le,z){var ae=[],V=[];return ae[0]=be[0]-le[0],ae[1]=be[1]-le[1],ae[2]=be[2]-le[2],V[0]=ae[2]*Math.sin(z)+ae[0]*Math.cos(z),V[1]=ae[1],V[2]=ae[2]*Math.cos(z)-ae[0]*Math.sin(z),pe[0]=V[0]+le[0],pe[1]=V[1]+le[1],pe[2]=V[2]+le[2],pe}function ie(pe,be,le,z){var ae=[],V=[];return ae[0]=be[0]-le[0],ae[1]=be[1]-le[1],ae[2]=be[2]-le[2],V[0]=ae[0]*Math.cos(z)-ae[1]*Math.sin(z),V[1]=ae[0]*Math.sin(z)+ae[1]*Math.cos(z),V[2]=ae[2],pe[0]=V[0]+le[0],pe[1]=V[1]+le[1],pe[2]=V[2]+le[2],pe}function de(pe,be){var le=pe[0],z=pe[1],ae=pe[2],V=be[0],re=be[1],te=be[2],q=Math.sqrt(le*le+z*z+ae*ae),ve=Math.sqrt(V*V+re*re+te*te),Me=q*ve,De=Me&&w(pe,be)/Me;return Math.acos(Math.min(Math.max(De,-1),1))}function we(pe){return pe[0]=0,pe[1]=0,pe[2]=0,pe}function Re(pe){return"vec3("+pe[0]+", "+pe[1]+", "+pe[2]+")"}function _e(pe,be){return pe[0]===be[0]&&pe[1]===be[1]&&pe[2]===be[2]}function Ue(pe,be){var le=pe[0],z=pe[1],ae=pe[2],V=be[0],re=be[1],te=be[2];return Math.abs(le-V)<=he.b*Math.max(1,Math.abs(le),Math.abs(V))&&Math.abs(z-re)<=he.b*Math.max(1,Math.abs(z),Math.abs(re))&&Math.abs(ae-te)<=he.b*Math.max(1,Math.abs(ae),Math.abs(te))}var rt=c,Fe=h,Se=i,ye=_,Oe=x,ue=o,xe=M,Ae=function(){var pe=B();return function(be,le,z,ae,V,re){var te,q;for(le||(le=3),z||(z=0),ae?q=Math.min(ae*le+z,be.length):q=be.length,te=z;te<q;te+=le)pe[0]=be[te],pe[1]=be[te+1],pe[2]=be[te+2],V(pe,pe,re),be[te]=pe[0],be[te+1]=pe[1],be[te+2]=pe[2];return be}}()},"oCl/":function(br,Ot,Ee){var he=Ee("CH3K"),B=Ee("LcsW"),L=Ee("MvSz"),o=Ee("0ycA"),e=Object.getOwnPropertySymbols,g=e?function(v){for(var p=[];v;)he(p,L(v)),v=B(v);return p}:o;br.exports=g},"otv/":function(br,Ot,Ee){var he=Ee("nmnc"),B=he?he.prototype:void 0,L=B?B.valueOf:void 0;function o(e){return L?Object(L.call(e)):{}}br.exports=o},p9j5:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return L});var he=Ee("fWQN"),B=Ee("mtLc"),L=function(){function o(e,g,v,p){Object(he.a)(this,o),this.vectorLayerCache={},this.x=g,this.y=v,this.z=p,this.vectorTile=e}return Object(B.a)(o,[{key:"getTileData",value:function(g){if(!g||!this.vectorTile.layers[g])return[];if(this.vectorLayerCache[g])return this.vectorLayerCache[g];var v=this.vectorTile.layers[g];return v.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),o}()},pFRH:function(br,Ot,Ee){var he=Ee("cvCv"),B=Ee("O0oS"),L=Ee("zZ0H"),o=B?function(e,g){return B(e,"toString",{configurable:!0,enumerable:!1,value:he(g),writable:!0})}:L;br.exports=o},q4HE:function(br,Ot){var Ee="\\ud800-\\udfff",he="\\u0300-\\u036f",B="\\ufe20-\\ufe2f",L="\\u20d0-\\u20ff",o=he+B+L,e="\\ufe0e\\ufe0f",g="["+Ee+"]",v="["+o+"]",p="\\ud83c[\\udffb-\\udfff]",c="(?:"+v+"|"+p+")",h="[^"+Ee+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=c+"?",f="["+e+"]?",u="(?:"+n+"(?:"+[h,i,r].join("|")+")"+f+s+")*",d=f+s+u,b="(?:"+[h+v+"?",v,i,r,g].join("|")+")",_=RegExp(p+"(?="+p+")|"+b+d,"g");function x(M){for(var P=_.lastIndex=0;_.test(M);)++P;return P}br.exports=x},q7TX:function(br,Ot,Ee){"use strict";br.exports=function(he){function B(){}var L={log:B,warn:B,error:B};if(!he&&window.console){var o=function(g,v){g[v]=function(){var c=console[v];if(c.apply)c.apply(console,arguments);else for(var h=0;h<arguments.length;h++)c(arguments[h])}};o(L,"log"),o(L,"warn"),o(L,"error")}return L}},qxNg:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return h});var he=Ee("rAM+"),B=Ee("mpbz"),L=Ee.n(B),o=Object.defineProperty,e=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,p=function(n,s,f){return s in n?o(n,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):n[s]=f},c=function(n,s){for(var f in s||(s={}))g.call(s,f)&&p(n,f,s[f]);if(e){var u=Object(he.a)(e(s)),d;try{for(u.s();!(d=u.n()).done;){var f=d.value;v.call(s,f)&&p(n,f,s[f])}}catch(b){u.e(b)}finally{u.f()}}return n};function h(r,n){var s=n.radius,f=s===void 0?40:s,u=n.maxZoom,d=u===void 0?18:u,b=n.minZoom,_=b===void 0?0:b,x=n.zoom,M=x===void 0?2:x;if(r.pointIndex){var P=r.pointIndex.getClusters(r.extent,Math.floor(M));return r.dataArray=i(P),r}var C=new L.a({radius:f,minZoom:_,maxZoom:d}),O={type:"FeatureCollection",features:[]};return O.features=r.dataArray.map(function(w){return{type:"Feature",geometry:{type:"Point",coordinates:w.coordinates},properties:c({},w)}}),C.load(O.features),C}function i(r){return r.map(function(n,s){return c({coordinates:n.geometry.coordinates,_id:s+1},n.properties)})}},"rAM+":function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return B});var he=Ee("Qw5x");function B(L,o){var e=typeof Symbol!="undefined"&&L[Symbol.iterator]||L["@@iterator"];if(!e){if(Array.isArray(L)||(e=Object(he.a)(L))||o&&L&&typeof L.length=="number"){e&&(L=e);var g=0,v=function(){};return{s:v,n:function(){return g>=L.length?{done:!0}:{done:!1,value:L[g++]}},e:function(r){throw r},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,c=!1,h;return{s:function(){e=e.call(L)},n:function(){var r=e.next();return p=r.done,r},e:function(r){c=!0,h=r},f:function(){try{!p&&e.return!=null&&e.return()}finally{if(c)throw h}}}}},rlAn:function(br,Ot,Ee){"use strict";Ee.d(Ot,"default",function(){return w});var he=Ee("ISu3"),B=Ee("gMG2"),L=Ee("5gLl"),o=Ee("3D5h"),e=Ee("BpBL"),g=Ee("5zYK"),v=Ee("ia6Y"),p=Ee("/XxM"),c=Ee("lJbI"),h=Ee("1lnX"),i=Ee("EJlN"),r=Ee("aRQH"),n=Ee("DTW/"),s=Ee("hOQH"),f=Ee("l94r"),u=Ee("qxNg"),d=Ee("Y8BV"),b=Ee("VIsB"),_=Ee("+VLl"),x=Ee("aF1E"),M=Ee("fdMe"),P=Ee("U1ZX"),C=Ee.n(P),O=Ee("ezZc");Object(he.c)("rasterTile",h.a),Object(he.c)("mvt",p.a),Object(he.c)("geojsonvt",o.a),Object(he.c)("testTile",s.a),Object(he.c)("geojson",L.a),Object(he.c)("jsonTile",v.a),Object(he.c)("image",e.a),Object(he.c)("csv",B.a),Object(he.c)("json",g.a),Object(he.c)("raster",c.a),Object(he.c)("rasterRgb",n.a),Object(he.c)("rgb",r.a),Object(he.c)("ndi",i.a),Object(he.d)("cluster",u.a),Object(he.d)("filter",d.a),Object(he.d)("join",x.a),Object(he.d)("map",M.a),Object(he.d)("grid",b.a),Object(he.d)("hexagon",_.a);var w=f.a},rxlC:function(br,Ot,Ee){"use strict";br.exports=B,br.exports.default=B;var he=1e20;function B(v,p,c,h,i,r){this.fontSize=v||24,this.buffer=p===void 0?3:p,this.cutoff=h||.25,this.fontFamily=i||"sans-serif",this.fontWeight=r||"normal",this.radius=c||8;var n=this.size=this.fontSize+this.buffer*2,s=n+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(n/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function L(v,p,c,h,i,r,n){r.fill(he,0,p*c),n.fill(0,0,p*c);for(var s=(p-h)/2,f=0;f<i;f++)for(var u=0;u<h;u++){var d=(f+s)*p+u+s,b=v.data[4*(f*h+u)+3]/255;if(b===1)r[d]=0,n[d]=he;else if(b===0)r[d]=he,n[d]=0;else{var _=Math.max(0,.5-b),x=Math.max(0,b-.5);r[d]=_*_,n[d]=x*x}}}function o(v,p,c,h,i,r,n){for(var s=0;s<p*c;s++){var f=Math.sqrt(h[s])-Math.sqrt(i[s]);v[s]=Math.round(255-255*(f/r+n))}}B.prototype._draw=function(v,p){var c=this.ctx.measureText(v),h=c.width,i=2*this.buffer,r,n,s,f,u,d,b,_;p&&this.useMetrics?(u=Math.floor(c.actualBoundingBoxAscent),_=this.buffer+Math.ceil(c.actualBoundingBoxAscent),d=this.buffer,b=this.buffer,n=Math.min(this.size,Math.ceil(c.actualBoundingBoxRight-c.actualBoundingBoxLeft)),f=Math.min(this.size-d,Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)),r=n+i,s=f+i,this.ctx.textBaseline="alphabetic"):(r=n=this.size,s=f=this.size,u=19*this.fontSize/24,d=b=0,_=this.middle,this.ctx.textBaseline="middle");var x;n&&f&&(this.ctx.clearRect(b,d,n,f),this.ctx.fillText(v,this.buffer,_),x=this.ctx.getImageData(b,d,n,f));var M=new Uint8ClampedArray(r*s);return L(x,r,s,n,f,this.gridOuter,this.gridInner),e(this.gridOuter,r,s,this.f,this.v,this.z),e(this.gridInner,r,s,this.f,this.v,this.z),o(M,r,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:M,metrics:{width:n,height:f,sdfWidth:r,sdfHeight:s,top:u,left:0,advance:h}}},B.prototype.draw=function(v){return this._draw(v,!1).data},B.prototype.drawWithMetrics=function(v){return this._draw(v,!0)};function e(v,p,c,h,i,r){for(var n=0;n<p;n++)g(v,n,p,c,h,i,r);for(var s=0;s<c;s++)g(v,s*p,1,p,h,i,r)}function g(v,p,c,h,i,r,n){var s,f,u,d;for(r[0]=0,n[0]=-he,n[1]=he,s=0;s<h;s++)i[s]=v[p+s*c];for(s=1,f=0,u=0;s<h;s++){do d=r[f],u=(i[s]-i[d]+s*s-d*d)/(s-d)/2;while(u<=n[f]&&--f>-1);f++,r[f]=s,n[f]=u,n[f+1]=he}for(s=0,f=0;s<h;s++){for(;n[f+1]<s;)f++;d=r[f],v[p+s*c]=i[d]+(s-d)*(s-d)}}},sGsY:function(br,Ot,Ee){"use strict";var he=Ee("wx14"),B=Ee("q1tI"),L=Ee("hkKa"),o=Ee("0n0R"),e=Ee("rePB"),g=Ee("TSYQ"),v=Ee.n(g),p=Ee("H84U"),c=Ee("/ezw"),h=Ee("B6l+"),i=Ee.n(h),r=function(N){var W=N.value,H=N.formatter,J=N.precision,Q=N.decimalSeparator,ne=N.groupSeparator,K=ne===void 0?"":ne,ie=N.prefixCls,de;if(typeof H=="function")de=H(W);else{var we=String(W),Re=we.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Re||we==="-")de=we;else{var _e=Re[1],Ue=Re[2]||"0",rt=Re[4]||"";Ue=Ue.replace(/\B(?=(\d{3})+(?!\d))/g,K),typeof J=="number"&&(rt=i()(rt,J,"0").slice(0,J>0?J:0)),rt&&(rt="".concat(Q).concat(rt)),de=[B.createElement("span",{key:"int",className:"".concat(ie,"-content-value-int")},_e,Ue),rt&&B.createElement("span",{key:"decimal",className:"".concat(ie,"-content-value-decimal")},rt)]}}return B.createElement("span",{className:"".concat(ie,"-content-value")},de)},n=r,s=function(N){var W=N.prefixCls,H=N.className,J=N.style,Q=N.valueStyle,ne=N.value,K=ne===void 0?0:ne,ie=N.title,de=N.valueRender,we=N.prefix,Re=N.suffix,_e=N.loading,Ue=_e===void 0?!1:_e,rt=N.direction,Fe=N.onMouseEnter,Se=N.onMouseLeave,ye=N.decimalSeparator,Oe=ye===void 0?".":ye,ue=N.groupSeparator,xe=ue===void 0?",":ue,Ae=B.createElement(n,Object(he.a)({decimalSeparator:Oe,groupSeparator:xe},N,{value:K})),pe=v()(W,Object(e.a)({},"".concat(W,"-rtl"),rt==="rtl"),H);return B.createElement("div",{className:pe,style:J,onMouseEnter:Fe,onMouseLeave:Se},ie&&B.createElement("div",{className:"".concat(W,"-title")},ie),B.createElement(c.a,{paragraph:!1,loading:Ue,className:"".concat(W,"-skeleton")},B.createElement("div",{style:Q,className:"".concat(W,"-content")},we&&B.createElement("span",{className:"".concat(W,"-content-prefix")},we),de?de(Ae):Ae,Re&&B.createElement("span",{className:"".concat(W,"-content-suffix")},Re))))},f=Object(p.c)({prefixCls:"statistic"})(s),u=f,d=Ee("ODXe"),b=Ee("QQZ/"),_=Ee.n(b),x=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function M(j,N){var W=j,H=/\[[^\]]*]/g,J=(N.match(H)||[]).map(function(ie){return ie.slice(1,-1)}),Q=N.replace(H,"[]"),ne=x.reduce(function(ie,de){var we=Object(d.a)(de,2),Re=we[0],_e=we[1];if(ie.includes(Re)){var Ue=Math.floor(W/_e);return W-=Ue*_e,ie.replace(new RegExp("".concat(Re,"+"),"g"),function(rt){var Fe=rt.length;return _()(Ue.toString(),Fe,"0")})}return ie},Q),K=0;return ne.replace(H,function(){var ie=J[K];return K+=1,ie})}function P(j,N){var W=N.format,H=W===void 0?"":W,J=new Date(j).getTime(),Q=Date.now(),ne=Math.max(J-Q,0);return M(ne,H)}var C=1e3/30;function O(j){return new Date(j).getTime()}var w=function(N){var W=N.value,H=N.format,J=H===void 0?"HH:mm:ss":H,Q=N.onChange,ne=N.onFinish,K=Object(L.a)(),ie=B.useRef(null),de=function(){ne==null||ne(),ie.current&&(clearInterval(ie.current),ie.current=null)},we=function(){var rt=O(W);rt>=Date.now()&&(ie.current=setInterval(function(){K(),Q==null||Q(rt-Date.now()),rt<Date.now()&&de()},C))};B.useEffect(function(){return we(),function(){ie.current&&(clearInterval(ie.current),ie.current=null)}},[W]);var Re=function(rt,Fe){return P(rt,Object(he.a)(Object(he.a)({},Fe),{format:J}))},_e=function(rt){return Object(o.a)(rt,{title:void 0})};return B.createElement(u,Object(he.a)({},N,{valueRender:_e,formatter:Re}))},S=B.memo(w);u.Countdown=S;var I=Ot.a=u},sKgW:function(br,Ot){var Ee=9007199254740991,he=Math.floor;function B(L,o){var e="";if(!L||o<1||o>Ee)return e;do o%2&&(e+=L),o=he(o/2),o&&(L+=L);while(o);return e}br.exports=B},t2Dn:function(br,Ot,Ee){var he=Ee("hypo"),B=Ee("ljhN");function L(o,e,g){(g!==void 0&&!B(o[e],g)||g===void 0&&!(e in o))&&he(o,e,g)}br.exports=L},t3DW:function(br,Ot,Ee){"use strict";var he=br.exports={};he.forEach=function(B,L){for(var o=0;o<B.length;o++){var e=L(B[o]);if(e)return e}}},uhBA:function(br,Ot,Ee){"use strict";var he=Object.prototype.hasOwnProperty,B="~";function L(){}Object.create&&(L.prototype=Object.create(null),new L().__proto__||(B=!1));function o(p,c,h){this.fn=p,this.context=c,this.once=h||!1}function e(p,c,h,i,r){if(typeof h!="function")throw new TypeError("The listener must be a function");var n=new o(h,i||p,r),s=B?B+c:c;return p._events[s]?p._events[s].fn?p._events[s]=[p._events[s],n]:p._events[s].push(n):(p._events[s]=n,p._eventsCount++),p}function g(p,c){--p._eventsCount==0?p._events=new L:delete p._events[c]}function v(){this._events=new L,this._eventsCount=0}v.prototype.eventNames=function(){var c=[],h,i;if(this._eventsCount===0)return c;for(i in h=this._events)he.call(h,i)&&c.push(B?i.slice(1):i);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},v.prototype.listeners=function(c){var h=B?B+c:c,i=this._events[h];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,s=new Array(n);r<n;r++)s[r]=i[r].fn;return s},v.prototype.listenerCount=function(c){var h=B?B+c:c,i=this._events[h];return i?i.fn?1:i.length:0},v.prototype.emit=function(c,h,i,r,n,s){var f=B?B+c:c;if(!this._events[f])return!1;var u=this._events[f],d=arguments.length,b,_;if(u.fn){switch(u.once&&this.removeListener(c,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,h),!0;case 3:return u.fn.call(u.context,h,i),!0;case 4:return u.fn.call(u.context,h,i,r),!0;case 5:return u.fn.call(u.context,h,i,r,n),!0;case 6:return u.fn.call(u.context,h,i,r,n,s),!0}for(_=1,b=new Array(d-1);_<d;_++)b[_-1]=arguments[_];u.fn.apply(u.context,b)}else{var x=u.length,M;for(_=0;_<x;_++)switch(u[_].once&&this.removeListener(c,u[_].fn,void 0,!0),d){case 1:u[_].fn.call(u[_].context);break;case 2:u[_].fn.call(u[_].context,h);break;case 3:u[_].fn.call(u[_].context,h,i);break;case 4:u[_].fn.call(u[_].context,h,i,r);break;default:if(!b)for(M=1,b=new Array(d-1);M<d;M++)b[M-1]=arguments[M];u[_].fn.apply(u[_].context,b)}}return!0},v.prototype.on=function(c,h,i){return e(this,c,h,i,!1)},v.prototype.once=function(c,h,i){return e(this,c,h,i,!0)},v.prototype.removeListener=function(c,h,i,r){var n=B?B+c:c;if(!this._events[n])return this;if(!h)return g(this,n),this;var s=this._events[n];if(s.fn)s.fn===h&&(!r||s.once)&&(!i||s.context===i)&&g(this,n);else{for(var f=0,u=[],d=s.length;f<d;f++)(s[f].fn!==h||r&&!s[f].once||i&&s[f].context!==i)&&u.push(s[f]);u.length?this._events[n]=u.length===1?u[0]:u:g(this,n)}return this},v.prototype.removeAllListeners=function(c){var h;return c?(h=B?B+c:c,this._events[h]&&g(this,h)):(this._events=new L,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=B,v.EventEmitter=v,br.exports=v},"vN+2":function(br,Ot){function Ee(){}br.exports=Ee},veWP:function(br,Ot,Ee){"use strict";var he=Object.prototype.hasOwnProperty,B="~";function L(){}Object.create&&(L.prototype=Object.create(null),new L().__proto__||(B=!1));function o(p,c,h){this.fn=p,this.context=c,this.once=h||!1}function e(p,c,h,i,r){if(typeof h!="function")throw new TypeError("The listener must be a function");var n=new o(h,i||p,r),s=B?B+c:c;return p._events[s]?p._events[s].fn?p._events[s]=[p._events[s],n]:p._events[s].push(n):(p._events[s]=n,p._eventsCount++),p}function g(p,c){--p._eventsCount==0?p._events=new L:delete p._events[c]}function v(){this._events=new L,this._eventsCount=0}v.prototype.eventNames=function(){var c=[],h,i;if(this._eventsCount===0)return c;for(i in h=this._events)he.call(h,i)&&c.push(B?i.slice(1):i);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},v.prototype.listeners=function(c){var h=B?B+c:c,i=this._events[h];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,s=new Array(n);r<n;r++)s[r]=i[r].fn;return s},v.prototype.listenerCount=function(c){var h=B?B+c:c,i=this._events[h];return i?i.fn?1:i.length:0},v.prototype.emit=function(c,h,i,r,n,s){var f=B?B+c:c;if(!this._events[f])return!1;var u=this._events[f],d=arguments.length,b,_;if(u.fn){switch(u.once&&this.removeListener(c,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,h),!0;case 3:return u.fn.call(u.context,h,i),!0;case 4:return u.fn.call(u.context,h,i,r),!0;case 5:return u.fn.call(u.context,h,i,r,n),!0;case 6:return u.fn.call(u.context,h,i,r,n,s),!0}for(_=1,b=new Array(d-1);_<d;_++)b[_-1]=arguments[_];u.fn.apply(u.context,b)}else{var x=u.length,M;for(_=0;_<x;_++)switch(u[_].once&&this.removeListener(c,u[_].fn,void 0,!0),d){case 1:u[_].fn.call(u[_].context);break;case 2:u[_].fn.call(u[_].context,h);break;case 3:u[_].fn.call(u[_].context,h,i);break;case 4:u[_].fn.call(u[_].context,h,i,r);break;default:if(!b)for(M=1,b=new Array(d-1);M<d;M++)b[M-1]=arguments[M];u[_].fn.apply(u[_].context,b)}}return!0},v.prototype.on=function(c,h,i){return e(this,c,h,i,!1)},v.prototype.once=function(c,h,i){return e(this,c,h,i,!0)},v.prototype.removeListener=function(c,h,i,r){var n=B?B+c:c;if(!this._events[n])return this;if(!h)return g(this,n),this;var s=this._events[n];if(s.fn)s.fn===h&&(!r||s.once)&&(!i||s.context===i)&&g(this,n);else{for(var f=0,u=[],d=s.length;f<d;f++)(s[f].fn!==h||r&&!s[f].once||i&&s[f].context!==i)&&u.push(s[f]);u.length?this._events[n]=u.length===1?u[0]:u:g(this,n)}return this},v.prototype.removeAllListeners=function(c){var h;return c?(h=B?B+c:c,this._events[h]&&g(this,h)):(this._events=new L,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=B,v.EventEmitter=v,br.exports=v},"w/wX":function(br,Ot,Ee){var he=Ee("QqLw"),B=Ee("ExA7"),L="[object Set]";function o(e){return B(e)&&he(e)==L}br.exports=o},w4Tj:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return L});var he=Ee("oZsa");function B(o,e){for(;!Object.prototype.hasOwnProperty.call(o,e)&&(o=Object(he.a)(o),o!==null););return o}function L(){return typeof Reflect!="undefined"&&Reflect.get?L=Reflect.get.bind():L=function(e,g,v){var p=B(e,g);if(!!p){var c=Object.getOwnPropertyDescriptor(p,g);return c.get?c.get.call(arguments.length<3?e:v):c.value}},L.apply(this,arguments)}},wclG:function(br,Ot,Ee){var he=Ee("pFRH"),B=Ee("88Gu"),L=B(he);br.exports=L},wnTG:function(br,Ot,Ee){"use strict";var he=Ee("UL9e");br.exports=function(o){o=o||{};var e=o.reporter,g=he.getOption(o,"async",!0),v=he.getOption(o,"auto",!0);v&&!g&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),g=!0);var p=B(),c,h=!1;function i(b,_){!h&&v&&g&&p.size()===0&&s(),p.add(b,_)}function r(){for(h=!0;p.size();){var b=p;p=B(),b.process()}h=!1}function n(b){h||(b===void 0&&(b=g),c&&(u(c),c=null),b?s():r())}function s(){c=d(r)}function f(){p={},batchSize=0,topLevel=0,bottomLevel=0}function u(b){var _=clearTimeout;return _(b)}function d(b){var _=function(M){return setTimeout(M,0)};return _(b)}return{add:i,force:n}};function B(){var L={},o=0,e=0,g=0;function v(h,i){i||(i=h,h=0),h>e?e=h:h<g&&(g=h),L[h]||(L[h]=[]),L[h].push(i),o++}function p(){for(var h=g;h<=e;h++)for(var i=L[h],r=0;r<i.length;r++){var n=i[r];n()}}function c(){return o}return{add:v,process:p,size:c}}},wrZu:function(br,Ot,Ee){var he=Ee("+K+b"),B=Ee("XYm9"),L=Ee("b2z7"),o=Ee("otv/"),e=Ee("yP5f"),g="[object Boolean]",v="[object Date]",p="[object Map]",c="[object Number]",h="[object RegExp]",i="[object Set]",r="[object String]",n="[object Symbol]",s="[object ArrayBuffer]",f="[object DataView]",u="[object Float32Array]",d="[object Float64Array]",b="[object Int8Array]",_="[object Int16Array]",x="[object Int32Array]",M="[object Uint8Array]",P="[object Uint8ClampedArray]",C="[object Uint16Array]",O="[object Uint32Array]";function w(S,I,j){var N=S.constructor;switch(I){case s:return he(S);case g:case v:return new N(+S);case f:return B(S,j);case u:case d:case b:case _:case x:case M:case P:case C:case O:return e(S,j);case p:return new N;case c:case r:return new N(S);case h:return L(S);case i:return new N;case n:return o(S)}}br.exports=w},xbqb:function(br,Ot){function Ee(he,B){if(!(he instanceof B))throw new TypeError("Cannot call a class as a function")}br.exports=Ee,br.exports.__esModule=!0,br.exports.default=br.exports},xdlL:function(br,Ot,Ee){"use strict";Ee.d(Ot,"a",function(){return L});var he=Ee("iZzK"),B=Ee("cHpt");function L(o,e,g){return Object(B.a)()?L=Reflect.construct.bind():L=function(p,c,h){var i=[null];i.push.apply(i,c);var r=Function.bind.apply(p,i),n=new r;return h&&Object(he.a)(n,h.prototype),n},L.apply(null,arguments)}},xnQO:function(br,Ot,Ee){"use strict";br.exports=he;function he(B,L){this.x=B,this.y=L}he.prototype={clone:function(){return new he(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,o){return this.clone()._rotateAround(L,o)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var o=L.x-this.x,e=L.y-this.y;return o*o+e*e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,o){return Math.atan2(this.x*o-this.y*L,this.x*L+this.y*o)},_matMult:function(L){var o=L[0]*this.x+L[1]*this.y,e=L[2]*this.x+L[3]*this.y;return this.x=o,this.y=e,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var o=Math.cos(L),e=Math.sin(L),g=o*this.x-e*this.y,v=e*this.x+o*this.y;return this.x=g,this.y=v,this},_rotateAround:function(L,o){var e=Math.cos(L),g=Math.sin(L),v=o.x+e*(this.x-o.x)-g*(this.y-o.y),p=o.y+g*(this.x-o.x)+e*(this.y-o.y);return this.x=v,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},he.convert=function(B){return B instanceof he?B:Array.isArray(B)?new he(B[0],B[1]):B}},xp6e:function(br,Ot,Ee){"use strict";(function(he){Ee.d(Ot,"a",function(){return xe}),Ee.d(Ot,"b",function(){return ue}),Ee.d(Ot,"c",function(){return Ae}),Ee.d(Ot,"d",function(){return Oe}),Ee.d(Ot,"e",function(){return we});function B(pe,be,le,z){function ae(V){return V instanceof le?V:new le(function(re){re(V)})}return new(le||(le=Promise))(function(V,re){function te(Me){try{ve(z.next(Me))}catch(De){re(De)}}function q(Me){try{ve(z.throw(Me))}catch(De){re(De)}}function ve(Me){Me.done?V(Me.value):ae(Me.value).then(te,q)}ve((z=z.apply(pe,be||[])).next())})}function L(pe,be){var le={label:0,sent:function(){if(V[0]&1)throw V[1];return V[1]},trys:[],ops:[]},z,ae,V,re;return re={next:te(0),throw:te(1),return:te(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function te(ve){return function(Me){return q([ve,Me])}}function q(ve){if(z)throw new TypeError("Generator is already executing.");for(;le;)try{if(z=1,ae&&(V=ve[0]&2?ae.return:ve[0]?ae.throw||((V=ae.return)&&V.call(ae),0):ae.next)&&!(V=V.call(ae,ve[1])).done)return V;switch(ae=0,V&&(ve=[ve[0]&2,V.value]),ve[0]){case 0:case 1:V=ve;break;case 4:return le.label++,{value:ve[1],done:!1};case 5:le.label++,ae=ve[1],ve=[0];continue;case 7:ve=le.ops.pop(),le.trys.pop();continue;default:if(V=le.trys,!(V=V.length>0&&V[V.length-1])&&(ve[0]===6||ve[0]===2)){le=0;continue}if(ve[0]===3&&(!V||ve[1]>V[0]&&ve[1]<V[3])){le.label=ve[1];break}if(ve[0]===6&&le.label<V[1]){le.label=V[1],V=ve;break}if(V&&le.label<V[2]){le.label=V[2],le.ops.push(ve);break}V[2]&&le.ops.pop(),le.trys.pop();continue}ve=be.call(pe,le)}catch(Me){ve=[6,Me],ae=0}finally{z=V=0}if(ve[0]&5)throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}}function o(pe,be){var le=typeof Symbol=="function"&&pe[Symbol.iterator];if(!le)return pe;var z=le.call(pe),ae,V=[],re;try{for(;(be===void 0||be-- >0)&&!(ae=z.next()).done;)V.push(ae.value)}catch(te){re={error:te}}finally{try{ae&&!ae.done&&(le=z.return)&&le.call(z)}finally{if(re)throw re.error}}return V}function e(pe,be,le){if(le||arguments.length===2)for(var z=0,ae=be.length,V;z<ae;z++)(V||!(z in be))&&(V||(V=Array.prototype.slice.call(be,0,z)),V[z]=be[z]);return pe.concat(V||Array.prototype.slice.call(be))}function g(pe){return pe&&pe.__esModule&&Object.prototype.hasOwnProperty.call(pe,"default")?pe.default:pe}var v={exports:{}},p={exports:{}},c={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=le;function le(z){return z&&typeof z.length=="number"&&z.length>=0&&z.length%1==0}pe.exports=be.default})(c,c.exports);var h={},i={exports:{}},r={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=function(le){return function(){for(var z=[],ae=arguments.length;ae--;)z[ae]=arguments[ae];var V=z.pop();return le.call(this,z,V)}},pe.exports=be.default})(r,r.exports);var n={};Object.defineProperty(n,"__esModule",{value:!0}),n.fallback=d,n.wrap=b;var s=n.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,f=n.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,u=n.hasNextTick=typeof he=="object"&&typeof he.nextTick=="function";function d(pe){setTimeout(pe,0)}function b(pe){return function(be){for(var le=[],z=arguments.length-1;z-- >0;)le[z]=arguments[z+1];return pe(function(){return be.apply(void 0,le)})}}var _;s?_=queueMicrotask:f?_=setImmediate:u?_=he.nextTick:_=d,n.default=b(_),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=q;var le=r.exports,z=te(le),ae=n,V=te(ae),re=h;function te(De){return De&&De.__esModule?De:{default:De}}function q(De){return(0,re.isAsync)(De)?function(){for(var ze=[],We=arguments.length;We--;)ze[We]=arguments[We];var He=ze.pop(),$e=De.apply(this,ze);return ve($e,He)}:(0,z.default)(function(ze,We){var He;try{He=De.apply(this,ze)}catch($e){return We($e)}if(He&&typeof He.then=="function")return ve(He,We);We(null,He)})}function ve(De,ze){return De.then(function(We){Me(ze,null,We)},function(We){Me(ze,We&&We.message?We:new Error(We))})}function Me(De,ze,We){try{De(ze,We)}catch(He){(0,V.default)(function($e){throw $e},He)}}pe.exports=be.default}(i,i.exports),Object.defineProperty(h,"__esModule",{value:!0}),h.isAsyncIterable=h.isAsyncGenerator=h.isAsync=void 0;var x=i.exports,M=P(x);function P(pe){return pe&&pe.__esModule?pe:{default:pe}}function C(pe){return pe[Symbol.toStringTag]==="AsyncFunction"}function O(pe){return pe[Symbol.toStringTag]==="AsyncGenerator"}function w(pe){return typeof pe[Symbol.asyncIterator]=="function"}function S(pe){if(typeof pe!="function")throw new Error("expected a function");return C(pe)?(0,M.default)(pe):pe}h.default=S,h.isAsync=C,h.isAsyncGenerator=O,h.isAsyncIterable=w;var I={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=le;function le(z,ae){if(ae===void 0&&(ae=z.length),!ae)throw new Error("arity is undefined");function V(){for(var re=this,te=[],q=arguments.length;q--;)te[q]=arguments[q];return typeof te[ae-1]=="function"?z.apply(this,te):new Promise(function(ve,Me){te[ae-1]=function(De){for(var ze=[],We=arguments.length-1;We-- >0;)ze[We]=arguments[We+1];if(De)return Me(De);ve(ze.length>1?ze:ze[0])},z.apply(re,te)})}return V}pe.exports=be.default})(I,I.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le=c.exports,z=q(le),ae=h,V=q(ae),re=I.exports,te=q(re);function q(ve){return ve&&ve.__esModule?ve:{default:ve}}be.default=(0,te.default)(function(ve,Me,De){var ze=(0,z.default)(Me)?[]:{};ve(Me,function(We,He,$e){(0,V.default)(We)(function(It){for(var Yt,rr=[],ir=arguments.length-1;ir-- >0;)rr[ir]=arguments[ir+1];rr.length<2&&(Yt=rr,rr=Yt[0]),ze[He]=rr,$e(It)})},function(We){return De(We,ze)})},3),pe.exports=be.default}(p,p.exports);var j={exports:{}},N={exports:{}},W={exports:{}},H={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=le;function le(z){function ae(){for(var V=[],re=arguments.length;re--;)V[re]=arguments[re];if(z!==null){var te=z;z=null,te.apply(this,V)}}return Object.assign(ae,z),ae}pe.exports=be.default})(H,H.exports);var J={exports:{}},Q={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=function(le){return le[Symbol.iterator]&&le[Symbol.iterator]()},pe.exports=be.default})(Q,Q.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=Me;var le=c.exports,z=re(le),ae=Q.exports,V=re(ae);function re(De){return De&&De.__esModule?De:{default:De}}function te(De){var ze=-1,We=De.length;return function(){return++ze<We?{value:De[ze],key:ze}:null}}function q(De){var ze=-1;return function(){var He=De.next();return He.done?null:(ze++,{value:He.value,key:ze})}}function ve(De){var ze=De?Object.keys(De):[],We=-1,He=ze.length;return function $e(){var It=ze[++We];return It==="__proto__"?$e():We<He?{value:De[It],key:It}:null}}function Me(De){if((0,z.default)(De))return te(De);var ze=(0,V.default)(De);return ze?q(ze):ve(De)}pe.exports=be.default}(J,J.exports);var ne={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=le;function le(z){return function(){for(var ae=[],V=arguments.length;V--;)ae[V]=arguments[V];if(z===null)throw new Error("Callback was already called.");var re=z;z=null,re.apply(this,ae)}}pe.exports=be.default})(ne,ne.exports);var K={exports:{}},ie={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le={};be.default=le,pe.exports=be.default})(ie,ie.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=V;var le=ie.exports,z=ae(le);function ae(re){return re&&re.__esModule?re:{default:re}}function V(re,te,q,ve){var Me=!1,De=!1,ze=!1,We=0,He=0;function $e(){We>=te||ze||Me||(ze=!0,re.next().then(function(rr){var ir=rr.value,Br=rr.done;if(!(De||Me)){if(ze=!1,Br){Me=!0,We<=0&&ve(null);return}We++,q(ir,He,It),He++,$e()}}).catch(Yt))}function It(rr,ir){if(We-=1,!De){if(rr)return Yt(rr);if(rr===!1){Me=!0,De=!0;return}if(ir===z.default||Me&&We<=0)return Me=!0,ve(null);$e()}}function Yt(rr){De||(ze=!1,Me=!0,ve(rr))}$e()}pe.exports=be.default}(K,K.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le=H.exports,z=We(le),ae=J.exports,V=We(ae),re=ne.exports,te=We(re),q=h,ve=K.exports,Me=We(ve),De=ie.exports,ze=We(De);function We(He){return He&&He.__esModule?He:{default:He}}be.default=function(He){return function($e,It,Yt){if(Yt=(0,z.default)(Yt),He<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!$e)return Yt(null);if((0,q.isAsyncGenerator)($e))return(0,Me.default)($e,He,It,Yt);if((0,q.isAsyncIterable)($e))return(0,Me.default)($e[Symbol.asyncIterator](),He,It,Yt);var rr=(0,V.default)($e),ir=!1,Br=!1,tr=0,ft=!1;function st(Qe,it){if(!Br)if(tr-=1,Qe)ir=!0,Yt(Qe);else if(Qe===!1)ir=!0,Br=!0;else{if(it===ze.default||ir&&tr<=0)return ir=!0,Yt(null);ft||Tt()}}function Tt(){for(ft=!0;tr<He&&!ir;){var Qe=rr();if(Qe===null){ir=!0,tr<=0&&Yt(null);return}tr+=1,It(Qe.value,Qe.key,(0,te.default)(st))}ft=!1}Tt()}},pe.exports=be.default}(W,W.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le=W.exports,z=q(le),ae=h,V=q(ae),re=I.exports,te=q(re);function q(Me){return Me&&Me.__esModule?Me:{default:Me}}function ve(Me,De,ze,We){return(0,z.default)(De)(Me,(0,V.default)(ze),We)}be.default=(0,te.default)(ve,4),pe.exports=be.default}(N,N.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le=N.exports,z=re(le),ae=I.exports,V=re(ae);function re(q){return q&&q.__esModule?q:{default:q}}function te(q,ve,Me){return(0,z.default)(q,1,ve,Me)}be.default=(0,V.default)(te,3),pe.exports=be.default}(j,j.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=te;var le=p.exports,z=re(le),ae=j.exports,V=re(ae);function re(q){return q&&q.__esModule?q:{default:q}}function te(q,ve){return(0,z.default)(V.default,q,ve)}pe.exports=be.default}(v,v.exports);var de=g(v.exports),we=function(){function pe(){this.args=[],this.tasks=[]}return pe.prototype.call=function(){for(var be=arguments,le=[],z=0;z<arguments.length;z++)le[z]=be[z];return this.args=le,de(this.tasks)},pe.prototype.tap=function(be,le){var z=this;this.tasks.push(function(ae){le.apply(void 0,e([],o(z.args),!1)),ae(null,be)})},pe}(),Re={exports:{}},_e={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le=c.exports,z=It(le),ae=ie.exports,V=It(ae),re=N.exports,te=It(re),q=H.exports,ve=It(q),Me=ne.exports,De=It(Me),ze=h,We=It(ze),He=I.exports,$e=It(He);function It(Br){return Br&&Br.__esModule?Br:{default:Br}}function Yt(Br,tr,ft){ft=(0,ve.default)(ft);var st=0,Tt=0,Qe=Br.length,it=!1;Qe===0&&ft(null);function zt(Qt,Ar){Qt===!1&&(it=!0),it!==!0&&(Qt?ft(Qt):(++Tt===Qe||Ar===V.default)&&ft(null))}for(;st<Qe;st++)tr(Br[st],st,(0,De.default)(zt))}function rr(Br,tr,ft){return(0,te.default)(Br,Infinity,tr,ft)}function ir(Br,tr,ft){var st=(0,z.default)(Br)?Yt:rr;return st(Br,(0,We.default)(tr),ft)}be.default=(0,$e.default)(ir,3),pe.exports=be.default})(_e,_e.exports),function(pe,be){Object.defineProperty(be,"__esModule",{value:!0}),be.default=te;var le=_e.exports,z=re(le),ae=p.exports,V=re(ae);function re(q){return q&&q.__esModule?q:{default:q}}function te(q,ve){return(0,V.default)(z.default,q,ve)}pe.exports=be.default}(Re,Re.exports);var Ue=g(Re.exports),rt=function(){function pe(){this.tasks=[]}return pe.prototype.promise=function(){return Ue(this.tasks)},pe.prototype.tapPromise=function(be,le){var z=this;this.tasks.push(function(ae){return B(z,void 0,void 0,function(){return L(this,function(V){switch(V.label){case 0:return[4,le()];case 1:return V.sent(),ae(null,be),[2]}})})})},pe}(),Fe={exports:{}};(function(pe,be){Object.defineProperty(be,"__esModule",{value:!0});var le=H.exports,z=Me(le),ae=ne.exports,V=Me(ae),re=h,te=Me(re),q=I.exports,ve=Me(q);function Me(ze){return ze&&ze.__esModule?ze:{default:ze}}function De(ze,We){if(We=(0,z.default)(We),!Array.isArray(ze))return We(new Error("First argument to waterfall must be an array of functions"));if(!ze.length)return We();var He=0;function $e(Yt){var rr=(0,te.default)(ze[He++]);rr.apply(void 0,Yt.concat([(0,V.default)(It)]))}function It(Yt){for(var rr=[],ir=arguments.length-1;ir-- >0;)rr[ir]=arguments[ir+1];if(Yt!==!1){if(Yt||He===ze.length)return We.apply(void 0,[Yt].concat(rr));$e(rr)}}$e([])}be.default=(0,ve.default)(De),pe.exports=be.default})(Fe,Fe.exports);var Se=g(Fe.exports),ye=function(){function pe(){this.tasks=[]}return pe.prototype.call=function(){return Se(this.tasks)},pe.prototype.tap=function(be,le){this.tasks.length===0?this.tasks.push(function(z){var ae=le();z(ae?null:!1,ae)}):this.tasks.push(function(z,ae){var V=le.apply(void 0,e([],o(z),!1));ae(V?null:!1,be)})},pe}(),Oe=function(){function pe(){this.tasks=[]}return pe.prototype.call=function(){return de(this.tasks)},pe.prototype.tap=function(be,le){this.tasks.push(function(z){var ae=le();z(ae,be)})},pe}(),ue=function(){function pe(){this.args=[],this.tasks=[]}return pe.prototype.promise=function(){for(var be=arguments,le=[],z=0;z<arguments.length;z++)le[z]=be[z];return this.args=le,de(this.tasks)},pe.prototype.tapPromise=function(be,le){var z=this;this.tasks.push(function(ae){return B(z,void 0,void 0,function(){return L(this,function(V){switch(V.label){case 0:return[4,le.apply(void 0,e([],o(this.args),!1))];case 1:return V.sent(),ae(null,be),[2]}})})})},pe}(),xe=function(){function pe(){this.args=[],this.tasks=[]}return pe.prototype.promise=function(){for(var be=arguments,le=[],z=0;z<arguments.length;z++)le[z]=be[z];return this.args=le,de(this.tasks)},pe.prototype.tapPromise=function(be,le){var z=this;this.tasks.push(function(ae){return B(z,void 0,void 0,function(){var V;return L(this,function(re){switch(re.label){case 0:return[4,le.apply(void 0,e([],o(this.args),!1))];case 1:return V=re.sent(),ae(V,be),[2]}})})})},pe}(),Ae=function(){function pe(){this.tasks=[]}return pe.prototype.promise=function(){return Se(this.tasks)},pe.prototype.tapPromise=function(be,le){this.tasks.length===0?this.tasks.push(function(z){le().then(function(ae){z(null,ae)})}):this.tasks.push(function(z,ae){le(z).then(function(V){ae(null,V)})})},pe}()}).call(this,Ee("Q2Ig"))},yHx3:function(br,Ot){var Ee=Object.prototype,he=Ee.hasOwnProperty;function B(L){var o=L.length,e=new L.constructor(o);return o&&typeof L[0]=="string"&&he.call(L,"index")&&(e.index=L.index,e.input=L.input),e}br.exports=B},yLV6:function(br,Ot,Ee){var he;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(B,L,o,e){"use strict";var g=["","webkit","Moz","MS","ms","o"],v=L.createElement("div"),p="function",c=Math.round,h=Math.abs,i=Date.now;function r(at,Ye,St){return setTimeout(x(at,St),Ye)}function n(at,Ye,St){return Array.isArray(at)?(s(at,St[Ye],St),!0):!1}function s(at,Ye,St){var fr;if(!!at)if(at.forEach)at.forEach(Ye,St);else if(at.length!==e)for(fr=0;fr<at.length;)Ye.call(St,at[fr],fr,at),fr++;else for(fr in at)at.hasOwnProperty(fr)&&Ye.call(St,at[fr],fr,at)}function f(at,Ye,St){var fr="DEPRECATED METHOD: "+Ye+`
`+St+` AT 
`;return function(){var Gr=new Error("get-stack-trace"),hn=Gr&&Gr.stack?Gr.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",un=B.console&&(B.console.warn||B.console.log);return un&&un.call(B.console,fr,hn),at.apply(this,arguments)}}var u;typeof Object.assign!="function"?u=function(Ye){if(Ye===e||Ye===null)throw new TypeError("Cannot convert undefined or null to object");for(var St=Object(Ye),fr=1;fr<arguments.length;fr++){var Gr=arguments[fr];if(Gr!==e&&Gr!==null)for(var hn in Gr)Gr.hasOwnProperty(hn)&&(St[hn]=Gr[hn])}return St}:u=Object.assign;var d=f(function(Ye,St,fr){for(var Gr=Object.keys(St),hn=0;hn<Gr.length;)(!fr||fr&&Ye[Gr[hn]]===e)&&(Ye[Gr[hn]]=St[Gr[hn]]),hn++;return Ye},"extend","Use `assign`."),b=f(function(Ye,St){return d(Ye,St,!0)},"merge","Use `assign`.");function _(at,Ye,St){var fr=Ye.prototype,Gr;Gr=at.prototype=Object.create(fr),Gr.constructor=at,Gr._super=fr,St&&u(Gr,St)}function x(at,Ye){return function(){return at.apply(Ye,arguments)}}function M(at,Ye){return typeof at==p?at.apply(Ye&&Ye[0]||e,Ye):at}function P(at,Ye){return at===e?Ye:at}function C(at,Ye,St){s(I(Ye),function(fr){at.addEventListener(fr,St,!1)})}function O(at,Ye,St){s(I(Ye),function(fr){at.removeEventListener(fr,St,!1)})}function w(at,Ye){for(;at;){if(at==Ye)return!0;at=at.parentNode}return!1}function S(at,Ye){return at.indexOf(Ye)>-1}function I(at){return at.trim().split(/\s+/g)}function j(at,Ye,St){if(at.indexOf&&!St)return at.indexOf(Ye);for(var fr=0;fr<at.length;){if(St&&at[fr][St]==Ye||!St&&at[fr]===Ye)return fr;fr++}return-1}function N(at){return Array.prototype.slice.call(at,0)}function W(at,Ye,St){for(var fr=[],Gr=[],hn=0;hn<at.length;){var un=Ye?at[hn][Ye]:at[hn];j(Gr,un)<0&&fr.push(at[hn]),Gr[hn]=un,hn++}return St&&(Ye?fr=fr.sort(function(Ai,bi){return Ai[Ye]>bi[Ye]}):fr=fr.sort()),fr}function H(at,Ye){for(var St,fr,Gr=Ye[0].toUpperCase()+Ye.slice(1),hn=0;hn<g.length;){if(St=g[hn],fr=St?St+Gr:Ye,fr in at)return fr;hn++}return e}var J=1;function Q(){return J++}function ne(at){var Ye=at.ownerDocument||at;return Ye.defaultView||Ye.parentWindow||B}var K=/mobile|tablet|ip(ad|hone|od)|android/i,ie="ontouchstart"in B,de=H(B,"PointerEvent")!==e,we=ie&&K.test(navigator.userAgent),Re="touch",_e="pen",Ue="mouse",rt="kinect",Fe=25,Se=1,ye=2,Oe=4,ue=8,xe=1,Ae=2,pe=4,be=8,le=16,z=Ae|pe,ae=be|le,V=z|ae,re=["x","y"],te=["clientX","clientY"];function q(at,Ye){var St=this;this.manager=at,this.callback=Ye,this.element=at.element,this.target=at.options.inputTarget,this.domHandler=function(fr){M(at.options.enable,[at])&&St.handler(fr)},this.init()}q.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(ne(this.element),this.evWin,this.domHandler)}};function ve(at){var Ye,St=at.options.inputClass;return St?Ye=St:de?Ye=zr:we?Ye=qe:ie?Ye=Zr:Ye=Qe,new Ye(at,Me)}function Me(at,Ye,St){var fr=St.pointers.length,Gr=St.changedPointers.length,hn=Ye&Se&&fr-Gr==0,un=Ye&(Oe|ue)&&fr-Gr==0;St.isFirst=!!hn,St.isFinal=!!un,hn&&(at.session={}),St.eventType=Ye,De(at,St),at.emit("hammer.input",St),at.recognize(St),at.session.prevInput=St}function De(at,Ye){var St=at.session,fr=Ye.pointers,Gr=fr.length;St.firstInput||(St.firstInput=He(Ye)),Gr>1&&!St.firstMultiple?St.firstMultiple=He(Ye):Gr===1&&(St.firstMultiple=!1);var hn=St.firstInput,un=St.firstMultiple,Qn=un?un.center:hn.center,Ai=Ye.center=$e(fr);Ye.timeStamp=i(),Ye.deltaTime=Ye.timeStamp-hn.timeStamp,Ye.angle=ir(Qn,Ai),Ye.distance=rr(Qn,Ai),ze(St,Ye),Ye.offsetDirection=Yt(Ye.deltaX,Ye.deltaY);var bi=It(Ye.deltaTime,Ye.deltaX,Ye.deltaY);Ye.overallVelocityX=bi.x,Ye.overallVelocityY=bi.y,Ye.overallVelocity=h(bi.x)>h(bi.y)?bi.x:bi.y,Ye.scale=un?tr(un.pointers,fr):1,Ye.rotation=un?Br(un.pointers,fr):0,Ye.maxPointers=St.prevInput?Ye.pointers.length>St.prevInput.maxPointers?Ye.pointers.length:St.prevInput.maxPointers:Ye.pointers.length,We(St,Ye);var na=at.element;w(Ye.srcEvent.target,na)&&(na=Ye.srcEvent.target),Ye.target=na}function ze(at,Ye){var St=Ye.center,fr=at.offsetDelta||{},Gr=at.prevDelta||{},hn=at.prevInput||{};(Ye.eventType===Se||hn.eventType===Oe)&&(Gr=at.prevDelta={x:hn.deltaX||0,y:hn.deltaY||0},fr=at.offsetDelta={x:St.x,y:St.y}),Ye.deltaX=Gr.x+(St.x-fr.x),Ye.deltaY=Gr.y+(St.y-fr.y)}function We(at,Ye){var St=at.lastInterval||Ye,fr=Ye.timeStamp-St.timeStamp,Gr,hn,un,Qn;if(Ye.eventType!=ue&&(fr>Fe||St.velocity===e)){var Ai=Ye.deltaX-St.deltaX,bi=Ye.deltaY-St.deltaY,na=It(fr,Ai,bi);hn=na.x,un=na.y,Gr=h(na.x)>h(na.y)?na.x:na.y,Qn=Yt(Ai,bi),at.lastInterval=Ye}else Gr=St.velocity,hn=St.velocityX,un=St.velocityY,Qn=St.direction;Ye.velocity=Gr,Ye.velocityX=hn,Ye.velocityY=un,Ye.direction=Qn}function He(at){for(var Ye=[],St=0;St<at.pointers.length;)Ye[St]={clientX:c(at.pointers[St].clientX),clientY:c(at.pointers[St].clientY)},St++;return{timeStamp:i(),pointers:Ye,center:$e(Ye),deltaX:at.deltaX,deltaY:at.deltaY}}function $e(at){var Ye=at.length;if(Ye===1)return{x:c(at[0].clientX),y:c(at[0].clientY)};for(var St=0,fr=0,Gr=0;Gr<Ye;)St+=at[Gr].clientX,fr+=at[Gr].clientY,Gr++;return{x:c(St/Ye),y:c(fr/Ye)}}function It(at,Ye,St){return{x:Ye/at||0,y:St/at||0}}function Yt(at,Ye){return at===Ye?xe:h(at)>=h(Ye)?at<0?Ae:pe:Ye<0?be:le}function rr(at,Ye,St){St||(St=re);var fr=Ye[St[0]]-at[St[0]],Gr=Ye[St[1]]-at[St[1]];return Math.sqrt(fr*fr+Gr*Gr)}function ir(at,Ye,St){St||(St=re);var fr=Ye[St[0]]-at[St[0]],Gr=Ye[St[1]]-at[St[1]];return Math.atan2(Gr,fr)*180/Math.PI}function Br(at,Ye){return ir(Ye[1],Ye[0],te)+ir(at[1],at[0],te)}function tr(at,Ye){return rr(Ye[0],Ye[1],te)/rr(at[0],at[1],te)}var ft={mousedown:Se,mousemove:ye,mouseup:Oe},st="mousedown",Tt="mousemove mouseup";function Qe(){this.evEl=st,this.evWin=Tt,this.pressed=!1,q.apply(this,arguments)}_(Qe,q,{handler:function(Ye){var St=ft[Ye.type];St&Se&&Ye.button===0&&(this.pressed=!0),St&ye&&Ye.which!==1&&(St=Oe),!!this.pressed&&(St&Oe&&(this.pressed=!1),this.callback(this.manager,St,{pointers:[Ye],changedPointers:[Ye],pointerType:Ue,srcEvent:Ye}))}});var it={pointerdown:Se,pointermove:ye,pointerup:Oe,pointercancel:ue,pointerout:ue},zt={2:Re,3:_e,4:Ue,5:rt},Qt="pointerdown",Ar="pointermove pointerup pointercancel";B.MSPointerEvent&&!B.PointerEvent&&(Qt="MSPointerDown",Ar="MSPointerMove MSPointerUp MSPointerCancel");function zr(){this.evEl=Qt,this.evWin=Ar,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(zr,q,{handler:function(Ye){var St=this.store,fr=!1,Gr=Ye.type.toLowerCase().replace("ms",""),hn=it[Gr],un=zt[Ye.pointerType]||Ye.pointerType,Qn=un==Re,Ai=j(St,Ye.pointerId,"pointerId");hn&Se&&(Ye.button===0||Qn)?Ai<0&&(St.push(Ye),Ai=St.length-1):hn&(Oe|ue)&&(fr=!0),!(Ai<0)&&(St[Ai]=Ye,this.callback(this.manager,hn,{pointers:St,changedPointers:[Ye],pointerType:un,srcEvent:Ye}),fr&&St.splice(Ai,1))}});var ct={touchstart:Se,touchmove:ye,touchend:Oe,touchcancel:ue},ot="touchstart",xt="touchstart touchmove touchend touchcancel";function Bt(){this.evTarget=ot,this.evWin=xt,this.started=!1,q.apply(this,arguments)}_(Bt,q,{handler:function(Ye){var St=ct[Ye.type];if(St===Se&&(this.started=!0),!!this.started){var fr=Ke.call(this,Ye,St);St&(Oe|ue)&&fr[0].length-fr[1].length==0&&(this.started=!1),this.callback(this.manager,St,{pointers:fr[0],changedPointers:fr[1],pointerType:Re,srcEvent:Ye})}}});function Ke(at,Ye){var St=N(at.touches),fr=N(at.changedTouches);return Ye&(Oe|ue)&&(St=W(St.concat(fr),"identifier",!0)),[St,fr]}var lt={touchstart:Se,touchmove:ye,touchend:Oe,touchcancel:ue},mt="touchstart touchmove touchend touchcancel";function qe(){this.evTarget=mt,this.targetIds={},q.apply(this,arguments)}_(qe,q,{handler:function(Ye){var St=lt[Ye.type],fr=yt.call(this,Ye,St);!fr||this.callback(this.manager,St,{pointers:fr[0],changedPointers:fr[1],pointerType:Re,srcEvent:Ye})}});function yt(at,Ye){var St=N(at.touches),fr=this.targetIds;if(Ye&(Se|ye)&&St.length===1)return fr[St[0].identifier]=!0,[St,St];var Gr,hn,un=N(at.changedTouches),Qn=[],Ai=this.target;if(hn=St.filter(function(bi){return w(bi.target,Ai)}),Ye===Se)for(Gr=0;Gr<hn.length;)fr[hn[Gr].identifier]=!0,Gr++;for(Gr=0;Gr<un.length;)fr[un[Gr].identifier]&&Qn.push(un[Gr]),Ye&(Oe|ue)&&delete fr[un[Gr].identifier],Gr++;if(!!Qn.length)return[W(hn.concat(Qn),"identifier",!0),Qn]}var qt=2500,Er=25;function Zr(){q.apply(this,arguments);var at=x(this.handler,this);this.touch=new qe(this.manager,at),this.mouse=new Qe(this.manager,at),this.primaryTouch=null,this.lastTouches=[]}_(Zr,q,{handler:function(Ye,St,fr){var Gr=fr.pointerType==Re,hn=fr.pointerType==Ue;if(!(hn&&fr.sourceCapabilities&&fr.sourceCapabilities.firesTouchEvents)){if(Gr)Dr.call(this,St,fr);else if(hn&&mn.call(this,fr))return;this.callback(Ye,St,fr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Dr(at,Ye){at&Se?(this.primaryTouch=Ye.changedPointers[0].identifier,Cr.call(this,Ye)):at&(Oe|ue)&&Cr.call(this,Ye)}function Cr(at){var Ye=at.changedPointers[0];if(Ye.identifier===this.primaryTouch){var St={x:Ye.clientX,y:Ye.clientY};this.lastTouches.push(St);var fr=this.lastTouches,Gr=function(){var un=fr.indexOf(St);un>-1&&fr.splice(un,1)};setTimeout(Gr,qt)}}function mn(at){for(var Ye=at.srcEvent.clientX,St=at.srcEvent.clientY,fr=0;fr<this.lastTouches.length;fr++){var Gr=this.lastTouches[fr],hn=Math.abs(Ye-Gr.x),un=Math.abs(St-Gr.y);if(hn<=Er&&un<=Er)return!0}return!1}var xn=H(v.style,"touchAction"),lr=xn!==e,An="compute",On="auto",Mt="manipulation",er="none",$t="pan-x",Tr="pan-y",Mr=Ur();function Hr(at,Ye){this.manager=at,this.set(Ye)}Hr.prototype={set:function(Ye){Ye==An&&(Ye=this.compute()),lr&&this.manager.element.style&&Mr[Ye]&&(this.manager.element.style[xn]=Ye),this.actions=Ye.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ye=[];return s(this.manager.recognizers,function(St){M(St.options.enable,[St])&&(Ye=Ye.concat(St.getTouchAction()))}),wr(Ye.join(" "))},preventDefaults:function(Ye){var St=Ye.srcEvent,fr=Ye.offsetDirection;if(this.manager.session.prevented){St.preventDefault();return}var Gr=this.actions,hn=S(Gr,er)&&!Mr[er],un=S(Gr,Tr)&&!Mr[Tr],Qn=S(Gr,$t)&&!Mr[$t];if(hn){var Ai=Ye.pointers.length===1,bi=Ye.distance<2,na=Ye.deltaTime<250;if(Ai&&bi&&na)return}if(!(Qn&&un)&&(hn||un&&fr&z||Qn&&fr&ae))return this.preventSrc(St)},preventSrc:function(Ye){this.manager.session.prevented=!0,Ye.preventDefault()}};function wr(at){if(S(at,er))return er;var Ye=S(at,$t),St=S(at,Tr);return Ye&&St?er:Ye||St?Ye?$t:Tr:S(at,Mt)?Mt:On}function Ur(){if(!lr)return!1;var at={},Ye=B.CSS&&B.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(St){at[St]=Ye?B.CSS.supports("touch-action",St):!0}),at}var fn=1,tn=2,Rr=4,Nn=8,En=Nn,Yn=16,wi=32;function $a(at){this.options=u({},this.defaults,at||{}),this.id=Q(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=fn,this.simultaneous={},this.requireFail=[]}$a.prototype={defaults:{},set:function(Ye){return u(this.options,Ye),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ye){if(n(Ye,"recognizeWith",this))return this;var St=this.simultaneous;return Ye=Ro(Ye,this),St[Ye.id]||(St[Ye.id]=Ye,Ye.recognizeWith(this)),this},dropRecognizeWith:function(Ye){return n(Ye,"dropRecognizeWith",this)?this:(Ye=Ro(Ye,this),delete this.simultaneous[Ye.id],this)},requireFailure:function(Ye){if(n(Ye,"requireFailure",this))return this;var St=this.requireFail;return Ye=Ro(Ye,this),j(St,Ye)===-1&&(St.push(Ye),Ye.requireFailure(this)),this},dropRequireFailure:function(Ye){if(n(Ye,"dropRequireFailure",this))return this;Ye=Ro(Ye,this);var St=j(this.requireFail,Ye);return St>-1&&this.requireFail.splice(St,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ye){return!!this.simultaneous[Ye.id]},emit:function(Ye){var St=this,fr=this.state;function Gr(hn){St.manager.emit(hn,Ye)}fr<Nn&&Gr(St.options.event+so(fr)),Gr(St.options.event),Ye.additionalEvent&&Gr(Ye.additionalEvent),fr>=Nn&&Gr(St.options.event+so(fr))},tryEmit:function(Ye){if(this.canEmit())return this.emit(Ye);this.state=wi},canEmit:function(){for(var Ye=0;Ye<this.requireFail.length;){if(!(this.requireFail[Ye].state&(wi|fn)))return!1;Ye++}return!0},recognize:function(Ye){var St=u({},Ye);if(!M(this.options.enable,[this,St])){this.reset(),this.state=wi;return}this.state&(En|Yn|wi)&&(this.state=fn),this.state=this.process(St),this.state&(tn|Rr|Nn|Yn)&&this.tryEmit(St)},process:function(Ye){},getTouchAction:function(){},reset:function(){}};function so(at){return at&Yn?"cancel":at&Nn?"end":at&Rr?"move":at&tn?"start":""}function Po(at){return at==le?"down":at==be?"up":at==Ae?"left":at==pe?"right":""}function Ro(at,Ye){var St=Ye.manager;return St?St.get(at):at}function So(){$a.apply(this,arguments)}_(So,$a,{defaults:{pointers:1},attrTest:function(Ye){var St=this.options.pointers;return St===0||Ye.pointers.length===St},process:function(Ye){var St=this.state,fr=Ye.eventType,Gr=St&(tn|Rr),hn=this.attrTest(Ye);return Gr&&(fr&ue||!hn)?St|Yn:Gr||hn?fr&Oe?St|Nn:St&tn?St|Rr:tn:wi}});function Va(){So.apply(this,arguments),this.pX=null,this.pY=null}_(Va,So,{defaults:{event:"pan",threshold:10,pointers:1,direction:V},getTouchAction:function(){var Ye=this.options.direction,St=[];return Ye&z&&St.push(Tr),Ye&ae&&St.push($t),St},directionTest:function(Ye){var St=this.options,fr=!0,Gr=Ye.distance,hn=Ye.direction,un=Ye.deltaX,Qn=Ye.deltaY;return hn&St.direction||(St.direction&z?(hn=un===0?xe:un<0?Ae:pe,fr=un!=this.pX,Gr=Math.abs(Ye.deltaX)):(hn=Qn===0?xe:Qn<0?be:le,fr=Qn!=this.pY,Gr=Math.abs(Ye.deltaY))),Ye.direction=hn,fr&&Gr>St.threshold&&hn&St.direction},attrTest:function(Ye){return So.prototype.attrTest.call(this,Ye)&&(this.state&tn||!(this.state&tn)&&this.directionTest(Ye))},emit:function(Ye){this.pX=Ye.deltaX,this.pY=Ye.deltaY;var St=Po(Ye.direction);St&&(Ye.additionalEvent=this.options.event+St),this._super.emit.call(this,Ye)}});function ws(){So.apply(this,arguments)}_(ws,So,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[er]},attrTest:function(Ye){return this._super.attrTest.call(this,Ye)&&(Math.abs(Ye.scale-1)>this.options.threshold||this.state&tn)},emit:function(Ye){if(Ye.scale!==1){var St=Ye.scale<1?"in":"out";Ye.additionalEvent=this.options.event+St}this._super.emit.call(this,Ye)}});function ps(){$a.apply(this,arguments),this._timer=null,this._input=null}_(ps,$a,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[On]},process:function(Ye){var St=this.options,fr=Ye.pointers.length===St.pointers,Gr=Ye.distance<St.threshold,hn=Ye.deltaTime>St.time;if(this._input=Ye,!Gr||!fr||Ye.eventType&(Oe|ue)&&!hn)this.reset();else if(Ye.eventType&Se)this.reset(),this._timer=r(function(){this.state=En,this.tryEmit()},St.time,this);else if(Ye.eventType&Oe)return En;return wi},reset:function(){clearTimeout(this._timer)},emit:function(Ye){this.state===En&&(Ye&&Ye.eventType&Oe?this.manager.emit(this.options.event+"up",Ye):(this._input.timeStamp=i(),this.manager.emit(this.options.event,this._input)))}});function Ao(){So.apply(this,arguments)}_(Ao,So,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[er]},attrTest:function(Ye){return this._super.attrTest.call(this,Ye)&&(Math.abs(Ye.rotation)>this.options.threshold||this.state&tn)}});function zs(){So.apply(this,arguments)}_(zs,So,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:z|ae,pointers:1},getTouchAction:function(){return Va.prototype.getTouchAction.call(this)},attrTest:function(Ye){var St=this.options.direction,fr;return St&(z|ae)?fr=Ye.overallVelocity:St&z?fr=Ye.overallVelocityX:St&ae&&(fr=Ye.overallVelocityY),this._super.attrTest.call(this,Ye)&&St&Ye.offsetDirection&&Ye.distance>this.options.threshold&&Ye.maxPointers==this.options.pointers&&h(fr)>this.options.velocity&&Ye.eventType&Oe},emit:function(Ye){var St=Po(Ye.offsetDirection);St&&this.manager.emit(this.options.event+St,Ye),this.manager.emit(this.options.event,Ye)}});function Qa(){$a.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(Qa,$a,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mt]},process:function(Ye){var St=this.options,fr=Ye.pointers.length===St.pointers,Gr=Ye.distance<St.threshold,hn=Ye.deltaTime<St.time;if(this.reset(),Ye.eventType&Se&&this.count===0)return this.failTimeout();if(Gr&&hn&&fr){if(Ye.eventType!=Oe)return this.failTimeout();var un=this.pTime?Ye.timeStamp-this.pTime<St.interval:!0,Qn=!this.pCenter||rr(this.pCenter,Ye.center)<St.posThreshold;this.pTime=Ye.timeStamp,this.pCenter=Ye.center,!Qn||!un?this.count=1:this.count+=1,this._input=Ye;var Ai=this.count%St.taps;if(Ai===0)return this.hasRequireFailures()?(this._timer=r(function(){this.state=En,this.tryEmit()},St.interval,this),tn):En}return wi},failTimeout:function(){return this._timer=r(function(){this.state=wi},this.options.interval,this),wi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==En&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function fs(at,Ye){return Ye=Ye||{},Ye.recognizers=P(Ye.recognizers,fs.defaults.preset),new ts(at,Ye)}fs.VERSION="2.0.7",fs.defaults={domEvents:!1,touchAction:An,enable:!0,inputTarget:null,inputClass:null,preset:[[Ao,{enable:!1}],[ws,{enable:!1},["rotate"]],[zs,{direction:z}],[Va,{direction:z},["swipe"]],[Qa],[Qa,{event:"doubletap",taps:2},["tap"]],[ps]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vs=1,Ju=2;function ts(at,Ye){this.options=u({},fs.defaults,Ye||{}),this.options.inputTarget=this.options.inputTarget||at,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=at,this.input=ve(this),this.touchAction=new Hr(this,this.options.touchAction),Zs(this,!0),s(this.options.recognizers,function(St){var fr=this.add(new St[0](St[1]));St[2]&&fr.recognizeWith(St[2]),St[3]&&fr.requireFailure(St[3])},this)}ts.prototype={set:function(Ye){return u(this.options,Ye),Ye.touchAction&&this.touchAction.update(),Ye.inputTarget&&(this.input.destroy(),this.input.target=Ye.inputTarget,this.input.init()),this},stop:function(Ye){this.session.stopped=Ye?Ju:Vs},recognize:function(Ye){var St=this.session;if(!St.stopped){this.touchAction.preventDefaults(Ye);var fr,Gr=this.recognizers,hn=St.curRecognizer;(!hn||hn&&hn.state&En)&&(hn=St.curRecognizer=null);for(var un=0;un<Gr.length;)fr=Gr[un],St.stopped!==Ju&&(!hn||fr==hn||fr.canRecognizeWith(hn))?fr.recognize(Ye):fr.reset(),!hn&&fr.state&(tn|Rr|Nn)&&(hn=St.curRecognizer=fr),un++}},get:function(Ye){if(Ye instanceof $a)return Ye;for(var St=this.recognizers,fr=0;fr<St.length;fr++)if(St[fr].options.event==Ye)return St[fr];return null},add:function(Ye){if(n(Ye,"add",this))return this;var St=this.get(Ye.options.event);return St&&this.remove(St),this.recognizers.push(Ye),Ye.manager=this,this.touchAction.update(),Ye},remove:function(Ye){if(n(Ye,"remove",this))return this;if(Ye=this.get(Ye),Ye){var St=this.recognizers,fr=j(St,Ye);fr!==-1&&(St.splice(fr,1),this.touchAction.update())}return this},on:function(Ye,St){if(Ye!==e&&St!==e){var fr=this.handlers;return s(I(Ye),function(Gr){fr[Gr]=fr[Gr]||[],fr[Gr].push(St)}),this}},off:function(Ye,St){if(Ye!==e){var fr=this.handlers;return s(I(Ye),function(Gr){St?fr[Gr]&&fr[Gr].splice(j(fr[Gr],St),1):delete fr[Gr]}),this}},emit:function(Ye,St){this.options.domEvents&&ys(Ye,St);var fr=this.handlers[Ye]&&this.handlers[Ye].slice();if(!(!fr||!fr.length)){St.type=Ye,St.preventDefault=function(){St.srcEvent.preventDefault()};for(var Gr=0;Gr<fr.length;)fr[Gr](St),Gr++}},destroy:function(){this.element&&Zs(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Zs(at,Ye){var St=at.element;if(!!St.style){var fr;s(at.options.cssProps,function(Gr,hn){fr=H(St.style,hn),Ye?(at.oldCssProps[fr]=St.style[fr],St.style[fr]=Gr):St.style[fr]=at.oldCssProps[fr]||""}),Ye||(at.oldCssProps={})}}function ys(at,Ye){var St=L.createEvent("Event");St.initEvent(at,!0,!0),St.gesture=Ye,Ye.target.dispatchEvent(St)}u(fs,{INPUT_START:Se,INPUT_MOVE:ye,INPUT_END:Oe,INPUT_CANCEL:ue,STATE_POSSIBLE:fn,STATE_BEGAN:tn,STATE_CHANGED:Rr,STATE_ENDED:Nn,STATE_RECOGNIZED:En,STATE_CANCELLED:Yn,STATE_FAILED:wi,DIRECTION_NONE:xe,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:pe,DIRECTION_UP:be,DIRECTION_DOWN:le,DIRECTION_HORIZONTAL:z,DIRECTION_VERTICAL:ae,DIRECTION_ALL:V,Manager:ts,Input:q,TouchAction:Hr,TouchInput:qe,MouseInput:Qe,PointerEventInput:zr,TouchMouseInput:Zr,SingleTouchInput:Bt,Recognizer:$a,AttrRecognizer:So,Tap:Qa,Pan:Va,Swipe:zs,Pinch:ws,Rotate:Ao,Press:ps,on:C,off:O,each:s,merge:b,extend:d,assign:u,inherit:_,bindFn:x,prefixed:H});var Lt=typeof B!="undefined"?B:typeof self!="undefined"?self:{};Lt.Hammer=fs,he=function(){return fs}.call(Ot,Ee,Ot,br),he!==e&&(br.exports=he)})(window,document,"Hammer")},yP5f:function(br,Ot,Ee){var he=Ee("+K+b");function B(L,o){var e=o?he(L.buffer):L.buffer;return new L.constructor(e,L.byteOffset,L.length)}br.exports=B},"yP6+":function(br,Ot,Ee){(function(B,L){br.exports=L(Ee("q1tI"))})(this,function(he){return function(B){var L={};function o(e){if(L[e])return L[e].exports;var g=L[e]={i:e,l:!1,exports:{}};return B[e].call(g.exports,g,g.exports,o),g.l=!0,g.exports}return o.m=B,o.c=L,o.i=function(e){return e},o.d=function(e,g,v){o.o(e,g)||Object.defineProperty(e,g,{configurable:!1,enumerable:!0,get:v})},o.n=function(e){var g=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(g,"a",g),g},o.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},o.p="",o(o.s=602)}([function(B,L,o){var e=o(208),g=o(18),v=e.mix({},e,{assign:e.mix,merge:e.deepMix,cloneDeep:e.clone,isFinite,isNaN,snapEqual:e.isNumberEqual,remove:e.pull,inArray:e.contains,toAllPadding:function(c){var h=0,i=0,r=0,n=0;return v.isNumber(c)||v.isString(c)?h=i=r=n=c:v.isArray(c)?(h=c[0],r=v.isNil(c[1])?c[0]:c[1],n=v.isNil(c[2])?c[0]:c[2],i=v.isNil(c[3])?r:c[3]):v.isObject(c)&&(h=c.top||0,r=c.right||0,n=c.bottom||0,i=c.left||0),[h,r,n,i]},getClipByRange:function(c){var h=c.tl,i=c.br,r=new g.Rect({attrs:{x:h.x,y:h.y,width:i.x-h.x,height:i.y-h.y}});return r}});v.Array={groupToMap:e.groupToMap,group:e.group,merge:e.merge,values:e.valuesOfKey,getRange:e.getRange,firstValue:e.firstValue,remove:e.pull},B.exports=v},function(B,L,o){var e=o(95),g={};e.merge(g,e,{isColorProp:function(p){return["fill","stroke","fillStyle","strokeStyle"].includes(p)},isGradientColor:function(p){return/^[r,R,L,l]{1}[\s]*\(/.test(p)},mixin:function(p,c){var h=p.CFG?"CFG":"ATTRS";if(p&&c){p._mixins=c,p[h]=p[h]||{};var i={};g.each(c,function(r){g.augment(p,r);var n=r[h];n&&g.merge(i,n)}),p[h]=g.merge(i,p[h])}}}),B.exports=g},function(B,L,o){var e=o(180),g={};e.merge(g,e,{mixin:function(p,c){var h=p.CFG?"CFG":"ATTRS";if(p&&c){p._mixins=c,p[h]=p[h]||{};var i={};g.each(c,function(r){g.augment(p,r);var n=r[h];n&&g.merge(i,n)}),p[h]=g.merge(i,p[h])}}}),B.exports=g},function(B,L,o){var e=o(33),g=o(5),v=function(c,h){if(!!c){var i=void 0;if(g(c))for(var r=0,n=c.length;r<n&&(i=h(c[r],r),i!==!1);r++);else if(e(c)){for(var s in c)if(c.hasOwnProperty(s)&&(i=h(c[s],s),i===!1))break}}};B.exports=v},function(B,L,o){var e=o(52),g=o(208),v=g.mix({assign:g.mix,isFinite,isNaN,Group:e.Group,Event:e.Event},g);B.exports=v},function(B,L,o){var e=o(19),g=Array.isArray?Array.isArray:function(v){return e(v,"Array")};B.exports=g},function(B,L,o){var e=o(0),g=o(162),v={version:"3.5.19",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:1/2,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(c,h){g[c]=h},setTheme:function(c){var h={};e.isObject(c)?h=c:e.indexOf(Object.keys(g),c)!==-1?h=g[c]:h=g.default,e.deepMix(v,h)}};v.setTheme("default"),B.exports=v},function(B,L){var o=function(g){return g==null};B.exports=o},function(B,L,o){var e=o(2),g=o(364),v=o(163),p=o(89),c=function r(n){r.superclass.constructor.call(this,n)};c.ATTRS={},e.extend(c,v);var h={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function i(r){for(var n=[],s=0;s<r.length;s++)e.isArray(r[s])?n.push([].concat(r[s])):n.push(r[s]);return n}e.augment(c,g,{isShape:!0,drawInner:function(n){var s=this,f=s._attrs;s.createPath(n);var u=n.globalAlpha;if(s.hasFill()){var d=f.fillOpacity;!e.isNil(d)&&d!==1?(n.globalAlpha=d,n.fill(),n.globalAlpha=u):n.fill()}if(s.hasStroke()){var b=s._attrs.lineWidth;if(b>0){var _=f.strokeOpacity;!e.isNil(_)&&_!==1&&(n.globalAlpha=_),n.stroke()}}s.afterPath(n)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(n,s){var f=this,u=[n,s,1];if(f.invert(u),f.isHitBox()){var d=f.getBBox();if(d&&!p.box(d.minX,d.maxX,d.minY,d.maxY,u[0],u[1]))return!1}var b=f._attrs.clip;if(b){if(b.invert(u,f.get("canvas")),b.isPointInPath(u[0],u[1]))return f.isPointInPath(u[0],u[1])}else return f.isPointInPath(u[0],u[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var n=this._attrs,s=n.lineAppendWidth||0,f=n.lineWidth||0;return f+s},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var n=this._cfg.box;return n||(n=this.calculateBox(),n&&(n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY),this._cfg.box=n),n},clone:function(){var n=this,s=null,f=n._attrs,u={};return e.each(f,function(d,b){h[b]&&e.isArray(f[b])?u[b]=i(f[b]):u[b]=f[b]}),s=new n.constructor({attrs:u}),s._cfg.zIndex=n._cfg.zIndex,s}}),B.exports=c},function(B,L,o){var e=o(1),g=o(386),v=o(181),p=o(94),c=["zIndex","capture","visible"],h=function n(s){n.superclass.constructor.call(this,s)};h.ATTRS={},e.extend(h,v);var i={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function r(n){for(var s=[],f=0;f<n.length;f++)e.isArray(n[f])?s.push([].concat(n[f])):s.push(n[f]);return s}e.augment(h,g,{isShape:!0,drawInner:function(s){var f=this,u=f._attrs;f.createPath(s);var d=s.globalAlpha;if(f.hasFill()){var b=u.fillOpacity;!e.isNil(b)&&b!==1?(s.globalAlpha=b,s.fill(),s.globalAlpha=d):s.fill()}if(f.hasStroke()){var _=f._attrs.lineWidth;if(_>0){var x=u.strokeOpacity;!e.isNil(x)&&x!==1&&(s.globalAlpha=x),s.stroke()}}f.afterPath(s)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(s,f){var u=this,d=[s,f,1];if(u.invert(d),u.isHitBox()){var b=u.getBBox();if(b&&!p.box(b.minX,b.maxX,b.minY,b.maxY,d[0],d[1]))return!1}var _=u._attrs.clip;if(_){if(_.invert(d,u.get("canvas")),_.isPointInPath(d[0],d[1]))return u.isPointInPath(d[0],d[1])}else return u.isPointInPath(d[0],d[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var s=this._attrs,f=s.lineAppendWidth||0,u=s.lineWidth||0;return u+f},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var s=this._cfg.box;return s||(s=this.calculateBox(),s&&(s.x=s.minX,s.y=s.minY,s.width=s.maxX-s.minX,s.height=s.maxY-s.minY),this._cfg.box=s),s},clone:function(){var s=this,f=null,u=s._attrs,d={};return e.each(u,function(b,_){i[_]&&e.isArray(u[_])?d[_]=r(u[_]):d[_]=u[_]}),f=new s.constructor({attrs:d}),e.each(c,function(b){f._cfg[b]=s._cfg[b]}),f}}),B.exports=h},function(B,L){function o(g,v){for(var p in v)v.hasOwnProperty(p)&&p!=="constructor"&&v[p]!==void 0&&(g[p]=v[p])}var e=function(v,p,c,h){return p&&o(v,p),c&&o(v,c),h&&o(v,h),v};B.exports=e},function(B,L,o){var e=o(19),g=function(p){return e(p,"Number")};B.exports=g},function(B,L,o){function e(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function g(C,O){C.prototype=Object.create(O.prototype),C.prototype.constructor=C,v(C,O)}function v(C,O){return v=Object.setPrototypeOf||function(S,I){return S.__proto__=I,S},v(C,O)}var p=o(78),c=o(260),h=o(150),i=o(0),r=o(6),n=o(327),s=o(13),f=o(333),u=o(331),d=o(332),b=o(346),_=["color","shape","size"],x="_origin";function M(C){return(i.isString(C)||i.isPlainObject(C))&&(C=[C]),i.each(C,function(O,w){i.isObject(O)||(C[w]={type:O})}),C}var P=function(C){g(w,C);var O=w.prototype;O.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}};function w(S){var I;return I=C.call(this,S)||this,I.viewTheme=I.get("viewTheme"),i.assign(e(I),f,u,d),I.get("container")&&I._initContainer(),I._initOptions(),I}return O._initOptions=function(){var I=this.get("adjusts");I&&(I=M(I),this.set("adjusts",I))},O._createScale=function(I,j){var N=this.get("scales"),W=N[I];return W||(W=this.get("view").createScale(I,j),N[I]=W),W},O._setAttrOptions=function(I,j){var N=this.get("attrOptions");N[I]=j},O._createAttrOption=function(I,j,N,W){var H={};H.field=j,N?i.isFunction(N)?H.callback=N:H.values=N:I!=="color"&&(H.values=W),this._setAttrOptions(I,H)},O.position=function(I){return this._setAttrOptions("position",{field:I}),this},O.color=function(I,j){var N=this.viewTheme||r;return this._createAttrOption("color",I,j,N.colors),this},O.size=function(I,j){var N=this.viewTheme||r;return this._createAttrOption("size",I,j,N.sizes),this},O.shape=function(I,j){var N=this.viewTheme||r,W=this.get("type"),H=N.shapes[W]||[];return this._createAttrOption("shape",I,j,H),this},O.opacity=function(I,j){var N=this.viewTheme||r;return this._createAttrOption("opacity",I,j,N.opacities),this},O.style=function(I,j){var N=this.get("styleOptions");N||(N={},this.set("styleOptions",N)),i.isObject(I)&&(j=I,I=null);var W;return I&&(W=b(I)),N.fields=W,N.style=j,this},O.label=function(I,j,N){var W=this,H=W.get("labelCfg");H||(H={},W.set("labelCfg",H));var J;return I&&(J=b(I)),H.fields=J,i.isFunction(j)?(N||(N={}),H.callback=j):i.isObject(j)&&(N=j),H.globalCfg=N,this},O.tooltip=function(I,j){var N=this.get("tooltipCfg");if(N||(N={}),I===!1)this.set("tooltipCfg",!1);else{var W;I&&(W=b(I)),N.fields=W,N.cfg=j}return this.set("tooltipCfg",N),this},O.animate=function(I){return this.set("animateCfg",I),this},O.active=function(I,j){return I===!1?this.set("allowActive",!1):i.isObject(I)?(this.set("allowActive",!0),this.set("activedOptions",I)):(this.set("allowActive",!0),this.set("activedOptions",j)),this},O.adjust=function(I){return this.get("hasDefaultAdjust")||(I&&(I=M(I)),this.set("adjusts",I)),this},O.select=function(I,j){return I===!1?this.set("allowSelect",!1):i.isObject(I)?(this.set("allowSelect",!0),this.set("selectedOptions",I)):(this.set("allowSelect",!0),this.set("selectedOptions",j)),this},O.hasAdjust=function(I){var j=this,N=j.get("adjusts");if(!I)return!1;var W=!1;return i.each(N,function(H){if(H.type===I)return W=!0,!1}),W},O.hasStack=function(){var I=this.get("isStacked");return i.isNil(I)&&(I=this.hasAdjust("stack"),this.set("isStacked",I)),I},O.isInCircle=function(){var I=this.get("coord");return I&&I.isPolar},O._initContainer=function(){var I=this,j=I.get("shapeContainer");if(!j){var N=I.get("container"),W=I.get("view"),H=W&&W.get("_id");j=N.addGroup({viewId:H,visible:I.get("visible")}),I.set("shapeContainer",j)}},O.init=function(){var I=this;if(I._initContainer(),I._initAttrs(),I.get("tooltipCfg")&&I.get("tooltipCfg").fields){var j=I.get("tooltipCfg").fields;i.each(j,function(W){I._createScale(W)})}var N=I._processData();I.get("adjusts")&&I._adjust(N),I.set("dataArray",N)},O._initAttrs=function(){var I=this,j=I.get("attrs"),N=I.get("attrOptions"),W=I.get("coord"),H=I.viewTheme||r,J=!1;for(var Q in N)if(N.hasOwnProperty(Q)){var ne=N[Q],K=i.upperFirst(Q),ie=b(ne.field);Q==="position"&&(ne.coord=W,ie.length===1&&W.type==="theta"&&(ie.unshift("1"),J=!0));for(var de=[],we=0;we<ie.length;we++){var Re=ie[we],_e=I._createScale(Re);Q==="color"&&i.isNil(ne.values)&&(_e.values.length<=8?ne.values=J?H.colors_pie:H.colors:_e.values.length<=16?ne.values=J?H.colors_pie_16:H.colors_16:ne.values=H.colors_24,i.isNil(ne.values)&&(ne.values=H.colors)),de.push(_e)}if(W.type==="theta"&&Q==="position"&&de.length>1){var Ue=de[1],rt=0,Fe=Math.max.apply(null,Ue.values);isFinite(Fe)||(Fe=1),Ue.change({nice:!1,min:rt,max:Fe})}ne.scales=de;var Se=new p[K](ne);j[Q]=Se}},O._processData=function(){for(var I=this,j=this.get("data"),N=[],W=this._groupData(j),H=0;H<W.length;H++){var J=W[H],Q=I._saveOrigin(J);N.push(I._numberic(Q))}return N},O._groupData=function(I){var j=this._getGroupScales(),N=j.map(function(W){return W.field});return i.Array.group(I,N)},O._saveOrigin=function(I){for(var j=[],N=0;N<I.length;N++){var W=I[N],H={};for(var J in W)H[J]=W[J];H[x]=W,j.push(H)}return j},O._numberic=function(I){for(var j=this.getAttr("position"),N=j.scales,W=[],H=0;H<I.length;H++){for(var J=I[H],Q=!0,ne=0;ne<Math.min(2,N.length);ne++){var K=N[ne];if(K.isCategory){var ie=K.field;J[ie]=K.translate(J[ie]),Number.isNaN(J[ie])&&(Q=!1)}}Q&&W.push(J)}return W},O._getGroupScales=function(){var I=this,j=I.get("groupScales");if(!j){j=[];var N=I.get("attrs");i.each(N,function(W){if(_.includes(W.type)){var H=W.scales;i.each(H,function(J){J.isCategory&&i.indexOf(j,J)===-1&&j.push(J)})}}),I.set("groupScales",j)}return j},O._updateStackRange=function(I,j,N){for(var W=i.Array.merge(N),H=j.min,J=j.max,Q=0;Q<W.length;Q++){var ne=W[Q];if(!!i.isArray(ne[I])){var K=Math.min.apply(null,ne[I]),ie=Math.max.apply(null,ne[I]);K<H&&(H=K),ie>J&&(J=ie)}}(H<j.min||J>j.max)&&j.change({min:H,max:J})},O._adjust=function(I){if(!(!I||!I.length)){var j=this,N=j.get("adjusts"),W=this.viewTheme||r,H=j.getYScale(),J=j.getXScale(),Q=J.field,ne=H?H.field:null;i.each(N,function(K){var ie=i.mix({xField:Q,yField:ne},K),de=i.upperFirst(K.type);if(de==="Dodge"){var we=[];if(J.isCategory||J.isIdentity)we.push("x");else if(!H)we.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");ie.adjustNames=we,ie.dodgeRatio=ie.dodgeRatio||W.widthRatio.column}else if(de==="Stack"){var Re=j.get("coord");if(!H){ie.height=Re.getHeight();var _e=j.getDefaultValue("size")||3;ie.size=_e}!Re.isTransposed&&i.isNil(ie.reverseOrder)&&(ie.reverseOrder=!0)}var Ue=new c[de](ie);Ue.processAdjust(I),de==="Stack"&&H&&j._updateStackRange(ne,H,I)})}},O.setCoord=function(I){this.set("coord",I);var j=this.getAttr("position"),N=this.get("shapeContainer");N.setMatrix(I.matrix),j&&(j.coord=I)},O.paint=function(){var I=this,j=I.get("dataArray"),N=[],W=I.getShapeFactory();W.setCoord(I.get("coord")),I.set("shapeFactory",W);var H=I.get("shapeContainer");I._beforeMapping(j);for(var J=0;J<j.length;J++){var Q=j[J],ne=J;Q=I._mapping(Q),N.push(Q),I.draw(Q,H,W,ne)}I.get("labelCfg")&&I._addLabels(i.union.apply(null,N),H.get("children")),I.get("sortable")?I.set("dataArray",N):I._sort(N)},O._sort=function(I){var j=this,N=j.getXScale(),W=N.field;i.each(I,function(H){H.sort(function(J,Q){return N.translate(J[x][W])-N.translate(Q[x][W])})}),j.set("dataArray",I)},O._beforeMapping=function(I){var j=this;if(j.get("sortable")){var N=j.getXScale(),W=N.field;i.each(I,function(H){H.sort(function(J,Q){return N.translate(J[W])-N.translate(Q[W])})})}j.get("generatePoints")&&(i.each(I,function(H){j._generatePoints(H)}),i.each(I,function(H,J){var Q=I[J+1];Q&&(H[0].nextPoints=Q[0].points)}))},O._addLabels=function(I,j){var N=this,W=N.get("type"),H=N.get("viewTheme")||r,J=N.get("coord"),Q=n.getLabelsClass(J.type,W),ne=N.get("container"),K=i.map(N.get("labelCfg").fields,function(de){return N._createScale(de)}),ie=ne.addGroup(Q,{_id:this.get("_id"),labelCfg:i.mix({scales:K},N.get("labelCfg")),coord:J,geom:N,geomType:W,yScale:N.getYScale(),viewTheme:H,visible:N.get("visible")});ie.showLabels(I,j),N.set("labelContainer",ie)},O.getShapeFactory=function(){var I=this.get("shapeFactory");if(!I){var j=this.get("shapeType");I=s.getShapeFactory(j),this.set("shapeFactory",I)}return I},O._generatePoints=function(I){for(var j=this,N=j.getShapeFactory(),W=j.getAttr("shape"),H=0;H<I.length;H++){var J=I[H],Q=j.createShapePointsCfg(J),ne=W?j._getAttrValues(W,J):null,K=N.getShapePoints(ne,Q);J.points=K}},O.createShapePointsCfg=function(I){var j=this.getXScale(),N=this.getYScale(),W=this._normalizeValues(I[j.field],j),H;return N?H=this._normalizeValues(I[N.field],N):H=I.y?I.y:.1,{x:W,y:H,y0:N?N.scale(this.getYMinValue()):void 0}},O.getYMinValue=function(){var I=this.getYScale(),j=I.min,N=I.max,W;return j>=0?W=j:N<=0?W=N:W=0,W},O._normalizeValues=function(I,j){var N=[];if(i.isArray(I))for(var W=0;W<I.length;W++){var H=I[W];N.push(j.scale(H))}else N=j.scale(I);return N},O._mapping=function(I){for(var j=this,N=j.get("attrs"),W=[],H=0;H<I.length;H++){var J=I[H],Q={};Q[x]=J[x],Q.points=J.points,Q.nextPoints=J.nextPoints;for(var ne in N)if(N.hasOwnProperty(ne)){var K=N[ne],ie=K.names,de=j._getAttrValues(K,J);if(ie.length>1)for(var we=0;we<de.length;we++){var Re=de[we],_e=ie[we];Q[_e]=i.isArray(Re)&&Re.length===1?Re[0]:Re}else Q[ie[0]]=de.length===1?de[0]:de}W.push(Q)}return W},O._getAttrValues=function(I,j){for(var N=I.scales,W=[],H=0;H<N.length;H++){var J=N[H],Q=J.field;J.type==="identity"?W.push(J.value):W.push(j[Q])}var ne=I.mapping.apply(I,W);return ne},O.getAttrValue=function(I,j){var N=this.getAttr(I),W=null;if(N){var H=this._getAttrValues(N,j);W=H[0]}return W},O.getDefaultValue=function(I){var j=this.get(I),N=this.getAttr(I);if(N){var W=N.getScale(I);W.type==="identity"&&(j=W.value)}return j},O.draw=function(I,j,N,W){for(var H=this,J=0;J<I.length;J++){var Q=I[J];H.drawPoint(Q,j,N,W+J)}},O.getCallbackCfg=function(I,j,N){if(!I)return j;var W={},H=I.map(function(J){return N[J]});return i.each(j,function(J,Q){i.isFunction(J)?W[Q]=J.apply(null,H):W[Q]=J}),W},O._getShapeId=function(I){var j=this.get("_id"),N=this.get("keyFields");if(N&&N.length>0)i.each(N,function(we){j+="-"+I[we]});else{var W=this.get("type"),H=this.getXScale(),J=this.getYScale(),Q=H.field||"x",ne=J.field||"y",K=I[ne],ie;H.isIdentity?ie=H.value:ie=I[Q],W==="interval"||W==="schema"?j+="-"+ie:W==="line"||W==="area"||W==="path"?j+="-"+W:j+="-"+ie+"-"+K;var de=this._getGroupScales();i.isEmpty(de)||i.each(de,function(we){var Re=we.field;we.type!=="identity"&&(j+="-"+I[Re])})}return j},O.getDrawCfg=function(I){var j=this,N={origin:I,x:I.x,y:I.y,color:I.color,size:I.size,shape:I.shape,isInCircle:j.isInCircle(),opacity:I.opacity},W=j.get("styleOptions");return W&&W.style&&(N.style=j.getCallbackCfg(W.fields,W.style,I[x])),j.get("generatePoints")&&(N.points=I.points,N.nextPoints=I.nextPoints),j.get("animate")&&(N._id=j._getShapeId(I[x])),N},O.appendShapeInfo=function(I,j){I&&(I.setSilent("index",j),I.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&I.setSilent("animateCfg",this.get("animateCfg")))},O._applyViewThemeShapeStyle=function(I,j,N){var W=this,H=W.viewTheme||r,J=N.name;j?j&&(j.indexOf("hollow")>-1||j.indexOf("liquid")>-1)&&(J="hollow"+i.upperFirst(J)):N.defaultShapeType.indexOf("hollow")>-1&&(J="hollow"+i.upperFirst(J));var Q=H.shape[J]||{};I.style=i.mix({},Q,I.style)},O.drawPoint=function(I,j,N,W){var H=this,J=I.shape,Q=H.getDrawCfg(I);H._applyViewThemeShapeStyle(Q,J,N);var ne=N.drawShape(J,Q,j);H.appendShapeInfo(ne,W)},O.getAttr=function(I){return this.get("attrs")[I]},O.getXScale=function(){return this.getAttr("position").scales[0]},O.getYScale=function(){return this.getAttr("position").scales[1]},O.getShapes=function(){var I=[],j=this.get("shapeContainer"),N=j.get("children");return i.each(N,function(W){W.get("origin")&&I.push(W)}),I},O.getAttrsForLegend=function(){var I=this.get("attrs"),j=[];return i.each(I,function(N){_.includes(N.type)&&j.push(N)}),j},O.getFieldsForLegend=function(){var I=[],j=this.get("attrOptions");return i.each(_,function(N){var W=j[N];W&&W.field&&i.isString(W.field)&&(I=I.concat(W.field.split("*")))}),i.uniq(I)},O.changeVisible=function(I,j){var N=this;N.set("visible",I);var W=this.get("shapeContainer");W&&W.set("visible",I);var H=this.get("labelContainer");if(H&&H.set("visible",I),!j&&W){var J=W.get("canvas");J.draw()}},O.reset=function(){this.set("attrOptions",{}),this.clearInner()},O.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var I=this.get("shapeContainer");I&&I.clear();var j=this.get("labelContainer");j&&j.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},O.clear=function(){this.clearInner(),this.set("scales",{})},O.destroy=function(){this.clear();var I=this.get("shapeContainer");I&&I.remove(),this.offEvents(),C.prototype.destroy.call(this)},O.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},O.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},w}(h);B.exports=P},function(B,L,o){var e=o(0),g=o(27),v=e.PathUtil,p={},c={_coord:null,draw:function(r,n){return this.drawShape?this.drawShape(r,n):null},setCoord:function(r){this._coord=r},parsePath:function(r,n){var s=this._coord;return r=v.parsePathString(r),s.isPolar&&n!==!1?r=g.convertPolarPath(s,r):r=g.convertNormalPath(s,r),r},parsePoint:function(r){var n=this._coord;return n.convertPoint(r)},parsePoints:function(r){var n=this._coord,s=[];return e.each(r,function(f){s.push(n.convertPoint(f))}),s}},h={defaultShapeType:null,setCoord:function(r){this._coord=r},getShape:function(r){var n=this;e.isArray(r)&&(r=r[0]);var s=n[r]||n[n.defaultShapeType];return s._coord=n._coord,s},getShapePoints:function(r,n){var s=this.getShape(r),f=s.getPoints||s.getShapePoints||this.getDefaultPoints,u=f(n);return u},getDefaultPoints:function(){return[]},getMarkerCfg:function(r,n){var s=this.getShape(r);if(!s.getMarkerCfg){var f=this.defaultShapeType;s=this.getShape(f)}return s.getMarkerCfg(n)},getSelectedCfg:function(){return{}},drawShape:function(r,n,s){var f=this.getShape(r),u=f.draw(n,s);return u&&(u.setSilent("origin",n.origin),u._id=n.yIndex?n._id+n.yIndex:n._id,u.name=this.name),u}};p.registerFactory=function(i,r){var n=e.upperFirst(i),s=e.assign({},h,r);return p[n]=s,s.name=i,s},p.registerShape=function(i,r,n){var s=e.upperFirst(i),f=p[s],u=e.assign({},c,n);return f[r]=u,u},p.getShapeFactory=function(i){var r=this;i=i||"point";var n=e.upperFirst(i);return r[n]},B.exports=p},function(B,L,o){var e=o(19),g=function(p){return e(p,"Function")};B.exports=g},function(B,L,o){var e=o(19),g=function(p){return e(p,"String")};B.exports=g},function(B,L,o){"use strict";var e=o(119);o.d(L,"f",function(){return e.h}),o.d(L,"e",function(){return e.g}),o.d(L,"d",function(){return e.f});var g=o(495);o.d(L,"c",function(){return g.b}),o.d(L,"b",function(){return g.a});var v=o(494);o.d(L,"a",function(){return v.a})},function(B,L,o){"use strict";o.d(L,"d",function(){return h}),o.d(L,"a",function(){return i}),o.d(L,"b",function(){return s}),o.d(L,"c",function(){return f}),L.g=u,L.e=d,L.f=b;var e=o(497),g=o(75),v=o.i(e.a)("start","end","cancel","interrupt"),p=[],c=0,h=1,i=2,r=3,n=4,s=5,f=6;L.h=function(x,M,P,C,O,w){var S=x.__transition;if(!S)x.__transition={};else if(P in S)return;_(x,P,{name:M,index:C,group:O,on:v,tween:p,time:w.time,delay:w.delay,duration:w.duration,ease:w.ease,timer:null,state:c})};function u(x,M){var P=b(x,M);if(P.state>c)throw new Error("too late; already scheduled");return P}function d(x,M){var P=b(x,M);if(P.state>r)throw new Error("too late; already running");return P}function b(x,M){var P=x.__transition;if(!P||!(P=P[M]))throw new Error("transition not found");return P}function _(x,M,P){var C=x.__transition,O;C[M]=P,P.timer=o.i(g.timer)(w,0,P.time);function w(N){P.state=h,P.timer.restart(S,P.delay,P.time),P.delay<=N&&S(N-P.delay)}function S(N){var W,H,J,Q;if(P.state!==h)return j();for(W in C)if(Q=C[W],Q.name===P.name){if(Q.state===r)return o.i(g.timeout)(S);Q.state===n?(Q.state=f,Q.timer.stop(),Q.on.call("interrupt",x,x.__data__,Q.index,Q.group),delete C[W]):+W<M&&(Q.state=f,Q.timer.stop(),Q.on.call("cancel",x,x.__data__,Q.index,Q.group),delete C[W])}if(o.i(g.timeout)(function(){P.state===r&&(P.state=n,P.timer.restart(I,P.delay,P.time),I(N))}),P.state=i,P.on.call("start",x,x.__data__,P.index,P.group),P.state===i){for(P.state=r,O=new Array(J=P.tween.length),W=0,H=-1;W<J;++W)(Q=P.tween[W].value.call(x,x.__data__,P.index,P.group))&&(O[++H]=Q);O.length=H+1}}function I(N){for(var W=N<P.duration?P.ease.call(null,N/P.duration):(P.timer.restart(j),P.state=s,1),H=-1,J=O.length;++H<J;)O[H].call(x,W);P.state===s&&(P.on.call("end",x,x.__data__,P.index,P.group),j())}function j(){P.state=f,P.timer.stop(),delete C[M];for(var N in C)return;delete x.__transition}}},function(B,L,o){var e=o(184);B.exports=e},function(B,L){var o={}.toString,e=function(v,p){return o.call(v)==="[object "+p+"]"};B.exports=e},function(B,L,o){"use strict";o.d(L,"c",function(){return ie}),L.b=de;var e=o(559),g=o(560),v=o(547),p=o(541),c=o(249),h=o(546),i=o(550),r=o(552),n=o(555),s=o(562),f=o(538),u=o(554),d=o(553),b=o(561),_=o(545),x=o(544),M=o(537),P=o(251),C=o(556),O=o(539),w=o(563),S=o(548),I=o(557),j=o(551),N=o(536),W=o(549),H=o(558),J=o(540),Q=o(542),ne=o(130),K=o(543),ie=[null];function de(Re,_e){this._groups=Re,this._parents=_e}function we(){return new de([[document.documentElement]],ie)}de.prototype=we.prototype={constructor:de,select:e.a,selectAll:g.a,filter:v.a,data:p.a,enter:c.a,exit:h.a,join:i.a,merge:r.a,order:n.a,sort:s.a,call:f.a,nodes:u.a,node:d.a,size:b.a,empty:_.a,each:x.a,attr:M.a,style:P.b,property:C.a,classed:O.a,text:w.a,html:S.a,raise:I.a,lower:j.a,append:N.a,insert:W.a,remove:H.a,clone:J.a,datum:Q.a,on:ne.c,dispatch:K.a},L.a=we},function(B,L){B.exports={FONT_FAMILY:'BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'}},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,g(r,n)}function g(r,n){return g=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},g(r,n)}var v=o(4),p=o(139),c=o(38),h=["min","max","median","start","end"],i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return v.mix({},u,{xScales:null,yScales:null,el:null})},s.render=function(){},s.clear=function(){var u=this,d=u.get("el");d&&d.remove(),this.set("el",null)},s.destroy=function(){this.clear(),r.prototype.destroy.call(this)},s.changeVisible=function(u){var d=this;d.set("visible",u);var b=d.get("el");!b||(b.set?b.set("visible",u):b.style.display=u?"":"none")},s.parsePoint=function(u,d){var b=this,_=b.get("xScales"),x=b.get("yScales");v.isFunction(d)&&(d=d(_,x));var M,P;if(v.isArray(d)&&v.isString(d[0])&&d[0].indexOf("%")!==-1)return this._parsePercentPoint(u,d);if(v.isArray(d))M=b._getNormalizedValue(d[0],p.getFirstScale(_)),P=b._getNormalizedValue(d[1],p.getFirstScale(x));else for(var C in d){var O=d[C];_[C]&&(M=b._getNormalizedValue(O,_[C])),x[C]&&(P=b._getNormalizedValue(O,x[C],"y"))}return!v.isNil(M)&&!v.isNil(P)&&!isNaN(M)&&!isNaN(P)?u.convert({x:M,y:P}):null},s._getNormalizedValue=function(u,d){var b;if(v.indexOf(h,u)!==-1){var _;u==="start"?b=0:u==="end"?b=1:u==="median"?(_=d.isCategory?(d.values.length-1)/2:(d.min+d.max)/2,b=d.scale(_)):(d.isCategory?_=u==="min"?0:d.values.length-1:_=d[u],b=d.scale(_))}else b=d.scale(u);return b},s._parsePercentPoint=function(u,d){var b=parseFloat(d[0])/100,_=parseFloat(d[1])/100,x=u.start,M=u.end,P={x:Math.min(x.x,M.x),y:Math.min(x.y,M.y)},C=u.width*b+P.x,O=u.height*_+P.y;return{x:C,y:O}},n}(c);B.exports=i},function(B,L){var o=function(g){return g!==null&&typeof g!="function"&&isFinite(g.length)};B.exports=o},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(532);o.d(L,"create",function(){return e.a});var g=o(73);o.d(L,"creator",function(){return g.a});var v=o(533);o.d(L,"local",function(){return v.a});var p=o(247);o.d(L,"matcher",function(){return p.a});var c=o(534);o.d(L,"mouse",function(){return c.a});var h=o(128);o.d(L,"namespace",function(){return h.a});var i=o(129);o.d(L,"namespaces",function(){return i.a});var r=o(74);o.d(L,"clientPoint",function(){return r.a});var n=o(248);o.d(L,"select",function(){return n.a});var s=o(535);o.d(L,"selectAll",function(){return s.a});var f=o(20);o.d(L,"selection",function(){return f.a});var u=o(131);o.d(L,"selector",function(){return u.a});var d=o(252);o.d(L,"selectorAll",function(){return d.a});var b=o(251);o.d(L,"style",function(){return b.a});var _=o(564);o.d(L,"touch",function(){return _.a});var x=o(565);o.d(L,"touches",function(){return x.a});var M=o(133);o.d(L,"window",function(){return M.a});var P=o(130);o.d(L,"event",function(){return P.a}),o.d(L,"customEvent",function(){return P.b})},function(B,L,o){var e=o(0),g={splitPoints:function(p){var c=[],h=p.x,i=p.y;return i=e.isArray(i)?i:[i],e.each(i,function(r,n){var s={x:e.isArray(h)?h[n]:h,y:r};c.push(s)}),c},addFillAttrs:function(p,c){c.color&&(p.fill=c.color),e.isNumber(c.opacity)&&(p.opacity=p.fillOpacity=c.opacity)},addStrokeAttrs:function(p,c){c.color&&(p.stroke=c.color),e.isNumber(c.opacity)&&(p.opacity=p.strokeOpacity=c.opacity)}};B.exports=g},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(){function u(d,b){for(var _=0;_<b.length;_++){var x=b[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,b,_){return b&&u(d.prototype,b),_&&u(d,_),d}}(),g=o(47),v=h(g),p=o(31),c=h(p);function h(u){return u&&u.__esModule?u:{default:u}}function i(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function r(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function n(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var s=function(u){n(d,u);function d(b,_){i(this,d);var x=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b));return x.getParentInfo=function(){return{id:x.id,name:x.name}},x.name=_,x}return e(d,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}},{key:"componentWillMount",value:function(){var _=this.context;this.id=_.createId(),_.addElement(this.name,this.id,this.props,_.getParentInfo(),_.getViewId())}},{key:"componentWillReceiveProps",value:function(_){this.context.updateElement(this.name,this.id,_,this.context.getParentInfo(),this.context.getViewId())}},{key:"componentWillUnmount",value:function(){this.context.deleteElement(this.name,this.id)}},{key:"render",value:function(){var _=this.props.children;return _?_.length&&(_=v.default.createElement("div",null,_)):_=null,_}}]),d}(g.Component);s.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},s.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func};function f(u){var d=function(b){n(_,b);function _(x){return i(this,_),r(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,x,u))}return e(_,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}}]),_}(s);return d.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},d.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},d.displayName=u,d}s.generateBaseTypedComponent=f,L.default=s},function(B,L,o){var e=o(0),g=o(347);function v(n,s){if(!n.length)return[];for(var f=[],u=0,d=n.length;u<d;u++){var b=n[u];u===0?f.push(["M",b.x,b.y]):f.push(["L",b.x,b.y])}return s&&f.push(["Z"]),f}function p(n,s){var f=n.getCenter(),u=Math.sqrt(Math.pow(s.x-f.x,2)+Math.pow(s.y-f.y,2));return u}function c(n,s){for(var f=n.length,u=[n[0]],d=1;d<f;d=d+2){var b=s.convertPoint({x:n[d],y:n[d+1]});u.push(b.x,b.y)}return u}function h(n,s,f){var u=f.isTransposed,d=f.startAngle,b=f.endAngle,_={x:n[1],y:n[2]},x={x:s[1],y:s[2]},M=[],P=u?"y":"x",C=Math.abs(x[P]-_[P])*(b-d),O=x[P]>=_[P]?1:0,w=C>Math.PI?1:0,S=f.convertPoint(x),I=p(f,S);if(I>=.5)if(C===Math.PI*2){var j={x:(x.x+_.x)/2,y:(x.y+_.y)/2},N=f.convertPoint(j);M.push(["A",I,I,0,w,O,N.x,N.y]),M.push(["A",I,I,0,w,O,S.x,S.y])}else M.push(["A",I,I,0,w,O,S.x,S.y]);return M}function i(n){e.each(n,function(s,f){var u=s;if(u[0].toLowerCase()==="a"){var d=n[f-1],b=n[f+1];b&&b[0].toLowerCase()==="a"?d&&d[0].toLowerCase()==="l"&&(d[0]="M"):d&&d[0].toLowerCase()==="a"&&b&&b[0].toLowerCase()==="l"&&(b[0]="M")}})}var r={getLinePath:function(s,f){return v(s,f)},getSplinePath:function(s,f,u){var d=[],b=s[0],_=null;if(s.length<=2)return r.getLinePath(s,f);e.each(s,function(M){(!_||!(_.x===M.x&&_.y===M.y))&&(d.push(M.x),d.push(M.y),_=M)}),u=u||[[0,0],[1,1]];var x=g.catmullRom2bezier(d,f,u);return x.unshift(["M",b.x,b.y]),x},getPointRadius:function(s,f){var u=p(s,f);return u},getPointAngle:function(s,f){var u=s.getCenter(),d=Math.atan2(f.y-u.y,f.x-u.x);return d},convertNormalPath:function(s,f){var u=[];return e.each(f,function(d){var b=d[0];switch(b.toLowerCase()){case"m":case"l":case"c":u.push(c(d,s));break;case"z":default:u.push(d);break}}),u},convertPolarPath:function(s,f){var u=[],d,b,_,x;return e.each(f,function(M,P){var C=M[0];switch(C.toLowerCase()){case"m":case"c":case"q":u.push(c(M,s));break;case"l":d=f[P-1],b=M,_=s.isTransposed,x=_?d[d.length-2]===b[1]:d[d.length-1]===b[2],x?u=u.concat(h(d,b,s)):u.push(c(M,s));break;case"z":default:u.push(M);break}}),i(u),u}};B.exports=r},function(B,L,o){var e=o(10),g=o(3),v=o(33),p=o(7),c=function(){var h=i.prototype;h._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function i(r){this._initDefaultCfg(),e(this,r),this.init()}return h.init=function(){},h.getTicks=function(){var n=this,s=n.ticks,f=[];return g(s,function(u){var d;v(u)?d=u:d={text:n.getText(u),tickValue:u,value:n.scale(u)},f.push(d)}),f},h.getText=function(n,s){var f=this.formatter;return n=f?f(n,s):n,(p(n)||!n.toString)&&(n=""),n.toString()},h.rangeMin=function(){return this.range[0]},h.rangeMax=function(){var n=this.range;return n[n.length-1]},h.invert=function(n){return n},h.translate=function(n){return n},h.scale=function(n){return n},h.clone=function(){var n=this,s=n.constructor,f={};return g(n,function(u,d){f[d]=n[d]}),new s(f)},h.change=function(n){return this.ticks=null,e(this,n),this.init(),this},i}();B.exports=c},function(B,L,o){"use strict";L.b=S,L.a=I,L.c=j;var e=o(24),g=o(573),v=o(574),p=o(575),c=o(576),h=o(577),i=o(579),r=o(580),n=o(581),s=o(582),f=o(583),u=o(584),d=o(585),b=o(586),_=o(587),x=o(588),M=o(589),P=o(590),C=o(76),O=o(578),w=0;function S(W,H,J,Q){this._groups=W,this._parents=H,this._name=J,this._id=Q}function I(W){return o.i(e.selection)().transition(W)}function j(){return++w}var N=e.selection.prototype;S.prototype=I.prototype={constructor:S,select:f.a,selectAll:u.a,filter:i.a,merge:r.a,selection:d.a,transition:P.a,call:N.call,nodes:N.nodes,node:N.node,size:N.size,empty:N.empty,each:N.each,on:n.a,attr:g.a,attrTween:v.a,style:b.a,styleTween:_.a,text:x.a,textTween:M.a,remove:s.a,tween:C.a,delay:p.a,duration:c.a,ease:h.a,end:O.a}},function(B,L,o){var e=o(0),g=e.DomUtil,v=["start","process","end","reset"],p=function(){var c=h.prototype;c.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},c._start=function(r){var n=this;n.preStart&&n.preStart(r),n.start(r),n.onStart&&n.onStart(r)},c._process=function(r){var n=this;n.preProcess&&n.preProcess(r),n.process(r),n.onProcess&&n.onProcess(r)},c._end=function(r){var n=this;n.preEnd&&n.preEnd(r),n.end(r),n.onEnd&&n.onEnd(r)},c._reset=function(r){var n=this;n.preReset&&n.preReset(r),n.reset(r),n.onReset&&n.onReset(r)},c.start=function(){},c.process=function(){},c.end=function(){},c.reset=function(){};function h(i,r){var n=this,s=n.getDefaultCfg();e.assign(n,s,i),n.view=n.chart=r,n.canvas=r.get("canvas"),n._bindEvents()}return c._bindEvents=function(){var r=this,n=r.canvas,s=n.get("canvasDOM");r._clearEvents(),e.each(v,function(f){var u=e.upperFirst(f);r["_on"+u+"Listener"]=g.addEventListener(s,r[f+"Event"],e.wrapBehavior(r,"_"+f))})},c._clearEvents=function(){var r=this;e.each(v,function(n){var s="_on"+e.upperFirst(n)+"Listener";r[s]&&r[s].remove()})},c.destroy=function(){this._clearEvents()},h}();B.exports=p},function(B,L,o){var e=o(257),g=!0;B.exports=o(597)(e.isElement,g)},function(B,L,o){B.exports={Axis:o(273),Component:o(79),Guide:o(281),Label:o(285),Legend:o(291),Tooltip:o(296)}},function(B,L){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},e=function(v){var p=typeof v=="undefined"?"undefined":o(v);return v!==null&&p==="object"||p==="function"};B.exports=e},function(B,L,o){"use strict";L.b=p,L.c=c,L.a=h;var e=o(242);function g(i,r){return function(n){return i+n*r}}function v(i,r,n){return i=Math.pow(i,n),r=Math.pow(r,n)-i,n=1/n,function(s){return Math.pow(i+s*r,n)}}function p(i,r){var n=r-i;return n?g(i,n>180||n<-180?n-360*Math.round(n/360):n):o.i(e.a)(isNaN(i)?r:i)}function c(i){return(i=+i)==1?h:function(r,n){return n-r?v(r,n,i):o.i(e.a)(isNaN(r)?n:r)}}function h(i,r){var n=r-i;return n?g(i,n):o.i(e.a)(isNaN(i)?r:i)}},function(B,L,o){var e=o(10),g=function(){var v=p.prototype;v._initDefaultCfg=function(){this.adjustNames=["x","y"]};function p(c){this._initDefaultCfg(),e(this,c)}return v.processAdjust=function(){},p}();B.exports=g},function(B,L,o){var e=o(15),g=o(5),v=o(7),p=o(10),c=o(3);function h(r,n){return e(n)?n:r.invert(r.scale(n))}var i=function(){function r(s){var f=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var u=null,d=this.callback;if(s.callback){var b=s.callback;u=function(){for(var x=arguments.length,M=new Array(x),P=0;P<x;P++)M[P]=arguments[P];var C=b.apply(void 0,M);return v(C)&&(C=d.apply(f,M)),C}}p(this,s),u&&p(this,{callback:u})}var n=r.prototype;return n._getAttrValue=function(f,u){var d=this.values;if(f.isCategory&&!this.linear){var b=f.translate(u);return d[b%d.length]}var _=f.scale(u);return this.getLinearValue(_)},n.getLinearValue=function(f){var u=this.values,d=u.length-1,b=Math.floor(d*f),_=d*f-b,x=u[b],M=b===d?x:u[b+1],P=x+(M-x)*_;return P},n.callback=function(f){var u=this,d=u.scales[0],b=null;return d.type==="identity"?b=d.value:b=u._getAttrValue(d,f),b},n.getNames=function(){for(var f=this.scales,u=this.names,d=Math.min(f.length,u.length),b=[],_=0;_<d;_++)b.push(u[_]);return b},n.getFields=function(){var f=this.scales,u=[];return c(f,function(d){u.push(d.field)}),u},n.getScale=function(f){var u=this.scales,d=this.names,b=d.indexOf(f);return u[b]},n.mapping=function(){for(var f=this.scales,u=this.callback,d=arguments.length,b=new Array(d),_=0;_<d;_++)b[_]=arguments[_];var x=b;if(u){for(var M=0,P=b.length;M<P;M++)b[M]=this._toOriginParam(b[M],f[M]);x=u.apply(this,b)}return x=[].concat(x),x},n._toOriginParam=function(f,u){var d=f;if(!u.isLinear)if(g(f)){d=[];for(var b=0,_=f.length;b<_;b++)d.push(h(u,f[b]))}else d=h(u,f);return d},r}();B.exports=i},function(B,L,o){function e(s,f){s.prototype=Object.create(f.prototype),s.prototype.constructor=s,g(s,f)}function g(s,f){return g=Object.setPrototypeOf||function(d,b){return d.__proto__=b,d},g(s,f)}var v=o(38),p=o(4),c=o(138),h=o(140),i=o(21),r=i.FONT_FAMILY,n=function(s){e(f,s);function f(){return s.apply(this,arguments)||this}var u=f.prototype;return u.getDefaultCfg=function(){var b=s.prototype.getDefaultCfg.call(this);return p.mix({},b,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},u.beforeRender=function(){var b=this,_=b.get("title"),x=b.get("label"),M=b.get("grid");_&&b.set("title",p.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:r,textAlign:"center"},offset:48},_)),x&&b.set("label",p.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:r},offset:10},x)),M&&b.set("grid",p.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},M))},u.render=function(){var b=this;b.beforeRender();var _=b.get("label");_&&b.renderLabels(),b.get("autoPaint")&&b.paint(),p.isNil(b.get("title"))||b.renderTitle(),b.get("group").sort()},u.renderLabels=function(){var b=this,_=b.get("group"),x=b.get("label"),M=new h({name:"axis-label"});b.set("labelRenderer",M),M.set("labelCfg",x);var P=["formatter","htmlTemplate","labelLine","textStyle","useHtml"];p.each(P,function(C){x[C]&&M.set(C,x[C])}),M.set("coord",b.get("coord")),M.set("group",_.addGroup()),M.set("canvas",b.get("canvas"))},u._parseTicks=function(b){b=b||[];for(var _=b.length,x=0;x<_;x++){var M=b[x];p.isObject(M)||(b[x]=this.parseTick(M,x,_))}return this.set("ticks",b),b},u._addTickItem=function(b,_,x,M){M===void 0&&(M="");var P=this.get("tickItems"),C=this.get("subTickItems"),O=this.getTickEnd(_,x,b),w={x1:_.x,y1:_.y,x2:O.x,y2:O.y};P||(P=[]),C||(C=[]),M==="sub"?C.push(w):P.push(w),this.set("tickItems",P),this.set("subTickItems",C)},u._renderLine=function(){var b=this,_=b.get("line"),x;if(_){x=b.getLinePath(),_=p.mix({path:x},_);var M=b.get("group"),P=M.addShape("path",{attrs:_});P.name="axis-line",b.get("appendInfo")&&P.setSilent("appendInfo",b.get("appendInfo")),b.set("lineShape",P)}},u._processCatTicks=function(){var b=this,_=b.get("label"),x=b.get("tickLine"),M=b.get("ticks");M=b._parseTicks(M);for(var P=b._getNormalizedTicks(M),C=0;C<P.length;C+=3){var O=b.getTickPoint(P[C]),w=b.getTickPoint(P[C+1]),S=b.getTickPoint(P[C+2]),I=Math.floor(C/3),j=M[I];x&&(I===0&&b._addTickItem(I,w,x.length),b._addTickItem(I,S,x.length)),_&&b.addLabel(j,O,I)}},u._getNormalizedTicks=function(b){var _=0;b.length>1&&(_=(b[1].value-b[0].value)/2);for(var x=[],M=0;M<b.length;M++){var P=b[M],C=P.value,O=P.value-_,w=P.value+_;x.push(C,O,w)}var S=p.arrayUtil.getRange(x);return x.map(function(I){var j=(I-S.min)/(S.max-S.min);return j})},u.addLabel=function(b,_,x){var M=this,P=M.get("labelItems"),C=M.get("labelRenderer"),O=p.deepMix({},M.get("label")),w;if(C){var S=M.get("_labelOffset");p.isNil(M.get("label").offset)||(S=M.get("label").offset);var I=M.getSideVector(S,_,x);_={x:_.x+I[0]+O.offsetX,y:_.y+I[1]+O.offsetY},O.text=b.text,O.x=_.x,O.y=_.y,O.point=_,O.textAlign=M.getTextAnchor(I),_.rotate&&(O.rotate=_.rotate),P.push(O)}return w},u._processTicks=function(){var b=this,_=b.get("label"),x=b.get("subTickCount"),M=b.get("tickLine"),P=b.get("ticks");if(P=b._parseTicks(P),p.each(P,function(O,w){var S=b.getTickPoint(O.value,w);M&&b._addTickItem(w,S,M.length),_&&b.addLabel(O,S,w)}),x){var C=b.get("subTickLine");p.each(P,function(O,w){if(w>0){var S=O.value-P[w-1].value;S=S/(b.get("subTickCount")+1);for(var I=1;I<=x;I++){var j={text:"",value:w?P[w-1].value+I*S:I*S},N=b.getTickPoint(j.value),W=void 0;C&&C.length?W=C.length:W=parseInt(M.length*(3/5),10),b._addTickItem(I-1,N,W,"sub")}}})}},u._addTickLine=function(b,_){var x=this,M=p.mix({},_),P=[];p.each(b,function(w){P.push(["M",w.x1,w.y1]),P.push(["L",w.x2,w.y2])}),delete M.length,M.path=P;var C=x.get("group"),O=C.addShape("path",{attrs:M});O.name="axis-ticks",O._id=x.get("_id")+"-ticks",O.set("coord",x.get("coord")),x.get("appendInfo")&&O.setSilent("appendInfo",x.get("appendInfo"))},u._renderTicks=function(){var b=this,_=b.get("tickItems"),x=b.get("subTickItems");if(!p.isEmpty(_)){var M=b.get("tickLine");b._addTickLine(_,M)}if(!p.isEmpty(x)){var P=b.get("subTickLine")||b.get("tickLine");b._addTickLine(x,P)}},u._renderGrid=function(){var b=this.get("grid");if(!!b){b.coord=this.get("coord"),b.appendInfo=this.get("appendInfo");var _=this.get("group");this.set("gridGroup",_.addGroup(c,b))}},u._renderLabels=function(){var b=this,_=b.get("labelRenderer"),x=b.get("labelItems");_&&(_.set("items",x),_._dryDraw())},u.paint=function(){var b=this,_=b.get("tickLine"),x=!0;_&&_.hasOwnProperty("alignWithLabel")&&(x=_.alignWithLabel),b._renderLine();var M=b.get("type"),P=M==="cat"||M==="timeCat";P&&x===!1?b._processCatTicks():b._processTicks(),b._renderTicks(),b._renderGrid(),b._renderLabels();var C=this.get("label");C&&C.autoRotate&&b.autoRotateLabels(),C&&C.autoHide&&b.autoHideLabels()},u.parseTick=function(b,_,x){return{text:b,value:_/(x-1)}},u.getTextAnchor=function(b){var _=Math.abs(b[1]/b[0]),x;return _>=1?x="center":b[0]>0?x="start":x="end",x},u.getMaxLabelWidth=function(b){var _=b.getLabels(),x=0;return p.each(_,function(M){var P=M.getBBox(),C=P.width;x<C&&(x=C)}),x},u.getMaxLabelHeight=function(b){var _=b.getLabels(),x=0;return p.each(_,function(M){var P=M.getBBox(),C=P.height;x<C&&(x=C)}),x},u.destroy=function(){var b=this;if(!b.destroyed){var _=b.get("gridGroup");_&&_.remove();var x=this.get("labelRenderer");x&&x.destroy();var M=b.get("group");M.destroy(),s.prototype.destroy.call(this)}},u.clear=function(){var b=this,_=b.get("group");if(!_.get("destroyed")&&_.get("children").length){var x=b.get("gridGroup");x&&x.clear();var M=this.get("labelRenderer");M&&M.clear();var P=b.get("group");P.clear()}},u.autoRotateLabels=function(){},u.autoHideLabels=function(){},u.renderTitle=function(){},u.getLinePath=function(){},u.getTickPoint=function(){},u.getTickEnd=function(){},u.getSideVector=function(){},f}(v);B.exports=n},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,g(c,h)}function g(c,h){return g=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},g(c,h)}var v=o(79),p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},i._init=function(){},i.clear=function(){},i.destroy=function(){c.prototype.destroy.call(this)},i.beforeRender=function(){},i.render=function(){},i.afterRender=function(){},i.beforeDraw=function(){},i.draw=function(){},i.afterDraw=function(){},i.show=function(){},i.hide=function(){},i.setOffset=function(){},i.setPosition=function(){},i.setVisible=function(){},i.setZIndex=function(){},h}(v);B.exports=p},function(B,L,o){var e=o(2),g=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,v=/[^\s\,]+/ig,p={};B.exports={parseRadius:function(h){var i=0,r=0,n=0,s=0;return e.isArray(h)?h.length===1?i=r=n=s=h[0]:h.length===2?(i=n=h[0],r=s=h[1]):h.length===3?(i=h[0],r=s=h[1],n=h[2]):(i=h[0],r=h[1],n=h[2],s=h[3]):i=r=n=s=h,{r1:i,r2:r,r3:n,r4:s}},parsePath:function(h){if(h=h||[],e.isArray(h))return h;if(e.isString(h))return h=h.match(g),e.each(h,function(i,r){if(i=i.match(v),i[0].length>1){var n=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=n}e.each(i,function(s,f){isNaN(s)||(i[f]=+s)}),h[r]=i}),h},numberToColor:function(h){var i=p[h];if(!i){for(var r=h.toString(16),n=r.length;n<6;n++)r="0"+r;i="#"+r,p[h]=i}return i}}},function(B,L,o){var e=o(1),g=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,v=/[^\s\,]+/ig;B.exports={parseRadius:function(c){var h=0,i=0,r=0,n=0;return e.isArray(c)?c.length===1?h=i=r=n=c[0]:c.length===2?(h=r=c[0],i=n=c[1]):c.length===3?(h=c[0],i=n=c[1],r=c[2]):(h=c[0],i=c[1],r=c[2],n=c[3]):h=i=r=n=c,{r1:h,r2:i,r3:r,r4:n}},parsePath:function(c){if(c=c||[],e.isArray(c))return c;if(e.isString(c))return c=c.match(g),e.each(c,function(h,i){if(h=h.match(v),h[0].length>1){var r=h[0].charAt(0);h.splice(1,0,h[0].substr(1)),h[0]=r}e.each(h,function(n,s){isNaN(n)||(h[s]=+n)}),c[i]=h}),c}}},function(B,L,o){var e=o(45),g=o(5),v=5;function p(h,i,r,n){r=r||0,n=n||v;for(var s in i)if(i.hasOwnProperty(s)){var f=i[s];f!==null&&e(f)?(e(h[s])||(h[s]={}),r<n?p(h[s],f,r+1,n):h[s]=i[s]):g(f)?(h[s]=[],h[s]=h[s].concat(f)):f!==void 0&&(h[s]=f)}}var c=function(){for(var i=new Array(arguments.length),r=i.length,n=0;n<r;n++)i[n]=arguments[n];for(var s=i[0],f=1;f<r;f++)p(s,i[f]);return s};B.exports=c},function(B,L){var o=1e-5;B.exports=function(g,v){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o;return Math.abs(g-v)<p}},function(B,L,o){var e=o(23);function g(v){return e(v)?Array.prototype.slice.call(v):[]}B.exports=g},function(B,L,o){var e=o(7);function g(v){return e(v)?"":v.toString()}B.exports=g},function(B,L,o){var e=o(115),g=o(19),v=function(c){if(!e(c)||!g(c,"Object"))return!1;if(Object.getPrototypeOf(c)===null)return!0;for(var h=c;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(c)===h};B.exports=v},function(B,L,o){"use strict";L.b=p,L.c=c,L.a=h;var e=o(235);function g(i,r){return function(n){return i+n*r}}function v(i,r,n){return i=Math.pow(i,n),r=Math.pow(r,n)-i,n=1/n,function(s){return Math.pow(i+s*r,n)}}function p(i,r){var n=r-i;return n?g(i,n>180||n<-180?n-360*Math.round(n/360):n):o.i(e.a)(isNaN(i)?r:i)}function c(i){return(i=+i)==1?h:function(r,n){return n-r?v(r,n,i):o.i(e.a)(isNaN(r)?n:r)}}function h(i,r){var n=r-i;return n?g(i,n):o.i(e.a)(isNaN(i)?r:i)}},function(B,L){B.exports=he},function(B,L,o){"use strict";function e(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function g(n,s){for(var f=0;f<s.length;f++){var u=s[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function v(n,s,f){return s&&g(n.prototype,s),f&&g(n,f),n}var p=o(68),c=o(10),h=p.mat3,i=p.vec3,r=function(){v(n,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]);function n(s){e(this,n);var f=this.getDefaultCfg();c(this,f,s),this.init()}return v(n,[{key:"init",value:function(){var f=this.start,u=this.end,d={x:(f.x+u.x)/2,y:(f.y+u.y)/2};this.center=d,this.width=Math.abs(u.x-f.x),this.height=Math.abs(u.y-f.y)}},{key:"_swapDim",value:function(f){var u=this[f];if(u){var d=u.start;u.start=u.end,u.end=d}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(f,u){var d=this[u],b=d.start,_=d.end;return b+f*(_-b)}},{key:"invertDim",value:function(f,u){var d=this[u],b=d.start,_=d.end;return(f-b)/(_-b)}},{key:"convertPoint",value:function(f){return f}},{key:"invertPoint",value:function(f){return f}},{key:"applyMatrix",value:function(f,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,_=[f,u,d];return i.transformMat3(_,_,b),_}},{key:"invertMatrix",value:function(f,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,_=h.invert([],b),x=[f,u,d];return i.transformMat3(x,x,_),x}},{key:"convert",value:function(f){var u=this.convertPoint(f),d=u.x,b=u.y,_=this.applyMatrix(d,b,1);return{x:_[0],y:_[1]}}},{key:"invert",value:function(f){var u=this.invertMatrix(f.x,f.y,1);return this.invertPoint({x:u[0],y:u[1]})}},{key:"rotate",value:function(f){var u=this.matrix,d=this.center;return h.translate(u,u,[-d.x,-d.y]),h.rotate(u,u,f),h.translate(u,u,[d.x,d.y]),this}},{key:"reflect",value:function(f){switch(f){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(f,u){var d=this.matrix,b=this.center;return h.translate(d,d,[-b.x,-b.y]),h.scale(d,d,[f,u]),h.translate(d,d,[b.x,b.y]),this}},{key:"translate",value:function(f,u){var d=this.matrix;return h.translate(d,d,[f,u]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),n}();B.exports=r},function(B,L,o){function e(P,C){P.prototype=Object.create(C.prototype),P.prototype.constructor=P,g(P,C)}function g(P,C){return g=Object.setPrototypeOf||function(w,S){return w.__proto__=S,w},g(P,C)}var v=o(0),p=o(312),c=o(18),h=c.Canvas,i=v.DomUtil,r=o(6),n=o(316),s=o(151),f=o(153),u=o(152),d=o(154),b="auto";function _(P,C){var O=!1;return v.each(P,function(w){var S=[].concat(w.values),I=[].concat(C.values);if(w.type===C.type&&w.field===C.field&&S.sort().toString()===I.sort().toString()){O=!0;return}}),O}function x(P,C){return v.isEqualWith(P,C,function(O,w){return O===w})}var M=function(P){e(C,P);function C(){return P.apply(this,arguments)||this}var O=C.prototype;return O.getDefaultCfg=function(){var S=P.prototype.getDefaultCfg.call(this);return v.mix(S,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:r.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:r.renderer,views:[]})},O.init=function(){var S=this,I=S.get("viewTheme");S._initCanvas(),S._initPlot(),S._initEvents(),P.prototype.init.call(this);var j=new s.Tooltip({chart:S,viewTheme:I,options:{}});S.set("tooltipController",j);var N=new s.Legend({chart:S,viewTheme:I});S.set("legendController",N),S.set("_id","chart"),S.emit("afterinit")},O._isAutoPadding=function(){var S=this.get("padding");return v.isArray(S)?S.includes(b):S===b},O._getAutoPadding=function(){for(var S=this.get("padding"),I=this.get("frontPlot"),j=I.getBBox(),N=this.get("backPlot"),W=u(N,d(this.get("plotRange"))),H=f(j,W),J=[0-H.minY,H.maxX-this.get("width"),H.maxY-this.get("height"),0-H.minX],Q=v.toAllPadding(S),ne=0;ne<Q.length;ne++)if(Q[ne]===b){var K=Math.max(0,J[ne]);Q[ne]=K+this.get("autoPaddingAppend")}return Q},O._initCanvas=function(){var S=this.get("container"),I=this.get("id");!S&&I&&(S=I,this.set("container",I));var j=this.get("width"),N=this.get("height");if(v.isString(S)){if(S=document.getElementById(S),!S)throw new Error("Please specify the container for the chart!");this.set("container",S)}var W=i.createDom('<div style="position:relative;"></div>');S.appendChild(W),this.set("wrapperEl",W),this.get("forceFit")&&(j=i.getWidth(S,j),this.set("width",j));var H=this.get("renderer"),J=new h({containerDOM:W,width:j,height:N,pixelRatio:H==="svg"?1:this.get("pixelRatio"),renderer:H});this.set("canvas",J)},O._initPlot=function(){var S=this;S._initPlotBack();var I=S.get("canvas"),j=I.addGroup({zIndex:1}),N=I.addGroup({zIndex:0}),W=I.addGroup({zIndex:3});S.set("backPlot",j),S.set("middlePlot",N),S.set("frontPlot",W)},O._initPlotBack=function(){var S=this,I=S.get("canvas"),j=S.get("viewTheme"),N=I.addGroup(n,{padding:this.get("padding"),plotBackground:v.mix({},j.plotBackground,S.get("plotBackground")),background:v.mix({},j.background,S.get("background"))});S.set("plot",N),S.set("plotRange",N.get("plotRange"))},O._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",v.wrapBehavior(this,"_initForceFitEvent"))},O._initForceFitEvent=function(){var S=setTimeout(v.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",S)},O._renderLegends=function(){var S=this.get("options"),I=S.legends;if(v.isNil(I)||I!==!1){var j=this.get("legendController");if(j.options=I||{},j.plotRange=this.get("plotRange"),I&&I.custom)j.addCustomLegend();else{var N=this.getAllGeoms(),W=[];v.each(N,function(J){var Q=J.get("view"),ne=J.getAttrsForLegend();v.each(ne,function(K){var ie=K.type,de=K.getScale(ie);if(de.field&&de.type!=="identity"&&!_(W,de)){W.push(de);var we=Q.getFilteredOutValues(de.field);j.addLegend(de,K,J,we)}})});var H=this.getYScales();W.length===0&&H.length>1&&j.addMixedLegend(H,N)}j.alignLegends()}},O._renderTooltips=function(){var S=this.get("options");if(v.isNil(S.tooltip)||S.tooltip!==!1){var I=this.get("tooltipController");I.options=S.tooltip||{},I.renderTooltip()}},O.getAllGeoms=function(){var S=[];S=S.concat(this.get("geoms"));var I=this.get("views");return v.each(I,function(j){S=S.concat(j.get("geoms"))}),S},O.forceFit=function(){var S=this;if(!(!S||S.destroyed)){var I=S.get("container"),j=S.get("width"),N=i.getWidth(I,j);if(N!==0&&N!==j){var W=S.get("height");S.changeSize(N,W)}return S}},O.resetPlot=function(){var S=this.get("plot"),I=this.get("padding");x(I,S.get("padding"))||(S.set("padding",I),S.repaint())},O.changeSize=function(S,I){var j=this,N=j.get("canvas");N.changeSize(S,I);var W=this.get("plot");return j.set("width",S),j.set("height",I),W.repaint(),this.set("keepPadding",!0),j.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),j},O.changeWidth=function(S){return this.changeSize(S,this.get("height"))},O.changeHeight=function(S){return this.changeSize(this.get("width"),S)},O.view=function(S){S=S||{},S.theme=this.get("theme"),S.parent=this,S.backPlot=this.get("backPlot"),S.middlePlot=this.get("middlePlot"),S.frontPlot=this.get("frontPlot"),S.canvas=this.get("canvas"),v.isNil(S.animate)&&(S.animate=this.get("animate")),S.options=v.mix({},this._getSharedOptions(),S.options);var I=new p(S);return I.set("_id","view"+this.get("views").length),this.get("views").push(I),this.emit("addview",{view:I}),I},O.removeView=function(S){var I=this.get("views");v.Array.remove(I,S),S.destroy()},O._getSharedOptions=function(){var S=this.get("options"),I={};return v.each(["scales","coord","axes"],function(j){I[j]=v.cloneDeep(S[j])}),I},O.getViewRegion=function(){var S=this.get("plotRange");return{start:S.bl,end:S.tr}},O.legend=function(S,I){var j=this.get("options");j.legends||(j.legends={});var N={};return S===!1?j.legends=!1:v.isObject(S)?N=S:v.isString(S)?N[S]=I:N=I,v.mix(j.legends,N),this},O.tooltip=function(S,I){var j=this.get("options");return j.tooltip||(j.tooltip={}),S===!1?j.tooltip=!1:v.isObject(S)?v.mix(j.tooltip,S):v.mix(j.tooltip,I),this},O.clear=function(){this.emit("beforeclear");for(var S=this.get("views");S.length>0;){var I=S.shift();I.destroy()}P.prototype.clear.call(this);var j=this.get("canvas");return this.resetPlot(),j.draw(),this.emit("afterclear"),this},O.clearInner=function(){var S=this.get("views");v.each(S,function(N){N.clearInner()});var I=this.get("tooltipController");if(I&&I.clear(),!this.get("keepLegend")){var j=this.get("legendController");j&&j.clear()}P.prototype.clearInner.call(this)},O.drawComponents=function(){P.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},O.render=function(){var S=this;if(!S.get("keepPadding")&&S._isAutoPadding()){S.beforeRender(),S.drawComponents();var I=S._getAutoPadding(),j=S.get("plot");x(j.get("padding"),I)||(j.set("padding",I),j.repaint())}var N=S.get("middlePlot");if(S.get("limitInPlot")&&!N.attr("clip")){var W=v.getClipByRange(S.get("plotRange"));N.attr("clip",W)}P.prototype.render.call(this),S._renderTooltips()},O.repaint=function(){this.get("keepPadding")||this.resetPlot(),P.prototype.repaint.call(this)},O.changeVisible=function(S){var I=this.get("wrapperEl"),j=S?"":"none";I.style.display=j},O.toDataURL=function(){var S=this,I=S.get("canvas"),j=S.get("renderer"),N=I.get("el"),W="";if(j==="svg"){var H=N.cloneNode(!0),J=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Q=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",J);Q.replaceChild(H,Q.documentElement);var ne=new XMLSerializer().serializeToString(Q);W="data:image/svg+xml;charset=utf8,"+encodeURIComponent(ne)}else j==="canvas"&&(W=N.toDataURL("image/png"));return W},O.downloadImage=function(S){var I=this,j=document.createElement("a"),N=I.get("renderer"),W=(S||"chart")+(N==="svg"?".svg":".png"),H=I.get("canvas");H.get("timeline").stopAllAnimations(),setTimeout(function(){var J=I.toDataURL();if(window.Blob&&window.URL&&N!=="svg"){for(var Q=J.split(","),ne=Q[0].match(/:(.*?);/)[1],K=atob(Q[1]),ie=K.length,de=new Uint8Array(ie);ie--;)de[ie]=K.charCodeAt(ie);var we=new Blob([de],{type:ne});window.navigator.msSaveBlob?window.navigator.msSaveBlob(we,W):j.addEventListener("click",function(){j.download=W,j.href=window.URL.createObjectURL(we)})}else j.addEventListener("click",function(){j.download=W,j.href=J});var Re=document.createEvent("MouseEvents");Re.initEvent("click",!1,!1),j.dispatchEvent(Re)},16)},O.showTooltip=function(S){var I=this.getViewsByPoint(S);if(I.length){var j=this.get("tooltipController");j.showTooltip(S,I)}return this},O.lockTooltip=function(){var S=this.get("tooltipController");return S.lockTooltip(),this},O.unlockTooltip=function(){var S=this.get("tooltipController");return S.unlockTooltip(),this},O.hideTooltip=function(){var S=this.get("tooltipController");return S.hideTooltip(),this},O.getTooltipItems=function(S){var I=this,j=I.getViewsByPoint(S),N=[];return v.each(j,function(W){var H=W.get("geoms");v.each(H,function(J){var Q=J.get("dataArray"),ne=[];v.each(Q,function(K){var ie=J.findPoint(S,K);if(ie){var de=J.getTipItems(ie);ne=ne.concat(de)}}),N=N.concat(ne)})}),N},O.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var S=this.get("canvas"),I=this.get("wrapperEl");I.parentNode.removeChild(I),P.prototype.destroy.call(this),S.destroy(),window.removeEventListener("resize",v.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},C}(p);B.exports=M},function(B,L,o){var e=o(202),g=o(18),v=o(149),p=o(49),c=o(6),h=o(13),i=o(0),r={version:c.version,Animate:v,Chart:p,Global:c,Scale:e,Shape:h,Util:i,G:g,DomUtil:i.DomUtil,MatrixUtil:i.MatrixUtil,PathUtil:i.PathUtil};r.track=function(){console.warn("G2 tracks nothing ;-)")},typeof window!="undefined"&&(window.G2?console.warn("There are multiple versions of G2. Version "+r.version+"'s reference is 'window.G2_3'"):window.G2=r),B.exports=r},function(B,L,o){var e=o(6),g=o(0),v=g.assign,p=g.isNil,c=g.isArray,h=g.cloneDeep,i=g.wrapBehavior,r=g.getWrapBehavior,n=function(){var s=f.prototype;s.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:e.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:e.fontFamily}}}};function f(u){var d=this.getDefaultCfg();v(this,d,u),this.init()}return s.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},s.initContainer=function(){var d=this.chart,b=d.get("frontPlot"),_=b.addGroup();this.group=_},s.initViews=function(){for(var d=this.chart,b=d.get("data"),_=this.eachView,x=this.generateFacets(b),M=0;M<x.length;M++){var P=x[M],C=P.region,O=d.view({start:C.start,end:C.end,padding:this.padding});O.source(P.data),this.beforeProcessView(O,P),_&&_(O,P),this.afterProcessView(O,P),P.view=O}this.facets=x},s.beforeProcessView=function(){},s.afterProcessView=function(d,b){this.autoSetAxis&&this.processAxis(d,b)},s.processAxis=function(d,b){var _=d.get("options"),x=d.get("geoms");if((!_.coord.type||_.coord.type==="rect")&&x.length){var M=x[0].get("attrOptions").position.field,P=c(M)?M:M.split("*").map(function(S){return S.trim()}),C=P[0],O=P[1];p(_.axes)&&(_.axes={});var w=_.axes;w!==!1&&(C&&w[C]!==!1&&(w[C]=w[C]||{},this.setXAxis(C,w,b)),O&&w[O]!==!1&&(w[O]=w[O]||{},this.setYAxis(O,w,b)))}},s.setXAxis=function(){},s.setYAxis=function(){},s.renderTitle=function(d,b){this.drawColTitle(d,b)},s.getScaleText=function(d,b,_){var x;if(d){var M=_.get("scales"),P=M[d];P||(P=_.createScale(d)),x=P.getText(b)}else x=b;return x},s.drawColTitle=function(d,b){var _=this.getScaleText(b.colField,b.colValue,d),x=v({position:["50%","0%"],content:_},this.colTitle);d.guide().text(x)},s.drawRowTitle=function(d,b){var _=this.getScaleText(b.rowField,b.rowValue,d),x=v({position:["100%","50%"],content:_},h(this.rowTitle));d.guide().text(x)},s.getFilter=function(d){var b=function(x){var M=!0;return d.forEach(function(P){var C=P.field,O=P.value,w=!0;!p(O)&&C&&(w=x[C]===O),M=M&&w}),M};return b},s.getFieldValues=function(d,b){for(var _=[],x={},M=0;M<b.length;M++){var P=b[M],C=P[d];!p(C)&&!x[C]&&(_.push(C),x[C]=!0)}return _},s.getRegion=function(d,b,_,x){var M=1/b,P=1/d,C={x:M*_,y:P*x},O={x:C.x+M,y:C.y+P};return{start:C,end:O}},s.generateFacets=function(){return[]},s._bindEvent=function(){var d=this.chart;d.on("afterchangedata",i(this,"onDataChange")),d.on("beforeclear",i(this,"onClear")),d.on("beforedestroy",i(this,"destroy")),d.on("beforepaint",i(this,"onPaint")),d.on("setdata",i(this,"onDataChange"))},s._clearEvent=function(){var d=this.chart;d&&(d.off("afterchangedata",r(this,"onDataChange")),d.off("beforeclear",r(this,"onClear")),d.off("beforedestroy",r(this,"destroy")),d.off("beforepaint",r(this,"onPaint")),d.off("setdata",r(this,"onDataChange")))},s._clearFacets=function(){var d=this.facets,b=this.chart;if(d)for(var _=0;_<d.length;_++){var x=d[_];b.removeView(x.view)}this.facets=null},s.onClear=function(){this.onRemove()},s.onPaint=function(){if(this.showTitle)for(var d=this.facets,b=0;b<d.length;b++){var _=d[b],x=_.view;this.renderTitle(x,_)}},s.onDataChange=function(){this._clearFacets(),this.initViews()},s.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},s.destroy=function(){this.onRemove(),this.destroyed=!0},f}();B.exports=n},function(B,L,o){B.exports={Canvas:o(361),Group:o(164),Shape:o(8),Arc:o(166),Circle:o(167),Dom:o(168),Ellipse:o(169),Fan:o(170),Image:o(171),Line:o(172),Marker:o(87),Path:o(175),Polygon:o(176),Polyline:o(177),Rect:o(178),Text:o(179),PathSegment:o(56),PathUtil:o(90),Event:o(165),version:"3.3.6"}},function(B,L,o){var e=o(2);function g(i,r,n,s){return{x:Math.cos(s)*n+i,y:Math.sin(s)*n+r}}function v(i,r,n,s){var f,u;return s?i<r?(f=r-i,u=Math.PI*2-n+i):i>n&&(f=Math.PI*2-i+r,u=i-n):(f=i-r,u=n-i),f>u?n:r}function p(i,r,n,s){var f=0;return n-r>=Math.PI*2&&(f=Math.PI*2),r=e.mod(r,Math.PI*2),n=e.mod(n,Math.PI*2)+f,i=e.mod(i,Math.PI*2),s?r>=n?i>n&&i<r?i:v(i,n,r,!0):i<r||i>n?i:v(i,r,n):r<=n?r<i&&i<n?i:v(i,r,n,!0):i>r||i<n?i:v(i,n,r)}function c(i,r,n,s,f,u,d,b,_){var x=[d,b],M=[i,r],P=[1,0],C=e.vec2.subtract([],x,M),O=e.vec2.angleTo(P,C);O=p(O,s,f,u);var w=[n*Math.cos(O)+i,n*Math.sin(O)+r];_&&(_.x=w[0],_.y=w[1]);var S=e.vec2.distance(w,x);return S}function h(i,r,n,s,f,u){var d=0,b=Math.PI/2,_=Math.PI,x=Math.PI*3/2,M=[],P=p(d,s,f,u);P===d&&M.push(g(i,r,n,d)),P=p(b,s,f,u),P===b&&M.push(g(i,r,n,b)),P=p(_,s,f,u),P===_&&M.push(g(i,r,n,_)),P=p(x,s,f,u),P===x&&M.push(g(i,r,n,x)),M.push(g(i,r,n,s)),M.push(g(i,r,n,f));var C=Infinity,O=-Infinity,w=Infinity,S=-Infinity;return e.each(M,function(I){C>I.x&&(C=I.x),O<I.x&&(O=I.x),w>I.y&&(w=I.y),S<I.y&&(S=I.y)}),{minX:C,minY:w,maxX:O,maxY:S}}B.exports={nearAngle:p,projectPoint:function(r,n,s,f,u,d,b,_){var x={};return c(r,n,s,f,u,d,b,_,x),x},pointDistance:c,box:h}},function(B,L,o){var e=o(2).vec2;B.exports={at:function(v,p,c){return(p-v)*c+v},pointDistance:function(v,p,c,h,i,r){var n=[c-v,h-p];if(e.exactEquals(n,[0,0]))return NaN;var s=[-n[1],n[0]];e.normalize(s,s);var f=[i-v,r-p];return Math.abs(e.dot(f,s))},box:function(v,p,c,h,i){var r=i/2,n=Math.min(v,c),s=Math.max(v,c),f=Math.min(p,h),u=Math.max(p,h);return{minX:n-r,minY:f-r,maxX:s+r,maxY:u+r}},len:function(v,p,c,h){return Math.sqrt((c-v)*(c-v)+(h-p)*(h-p))}}},function(B,L,o){var e=o(39),g=o(56),v=Math.PI,p=Math.sin,c=Math.cos,h=Math.atan2,i=10,r=v/3;function n(u,d,b,_,x,M,P){var C,O,w,S,I,j,N;if(!d.fill){var W=d.arrowLength||i,H=d.arrowAngle?d.arrowAngle*v/180:r;N=h(_-M,b-x),I=Math.abs(d.lineWidth*c(N))/2,j=Math.abs(d.lineWidth*p(N))/2,P&&(I=-I,j=-j),C=x+W*c(N+H/2),O=M+W*p(N+H/2),w=x+W*c(N-H/2),S=M+W*p(N-H/2),u.beginPath(),u.moveTo(C-I,O-j),u.lineTo(x-I,M-j),u.lineTo(w-I,S-j),u.moveTo(x-I,M-j),u.lineTo(x+I,M+j),u.moveTo(x,M),u.stroke()}}function s(u){var d=[],b=e.parsePath(u.path),_;if(!Array.isArray(b)||b.length===0||b[0][0]!=="M"&&b[0][0]!=="m")return!1;for(var x=b.length,M=0;M<b.length;M++){var P=b[M];_=new g(P,_,M===x-1),d.push(_)}return d}function f(u,d,b,_,x,M,P){var C=P?d.startArrow:d.endArrow,O=C.d,w=0,S=x-b,I=M-_,j=Math.atan(S/I);I===0&&S<0?w=Math.PI:S>0&&I>0?w=Math.PI/2-j:S<0&&I<0?w=-Math.PI/2-j:S>=0&&I<0?w=-j-Math.PI/2:S<=0&&I>0&&(w=Math.PI/2-j);var N=s(C);if(!!N){O&&(P?(x=x+Math.sin(Math.abs(j))*O,M=M+Math.cos(Math.abs(j))*O-.5*u.lineWidth):(x=x-Math.sin(Math.abs(j))*O,M=M-Math.cos(Math.abs(j))*O+.5*u.lineWidth)),u.save(),u.beginPath(),u.translate(x,M),u.rotate(w);for(var W=0;W<N.length;W++)N[W].draw(u);u.setTransform(1,0,0,1,0,0),u.fillStyle=u.strokeStyle,u.fill(),u.restore()}}B.exports={addStartArrow:function(d,b,_,x,M,P){typeof b.startArrow=="object"?f(d,b,_,x,M,P,!0):b.startArrow&&n(d,b,_,x,M,P,!0)},addEndArrow:function(d,b,_,x,M,P){typeof b.endArrow=="object"?f(d,b,_,x,M,P,!1):b.endArrow&&n(d,b,_,x,M,P,!1)}}},function(B,L,o){var e=o(2),g=o(89),v=o(88),p=o(174),c=o(173),h=e.vec3,i=e.mat3,r=["m","l","c","a","q","h","v","t","s","z"];function n(x,M,P){return{x:P.x+x,y:P.y+M}}function s(x,M){return{x:M.x+(M.x-x.x),y:M.y+(M.y-x.y)}}function f(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1])}function u(x,M){return(x[0]*M[0]+x[1]*M[1])/(f(x)*f(M))}function d(x,M){return(x[0]*M[1]<x[1]*M[0]?-1:1)*Math.acos(u(x,M))}function b(x,M,P,C,O,w,S){var I=e.mod(e.toRadian(S),Math.PI*2),j=x.x,N=x.y,W=M.x,H=M.y,J=Math.cos(I)*(j-W)/2+Math.sin(I)*(N-H)/2,Q=-1*Math.sin(I)*(j-W)/2+Math.cos(I)*(N-H)/2,ne=J*J/(O*O)+Q*Q/(w*w);ne>1&&(O*=Math.sqrt(ne),w*=Math.sqrt(ne));var K=O*O*(Q*Q)+w*w*(J*J),ie=Math.sqrt((O*O*(w*w)-K)/K);P===C&&(ie*=-1),isNaN(ie)&&(ie=0);var de=ie*O*Q/w,we=ie*-w*J/O,Re=(j+W)/2+Math.cos(I)*de-Math.sin(I)*we,_e=(N+H)/2+Math.sin(I)*de+Math.cos(I)*we,Ue=d([1,0],[(J-de)/O,(Q-we)/w]),rt=[(J-de)/O,(Q-we)/w],Fe=[(-1*J-de)/O,(-1*Q-we)/w],Se=d(rt,Fe);return u(rt,Fe)<=-1&&(Se=Math.PI),u(rt,Fe)>=1&&(Se=0),C===0&&Se>0&&(Se=Se-2*Math.PI),C===1&&Se<0&&(Se=Se+2*Math.PI),[x,Re,_e,O,w,Ue,Se,I,C]}var _=function(M,P,C){this.preSegment=P,this.isLast=C,this.init(M,P)};e.augment(_,{init:function(M,P){var C=M[0];P=P||{endPoint:{x:0,y:0}};var O=r.indexOf(C)>=0,w=O?C.toUpperCase():C,S=M,I,j,N,W,H=P.endPoint,J=S[1],Q=S[2];switch(w){default:break;case"M":O?W=n(J,Q,H):W={x:J,y:Q},this.command="M",this.params=[H,W],this.subStart=W,this.endPoint=W;break;case"L":O?W=n(J,Q,H):W={x:J,y:Q},this.command="L",this.params=[H,W],this.subStart=P.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-H.x,W.y-H.y]},this.startTangent=function(){return[H.x-W.x,H.y-W.y]};break;case"H":O?W=n(J,0,H):W={x:J,y:H.y},this.command="L",this.params=[H,W],this.subStart=P.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-H.x,W.y-H.y]},this.startTangent=function(){return[H.x-W.x,H.y-W.y]};break;case"V":O?W=n(0,J,H):W={x:H.x,y:J},this.command="L",this.params=[H,W],this.subStart=P.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-H.x,W.y-H.y]},this.startTangent=function(){return[H.x-W.x,H.y-W.y]};break;case"Q":O?(I=n(J,Q,H),j=n(S[3],S[4],H)):(I={x:J,y:Q},j={x:S[3],y:S[4]}),this.command="Q",this.params=[H,I,j],this.subStart=P.subStart,this.endPoint=j,this.endTangent=function(){return[j.x-I.x,j.y-I.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]};break;case"T":O?j=n(J,Q,H):j={x:J,y:Q},P.command==="Q"?(I=s(P.params[1],H),this.command="Q",this.params=[H,I,j],this.subStart=P.subStart,this.endPoint=j,this.endTangent=function(){return[j.x-I.x,j.y-I.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]}):(this.command="TL",this.params=[H,j],this.subStart=P.subStart,this.endPoint=j,this.endTangent=function(){return[j.x-H.x,j.y-H.y]},this.startTangent=function(){return[H.x-j.x,H.y-j.y]});break;case"C":O?(I=n(J,Q,H),j=n(S[3],S[4],H),N=n(S[5],S[6],H)):(I={x:J,y:Q},j={x:S[3],y:S[4]},N={x:S[5],y:S[6]}),this.command="C",this.params=[H,I,j,N],this.subStart=P.subStart,this.endPoint=N,this.endTangent=function(){return[N.x-j.x,N.y-j.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]};break;case"S":O?(j=n(J,Q,H),N=n(S[3],S[4],H)):(j={x:J,y:Q},N={x:S[3],y:S[4]}),P.command==="C"?(I=s(P.params[2],H),this.command="C",this.params=[H,I,j,N],this.subStart=P.subStart,this.endPoint=N,this.endTangent=function(){return[N.x-j.x,N.y-j.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]}):(this.command="SQ",this.params=[H,j,N],this.subStart=P.subStart,this.endPoint=N,this.endTangent=function(){return[N.x-j.x,N.y-j.y]},this.startTangent=function(){return[H.x-j.x,H.y-j.y]});break;case"A":{var ne=J,K=Q,ie=S[3],de=S[4],we=S[5];O?W=n(S[6],S[7],H):W={x:S[6],y:S[7]},this.command="A";var Re=b(H,W,de,we,ne,K,ie);this.params=Re;var _e=P.subStart;this.subStart=_e,this.endPoint=W;var Ue=Re[5]%(Math.PI*2);e.isNumberEqual(Ue,Math.PI*2)&&(Ue=0);var rt=Re[6]%(Math.PI*2);e.isNumberEqual(rt,Math.PI*2)&&(rt=0);var Fe=.001;this.startTangent=function(){we===0&&(Fe*=-1);var Se=Re[3]*Math.cos(Ue-Fe)+Re[1],ye=Re[4]*Math.sin(Ue-Fe)+Re[2];return[Se-_e.x,ye-_e.y]},this.endTangent=function(){var Se=Re[6];Se-Math.PI*2<1e-4&&(Se=0);var ye=Re[3]*Math.cos(Ue+Se+Fe)+Re[1],Oe=Re[4]*Math.sin(Ue+Se-Fe)+Re[2];return[H.x-ye,H.y-Oe]};break}case"Z":this.command="Z",this.params=[H,P.subStart],this.subStart=P.subStart,this.endPoint=P.subStart}},isInside:function(M,P,C){var O=this,w=O.command,S=O.params,I=O.box;if(I&&!g.box(I.minX,I.maxX,I.minY,I.maxY,M,P))return!1;switch(w){default:break;case"M":return!1;case"TL":case"L":case"Z":return g.line(S[0].x,S[0].y,S[1].x,S[1].y,C,M,P);case"SQ":case"Q":return g.quadraticline(S[0].x,S[0].y,S[1].x,S[1].y,S[2].x,S[2].y,C,M,P);case"C":return g.cubicline(S[0].x,S[0].y,S[1].x,S[1].y,S[2].x,S[2].y,S[3].x,S[3].y,C,M,P);case"A":{var j=S,N=j[1],W=j[2],H=j[3],J=j[4],Q=j[5],ne=j[6],K=j[7],ie=j[8],de=H>J?H:J,we=H>J?1:H/J,Re=H>J?J/H:1;j=[M,P,1];var _e=[1,0,0,0,1,0,0,0,1];return i.translate(_e,_e,[-N,-W]),i.rotate(_e,_e,-K),i.scale(_e,_e,[1/we,1/Re]),h.transformMat3(j,j,_e),g.arcline(0,0,de,Q,Q+ne,1-ie,C,j[0],j[1])}}return!1},draw:function(M){var P=this.command,C=this.params,O,w,S;switch(P){default:break;case"M":M.moveTo(C[1].x,C[1].y);break;case"TL":case"L":M.lineTo(C[1].x,C[1].y);break;case"SQ":case"Q":O=C[1],w=C[2],M.quadraticCurveTo(O.x,O.y,w.x,w.y);break;case"C":O=C[1],w=C[2],S=C[3],M.bezierCurveTo(O.x,O.y,w.x,w.y,S.x,S.y);break;case"A":{var I=C,j=I[1],N=I[2],W=j,H=N,J=I[3],Q=I[4],ne=I[5],K=I[6],ie=I[7],de=I[8],we=J>Q?J:Q,Re=J>Q?1:J/Q,_e=J>Q?Q/J:1;M.translate(W,H),M.rotate(ie),M.scale(Re,_e),M.arc(0,0,we,ne,ne+K,1-de),M.scale(1/Re,1/_e),M.rotate(-ie),M.translate(-W,-H);break}case"Z":M.closePath();break}},getBBox:function(M){var P=M/2,C=this.params,O,w,S,I;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(C[0].x,C[1].x)-P,maxX:Math.max(C[0].x,C[1].x)+P,minY:Math.min(C[0].y,C[1].y)-P,maxY:Math.max(C[0].y,C[1].y)+P};break;case"SQ":case"Q":for(w=p.extrema(C[0].x,C[1].x,C[2].x),S=0,I=w.length;S<I;S++)w[S]=p.at(C[0].x,C[1].x,C[2].x,w[S]);for(w.push(C[0].x,C[2].x),O=p.extrema(C[0].y,C[1].y,C[2].y),S=0,I=O.length;S<I;S++)O[S]=p.at(C[0].y,C[1].y,C[2].y,O);O.push(C[0].y,C[2].y),this.box={minX:Math.min.apply(Math,w)-P,maxX:Math.max.apply(Math,w)+P,minY:Math.min.apply(Math,O)-P,maxY:Math.max.apply(Math,O)+P};break;case"C":for(w=v.extrema(C[0].x,C[1].x,C[2].x,C[3].x),S=0,I=w.length;S<I;S++)w[S]=v.at(C[0].x,C[1].x,C[2].x,C[3].x,w[S]);for(O=v.extrema(C[0].y,C[1].y,C[2].y,C[3].y),S=0,I=O.length;S<I;S++)O[S]=v.at(C[0].y,C[1].y,C[2].y,C[3].y,O[S]);w.push(C[0].x,C[3].x),O.push(C[0].y,C[3].y),this.box={minX:Math.min.apply(Math,w)-P,maxX:Math.max.apply(Math,w)+P,minY:Math.min.apply(Math,O)-P,maxY:Math.max.apply(Math,O)+P};break;case"A":{var j=C,N=j[1],W=j[2],H=j[3],J=j[4],Q=j[5],ne=j[6],K=j[7],ie=j[8],de=Q,we=Q+ne,Re=c.xExtrema(K,H,J),_e=Infinity,Ue=-Infinity,rt=[de,we];for(S=-Math.PI*2;S<=Math.PI*2;S+=Math.PI){var Fe=Re+S;ie===1?de<Fe&&Fe<we&&rt.push(Fe):we<Fe&&Fe<de&&rt.push(Fe)}for(S=0,I=rt.length;S<I;S++){var Se=c.xAt(K,H,J,N,rt[S]);Se<_e&&(_e=Se),Se>Ue&&(Ue=Se)}var ye=c.yExtrema(K,H,J),Oe=Infinity,ue=-Infinity,xe=[de,we];for(S=-Math.PI*2;S<=Math.PI*2;S+=Math.PI){var Ae=ye+S;ie===1?de<Ae&&Ae<we&&xe.push(Ae):we<Ae&&Ae<de&&xe.push(Ae)}for(S=0,I=xe.length;S<I;S++){var pe=c.yAt(K,H,J,W,xe[S]);pe<Oe&&(Oe=pe),pe>ue&&(ue=pe)}this.box={minX:_e-P,maxX:Ue+P,minY:Oe-P,maxY:ue+P};break}}}}),B.exports=_},function(B,L,o){var e=o(1);function g(i,r,n,s){return{x:Math.cos(s)*n+i,y:Math.sin(s)*n+r}}function v(i,r,n,s){var f,u;return s?i<r?(f=r-i,u=Math.PI*2-n+i):i>n&&(f=Math.PI*2-i+r,u=i-n):(f=i-r,u=n-i),f>u?n:r}function p(i,r,n,s){var f=0;return n-r>=Math.PI*2&&(f=Math.PI*2),r=e.mod(r,Math.PI*2),n=e.mod(n,Math.PI*2)+f,i=e.mod(i,Math.PI*2),s?r>=n?i>n&&i<r?i:v(i,n,r,!0):i<r||i>n?i:v(i,r,n):r<=n?r<i&&i<n?i:v(i,r,n,!0):i>r||i<n?i:v(i,n,r)}function c(i,r,n,s,f,u,d,b,_){var x=[d,b],M=[i,r],P=[1,0],C=e.vec2.subtract([],x,M),O=e.vec2.angleTo(P,C);O=p(O,s,f,u);var w=[n*Math.cos(O)+i,n*Math.sin(O)+r];_&&(_.x=w[0],_.y=w[1]);var S=e.vec2.distance(w,x);return S}function h(i,r,n,s,f,u){var d=0,b=Math.PI/2,_=Math.PI,x=Math.PI*3/2,M=[],P=p(d,s,f,u);P===d&&M.push(g(i,r,n,d)),P=p(b,s,f,u),P===b&&M.push(g(i,r,n,b)),P=p(_,s,f,u),P===_&&M.push(g(i,r,n,_)),P=p(x,s,f,u),P===x&&M.push(g(i,r,n,x)),M.push(g(i,r,n,s)),M.push(g(i,r,n,f));var C=Infinity,O=-Infinity,w=Infinity,S=-Infinity;return e.each(M,function(I){C>I.x&&(C=I.x),O<I.x&&(O=I.x),w>I.y&&(w=I.y),S<I.y&&(S=I.y)}),{minX:C,minY:w,maxX:O,maxY:S}}B.exports={nearAngle:p,projectPoint:function(r,n,s,f,u,d,b,_){var x={};return c(r,n,s,f,u,d,b,_,x),x},pointDistance:c,box:h}},function(B,L,o){var e=o(1).vec2;B.exports={at:function(v,p,c){return(p-v)*c+v},pointDistance:function(v,p,c,h,i,r){var n=[c-v,h-p];if(e.exactEquals(n,[0,0]))return NaN;var s=[-n[1],n[0]];e.normalize(s,s);var f=[i-v,r-p];return Math.abs(e.dot(f,s))},box:function(v,p,c,h,i){var r=i/2,n=Math.min(v,c),s=Math.max(v,c),f=Math.min(p,h),u=Math.max(p,h);return{minX:n-r,minY:f-r,maxX:s+r,maxY:u+r}},len:function(v,p,c,h){return Math.sqrt((c-v)*(c-v)+(h-p)*(h-p))}}},function(B,L,o){var e=o(40),g=o(60),v=Math.PI,p=Math.sin,c=Math.cos,h=Math.atan2,i=10,r=v/3;function n(d,b,_,x,M,P,C){var O,w,S,I,j,N,W;if(!b.fill){var H=b.arrowLength||i,J=b.arrowAngle?b.arrowAngle*v/180:r;W=h(x-P,_-M),j=Math.abs(b.lineWidth*c(W))/2,N=Math.abs(b.lineWidth*p(W))/2,C&&(j=-j,N=-N),O=M+H*c(W+J/2),w=P+H*p(W+J/2),S=M+H*c(W-J/2),I=P+H*p(W-J/2),d.beginPath(),d.moveTo(O-j,w-N),d.lineTo(M-j,P-N),d.lineTo(S-j,I-N),d.moveTo(M-j,P-N),d.lineTo(M+j,P+N),d.moveTo(M,P),d.stroke()}}function s(d){var b=[],_=e.parsePath(d.path),x;if(!Array.isArray(_)||_.length===0||_[0][0]!=="M"&&_[0][0]!=="m")return!1;for(var M=_.length,P=0;P<_.length;P++){var C=_[P];x=new g(C,x,P===M-1),b.push(x)}return b}function f(d,b,_,x,M){var P=Math.atan2(x-b,_-d);return{dx:c(P)*M,dy:p(P)*M}}function u(d,b,_,x,M,P,C){var O=C?b.startArrow:b.endArrow,w=O.d,S=M-_,I=P-x,j=Math.atan2(I,S),N=s(O);if(!!N){w&&(M=M-c(j)*w,P=P-p(j)*w),d.save(),d.beginPath(),d.translate(M,P),d.rotate(j);for(var W=0;W<N.length;W++)N[W].draw(d);d.setTransform(1,0,0,1,0,0),d.fillStyle=d.strokeStyle,d.fill(),d.restore()}}B.exports={addStartArrow:function(b,_,x,M,P,C){typeof _.startArrow=="object"?u(b,_,x,M,P,C,!0):_.startArrow&&n(b,_,x,M,P,C,!0)},addEndArrow:function(b,_,x,M,P,C){typeof _.endArrow=="object"?u(b,_,x,M,P,C,!1):_.endArrow&&n(b,_,x,M,P,C,!1)},getShortenOffset:f}},function(B,L,o){var e=o(1),g=o(94),v=o(93),p=o(193),c=o(192),h=e.vec3,i=e.mat3,r=["m","l","c","a","q","h","v","t","s","z"];function n(x,M,P){return{x:P.x+x,y:P.y+M}}function s(x,M){return{x:M.x+(M.x-x.x),y:M.y+(M.y-x.y)}}function f(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1])}function u(x,M){return(x[0]*M[0]+x[1]*M[1])/(f(x)*f(M))}function d(x,M){return(x[0]*M[1]<x[1]*M[0]?-1:1)*Math.acos(u(x,M))}function b(x,M,P,C,O,w,S){var I=e.mod(e.toRadian(S),Math.PI*2),j=x.x,N=x.y,W=M.x,H=M.y,J=Math.cos(I)*(j-W)/2+Math.sin(I)*(N-H)/2,Q=-1*Math.sin(I)*(j-W)/2+Math.cos(I)*(N-H)/2,ne=J*J/(O*O)+Q*Q/(w*w);ne>1&&(O*=Math.sqrt(ne),w*=Math.sqrt(ne));var K=O*O*(Q*Q)+w*w*(J*J),ie=Math.sqrt((O*O*(w*w)-K)/K);P===C&&(ie*=-1),isNaN(ie)&&(ie=0);var de=ie*O*Q/w,we=ie*-w*J/O,Re=(j+W)/2+Math.cos(I)*de-Math.sin(I)*we,_e=(N+H)/2+Math.sin(I)*de+Math.cos(I)*we,Ue=d([1,0],[(J-de)/O,(Q-we)/w]),rt=[(J-de)/O,(Q-we)/w],Fe=[(-1*J-de)/O,(-1*Q-we)/w],Se=d(rt,Fe);return u(rt,Fe)<=-1&&(Se=Math.PI),u(rt,Fe)>=1&&(Se=0),C===0&&Se>0&&(Se=Se-2*Math.PI),C===1&&Se<0&&(Se=Se+2*Math.PI),[x,Re,_e,O,w,Ue,Se,I,C]}var _=function(M,P,C){this.preSegment=P,this.isLast=C,this.init(M,P)};e.augment(_,{init:function(M,P){var C=M[0];P=P||{endPoint:{x:0,y:0}};var O=r.indexOf(C)>=0,w=O?C.toUpperCase():C,S=M,I,j,N,W,H=P.endPoint,J=S[1],Q=S[2];switch(w){default:break;case"M":O?W=n(J,Q,H):W={x:J,y:Q},this.command="M",this.params=[H,W],this.subStart=W,this.endPoint=W;break;case"L":O?W=n(J,Q,H):W={x:J,y:Q},this.command="L",this.params=[H,W],this.subStart=P.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-H.x,W.y-H.y]},this.startTangent=function(){return[H.x-W.x,H.y-W.y]};break;case"H":O?W=n(J,0,H):W={x:J,y:H.y},this.command="L",this.params=[H,W],this.subStart=P.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-H.x,W.y-H.y]},this.startTangent=function(){return[H.x-W.x,H.y-W.y]};break;case"V":O?W=n(0,J,H):W={x:H.x,y:J},this.command="L",this.params=[H,W],this.subStart=P.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-H.x,W.y-H.y]},this.startTangent=function(){return[H.x-W.x,H.y-W.y]};break;case"Q":O?(I=n(J,Q,H),j=n(S[3],S[4],H)):(I={x:J,y:Q},j={x:S[3],y:S[4]}),this.command="Q",this.params=[H,I,j],this.subStart=P.subStart,this.endPoint=j,this.endTangent=function(){return[j.x-I.x,j.y-I.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]};break;case"T":O?j=n(J,Q,H):j={x:J,y:Q},P.command==="Q"?(I=s(P.params[1],H),this.command="Q",this.params=[H,I,j],this.subStart=P.subStart,this.endPoint=j,this.endTangent=function(){return[j.x-I.x,j.y-I.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]}):(this.command="TL",this.params=[H,j],this.subStart=P.subStart,this.endPoint=j,this.endTangent=function(){return[j.x-H.x,j.y-H.y]},this.startTangent=function(){return[H.x-j.x,H.y-j.y]});break;case"C":O?(I=n(J,Q,H),j=n(S[3],S[4],H),N=n(S[5],S[6],H)):(I={x:J,y:Q},j={x:S[3],y:S[4]},N={x:S[5],y:S[6]}),this.command="C",this.params=[H,I,j,N],this.subStart=P.subStart,this.endPoint=N,this.endTangent=function(){return[N.x-j.x,N.y-j.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]};break;case"S":O?(j=n(J,Q,H),N=n(S[3],S[4],H)):(j={x:J,y:Q},N={x:S[3],y:S[4]}),P.command==="C"?(I=s(P.params[2],H),this.command="C",this.params=[H,I,j,N],this.subStart=P.subStart,this.endPoint=N,this.endTangent=function(){return[N.x-j.x,N.y-j.y]},this.startTangent=function(){return[H.x-I.x,H.y-I.y]}):(this.command="SQ",this.params=[H,j,N],this.subStart=P.subStart,this.endPoint=N,this.endTangent=function(){return[N.x-j.x,N.y-j.y]},this.startTangent=function(){return[H.x-j.x,H.y-j.y]});break;case"A":{var ne=J,K=Q,ie=S[3],de=S[4],we=S[5];O?W=n(S[6],S[7],H):W={x:S[6],y:S[7]},this.command="A";var Re=b(H,W,de,we,ne,K,ie);this.params=Re;var _e=P.subStart;this.subStart=_e,this.endPoint=W;var Ue=Re[5]%(Math.PI*2);e.isNumberEqual(Ue,Math.PI*2)&&(Ue=0);var rt=Re[6]%(Math.PI*2);e.isNumberEqual(rt,Math.PI*2)&&(rt=0);var Fe=.001;this.startTangent=function(){we===0&&(Fe*=-1);var Se=Re[3]*Math.cos(Ue-Fe)+Re[1],ye=Re[4]*Math.sin(Ue-Fe)+Re[2];return[Se-_e.x,ye-_e.y]},this.endTangent=function(){var Se=Re[6];Se-Math.PI*2<1e-4&&(Se=0);var ye=Re[3]*Math.cos(Ue+Se+Fe)+Re[1],Oe=Re[4]*Math.sin(Ue+Se-Fe)+Re[2];return[H.x-ye,H.y-Oe]};break}case"Z":this.command="Z",this.params=[H,P.subStart],this.subStart=P.subStart,this.endPoint=P.subStart}},isInside:function(M,P,C){var O=this,w=O.command,S=O.params,I=O.box;if(I&&!g.box(I.minX,I.maxX,I.minY,I.maxY,M,P))return!1;switch(w){default:break;case"M":return!1;case"TL":case"L":case"Z":return g.line(S[0].x,S[0].y,S[1].x,S[1].y,C,M,P);case"SQ":case"Q":return g.quadraticline(S[0].x,S[0].y,S[1].x,S[1].y,S[2].x,S[2].y,C,M,P);case"C":return g.cubicline(S[0].x,S[0].y,S[1].x,S[1].y,S[2].x,S[2].y,S[3].x,S[3].y,C,M,P);case"A":{var j=S,N=j[1],W=j[2],H=j[3],J=j[4],Q=j[5],ne=j[6],K=j[7],ie=j[8],de=H>J?H:J,we=H>J?1:H/J,Re=H>J?J/H:1;j=[M,P,1];var _e=[1,0,0,0,1,0,0,0,1];return i.translate(_e,_e,[-N,-W]),i.rotate(_e,_e,-K),i.scale(_e,_e,[1/we,1/Re]),h.transformMat3(j,j,_e),g.arcline(0,0,de,Q,Q+ne,1-ie,C,j[0],j[1])}}return!1},draw:function(M){var P=this.command,C=this.params,O,w,S;switch(P){default:break;case"M":M.moveTo(C[1].x,C[1].y);break;case"TL":case"L":M.lineTo(C[1].x,C[1].y);break;case"SQ":case"Q":O=C[1],w=C[2],M.quadraticCurveTo(O.x,O.y,w.x,w.y);break;case"C":O=C[1],w=C[2],S=C[3],M.bezierCurveTo(O.x,O.y,w.x,w.y,S.x,S.y);break;case"A":{var I=C,j=I[1],N=I[2],W=j,H=N,J=I[3],Q=I[4],ne=I[5],K=I[6],ie=I[7],de=I[8],we=J>Q?J:Q,Re=J>Q?1:J/Q,_e=J>Q?Q/J:1;M.translate(W,H),M.rotate(ie),M.scale(Re,_e),M.arc(0,0,we,ne,ne+K,1-de),M.scale(1/Re,1/_e),M.rotate(-ie),M.translate(-W,-H);break}case"Z":M.closePath();break}},shortenDraw:function(M,P,C){var O=this.command,w=this.params,S,I,j;switch(O){default:break;case"M":M.moveTo(w[1].x-P,w[1].y-C);break;case"TL":case"L":M.lineTo(w[1].x-P,w[1].y-C);break;case"SQ":case"Q":S=w[1],I=w[2],M.quadraticCurveTo(S.x,S.y,I.x-P,I.y-C);break;case"C":S=w[1],I=w[2],j=w[3],M.bezierCurveTo(S.x,S.y,I.x,I.y,j.x-P,j.y-C);break;case"A":{var N=w,W=N[1],H=N[2],J=W,Q=H,ne=N[3],K=N[4],ie=N[5],de=N[6],we=N[7],Re=N[8],_e=ne>K?ne:K,Ue=ne>K?1:ne/K,rt=ne>K?K/ne:1;M.translate(J,Q),M.rotate(we),M.scale(Ue,rt),M.arc(0,0,_e,ie,ie+de,1-Re),M.scale(1/Ue,1/rt),M.rotate(-we),M.translate(-J,-Q);break}case"Z":M.closePath();break}},getBBox:function(M){var P=M/2,C=this.params,O,w,S,I;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(C[0].x,C[1].x)-P,maxX:Math.max(C[0].x,C[1].x)+P,minY:Math.min(C[0].y,C[1].y)-P,maxY:Math.max(C[0].y,C[1].y)+P};break;case"SQ":case"Q":for(w=p.extrema(C[0].x,C[1].x,C[2].x),S=0,I=w.length;S<I;S++)w[S]=p.at(C[0].x,C[1].x,C[2].x,w[S]);for(w.push(C[0].x,C[2].x),O=p.extrema(C[0].y,C[1].y,C[2].y),S=0,I=O.length;S<I;S++)O[S]=p.at(C[0].y,C[1].y,C[2].y,O);O.push(C[0].y,C[2].y),this.box={minX:Math.min.apply(Math,w)-P,maxX:Math.max.apply(Math,w)+P,minY:Math.min.apply(Math,O)-P,maxY:Math.max.apply(Math,O)+P};break;case"C":for(w=v.extrema(C[0].x,C[1].x,C[2].x,C[3].x),S=0,I=w.length;S<I;S++)w[S]=v.at(C[0].x,C[1].x,C[2].x,C[3].x,w[S]);for(O=v.extrema(C[0].y,C[1].y,C[2].y,C[3].y),S=0,I=O.length;S<I;S++)O[S]=v.at(C[0].y,C[1].y,C[2].y,C[3].y,O[S]);w.push(C[0].x,C[3].x),O.push(C[0].y,C[3].y),this.box={minX:Math.min.apply(Math,w)-P,maxX:Math.max.apply(Math,w)+P,minY:Math.min.apply(Math,O)-P,maxY:Math.max.apply(Math,O)+P};break;case"A":{var j=C,N=j[1],W=j[2],H=j[3],J=j[4],Q=j[5],ne=j[6],K=j[7],ie=j[8],de=Q,we=Q+ne,Re=c.xExtrema(K,H,J),_e=Infinity,Ue=-Infinity,rt=[de,we];for(S=-Math.PI*2;S<=Math.PI*2;S+=Math.PI){var Fe=Re+S;ie===1?de<Fe&&Fe<we&&rt.push(Fe):we<Fe&&Fe<de&&rt.push(Fe)}for(S=0,I=rt.length;S<I;S++){var Se=c.xAt(K,H,J,N,rt[S]);Se<_e&&(_e=Se),Se>Ue&&(Ue=Se)}var ye=c.yExtrema(K,H,J),Oe=Infinity,ue=-Infinity,xe=[de,we];for(S=-Math.PI*2;S<=Math.PI*2;S+=Math.PI){var Ae=ye+S;ie===1?de<Ae&&Ae<we&&xe.push(Ae):we<Ae&&Ae<de&&xe.push(Ae)}for(S=0,I=xe.length;S<I;S++){var pe=c.yAt(K,H,J,W,xe[S]);pe<Oe&&(Oe=pe),pe>ue&&(ue=pe)}this.box={minX:_e-P,maxX:Ue+P,minY:Oe-P,maxY:ue+P};break}}}}),B.exports=_},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r}var g=o(7),v=o(3),p=o(28),c=o(406),h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this);var f=this;f.type="linear",f.isLinear=!0,f.nice=!1,f.min=null,f.minLimit=null,f.max=null,f.maxLimit=null,f.tickCount=null,f.tickInterval=null,f.minTickInterval=null,f.snapArray=null},n.init=function(){var f=this;if(!f.ticks)f.min=f.translate(f.min),f.max=f.translate(f.max),f.initTicks();else{var u=f.ticks,d=f.translate(u[0]),b=f.translate(u[u.length-1]);(g(f.min)||f.min>d)&&(f.min=d),(g(f.max)||f.max<b)&&(f.max=b)}},n.calculateTicks=function(){var f=this.min,u=this.max,d=this.minLimit,b=this.maxLimit,_=this.tickCount,x=this.tickInterval,M=this.minTickInterval,P=this.snapArray;if(_===1)throw new Error("linear scale'tickCount should not be 1");if(u<f)throw new Error("max: "+u+" should not be less than min: "+f);var C=c({min:f,max:u,minLimit:d,maxLimit:b,minCount:_,maxCount:_,interval:x,minTickInterval:M,snapArray:P});return C.ticks},n.initTicks=function(){var f=this,u=f.calculateTicks();if(f.nice)f.ticks=u,f.min=u[0],f.max=u[u.length-1];else{var d=[];v(u,function(b){b>=f.min&&b<=f.max&&d.push(b)}),d.length||(d.push(f.min),d.push(f.max)),f.ticks=d}},n.scale=function(f){if(g(f))return NaN;var u=this.max,d=this.min;if(u===d)return 0;var b=(f-d)/(u-d),_=this.rangeMin(),x=this.rangeMax();return _+b*(x-_)},n.invert=function(f){var u=(f-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+u*(this.max-this.min)},r}(p);p.Linear=h,B.exports=h},function(B,L,o){var e=o(15),g=o(225);B.exports={toTimeStamp:function(p){return e(p)&&(p.indexOf("T")>0?p=new Date(p).getTime():p=new Date(p.replace(/-/ig,"/")).getTime()),g(p)&&(p=p.getTime()),p}}},function(B,L,o){var e=o(23),g=Array.prototype.indexOf,v=function(c,h){return e(c)?g.call(c,h)>-1:!1};B.exports=v},function(B,L){var o=function(g){for(var v=[],p=0;p<g.length;p++)v=v.concat(g[p]);return v};B.exports=o},function(B,L,o){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},g=o(5),v=function p(c){if((typeof c=="undefined"?"undefined":e(c))!=="object"||c===null)return c;var h=void 0;if(g(c)){h=[];for(var i=0,r=c.length;i<r;i++)e(c[i])==="object"&&c[i]!=null?h[i]=p(c[i]):h[i]=c[i]}else{h={};for(var n in c)e(c[n])==="object"&&c[n]!=null?h[n]=p(c[n]):h[n]=c[n]}return h};B.exports=v},function(B,L,o){var e=o(115),g=o(23),v=o(15),p=function c(h,i){if(h===i)return!0;if(!h||!i||v(h)||v(i))return!1;if(g(h)||g(i)){if(h.length!==i.length)return!1;for(var r=!0,n=0;n<h.length&&(r=c(h[n],i[n]),!!r);n++);return r}if(e(h)||e(i)){var s=Object.keys(h),f=Object.keys(i);if(s.length!==f.length)return!1;for(var u=!0,d=0;d<s.length&&(u=c(h[s[d]],i[s[d]]),!!u);d++);return u}return!1};B.exports=p},function(B,L){var o=function(g,v,p){return g<v?v:g>p?p:g};B.exports=o},function(B,L,o){B.exports={mat3:o(69),vec2:o(111),vec3:o(112),transform:o(110)}},function(B,L,o){var e=o(403);e.translate=function(g,v,p){var c=new Array(9);return e.fromTranslation(c,p),e.multiply(g,c,v)},e.rotate=function(g,v,p){var c=new Array(9);return e.fromRotation(c,p),e.multiply(g,c,v)},e.scale=function(g,v,p){var c=new Array(9);return e.fromScaling(c,p),e.multiply(g,c,v)},B.exports=e},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},g=o(50);function v(c,h){return c===h?c!==0||h!==0||1/c==1/h:c!==c&&h!==h}function p(c){return g.Util.isArray(c)?c.length:g.Util.isObject(c)?Object.keys(c).length:0}L.default=g.Util.mix({},g.Util,{shallowEqual:function(h,i){if(v(h,i))return!0;if((typeof h=="undefined"?"undefined":e(h))!=="object"||h===null||(typeof i=="undefined"?"undefined":e(i))!=="object"||i===null||g.Util.isArray(h)!==g.Util.isArray(i)||p(h)!==p(i))return!1;var r=!0;return g.Util.each(h,function(n,s){return v(n,i[s])?!0:(r=!1,r)}),r},without:function(h){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r={};return g.Util.each(h,function(n,s){g.Util.indexOf(i,s)===-1&&(r[s]=n)}),r},length:p})},function(B,L,o){"use strict";L.a=function(e,g){return e=+e,g-=e,function(v){return e+g*v}}},function(B,L,o){"use strict";L.a=function(e,g){return e=+e,g=+g,function(v){return e*(1-v)+g*v}}},function(B,L,o){"use strict";var e=o(128),g=o(129);function v(c){return function(){var h=this.ownerDocument,i=this.namespaceURI;return i===g.b&&h.documentElement.namespaceURI===g.b?h.createElement(c):h.createElementNS(i,c)}}function p(c){return function(){return this.ownerDocument.createElementNS(c.space,c.local)}}L.a=function(c){var h=o.i(e.a)(c);return(h.local?p:v)(h)}},function(B,L,o){"use strict";L.a=function(e,g){var v=e.ownerSVGElement||e;if(v.createSVGPoint){var p=v.createSVGPoint();return p.x=g.clientX,p.y=g.clientY,p=p.matrixTransform(e.getScreenCTM().inverse()),[p.x,p.y]}var c=e.getBoundingClientRect();return[g.clientX-c.left-e.clientLeft,g.clientY-c.top-e.clientTop]}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(134);o.d(L,"now",function(){return e.a}),o.d(L,"timer",function(){return e.b}),o.d(L,"timerFlush",function(){return e.c});var g=o(567);o.d(L,"timeout",function(){return g.a});var v=o(566);o.d(L,"interval",function(){return v.a})},function(B,L,o){"use strict";L.b=p;var e=o(17);function g(c,h){var i,r;return function(){var n=o.i(e.e)(this,c),s=n.tween;if(s!==i){r=i=s;for(var f=0,u=r.length;f<u;++f)if(r[f].name===h){r=r.slice(),r.splice(f,1);break}}n.tween=r}}function v(c,h,i){var r,n;if(typeof i!="function")throw new Error;return function(){var s=o.i(e.e)(this,c),f=s.tween;if(f!==r){n=(r=f).slice();for(var u={name:h,value:i},d=0,b=n.length;d<b;++d)if(n[d].name===h){n[d]=u;break}d===b&&n.push(u)}s.tween=n}}L.a=function(c,h){var i=this._id;if(c+="",arguments.length<2){for(var r=o.i(e.f)(this.node(),i).tween,n=0,s=r.length,f;n<s;++n)if((f=r[n]).name===c)return f.value;return null}return this.each((h==null?g:v)(i,c,h))};function p(c,h,i){var r=c._id;return c.each(function(){var n=o.i(e.e)(this,r);(n.value||(n.value={}))[h]=i.apply(this,arguments)}),function(n){return o.i(e.f)(n,r).value[h]}}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.setTheme=L.track=L.Interactions=L.PathUtil=L.Animate=L.Shape=L.Util=L.G2=L.Facet=L.Label=L.Guide=L.View=L.Geom=L.Tooltip=L.Legend=L.Axis=L.Coord=L.Chart=void 0;var e=o(477);Object.defineProperty(L,"Chart",{enumerable:!0,get:function(){return C(e).default}});var g=o(479);Object.defineProperty(L,"Coord",{enumerable:!0,get:function(){return C(g).default}});var v=o(475);Object.defineProperty(L,"Axis",{enumerable:!0,get:function(){return C(v).default}});var p=o(485);Object.defineProperty(L,"Legend",{enumerable:!0,get:function(){return C(p).default}});var c=o(486);Object.defineProperty(L,"Tooltip",{enumerable:!0,get:function(){return C(c).default}});var h=o(482);Object.defineProperty(L,"Geom",{enumerable:!0,get:function(){return C(h).default}});var i=o(487);Object.defineProperty(L,"View",{enumerable:!0,get:function(){return C(i).default}});var r=o(483);Object.defineProperty(L,"Guide",{enumerable:!0,get:function(){return C(r).default}});var n=o(484);Object.defineProperty(L,"Label",{enumerable:!0,get:function(){return C(n).default}});var s=o(481);Object.defineProperty(L,"Facet",{enumerable:!0,get:function(){return C(s).default}});var f=o(50),u=C(f),d=o(355),b=C(d),_=o(70),x=C(_),M=o(493),P=C(M);function C(I){return I&&I.__esModule?I:{default:I}}L.G2=u.default,L.Util=x.default,L.Shape=f.Shape,L.Animate=f.Animate,L.PathUtil=f.PathUtil,L.Interactions=b.default;var O=L.track=function(){},w=L.setTheme=function(j){var N=j;typeof j=="string"&&P.default[j]&&(N=P.default[j]),u.default.Global.setTheme(N)},S={G2:u.default,Util:x.default,Shape:f.Shape,Animate:f.Animate,PathUtil:f.PathUtil,track:O,setTheme:w,Interactions:b.default};L.default=S},function(B,L,o){B.exports={Position:o(268),Color:o(266),Shape:o(269),Size:o(270),Opacity:o(267),ColorUtil:o(137)}},function(B,L,o){function e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function g(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,v(i,r)}function v(i,r){return v=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},v(i,r)}var p=o(135),c=o(4),h=function(i){g(n,i);var r=n.prototype;r.getDefaultCfg=function(){return{}};function n(s){var f;f=i.call(this)||this;var u=e(f),d={visible:!0},b=u.getDefaultCfg();return u._attrs=d,c.deepMix(d,b,s),f}return r.get=function(f){return this._attrs[f]},r.set=function(f,u){this._attrs[f]=u},r.changeVisible=function(){},r.destroy=function(){var f=this;f._attrs={},f.removeAllListeners(),f.destroyed=!0},n}(p);B.exports=h},function(B,L,o){function e(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,g(u,d)}function g(u,d){return g=Object.setPrototypeOf||function(_,x){return _.__proto__=x,_},g(u,d)}var v=o(4),p=o(142),c=o(294),h=o(21),i=h.FONT_FAMILY,r=8,n=v.Event,s=v.Group,f=function(u){e(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b.getDefaultCfg=function(){var x=u.prototype.getDefaultCfg.call(this);return v.mix({},x,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:i},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},b._calStartPoint=function(){var x={x:10,y:this.get("titleGap")-r},M=this.get("titleShape");if(M){var P=M.getBBox();x.y+=P.height}return x},b.beforeRender=function(){var x=this.get("items");!v.isArray(x)||v.isEmpty(x)||(u.prototype.beforeRender.call(this),this.set("firstItem",x[0]),this.set("lastItem",x[x.length-1]))},b._formatItemValue=function(x){var M=this.get("formatter")||this.get("itemFormatter");return M&&(x=M.call(this,x)),x},b.render=function(){u.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},b._renderSlider=function(){var x=new s,M=new s,P=new s,C=this._calStartPoint(),O=this.get("group"),w=O.addGroup(c,{minHandleElement:x,maxHandleElement:M,backgroundElement:P,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});w.translate(C.x,C.y),this.set("slider",w);var S=this._renderSliderShape();S.attr("clip",w.get("middleHandleElement")),this._renderTrigger()},b._addMiddleBar=function(x,M,P){return x.addShape(M,{attrs:v.mix({},P,this.get("middleBackgroundStyle"))}),x.addShape(M,{attrs:P})},b._renderTrigger=function(){var x=this.get("firstItem"),M=this.get("lastItem"),P=this.get("layout"),C=this.get("textStyle"),O=this.get("triggerAttr"),w=v.mix({},O),S=v.mix({},O),I=v.mix({text:this._formatItemValue(x.value)+""},C),j=v.mix({text:this._formatItemValue(M.value)+""},C);P==="vertical"?(this._addVerticalTrigger("min",w,I),this._addVerticalTrigger("max",S,j)):(this._addHorizontalTrigger("min",w,I),this._addHorizontalTrigger("max",S,j))},b._addVerticalTrigger=function(x,M,P){var C=this.get("slider"),O=C.get(x+"HandleElement"),w=this.get("width"),S=O.addShape("rect",{attrs:v.mix({x:w/2-r-2,y:x==="min"?0:-r,width:2*r+2,height:r},M)}),I=O.addShape("text",{attrs:v.mix(P,{x:w+this.get("textOffset"),y:x==="max"?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),j=this.get("layout"),N=j==="vertical"?"ns-resize":"ew-resize";S.attr("cursor",N),I.attr("cursor",N),this.set(x+"ButtonElement",S),this.set(x+"TextElement",I)},b._addHorizontalTrigger=function(x,M,P){var C=this.get("slider"),O=C.get(x+"HandleElement"),w=O.addShape("rect",{attrs:v.mix({x:x==="min"?-r:0,y:-r-this.get("height")/2,width:r,height:2*r},M)}),S=O.addShape("text",{attrs:v.mix(P,{x:x==="min"?-r-4:r+4,y:r/2+this.get("textOffset")+10,textAlign:x==="min"?"end":"start",textBaseline:"middle"})}),I=this.get("layout"),j=I==="vertical"?"ns-resize":"ew-resize";w.attr("cursor",j),S.attr("cursor",j),this.set(x+"ButtonElement",w),this.set(x+"TextElement",S)},b._bindEvents=function(){var x=this;if(this.get("slidable")){var M=this.get("slider");M.on("sliderchange",function(P){var C=P.range,O=x.get("firstItem").value,w=x.get("lastItem").value,S=O+C[0]/100*(w-O),I=O+C[1]/100*(w-O);x._updateElement(S,I);var j=new n("itemfilter",P,!0,!0);j.range=[S,I],x.emit("itemfilter",j)})}this.get("hoverable")&&(this.get("group").on("mousemove",v.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",v.wrapBehavior(this,"_onMouseLeave")))},b._updateElement=function(x,M){var P=this.get("minTextElement"),C=this.get("maxTextElement");M>1&&(x=parseInt(x,10),M=parseInt(M,10)),P.attr("text",this._formatItemValue(x)+""),C.attr("text",this._formatItemValue(M)+"")},b._onMouseLeave=function(){var x=this.get("group").findById("hoverPointer");x&&x.destroy();var M=this.get("group").findById("hoverText");M&&M.destroy(),this.get("canvas").draw()},b._onMouseMove=function(x){var M=this.get("height"),P=this.get("width"),C=this.get("items"),O=this.get("canvas").get("el"),w=O.getBoundingClientRect(),S=this.get("group").getBBox(),I;if(this.get("layout")==="vertical"){var j=5;this.get("type")==="color-legend"&&(j=30);var N=this.get("titleGap"),W=this.get("titleShape");W&&(N+=W.getBBox().maxY-W.getBBox().minY);var H=x.clientY||x.event.clientY;H=H-w.y-this.get("group").attr("matrix")[7]+S.y-j+N,I=C[0].value+(1-H/M)*(C[C.length-1].value-C[0].value)}else{var J=x.clientX||x.event.clientX;J=J-w.x-this.get("group").attr("matrix")[6],I=C[0].value+J/P*(C[C.length-1].value-C[0].value)}I=I.toFixed(2),this.activate(I),this.emit("mousehover",{value:I})},b.activate=function(x){if(!!x){var M=this.get("group").findById("hoverPointer"),P=this.get("group").findById("hoverText"),C=this.get("items");if(!(x<C[0].value||x>C[C.length-1].value)){var O=this.get("height"),w=this.get("width"),S=this.get("titleShape"),I=this.get("titleGap"),j=[],N=(x-C[0].value)/(C[C.length-1].value-C[0].value),W;if(this.get("layout")==="vertical"){var H=0,J=0;this.get("type")==="color-legend"&&(H=I,S&&(H+=S.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?H-=13:(H=I-15,S&&(H+=S.getBBox().height)),J+=10),N=(1-N)*O,j=[[J,N+H],[J-10,N+H-5],[J-10,N+H+5]],W=v.mix({},{x:w+this.get("textOffset")/2+J,y:N+H,text:this._formatItemValue(x)+""},this.get("textStyle"),{textAlign:"start"})}else{var Q=0,ne=0;this.get("type")==="color-legend"&&(Q=I,S&&(Q+=S.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?Q-=7:(Q=I,S||(Q-=7)),ne+=10),N*=w,j=[[N+ne,Q],[N+ne-5,Q-10],[N+ne+5,Q-10]],W=v.mix({},{x:N-5,y:O+this.get("textOffset")+Q,text:this._formatItemValue(x)+""},this.get("textStyle"))}var K=v.mix(W,this.get("hoverTextStyle"));P?P.attr(K):(P=this.get("group").addShape("text",{attrs:K}),P.set("id","hoverText")),M?M.attr(v.mix({points:j},this.get("pointerStyle"))):(M=this.get("group").addShape("Polygon",{attrs:v.mix({points:j},this.get("pointerStyle"))}),M.set("id","hoverPointer")),this.get("canvas").draw()}}},b.deactivate=function(){var x=this.get("group").findById("hoverPointer");x&&x.destroy();var M=this.get("group").findById("hoverText");M&&M.destroy(),this.get("canvas").draw()},d}(p);B.exports=f},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(79),p=o(4),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return p.mix({},s,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},r.isContentChange=function(s,f){var u=this.get("titleContent"),d=this.get("items"),b=!(s===u&&d.length===f.length);return b||p.each(f,function(_,x){var M=d[x];for(var P in _)if(_.hasOwnProperty(P)&&!p.isObject(_[P])&&_[P]!==M[P]){b=!0;break}if(b)return!1}),b},r.setContent=function(s,f){var u=new Date().valueOf();return this.set("items",f),this.set("titleContent",s),this.set("timeStamp",u),this.render(),this},r.setPosition=function(s,f){this.set("x",s),this.set("y",f)},r.render=function(){},r.clear=function(){},r.show=function(){this.set("visible",!0)},r.hide=function(){this.set("visible",!1)},i}(v);B.exports=c},function(B,L,o){var e=o(18),g=e.Group,v=o(32),p=v.Label,c=o(6),h=o(0),i=["line","point","path"],r="_origin";function n(u){var d=0;return h.each(u,function(b){d+=b}),d/u.length}function s(u,d){if(h.isNumber(u)&&h.isNumber(d))return[u,d];for(var b=-1,_=0,x=0,M,P=u.length-1,C,O=0;++b<u.length;)M=P,P=b,O+=C=u[M]*d[P]-u[P]*d[M],_+=(u[M]+u[P])*C,x+=(d[M]+d[P])*C;return O*=3,[_/O,x/O]}var f=function u(d){u.superclass.constructor.call(this,d)};h.extend(f,g),h.augment(f,{getDefaultCfg:function(){return{label:c.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){f.superclass._renderUI.call(this),this.initLabelsCfg();var d=this.addGroup(),b=this.addGroup({elCls:"x-line-group"}),_=this.get("labelRenderer");this.set("labelsGroup",d),this.set("lineGroup",b),this.get("labelRenderer").set("group",d),_.set("group",d),_.set("lineGroup",b)},initLabelsCfg:function(){var d=this,b=new p,_=d.getDefaultLabelCfg(),x=d.get("labelCfg");h.deepMix(_,x.globalCfg||x.cfg),b.set("config",!1),_.labelLine&&b.set("labelLine",_.labelLine),b.set("coord",d.get("coord")),this.set("labelRenderer",b),d.set("label",_)},getDefaultLabelCfg:function(){var d=this,b=d.get("labelCfg").cfg||d.get("labelCfg").globalCfg,_=d.get("geomType"),x=d.get("viewTheme")||c;return _==="polygon"||b&&b.offset<0&&h.indexOf(i,_)===-1?h.deepMix({},d.get("label"),x.innerLabels,b):h.deepMix({},d.get("label"),x.label,b)},getLabelsItems:function(d,b){var _=this,x=[],M=_.get("geom"),P=_.get("coord");_._getLabelCfgs(d,b);var C=_.get("labelItemCfgs");return h.each(d,function(O,w){var S=O[r],I=C[w];if(!I){x.push(null);return}h.isArray(I.text)||(I.text=[I.text]);var j=I.text.length;h.each(I.text,function(N,W){if(h.isNil(N)||N===""){x.push(null);return}var H=_.getLabelPoint(I,O,W);H=h.mix({},I,H),H.textAlign||(H.textAlign=_.getLabelAlign(H,W,j)),M&&(H._id=M._getShapeId(S)+"-glabel-"+W+"-"+H.text),H.coord=P,x.push(H)})}),x},adjustItems:function(d){return h.each(d,function(b){!b||(b.offsetX&&(b.x+=b.offsetX),b.offsetY&&(b.y+=b.offsetY))}),d},drawLines:function(d){var b=this;h.each(d,function(_){!_||_.offset>0&&b.lineToLabel(_)})},lineToLabel:function(){},getLabelPoint:function(d,b,_){var x=this,M=x.get("coord"),P=d.text.length;function C(j,N){return h.isArray(j)&&(d.text.length===1?j.length<=2?j=j[j.length-1]:j=n(j):j=j[N]),j}var O={text:d.text[_]};if(b&&this.get("geomType")==="polygon"){var w=s(b.x,b.y);O.x=w[0],O.y=w[1]}else O.x=C(b.x,_),O.y=C(b.y,_);if(b&&b.nextPoints&&(b.shape==="funnel"||b.shape==="pyramid")){var S=-Infinity;b.nextPoints.forEach(function(j){j=M.convert(j),j.x>S&&(S=j.x)}),O.x=(O.x+S)/2}b.shape==="pyramid"&&!b.nextPoints&&b.points&&b.points.forEach(function(j){j=M.convert(j),(h.isArray(j.x)&&!b.x.includes(j.x)||h.isNumber(j.x)&&b.x!==j.x)&&(O.x=(O.x+j.x)/2)}),d.position&&x.setLabelPosition(O,b,_,d.position);var I=x.getLabelOffset(d,_,P);return d.offsetX&&(I.x+=d.offsetX),d.offsetY&&(I.y+=d.offsetY),x.transLabelPoint(O),O.start={x:O.x,y:O.y},O.x+=I.x,O.y+=I.y,O.color=b.color,O},setLabelPosition:function(){},transLabelPoint:function(d){var b=this,_=b.get("coord"),x=_.applyMatrix(d.x,d.y,1);d.x=x[0],d.y=x[1]},getOffsetVector:function(d){var b=this,_=d.offset||0,x=b.get("coord"),M;return x.isTransposed?M=x.applyMatrix(_,0):M=x.applyMatrix(0,_),M},getDefaultOffset:function(d){var b=this,_=0,x=b.get("coord"),M=b.getOffsetVector(d);x.isTransposed?_=M[0]:_=M[1];var P=this.get("yScale");if(P&&d.point){var C=d.point[P.field];C<0&&(_=_*-1)}return _},getLabelOffset:function(d,b,_){var x=this,M=x.getDefaultOffset(d),P=x.get("coord"),C=P.isTransposed,O=C?"x":"y",w=C?1:-1,S={x:0,y:0};return b>0||_===1?S[O]=M*w:S[O]=M*w*-1,S},getLabelAlign:function(d,b,_){var x=this,M="center",P=x.get("coord");if(P.isTransposed){var C=x.getDefaultOffset(d);C<0?M="right":C===0?M="center":M="left",_>1&&b===0&&(M==="right"?M="left":M==="left"&&(M="right"))}return M},_getLabelValue:function(d,b){h.isArray(b)||(b=[b]);var _=[];return h.each(b,function(x){var M=d[x.field];if(h.isArray(M)){var P=[];h.each(M,function(C){P.push(x.getText(C))}),M=P}else M=x.getText(M);(h.isNil(M)||M==="")&&_.push(null),_.push(M)}),_},_getLabelCfgs:function(d){var b=this,_=this.get("labelCfg"),x=_.scales,M=this.get("label"),P=b.get("viewTheme")||c,C=[];_.globalCfg&&_.globalCfg.type&&b.set("type",_.globalCfg.type),h.each(d,function(O,w){var S={},I=O[r],j=b._getLabelValue(I,x);if(_.callback){var N=x.map(function(J){return I[J.field]});S=_.callback.apply(null,[].concat(N,[O,w]))}if(!S&&S!==0){C.push(null);return}if(h.isString(S)||h.isNumber(S)?S={text:S}:(S.text=S.content||j[0],delete S.content),S=h.mix({},M,_.globalCfg||{},S),O.point=I,S.point=I,S.htmlTemplate&&(S.useHtml=!0,S.text=S.htmlTemplate.call(null,S.text,O,w),delete S.htmlTemplate),S.formatter&&(S.text=S.formatter.call(null,S.text,O,w),delete S.formatter),S.label){var W=S.label;delete S.label,S=h.mix(S,W)}if(S.textStyle){delete S.textStyle.offset;var H=S.textStyle;h.isFunction(H)&&(S.textStyle=H.call(null,S.text,O,w))}S.labelLine&&(S.labelLine=h.mix({},M.labelLine,S.labelLine)),S.textStyle=h.mix({},M.textStyle,P.label.textStyle,S.textStyle),delete S.items,C.push(S)}),this.set("labelItemCfgs",C)},showLabels:function(d,b){var _=this,x=_.get("labelRenderer"),M=_.getLabelsItems(d,b);b=[].concat(b);var P=_.get("type");M=_.adjustItems(M,b),_.drawLines(M),x.set("items",M.filter(function(C,O){return C?!0:(b.splice(O,1),!1)})),P&&(x.set("shapes",b),x.set("type",P),x.set("points",d)),x.set("canvas",this.get("canvas")),x.draw()},destroy:function(){this.get("labelRenderer").destroy(),f.superclass.destroy.call(this)}}),B.exports=f},function(B,L,o){var e=o(6),g=o(0);function v(c,h){var i=c.length;g.isString(c[0])&&(c=c.map(function(f){return h.translate(f)}));for(var r=c[1]-c[0],n=2;n<i;n++){var s=c[n]-c[n-1];r>s&&(r=s)}return r}var p={getDefaultSize:function(){var h=this.get("defaultSize"),i=this.get("viewTheme")||e;if(!h){var r=this.get("coord"),n=this.getXScale(),s=n.values,f=this.get("dataArray"),u;if(n.isLinear&&s.length>1){s.sort();var d=v(s,n);u=(n.max-n.min)/d,s.length>u&&(u=s.length)}else u=s.length;var b=n.range,_=1/u,x=1;if(this.isInCircle()?r.isTransposed&&u>1?x=i.widthRatio.multiplePie:x=i.widthRatio.rose:(n.isLinear&&(_*=b[1]-b[0]),x=i.widthRatio.column),_*=x,this.hasAdjust("dodge")){var M=this._getDodgeCfg(f),P=M.dodgeCount,C=M.dodgeRatio;_=_/P,C>0&&(_=C*_/x)}h=_,this.set("defaultSize",h)}return h},_getDodgeCfg:function(h){var i=this.get("adjusts"),r,n,s=h.length;if(g.each(i,function(d){d.type==="dodge"&&(r=d.dodgeBy,n=d.dodgeRatio)}),r){var f=g.Array.merge(h),u=g.Array.values(f,r);s=u.length}return{dodgeCount:s,dodgeRatio:n}},getDimWidth:function(h){var i=this.get("coord"),r=i.convertPoint({x:0,y:0}),n=i.convertPoint({x:h==="x"?1:0,y:h==="x"?0:1}),s=0;return r&&n&&(s=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))),s},_getWidth:function(){var h=this.get("coord"),i;return this.isInCircle()&&!h.isTransposed?i=(h.endAngle-h.startAngle)*h.radius:i=this.getDimWidth("x"),i},_toNormalizedSize:function(h){var i=this._getWidth();return h/i},_toCoordSize:function(h){var i=this._getWidth();return i*h},getNormalizedSize:function(h){var i=this.getAttrValue("size",h);return g.isNil(i)?i=this.getDefaultSize():i=this._toNormalizedSize(i),i},getSize:function(h){var i=this.getAttrValue("size",h);if(g.isNil(i)){var r=this.getDefaultSize();i=this._toCoordSize(r)}return i}};B.exports=p},function(B,L,o){var e=o(85);B.exports=function(g,v){var p=e(g);if(p&&p[v])return p[v]}},function(B,L){B.exports=function(o){var e=o.get("scaleController")||{};return e.defs}},function(B,L,o){var e=o(0),g=o(62);B.exports=function(v,p){var c,h=p.field,i=p.type,r=e.Array.values(v,h);return i==="linear"?(c=e.Array.getRange(r),p.min<c.min&&(c.min=p.min),p.max>c.max&&(c.max=p.max)):(i==="timeCat"&&(e.each(r,function(n,s){r[s]=g.toTimeStamp(n)}),r.sort(function(n,s){return n-s})),c=r),c}},function(B,L,o){var e=o(2),g=o(8),v=o(39),p=o(56),c=function h(i){h.superclass.constructor.call(this,i)};c.Symbols={circle:function(i,r,n){return[["M",i,r],["m",-n,0],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0]]},square:function(i,r,n){return[["M",i-n,r-n],["L",i+n,r-n],["L",i+n,r+n],["L",i-n,r+n],["Z"]]},diamond:function(i,r,n){return[["M",i-n,r],["L",i,r-n],["L",i+n,r],["L",i,r+n],["Z"]]},triangle:function(i,r,n){var s=n*Math.sin(1/3*Math.PI);return[["M",i-n,r+s],["L",i,r-s],["L",i+n,r+s],["z"]]},"triangle-down":function(i,r,n){var s=n*Math.sin(1/3*Math.PI);return[["M",i-n,r-s],["L",i+n,r-s],["L",i,r+s],["Z"]]}},c.ATTRS={path:null,lineWidth:1},e.extend(c,g),e.augment(c,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var i=this._attrs,r=i.x,n=i.y,s=i.radius,f=this.getHitLineWidth(),u=f/2+s;return{minX:r-u,minY:n-u,maxX:r+u,maxY:n+u}},_getPath:function(){var i=this._attrs,r=i.x,n=i.y,s=i.radius||i.r,f=i.symbol||"circle",u;return e.isFunction(f)?u=f:u=c.Symbols[f],u?u(r,n,s):(console.warn(f+" marker is not supported."),null)},createPath:function(i){var r=this._cfg.segments;if(r&&!this._cfg.hasUpdate){i.beginPath();for(var n=0;n<r.length;n++)r[n].draw(i);return}var s=v.parsePath(this._getPath());i.beginPath();var f;r=[];for(var u=0;u<s.length;u++){var d=s[u];f=new p(d,f,u===s.length-1),r.push(f),f.draw(i)}this._cfg.segments=r,this._cfg.hasUpdate=!1}}),B.exports=c},function(B,L,o){var e=o(2),g=e.vec2;function v(n,s,f,u,d){var b=1-d;return b*b*(b*u+3*d*f)+d*d*(d*n+3*b*s)}function p(n,s,f,u,d){var b=1-d;return 3*(((s-n)*b+2*(f-s)*d)*b+(u-f)*d*d)}function c(n,s,f,u,d,b,_,x,M,P,C){var O,w=.005,S=Infinity,I,j,N,W,H,J,Q,ne=1e-4,K=[M,P];for(I=0;I<1;I+=.05)j=[v(n,f,d,_,I),v(s,u,b,x,I)],N=g.squaredDistance(K,j),N<S&&(O=I,S=N);S=Infinity;for(var ie=0;ie<32&&!(w<ne);ie++)J=O-w,Q=O+w,j=[v(n,f,d,_,J),v(s,u,b,x,J)],N=g.squaredDistance(K,j),J>=0&&N<S?(O=J,S=N):(H=[v(n,f,d,_,Q),v(s,u,b,x,Q)],W=g.squaredDistance(K,H),Q<=1&&W<S?(O=Q,S=W):w*=.5);return C&&(C.x=v(n,f,d,_,O),C.y=v(s,u,b,x,O)),Math.sqrt(S)}function h(n,s,f,u){var d=3*n-9*s+9*f-3*u,b=6*s-12*f+6*u,_=3*f-3*u,x=[],M,P,C;if(e.isNumberEqual(d,0))e.isNumberEqual(b,0)||(M=-_/b,M>=0&&M<=1&&x.push(M));else{var O=b*b-4*d*_;e.isNumberEqual(O,0)?x.push(-b/(2*d)):O>0&&(C=Math.sqrt(O),M=(-b+C)/(2*d),P=(-b-C)/(2*d),M>=0&&M<=1&&x.push(M),P>=0&&P<=1&&x.push(P))}return x}function i(n,s,f,u,d){var b=-3*s+9*f-9*u+3*d,_=n*b+6*s-12*f+6*u;return n*_-3*s+3*f}function r(n,s,f,u,d,b,_,x,M){e.isNil(M)&&(M=1),M=M>1?1:M<0?0:M;for(var P=M/2,C=12,O=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],w=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],S=0,I=0;I<C;I++){var j=P*O[I]+P,N=i(j,n,f,d,_),W=i(j,s,u,b,x),H=N*N+W*W;S+=w[I]*Math.sqrt(H)}return P*S}B.exports={at:v,derivativeAt:p,projectPoint:function(s,f,u,d,b,_,x,M,P,C){var O={};return c(s,f,u,d,b,_,x,M,P,C,O),O},pointDistance:c,extrema:h,len:r}},function(B,L,o){var e=o(54),g=o(174),v=o(88),p=o(53);B.exports={line:function(h,i,r,n,s,f,u){var d=e.box(h,i,r,n,s);if(!this.box(d.minX,d.maxX,d.minY,d.maxY,f,u))return!1;var b=e.pointDistance(h,i,r,n,f,u);return isNaN(b)?!1:b<=s/2},polyline:function(h,i,r,n){var s=h.length-1;if(s<1)return!1;for(var f=0;f<s;f++){var u=h[f][0],d=h[f][1],b=h[f+1][0],_=h[f+1][1];if(this.line(u,d,b,_,i,r,n))return!0}return!1},cubicline:function(h,i,r,n,s,f,u,d,b,_,x){return v.pointDistance(h,i,r,n,s,f,u,d,_,x)<=b/2},quadraticline:function(h,i,r,n,s,f,u,d,b){return g.pointDistance(h,i,r,n,s,f,d,b)<=u/2},arcline:function(h,i,r,n,s,f,u,d,b){return p.pointDistance(h,i,r,n,s,f,d,b)<=u/2},rect:function(h,i,r,n,s,f){return h<=s&&s<=h+r&&i<=f&&f<=i+n},circle:function(h,i,r,n,s){return Math.pow(n-h,2)+Math.pow(s-i,2)<=Math.pow(r,2)},box:function(h,i,r,n,s,f){return h<=s&&s<=i&&r<=f&&f<=n}}},function(B,L,o){var e=o(180),g=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,v=new RegExp("([a-z])["+g+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+g+"]*,?["+g+"]*)+)","ig"),p=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+g+"]*,?["+g+"]*","ig"),c=function(Se){if(!Se)return null;if(typeof Se==typeof[])return Se;var ye={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Oe=[];return String(Se).replace(v,function(ue,xe,Ae){var pe=[],be=xe.toLowerCase();if(Ae.replace(p,function(le,z){z&&pe.push(+z)}),be==="m"&&pe.length>2&&(Oe.push([xe].concat(pe.splice(0,2))),be="l",xe=xe==="m"?"l":"L"),be==="o"&&pe.length===1&&Oe.push([xe,pe[0]]),be==="r")Oe.push([xe].concat(pe));else for(;pe.length>=ye[be]&&(Oe.push([xe].concat(pe.splice(0,ye[be]))),!!ye[be]););}),Oe},h=function(Se,ye){for(var Oe=[],ue=0,xe=Se.length;xe-2*!ye>ue;ue+=2){var Ae=[{x:+Se[ue-2],y:+Se[ue-1]},{x:+Se[ue],y:+Se[ue+1]},{x:+Se[ue+2],y:+Se[ue+3]},{x:+Se[ue+4],y:+Se[ue+5]}];ye?ue?xe-4===ue?Ae[3]={x:+Se[0],y:+Se[1]}:xe-2===ue&&(Ae[2]={x:+Se[0],y:+Se[1]},Ae[3]={x:+Se[2],y:+Se[3]}):Ae[0]={x:+Se[xe-2],y:+Se[xe-1]}:xe-4===ue?Ae[3]=Ae[2]:ue||(Ae[0]={x:+Se[ue],y:+Se[ue+1]}),Oe.push(["C",(-Ae[0].x+6*Ae[1].x+Ae[2].x)/6,(-Ae[0].y+6*Ae[1].y+Ae[2].y)/6,(Ae[1].x+6*Ae[2].x-Ae[3].x)/6,(Ae[1].y+6*Ae[2].y-Ae[3].y)/6,Ae[2].x,Ae[2].y])}return Oe},i=function(Se,ye,Oe,ue,xe){var Ae=[];if(xe===null&&ue===null&&(ue=Oe),Se=+Se,ye=+ye,Oe=+Oe,ue=+ue,xe!==null){var pe=Math.PI/180,be=Se+Oe*Math.cos(-ue*pe),le=Se+Oe*Math.cos(-xe*pe),z=ye+Oe*Math.sin(-ue*pe),ae=ye+Oe*Math.sin(-xe*pe);Ae=[["M",be,z],["A",Oe,Oe,0,+(xe-ue>180),0,le,ae]]}else Ae=[["M",Se,ye],["m",0,-ue],["a",Oe,ue,0,1,1,0,2*ue],["a",Oe,ue,0,1,1,0,-2*ue],["z"]];return Ae},r=function(Se){if(Se=c(Se),!Se||!Se.length)return[["M",0,0]];var ye=[],Oe=0,ue=0,xe=0,Ae=0,pe=0,be,le;Se[0][0]==="M"&&(Oe=+Se[0][1],ue=+Se[0][2],xe=Oe,Ae=ue,pe++,ye[0]=["M",Oe,ue]);for(var z=Se.length===3&&Se[0][0]==="M"&&Se[1][0].toUpperCase()==="R"&&Se[2][0].toUpperCase()==="Z",ae,V,re=pe,te=Se.length;re<te;re++){if(ye.push(ae=[]),V=Se[re],be=V[0],be!==be.toUpperCase())switch(ae[0]=be.toUpperCase(),ae[0]){case"A":ae[1]=V[1],ae[2]=V[2],ae[3]=V[3],ae[4]=V[4],ae[5]=V[5],ae[6]=+V[6]+Oe,ae[7]=+V[7]+ue;break;case"V":ae[1]=+V[1]+ue;break;case"H":ae[1]=+V[1]+Oe;break;case"R":le=[Oe,ue].concat(V.slice(1));for(var q=2,ve=le.length;q<ve;q++)le[q]=+le[q]+Oe,le[++q]=+le[q]+ue;ye.pop(),ye=ye.concat(h(le,z));break;case"O":ye.pop(),le=i(Oe,ue,V[1],V[2]),le.push(le[0]),ye=ye.concat(le);break;case"U":ye.pop(),ye=ye.concat(i(Oe,ue,V[1],V[2],V[3])),ae=["U"].concat(ye[ye.length-1].slice(-2));break;case"M":xe=+V[1]+Oe,Ae=+V[2]+ue;break;default:for(var Me=1,De=V.length;Me<De;Me++)ae[Me]=+V[Me]+(Me%2?Oe:ue)}else if(be==="R")le=[Oe,ue].concat(V.slice(1)),ye.pop(),ye=ye.concat(h(le,z)),ae=["R"].concat(V.slice(-2));else if(be==="O")ye.pop(),le=i(Oe,ue,V[1],V[2]),le.push(le[0]),ye=ye.concat(le);else if(be==="U")ye.pop(),ye=ye.concat(i(Oe,ue,V[1],V[2],V[3])),ae=["U"].concat(ye[ye.length-1].slice(-2));else for(var ze=0,We=V.length;ze<We;ze++)ae[ze]=V[ze];if(be=be.toUpperCase(),be!=="O")switch(ae[0]){case"Z":Oe=+xe,ue=+Ae;break;case"H":Oe=ae[1];break;case"V":ue=ae[1];break;case"M":xe=ae[ae.length-2],Ae=ae[ae.length-1];break;default:Oe=ae[ae.length-2],ue=ae[ae.length-1]}}return ye},n=function(Se,ye,Oe,ue){return[Se,ye,Oe,ue,Oe,ue]},s=function(Se,ye,Oe,ue,xe,Ae){var pe=1/3,be=2/3;return[pe*Se+be*Oe,pe*ye+be*ue,pe*xe+be*Oe,pe*Ae+be*ue,xe,Ae]},f=function Fe(Se,ye,Oe,ue,xe,Ae,pe,be,le,z){Oe===ue&&(Oe+=1);var ae=Math.PI*120/180,V=Math.PI/180*(+xe||0),re=[],te,q,ve,Me,De,ze=function(qe,yt,qt){var Er=qe*Math.cos(qt)-yt*Math.sin(qt),Zr=qe*Math.sin(qt)+yt*Math.cos(qt);return{x:Er,y:Zr}};if(z)q=z[0],ve=z[1],Me=z[2],De=z[3];else{te=ze(Se,ye,-V),Se=te.x,ye=te.y,te=ze(be,le,-V),be=te.x,le=te.y,Se===be&&ye===le&&(be+=1,le+=1);var We=(Se-be)/2,He=(ye-le)/2,$e=We*We/(Oe*Oe)+He*He/(ue*ue);$e>1&&($e=Math.sqrt($e),Oe=$e*Oe,ue=$e*ue);var It=Oe*Oe,Yt=ue*ue,rr=(Ae===pe?-1:1)*Math.sqrt(Math.abs((It*Yt-It*He*He-Yt*We*We)/(It*He*He+Yt*We*We)));Me=rr*Oe*He/ue+(Se+be)/2,De=rr*-ue*We/Oe+(ye+le)/2,q=Math.asin(((ye-De)/ue).toFixed(9)),ve=Math.asin(((le-De)/ue).toFixed(9)),q=Se<Me?Math.PI-q:q,ve=be<Me?Math.PI-ve:ve,q<0&&(q=Math.PI*2+q),ve<0&&(ve=Math.PI*2+ve),pe&&q>ve&&(q=q-Math.PI*2),!pe&&ve>q&&(ve=ve-Math.PI*2)}var ir=ve-q;if(Math.abs(ir)>ae){var Br=ve,tr=be,ft=le;ve=q+ae*(pe&&ve>q?1:-1),be=Me+Oe*Math.cos(ve),le=De+ue*Math.sin(ve),re=Fe(be,le,Oe,ue,xe,0,pe,tr,ft,[ve,Br,Me,De])}ir=ve-q;var st=Math.cos(q),Tt=Math.sin(q),Qe=Math.cos(ve),it=Math.sin(ve),zt=Math.tan(ir/4),Qt=4/3*Oe*zt,Ar=4/3*ue*zt,zr=[Se,ye],ct=[Se+Qt*Tt,ye-Ar*st],ot=[be+Qt*it,le-Ar*Qe],xt=[be,le];if(ct[0]=2*zr[0]-ct[0],ct[1]=2*zr[1]-ct[1],z)return[ct,ot,xt].concat(re);re=[ct,ot,xt].concat(re).join().split(",");for(var Bt=[],Ke=0,lt=re.length;Ke<lt;Ke++)Bt[Ke]=Ke%2?ze(re[Ke-1],re[Ke],V).y:ze(re[Ke],re[Ke+1],V).x;return Bt},u=function(Se,ye){var Oe=r(Se),ue=ye&&r(ye),xe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},pe=[],be=[],le="",z="",ae,V=function(He,$e,It){var Yt,rr;if(!He)return["C",$e.x,$e.y,$e.x,$e.y,$e.x,$e.y];switch(!(He[0]in{T:1,Q:1})&&($e.qx=$e.qy=null),He[0]){case"M":$e.X=He[1],$e.Y=He[2];break;case"A":He=["C"].concat(f.apply(0,[$e.x,$e.y].concat(He.slice(1))));break;case"S":It==="C"||It==="S"?(Yt=$e.x*2-$e.bx,rr=$e.y*2-$e.by):(Yt=$e.x,rr=$e.y),He=["C",Yt,rr].concat(He.slice(1));break;case"T":It==="Q"||It==="T"?($e.qx=$e.x*2-$e.qx,$e.qy=$e.y*2-$e.qy):($e.qx=$e.x,$e.qy=$e.y),He=["C"].concat(s($e.x,$e.y,$e.qx,$e.qy,He[1],He[2]));break;case"Q":$e.qx=He[1],$e.qy=He[2],He=["C"].concat(s($e.x,$e.y,He[1],He[2],He[3],He[4]));break;case"L":He=["C"].concat(n($e.x,$e.y,He[1],He[2]));break;case"H":He=["C"].concat(n($e.x,$e.y,He[1],$e.y));break;case"V":He=["C"].concat(n($e.x,$e.y,$e.x,He[1]));break;case"Z":He=["C"].concat(n($e.x,$e.y,$e.X,$e.Y));break;default:break}return He},re=function(He,$e){if(He[$e].length>7){He[$e].shift();for(var It=He[$e];It.length;)pe[$e]="A",ue&&(be[$e]="A"),He.splice($e++,0,["C"].concat(It.splice(0,6)));He.splice($e,1),ae=Math.max(Oe.length,ue&&ue.length||0)}},te=function(He,$e,It,Yt,rr){He&&$e&&He[rr][0]==="M"&&$e[rr][0]!=="M"&&($e.splice(rr,0,["M",Yt.x,Yt.y]),It.bx=0,It.by=0,It.x=He[rr][1],It.y=He[rr][2],ae=Math.max(Oe.length,ue&&ue.length||0))};ae=Math.max(Oe.length,ue&&ue.length||0);for(var q=0;q<ae;q++){Oe[q]&&(le=Oe[q][0]),le!=="C"&&(pe[q]=le,q&&(z=pe[q-1])),Oe[q]=V(Oe[q],xe,z),pe[q]!=="A"&&le==="C"&&(pe[q]="C"),re(Oe,q),ue&&(ue[q]&&(le=ue[q][0]),le!=="C"&&(be[q]=le,q&&(z=be[q-1])),ue[q]=V(ue[q],Ae,z),be[q]!=="A"&&le==="C"&&(be[q]="C"),re(ue,q)),te(Oe,ue,xe,Ae,q),te(ue,Oe,Ae,xe,q);var ve=Oe[q],Me=ue&&ue[q],De=ve.length,ze=ue&&Me.length;xe.x=ve[De-2],xe.y=ve[De-1],xe.bx=parseFloat(ve[De-4])||xe.x,xe.by=parseFloat(ve[De-3])||xe.y,Ae.bx=ue&&(parseFloat(Me[ze-4])||Ae.x),Ae.by=ue&&(parseFloat(Me[ze-3])||Ae.y),Ae.x=ue&&Me[ze-2],Ae.y=ue&&Me[ze-1]}return ue?[Oe,ue]:Oe},d=/,?([a-z]),?/gi,b=function(Se){return Se.join(",").replace(d,"$1")},_=function(Se,ye,Oe,ue,xe){var Ae=-3*ye+9*Oe-9*ue+3*xe,pe=Se*Ae+6*ye-12*Oe+6*ue;return Se*pe-3*ye+3*Oe},x=function(Se,ye,Oe,ue,xe,Ae,pe,be,le){le===null&&(le=1),le=le>1?1:le<0?0:le;for(var z=le/2,ae=12,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],re=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],te=0,q=0;q<ae;q++){var ve=z*V[q]+z,Me=_(ve,Se,Oe,xe,pe),De=_(ve,ye,ue,Ae,be),ze=Me*Me+De*De;te+=re[q]*Math.sqrt(ze)}return z*te},M=function(Se,ye,Oe,ue,xe,Ae,pe,be){for(var le=[],z=[[],[]],ae,V,re,te,q=0;q<2;++q){if(q===0?(V=6*Se-12*Oe+6*xe,ae=-3*Se+9*Oe-9*xe+3*pe,re=3*Oe-3*Se):(V=6*ye-12*ue+6*Ae,ae=-3*ye+9*ue-9*Ae+3*be,re=3*ue-3*ye),Math.abs(ae)<1e-12){if(Math.abs(V)<1e-12)continue;te=-re/V,te>0&&te<1&&le.push(te);continue}var ve=V*V-4*re*ae,Me=Math.sqrt(ve);if(!(ve<0)){var De=(-V+Me)/(2*ae);De>0&&De<1&&le.push(De);var ze=(-V-Me)/(2*ae);ze>0&&ze<1&&le.push(ze)}}for(var We=le.length,He=We,$e;We--;)te=le[We],$e=1-te,z[0][We]=$e*$e*$e*Se+3*$e*$e*te*Oe+3*$e*te*te*xe+te*te*te*pe,z[1][We]=$e*$e*$e*ye+3*$e*$e*te*ue+3*$e*te*te*Ae+te*te*te*be;return z[0][He]=Se,z[1][He]=ye,z[0][He+1]=pe,z[1][He+1]=be,z[0].length=z[1].length=He+2,{min:{x:Math.min.apply(0,z[0]),y:Math.min.apply(0,z[1])},max:{x:Math.max.apply(0,z[0]),y:Math.max.apply(0,z[1])}}},P=function(Se,ye,Oe,ue,xe,Ae,pe,be){if(!(Math.max(Se,Oe)<Math.min(xe,pe)||Math.min(Se,Oe)>Math.max(xe,pe)||Math.max(ye,ue)<Math.min(Ae,be)||Math.min(ye,ue)>Math.max(Ae,be))){var le=(Se*ue-ye*Oe)*(xe-pe)-(Se-Oe)*(xe*be-Ae*pe),z=(Se*ue-ye*Oe)*(Ae-be)-(ye-ue)*(xe*be-Ae*pe),ae=(Se-Oe)*(Ae-be)-(ye-ue)*(xe-pe);if(!!ae){var V=le/ae,re=z/ae,te=+V.toFixed(2),q=+re.toFixed(2);if(!(te<+Math.min(Se,Oe).toFixed(2)||te>+Math.max(Se,Oe).toFixed(2)||te<+Math.min(xe,pe).toFixed(2)||te>+Math.max(xe,pe).toFixed(2)||q<+Math.min(ye,ue).toFixed(2)||q>+Math.max(ye,ue).toFixed(2)||q<+Math.min(Ae,be).toFixed(2)||q>+Math.max(Ae,be).toFixed(2)))return{x:V,y:re}}}},C=function(Se,ye,Oe){return ye>=Se.x&&ye<=Se.x+Se.width&&Oe>=Se.y&&Oe<=Se.y+Se.height},O=function(Se,ye,Oe,ue,xe){if(xe)return[["M",+Se+ +xe,ye],["l",Oe-xe*2,0],["a",xe,xe,0,0,1,xe,xe],["l",0,ue-xe*2],["a",xe,xe,0,0,1,-xe,xe],["l",xe*2-Oe,0],["a",xe,xe,0,0,1,-xe,-xe],["l",0,xe*2-ue],["a",xe,xe,0,0,1,xe,-xe],["z"]];var Ae=[["M",Se,ye],["l",Oe,0],["l",0,ue],["l",-Oe,0],["z"]];return Ae.parsePathArray=b,Ae},w=function(Se,ye,Oe,ue){return Se===null&&(Se=ye=Oe=ue=0),ye===null&&(ye=Se.y,Oe=Se.width,ue=Se.height,Se=Se.x),{x:Se,y:ye,width:Oe,w:Oe,height:ue,h:ue,x2:Se+Oe,y2:ye+ue,cx:Se+Oe/2,cy:ye+ue/2,r1:Math.min(Oe,ue)/2,r2:Math.max(Oe,ue)/2,r0:Math.sqrt(Oe*Oe+ue*ue)/2,path:O(Se,ye,Oe,ue),vb:[Se,ye,Oe,ue].join(" ")}},S=function(Se,ye){return Se=w(Se),ye=w(ye),C(ye,Se.x,Se.y)||C(ye,Se.x2,Se.y)||C(ye,Se.x,Se.y2)||C(ye,Se.x2,Se.y2)||C(Se,ye.x,ye.y)||C(Se,ye.x2,ye.y)||C(Se,ye.x,ye.y2)||C(Se,ye.x2,ye.y2)||(Se.x<ye.x2&&Se.x>ye.x||ye.x<Se.x2&&ye.x>Se.x)&&(Se.y<ye.y2&&Se.y>ye.y||ye.y<Se.y2&&ye.y>Se.y)},I=function(Se,ye,Oe,ue,xe,Ae,pe,be){e.isArray(Se)||(Se=[Se,ye,Oe,ue,xe,Ae,pe,be]);var le=M.apply(null,Se);return w(le.min.x,le.min.y,le.max.x-le.min.x,le.max.y-le.min.y)},j=function(Se,ye,Oe,ue,xe,Ae,pe,be,le){var z=1-le,ae=Math.pow(z,3),V=Math.pow(z,2),re=le*le,te=re*le,q=ae*Se+V*3*le*Oe+z*3*le*le*xe+te*pe,ve=ae*ye+V*3*le*ue+z*3*le*le*Ae+te*be,Me=Se+2*le*(Oe-Se)+re*(xe-2*Oe+Se),De=ye+2*le*(ue-ye)+re*(Ae-2*ue+ye),ze=Oe+2*le*(xe-Oe)+re*(pe-2*xe+Oe),We=ue+2*le*(Ae-ue)+re*(be-2*Ae+ue),He=z*Se+le*Oe,$e=z*ye+le*ue,It=z*xe+le*pe,Yt=z*Ae+le*be,rr=90-Math.atan2(Me-ze,De-We)*180/Math.PI;return{x:q,y:ve,m:{x:Me,y:De},n:{x:ze,y:We},start:{x:He,y:$e},end:{x:It,y:Yt},alpha:rr}},N=function(Se,ye,Oe){var ue=I(Se),xe=I(ye);if(!S(ue,xe))return Oe?0:[];for(var Ae=x.apply(0,Se),pe=x.apply(0,ye),be=~~(Ae/8),le=~~(pe/8),z=[],ae=[],V={},re=Oe?0:[],te=0;te<be+1;te++){var q=j.apply(0,Se.concat(te/be));z.push({x:q.x,y:q.y,t:te/be})}for(var ve=0;ve<le+1;ve++){var Me=j.apply(0,ye.concat(ve/le));ae.push({x:Me.x,y:Me.y,t:ve/le})}for(var De=0;De<be;De++)for(var ze=0;ze<le;ze++){var We=z[De],He=z[De+1],$e=ae[ze],It=ae[ze+1],Yt=Math.abs(He.x-We.x)<.001?"y":"x",rr=Math.abs(It.x-$e.x)<.001?"y":"x",ir=P(We.x,We.y,He.x,He.y,$e.x,$e.y,It.x,It.y);if(ir){if(V[ir.x.toFixed(4)]===ir.y.toFixed(4))continue;V[ir.x.toFixed(4)]=ir.y.toFixed(4);var Br=We.t+Math.abs((ir[Yt]-We[Yt])/(He[Yt]-We[Yt]))*(He.t-We.t),tr=$e.t+Math.abs((ir[rr]-$e[rr])/(It[rr]-$e[rr]))*(It.t-$e.t);Br>=0&&Br<=1&&tr>=0&&tr<=1&&(Oe?re++:re.push({x:ir.x,y:ir.y,t1:Br,t2:tr}))}}return re},W=function(Se,ye,Oe){Se=u(Se),ye=u(ye);for(var ue,xe,Ae,pe,be,le,z,ae,V,re,te=Oe?0:[],q=0,ve=Se.length;q<ve;q++){var Me=Se[q];if(Me[0]==="M")ue=be=Me[1],xe=le=Me[2];else{Me[0]==="C"?(V=[ue,xe].concat(Me.slice(1)),ue=V[6],xe=V[7]):(V=[ue,xe,ue,xe,be,le,be,le],ue=be,xe=le);for(var De=0,ze=ye.length;De<ze;De++){var We=ye[De];if(We[0]==="M")Ae=z=We[1],pe=ae=We[2];else{We[0]==="C"?(re=[Ae,pe].concat(We.slice(1)),Ae=re[6],pe=re[7]):(re=[Ae,pe,Ae,pe,z,ae,z,ae],Ae=z,pe=ae);var He=N(V,re,Oe);if(Oe)te+=He;else{for(var $e=0,It=He.length;$e<It;$e++)He[$e].segment1=q,He[$e].segment2=De,He[$e].bez1=V,He[$e].bez2=re;te=te.concat(He)}}}}}return te},H=function(Se,ye){return W(Se,ye)};function J(Fe,Se){var ye=[],Oe=[];function ue(xe,Ae){if(xe.length===1)ye.push(xe[0]),Oe.push(xe[0]);else{for(var pe=[],be=0;be<xe.length-1;be++)be===0&&ye.push(xe[0]),be===xe.length-2&&Oe.push(xe[be+1]),pe[be]=[(1-Ae)*xe[be][0]+Ae*xe[be+1][0],(1-Ae)*xe[be][1]+Ae*xe[be+1][1]];ue(pe,Ae)}}return Fe.length&&ue(Fe,Se),{left:ye,right:Oe.reverse()}}function Q(Fe,Se,ye){var Oe=[[Fe[1],Fe[2]]];ye=ye||2;var ue=[];Se[0]==="A"?(Oe.push(Se[6]),Oe.push(Se[7])):Se[0]==="C"?(Oe.push([Se[1],Se[2]]),Oe.push([Se[3],Se[4]]),Oe.push([Se[5],Se[6]])):Se[0]==="S"||Se[0]==="Q"?(Oe.push([Se[1],Se[2]]),Oe.push([Se[3],Se[4]])):Oe.push([Se[1],Se[2]]);for(var xe=Oe,Ae=1/ye,pe=0;pe<ye-1;pe++){var be=Ae/(1-Ae*pe),le=J(xe,be);ue.push(le.left),xe=le.right}ue.push(xe);var z=ue.map(function(ae){var V=[];return ae.length===4&&(V.push("C"),V=V.concat(ae[2])),ae.length>=3&&(ae.length===3&&V.push("Q"),V=V.concat(ae[1])),ae.length===2&&V.push("L"),V=V.concat(ae[ae.length-1]),V});return z}var ne=function(Se,ye,Oe){if(Oe===1)return[[].concat(Se)];var ue=[];if(ye[0]==="L"||ye[0]==="C"||ye[0]==="Q")ue=ue.concat(Q(Se,ye,Oe));else{var xe=[].concat(Se);xe[0]==="M"&&(xe[0]="L");for(var Ae=0;Ae<=Oe-1;Ae++)ue.push(xe)}return ue},K=function(Se,ye){if(Se.length===1)return Se;var Oe=Se.length-1,ue=ye.length-1,xe=Oe/ue,Ae=[];if(Se.length===1&&Se[0][0]==="M"){for(var pe=0;pe<ue-Oe;pe++)Se.push(Se[0]);return Se}for(var be=0;be<ue;be++){var le=Math.floor(xe*be);Ae[le]=(Ae[le]||0)+1}var z=Ae.reduce(function(ae,V,re){return re===Oe?ae.concat(Se[Oe]):ae.concat(ne(Se[re],Se[re+1],V))},[]);return z.unshift(Se[0]),(ye[ue]==="Z"||ye[ue]==="z")&&z.push("Z"),z},ie=function(Se,ye){if(Se.length!==ye.length)return!1;var Oe=!0;return e.each(Se,function(ue,xe){if(ue!==ye[xe])return Oe=!1,!1}),Oe};function de(Fe,Se,ye){var Oe=null,ue=ye;return Se<ue&&(ue=Se,Oe="add"),Fe<ue&&(ue=Fe,Oe="del"),{type:Oe,min:ue}}var we=function(Se,ye){var Oe=Se.length,ue=ye.length,xe,Ae,pe=0;if(Oe===0||ue===0)return null;for(var be=[],le=0;le<=Oe;le++)be[le]=[],be[le][0]={min:le};for(var z=0;z<=ue;z++)be[0][z]={min:z};for(var ae=1;ae<=Oe;ae++){xe=Se[ae-1];for(var V=1;V<=ue;V++){Ae=ye[V-1],ie(xe,Ae)?pe=0:pe=1;var re=be[ae-1][V].min+1,te=be[ae][V-1].min+1,q=be[ae-1][V-1].min+pe;be[ae][V]=de(re,te,q)}}return be},Re=function(Se,ye){var Oe=we(Se,ye),ue=Se.length,xe=ye.length,Ae=[],pe=1,be=1;if(Oe[ue][xe]!==ue){for(var le=1;le<=ue;le++){var z=Oe[le][le].min;be=le;for(var ae=pe;ae<=xe;ae++)Oe[le][ae].min<z&&(z=Oe[le][ae].min,be=ae);pe=be,Oe[le][pe].type&&Ae.push({index:le-1,type:Oe[le][pe].type})}for(var V=Ae.length-1;V>=0;V--)pe=Ae[V].index,Ae[V].type==="add"?Se.splice(pe,0,[].concat(Se[pe])):Se.splice(pe,1)}ue=Se.length;var re=xe-ue;if(ue<xe)for(var te=0;te<re;te++)Se[ue-1][0]==="z"||Se[ue-1][0]==="Z"?Se.splice(ue-2,0,Se[ue-2]):Se.push(Se[ue-1]),ue+=1;return Se};function _e(Fe,Se,ye){for(var Oe=[].concat(Fe),ue,xe=1/(ye+1),Ae=Ue(Se)[0],pe=1;pe<=ye;pe++)xe*=pe,ue=Math.floor(Fe.length*xe),ue===0?Oe.unshift([Ae[0]*xe+Fe[ue][0]*(1-xe),Ae[1]*xe+Fe[ue][1]*(1-xe)]):Oe.splice(ue,0,[Ae[0]*xe+Fe[ue][0]*(1-xe),Ae[1]*xe+Fe[ue][1]*(1-xe)]);return Oe}function Ue(Fe){var Se=[];switch(Fe[0]){case"M":Se.push([Fe[1],Fe[2]]);break;case"L":Se.push([Fe[1],Fe[2]]);break;case"A":Se.push([Fe[6],Fe[7]]);break;case"Q":Se.push([Fe[3],Fe[4]]),Se.push([Fe[1],Fe[2]]);break;case"T":Se.push([Fe[1],Fe[2]]);break;case"C":Se.push([Fe[5],Fe[6]]),Se.push([Fe[1],Fe[2]]),Se.push([Fe[3],Fe[4]]);break;case"S":Se.push([Fe[3],Fe[4]]),Se.push([Fe[1],Fe[2]]);break;case"H":Se.push([Fe[1],Fe[1]]);break;case"V":Se.push([Fe[1],Fe[1]]);break;default:}return Se}var rt=function(Se,ye){if(Se.length<=1)return Se;for(var Oe,ue=0;ue<ye.length;ue++)if(Se[ue][0]!==ye[ue][0])switch(Oe=Ue(Se[ue]),ye[ue][0]){case"M":Se[ue]=["M"].concat(Oe[0]);break;case"L":Se[ue]=["L"].concat(Oe[0]);break;case"A":Se[ue]=[].concat(ye[ue]),Se[ue][6]=Oe[0][0],Se[ue][7]=Oe[0][1];break;case"Q":if(Oe.length<2)if(ue>0)Oe=_e(Oe,Se[ue-1],1);else{Se[ue]=ye[ue];break}Se[ue]=["Q"].concat(Oe.reduce(function(xe,Ae){return xe.concat(Ae)},[]));break;case"T":Se[ue]=["T"].concat(Oe[0]);break;case"C":if(Oe.length<3)if(ue>0)Oe=_e(Oe,Se[ue-1],2);else{Se[ue]=ye[ue];break}Se[ue]=["C"].concat(Oe.reduce(function(xe,Ae){return xe.concat(Ae)},[]));break;case"S":if(Oe.length<2)if(ue>0)Oe=_e(Oe,Se[ue-1],1);else{Se[ue]=ye[ue];break}Se[ue]=["S"].concat(Oe.reduce(function(xe,Ae){return xe.concat(Ae)},[]));break;default:Se[ue]=ye[ue]}return Se};B.exports={parsePathString:c,parsePathArray:b,pathTocurve:u,pathToAbsolute:r,catmullRomToBezier:h,rectPath:O,fillPath:K,fillPathByDiff:Re,formatPath:rt,intersection:H}},function(B,L,o){var e=o(1),g=function(p,c,h,i){this.type=p,this.target=null,this.currentTarget=null,this.bubbles=h,this.cancelable=i,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=c};e.augment(g,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return e.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),B.exports=g},function(B,L,o){var e=o(1),g=o(9),v=o(40),p=o(60),c=function h(i){h.superclass.constructor.call(this,i)};c.Symbols={circle:function(i,r,n){return[["M",i,r],["m",-n,0],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0]]},square:function(i,r,n){return[["M",i-n,r-n],["L",i+n,r-n],["L",i+n,r+n],["L",i-n,r+n],["Z"]]},diamond:function(i,r,n){return[["M",i-n,r],["L",i,r-n],["L",i+n,r],["L",i,r+n],["Z"]]},triangle:function(i,r,n){var s=n*Math.sin(1/3*Math.PI);return[["M",i-n,r+s],["L",i,r-s],["L",i+n,r+s],["z"]]},"triangle-down":function(i,r,n){var s=n*Math.sin(1/3*Math.PI);return[["M",i-n,r-s],["L",i+n,r-s],["L",i,r+s],["Z"]]}},c.ATTRS={path:null,lineWidth:1},e.extend(c,g),e.augment(c,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var i=this._attrs,r=i.x,n=i.y,s=i.radius||i.r,f=this.getHitLineWidth(),u=f/2+s;return{minX:r-u,minY:n-u,maxX:r+u,maxY:n+u}},_getPath:function(){var i=this._attrs,r=i.x,n=i.y,s=i.radius||i.r,f=i.symbol||"circle",u;return e.isFunction(f)?u=f:u=c.Symbols[f],u?u(r,n,s):(console.warn(f+" marker is not supported."),null)},createPath:function(i){var r=this._cfg.segments;if(r&&!this._cfg.hasUpdate){i.beginPath();for(var n=0;n<r.length;n++)r[n].draw(i);return}var s=v.parsePath(this._getPath());i.beginPath();var f;r=[];for(var u=0;u<s.length;u++){var d=s[u];f=new p(d,f,u===s.length-1),r.push(f),f.draw(i)}this._cfg.segments=r,this._cfg.hasUpdate=!1}}),B.exports=c},function(B,L,o){var e=o(1),g=e.vec2;function v(n,s,f,u,d){var b=1-d;return b*b*(b*u+3*d*f)+d*d*(d*n+3*b*s)}function p(n,s,f,u,d){var b=1-d;return 3*(((s-n)*b+2*(f-s)*d)*b+(u-f)*d*d)}function c(n,s,f,u,d,b,_,x,M,P,C){var O,w=.005,S=Infinity,I,j,N,W,H,J,Q,ne=1e-4,K=[M,P];for(I=0;I<1;I+=.05)j=[v(n,f,d,_,I),v(s,u,b,x,I)],N=g.squaredDistance(K,j),N<S&&(O=I,S=N);S=Infinity;for(var ie=0;ie<32&&!(w<ne);ie++)J=O-w,Q=O+w,j=[v(n,f,d,_,J),v(s,u,b,x,J)],N=g.squaredDistance(K,j),J>=0&&N<S?(O=J,S=N):(H=[v(n,f,d,_,Q),v(s,u,b,x,Q)],W=g.squaredDistance(K,H),Q<=1&&W<S?(O=Q,S=W):w*=.5);return C&&(C.x=v(n,f,d,_,O),C.y=v(s,u,b,x,O)),Math.sqrt(S)}function h(n,s,f,u){var d=3*n-9*s+9*f-3*u,b=6*s-12*f+6*u,_=3*f-3*u,x=[],M,P,C;if(e.isNumberEqual(d,0))e.isNumberEqual(b,0)||(M=-_/b,M>=0&&M<=1&&x.push(M));else{var O=b*b-4*d*_;e.isNumberEqual(O,0)?x.push(-b/(2*d)):O>0&&(C=Math.sqrt(O),M=(-b+C)/(2*d),P=(-b-C)/(2*d),M>=0&&M<=1&&x.push(M),P>=0&&P<=1&&x.push(P))}return x}function i(n,s,f,u,d){var b=-3*s+9*f-9*u+3*d,_=n*b+6*s-12*f+6*u;return n*_-3*s+3*f}function r(n,s,f,u,d,b,_,x,M){e.isNil(M)&&(M=1),M=M>1?1:M<0?0:M;for(var P=M/2,C=12,O=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],w=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],S=0,I=0;I<C;I++){var j=P*O[I]+P,N=i(j,n,f,d,_),W=i(j,s,u,b,x),H=N*N+W*W;S+=w[I]*Math.sqrt(H)}return P*S}B.exports={at:v,derivativeAt:p,projectPoint:function(s,f,u,d,b,_,x,M,P,C){var O={};return c(s,f,u,d,b,_,x,M,P,C,O),O},pointDistance:c,extrema:h,len:r}},function(B,L,o){var e=o(58),g=o(193),v=o(93),p=o(57);B.exports={line:function(h,i,r,n,s,f,u){var d=e.box(h,i,r,n,s);if(!this.box(d.minX,d.maxX,d.minY,d.maxY,f,u))return!1;var b=e.pointDistance(h,i,r,n,f,u);return isNaN(b)?!1:b<=s/2},polyline:function(h,i,r,n){var s=h.length-1;if(s<1)return!1;for(var f=0;f<s;f++){var u=h[f][0],d=h[f][1],b=h[f+1][0],_=h[f+1][1];if(this.line(u,d,b,_,i,r,n))return!0}return!1},cubicline:function(h,i,r,n,s,f,u,d,b,_,x){return v.pointDistance(h,i,r,n,s,f,u,d,_,x)<=b/2},quadraticline:function(h,i,r,n,s,f,u,d,b){return g.pointDistance(h,i,r,n,s,f,d,b)<=u/2},arcline:function(h,i,r,n,s,f,u,d,b){return p.pointDistance(h,i,r,n,s,f,d,b)<=u/2},rect:function(h,i,r,n,s,f){return h<=s&&s<=h+r&&i<=f&&f<=i+n},circle:function(h,i,r,n,s){return Math.pow(n-h,2)+Math.pow(s-i,2)<=Math.pow(r,2)},box:function(h,i,r,n,s,f){return h<=s&&s<=i&&r<=f&&f<=n}}},function(B,L,o){B.exports={isFunction:o(14),isObject:o(33),isBoolean:o(114),isNil:o(7),isString:o(15),isArray:o(5),isNumber:o(11),isEmpty:o(106),uniqueId:o(116),clone:o(65),deepMix:o(41),assign:o(10),merge:o(41),upperFirst:o(113),each:o(3),isEqual:o(66),toArray:o(43),extend:o(104),augment:o(100),remove:o(98),isNumberEqual:o(42),toRadian:o(109),toDegree:o(108),mod:o(107),clamp:o(67),createDom:o(101),modifyCSS:o(102),requestAnimationFrame:o(103),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:o(69),vec2:o(111),vec3:o(112),transform:o(110)}},function(B,L,o){var e=o(95),g=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,v=new RegExp("([a-z])["+g+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+g+"]*,?["+g+"]*)+)","ig"),p=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+g+"]*,?["+g+"]*","ig"),c=function(Se){if(!Se)return null;if(typeof Se==typeof[])return Se;var ye={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Oe=[];return String(Se).replace(v,function(ue,xe,Ae){var pe=[],be=xe.toLowerCase();if(Ae.replace(p,function(le,z){z&&pe.push(+z)}),be==="m"&&pe.length>2&&(Oe.push([xe].concat(pe.splice(0,2))),be="l",xe=xe==="m"?"l":"L"),be==="o"&&pe.length===1&&Oe.push([xe,pe[0]]),be==="r")Oe.push([xe].concat(pe));else for(;pe.length>=ye[be]&&(Oe.push([xe].concat(pe.splice(0,ye[be]))),!!ye[be]););}),Oe},h=function(Se,ye){for(var Oe=[],ue=0,xe=Se.length;xe-2*!ye>ue;ue+=2){var Ae=[{x:+Se[ue-2],y:+Se[ue-1]},{x:+Se[ue],y:+Se[ue+1]},{x:+Se[ue+2],y:+Se[ue+3]},{x:+Se[ue+4],y:+Se[ue+5]}];ye?ue?xe-4===ue?Ae[3]={x:+Se[0],y:+Se[1]}:xe-2===ue&&(Ae[2]={x:+Se[0],y:+Se[1]},Ae[3]={x:+Se[2],y:+Se[3]}):Ae[0]={x:+Se[xe-2],y:+Se[xe-1]}:xe-4===ue?Ae[3]=Ae[2]:ue||(Ae[0]={x:+Se[ue],y:+Se[ue+1]}),Oe.push(["C",(-Ae[0].x+6*Ae[1].x+Ae[2].x)/6,(-Ae[0].y+6*Ae[1].y+Ae[2].y)/6,(Ae[1].x+6*Ae[2].x-Ae[3].x)/6,(Ae[1].y+6*Ae[2].y-Ae[3].y)/6,Ae[2].x,Ae[2].y])}return Oe},i=function(Se,ye,Oe,ue,xe){var Ae=[];if(xe===null&&ue===null&&(ue=Oe),Se=+Se,ye=+ye,Oe=+Oe,ue=+ue,xe!==null){var pe=Math.PI/180,be=Se+Oe*Math.cos(-ue*pe),le=Se+Oe*Math.cos(-xe*pe),z=ye+Oe*Math.sin(-ue*pe),ae=ye+Oe*Math.sin(-xe*pe);Ae=[["M",be,z],["A",Oe,Oe,0,+(xe-ue>180),0,le,ae]]}else Ae=[["M",Se,ye],["m",0,-ue],["a",Oe,ue,0,1,1,0,2*ue],["a",Oe,ue,0,1,1,0,-2*ue],["z"]];return Ae},r=function(Se){if(Se=c(Se),!Se||!Se.length)return[["M",0,0]];var ye=[],Oe=0,ue=0,xe=0,Ae=0,pe=0,be,le;Se[0][0]==="M"&&(Oe=+Se[0][1],ue=+Se[0][2],xe=Oe,Ae=ue,pe++,ye[0]=["M",Oe,ue]);for(var z=Se.length===3&&Se[0][0]==="M"&&Se[1][0].toUpperCase()==="R"&&Se[2][0].toUpperCase()==="Z",ae,V,re=pe,te=Se.length;re<te;re++){if(ye.push(ae=[]),V=Se[re],be=V[0],be!==be.toUpperCase())switch(ae[0]=be.toUpperCase(),ae[0]){case"A":ae[1]=V[1],ae[2]=V[2],ae[3]=V[3],ae[4]=V[4],ae[5]=V[5],ae[6]=+V[6]+Oe,ae[7]=+V[7]+ue;break;case"V":ae[1]=+V[1]+ue;break;case"H":ae[1]=+V[1]+Oe;break;case"R":le=[Oe,ue].concat(V.slice(1));for(var q=2,ve=le.length;q<ve;q++)le[q]=+le[q]+Oe,le[++q]=+le[q]+ue;ye.pop(),ye=ye.concat(h(le,z));break;case"O":ye.pop(),le=i(Oe,ue,V[1],V[2]),le.push(le[0]),ye=ye.concat(le);break;case"U":ye.pop(),ye=ye.concat(i(Oe,ue,V[1],V[2],V[3])),ae=["U"].concat(ye[ye.length-1].slice(-2));break;case"M":xe=+V[1]+Oe,Ae=+V[2]+ue;break;default:for(var Me=1,De=V.length;Me<De;Me++)ae[Me]=+V[Me]+(Me%2?Oe:ue)}else if(be==="R")le=[Oe,ue].concat(V.slice(1)),ye.pop(),ye=ye.concat(h(le,z)),ae=["R"].concat(V.slice(-2));else if(be==="O")ye.pop(),le=i(Oe,ue,V[1],V[2]),le.push(le[0]),ye=ye.concat(le);else if(be==="U")ye.pop(),ye=ye.concat(i(Oe,ue,V[1],V[2],V[3])),ae=["U"].concat(ye[ye.length-1].slice(-2));else for(var ze=0,We=V.length;ze<We;ze++)ae[ze]=V[ze];if(be=be.toUpperCase(),be!=="O")switch(ae[0]){case"Z":Oe=+xe,ue=+Ae;break;case"H":Oe=ae[1];break;case"V":ue=ae[1];break;case"M":xe=ae[ae.length-2],Ae=ae[ae.length-1];break;default:Oe=ae[ae.length-2],ue=ae[ae.length-1]}}return ye},n=function(Se,ye,Oe,ue){return[Se,ye,Oe,ue,Oe,ue]},s=function(Se,ye,Oe,ue,xe,Ae){var pe=1/3,be=2/3;return[pe*Se+be*Oe,pe*ye+be*ue,pe*xe+be*Oe,pe*Ae+be*ue,xe,Ae]},f=function Fe(Se,ye,Oe,ue,xe,Ae,pe,be,le,z){Oe===ue&&(Oe+=1);var ae=Math.PI*120/180,V=Math.PI/180*(+xe||0),re=[],te,q,ve,Me,De,ze=function(qe,yt,qt){var Er=qe*Math.cos(qt)-yt*Math.sin(qt),Zr=qe*Math.sin(qt)+yt*Math.cos(qt);return{x:Er,y:Zr}};if(z)q=z[0],ve=z[1],Me=z[2],De=z[3];else{te=ze(Se,ye,-V),Se=te.x,ye=te.y,te=ze(be,le,-V),be=te.x,le=te.y,Se===be&&ye===le&&(be+=1,le+=1);var We=(Se-be)/2,He=(ye-le)/2,$e=We*We/(Oe*Oe)+He*He/(ue*ue);$e>1&&($e=Math.sqrt($e),Oe=$e*Oe,ue=$e*ue);var It=Oe*Oe,Yt=ue*ue,rr=(Ae===pe?-1:1)*Math.sqrt(Math.abs((It*Yt-It*He*He-Yt*We*We)/(It*He*He+Yt*We*We)));Me=rr*Oe*He/ue+(Se+be)/2,De=rr*-ue*We/Oe+(ye+le)/2,q=Math.asin(((ye-De)/ue).toFixed(9)),ve=Math.asin(((le-De)/ue).toFixed(9)),q=Se<Me?Math.PI-q:q,ve=be<Me?Math.PI-ve:ve,q<0&&(q=Math.PI*2+q),ve<0&&(ve=Math.PI*2+ve),pe&&q>ve&&(q=q-Math.PI*2),!pe&&ve>q&&(ve=ve-Math.PI*2)}var ir=ve-q;if(Math.abs(ir)>ae){var Br=ve,tr=be,ft=le;ve=q+ae*(pe&&ve>q?1:-1),be=Me+Oe*Math.cos(ve),le=De+ue*Math.sin(ve),re=Fe(be,le,Oe,ue,xe,0,pe,tr,ft,[ve,Br,Me,De])}ir=ve-q;var st=Math.cos(q),Tt=Math.sin(q),Qe=Math.cos(ve),it=Math.sin(ve),zt=Math.tan(ir/4),Qt=4/3*Oe*zt,Ar=4/3*ue*zt,zr=[Se,ye],ct=[Se+Qt*Tt,ye-Ar*st],ot=[be+Qt*it,le-Ar*Qe],xt=[be,le];if(ct[0]=2*zr[0]-ct[0],ct[1]=2*zr[1]-ct[1],z)return[ct,ot,xt].concat(re);re=[ct,ot,xt].concat(re).join().split(",");for(var Bt=[],Ke=0,lt=re.length;Ke<lt;Ke++)Bt[Ke]=Ke%2?ze(re[Ke-1],re[Ke],V).y:ze(re[Ke],re[Ke+1],V).x;return Bt},u=function(Se,ye){var Oe=r(Se),ue=ye&&r(ye),xe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},pe=[],be=[],le="",z="",ae,V=function(He,$e,It){var Yt,rr;if(!He)return["C",$e.x,$e.y,$e.x,$e.y,$e.x,$e.y];switch(!(He[0]in{T:1,Q:1})&&($e.qx=$e.qy=null),He[0]){case"M":$e.X=He[1],$e.Y=He[2];break;case"A":He=["C"].concat(f.apply(0,[$e.x,$e.y].concat(He.slice(1))));break;case"S":It==="C"||It==="S"?(Yt=$e.x*2-$e.bx,rr=$e.y*2-$e.by):(Yt=$e.x,rr=$e.y),He=["C",Yt,rr].concat(He.slice(1));break;case"T":It==="Q"||It==="T"?($e.qx=$e.x*2-$e.qx,$e.qy=$e.y*2-$e.qy):($e.qx=$e.x,$e.qy=$e.y),He=["C"].concat(s($e.x,$e.y,$e.qx,$e.qy,He[1],He[2]));break;case"Q":$e.qx=He[1],$e.qy=He[2],He=["C"].concat(s($e.x,$e.y,He[1],He[2],He[3],He[4]));break;case"L":He=["C"].concat(n($e.x,$e.y,He[1],He[2]));break;case"H":He=["C"].concat(n($e.x,$e.y,He[1],$e.y));break;case"V":He=["C"].concat(n($e.x,$e.y,$e.x,He[1]));break;case"Z":He=["C"].concat(n($e.x,$e.y,$e.X,$e.Y));break;default:break}return He},re=function(He,$e){if(He[$e].length>7){He[$e].shift();for(var It=He[$e];It.length;)pe[$e]="A",ue&&(be[$e]="A"),He.splice($e++,0,["C"].concat(It.splice(0,6)));He.splice($e,1),ae=Math.max(Oe.length,ue&&ue.length||0)}},te=function(He,$e,It,Yt,rr){He&&$e&&He[rr][0]==="M"&&$e[rr][0]!=="M"&&($e.splice(rr,0,["M",Yt.x,Yt.y]),It.bx=0,It.by=0,It.x=He[rr][1],It.y=He[rr][2],ae=Math.max(Oe.length,ue&&ue.length||0))};ae=Math.max(Oe.length,ue&&ue.length||0);for(var q=0;q<ae;q++){Oe[q]&&(le=Oe[q][0]),le!=="C"&&(pe[q]=le,q&&(z=pe[q-1])),Oe[q]=V(Oe[q],xe,z),pe[q]!=="A"&&le==="C"&&(pe[q]="C"),re(Oe,q),ue&&(ue[q]&&(le=ue[q][0]),le!=="C"&&(be[q]=le,q&&(z=be[q-1])),ue[q]=V(ue[q],Ae,z),be[q]!=="A"&&le==="C"&&(be[q]="C"),re(ue,q)),te(Oe,ue,xe,Ae,q),te(ue,Oe,Ae,xe,q);var ve=Oe[q],Me=ue&&ue[q],De=ve.length,ze=ue&&Me.length;xe.x=ve[De-2],xe.y=ve[De-1],xe.bx=parseFloat(ve[De-4])||xe.x,xe.by=parseFloat(ve[De-3])||xe.y,Ae.bx=ue&&(parseFloat(Me[ze-4])||Ae.x),Ae.by=ue&&(parseFloat(Me[ze-3])||Ae.y),Ae.x=ue&&Me[ze-2],Ae.y=ue&&Me[ze-1]}return ue?[Oe,ue]:Oe},d=/,?([a-z]),?/gi,b=function(Se){return Se.join(",").replace(d,"$1")},_=function(Se,ye,Oe,ue,xe){var Ae=-3*ye+9*Oe-9*ue+3*xe,pe=Se*Ae+6*ye-12*Oe+6*ue;return Se*pe-3*ye+3*Oe},x=function(Se,ye,Oe,ue,xe,Ae,pe,be,le){le===null&&(le=1),le=le>1?1:le<0?0:le;for(var z=le/2,ae=12,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],re=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],te=0,q=0;q<ae;q++){var ve=z*V[q]+z,Me=_(ve,Se,Oe,xe,pe),De=_(ve,ye,ue,Ae,be),ze=Me*Me+De*De;te+=re[q]*Math.sqrt(ze)}return z*te},M=function(Se,ye,Oe,ue,xe,Ae,pe,be){for(var le=[],z=[[],[]],ae,V,re,te,q=0;q<2;++q){if(q===0?(V=6*Se-12*Oe+6*xe,ae=-3*Se+9*Oe-9*xe+3*pe,re=3*Oe-3*Se):(V=6*ye-12*ue+6*Ae,ae=-3*ye+9*ue-9*Ae+3*be,re=3*ue-3*ye),Math.abs(ae)<1e-12){if(Math.abs(V)<1e-12)continue;te=-re/V,te>0&&te<1&&le.push(te);continue}var ve=V*V-4*re*ae,Me=Math.sqrt(ve);if(!(ve<0)){var De=(-V+Me)/(2*ae);De>0&&De<1&&le.push(De);var ze=(-V-Me)/(2*ae);ze>0&&ze<1&&le.push(ze)}}for(var We=le.length,He=We,$e;We--;)te=le[We],$e=1-te,z[0][We]=$e*$e*$e*Se+3*$e*$e*te*Oe+3*$e*te*te*xe+te*te*te*pe,z[1][We]=$e*$e*$e*ye+3*$e*$e*te*ue+3*$e*te*te*Ae+te*te*te*be;return z[0][He]=Se,z[1][He]=ye,z[0][He+1]=pe,z[1][He+1]=be,z[0].length=z[1].length=He+2,{min:{x:Math.min.apply(0,z[0]),y:Math.min.apply(0,z[1])},max:{x:Math.max.apply(0,z[0]),y:Math.max.apply(0,z[1])}}},P=function(Se,ye,Oe,ue,xe,Ae,pe,be){if(!(Math.max(Se,Oe)<Math.min(xe,pe)||Math.min(Se,Oe)>Math.max(xe,pe)||Math.max(ye,ue)<Math.min(Ae,be)||Math.min(ye,ue)>Math.max(Ae,be))){var le=(Se*ue-ye*Oe)*(xe-pe)-(Se-Oe)*(xe*be-Ae*pe),z=(Se*ue-ye*Oe)*(Ae-be)-(ye-ue)*(xe*be-Ae*pe),ae=(Se-Oe)*(Ae-be)-(ye-ue)*(xe-pe);if(!!ae){var V=le/ae,re=z/ae,te=+V.toFixed(2),q=+re.toFixed(2);if(!(te<+Math.min(Se,Oe).toFixed(2)||te>+Math.max(Se,Oe).toFixed(2)||te<+Math.min(xe,pe).toFixed(2)||te>+Math.max(xe,pe).toFixed(2)||q<+Math.min(ye,ue).toFixed(2)||q>+Math.max(ye,ue).toFixed(2)||q<+Math.min(Ae,be).toFixed(2)||q>+Math.max(Ae,be).toFixed(2)))return{x:V,y:re}}}},C=function(Se,ye,Oe){return ye>=Se.x&&ye<=Se.x+Se.width&&Oe>=Se.y&&Oe<=Se.y+Se.height},O=function(Se,ye,Oe,ue,xe){if(xe)return[["M",+Se+ +xe,ye],["l",Oe-xe*2,0],["a",xe,xe,0,0,1,xe,xe],["l",0,ue-xe*2],["a",xe,xe,0,0,1,-xe,xe],["l",xe*2-Oe,0],["a",xe,xe,0,0,1,-xe,-xe],["l",0,xe*2-ue],["a",xe,xe,0,0,1,xe,-xe],["z"]];var Ae=[["M",Se,ye],["l",Oe,0],["l",0,ue],["l",-Oe,0],["z"]];return Ae.parsePathArray=b,Ae},w=function(Se,ye,Oe,ue){return Se===null&&(Se=ye=Oe=ue=0),ye===null&&(ye=Se.y,Oe=Se.width,ue=Se.height,Se=Se.x),{x:Se,y:ye,width:Oe,w:Oe,height:ue,h:ue,x2:Se+Oe,y2:ye+ue,cx:Se+Oe/2,cy:ye+ue/2,r1:Math.min(Oe,ue)/2,r2:Math.max(Oe,ue)/2,r0:Math.sqrt(Oe*Oe+ue*ue)/2,path:O(Se,ye,Oe,ue),vb:[Se,ye,Oe,ue].join(" ")}},S=function(Se,ye){return Se=w(Se),ye=w(ye),C(ye,Se.x,Se.y)||C(ye,Se.x2,Se.y)||C(ye,Se.x,Se.y2)||C(ye,Se.x2,Se.y2)||C(Se,ye.x,ye.y)||C(Se,ye.x2,ye.y)||C(Se,ye.x,ye.y2)||C(Se,ye.x2,ye.y2)||(Se.x<ye.x2&&Se.x>ye.x||ye.x<Se.x2&&ye.x>Se.x)&&(Se.y<ye.y2&&Se.y>ye.y||ye.y<Se.y2&&ye.y>Se.y)},I=function(Se,ye,Oe,ue,xe,Ae,pe,be){e.isArray(Se)||(Se=[Se,ye,Oe,ue,xe,Ae,pe,be]);var le=M.apply(null,Se);return w(le.min.x,le.min.y,le.max.x-le.min.x,le.max.y-le.min.y)},j=function(Se,ye,Oe,ue,xe,Ae,pe,be,le){var z=1-le,ae=Math.pow(z,3),V=Math.pow(z,2),re=le*le,te=re*le,q=ae*Se+V*3*le*Oe+z*3*le*le*xe+te*pe,ve=ae*ye+V*3*le*ue+z*3*le*le*Ae+te*be,Me=Se+2*le*(Oe-Se)+re*(xe-2*Oe+Se),De=ye+2*le*(ue-ye)+re*(Ae-2*ue+ye),ze=Oe+2*le*(xe-Oe)+re*(pe-2*xe+Oe),We=ue+2*le*(Ae-ue)+re*(be-2*Ae+ue),He=z*Se+le*Oe,$e=z*ye+le*ue,It=z*xe+le*pe,Yt=z*Ae+le*be,rr=90-Math.atan2(Me-ze,De-We)*180/Math.PI;return{x:q,y:ve,m:{x:Me,y:De},n:{x:ze,y:We},start:{x:He,y:$e},end:{x:It,y:Yt},alpha:rr}},N=function(Se,ye,Oe){var ue=I(Se),xe=I(ye);if(!S(ue,xe))return Oe?0:[];for(var Ae=x.apply(0,Se),pe=x.apply(0,ye),be=~~(Ae/8),le=~~(pe/8),z=[],ae=[],V={},re=Oe?0:[],te=0;te<be+1;te++){var q=j.apply(0,Se.concat(te/be));z.push({x:q.x,y:q.y,t:te/be})}for(var ve=0;ve<le+1;ve++){var Me=j.apply(0,ye.concat(ve/le));ae.push({x:Me.x,y:Me.y,t:ve/le})}for(var De=0;De<be;De++)for(var ze=0;ze<le;ze++){var We=z[De],He=z[De+1],$e=ae[ze],It=ae[ze+1],Yt=Math.abs(He.x-We.x)<.001?"y":"x",rr=Math.abs(It.x-$e.x)<.001?"y":"x",ir=P(We.x,We.y,He.x,He.y,$e.x,$e.y,It.x,It.y);if(ir){if(V[ir.x.toFixed(4)]===ir.y.toFixed(4))continue;V[ir.x.toFixed(4)]=ir.y.toFixed(4);var Br=We.t+Math.abs((ir[Yt]-We[Yt])/(He[Yt]-We[Yt]))*(He.t-We.t),tr=$e.t+Math.abs((ir[rr]-$e[rr])/(It[rr]-$e[rr]))*(It.t-$e.t);Br>=0&&Br<=1&&tr>=0&&tr<=1&&(Oe?re++:re.push({x:ir.x,y:ir.y,t1:Br,t2:tr}))}}return re},W=function(Se,ye,Oe){Se=u(Se),ye=u(ye);for(var ue,xe,Ae,pe,be,le,z,ae,V,re,te=Oe?0:[],q=0,ve=Se.length;q<ve;q++){var Me=Se[q];if(Me[0]==="M")ue=be=Me[1],xe=le=Me[2];else{Me[0]==="C"?(V=[ue,xe].concat(Me.slice(1)),ue=V[6],xe=V[7]):(V=[ue,xe,ue,xe,be,le,be,le],ue=be,xe=le);for(var De=0,ze=ye.length;De<ze;De++){var We=ye[De];if(We[0]==="M")Ae=z=We[1],pe=ae=We[2];else{We[0]==="C"?(re=[Ae,pe].concat(We.slice(1)),Ae=re[6],pe=re[7]):(re=[Ae,pe,Ae,pe,z,ae,z,ae],Ae=z,pe=ae);var He=N(V,re,Oe);if(Oe)te+=He;else{for(var $e=0,It=He.length;$e<It;$e++)He[$e].segment1=q,He[$e].segment2=De,He[$e].bez1=V,He[$e].bez2=re;te=te.concat(He)}}}}}return te},H=function(Se,ye){return W(Se,ye)};function J(Fe,Se){var ye=[],Oe=[];function ue(xe,Ae){if(xe.length===1)ye.push(xe[0]),Oe.push(xe[0]);else{for(var pe=[],be=0;be<xe.length-1;be++)be===0&&ye.push(xe[0]),be===xe.length-2&&Oe.push(xe[be+1]),pe[be]=[(1-Ae)*xe[be][0]+Ae*xe[be+1][0],(1-Ae)*xe[be][1]+Ae*xe[be+1][1]];ue(pe,Ae)}}return Fe.length&&ue(Fe,Se),{left:ye,right:Oe.reverse()}}function Q(Fe,Se,ye){var Oe=[[Fe[1],Fe[2]]];ye=ye||2;var ue=[];Se[0]==="A"?(Oe.push(Se[6]),Oe.push(Se[7])):Se[0]==="C"?(Oe.push([Se[1],Se[2]]),Oe.push([Se[3],Se[4]]),Oe.push([Se[5],Se[6]])):Se[0]==="S"||Se[0]==="Q"?(Oe.push([Se[1],Se[2]]),Oe.push([Se[3],Se[4]])):Oe.push([Se[1],Se[2]]);for(var xe=Oe,Ae=1/ye,pe=0;pe<ye-1;pe++){var be=Ae/(1-Ae*pe),le=J(xe,be);ue.push(le.left),xe=le.right}ue.push(xe);var z=ue.map(function(ae){var V=[];return ae.length===4&&(V.push("C"),V=V.concat(ae[2])),ae.length>=3&&(ae.length===3&&V.push("Q"),V=V.concat(ae[1])),ae.length===2&&V.push("L"),V=V.concat(ae[ae.length-1]),V});return z}var ne=function(Se,ye,Oe){if(Oe===1)return[[].concat(Se)];var ue=[];if(ye[0]==="L"||ye[0]==="C"||ye[0]==="Q")ue=ue.concat(Q(Se,ye,Oe));else{var xe=[].concat(Se);xe[0]==="M"&&(xe[0]="L");for(var Ae=0;Ae<=Oe-1;Ae++)ue.push(xe)}return ue},K=function(Se,ye){if(Se.length===1)return Se;var Oe=Se.length-1,ue=ye.length-1,xe=Oe/ue,Ae=[];if(Se.length===1&&Se[0][0]==="M"){for(var pe=0;pe<ue-Oe;pe++)Se.push(Se[0]);return Se}for(var be=0;be<ue;be++){var le=Math.floor(xe*be);Ae[le]=(Ae[le]||0)+1}var z=Ae.reduce(function(ae,V,re){return re===Oe?ae.concat(Se[Oe]):ae.concat(ne(Se[re],Se[re+1],V))},[]);return z.unshift(Se[0]),(ye[ue]==="Z"||ye[ue]==="z")&&z.push("Z"),z},ie=function(Se,ye){if(Se.length!==ye.length)return!1;var Oe=!0;return e.each(Se,function(ue,xe){if(ue!==ye[xe])return Oe=!1,!1}),Oe};function de(Fe,Se,ye){var Oe=null,ue=ye;return Se<ue&&(ue=Se,Oe="add"),Fe<ue&&(ue=Fe,Oe="del"),{type:Oe,min:ue}}var we=function(Se,ye){var Oe=Se.length,ue=ye.length,xe,Ae,pe=0;if(Oe===0||ue===0)return null;for(var be=[],le=0;le<=Oe;le++)be[le]=[],be[le][0]={min:le};for(var z=0;z<=ue;z++)be[0][z]={min:z};for(var ae=1;ae<=Oe;ae++){xe=Se[ae-1];for(var V=1;V<=ue;V++){Ae=ye[V-1],ie(xe,Ae)?pe=0:pe=1;var re=be[ae-1][V].min+1,te=be[ae][V-1].min+1,q=be[ae-1][V-1].min+pe;be[ae][V]=de(re,te,q)}}return be},Re=function(Se,ye){var Oe=we(Se,ye),ue=Se.length,xe=ye.length,Ae=[],pe=1,be=1;if(Oe[ue][xe]!==ue){for(var le=1;le<=ue;le++){var z=Oe[le][le].min;be=le;for(var ae=pe;ae<=xe;ae++)Oe[le][ae].min<z&&(z=Oe[le][ae].min,be=ae);pe=be,Oe[le][pe].type&&Ae.push({index:le-1,type:Oe[le][pe].type})}for(var V=Ae.length-1;V>=0;V--)pe=Ae[V].index,Ae[V].type==="add"?Se.splice(pe,0,[].concat(Se[pe])):Se.splice(pe,1)}ue=Se.length;var re=xe-ue;if(ue<xe)for(var te=0;te<re;te++)Se[ue-1][0]==="z"||Se[ue-1][0]==="Z"?Se.splice(ue-2,0,Se[ue-2]):Se.push(Se[ue-1]),ue+=1;return Se};function _e(Fe,Se,ye){for(var Oe=[].concat(Fe),ue,xe=1/(ye+1),Ae=Ue(Se)[0],pe=1;pe<=ye;pe++)xe*=pe,ue=Math.floor(Fe.length*xe),ue===0?Oe.unshift([Ae[0]*xe+Fe[ue][0]*(1-xe),Ae[1]*xe+Fe[ue][1]*(1-xe)]):Oe.splice(ue,0,[Ae[0]*xe+Fe[ue][0]*(1-xe),Ae[1]*xe+Fe[ue][1]*(1-xe)]);return Oe}function Ue(Fe){var Se=[];switch(Fe[0]){case"M":Se.push([Fe[1],Fe[2]]);break;case"L":Se.push([Fe[1],Fe[2]]);break;case"A":Se.push([Fe[6],Fe[7]]);break;case"Q":Se.push([Fe[3],Fe[4]]),Se.push([Fe[1],Fe[2]]);break;case"T":Se.push([Fe[1],Fe[2]]);break;case"C":Se.push([Fe[5],Fe[6]]),Se.push([Fe[1],Fe[2]]),Se.push([Fe[3],Fe[4]]);break;case"S":Se.push([Fe[3],Fe[4]]),Se.push([Fe[1],Fe[2]]);break;case"H":Se.push([Fe[1],Fe[1]]);break;case"V":Se.push([Fe[1],Fe[1]]);break;default:}return Se}var rt=function(Se,ye){if(Se.length<=1)return Se;for(var Oe,ue=0;ue<ye.length;ue++)if(Se[ue][0]!==ye[ue][0])switch(Oe=Ue(Se[ue]),ye[ue][0]){case"M":Se[ue]=["M"].concat(Oe[0]);break;case"L":Se[ue]=["L"].concat(Oe[0]);break;case"A":Se[ue]=[].concat(ye[ue]),Se[ue][6]=Oe[0][0],Se[ue][7]=Oe[0][1];break;case"Q":if(Oe.length<2)if(ue>0)Oe=_e(Oe,Se[ue-1],1);else{Se[ue]=ye[ue];break}Se[ue]=["Q"].concat(Oe.reduce(function(xe,Ae){return xe.concat(Ae)},[]));break;case"T":Se[ue]=["T"].concat(Oe[0]);break;case"C":if(Oe.length<3)if(ue>0)Oe=_e(Oe,Se[ue-1],2);else{Se[ue]=ye[ue];break}Se[ue]=["C"].concat(Oe.reduce(function(xe,Ae){return xe.concat(Ae)},[]));break;case"S":if(Oe.length<2)if(ue>0)Oe=_e(Oe,Se[ue-1],1);else{Se[ue]=ye[ue];break}Se[ue]=["S"].concat(Oe.reduce(function(xe,Ae){return xe.concat(Ae)},[]));break;default:Se[ue]=ye[ue]}return Se};B.exports={parsePathString:c,parsePathArray:b,pathTocurve:u,pathToAbsolute:r,catmullRomToBezier:h,rectPath:O,fillPath:K,fillPathByDiff:Re,formatPath:rt,intersection:H}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.setMatrixArrayType=p,L.toRadian=h,L.equals=i;var e=L.EPSILON=1e-6,g=L.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,v=L.RANDOM=Math.random;function p(r){L.ARRAY_TYPE=g=r}var c=Math.PI/180;function h(r){return r*c}function i(r,n){return Math.abs(r-n)<=e*Math.max(1,Math.abs(r),Math.abs(n))}},function(B,L){var o=Array.prototype,e=o.splice,g=o.indexOf,v=o.slice,p=function(h){for(var i=v.call(arguments,1),r=0;r<i.length;r++)for(var n=i[r],s=-1;(s=g.call(h,n))>-1;)e.call(h,s,1);return h};B.exports=p},function(B,L,o){var e=o(7),g=o(5),v=o(3);B.exports=function(c,h){for(var i=[],r={},n=0;n<c.length;n++){var s=c[n],f=s[h];e(f)||(g(f)||(f=[f]),v(f,function(u){r[u]||(i.push(u),r[u]=!0)}))}return i}},function(B,L,o){var e=o(14),g=o(43),v=o(10),p=function(h){for(var i=g(arguments),r=1;r<i.length;r++){var n=i[r];e(n)&&(n=n.prototype),v(h.prototype,n)}};B.exports=p},function(B,L){var o=document.createElement("table"),e=document.createElement("tr"),g=/^\s*<(\w+|!)[^>]*>/,v={tr:document.createElement("tbody"),tbody:o,thead:o,tfoot:o,td:e,th:e,"*":document.createElement("div")};B.exports=function(c){var h=g.test(c)&&RegExp.$1;h in v||(h="*");var i=v[h];c=c.replace(/(^\s*)|(\s*$)/g,""),i.innerHTML=""+c;var r=i.childNodes[0];return i.removeChild(r),r}},function(B,L){B.exports=function(e,g){if(e)for(var v in g)g.hasOwnProperty(v)&&(e.style[v]=g[v]);return e}},function(B,L){B.exports=function(e){var g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(v){return setTimeout(v,16)};return g(e)}},function(B,L,o){var e=o(14),g=o(10),v=function(c,h,i,r){e(h)||(i=h,h=c,c=function(){});var n=Object.create?function(f,u){return Object.create(f,{constructor:{value:u}})}:function(f,u){function d(){}d.prototype=f;var b=new d;return b.constructor=u,b},s=n(h.prototype,c);return c.prototype=g(s,c.prototype),c.superclass=n(h.prototype,h),g(s,i),g(c,r),c};B.exports=v},function(B,L,o){var e=o(3),g=o(23),v=function(c,h){if(!g(c))return c;var i=[];return e(c,function(r,n){h(r,n)&&i.push(r)}),i};B.exports=v},function(B,L,o){var e=o(7),g=o(23),v=o(224),p=o(226),c=Object.prototype.hasOwnProperty;function h(i){if(e(i))return!0;if(g(i))return!i.length;var r=v(i);if(r==="Map"||r==="Set")return!i.size;if(p(i))return!Object.keys(i).length;for(var n in i)if(c.call(i,n))return!1;return!0}B.exports=h},function(B,L){var o=function(g,v){return(g%v+v)%v};B.exports=o},function(B,L){var o=180/Math.PI,e=function(v){return o*v};B.exports=e},function(B,L){var o=Math.PI/180,e=function(v){return o*v};B.exports=e},function(B,L,o){var e=o(65),g=o(3),v=o(69);B.exports=function(c,h){return c=e(c),g(h,function(i){switch(i[0]){case"t":v.translate(c,c,[i[1],i[2]]);break;case"s":v.scale(c,c,[i[1],i[2]]);break;case"r":v.rotate(c,c,i[1]);break;case"m":v.multiply(c,c,i[1]);break;default:return!1}}),c}},function(B,L,o){var e=o(404),g=o(67);e.angle=function(v,p){var c=e.dot(v,p)/(e.length(v)*e.length(p));return Math.acos(g(c,-1,1))},e.direction=function(v,p){return v[0]*p[1]-p[0]*v[1]},e.angleTo=function(v,p,c){var h=e.angle(v,p),i=e.direction(v,p)>=0;return c?i?Math.PI*2-h:h:i?h:Math.PI*2-h},e.vertical=function(v,p,c){return c?(v[0]=p[1],v[1]=-1*p[0]):(v[0]=-1*p[1],v[1]=p[0]),v},B.exports=e},function(B,L,o){var e=o(405);B.exports=e},function(B,L,o){var e=o(44),g=function(p){var c=e(p);return c.charAt(0).toUpperCase()+c.substring(1)};B.exports=g},function(B,L,o){var e=o(19),g=function(p){return e(p,"Boolean")};B.exports=g},function(B,L){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},e=function(v){return(typeof v=="undefined"?"undefined":o(v))==="object"&&v!==null};B.exports=e},function(B,L){var o=function(){var e={};return function(g){return g=g||"g",e[g]?e[g]+=1:e[g]=1,g+e[g]}}();B.exports=o},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",GuideRegionFilter:"deleteTypedGuide",GuideDataMarker:"deleteTypedGuide",GuideDataRegion:"deleteTypedGuide",Facet:"deleteFacet"},g={merge:function(p,c,h,i){this.mergeDelete(p,c,h),this.mergeUpdate(p,i)},mergeDelete:function(p,c,h){var i=this;Object.keys(c).forEach(function(r){var n=e[h[r].name],s=p;h[r].viewId&&(s=p.views[h[r].viewId]),i[n]&&i[n](s,r,h[r].parentInfo.id)})},deleteAxis:function(p,c){!p||delete p.axises[c]},deleteTooltip:function(p){!p||delete p.tooltip},deleteCoord:function(p){!p||delete p.coord},deleteLegend:function(p,c){!p||delete p.legends[c]},deleteGuide:function(p){!p||delete p.guide},deleteGeom:function(p,c){!p||!p.geoms||delete p.geoms[c]},deleteLabel:function(p,c,h){!p||!p.geoms||!p.geoms[h]||delete p.geoms[h].label},deleteFacet:function(p){!p||delete p.facet},deleteTypedGuide:function(p,c){!p||!p.guide||delete p.guide.elements[c]},deleteView:function(p,c){!p||delete p.views[c]},mergeUpdate:function(p,c){this.mergeChart(p,c),this.mergeAxises(p,c),this.mergeCoord(p,c),this.mergeGeoms(p.geoms,c),this.mergeLegends(p.legends,c),this.mergeTooltip(p,c),this.mergeViews(p.views,c),this.mergeGuide(p.guide,c)},mergeChart:function(p,c){p.chart&&p.chart.updateProps&&(p.chart.props=p.chart.updateProps),c&&delete p.chart.g2Instance},mergeAxises:function(p,c){var h=p.axises;if(!h!=null)for(var i in h)h[i]&&h[i].updateProps&&(h[i].props=h[i].updateProps),c&&delete h[i].g2Instance},mergeTooltip:function(p,c){!p.tooltip||(c&&delete p.tooltip.g2Instance,p.tooltip.updateProps&&(p.tooltip.props=p.tooltip.updateProps))},mergeCoord:function(p,c){!p.coord||(c&&delete p.coord.g2Instance,p.coord.updateProps&&(p.coord.props=p.coord.updateProps))},mergeLegends:function(p,c){if(!!p){for(var h in p)if(p[h]){var i=p[h];c&&delete i.g2Instance,i.updateProps&&(i.props=i.updateProps)}}},mergeGeoms:function(p,c){if(p!=null)for(var h in p)p[h]&&(c&&(delete p[h].g2Instance,p[h].label&&p[h].label.g2Instance&&(p[h].label.updateProps&&(p[h].label.props=p[h].label.updateProps),delete p[h].label.g2Instance)),p[h].updateProps&&(p[h].props=p[h].updateProps))},mergeGuide:function(p,c){if(p!=null){var h=p.elements;for(var i in h)h[i]&&(c&&delete h[i].g2Instance,h[i].updateProps&&(h[i].props=h[i].updateProps))}},mergeView:function(p,c){!p||(c&&p.g2Instance&&delete p.g2Instance,p.updateProps&&(p.props=p.updateProps),this.mergeCoord(p,c),this.mergeAxises(p,c),this.mergeGeoms(p.geoms,c),this.mergeGuide(p.guide,c))},mergeViews:function(p,c){if(p!=null)for(var h in p)p[h]&&this.mergeView(p[h],c)}};L.default=g},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Prop=L.Util=void 0;var e=o(70),g=c(e),v=o(492),p=c(v);function c(h){return h&&h.__esModule?h:{default:h}}L.Util=g.default,L.Prop=p.default},function(B,L,o){"use strict";L.c=g,o.d(L,"e",function(){return v}),o.d(L,"d",function(){return p}),L.h=C,L.b=S,L.g=I,L.a=j,L.f=ne;var e=o(120);function g(){}var v=.7,p=1/v,c="\\s*([+-]?\\d+)\\s*",h="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",i="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),s=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),f=new RegExp("^rgba\\("+[c,c,c,h]+"\\)$"),u=new RegExp("^rgba\\("+[i,i,i,h]+"\\)$"),d=new RegExp("^hsl\\("+[h,i,i]+"\\)$"),b=new RegExp("^hsla\\("+[h,i,i,h]+"\\)$"),_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o.i(e.a)(g,C,{copy:function(de){return Object.assign(new this.constructor,this,de)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHsl:M,formatRgb:P,toString:P});function x(){return this.rgb().formatHex()}function M(){return Q(this).formatHsl()}function P(){return this.rgb().formatRgb()}function C(de){var we,Re;return de=(de+"").trim().toLowerCase(),(we=r.exec(de))?(Re=we[1].length,we=parseInt(we[1],16),Re===6?O(we):Re===3?new j(we>>8&15|we>>4&240,we>>4&15|we&240,(we&15)<<4|we&15,1):Re===8?w(we>>24&255,we>>16&255,we>>8&255,(we&255)/255):Re===4?w(we>>12&15|we>>8&240,we>>8&15|we>>4&240,we>>4&15|we&240,((we&15)<<4|we&15)/255):null):(we=n.exec(de))?new j(we[1],we[2],we[3],1):(we=s.exec(de))?new j(we[1]*255/100,we[2]*255/100,we[3]*255/100,1):(we=f.exec(de))?w(we[1],we[2],we[3],we[4]):(we=u.exec(de))?w(we[1]*255/100,we[2]*255/100,we[3]*255/100,we[4]):(we=d.exec(de))?J(we[1],we[2]/100,we[3]/100,1):(we=b.exec(de))?J(we[1],we[2]/100,we[3]/100,we[4]):_.hasOwnProperty(de)?O(_[de]):de==="transparent"?new j(NaN,NaN,NaN,0):null}function O(de){return new j(de>>16&255,de>>8&255,de&255,1)}function w(de,we,Re,_e){return _e<=0&&(de=we=Re=NaN),new j(de,we,Re,_e)}function S(de){return de instanceof g||(de=C(de)),de?(de=de.rgb(),new j(de.r,de.g,de.b,de.opacity)):new j}function I(de,we,Re,_e){return arguments.length===1?S(de):new j(de,we,Re,_e==null?1:_e)}function j(de,we,Re,_e){this.r=+de,this.g=+we,this.b=+Re,this.opacity=+_e}o.i(e.a)(j,I,o.i(e.b)(g,{brighter:function(de){return de=de==null?p:Math.pow(p,de),new j(this.r*de,this.g*de,this.b*de,this.opacity)},darker:function(de){return de=de==null?v:Math.pow(v,de),new j(this.r*de,this.g*de,this.b*de,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N,formatHex:N,formatRgb:W,toString:W}));function N(){return"#"+H(this.r)+H(this.g)+H(this.b)}function W(){var de=this.opacity;return de=isNaN(de)?1:Math.max(0,Math.min(1,de)),(de===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(de===1?")":", "+de+")")}function H(de){return de=Math.max(0,Math.min(255,Math.round(de)||0)),(de<16?"0":"")+de.toString(16)}function J(de,we,Re,_e){return _e<=0?de=we=Re=NaN:Re<=0||Re>=1?de=we=NaN:we<=0&&(de=NaN),new K(de,we,Re,_e)}function Q(de){if(de instanceof K)return new K(de.h,de.s,de.l,de.opacity);if(de instanceof g||(de=C(de)),!de)return new K;if(de instanceof K)return de;de=de.rgb();var we=de.r/255,Re=de.g/255,_e=de.b/255,Ue=Math.min(we,Re,_e),rt=Math.max(we,Re,_e),Fe=NaN,Se=rt-Ue,ye=(rt+Ue)/2;return Se?(we===rt?Fe=(Re-_e)/Se+(Re<_e)*6:Re===rt?Fe=(_e-we)/Se+2:Fe=(we-Re)/Se+4,Se/=ye<.5?rt+Ue:2-rt-Ue,Fe*=60):Se=ye>0&&ye<1?0:Fe,new K(Fe,Se,ye,de.opacity)}function ne(de,we,Re,_e){return arguments.length===1?Q(de):new K(de,we,Re,_e==null?1:_e)}function K(de,we,Re,_e){this.h=+de,this.s=+we,this.l=+Re,this.opacity=+_e}o.i(e.a)(K,ne,o.i(e.b)(g,{brighter:function(de){return de=de==null?p:Math.pow(p,de),new K(this.h,this.s,this.l*de,this.opacity)},darker:function(de){return de=de==null?v:Math.pow(v,de),new K(this.h,this.s,this.l*de,this.opacity)},rgb:function(){var de=this.h%360+(this.h<0)*360,we=isNaN(de)||isNaN(this.s)?0:this.s,Re=this.l,_e=Re+(Re<.5?Re:1-Re)*we,Ue=2*Re-_e;return new j(ie(de>=240?de-240:de+120,Ue,_e),ie(de,Ue,_e),ie(de<120?de+240:de-120,Ue,_e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var de=this.opacity;return de=isNaN(de)?1:Math.max(0,Math.min(1,de)),(de===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(de===1?")":", "+de+")")}}));function ie(de,we,Re){return(de<60?we+(Re-we)*de/60:de<180?Re:de<240?we+(Re-we)*(240-de)/60:we)*255}},function(B,L,o){"use strict";L.b=e,L.a=function(g,v,p){g.prototype=v.prototype=p,p.constructor=g};function e(g,v){var p=Object.create(g.prototype);for(var c in v)p[c]=v[c];return p}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(504);o.d(L,"easeLinear",function(){return e.a});var g=o(506);o.d(L,"easeQuad",function(){return g.a}),o.d(L,"easeQuadIn",function(){return g.b}),o.d(L,"easeQuadOut",function(){return g.c}),o.d(L,"easeQuadInOut",function(){return g.a});var v=o(501);o.d(L,"easeCubic",function(){return v.a}),o.d(L,"easeCubicIn",function(){return v.b}),o.d(L,"easeCubicOut",function(){return v.c}),o.d(L,"easeCubicInOut",function(){return v.a});var p=o(505);o.d(L,"easePoly",function(){return p.a}),o.d(L,"easePolyIn",function(){return p.b}),o.d(L,"easePolyOut",function(){return p.c}),o.d(L,"easePolyInOut",function(){return p.a});var c=o(507);o.d(L,"easeSin",function(){return c.a}),o.d(L,"easeSinIn",function(){return c.b}),o.d(L,"easeSinOut",function(){return c.c}),o.d(L,"easeSinInOut",function(){return c.a});var h=o(503);o.d(L,"easeExp",function(){return h.a}),o.d(L,"easeExpIn",function(){return h.b}),o.d(L,"easeExpOut",function(){return h.c}),o.d(L,"easeExpInOut",function(){return h.a});var i=o(500);o.d(L,"easeCircle",function(){return i.a}),o.d(L,"easeCircleIn",function(){return i.b}),o.d(L,"easeCircleOut",function(){return i.c}),o.d(L,"easeCircleInOut",function(){return i.a});var r=o(499);o.d(L,"easeBounce",function(){return r.a}),o.d(L,"easeBounceIn",function(){return r.b}),o.d(L,"easeBounceOut",function(){return r.a}),o.d(L,"easeBounceInOut",function(){return r.c});var n=o(498);o.d(L,"easeBack",function(){return n.a}),o.d(L,"easeBackIn",function(){return n.b}),o.d(L,"easeBackOut",function(){return n.c}),o.d(L,"easeBackInOut",function(){return n.a});var s=o(502);o.d(L,"easeElastic",function(){return s.a}),o.d(L,"easeElasticIn",function(){return s.b}),o.d(L,"easeElasticOut",function(){return s.a}),o.d(L,"easeElasticInOut",function(){return s.c})},function(B,L,o){"use strict";L.b=e;function e(g,v,p,c,h){var i=g*g,r=i*g;return((1-3*g+3*i-r)*v+(4-6*i+3*r)*p+(1+3*g+3*i-3*r)*c+r*h)/6}L.a=function(g){var v=g.length-1;return function(p){var c=p<=0?p=0:p>=1?(p=1,v-1):Math.floor(p*v),h=g[c],i=g[c+1],r=c>0?g[c-1]:2*h-i,n=c<v-1?g[c+2]:2*i-h;return e((p-c/v)*v,r,h,i,n)}}},function(B,L,o){"use strict";var e=o(16),g=o(238),v=o(233),p=o(236),c=o(71),h=o(237),i=o(239),r=o(235);L.a=function(n,s){var f=typeof s,u;return s==null||f==="boolean"?o.i(r.a)(s):(f==="number"?c.a:f==="string"?(u=o.i(e.f)(s))?(s=u,g.a):i.a:s instanceof e.f?g.a:s instanceof Date?p.a:Array.isArray(s)?v.a:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?h.a:c.a)(n,s)}},function(B,L,o){"use strict";L.b=e;function e(g,v,p,c,h){var i=g*g,r=i*g;return((1-3*g+3*i-r)*v+(4-6*i+3*r)*p+(1+3*g+3*i-3*r)*c+r*h)/6}L.a=function(g){var v=g.length-1;return function(p){var c=p<=0?p=0:p>=1?(p=1,v-1):Math.floor(p*v),h=g[c],i=g[c+1],r=c>0?g[c-1]:2*h-i,n=c<v-1?g[c+2]:2*i-h;return e((p-c/v)*v,r,h,i,n)}}},function(B,L,o){"use strict";var e=o(127),g=o(240),v=o(124),p=o(241),c=o(243),h=o(519),i=o(522),r=o(72);o.d(L,"b",function(){return r.a});var n=o(126),s=o(244),f=o(526),u=o(246);o.d(L,"d",function(){return u.a});var d=o(528);o.d(L,"a",function(){return d.a}),o.d(L,"e",function(){return d.b});var b=o(530),_=o(245);o.d(L,"c",function(){return _.a});var x=o(521),M=o(523),P=o(520),C=o(518),O=o(524),w=o(525)},function(B,L,o){"use strict";L.a=e,L.b=function(g,v){v||(v=[]);var p=g?Math.min(v.length,g.length):0,c=v.slice(),h;return function(i){for(h=0;h<p;++h)c[h]=g[h]*(1-i)+v[h]*i;return c}};function e(g){return ArrayBuffer.isView(g)&&!(g instanceof DataView)}},function(B,L,o){"use strict";var e=o(16),g=o(245),v=o(240),p=o(243),c=o(72),h=o(244),i=o(246),r=o(242),n=o(126);L.a=function(s,f){var u=typeof f,d;return f==null||u==="boolean"?o.i(r.a)(f):(u==="number"?c.a:u==="string"?(d=o.i(e.f)(f))?(f=d,g.a):i.a:f instanceof e.f?g.a:f instanceof Date?p.a:o.i(n.a)(f)?n.b:Array.isArray(f)?v.a:typeof f.valueOf!="function"&&typeof f.toString!="function"||isNaN(f)?h.a:c.a)(s,f)}},function(B,L,o){"use strict";var e=o(129);L.a=function(g){var v=g+="",p=v.indexOf(":");return p>=0&&(v=g.slice(0,p))!=="xmlns"&&(g=g.slice(p+1)),e.a.hasOwnProperty(v)?{space:e.a[v],local:g}:g}},function(B,L,o){"use strict";o.d(L,"b",function(){return e});var e="http://www.w3.org/1999/xhtml";L.a={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(B,L,o){"use strict";o.d(L,"a",function(){return g}),L.b=n;var e={},g=null;if(typeof document!="undefined"){var v=document.documentElement;"onmouseenter"in v||(e={mouseenter:"mouseover",mouseleave:"mouseout"})}function p(s,f,u){return s=c(s,f,u),function(d){var b=d.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&s.call(this,d)}}function c(s,f,u){return function(d){var b=g;g=d;try{s.call(this,this.__data__,f,u)}finally{g=b}}}function h(s){return s.trim().split(/^|\s+/).map(function(f){var u="",d=f.indexOf(".");return d>=0&&(u=f.slice(d+1),f=f.slice(0,d)),{type:f,name:u}})}function i(s){return function(){var f=this.__on;if(!!f){for(var u=0,d=-1,b=f.length,_;u<b;++u)_=f[u],(!s.type||_.type===s.type)&&_.name===s.name?this.removeEventListener(_.type,_.listener,_.capture):f[++d]=_;++d?f.length=d:delete this.__on}}}function r(s,f,u){var d=e.hasOwnProperty(s.type)?p:c;return function(b,_,x){var M=this.__on,P,C=d(f,_,x);if(M){for(var O=0,w=M.length;O<w;++O)if((P=M[O]).type===s.type&&P.name===s.name){this.removeEventListener(P.type,P.listener,P.capture),this.addEventListener(P.type,P.listener=C,P.capture=u),P.value=f;return}}this.addEventListener(s.type,C,u),P={type:s.type,name:s.name,value:f,listener:C,capture:u},M?M.push(P):this.__on=[P]}}L.c=function(s,f,u){var d=h(s+""),b,_=d.length,x;if(arguments.length<2){var M=this.node().__on;if(M){for(var P=0,C=M.length,O;P<C;++P)for(b=0,O=M[P];b<_;++b)if((x=d[b]).type===O.type&&x.name===O.name)return O.value}return}for(M=f?r:i,u==null&&(u=!1),b=0;b<_;++b)this.each(M(d[b],f,u));return this};function n(s,f,u,d){var b=g;s.sourceEvent=g,g=s;try{return f.apply(u,d)}finally{g=b}}},function(B,L,o){"use strict";function e(){}L.a=function(g){return g==null?e:function(){return this.querySelector(g)}}},function(B,L,o){"use strict";var e=o(130);L.a=function(){for(var g=e.a,v;v=g.sourceEvent;)g=v;return g}},function(B,L,o){"use strict";L.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(B,L,o){"use strict";L.a=u,L.d=b,L.b=_,L.c=x;var e=0,g=0,v=0,p=1e3,c,h,i=0,r=0,n=0,s=typeof performance=="object"&&performance.now?performance:Date,f=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(w){setTimeout(w,17)};function u(){return r||(f(d),r=s.now()+n)}function d(){r=0}function b(){this._call=this._time=this._next=null}b.prototype=_.prototype={constructor:b,restart:function(w,S,I){if(typeof w!="function")throw new TypeError("callback is not a function");I=(I==null?u():+I)+(S==null?0:+S),!this._next&&h!==this&&(h?h._next=this:c=this,h=this),this._call=w,this._time=I,O()},stop:function(){this._call&&(this._call=null,this._time=Infinity,O())}};function _(w,S,I){var j=new b;return j.restart(w,S,I),j}function x(){u(),++e;for(var w=c,S;w;)(S=r-w._time)>=0&&w._call.call(null,S),w=w._next;--e}function M(){r=(i=s.now())+n,e=g=0;try{x()}finally{e=0,C(),r=0}}function P(){var w=s.now(),S=w-i;S>p&&(n-=S,i=w)}function C(){for(var w,S=c,I,j=Infinity;S;)S._call?(j>S._time&&(j=S._time),w=S,S=S._next):(I=S._next,S._next=null,S=w?w._next=I:c=I);h=w,O(j)}function O(w){if(!e){g&&(g=clearTimeout(g));var S=w-r;S>24?(w<Infinity&&(g=setTimeout(M,w-s.now()-n)),v&&(v=clearInterval(v))):(v||(i=s.now(),v=setInterval(P,p)),e=1,f(M))}}},function(B,L,o){var e;/*!
* EventEmitter v5.1.0 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - http://oli.me.uk/
* @preserve
*/(function(g){"use strict";function v(){}var p=v.prototype,c=g.EventEmitter;function h(n,s){for(var f=n.length;f--;)if(n[f].listener===s)return f;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}p.getListeners=function(s){var f=this._getEvents(),u,d;if(s instanceof RegExp){u={};for(d in f)f.hasOwnProperty(d)&&s.test(d)&&(u[d]=f[d])}else u=f[s]||(f[s]=[]);return u},p.flattenListeners=function(s){var f=[],u;for(u=0;u<s.length;u+=1)f.push(s[u].listener);return f},p.getListenersAsObject=function(s){var f=this.getListeners(s),u;return f instanceof Array&&(u={},u[s]=f),u||f};function r(n){return typeof n=="function"||n instanceof RegExp?!0:n&&typeof n=="object"?r(n.listener):!1}p.addListener=function(s,f){if(!r(f))throw new TypeError("listener must be a function");var u=this.getListenersAsObject(s),d=typeof f=="object",b;for(b in u)u.hasOwnProperty(b)&&h(u[b],f)===-1&&u[b].push(d?f:{listener:f,once:!1});return this},p.on=i("addListener"),p.addOnceListener=function(s,f){return this.addListener(s,{listener:f,once:!0})},p.once=i("addOnceListener"),p.defineEvent=function(s){return this.getListeners(s),this},p.defineEvents=function(s){for(var f=0;f<s.length;f+=1)this.defineEvent(s[f]);return this},p.removeListener=function(s,f){var u=this.getListenersAsObject(s),d,b;for(b in u)u.hasOwnProperty(b)&&(d=h(u[b],f),d!==-1&&u[b].splice(d,1));return this},p.off=i("removeListener"),p.addListeners=function(s,f){return this.manipulateListeners(!1,s,f)},p.removeListeners=function(s,f){return this.manipulateListeners(!0,s,f)},p.manipulateListeners=function(s,f,u){var d,b,_=s?this.removeListener:this.addListener,x=s?this.removeListeners:this.addListeners;if(typeof f=="object"&&!(f instanceof RegExp))for(d in f)f.hasOwnProperty(d)&&(b=f[d])&&(typeof b=="function"?_.call(this,d,b):x.call(this,d,b));else for(d=u.length;d--;)_.call(this,f,u[d]);return this},p.removeEvent=function(s){var f=typeof s,u=this._getEvents(),d;if(f==="string")delete u[s];else if(s instanceof RegExp)for(d in u)u.hasOwnProperty(d)&&s.test(d)&&delete u[d];else delete this._events;return this},p.removeAllListeners=i("removeEvent"),p.emitEvent=function(s,f){var u=this.getListenersAsObject(s),d,b,_,x,M;for(x in u)if(u.hasOwnProperty(x))for(d=u[x].slice(0),_=0;_<d.length;_++)b=d[_],b.once===!0&&this.removeListener(s,b.listener),M=b.listener.apply(this,f||[]),M===this._getOnceReturnValue()&&this.removeListener(s,b.listener);return this},p.trigger=i("emitEvent"),p.emit=function(s){var f=Array.prototype.slice.call(arguments,1);return this.emitEvent(s,f)},p.setOnceReturnValue=function(s){return this._onceReturnValue=s,this},p._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},p._getEvents=function(){return this._events||(this._events={})},v.noConflict=function(){return g.EventEmitter=c,v},e=function(){return v}.call(g,o,g,B),e!==void 0&&(B.exports=e)})(this||{})},function(B,L,o){var e=0,g=o(3),v={values:o(99)};B.exports={isAdjust:function(c){return this.adjustNames.indexOf(c)>=0},_getDimValues:function(c){var h=this,i={},r=[];if(h.xField&&h.isAdjust("x")&&r.push(h.xField),h.yField&&h.isAdjust("y")&&r.push(h.yField),g(r,function(f){var u=v.values(c,f);u.sort(function(d,b){return d-b}),i[f]=u}),!h.yField&&h.isAdjust("y")){var n="y",s=[e,1];i[n]=s}return i},adjustData:function(c,h){var i=this,r=i._getDimValues(h);g(c,function(n,s){g(r,function(f,u){i.adjustDim(u,f,n,c.length,s)})})},getAdjustRange:function(c,h,i){var r=this,n=i.indexOf(h),s=i.length,f,u;return!r.yField&&r.isAdjust("y")?(f=0,u=1):s>1?(f=n===0?i[0]:i[n-1],u=n===s-1?i[s-1]:i[n+1],n!==0?f+=(h-f)/2:f-=(u-h)/2,n!==s-1?u-=(u-h)/2:u+=(h-i[s-2])/2):(f=h===0?0:h-.5,u=h===0?1:h+.5),{pre:f,next:u}},groupData:function(c,h){var i={};return g(c,function(r){var n=r[h];n===void 0&&(n=r[h]=e),i[n]||(i[n]=[]),i[n].push(r)}),i}}},function(B,L,o){var e=o(11),g=o(15),v=o(3),p=/rgba?\(([\s.,0-9]+)\)/;function c(){var b=document.createElement("i");return b.title="Web Colour Picker",b.style.display="none",document.body.appendChild(b),b}function h(b,_,x,M){var P=b[M]+(_[M]-b[M])*x;return P}function i(b){return"#"+r(b[0])+r(b[1])+r(b[2])}function r(b){return b=Math.round(b),b=b.toString(16),b.length===1&&(b="0"+b),b}function n(b,_){(isNaN(_)||!e(_)||_<0)&&(_=0),_>1&&(_=1);var x=b.length-1,M=Math.floor(x*_),P=x*_-M,C=b[M],O=M===x?C:b[M+1],w=i([h(C,O,P,0),h(C,O,P,1),h(C,O,P,2)]);return w}function s(b){var _=[];return _.push(parseInt(b.substr(1,2),16)),_.push(parseInt(b.substr(3,2),16)),_.push(parseInt(b.substr(5,2),16)),_}var f={},u=null,d={toRGB:function(_){if(_[0]==="#"&&_.length===7)return _;u||(u=c());var x;if(f[_])x=f[_];else{u.style.color=_,x=document.defaultView.getComputedStyle(u,"").getPropertyValue("color");var M=p.exec(x),P=M[1].split(/\s*,\s*/);x=i(P),f[_]=x}return x},rgb2arr:s,gradient:function(_){var x=[];return g(_)&&(_=_.split("-")),v(_,function(M){M.indexOf("#")===-1&&(M=d.toRGB(M)),x.push(s(M))}),function(M){return n(x,M)}}};B.exports=d},function(B,L,o){var e=o(52),g=e.Group,v=o(4),p=function c(h){c.superclass.constructor.call(this,h)};v.extend(p,g),v.augment(p,{getDefaultCfg:function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},_renderUI:function(){p.superclass._renderUI.call(this),this._drawLines()},_drawLines:function(){var h=this,i=h.get("lineStyle"),r=h.get("items");r&&r.length&&(h._precessItems(r),h._drawGridLines(r,i))},_precessItems:function(h){var i=this,r;v.each(h,function(n,s){r&&i.get("alternateColor")&&i._drawAlternativeBg(n,r,s),r=n})},_drawGridLines:function(h,i){var r=this,n=this.get("type"),s,f,u,d,b=h.length;n==="line"||n==="polygon"?v.each(h,function(_,x){r.get("hideFirstLine")&&x===0||r.get("hideLastLine")&&x===b-1||(d=_.points,f=[],n==="line"?(f.push(["M",d[0].x,d[0].y]),f.push(["L",d[d.length-1].x,d[d.length-1].y])):v.each(d,function(M,P){P===0?f.push(["M",M.x,M.y]):f.push(["L",M.x,M.y])}),r._drawZeroLine(n,x)?u=v.mix({},r.get("zeroLineStyle"),{path:f}):u=v.mix({},i,{path:f}),s=r.addShape("path",{attrs:u}),s.name="axis-grid",s._id=_._id,s.set("coord",r.get("coord")),r.get("appendInfo")&&s.setSilent("appendInfo",r.get("appendInfo")))}):v.each(h,function(_,x){r.get("hideFirstLine")&&x===0||r.get("hideLastLine")&&x===b-1||(d=_.points,f=[],v.each(d,function(M,P){var C=M.radius;P===0?f.push(["M",M.x,M.y]):f.push(["A",C,C,0,0,M.flag,M.x,M.y])}),u=v.mix({},i,{path:f}),s=r.addShape("path",{attrs:u}),s.name="axis-grid",s._id=_._id,s.set("coord",r.get("coord")),r.get("appendInfo")&&s.setSilent("appendInfo",r.get("appendInfo")))})},_drawZeroLine:function(h,i){var r=this,n=r.get("tickValues");return!!(h==="line"&&n&&n[i]===0&&r.get("hightLightZero"))},_drawAlternativeBg:function(h,i,r){var n=this,s=n.get("alternateColor"),f,u,d;v.isString(s)?u=s:v.isArray(s)&&(u=s[0],d=s[1]),r%2==0?d&&(f=n._getBackItem(i.points,h.points,d)):u&&(f=n._getBackItem(i.points,h.points,u));var b=n.addShape("Path",{attrs:f});b.name="axis-grid-rect",b._id=h._id&&h._id.replace("grid","grid-rect"),b.set("coord",n.get("coord")),n.get("appendInfo")&&b.setSilent("appendInfo",n.get("appendInfo"))},_getBackItem:function(h,i,r){var n=[],s=this.get("type");if(s==="line")n.push(["M",h[0].x,h[0].y]),n.push(["L",h[h.length-1].x,h[h.length-1].y]),n.push(["L",i[i.length-1].x,i[i.length-1].y]),n.push(["L",i[0].x,i[0].y]),n.push(["Z"]);else if(s==="polygon"){v.each(h,function(x,M){M===0?n.push(["M",x.x,x.y]):n.push(["L",x.x,x.y])});for(var f=i.length-1;f>=0;f--)n.push(["L",i[f].x,i[f].y]);n.push(["Z"])}else{var u=h[0].flag;v.each(h,function(x,M){var P=x.radius;M===0?n.push(["M",x.x,x.y]):n.push(["A",P,P,0,0,x.flag,x.x,x.y])});for(var d=i.length-1;d>=0;d--){var b=i[d],_=b.radius;d===i.length-1?n.push(["M",b.x,b.y]):n.push(["A",_,_,0,0,u===1?0:1,b.x,b.y])}}return{fill:r,path:n}}}),B.exports=p},function(B,L,o){var e=o(4);B.exports={getFirstScale:function(v){var p;return e.each(v,function(c){if(c)return p=c,!1}),p}}},function(B,L,o){function e(f,u){f.prototype=Object.create(u.prototype),f.prototype.constructor=f,g(f,u)}function g(f,u){return g=Object.setPrototypeOf||function(b,_){return b.__proto__=_,b},g(f,u)}var v=o(4),p=v.DomUtil,c=o(38),h=o(287),i=o(288),r=o(286),n={scatter:h,map:i,treemap:r},s=function(f){e(u,f);function u(){return f.apply(this,arguments)||this}var d=u.prototype;return d.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return v.mix({},_,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},d.clear=function(){var _=this.get("group"),x=this.get("container");_&&!_.get("destroyed")&&_.clear(),x&&(x.innerHTML=""),f.prototype.clear.call(this)},d.destroy=function(){var _=this.get("group"),x=this.get("container");_.destroy||_.destroy(),x&&x.parentNode&&x.parentNode.removeChild(x),f.prototype.destroy.call(this)},d.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},d._dryDraw=function(){var _=this,x=_.get("items"),M=_.getLabels(),P=M.length;v.each(x,function(O,w){if(w<P){var S=M[w];_.changeLabel(S,O)}else{var I=_._addLabel(O,w);I&&(I._id=O._id,I.set("coord",O.coord))}});for(var C=P-1;C>=x.length;C--)M[C].remove();_._adjustLabels(),(_.get("labelLine")||!_.get("config"))&&_.drawLines()},d.draw=function(){this._dryDraw(),this.get("canvas").draw()},d.changeLabel=function(_,x){if(!!_)if(_.tagName){var M=this._createDom(x);_.innerHTML=M.innerHTML,this._setCustomPosition(x,_)}else _._id=x._id,_.attr("text",x.text),(_.attr("x")!==x.x||_.attr("y")!==x.y)&&(_.resetMatrix(),x.textStyle.rotate&&(_.rotateAtStart(x.textStyle.rotate),delete x.textStyle.rotate),_.attr(x))},d.show=function(){var _=this.get("group"),x=this.get("container");_&&_.show(),x&&(x.style.opacity=1)},d.hide=function(){var _=this.get("group"),x=this.get("container");_&&_.hide(),x&&(x.style.opacity=0)},d.drawLines=function(){var _=this,x=_.get("labelLine");typeof x=="boolean"&&_.set("labelLine",{});var M=_.get("lineGroup");!M||M.get("destroyed")?(M=_.get("group").addGroup({elCls:"x-line-group"}),_.set("lineGroup",M)):M.clear(),v.each(_.get("items"),function(P){_.lineToLabel(P,M)})},d.lineToLabel=function(_,x){var M=this;if(!(!M.get("config")&&!_.labelLine)){var P=_.labelLine||M.get("labelLine"),C=typeof _.capture=="undefined"?M.get("capture"):_.capture,O=P.path;if(O&&v.isFunction(P.path)&&(O=P.path(_)),!O){var w=_.start||{x:_.x-_._offset.x,y:_.y-_._offset.y};O=[["M",w.x,w.y],["L",_.x,_.y]]}var S=_.color;S||(_.textStyle&&_.textStyle.fill?S=_.textStyle.fill:S="#000");var I=x.addShape("path",{attrs:v.mix({path:O,fill:null,stroke:S},P),capture:C});I.name=M.get("name"),I._id=_._id&&_._id.replace("glabel","glabelline"),I.set("coord",M.get("coord"))}},d._adjustLabels=function(){var _=this,x=_.get("type"),M=_.getLabels(),P=_.get("shapes"),C=n[x];x==="default"||!C||C(M,P)},d.getLabels=function(){var _=this.get("container");return _?v.toArray(_.childNodes):this.get("group").get("children")},d._addLabel=function(_,x){var M=_;return this.get("config")&&(M=this._getLabelCfg(_,x)),this._createText(M)},d._getLabelCfg=function(_,x){var M=this.get("textStyle")||{},P=this.get("formatter"),C=this.get("htmlTemplate");if(!v.isObject(_)){var O=_;_={},_.text=O}v.isFunction(M)&&(M=M(_.text,_,x)),P&&(_.text=P(_.text,_,x)),C&&(_.useHtml=!0,v.isFunction(C)&&(_.text=C(_.text,_,x))),v.isNil(_.text)&&(_.text=""),_.text=_.text+"";var w=v.mix({},_,{textStyle:M},{x:_.x||0,y:_.y||0});return w},d._init=function(){if(!this.get("group")){var _=this.get("canvas").addGroup({id:"label-group"});this.set("group",_)}},d.initHtmlContainer=function(){var _=this.get("container");if(_)v.isString(_)&&(_=document.getElementById(_),_&&this.set("container",_));else{var x=this.get("containerTpl"),M=this.get("canvas").get("el").parentNode;_=p.createDom(x),M.style.position="relative",M.appendChild(_),this.set("container",_)}return _},d._createText=function(_){var x=v.deepMix({},_),M=this.get("container"),P=typeof x.capture=="undefined"?this.get("capture"):x.capture,C;if(x.useHtml||x.htmlTemplate){M||(M=this.initHtmlContainer());var O=this._createDom(x);M.appendChild(O),this._setCustomPosition(x,O)}else{var w=this.get("name"),S=x.point,I=this.get("group");delete x.point;var j=x.rotate;return x.textStyle&&(x.textStyle.rotate&&(j=x.textStyle.rotate,delete x.textStyle.rotate),x=v.mix({x:x.x,y:x.y,textAlign:x.textAlign,text:x.text},x.textStyle)),C=I.addShape("text",{attrs:x,capture:P}),j&&(Math.abs(j)>Math.PI*2&&(j=j/180*Math.PI),C.transform([["t",-x.x,-x.y],["r",j],["t",x.x,x.y]])),C.setSilent("origin",S||x),C.name=w,this.get("appendInfo")&&C.setSilent("appendInfo",this.get("appendInfo")),C}},d._createDom=function(_){var x=this.get("itemTpl"),M=v.substitute(x,{text:_.text});return p.createDom(M)},d._setCustomPosition=function(_,x){var M=_.textAlign||"left",P=_.y,C=_.x,O=p.getOuterWidth(x),w=p.getOuterHeight(x);P=P-w/2,M==="center"?C=C-O/2:M==="right"&&(C=C-O),x.style.top=parseInt(P,10)+"px",x.style.left=parseInt(C,10)+"px"},u}(c);B.exports=s},function(B,L){var o=function(){function e(){this.bitmap=[]}var g=e.prototype;return g.hasGap=function(p){for(var c=!0,h=this.bitmap,i=Math.floor(p.minX),r=Math.ceil(p.maxX),n=Math.floor(p.minY),s=Math.ceil(p.maxY)-1,f=i;f<r;f++){if(!h[f]){h[f]=[];continue}if(f===i||f===r-1){for(var u=n;u<=s;u++)if(h[f][u]){c=!1;break}}else if(h[f][n]||h[f][s]){c=!1;break}}return c},g.fillGap=function(p){for(var c=this.bitmap,h=Math.floor(p.minX),i=Math.ceil(p.maxX)-1,r=Math.floor(p.minY),n=Math.ceil(p.maxY)-1,s=h;s<=i;s++){for(var f=r;f<n;f+=8)c[s]||(c[s]=[]),c[s][f]=!0;c[s][n]=!0}for(var u=r;u<=n;u++)c[h][u]=!0,c[i][u]=!0},e}();B.exports=o},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,g(r,n)}function g(r,n){return g=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},g(r,n)}var v=o(4),p=o(38),c=o(21),h=c.FONT_FAMILY,i=function(r){e(s,r);var n=s.prototype;n.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}};function s(f){var u;return u=r.call(this,f)||this,u._init(),u.beforeRender(),u.render(),u._adjustPositionOffset(),u._bindEvents(),u}return n._init=function(){var u=this.get("group"),d=this.get("container");this.set("canvas",d.get("canvas"));var b=this.get("position");u||(u=d.addGroup({x:0-b[0],y:0-b[1]})),this.set("group",u)},n._adjustPositionOffset=function(){var u=this.get("position"),d=this.get("offset"),b=this.get("offsetX"),_=this.get("offsetY");if(!v.isArray(d)){var x=this.get("layout");d=x==="vertical"?[d,0]:[0,d]}b&&(d[0]=b),_&&(d[1]=_);var M=this.get("group").getBBox();this.move(-M.minX+u[0]+d[0],-M.minY+u[1]+d[1])},n.beforeRender=function(){var u=this.get("group"),d=u.addGroup();this.set("itemsGroup",d)},n.render=function(){this._renderTitle()},n._renderTitle=function(){var u=this.get("title"),d=this.get("titleGap");if(d=d||0,u&&u.text){var b=this.get("group"),_=b.addShape("text",{attrs:v.mix({x:0,y:0-d,fill:"#333",textBaseline:"middle",fontFamily:h},u)});_.name="legend-title",this.get("appendInfo")&&_.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",_)}},n.getCheckedCount=function(){var u=this.get("itemsGroup"),d=u.get("children"),b=v.filter(d,function(_){return _.get("checked")});return b.length},n.setItems=function(u){this.set("items",u),this.clear(),this.render()},n.addItem=function(u){var d=this.get("items");d.push(u),this.clear(),this.render()},n.clear=function(){var u=this.get("itemsGroup");u.clear();var d=this.get("group");d.clear(),this.beforeRender()},n.destroy=function(){var u=this.get("group");u&&u.destroy(),this._attrs={},this.removeAllListeners(),r.prototype.destroy.call(this)},n.getWidth=function(){var u=this.get("group").getBBox();return u.width},n.getHeight=function(){var u=this.get("group").getBBox();return u.height},n.move=function(u,d){this.get("group").move(u,d)},n.draw=function(){this.get("canvas").draw()},s}(p);B.exports=i},function(B,L,o){function e(C,O){C.prototype=Object.create(O.prototype),C.prototype.constructor=C,g(C,O)}function g(C,O){return g=Object.setPrototypeOf||function(S,I){return S.__proto__=I,S},g(C,O)}var v=o(4),p=o(144),c=o(21),h=c.FONT_FAMILY,i=v.DomUtil,r=v.Group,n="g2-legend",s="g2-legend-title",f="g2-legend-list",u="g2-legend-list-item",d="g2-legend-text",b="g2-legend-marker";function _(C,O){return C.getElementsByClassName(O)[0]}function x(C,O){var w=C.className;return v.isNil(w)||(w=w.split(" "),w.indexOf(O)>-1)?C:C.parentNode?C.parentNode.className===n?C.parentNode:x(C.parentNode,O):null}function M(C,O){var w=null,S=O instanceof r?O.get("value"):O;return v.each(C,function(I){if(I.value===S)return w=I,!1}),w}var P=function(C){e(O,C);function O(){return C.apply(this,arguments)||this}var w=O.prototype;return w.getDefaultCfg=function(){var I=C.prototype.getDefaultCfg.call(this);return v.mix({},I,{type:"category-legend",container:null,containerTpl:'<div class="'+n+'"><h4 class="'+s+'"></h4><ul class="'+f+'"></ul></div>',itemTpl:'<li class="'+u+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+b+'" style="background-color:{color};"></i><span class="'+d+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:h},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},w._init=function(){},w.beforeRender=function(){},w.render=function(){this._renderHTML()},w._bindEvents=function(){var I=this,j=this.get("legendWrapper"),N=_(j,f);this.get("hoverable")&&(N.onmousemove=function(W){return I._onMousemove(W)},N.onmouseout=function(W){return I._onMouseleave(W)}),this.get("clickable")&&(N.onclick=function(W){return I._onClick(W)})},w._onMousemove=function(I){var j=this.get("items"),N=I.target,W=N.className;if(W=W.split(" "),!(W.indexOf(n)>-1||W.indexOf(f)>-1)){var H=x(N,u),J=M(j,H.getAttribute("data-value"));J?(this.deactivate(),this.activate(H.getAttribute("data-value")),this.emit("itemhover",{item:J,currentTarget:H,checked:J.checked})):J||(this.deactivate(),this.emit("itemunhover",I))}},w._onMouseleave=function(I){this.deactivate(),this.emit("itemunhover",I)},w._onClick=function(I){var j=this,N=this.get("legendWrapper"),W=_(N,f),H=this.get("unCheckColor"),J=this.get("items"),Q=this.get("selectedMode"),ne=W.childNodes,K=I.target,ie=K.className;if(ie=ie.split(" "),!(ie.indexOf(n)>-1||ie.indexOf(f)>-1)){var de=x(K,u),we=_(de,d),Re=_(de,b),_e=M(J,de.getAttribute("data-value"));if(!!_e){var Ue=de.className,rt=de.getAttribute("data-color");if(Q==="single")_e.checked=!0,v.each(ne,function(ye){if(ye!==de){var Oe=_(ye,b);Oe.style.backgroundColor=H,ye.className=ye.className.replace("checked","unChecked"),ye.style.color=H;var ue=M(J,ye.getAttribute("data-value"));ue.checked=!1}else we&&(we.style.color=j.get("textStyle").fill),Re&&(Re.style.backgroundColor=rt),de.className=Ue.replace("unChecked","checked")});else{var Fe=Ue.indexOf("checked")!==-1,Se=0;if(v.each(ne,function(ye){ye.className.indexOf("checked")!==-1&&Se++}),!this.get("allowAllCanceled")&&Fe&&Se===1){this.emit("clicklastitem",{item:_e,currentTarget:de,checked:Q==="single"?!0:_e.checked});return}_e.checked=!_e.checked,Fe?(Re&&(Re.style.backgroundColor=H),de.className=Ue.replace("checked","unChecked"),de.style.color=H):(Re&&(Re.style.backgroundColor=rt),de.className=Ue.replace("unChecked","checked"),de.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:_e,currentTarget:de,checked:Q==="single"?!0:_e.checked})}}},w.activate=function(I){var j=this,N=this,W=N.get("items"),H=M(W,I),J=N.get("legendWrapper"),Q=_(J,f),ne=Q.childNodes;ne.forEach(function(K){var ie=_(K,b),de=M(W,K.getAttribute("data-value"));if(j.get("highlight")){if(de===H&&de.checked){ie.style.border="1px solid #333";return}}else de===H?ie.style.opacity=N.get("activeOpacity"):de.checked&&(ie.style.opacity=N.get("inactiveOpacity"))})},w.deactivate=function(){var I=this,j=this,N=j.get("legendWrapper"),W=_(N,f),H=W.childNodes;H.forEach(function(J){var Q=_(J,b);I.get("highlight")?Q.style.border="1px solid #fff":Q.style.opacity=j.get("inactiveOpacity")})},w._renderHTML=function(){var I=this,j=this.get("container"),N=this.get("title"),W=this.get("containerTpl"),H=i.createDom(W),J=_(H,s),Q=_(H,f),ne=this.get("unCheckColor"),K=v.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:h,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:h},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(j)||typeof j=="string"&&j.constructor===String){var ie=j.replace("#","");j=document.getElementById(ie),j.appendChild(H)}else{var de=this.get("position"),we={};de==="left"||de==="right"?we={maxHeight:(this.get("maxLength")||j.offsetHeight)+"px"}:we={maxWidth:(this.get("maxLength")||j.offsetWidth)+"px"},i.modifyCSS(H,v.mix({},K.CONTAINER_CLASS,we,this.get(n))),j.appendChild(H)}i.modifyCSS(Q,v.mix({},K.LIST_CLASS,this.get(f))),J&&(N&&N.text?(J.innerHTML=N.text,i.modifyCSS(J,v.mix({},K.TITLE_CLASS,this.get(s),N))):H.removeChild(J));var Re=this.get("items"),_e=this.get("itemTpl"),Ue=this.get("position"),rt=this.get("layout"),Fe=Ue==="right"||Ue==="left"||rt==="vertical"?"block":"inline-block",Se=v.mix({},K.LIST_ITEM_CLASS,{display:Fe},this.get(u)),ye=v.mix({},K.MARKER_CLASS,this.get(b));if(v.each(Re,function(Ae,pe){var be=Ae.checked,le=I._formatItemValue(Ae.value),z=Ae.marker.fill||Ae.marker.stroke,ae=be?z:ne,V;v.isFunction(_e)?V=_e(le,ae,be,pe):V=_e;var re=v.substitute(V,v.mix({},Ae,{index:pe,checked:be?"checked":"unChecked",value:le,color:ae,originColor:z,originValue:Ae.value.replace(/\"/g,"&quot;")})),te=i.createDom(re);te.style.color=I.get("textStyle").fill;var q=_(te,b),ve=_(te,d);if(i.modifyCSS(te,Se),q&&i.modifyCSS(q,ye),be||(te.style.color=ne,q&&(q.style.backgroundColor=ne)),Q.appendChild(te),I.get("abridgeText")){var Me=le,De=te.offsetWidth,ze=I.get("textStyle").fontSize;isNaN(ze)&&(ze.indexOf("pt")!==-1?ze=parseFloat(ze.substr(0,ze.length-2))*1/72*96:ze.indexOf("px")!==-1&&(ze=parseFloat(ze.substr(0,ze.length-2))));var We=ze*Me.length,He=Math.floor(De/ze);De<2*ze?Me="":De<We&&He>1&&(Me=Me.substr(0,He-1)+"..."),ve.innerText=Me,te.addEventListener("mouseover",function(){var $e=_(H.parentNode,"textTip");$e.style.display="block",$e.style.left=te.offsetLeft+te.offsetWidth+"px",$e.style.top=te.offsetTop+15+"px",$e.innerText=le}),te.addEventListener("mouseout",function(){var $e=_(H.parentNode,"textTip");$e.style.display="none"})}}),this.get("abridgeText")){var Oe=this.get("tipTpl"),ue=i.createDom(Oe),xe=this.get("tipStyle");i.modifyCSS(ue,xe),H.parentNode.appendChild(ue),ue.addEventListener("mouseover",function(){ue.style.display="none"})}this.set("legendWrapper",H)},w._adjustPositionOffset=function(){var I=this.get("autoPosition");if(I!==!1){var j=this.get("position"),N=this.get("offset"),W=this.get("offsetX"),H=this.get("offsetY");W&&(N[0]=W),H&&(N[1]=H);var J=this.get("legendWrapper");J.style.left=j[0]+"px",J.style.top=j[1]+"px",J.style.marginLeft=N[0]+"px",J.style.marginTop=N[1]+"px"}},w.getWidth=function(){return i.getOuterWidth(this.get("legendWrapper"))},w.getHeight=function(){return i.getOuterHeight(this.get("legendWrapper"))},w.move=function(I,j){/^\#/.test(this.get("container"))?C.prototype.move.call(this,I,j):(i.modifyCSS(this.get("legendWrapper"),{left:I+"px",top:j+"px"}),this.set("x",I),this.set("y",j))},w.destroy=function(){var I=this.get("legendWrapper");I&&I.parentNode&&I.parentNode.removeChild(I),C.prototype.destroy.call(this)},O}(p);B.exports=P},function(B,L,o){function e(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,g(u,d)}function g(u,d){return g=Object.setPrototypeOf||function(_,x){return _.__proto__=x,_},g(u,d)}var v=o(4),p=o(142),c=o(21),h=c.FONT_FAMILY,i=v.Event,r=v.Group;function n(u,d){var b=null,_=d instanceof r||d.name==="legendGroup"?d.get("value"):d;return v.each(u,function(x){if(x.value===_)return b=x,!1}),b}function s(u,d){return u.findBy(function(b){return b.name===d})}var f=function(u){e(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b.getDefaultCfg=function(){var x=u.prototype.getDefaultCfg.call(this);return v.mix({},x,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:h},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},b.render=function(){u.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},b._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",v.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",v.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",v.wrapBehavior(this,"_onClick"))},b._getLegendItem=function(x){var M=x.get("parent");return M&&M.name==="legendGroup"?M:null},b.activate=function(x){var M=this,P=this,C=P.get("itemsGroup"),O=C.get("children"),w=void 0;O.forEach(function(S){if(w=s(S,"legend-marker"),!!w){var I=S.get("checked");M.get("highlight")?S.get("value")===x&&I?w.attr("stroke","#333"):w.attr("stroke",null):S.get("value")===x&&w.attr("fillOpacity",P.get("activeOpacity"))}}),this.get("canvas").draw()},b.deactivate=function(){var x=this,M=this,P=M.get("itemsGroup"),C=P.get("children"),O=void 0,w=this.get("unCheckColor");C.forEach(function(S){if(O=s(S,"legend-marker"),!!O)if(x.get("highlight")){var I=O.get("oriStroke"),j=S.get("checked");I&&!j?I=w:I="",O.attr("stroke",I)}else O.attr("fillOpacity",M.get("inactiveOpacity"))}),this.get("canvas").draw()},b._onMousemove=function(x){var M=this._getLegendItem(x.currentTarget);if(M&&M.get("checked")){var P=this.get("items"),C=new i("itemhover",x,!0,!0);C.item=n(P,M),C.checked=M.get("checked"),C.currentTarget=x.currentTarget,this.deactivate(),this.activate(M.get("value")),this.emit("itemhover",C)}else this.deactivate(),this.emit("itemunhover",x);this.get("canvas").draw()},b._onMouseleave=function(x){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",x)},b._onClick=function(x){var M=this._getLegendItem(x.currentTarget),P=this.get("items");if(M&&!M.get("destroyed")){var C=M.get("checked"),O=this.get("selectedMode"),w=n(P,M),S=new i("itemclick",x,!0,!0);if(S.item=w,S.currentTarget=M,S.appendInfo=x.currentTarget.get("appendInfo"),S.checked=O==="single"?!0:!C,!this.get("allowAllCanceled")&&C&&this.getCheckedCount()===1){this.emit("clicklastitem",S);return}var I=this.get("unCheckColor"),j=this.get("textStyle").fill,N=void 0,W=void 0,H=void 0;if(O==="single"){var J=this.get("itemsGroup"),Q=J.get("children");v.each(Q,function(ne){N=s(ne,"legend-marker"),W=s(ne,"legend-text"),H=s(ne,"legend-item"),ne!==M?(N.attr("fill")&&N.attr("fill",I),N.attr("stroke")&&N.attr("stroke",I),W.attr("fill",I),N.setSilent("checked",!1),W.setSilent("checked",!1),H.setSilent("checked",!1),ne.setSilent("checked",!1)):(N.attr("fill")&&w&&w.marker&&N.attr("fill",w.marker.fill),N.attr("stroke")&&w&&w.marker&&N.attr("stroke",w.marker.stroke),W.attr("fill",j),N.setSilent("checked",!0),W.setSilent("checked",!0),H.setSilent("checked",!0),ne.setSilent("checked",!0))})}else N=s(M,"legend-marker"),W=s(M,"legend-text"),H=s(M,"legend-item"),N.attr("fill")&&w&&w.marker&&N.attr("fill",C?I:w.marker.fill),N.attr("stroke")&&w&&w.marker&&N.attr("stroke",C?I:w.marker.stroke),W.attr("fill",C?I:j),M.setSilent("checked",!C),N.setSilent("checked",!C),W.setSilent("checked",!C),H.setSilent("checked",!C);this.emit("itemclick",S)}this.get("canvas").draw()},b._renderItems=function(){var x=this,M=this.get("items");if(this.get("reversed")&&M.reverse(),v.each(M,function(w,S){x._addItem(w,S)}),this.get("highlight")){var P=this.get("itemsGroup"),C=P.get("children"),O=void 0;C.forEach(function(w){O=s(w,"legend-marker");var S=O.get("oriStroke");S||(O.attr("stroke")?O.set("oriStroke",O.attr("stroke")):O.set("oriStroke",""))})}},b._formatItemValue=function(x){var M=this.get("formatter")||this.get("itemFormatter");return M&&(x=M.call(this,x)),x},b._getNextX=function(){var x=this.get("layout"),M=this.get("itemGap"),P=this.get("itemsGroup"),C=this.get("itemWidth"),O=P.get("children"),w=0;return x==="horizontal"&&v.each(O,function(S){w+=(C||S.getBBox().width)+M}),w},b._getNextY=function(){var x=this.get("itemMarginBottom"),M=this.get("titleShape")?this.get("titleGap"):0,P=this.get("layout"),C=this.get("itemsGroup"),O=this.get("titleShape"),w=C.get("children"),S=M;return O&&(S+=O.getBBox().height),P==="vertical"&&v.each(w,function(I){S+=I.getBBox().height+x}),S},b._addItem=function(x){var M=this.get("itemsGroup"),P=this._getNextX(),C=this._getNextY(),O=this.get("unCheckColor"),w=M.addGroup({x:P,y:C,value:x.value,checked:x.checked});w.set("viewId",this.get("viewId"));var S=this.get("textStyle"),I=this.get("_wordSpaceing"),j=0;if(x.marker){var N=v.mix({},x.marker,{x:x.marker.radius+P,y:C});x.checked||(N.fill&&(N.fill=O),N.stroke&&(N.stroke=O));var W=w.addShape("marker",{type:"marker",attrs:N});W.attr("cursor","pointer"),W.name="legend-marker",j+=W.getBBox().width+I}var H=v.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:h},S,{x:j+P,y:C,text:this._formatItemValue(x.value)});x.checked||v.mix(H,{fill:O});var J=w.addShape("text",{attrs:H});J.attr("cursor","pointer"),J.name="legend-text",this.get("appendInfo")&&J.setSilent("appendInfo",this.get("appendInfo"));var Q=w.getBBox(),ne=this.get("itemWidth"),K=w.addShape("rect",{attrs:{x:P,y:C-Q.height/2,fill:"#fff",fillOpacity:0,width:ne||Q.width,height:Q.height}});return K.attr("cursor","pointer"),K.setSilent("origin",x),K.name="legend-item",this.get("appendInfo")&&K.setSilent("appendInfo",this.get("appendInfo")),w.name="legendGroup",w},b._adjustHorizontal=function(){var x=this.get("itemsGroup"),M=x.get("children"),P=this.get("maxLength"),C=this.get("itemGap"),O=this.get("itemMarginBottom"),w=this.get("titleShape")?this.get("titleGap"):0,S=0,I=0,j=void 0,N=void 0,W=void 0,H=this.get("itemWidth");x.getBBox().width>P&&v.each(M,function(J){W=J.getBBox(),j=H||W.width,N=W.height+O,P-I<j&&(S++,I=0),J.move(I,S*N+w),I+=j+C})},b._adjustVertical=function(){var x=this.get("itemsGroup"),M=this.get("titleShape"),P=x.get("children"),C=this.get("maxLength"),O=this.get("itemGap"),w=this.get("itemMarginBottom"),S=this.get("titleGap"),I=M?M.getBBox().height+S:0,j=this.get("itemWidth"),N=I,W=void 0,H=void 0,J=void 0,Q=0,ne=0;x.getBBox().height>C&&v.each(P,function(K){J=K.getBBox(),W=J.width,H=J.height,j?Q=j+O:W>Q&&(Q=W+O),C-N<H?(N=I,ne+=Q,K.move(ne,I)):K.move(ne,N),N+=H+w})},b._adjustItems=function(){var x=this.get("layout");x==="horizontal"?this._adjustHorizontal():this._adjustVertical()},b.getWidth=function(){return u.prototype.getWidth.call(this)},b.getHeight=function(){return u.prototype.getHeight.call(this)},b.move=function(x,M){u.prototype.move.call(this,x,M)},d}(p);B.exports=f},function(B,L,o){function e(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function g(_,x){_.prototype=Object.create(x.prototype),_.prototype.constructor=_,v(_,x)}function v(_,x){return v=Object.setPrototypeOf||function(P,C){return P.__proto__=C,P},v(_,x)}var p=o(52),c=o(146),h=o(147),i=o(148),r=o(81),n=o(4),s=o(21),f=s.FONT_FAMILY,u=n.DomUtil,d=n.MatrixUtil,b=function(_){g(M,_);var x=M.prototype;x.getDefaultCfg=function(){var C=_.prototype.getDefaultCfg.call(this);return n.mix({},C,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:f,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:f,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:f,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})};function M(P){var C;C=_.call(this,P)||this,n.assign(e(C),i),n.assign(e(C),h);var O=C.get("crosshairs");if(O){var w=O.type==="rect"?C.get("backPlot"):C.get("frontPlot"),S=new c(n.mix({plot:w,plotRange:C.get("plotRange"),canvas:C.get("canvas")},C.get("crosshairs")));S.hide(),C.set("crosshairGroup",S)}return C._init_(),C.get("items")&&C.render(),C}return x._init_=function(){var C=this,O=C.get("padding"),w=C.get("frontPlot"),S=w.addGroup({capture:!1});C.set("markerGroup",S);var I=w.addGroup();I.hide(),C.set("container",I);var j=I.addShape("rect",{attrs:n.mix({},C.get("boardStyle"))});C.set("board",j);var N=C.get("titleStyle");if(C.get("showTitle")){var W=I.addShape("text",{attrs:n.mix({x:O.left,y:O.top},N)});C.set("titleShape",W),W.name="tooltip-title"}var H=I.addGroup();H.move(O.left,O.top+N.lineHeight+N.padding),C.set("itemsGroup",H)},x.render=function(){var C=this;C.clear();var O=C.get("container"),w=C.get("board"),S=C.get("showTitle"),I=C.get("titleContent"),j=this.get("titleShape"),N=this.get("itemsGroup"),W=C.get("items"),H=C.get("padding");if(j&&S&&j.attr("text",I),N){var J=C.get("itemGap"),Q=0,ne=0;n.each(W,function(we){var Re=C._addItem(we);Re.move(Q,ne),N.add(Re);var _e=Re.getBBox().height;ne+=_e+J})}var K=O.getBBox(),ie=K.width+H.right,de=K.height+H.bottom;w.attr("width",ie),w.attr("height",de),C._alignToRight(ie)},x.clear=function(){var C=this.get("titleShape"),O=this.get("itemsGroup"),w=this.get("board");C.text="",O.clear(),w.attr("width",0),w.attr("height",0)},x.show=function(){var C=this.get("container");C.show();var O=this.get("crosshairGroup");O&&O.show();var w=this.get("markerGroup");w&&w.show(),_.prototype.show.call(this),this.get("canvas").draw()},x.hide=function(){var C=this.get("container");C.hide();var O=this.get("crosshairGroup");O&&O.hide();var w=this.get("markerGroup");w&&w.hide(),_.prototype.hide.call(this),this.get("canvas").draw()},x.destroy=function(){var C=this.get("container"),O=this.get("crosshairGroup");O&&O.destroy();var w=this.get("markerGroup");w&&w.remove(),_.prototype.destroy.call(this),C.remove()},x.setPosition=function(C,O,w){var S=this.get("container"),I=this.get("canvas").get("el"),j=u.getWidth(I),N=u.getHeight(I),W=S.getBBox(),H=W.width,J=W.height,Q=C,ne=O,K;if(this.get("position")){var ie=W.width,de=W.height;K=this._calcTooltipPosition(C,O,this.get("position"),ie,de,w),C=K[0],O=K[1]}else K=this._constraintPositionInBoundary(C,O,H,J,j,N),C=K[0],O=K[1];if(this.get("inPlot")){var we=this.get("plotRange");K=this._constraintPositionInPlot(C,O,H,J,we,this.get("enterable")),C=K[0],O=K[1]}var Re=this.get("markerItems");n.isEmpty(Re)||(Q=Re[0].x,ne=Re[0].y);var _e=[1,0,0,0,1,0,0,0,1],Ue=d.transform(_e,[["t",C,O]]);S.stopAnimate(),S.animate({matrix:Ue},this.get("animationDuration"));var rt=this.get("crosshairGroup");if(rt){var Fe=this.get("items");rt.setPosition(Q,ne,Fe)}_.prototype.setPosition.call(this,C,O)},x._addItem=function(C){var O=new p.Group,w=this.get("markerStyle").radius;if(C.marker){var S=n.mix({},C.marker,{x:C.marker.radius/2,y:0,symbol:C.marker.activeSymbol||C.marker.symbol});O.addShape("marker",{attrs:S}),w=C.marker.radius}var I=this.get("nameStyle");O.addShape("text",{attrs:n.mix({x:w+I.padding,y:0,text:C.name},I)});var j=this.get("valueStyle");return O.addShape("text",{attrs:n.mix({x:O.getBBox().width+j.padding,y:0,text:C.value},j)}),O},x._alignToRight=function(C){var O=this,w=this.get("itemsGroup"),S=w.get("children");n.each(S,function(I){var j=I.get("children"),N=j[2],W=N.getBBox().width,H=C-W-O.get("padding").right*2;N.attr("x",H)})},M}(r);B.exports=b},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(38),p=o(4),c=function(h){e(r,h);var i=r.prototype;i.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return p.mix({},s,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})};function r(n){var s;return s=h.call(this,n)||this,s._init_(),s.render(),s}return i._init_=function(){var s=this,f=s.get("plot"),u;s.type==="rect"?u=f.addGroup({zIndex:0}):u=f.addGroup(),this.set("container",u)},i._addLineShape=function(s,f){var u=this.get("container"),d=u.addShape("line",{capture:!1,attrs:s});return this.set("crossLineShape"+f,d),d},i._renderHorizontalLine=function(s,f){var u=p.mix(this.get("lineStyle"),this.get("style")),d=p.mix({x1:f?f.bl.x:s.get("width"),y1:0,x2:f?f.br.x:0,y2:0},u);this._addLineShape(d,"X")},i._renderVerticalLine=function(s,f){var u=p.mix(this.get("lineStyle"),this.get("style")),d=p.mix({x1:0,y1:f?f.bl.y:s.get("height"),x2:0,y2:f?f.tl.y:0},u);this._addLineShape(d,"Y")},i._renderBackground=function(s,f){var u=p.mix(this.get("rectStyle"),this.get("style")),d=this.get("container"),b=p.mix({x:f?f.tl.x:0,y:f?f.tl.y:s.get("height"),width:f?f.br.x-f.bl.x:s.get("width"),height:f?Math.abs(f.tl.y-f.bl.y):s.get("height")},u),_=d.addShape("rect",{attrs:b,capture:!1});return this.set("crosshairsRectShape",_),_},i._updateRectShape=function(s){var f,u=this.get("crosshairsRectShape"),d=this.get("isTransposed"),b=s[0],_=s[s.length-1],x=d?"y":"x",M=d?"height":"width",P=b[x];if(s.length>1&&b[x]>_[x]&&(P=_[x]),this.get("width"))u.attr(x,P-this.get("crosshairs").width/2),u.attr(M,this.get("width"));else if(p.isArray(b.point[x])&&!b.size){var C=b.point[x][1]-b.point[x][0];u.attr(x,b.point[x][0]),u.attr(M,C)}else f=3*b.size/4,u.attr(x,P-f),s.length===1?u.attr(M,3*b.size/2):u.attr(M,Math.abs(_[x]-b[x])+2*f)},i.render=function(){var s=this.get("canvas"),f=this.get("plotRange"),u=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(s,f);break;case"y":this._renderVerticalLine(s,f);break;case"cross":this._renderHorizontalLine(s,f),this._renderVerticalLine(s,f);break;case"rect":this._renderBackground(s,f);break;default:u?this._renderHorizontalLine(s,f):this._renderVerticalLine(s,f)}},i.show=function(){var s=this.get("container");h.prototype.show.call(this),s.show()},i.hide=function(){var s=this.get("container");h.prototype.hide.call(this),s.hide()},i.clear=function(){var s=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),h.prototype.clear.call(this),s.clear()},i.destroy=function(){var s=this.get("container");h.prototype.destroy.call(this),s.remove()},i.setPosition=function(s,f,u){var d=this.get("crossLineShapeX"),b=this.get("crossLineShapeY"),_=this.get("crosshairsRectShape");b&&!b.get("destroyed")&&b.move(s,0),d&&!d.get("destroyed")&&d.move(0,f),_&&!_.get("destroyed")&&this._updateRectShape(u)},r}(v);B.exports=c},function(B,L,o){var e=o(4),g={setMarkers:function(p,c){var h=this,i=h.get("markerGroup"),r=h.get("frontPlot");i?i.clear():(i=r.addGroup({zIndex:1,capture:!1}),h.set("markerGroup",i)),e.each(p,function(n){var s=e.mix({fill:n.color,symbol:"circle",shadowColor:n.color},c,{x:n.x,y:n.y});n.marker&&n.marker.activeSymbol&&(s.symbol=n.marker.activeSymbol),i.addShape("marker",{color:n.color,attrs:s})}),this.set("markerItems",p)},clearMarkers:function(){var p=this.get("markerGroup");p&&p.clear()}};B.exports=g},function(B,L){var o=20,e={_calcTooltipPosition:function(v,p,c,h,i,r){var n=0,s=0,f=20;if(r){var u=r.getBBox();n=u.width,s=u.height,v=u.x,p=u.y,f=5}switch(c){case"inside":v=v+n/2-h/2,p=p+s/2-i/2;break;case"top":v=v+n/2-h/2,p=p-i-f;break;case"left":v=v-h-f,p=p+s/2-i/2;break;case"right":v=v+n+f,p=p+s/2-i/2;break;case"bottom":default:v=v+n/2-h/2,p=p+s+f;break}return[v,p]},_constraintPositionInBoundary:function(v,p,c,h,i,r){return v+c+o>i?(v-=c+o,v=v<0?0:v):v+o<0?v=o:v+=o,p+h+o>r?(p-=h+o,p=p<0?0:p):p+o<0?p=o:p+=o,[v,p]},_constraintPositionInPlot:function(v,p,c,h,i,r){return v+c>i.tr.x&&(r?v-=c+1:v-=c+2*o),v<i.tl.x&&(v=i.tl.x),r||(p+h>i.bl.y&&(p-=h+2*o),p<i.tl.y&&(p=i.tl.y)),[v,p]}};B.exports=e},function(B,L,o){var e=o(0),g=o(303),v={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},p={line:{appear:function(){return g.appear.clipIn},enter:function(){return g.enter.clipIn},leave:function(){return g.leave.lineWidthOut}},path:{appear:function(){return g.appear.clipIn},enter:function(){return g.enter.clipIn},leave:function(){return g.leave.lineWidthOut}},area:{appear:function(){return g.appear.clipIn},enter:function(){return g.enter.fadeIn},leave:function(){return g.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return g.appear.zoomIn},enter:function(){return g.enter.zoomIn},leave:function(){return g.leave.zoomOut}},edge:{appear:function(){return g.appear.pathIn},enter:function(){return g.enter.pathIn},leave:function(){return g.leave.pathOut}},interval:{appear:function(h){var i;return h.isPolar?(i=g.appear.zoomIn,(h.isTransposed||h.type==="theta")&&(i=g.appear.fanIn)):h.isRect?i=h.isTransposed?g.appear.scaleInX:g.appear.scaleInY:i=g.appear.zoomIn,i},enter:function(h){return h.isRect||h.isTransposed||h.type==="theta"?g.enter.fadeIn:g.enter.zoomIn},leave:function(){return g.leave.fadeOut},update:function(h){if(h.type==="theta")return g.update.fanIn}},point:{appear:function(){return g.appear.zoomIn},enter:function(){return g.enter.zoomIn},leave:function(){return g.leave.zoomOut}},schema:{appear:function(){return g.appear.clipIn},enter:function(){return g.enter.clipIn},leave:function(){return g.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return g.appear.fadeIn},enter:function(){return g.enter.fadeIn},leave:function(){return g.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return g.appear.fadeIn},leave:function(){return g.leave.fadeOut},update:function(h){if(h.isPolar)return g.appear.fadeIn}},"axis-ticks":{enter:function(){return g.appear.fadeIn},leave:function(){return g.leave.fadeOut},update:function(h){if(h.isPolar)return g.appear.fadeIn}},"axis-grid":{enter:function(){return g.appear.fadeIn},leave:function(){return g.leave.fadeOut},update:function(h){if(h.isPolar)return g.appear.fadeIn}},"axis-grid-rect":{enter:function(){return g.appear.fadeIn},leave:function(){return g.leave.fadeOut},update:function(){return g.leave.fadeIn}},labelLine:{appear:function(){return g.appear.pathIn},enter:function(){return g.enter.pathIn},leave:function(){return g.leave.pathOut}}};p.Action=g,p.defaultCfg=v,p.getAnimation=function(c,h,i){var r=this[c];if(r){var n=r[i];if(e.isFunction(n))return n(h)}return!1},p.getAnimateCfg=function(c,h){var i=v[h];return this[c]&&this[c].cfg&&this[c].cfg[h]?e.deepMix({},i,this[c].cfg[h]):i},p.registerAnimation=function(c,h,i){this.Action[c]||(this.Action[c]={}),this.Action[c][h]=i},B.exports=p},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(135),p=o(0),c=function(h){e(r,h);var i=r.prototype;i.getDefaultCfg=function(){return{}};function r(n){var s;s=h.call(this)||this;var f={visible:!0},u=s.getDefaultCfg();return s._attrs=f,p.assign(f,u,n),s}return i.get=function(s){return this._attrs[s]},i.set=function(s,f){this._attrs[s]=f},i.show=function(){var s=this.get("visible");s||(this.set("visible",!0),this.changeVisible(!0))},i.hide=function(){var s=this.get("visible");s&&(this.set("visible",!1),this.changeVisible(!1))},i.changeVisible=function(){},i.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},r}(v);B.exports=c},function(B,L,o){B.exports={Scale:o(310),Coord:o(306),Axis:o(305),Guide:o(308),Legend:o(309),Tooltip:o(311),Event:o(307)}},function(B,L,o){var e=o(18),g=o(0),v=o(153);function p(h,i,r){r===void 0&&(r=1);var n=[h.x,h.y,r];return g.vec3.transformMat3(n,n,i),{x:n[0],y:n[1]}}function c(h){var i=h.getBBox(),r={x:i.minX,y:i.minY},n={x:i.maxX,y:i.maxY},s=h.attr("matrix");return r=p(r,s),n=p(n,s),{minX:r.x,minY:r.y,maxX:n.x,maxY:n.y}}B.exports=function(i,r){var n=r;return g.each(i.get("children"),function(s){s instanceof e.Group&&g.each(s.get("children"),function(f){if(f instanceof e.Group&&f.get("children").length||f instanceof e.Path)n=v(n,f.getBBox());else if(f instanceof e.Text){var u=c(f);n=v(n,u)}})}),n}},function(B,L){B.exports=function(e,g){return{minX:Math.min(e.minX,g.minX),minY:Math.min(e.minY,g.minY),maxX:Math.max(e.maxX,g.maxX),maxY:Math.max(e.maxY,g.maxY)}}},function(B,L){B.exports=function(e){return{minX:e.tl.x,minY:e.tl.y,maxX:e.br.x,maxY:e.br.y}}},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,g(c,h)}function g(c,h){return g=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},g(c,h)}var v=o(51),p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i.getDefaultCfg=function(){var n=c.prototype.getDefaultCfg.call(this);return n.type="list",n.cols=null,n},i.generateFacets=function(n){var s=this,f=s.fields,u=f[0];if(!u)throw"Please specify for the field for facet!";var d=s.getFieldValues(u,n),b=d.length,_=s.cols||b,x=parseInt((b+_-1)/_),M=[];return d.forEach(function(P,C){var O=parseInt(C/_),w=C%_,S=[{field:u,value:P,values:d}],I=s.getFilter(S),j=n.filter(I),N={type:s.type,count:b,colValue:P,colField:u,rowField:null,rowValue:P,colIndex:w,rowIndex:O,cols:_,rows:x,data:j,region:s.getRegion(x,_,w,O)};M.push(N)}),M},i.setXAxis=function(n,s,f){f.rowIndex!==f.rows-1&&f.cols*f.rowIndex+f.colIndex+1+f.cols<=f.count&&(s[n].label=null,s[n].title=null)},i.setYAxis=function(n,s,f){f.colIndex!==0&&(s[n].title=null,s[n].label=null)},h}(v);B.exports=p},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,g(c,h)}function g(c,h){return g=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},g(c,h)}var v=o(51),p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i.getDefaultCfg=function(){var n=c.prototype.getDefaultCfg.call(this);return n.type="rect",n},i.generateFacets=function(n){var s=this,f=s.fields,u=[],d=1,b=1,_=f[0],x=f[1],M=[""],P=[""];return _&&(M=s.getFieldValues(_,n),b=M.length),x&&(P=s.getFieldValues(x,n),d=P.length),M.forEach(function(C,O){P.forEach(function(w,S){var I=[{field:_,value:C,values:M},{field:x,value:w,values:P}],j=s.getFilter(I),N=n.filter(j),W={type:s.type,colValue:C,rowValue:w,colField:_,rowField:x,colIndex:O,rowIndex:S,cols:b,rows:d,data:N,region:s.getRegion(d,b,O,S)};u.push(W)})}),u},i.setXAxis=function(n,s,f){f.rowIndex!==f.rows-1?(s[n].title=null,s[n].label=null):f.colIndex!==parseInt((f.cols-1)/2)&&(s[n].title=null)},i.setYAxis=function(n,s,f){f.colIndex!==0?(s[n].title=null,s[n].label=null):f.rowIndex!==parseInt((f.rows-1)/2)&&(s[n].title=null)},i.renderTitle=function(n,s){s.rowIndex===0&&this.drawColTitle(n,s),s.colIndex===s.cols-1&&this.drawRowTitle(n,s)},h}(v);B.exports=p},function(B,L,o){var e=o(82),g=o(27),v=o(0),p=function c(h){c.superclass.constructor.call(this,h)};v.extend(p,e),v.augment(p,{getPointRauis:function(h,i){return g.getPointRadius(h,i)},getCirclePoint:function(h,i,r){var n=this,s=n.get("coord"),f=s.getCenter(),u=n._isEmitLabels(),d=n.getPointRauis(s,r);if(d===0)return null;if(s.isTransposed&&d>i&&!u){var b=Math.asin(i/(2*d));h=h+b*2}else d=d+i;return{x:f.x+d*Math.cos(h),y:f.y+d*Math.sin(h),angle:h,r:d}},getArcPoint:function(h,i){var r=this,n;return i=i||0,v.isArray(h.x)||v.isArray(h.y)?n={x:v.isArray(h.x)?h.x[i]:h.x,y:v.isArray(h.y)?h.y[i]:h.y}:n=h,r.transLabelPoint(n),n},getPointAngle:function(h){var i=this,r=i.get("coord");return g.getPointAngle(r,h)},getMiddlePoint:function(h){var i=this,r=i.get("coord"),n=h.length,s={x:0,y:0};return v.each(h,function(f){s.x+=f.x,s.y+=f.y}),s.x/=n,s.y/=n,s=r.convert(s),s},_isToMiddle:function(h){return h.x.length>2},getLabelPoint:function(h,i,r){var n=this,s=h.text[r],f=1,u;n._isToMiddle(i)?u=n.getMiddlePoint(i.points):(h.text.length===1&&r===0?r=1:r===0&&(f=-1),u=n.getArcPoint(i,r));var d=n.getDefaultOffset(h);d=d*f;var b=n.getPointAngle(u),_=n.getCirclePoint(b,d,u);if(_?(_.text=s,_.angle=b,_.color=i.color):_={text:""},h.autoRotate||typeof h.autoRotate=="undefined"){var x=_.textStyle?_.textStyle.rotate:null;x||(x=_.rotate||n.getLabelRotate(b,d,i)),_.rotate=x}return _.start={x:u.x,y:u.y},_},_isEmitLabels:function(){var h=this.get("label");return h.labelEmit},getLabelRotate:function(h){var i=this,r;return r=h*180/Math.PI,r+=90,i._isEmitLabels()&&(r-=90),r&&(r>90?r=r-180:r<-90&&(r=r+180)),r/180*Math.PI},getLabelAlign:function(h){var i=this,r=i.get("coord"),n;if(i._isEmitLabels())h.angle<=Math.PI/2&&h.angle>-Math.PI/2?n="left":n="right";else if(!r.isTransposed)n="center";else{var s=r.getCenter(),f=i.getDefaultOffset(h);Math.abs(h.x-s.x)<1?n="center":h.angle>Math.PI||h.angle<=0?f>0?n="left":n="right":f>0?n="right":n="left"}return n}}),B.exports=p},function(B,L,o){var e=o(0),g=o(6);B.exports={splitData:function(p){var c=this.get("viewTheme")||g;if(!p.length)return[];var h=[],i=[],r=this.getYScale(),n=r.field,s;return e.each(p,function(f){s=f._origin?f._origin[n]:f[n],c.connectNulls?e.isNil(s)||i.push(f):e.isArray(s)&&e.isNil(s[0])||e.isNil(s)?i.length&&(h.push(i),i=[]):i.push(f)}),i.length&&h.push(i),h}}},function(B,L){B.exports={toFront:function(e){var g=e.get("parent"),v=g.get("children").indexOf(e);e.set("_originIndex",v),e.toFront()},resetZIndex:function(e){var g=e.get("parent"),v=e.get("_originIndex"),p=g.get("children"),c=p.indexOf(e);v>=0&&v!==c&&(p.splice(c,1),p.splice(v,0,e))}}},function(B,L,o){function e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function g(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,v(r,n)}function v(r,n){return v=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},v(r,n)}var p=o(12),c=o(158),h=o(0),i=function(r){g(s,r);var n=s.prototype;n.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return u.type="path",u.shapeType="line",u};function s(f){var u;return u=r.call(this,f)||this,h.assign(e(u),c),u}return n.getDrawCfg=function(u){var d=r.prototype.getDrawCfg.call(this,u);return d.isStack=this.hasStack(),d},n.draw=function(u,d,b,_){var x=this,M=this.splitData(u),P=this.getDrawCfg(u[0]);x._applyViewThemeShapeStyle(P,P.shape,b),P.origin=u,h.each(M,function(C,O){if(!h.isEmpty(C)){P.splitedIndex=O,P.points=C;var w=b.drawShape(P.shape,P,d);x.appendShapeInfo(w,_+O)}})},s}(p);p.Path=i,B.exports=i},function(B,L){var o,e,g="#1890FF",v=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],p=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],c=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],h=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],i=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],r='BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',n="g2-tooltip",s="g2-tooltip-title",f="g2-tooltip-list",u="g2-tooltip-list-item",d="g2-tooltip-marker",b="g2-tooltip-value",_="g2-legend",x="g2-legend-title",M="g2-legend-list",P="g2-legend-list-item",C="g2-legend-marker",O={defaultColor:g,plotCfg:{padding:[20,20,95,80]},fontFamily:r,defaultLegendPosition:"bottom",colors:v,colors_16:p,colors_24:c,colors_pie:h,colors_pie_16:i,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:r},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:r}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:r}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:r}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:r}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:r}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:r}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:r}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:r}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:r},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:r},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:r},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:r},unCheckColor:"#bfbfbf"},html:(o={},o[""+_]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:r,lineHeight:"20px",color:"#8C8C8C"},o[""+x]={marginBottom:"4px"},o[""+M]={listStyleType:"none",margin:0,padding:0},o[""+P]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},o[""+C]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},o),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:r},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(e={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},e[""+n]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:r,lineHeight:"20px",padding:"10px 10px 6px 10px"},e[""+s]={marginBottom:"4px"},e[""+f]={margin:0,listStyleType:"none",padding:0},e[""+u]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},e[""+d]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},e[""+b]={display:"inline-block",float:"right",marginLeft:"30px"},e),tooltipMarker:{symbol:function(S,I,j){return[["M",S,I],["m",-j,0],["a",j,j,0,1,0,j*2,0],["a",j,j,0,1,0,-j*2,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:g,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:g,radius:3},interval:{lineWidth:0,fill:g,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:g,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:g,fillOpacity:.6},polygon:{lineWidth:0,fill:g,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:g,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:g,fillOpacity:0,lineWidth:2},line:{stroke:g,lineWidth:2,fill:null},edge:{stroke:g,lineWidth:1,fill:null},schema:{stroke:g,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:r,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:r}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};B.exports=O},function(B,L,o){var e={default:o(161),dark:o(360)};B.exports=e},function(B,L,o){var e=o(2),g=o(363),v=o(366),p=o(362),c=o(135),h=function(r){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},e.assign(this._cfg,this.getDefaultCfg(),r),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},e.augment(h,g,v,c,p,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(r,n){return r==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(n),r==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(n),this._cfg[r]=n,this},setSilent:function(r,n){this._cfg[r]=n},get:function(r){return this._cfg[r]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(r,n){var s=this._cfg,f=s.parent,u=s.el;return f&&e.remove(f.get("children"),this),u&&(n?f&&f._cfg.tobeRemoved.push(u):u.parentNode.removeChild(u)),(r||r===void 0)&&this.destroy(),this},destroy:function(){var r=this.get("destroyed");r||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var r=this._cfg,n=r.parent;if(!!n){var s=n._cfg.children,f=r.el,u=s.indexOf(this);s.splice(u,1),s.push(this),f&&(f.parentNode.removeChild(f),r.el=null)}},toBack:function(){var r=this._cfg,n=r.parent;if(!!n){var s=n._cfg.children,f=r.el,u=s.indexOf(this);if(s.splice(u,1),s.unshift(this),f){var d=f.parentNode;d.removeChild(f),d.insertBefore(f,d.firstChild)}}},_beforeSetZIndex:function(r){var n=this._cfg.parent;this._cfg.zIndex=r,e.isNil(n)||n.sort();var s=this._cfg.el;if(s){var f=n._cfg.children,u=f.indexOf(this),d=s.parentNode;d.removeChild(s),u===f.length-1?d.appendChild(s):d.insertBefore(s,d.childNodes[u])}return r},_setAttrs:function(r){return this.attr(r),r},setZIndex:function(r){return this._cfg.zIndex=r,this._beforeSetZIndex(r)},clone:function(){return e.clone(this)},getBBox:function(){}}),B.exports=h},function(B,L,o){var e=o(2),g=o(163),v=o(380),p={},c="_INDEX";function h(s){return function(f,u){var d=s(f,u);return d===0?f[c]-u[c]:d}}function i(s,f,u){for(var d,b=s.length-1;b>=0;b--){var _=s[b];if(_._cfg.visible&&_._cfg.capture&&(_.isGroup?d=_.getShape(f,u):_.isHit(f,u)&&(d=_)),d)break}return d}var r=function s(f){s.superclass.constructor.call(this,f),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function n(s){if(!(s._cfg||s===r)){var f=s.superclass.constructor;f&&!f._cfg&&n(f),s._cfg={},e.merge(s._cfg,f._cfg),e.merge(s._cfg,s.CFG)}}e.extend(r,g),e.augment(r,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return n(this.constructor),e.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(f,u){var d=this.get("canvas");u=u||{};var b=p[f];if(b||(b=e.upperFirst(f),p[f]=b),u.attrs&&d){var _=u.attrs;if(f==="text"){var x=d.get("fontFamily");x&&(_.fontFamily=_.fontFamily?_.fontFamily:x)}}u.canvas=d,u.type=f;var M=new v[b](u);return this.add(M),M},addGroup:function(f,u){var d=this.get("canvas"),b;if(u=e.merge({},u),e.isFunction(f))u?(u.canvas=d,u.parent=this,b=new f(u)):b=new f({canvas:d,parent:this}),this.add(b);else if(e.isObject(f))f.canvas=d,b=new r(f),this.add(b);else if(f===void 0)b=new r,this.add(b);else return!1;return b},renderBack:function(f,u){var d=this.get("backShape"),b=this.getBBox();return e.merge(u,{x:b.minX-f[3],y:b.minY-f[0],width:b.width+f[1]+f[3],height:b.height+f[0]+f[2]}),d?d.attr(u):d=this.addShape("rect",{zIndex:-1,attrs:u}),this.set("backShape",d),this.sort(),d},removeChild:function(f,u){if(arguments.length>=2)this.contain(f)&&f.remove(u);else{if(arguments.length===1)if(e.isBoolean(f))u=f;else return this.contain(f)&&f.remove(!0),this;arguments.length===0&&(u=!0),r.superclass.remove.call(this,u)}return this},add:function(f){var u=this,d=u.get("children");if(e.isArray(f))e.each(f,function(x){var M=x.get("parent");M&&M.removeChild(x,!1),u._setCfgProperty(x)}),u._cfg.children=d.concat(f);else{var b=f,_=b.get("parent");_&&_.removeChild(b,!1),u._setCfgProperty(b),d.push(b)}return u},_setCfgProperty:function(f){var u=this._cfg;f.set("parent",this),f.set("canvas",u.canvas),u.timeline&&f.set("timeline",u.timeline)},contain:function(f){var u=this.get("children");return u.indexOf(f)>-1},getChildByIndex:function(f){var u=this.get("children");return u[f]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var f=this.get("children").length-1;return this.getChildByIndex(f)},getBBox:function(){var f=this,u=Infinity,d=-Infinity,b=Infinity,_=-Infinity,x=f.get("children");x.length>0?e.each(x,function(P){if(P.get("visible")){if(P.isGroup&&P.get("children").length===0)return;var C=P.getBBox();if(!C)return!0;var O=[C.minX,C.minY,1],w=[C.minX,C.maxY,1],S=[C.maxX,C.minY,1],I=[C.maxX,C.maxY,1];P.apply(O),P.apply(w),P.apply(S),P.apply(I);var j=Math.min(O[0],w[0],S[0],I[0]),N=Math.max(O[0],w[0],S[0],I[0]),W=Math.min(O[1],w[1],S[1],I[1]),H=Math.max(O[1],w[1],S[1],I[1]);j<u&&(u=j),N>d&&(d=N),W<b&&(b=W),H>_&&(_=H)}}):(u=0,d=0,b=0,_=0);var M={minX:u,minY:b,maxX:d,maxY:_};return M.x=M.minX,M.y=M.minY,M.width=M.maxX-M.minX,M.height=M.maxY-M.minY,M},getCount:function(){return this.get("children").length},sort:function(){var f=this.get("children");return e.each(f,function(u,d){return u[c]=d,u}),f.sort(h(function(u,d){return u.get("zIndex")-d.get("zIndex")})),this},findById:function(f){return this.find(function(u){return u.get("id")===f})},find:function(f){if(e.isString(f))return this.findById(f);var u=this.get("children"),d=null;return e.each(u,function(b){if(f(b)?d=b:b.find&&(d=b.find(f)),d)return!1}),d},findAll:function(f){var u=this.get("children"),d=[],b=[];return e.each(u,function(_){f(_)&&d.push(_),_.findAllBy&&(b=_.findAllBy(f),d=d.concat(b))}),d},findBy:function(f){var u=this.get("children"),d=null;return e.each(u,function(b){if(f(b)?d=b:b.findBy&&(d=b.findBy(f)),d)return!1}),d},findAllBy:function(f){var u=this.get("children"),d=[],b=[];return e.each(u,function(_){f(_)&&d.push(_),_.findAllBy&&(b=_.findAllBy(f),d=d.concat(b))}),d},getShape:function(f,u){var d=this,b=d._attrs.clip,_=d._cfg.children,x;if(b){var M=[f,u,1];b.invert(M,d.get("canvas")),b.isPointInPath(M[0],M[1])&&(x=i(_,f,u))}else x=i(_,f,u);return x},clearTotalMatrix:function(){var f=this.get("totalMatrix");if(f){this.setSilent("totalMatrix",null);for(var u=this._cfg.children,d=0;d<u.length;d++){var b=u[d];b.clearTotalMatrix()}}},clear:function(f){for(var u=this._cfg.children,d=u.length-1;d>=0;d--)u[d].remove(!0,f);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),r.superclass.destroy.call(this))},clone:function(){var f=this,u=f._cfg.children,d=new r;return e.each(u,function(b){d.add(b.clone())}),d}}),B.exports=r},function(B,L,o){var e=o(2),g=function(p,c,h,i){this.type=p,this.target=null,this.currentTarget=null,this.bubbles=h,this.cancelable=i,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=c};e.augment(g,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return e.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),B.exports=g},function(B,L,o){var e=o(2),g=o(8),v=o(53),p=o(55);function c(r,n,s){return r+n*Math.cos(s)}function h(r,n,s){return r+n*Math.sin(s)}var i=function r(n){r.superclass.constructor.call(this,n)};i.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},e.extend(i,g),e.augment(i,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,s=n.x,f=n.y,u=n.r,d=n.startAngle,b=n.endAngle,_=n.clockwise,x=this.getHitLineWidth(),M=x/2,P=v.box(s,f,u,d,b,_);return P.minX-=M,P.minY-=M,P.maxX+=M,P.maxY+=M,P},getStartTangent:function(){var n=this._attrs,s=n.x,f=n.y,u=n.startAngle,d=n.r,b=n.clockwise,_=Math.PI/180;b&&(_*=-1);var x=[],M=c(s,d,u+_),P=h(f,d,u+_),C=c(s,d,u),O=h(f,d,u);return x.push([M,P]),x.push([C,O]),x},getEndTangent:function(){var n=this._attrs,s=n.x,f=n.y,u=n.endAngle,d=n.r,b=n.clockwise,_=Math.PI/180,x=[];b&&(_*=-1);var M=c(s,d,u+_),P=h(f,d,u+_),C=c(s,d,u),O=h(f,d,u);return x.push([C,O]),x.push([M,P]),x},createPath:function(n){var s=this._attrs,f=s.x,u=s.y,d=s.r,b=s.startAngle,_=s.endAngle,x=s.clockwise;n=n||self.get("context"),n.beginPath(),n.arc(f,u,d,b,_,x)},afterPath:function(n){var s=this._attrs;if(n=n||this.get("context"),s.startArrow){var f=this.getStartTangent();p.addStartArrow(n,s,f[0][0],f[0][1],f[1][0],f[1][1])}if(s.endArrow){var u=this.getEndTangent();p.addEndArrow(n,s,u[0][0],u[0][1],u[1][0],u[1][1])}}}),B.exports=i},function(B,L,o){var e=o(2),g=o(8),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,r:0,lineWidth:1},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var c=this._attrs,h=c.x,i=c.y,r=c.r,n=this.getHitLineWidth(),s=n/2+r;return{minX:h-s,minY:i-s,maxX:h+s,maxY:i+s}},createPath:function(c){var h=this._attrs,i=h.x,r=h.y,n=h.r;c.beginPath(),c.arc(i,r,n,0,Math.PI*2,!1),c.closePath()}}),B.exports=v},function(B,L,o){var e=o(2),g=o(8),v=function p(c){p.superclass.constructor.call(this,c)};e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var c=this,h=c._attrs,i=h.x,r=h.y,n=h.width,s=h.height,f=this.getHitLineWidth(),u=f/2;return{minX:i-u,minY:r-u,maxX:i+n+u,maxY:r+s+u}}}),B.exports=v},function(B,L,o){var e=o(2),g=o(8),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var c=this._attrs,h=c.x,i=c.y,r=c.rx,n=c.ry,s=this.getHitLineWidth(),f=r+s/2,u=n+s/2;return{minX:h-f,minY:i-u,maxX:h+f,maxY:i+u}},createPath:function(c){var h=this._attrs,i=h.x,r=h.y,n=h.rx,s=h.ry;c=c||self.get("context");var f=n>s?n:s,u=n>s?1:n/s,d=n>s?s/n:1,b=[1,0,0,0,1,0,0,0,1];e.mat3.scale(b,b,[u,d]),e.mat3.translate(b,b,[i,r]),c.beginPath(),c.save(),c.transform(b[0],b[1],b[3],b[4],b[6],b[7]),c.arc(0,0,f,0,Math.PI*2),c.restore(),c.closePath()}}),B.exports=v},function(B,L,o){var e=o(2),g=o(8),v=o(53),p=function c(h){c.superclass.constructor.call(this,h)};p.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},e.extend(p,g),e.augment(p,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var h=this,i=h._attrs,r=i.x,n=i.y,s=i.rs,f=i.re,u=i.startAngle,d=i.endAngle,b=i.clockwise,_=this.getHitLineWidth(),x=v.box(r,n,s,u,d,b),M=v.box(r,n,f,u,d,b),P=Math.min(x.minX,M.minX),C=Math.min(x.minY,M.minY),O=Math.max(x.maxX,M.maxX),w=Math.max(x.maxY,M.maxY),S=_/2;return{minX:P-S,minY:C-S,maxX:O+S,maxY:w+S}},createPath:function(h){var i=this._attrs,r=i.x,n=i.y,s=i.rs,f=i.re,u=i.startAngle,d=i.endAngle,b=i.clockwise,_={x:Math.cos(u)*s+r,y:Math.sin(u)*s+n},x={x:Math.cos(u)*f+r,y:Math.sin(u)*f+n},M={x:Math.cos(d)*s+r,y:Math.sin(d)*s+n};h=h||self.get("context"),h.beginPath(),h.moveTo(_.x,_.y),h.lineTo(x.x,x.y),h.arc(r,n,f,u,d,b),h.lineTo(M.x,M.y),h.arc(r,n,s,d,u,!b),h.closePath()}}),B.exports=p},function(B,L,o){var e=o(2),g=o(8),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},e.extend(v,g),e.augment(v,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var c=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==c.img)&&this._setAttrImg();var h=c.x,i=c.y,r=c.width,n=c.height;return{minX:h,minY:i,maxX:h+r,maxY:i+n}},_beforeSetLoading:function(c){var h=this.get("canvas");return c===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,h.draw()),c},_setAttrImg:function(){var c=this,h=c._attrs,i=h.img;if(e.isString(i)){var r=new Image;r.onload=function(){if(c.get("destroyed"))return!1;c.attr("imgSrc",i),c.attr("img",r);var n=c.get("callback");n&&n.call(c),c.set("loading",!1)},r.src=i,r.crossOrigin="Anonymous",c.set("loading",!0)}else return i instanceof Image?(h.width||c.attr("width",i.width),h.height||c.attr("height",i.height),i):i instanceof HTMLElement&&e.isString(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"?(h.width||c.attr("width",Number(i.getAttribute("width"))),h.height||c.attr("height",Number(i.getAttribute("height"))),i):i instanceof ImageData?(h.width||c.attr("width",i.width),h.height||c.attr("height",i.height),i):null},drawInner:function(c){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(c),this._cfg.hasUpdate=!1},_drawImage:function(c){var h=this._attrs,i=h.x,r=h.y,n=h.img,s=h.width,f=h.height,u=h.sx,d=h.sy,b=h.swidth,_=h.sheight;this.set("toDraw",!1);var x=n;if(x instanceof ImageData&&(x=new Image,x.src=n),x instanceof Image||x instanceof HTMLElement&&e.isString(x.nodeName)&&x.nodeName.toUpperCase()==="CANVAS"){if(e.isNil(u)||e.isNil(d)||e.isNil(b)||e.isNil(_)){c.drawImage(x,i,r,s,f);return}if(!e.isNil(u)&&!e.isNil(d)&&!e.isNil(b)&&!e.isNil(_)){c.drawImage(x,u,d,b,_,i,r,s,f);return}}}}),B.exports=v},function(B,L,o){var e=o(2),g=o(8),v=o(55),p=o(54),c=function h(i){h.superclass.constructor.call(this,i)};c.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},e.extend(c,g),e.augment(c,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var i=this._attrs,r=i.x1,n=i.y1,s=i.x2,f=i.y2,u=this.getHitLineWidth();return p.box(r,n,s,f,u)},createPath:function(i){var r=this._attrs,n=r.x1,s=r.y1,f=r.x2,u=r.y2;i=i||self.get("context"),i.beginPath(),i.moveTo(n,s),i.lineTo(f,u)},afterPath:function(i){var r=this._attrs,n=r.x1,s=r.y1,f=r.x2,u=r.y2;i=i||this.get("context"),r.startArrow&&v.addStartArrow(i,r,f,u,n,s),r.endArrow&&v.addEndArrow(i,r,n,s,f,u)},getPoint:function(i){var r=this._attrs;return{x:p.at(r.x1,r.x2,i),y:p.at(r.y1,r.y2,i)}}}),B.exports=c},function(B,L){B.exports={xAt:function(e,g,v,p,c){return g*Math.cos(e)*Math.cos(c)-v*Math.sin(e)*Math.sin(c)+p},yAt:function(e,g,v,p,c){return g*Math.sin(e)*Math.cos(c)+v*Math.cos(e)*Math.sin(c)+p},xExtrema:function(e,g,v){return Math.atan(-v/g*Math.tan(e))},yExtrema:function(e,g,v){return Math.atan(v/(g*Math.tan(e)))}}},function(B,L,o){var e=o(2),g=e.vec2;function v(h,i,r,n){var s=1-n;return s*(s*h+2*n*i)+n*n*r}function p(h,i,r,n,s,f,u,d,b){var _,x=.005,M=Infinity,P,C,O,w,S,I,j=1e-4,N=[u,d];for(w=0;w<1;w+=.05)C=[v(h,r,s,w),v(i,n,f,w)],P=g.squaredDistance(N,C),P<M&&(_=w,M=P);for(M=Infinity,I=0;I<32&&!(x<j);I++){var W=_-x,H=_+x;C=[v(h,r,s,W),v(i,n,f,W)],P=g.squaredDistance(N,C),W>=0&&P<M?(_=W,M=P):(O=[v(h,r,s,H),v(i,n,f,H)],S=g.squaredDistance(N,O),H<=1&&S<M?(_=H,M=S):x*=.5)}return b&&(b.x=v(h,r,s,_),b.y=v(i,n,f,_)),Math.sqrt(M)}function c(h,i,r){var n=h+r-2*i;if(e.isNumberEqual(n,0))return[.5];var s=(h-i)/n;return s<=1&&s>=0?[s]:[]}B.exports={at:v,projectPoint:function(i,r,n,s,f,u,d,b){var _={};return p(i,r,n,s,f,u,d,b,_),_},pointDistance:p,extrema:c}},function(B,L,o){var e=o(2),g=o(8),v=o(56),p=o(39),c=o(55),h=o(90),i=o(88),r=function n(s){n.superclass.constructor.call(this,s)};r.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},e.extend(r,g),e.augment(r,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(s){var f=this;if(e.isNil(s)){f.setSilent("segments",null),f.setSilent("box",void 0);return}var u=p.parsePath(s),d,b=[];if(!(!e.isArray(u)||u.length===0||u[0][0]!=="M"&&u[0][0]!=="m")){for(var _=u.length,x=0;x<u.length;x++){var M=u[x];d=new v(M,d,x===_-1),b.push(d)}f.setSilent("segments",b),f.setSilent("tCache",null),f.setSilent("box",null)}},calculateBox:function(){var s=this,f=s.get("segments");if(!f)return null;var u=this.getHitLineWidth(),d=Infinity,b=-Infinity,_=Infinity,x=-Infinity;return e.each(f,function(M){M.getBBox(u);var P=M.box;P&&(P.minX<d&&(d=P.minX),P.maxX>b&&(b=P.maxX),P.minY<_&&(_=P.minY),P.maxY>x&&(x=P.maxY))}),d===Infinity||_===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:d,minY:_,maxX:b,maxY:x}},_setTcache:function(){var s=0,f=0,u=[],d,b,_,x,M=this._cfg.curve;!M||(e.each(M,function(P,C){_=M[C+1],x=P.length,_&&(s+=i.len(P[x-2],P[x-1],_[1],_[2],_[3],_[4],_[5],_[6]))}),e.each(M,function(P,C){_=M[C+1],x=P.length,_&&(d=[],d[0]=f/s,b=i.len(P[x-2],P[x-1],_[1],_[2],_[3],_[4],_[5],_[6]),f+=b,d[1]=f/s,u.push(d))}),this._cfg.tCache=u)},_calculateCurve:function(){var s=this,f=s._attrs,u=f.path;this._cfg.curve=h.pathTocurve(u)},getStartTangent:function(){var s=this.get("segments"),f,u,d,b;if(s.length>1)if(f=s[0].endPoint,u=s[1].endPoint,d=s[1].startTangent,b=[],e.isFunction(d)){var _=d();b.push([f.x-_[0],f.y-_[1]]),b.push([f.x,f.y])}else b.push([u.x,u.y]),b.push([f.x,f.y]);return b},getEndTangent:function(){var s=this.get("segments"),f=s.length,u,d,b,_;if(f>1)if(u=s[f-2].endPoint,d=s[f-1].endPoint,b=s[f-1].endTangent,_=[],e.isFunction(b)){var x=b();_.push([d.x-x[0],d.y-x[1]]),_.push([d.x,d.y])}else _.push([u.x,u.y]),_.push([d.x,d.y]);return _},getPoint:function(s){var f=this._cfg.tCache,u,d;f||(this._calculateCurve(),this._setTcache(),f=this._cfg.tCache);var b=this._cfg.curve;if(!f)return b?{x:b[0][1],y:b[0][2]}:null;e.each(f,function(P,C){s>=P[0]&&s<=P[1]&&(u=(s-P[0])/(P[1]-P[0]),d=C)});var _=b[d];if(e.isNil(_)||e.isNil(d))return null;var x=_.length,M=b[d+1];return{x:i.at(_[x-2],M[1],M[3],M[5],1-u),y:i.at(_[x-1],M[2],M[4],M[6],1-u)}},createPath:function(s){var f=this,u=f.get("segments");if(!!e.isArray(u)){s=s||f.get("context"),s.beginPath();for(var d=u.length,b=0;b<d;b++)u[b].draw(s)}},afterPath:function(s){var f=this,u=f._attrs,d=f.get("segments"),b=u.path;if(s=s||f.get("context"),!!e.isArray(d)&&d.length!==1&&!(!u.startArrow&&!u.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||u.fill)){var _=f.getStartTangent();c.addStartArrow(s,u,_[0][0],_[0][1],_[1][0],_[1][1]);var x=f.getEndTangent();c.addEndArrow(s,u,x[0][0],x[0][1],x[1][0],x[1][1])}}}),B.exports=r},function(B,L,o){var e=o(2),g=o(8),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={points:null,lineWidth:1},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var c=this,h=c._attrs,i=h.points,r=this.getHitLineWidth();if(!i||i.length===0)return null;var n=Infinity,s=Infinity,f=-Infinity,u=-Infinity;e.each(i,function(b){var _=b[0],x=b[1];_<n&&(n=_),_>f&&(f=_),x<s&&(s=x),x>u&&(u=x)});var d=r/2;return{minX:n-d,minY:s-d,maxX:f+d,maxY:u+d}},createPath:function(c){var h=this,i=h._attrs,r=i.points;r.length<2||(c=c||h.get("context"),c.beginPath(),e.each(r,function(n,s){s===0?c.moveTo(n[0],n[1]):c.lineTo(n[0],n[1])}),c.closePath())}}),B.exports=v},function(B,L,o){var e=o(2),g=o(8),v=o(55),p=o(54),c=function h(i){h.superclass.constructor.call(this,i)};c.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},e.extend(c,g),e.augment(c,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var i=this,r=i._attrs,n=this.getHitLineWidth(),s=r.points;if(!s||s.length===0)return null;var f=Infinity,u=Infinity,d=-Infinity,b=-Infinity;e.each(s,function(x){var M=x[0],P=x[1];M<f&&(f=M),M>d&&(d=M),P<u&&(u=P),P>b&&(b=P)});var _=n/2;return{minX:f-_,minY:u-_,maxX:d+_,maxY:b+_}},_setTcache:function(){var i=this,r=i._attrs,n=r.points,s=0,f=0,u=[],d,b;!n||n.length===0||(e.each(n,function(_,x){n[x+1]&&(s+=p.len(_[0],_[1],n[x+1][0],n[x+1][1]))}),!(s<=0)&&(e.each(n,function(_,x){n[x+1]&&(d=[],d[0]=f/s,b=p.len(_[0],_[1],n[x+1][0],n[x+1][1]),f+=b,d[1]=f/s,u.push(d))}),this.tCache=u))},createPath:function(i){var r=this,n=r._attrs,s=n.points,f,u;if(!(s.length<2)){for(i=i||r.get("context"),i.beginPath(),i.moveTo(s[0][0],s[0][1]),u=1,f=s.length-1;u<f;u++)i.lineTo(s[u][0],s[u][1]);i.lineTo(s[f][0],s[f][1])}},getStartTangent:function(){var i=this.__attrs.points,r=[];return r.push([i[1][0],i[1][1]]),r.push([i[0][0],i[0][1]]),r},getEndTangent:function(){var i=this.__attrs.points,r=i.length-1,n=[];return n.push([i[r-1][0],i[r-1][1]]),n.push([i[r][0],i[r][1]]),n},afterPath:function(i){var r=this,n=r._attrs,s=n.points,f=s.length-1;i=i||r.get("context"),n.startArrow&&v.addStartArrow(i,n,s[1][0],s[1][1],s[0][0],s[0][1]),n.endArrow&&v.addEndArrow(i,n,s[f-1][0],s[f-1][1],s[f][0],s[f][1])},getPoint:function(i){var r=this._attrs,n=r.points,s=this.tCache,f,u;return s||(this._setTcache(),s=this.tCache),e.each(s,function(d,b){i>=d[0]&&i<=d[1]&&(f=(i-d[0])/(d[1]-d[0]),u=b)}),{x:p.at(n[u][0],n[u+1][0],f),y:p.at(n[u][1],n[u+1][1],f)}}}),B.exports=c},function(B,L,o){var e=o(2),g=o(39),v=g.parseRadius,p=o(8),c=function h(i){h.superclass.constructor.call(this,i)};c.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},e.extend(c,p),e.augment(c,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var i=this,r=i._attrs,n=r.x,s=r.y,f=r.width,u=r.height,d=this.getHitLineWidth(),b=d/2;return{minX:n-b,minY:s-b,maxX:n+f+b,maxY:s+u+b}},createPath:function(i){var r=this,n=r._attrs,s=n.x,f=n.y,u=n.width,d=n.height,b=n.radius;if(i=i||r.get("context"),i.beginPath(),b===0)i.rect(s,f,u,d);else{var _=v(b);i.moveTo(s+_.r1,f),i.lineTo(s+u-_.r2,f),_.r2!==0&&i.arc(s+u-_.r2,f+_.r2,_.r2,-Math.PI/2,0),i.lineTo(s+u,f+d-_.r3),_.r3!==0&&i.arc(s+u-_.r3,f+d-_.r3,_.r3,0,Math.PI/2),i.lineTo(s+_.r4,f+d),_.r4!==0&&i.arc(s+_.r4,f+d-_.r4,_.r4,Math.PI/2,Math.PI),i.lineTo(s,f+_.r1),_.r1!==0&&i.arc(s+_.r1,f+_.r1,_.r1,Math.PI,Math.PI*1.5),i.closePath()}}}),B.exports=c},function(B,L,o){var e=o(2),g=o(8),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var c=this._attrs.fontSize;c&&+c<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+c/12,+c/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var c=this._attrs,h=c.fontSize,i=c.fontFamily,r=c.fontWeight,n=c.fontStyle,s=c.fontVariant;c.font=[n,s,r,h+"px",i].join(" ")},_setAttrText:function(){var c=this._attrs,h=c.text,i=null;if(e.isString(h)&&h.indexOf(`
`)!==-1){i=h.split(`
`);var r=i.length;c.lineCount=r}c.textArr=i},_getTextHeight:function(){var c=this._attrs,h=c.lineCount,i=c.fontSize*1;if(h>1){var r=this._getSpaceingY();return i*h+r*(h-1)}return i},isHitBox:function(){return!1},calculateBox:function(){var c=this,h=c._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),h.textArr||this._setAttrText();var r=h.x,n=h.y,s=c.measureText();if(!s)return{minX:r,minY:n,maxX:r,maxY:n};var f=c._getTextHeight(),u=h.textAlign,d=h.textBaseline,b=c.getHitLineWidth(),_={x:r,y:n-f};u&&(u==="end"||u==="right"?_.x-=s:u==="center"&&(_.x-=s/2)),d&&(d==="top"?_.y+=f:d==="middle"&&(_.y+=f/2)),this.set("startPoint",_);var x=b/2;return{minX:_.x-x,minY:_.y-x,maxX:_.x+s+x,maxY:_.y+f+x}},_getSpaceingY:function(){var c=this._attrs,h=c.lineHeight,i=c.fontSize*1;return h?h-i:i*.14},drawInner:function(c){var h=this,i=h._attrs,r=this._cfg;(!r.attrs||r.hasUpdate)&&(this._assembleFont(),this._setAttrText()),c.font=i.font;var n=i.text;if(!!n){var s=i.textArr,f=i.x,u=i.y;if(c.beginPath(),h.hasStroke()){var d=i.strokeOpacity;!e.isNil(d)&&d!==1&&(c.globalAlpha=d),s?h._drawTextArr(c,!1):c.strokeText(n,f,u),c.globalAlpha=1}if(h.hasFill()){var b=i.fillOpacity;!e.isNil(b)&&b!==1&&(c.globalAlpha=b),s?h._drawTextArr(c,!0):c.fillText(n,f,u)}r.hasUpdate=!1}},_drawTextArr:function(c,h){var i=this._attrs.textArr,r=this._attrs.textBaseline,n=this._attrs.fontSize*1,s=this._getSpaceingY(),f=this._attrs.x,u=this._attrs.y,d=this.getBBox(),b=d.maxY-d.minY,_;e.each(i,function(x,M){_=u+M*(s+n)-b+n,r==="middle"&&(_+=b-n-(b-n)/2),r==="top"&&(_+=b-n),h?c.fillText(x,f,_):c.strokeText(x,f,_)})},measureText:function(){var c=this,h=c._attrs,i=h.text,r=h.font,n=h.textArr,s,f=0;if(!e.isNil(i)){var u=document.createElement("canvas").getContext("2d");return u.save(),u.font=r,n?e.each(n,function(d){s=u.measureText(d).width,f<s&&(f=s),u.restore()}):(f=u.measureText(i).width,u.restore()),f}}}),B.exports=v},function(B,L,o){B.exports={isFunction:o(14),isObject:o(33),isBoolean:o(114),isNil:o(7),isString:o(15),isArray:o(5),isNumber:o(11),isEmpty:o(106),uniqueId:o(116),clone:o(65),deepMix:o(41),assign:o(10),merge:o(41),upperFirst:o(113),each:o(3),isEqual:o(66),toArray:o(43),extend:o(104),augment:o(100),remove:o(98),isNumberEqual:o(42),toRadian:o(109),toDegree:o(108),mod:o(107),clamp:o(67),createDom:o(101),modifyCSS:o(102),requestAnimationFrame:o(103),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:o(69),vec2:o(111),vec3:o(112),transform:o(110)}},function(B,L,o){var e=o(1),g=o(384),v=o(388),p=o(383),c=o(382),h=function(r){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},e.assign(this._cfg,this.getDefaultCfg(),r),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},e.augment(h,g,v,c,p,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(r,n){return r==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(n),r==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(n),this._cfg[r]=n,this},setSilent:function(r,n){this._cfg[r]=n},get:function(r){return this._cfg[r]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(r,n){var s=this._cfg,f=s.parent,u=s.el;return f&&e.remove(f.get("children"),this),u&&(n?f&&f._cfg.tobeRemoved.push(u):u.parentNode.removeChild(u)),(r||r===void 0)&&this.destroy(),this},destroy:function(){var r=this.get("destroyed");r||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var r=this._cfg,n=r.parent;if(!!n){var s=n._cfg.children,f=r.el,u=s.indexOf(this);s.splice(u,1),s.push(this),f&&(f.parentNode.removeChild(f),r.el=null)}},toBack:function(){var r=this._cfg,n=r.parent;if(!!n){var s=n._cfg.children,f=r.el,u=s.indexOf(this);if(s.splice(u,1),s.unshift(this),f){var d=f.parentNode;d.removeChild(f),d.insertBefore(f,d.firstChild)}}},_beforeSetZIndex:function(r){var n=this._cfg.parent;this._cfg.zIndex=r,e.isNil(n)||n.sort();var s=this._cfg.el;if(s){var f=n._cfg.children,u=f.indexOf(this),d=s.parentNode;d.removeChild(s),u===f.length-1?d.appendChild(s):d.insertBefore(s,d.childNodes[u])}return r},_setAttrs:function(r){return this.attr(r),r},setZIndex:function(r){return this._cfg.zIndex=r,this._beforeSetZIndex(r)},clone:function(){return e.clone(this)},getBBox:function(){}}),B.exports=h},function(B,L,o){var e=o(95),g=Array.prototype.slice;function v(c,h){for(var i=c.length;i--;)if(c[i].callback===h)return i;return-1}var p=function(){};e.augment(p,{on:function(h,i,r){var n=this;if(!e.isFunction(i))throw new TypeError("listener should be a function");return n._cfg._events||(n._cfg._events={}),n._cfg._events[h]||(n._cfg._events[h]=[]),n._cfg._events[h].push({callback:i,one:r}),this},one:function(h,i){return this.on(h,i,!0),this},emit:function(h){if(!this.get("destroyed")&&!(!this._cfg._events||e.isEmpty(this._cfg._events))){var i=this._cfg._events[h];if(!e.isEmpty(i))for(var r=arguments,n=g.call(r,1),s=i.length,f=0;f<s;)!i[f]||(i[f].callback.apply(this,n),i[f]&&i[f].one?(i.splice(f,1),s--):f++)}},trigger:function(){this.emit.apply(this,arguments)},off:function(h,i){var r=this._cfg._events;if(!(!r||e.isEmpty(r))){if(arguments.length===0)return this._cfg._events={},this;if(r[h]){var n=v(r[h],i);n>=0&&r[h].splice(n,1),r[h].length===0&&delete r[h]}}},removeEvent:function(h){return typeof h=="undefined"?this._cfg._events={}:delete this._cfg._events[h],this},_getEvents:function(){return this._cfg._events||{}}}),B.exports=p},function(B,L,o){var e=o(1),g=o(181),v=o(402),p={},c="_INDEX",h=["zIndex","capture","visible"];function i(u){return function(d,b){var _=u(d,b);return _===0?d[c]-b[c]:_}}function r(u,d,b){for(var _,x=u.length-1;x>=0;x--){var M=u[x];if(M._cfg.visible&&M._cfg.capture&&(M.isGroup?_=M.getShape(d,b):M.isHit(d,b)&&(_=M)),_)break}return _}function n(u){for(var d=[],b=0;b<u.length;b++)d.push(u[b]);return d}var s=function u(d){u.superclass.constructor.call(this,d),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function f(u){if(!(u._cfg||u===s)){var d=u.superclass.constructor;d&&!d._cfg&&f(d),u._cfg={},e.merge(u._cfg,d._cfg),e.merge(u._cfg,u.CFG)}}e.extend(s,g),e.augment(s,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return f(this.constructor),e.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(d,b){var _=this.get("canvas");b=b||{};var x=p[d];if(x||(x=e.upperFirst(d),p[d]=x),b.attrs&&_){var M=b.attrs;if(d==="text"){var P=_.get("fontFamily");P&&(M.fontFamily=M.fontFamily?M.fontFamily:P)}}b.canvas=_,b.type=d;var C=new v[x](b);return this.add(C),C},addGroup:function(d,b){var _=this.get("canvas"),x;if(b=e.merge({},b),e.isFunction(d))b?(b.canvas=_,b.parent=this,x=new d(b)):x=new d({canvas:_,parent:this}),this.add(x);else if(e.isObject(d))d.canvas=_,x=new s(d),this.add(x);else if(d===void 0)x=new s,this.add(x);else return!1;return x},renderBack:function(d,b){var _=this.get("backShape"),x=this.getBBox();return e.merge(b,{x:x.minX-d[3],y:x.minY-d[0],width:x.width+d[1]+d[3],height:x.height+d[0]+d[2]}),_?_.attr(b):_=this.addShape("rect",{zIndex:-1,attrs:b}),this.set("backShape",_),this.sort(),_},removeChild:function(d,b){if(arguments.length>=2)this.contain(d)&&d.remove(b);else{if(arguments.length===1)if(e.isBoolean(d))b=d;else return this.contain(d)&&d.remove(!0),this;arguments.length===0&&(b=!0),s.superclass.remove.call(this,b)}return this},add:function(d){var b=this,_=b.get("children");if(e.isArray(d))e.each(d,function(P){var C=P.get("parent");C&&C.removeChild(P,!1),b._setCfgProperty(P)}),b._cfg.children=_.concat(d);else{var x=d,M=x.get("parent");M&&M.removeChild(x,!1),b._setCfgProperty(x),_.push(x)}return b},_setCfgProperty:function(d){var b=this._cfg;d.set("parent",this),d.set("canvas",b.canvas),b.timeline&&d.set("timeline",b.timeline)},contain:function(d){var b=this.get("children");return b.indexOf(d)>-1},getChildByIndex:function(d){var b=this.get("children");return b[d]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var d=this.get("children").length-1;return this.getChildByIndex(d)},getBBox:function(){var d=this,b=Infinity,_=-Infinity,x=Infinity,M=-Infinity,P=d.get("children");P.length>0?e.each(P,function(O){if(O.get("visible")){if(O.isGroup&&O.get("children").length===0)return;var w=O.getBBox();if(!w)return!0;var S=[w.minX,w.minY,1],I=[w.minX,w.maxY,1],j=[w.maxX,w.minY,1],N=[w.maxX,w.maxY,1];O.apply(S),O.apply(I),O.apply(j),O.apply(N);var W=Math.min(S[0],I[0],j[0],N[0]),H=Math.max(S[0],I[0],j[0],N[0]),J=Math.min(S[1],I[1],j[1],N[1]),Q=Math.max(S[1],I[1],j[1],N[1]);W<b&&(b=W),H>_&&(_=H),J<x&&(x=J),Q>M&&(M=Q)}}):(b=0,_=0,x=0,M=0);var C={minX:b,minY:x,maxX:_,maxY:M};return C.x=C.minX,C.y=C.minY,C.width=C.maxX-C.minX,C.height=C.maxY-C.minY,C},getCount:function(){return this.get("children").length},sort:function(){var d=this.get("children");return e.each(d,function(b,_){return b[c]=_,b}),d.sort(i(function(b,_){return b.get("zIndex")-_.get("zIndex")})),this},findById:function(d){return this.find(function(b){return b.get("id")===d})},find:function(d){if(e.isString(d))return this.findById(d);var b=this.get("children"),_=null;return e.each(b,function(x){if(d(x)?_=x:x.find&&(_=x.find(d)),_)return!1}),_},findAll:function(d){var b=this.get("children"),_=[],x=[];return e.each(b,function(M){d(M)&&_.push(M),M.findAllBy&&(x=M.findAllBy(d),_=_.concat(x))}),_},findBy:function(d){var b=this.get("children"),_=null;return e.each(b,function(x){if(d(x)?_=x:x.findBy&&(_=x.findBy(d)),_)return!1}),_},findAllBy:function(d){var b=this.get("children"),_=[],x=[];return e.each(b,function(M){d(M)&&_.push(M),M.findAllBy&&(x=M.findAllBy(d),_=_.concat(x))}),_},getShape:function(d,b){var _=this,x=_._attrs.clip,M=_._cfg.children,P;if(x){var C=[d,b,1];x.invert(C,_.get("canvas")),x.isPointInPath(C[0],C[1])&&(P=r(M,d,b))}else P=r(M,d,b);return P},clearTotalMatrix:function(){var d=this.get("totalMatrix");if(d){this.setSilent("totalMatrix",null);for(var b=this._cfg.children,_=0;_<b.length;_++){var x=b[_];x.clearTotalMatrix()}}},clear:function(d){if(!this.get("destroyed")){for(var b=this._cfg.children,_=b.length-1;_>=0;_--)b[_].remove(!0,d);return this._cfg.children=[],this}},destroy:function(){this.get("destroyed")||(this.clear(),s.superclass.destroy.call(this))},clone:function(){var d=this,b=d._cfg.children,_=d._attrs,x={};e.each(_,function(P,C){C==="matrix"?x[C]=n(_[C]):x[C]=_[C]});var M=new s({attrs:x,canvas:d.get("canvas")});return e.each(b,function(P){M.add(P.clone())}),e.each(h,function(P){M._cfg[P]=d._cfg[P]}),M}}),B.exports=s},function(B,L,o){B.exports={Canvas:o(381),Group:o(183),Shape:o(9),Arc:o(185),Circle:o(186),Dom:o(187),Ellipse:o(188),Fan:o(189),Image:o(190),Line:o(191),Marker:o(92),Path:o(194),Polygon:o(195),Polyline:o(196),Rect:o(197),Text:o(198),PathSegment:o(60),PathUtil:o(96),Event:o(91),EventEmitter:o(182),version:"3.4.10"}},function(B,L,o){var e=o(1),g=o(9),v=o(57),p=o(59);function c(r,n,s){return r+n*Math.cos(s)}function h(r,n,s){return r+n*Math.sin(s)}var i=function r(n){r.superclass.constructor.call(this,n)};i.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},e.extend(i,g),e.augment(i,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,s=n.x,f=n.y,u=n.r,d=n.startAngle,b=n.endAngle,_=n.clockwise,x=this.getHitLineWidth(),M=x/2,P=v.box(s,f,u,d,b,_);return P.minX-=M,P.minY-=M,P.maxX+=M,P.maxY+=M,P},getStartTangent:function(){var n=this._attrs,s=n.x,f=n.y,u=n.startAngle,d=n.r,b=n.clockwise,_=Math.PI/180;b&&(_*=-1);var x=[],M=c(s,d,u+_),P=h(f,d,u+_),C=c(s,d,u),O=h(f,d,u);return x.push([M,P]),x.push([C,O]),x},getEndTangent:function(){var n=this._attrs,s=n.x,f=n.y,u=n.endAngle,d=n.r,b=n.clockwise,_=Math.PI/180,x=[];b&&(_*=-1);var M=c(s,d,u+_),P=h(f,d,u+_),C=c(s,d,u),O=h(f,d,u);return x.push([C,O]),x.push([M,P]),x},createPath:function(n){var s=this._attrs,f=s.x,u=s.y,d=s.r,b=s.startAngle,_=s.endAngle,x=s.clockwise;n=n||self.get("context"),n.beginPath(),n.arc(f,u,d,b,_,x)},afterPath:function(n){var s=this._attrs;if(n=n||this.get("context"),s.startArrow){var f=this.getStartTangent();p.addStartArrow(n,s,f[0][0],f[0][1],f[1][0],f[1][1])}if(s.endArrow){var u=this.getEndTangent();p.addEndArrow(n,s,u[0][0],u[0][1],u[1][0],u[1][1])}}}),B.exports=i},function(B,L,o){var e=o(1),g=o(9),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,r:0,lineWidth:1},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var c=this._attrs,h=c.x,i=c.y,r=c.r,n=this.getHitLineWidth(),s=n/2+r;return{minX:h-s,minY:i-s,maxX:h+s,maxY:i+s}},createPath:function(c){var h=this._attrs,i=h.x,r=h.y,n=h.r;c.beginPath(),c.arc(i,r,n,0,Math.PI*2,!1),c.closePath()}}),B.exports=v},function(B,L,o){var e=o(1),g=o(9),v=function p(c){p.superclass.constructor.call(this,c)};e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var c=this,h=c._attrs,i=h.x,r=h.y,n=h.width,s=h.height,f=this.getHitLineWidth(),u=f/2;return{minX:i-u,minY:r-u,maxX:i+n+u,maxY:r+s+u}}}),B.exports=v},function(B,L,o){var e=o(1),g=o(9),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var c=this._attrs,h=c.x,i=c.y,r=c.rx,n=c.ry,s=this.getHitLineWidth(),f=r+s/2,u=n+s/2;return{minX:h-f,minY:i-u,maxX:h+f,maxY:i+u}},createPath:function(c){var h=this._attrs,i=h.x,r=h.y,n=h.rx,s=h.ry;c=c||self.get("context");var f=n>s?n:s,u=n>s?1:n/s,d=n>s?s/n:1,b=[1,0,0,0,1,0,0,0,1];e.mat3.scale(b,b,[u,d]),e.mat3.translate(b,b,[i,r]),c.beginPath(),c.save(),c.transform(b[0],b[1],b[3],b[4],b[6],b[7]),c.arc(0,0,f,0,Math.PI*2),c.restore(),c.closePath()}}),B.exports=v},function(B,L,o){var e=o(1),g=o(9),v=o(57),p=function c(h){c.superclass.constructor.call(this,h)};p.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},e.extend(p,g),e.augment(p,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var h=this,i=h._attrs,r=i.x,n=i.y,s=i.rs,f=i.re,u=i.startAngle,d=i.endAngle,b=i.clockwise,_=this.getHitLineWidth(),x=v.box(r,n,s,u,d,b),M=v.box(r,n,f,u,d,b),P=Math.min(x.minX,M.minX),C=Math.min(x.minY,M.minY),O=Math.max(x.maxX,M.maxX),w=Math.max(x.maxY,M.maxY),S=_/2;return{minX:P-S,minY:C-S,maxX:O+S,maxY:w+S}},createPath:function(h){var i=this._attrs,r=i.x,n=i.y,s=i.rs,f=i.re,u=i.startAngle,d=i.endAngle,b=i.clockwise,_={x:Math.cos(u)*s+r,y:Math.sin(u)*s+n},x={x:Math.cos(u)*f+r,y:Math.sin(u)*f+n},M={x:Math.cos(d)*s+r,y:Math.sin(d)*s+n};h=h||self.get("context"),h.beginPath(),h.moveTo(_.x,_.y),h.lineTo(x.x,x.y),h.arc(r,n,f,u,d,b),h.lineTo(M.x,M.y),h.arc(r,n,s,d,u,!b),h.closePath()}}),B.exports=p},function(B,L,o){var e=o(1),g=o(9),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},e.extend(v,g),e.augment(v,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var c=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==c.img)&&this._setAttrImg();var h=c.x,i=c.y,r=c.width,n=c.height;return{minX:h,minY:i,maxX:h+r,maxY:i+n}},_beforeSetLoading:function(c){var h=this.get("canvas");return c===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,h.draw()),c},_setAttrImg:function(){var c=this,h=c._attrs,i=h.img;if(e.isString(i)){var r=new Image;r.onload=function(){if(c.get("destroyed"))return!1;c.attr("imgSrc",i),c.attr("img",r);var n=c.get("callback");n&&n.call(c),c.set("loading",!1)},r.src=i,r.crossOrigin="Anonymous",c.set("loading",!0)}else return i instanceof Image?(h.width||c.attr("width",i.width),h.height||c.attr("height",i.height),i):i instanceof HTMLElement&&e.isString(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"?(h.width||c.attr("width",Number(i.getAttribute("width"))),h.height||c.attr("height",Number(i.getAttribute("height"))),i):i instanceof ImageData?(h.width||c.attr("width",i.width),h.height||c.attr("height",i.height),i):null},drawInner:function(c){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(c),this._cfg.hasUpdate=!1},_drawImage:function(c){var h=this._attrs,i=h.x,r=h.y,n=h.img,s=h.width,f=h.height,u=h.sx,d=h.sy,b=h.swidth,_=h.sheight;this.set("toDraw",!1);var x=n;if(x instanceof ImageData&&(x=new Image,x.src=n),x instanceof Image||x instanceof HTMLElement&&e.isString(x.nodeName)&&x.nodeName.toUpperCase()==="CANVAS"){if(e.isNil(u)||e.isNil(d)||e.isNil(b)||e.isNil(_)){c.drawImage(x,i,r,s,f);return}if(!e.isNil(u)&&!e.isNil(d)&&!e.isNil(b)&&!e.isNil(_)){c.drawImage(x,u,d,b,_,i,r,s,f);return}}}}),B.exports=v},function(B,L,o){var e=o(1),g=o(9),v=o(59),p=o(58),c=function h(i){h.superclass.constructor.call(this,i)};c.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},e.extend(c,g),e.augment(c,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var i=this._attrs,r=i.x1,n=i.y1,s=i.x2,f=i.y2,u=this.getHitLineWidth();return p.box(r,n,s,f,u)},createPath:function(i){var r=this,n=this._attrs,s=n.x1,f=n.y1,u=n.x2,d=n.y2;if(n.startArrow&&n.startArrow.d){var b=v.getShortenOffset(s,f,u,d,n.startArrow.d);s+=b.dx,f+=b.dy}if(n.endArrow&&n.endArrow.d){var _=v.getShortenOffset(s,f,u,d,n.endArrow.d);u-=_.dx,d-=_.dy}i=i||r.get("context"),i.beginPath(),i.moveTo(s,f),i.lineTo(u,d)},afterPath:function(i){var r=this,n=r._attrs,s=n.x1,f=n.y1,u=n.x2,d=n.y2;i=i||r.get("context"),n.startArrow&&v.addStartArrow(i,n,u,d,s,f),n.endArrow&&v.addEndArrow(i,n,s,f,u,d)},getPoint:function(i){var r=this._attrs;return{x:p.at(r.x1,r.x2,i),y:p.at(r.y1,r.y2,i)}}}),B.exports=c},function(B,L){B.exports={xAt:function(e,g,v,p,c){return g*Math.cos(e)*Math.cos(c)-v*Math.sin(e)*Math.sin(c)+p},yAt:function(e,g,v,p,c){return g*Math.sin(e)*Math.cos(c)+v*Math.cos(e)*Math.sin(c)+p},xExtrema:function(e,g,v){return Math.atan(-v/g*Math.tan(e))},yExtrema:function(e,g,v){return Math.atan(v/(g*Math.tan(e)))}}},function(B,L,o){var e=o(1),g=e.vec2;function v(h,i,r,n){var s=1-n;return s*(s*h+2*n*i)+n*n*r}function p(h,i,r,n,s,f,u,d,b){var _,x=.005,M=Infinity,P,C,O,w,S,I,j=1e-4,N=[u,d];for(w=0;w<1;w+=.05)C=[v(h,r,s,w),v(i,n,f,w)],P=g.squaredDistance(N,C),P<M&&(_=w,M=P);for(M=Infinity,I=0;I<32&&!(x<j);I++){var W=_-x,H=_+x;C=[v(h,r,s,W),v(i,n,f,W)],P=g.squaredDistance(N,C),W>=0&&P<M?(_=W,M=P):(O=[v(h,r,s,H),v(i,n,f,H)],S=g.squaredDistance(N,O),H<=1&&S<M?(_=H,M=S):x*=.5)}return b&&(b.x=v(h,r,s,_),b.y=v(i,n,f,_)),Math.sqrt(M)}function c(h,i,r){var n=h+r-2*i;if(e.isNumberEqual(n,0))return[.5];var s=(h-i)/n;return s<=1&&s>=0?[s]:[]}B.exports={at:v,projectPoint:function(i,r,n,s,f,u,d,b){var _={};return p(i,r,n,s,f,u,d,b,_),_},pointDistance:p,extrema:c}},function(B,L,o){var e=o(1),g=o(9),v=o(60),p=o(40),c=o(59),h=o(96),i=o(93),r=function n(s){n.superclass.constructor.call(this,s)};r.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},e.extend(r,g),e.augment(r,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(s){var f=this;if(e.isNil(s)){f.setSilent("segments",null),f.setSilent("box",void 0);return}var u=p.parsePath(s),d,b=[];if(!(!e.isArray(u)||u.length===0||u[0][0]!=="M"&&u[0][0]!=="m")){for(var _=u.length,x=0;x<u.length;x++){var M=u[x];d=new v(M,d,x===_-1),b.push(d)}f.setSilent("segments",b),f.setSilent("tCache",null),f.setSilent("totalLength",null),f.setSilent("box",null)}},calculateBox:function(){var s=this,f=s.get("segments");if(!f)return null;var u=this.getHitLineWidth(),d=Infinity,b=-Infinity,_=Infinity,x=-Infinity;return e.each(f,function(M){M.getBBox(u);var P=M.box;P&&(P.minX<d&&(d=P.minX),P.maxX>b&&(b=P.maxX),P.minY<_&&(_=P.minY),P.maxY>x&&(x=P.maxY))}),d===Infinity||_===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:d,minY:_,maxX:b,maxY:x}},_setTcache:function(){var s=0,f=0,u=[],d,b,_,x,M=this._cfg.curve;if(!!M){if(e.each(M,function(P,C){_=M[C+1],x=P.length,_&&(s+=i.len(P[x-2],P[x-1],_[1],_[2],_[3],_[4],_[5],_[6]))}),this._cfg.totalLength=s,s===0){this._cfg.tCache=[];return}e.each(M,function(P,C){_=M[C+1],x=P.length,_&&(d=[],d[0]=f/s,b=i.len(P[x-2],P[x-1],_[1],_[2],_[3],_[4],_[5],_[6]),f+=b,d[1]=f/s,u.push(d))}),this._cfg.tCache=u}},getTotalLength:function(){var s=this.get("totalLength");return e.isNil(s)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):s},_calculateCurve:function(){var s=this,f=s._attrs,u=f.path;this._cfg.curve=h.pathTocurve(u)},getStartTangent:function(){var s=this.get("segments"),f,u,d,b;if(s.length>1)if(f=s[0].endPoint,u=s[1].endPoint,d=s[1].startTangent,b=[],e.isFunction(d)){var _=d();b.push([f.x-_[0],f.y-_[1]]),b.push([f.x,f.y])}else b.push([u.x,u.y]),b.push([f.x,f.y]);return b},getEndTangent:function(){var s=this.get("segments"),f=s.length,u,d,b,_;if(f>1)if(u=s[f-2].endPoint,d=s[f-1].endPoint,b=s[f-1].endTangent,_=[],e.isFunction(b)){var x=b();_.push([d.x-x[0],d.y-x[1]]),_.push([d.x,d.y])}else _.push([u.x,u.y]),_.push([d.x,d.y]);return _},getPoint:function(s){var f=this._cfg.tCache,u,d;f||(this._calculateCurve(),this._setTcache(),f=this._cfg.tCache);var b=this._cfg.curve;if(!f||f.length===0)return b?{x:b[0][1],y:b[0][2]}:null;e.each(f,function(P,C){s>=P[0]&&s<=P[1]&&(u=(s-P[0])/(P[1]-P[0]),d=C)});var _=b[d];if(e.isNil(_)||e.isNil(d))return null;var x=_.length,M=b[d+1];return{x:i.at(_[x-2],M[1],M[3],M[5],1-u),y:i.at(_[x-1],M[2],M[4],M[6],1-u)}},createPath:function(s){var f=this,u=f._attrs,d=f.get("segments");if(!!e.isArray(d)){var b=d.length;if(b!==0){if(s=s||f.get("context"),s.beginPath(),u.startArrow&&u.startArrow.d){var _=f.getStartTangent(),x=c.getShortenOffset(_[0][0],_[0][1],_[1][0],_[1][1],u.startArrow.d);d[0].shortenDraw(s,x.dx,x.dy)}else d[0].draw(s);for(var M=1;M<b-2;M++)d[M].draw(s);if(u.endArrow&&u.endArrow.d){var P=f.getEndTangent(),C=c.getShortenOffset(P[0][0],P[0][1],P[1][0],P[1][1],u.endArrow.d),O=d[b-1];O.command.toUpperCase()==="Z"?(d[b-2]&&d[b-2].shortenDraw(s,C.dx,C.dy),O.draw(s)):(b>2&&d[b-2].draw(s),O.shortenDraw(s,C.dx,C.dy))}else d[b-2]&&d[b-2].draw(s),d[b-1].draw(s)}}},afterPath:function(s){var f=this,u=f._attrs,d=f.get("segments"),b=u.path;if(s=s||f.get("context"),!!e.isArray(d)&&d.length!==1&&!(!u.startArrow&&!u.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||u.fill)){var _=f.getStartTangent();c.addStartArrow(s,u,_[0][0],_[0][1],_[1][0],_[1][1]);var x=f.getEndTangent();c.addEndArrow(s,u,x[0][0],x[0][1],x[1][0],x[1][1])}}}),B.exports=r},function(B,L,o){var e=o(1),g=o(9),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={points:null,lineWidth:1},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var c=this,h=c._attrs,i=h.points,r=this.getHitLineWidth();if(!i||i.length===0)return null;var n=Infinity,s=Infinity,f=-Infinity,u=-Infinity;e.each(i,function(b){var _=b[0],x=b[1];_<n&&(n=_),_>f&&(f=_),x<s&&(s=x),x>u&&(u=x)});var d=r/2;return{minX:n-d,minY:s-d,maxX:f+d,maxY:u+d}},createPath:function(c){var h=this,i=h._attrs,r=i.points;r.length<2||(c=c||h.get("context"),c.beginPath(),e.each(r,function(n,s){s===0?c.moveTo(n[0],n[1]):c.lineTo(n[0],n[1])}),c.closePath())}}),B.exports=v},function(B,L,o){var e=o(1),g=o(9),v=o(59),p=o(58),c=function h(i){h.superclass.constructor.call(this,i)};c.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},e.extend(c,g),e.augment(c,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var i=this,r=i._attrs,n=this.getHitLineWidth(),s=r.points;if(!s||s.length===0)return null;var f=Infinity,u=Infinity,d=-Infinity,b=-Infinity;e.each(s,function(x){var M=x[0],P=x[1];M<f&&(f=M),M>d&&(d=M),P<u&&(u=P),P>b&&(b=P)});var _=n/2;return{minX:f-_,minY:u-_,maxX:d+_,maxY:b+_}},_setTcache:function(){var i=this,r=i._attrs,n=r.points,s=0,f=0,u=[],d,b;!n||n.length===0||(e.each(n,function(_,x){n[x+1]&&(s+=p.len(_[0],_[1],n[x+1][0],n[x+1][1]))}),!(s<=0)&&(e.each(n,function(_,x){n[x+1]&&(d=[],d[0]=f/s,b=p.len(_[0],_[1],n[x+1][0],n[x+1][1]),f+=b,d[1]=f/s,u.push(d))}),this.tCache=u))},createPath:function(i){var r=this,n=r._attrs,s=n.points,f;if(!(s.length<2)){var u=s.length-1,d=s[0][0],b=s[0][1],_=s[u][0],x=s[u][1];if(n.startArrow&&n.startArrow.d){var M=v.getShortenOffset(s[0][0],s[0][1],s[1][0],s[1][1],n.startArrow.d);d+=M.dx,b+=M.dy}if(n.endArrow&&n.endArrow.d){var P=v.getShortenOffset(s[u-1][0],s[u-1][1],s[u][0],s[u][1],n.endArrow.d);_-=P.dx,x-=P.dy}for(i=i||r.get("context"),i.beginPath(),i.moveTo(d,b),f=1;f<u;f++)i.lineTo(s[f][0],s[f][1]);i.lineTo(_,x)}},getStartTangent:function(){var i=this.__attrs.points,r=[];return r.push([i[1][0],i[1][1]]),r.push([i[0][0],i[0][1]]),r},getEndTangent:function(){var i=this.__attrs.points,r=i.length-1,n=[];return n.push([i[r-1][0],i[r-1][1]]),n.push([i[r][0],i[r][1]]),n},afterPath:function(i){var r=this,n=r._attrs,s=n.points,f=s.length-1;i=i||r.get("context"),n.startArrow&&v.addStartArrow(i,n,s[1][0],s[1][1],s[0][0],s[0][1]),n.endArrow&&v.addEndArrow(i,n,s[f-1][0],s[f-1][1],s[f][0],s[f][1])},getPoint:function(i){var r=this._attrs,n=r.points,s=this.tCache,f,u;return s||(this._setTcache(),s=this.tCache),e.each(s,function(d,b){i>=d[0]&&i<=d[1]&&(f=(i-d[0])/(d[1]-d[0]),u=b)}),{x:p.at(n[u][0],n[u+1][0],f),y:p.at(n[u][1],n[u+1][1],f)}}}),B.exports=c},function(B,L,o){var e=o(1),g=o(40),v=g.parseRadius,p=o(9),c=function h(i){h.superclass.constructor.call(this,i)};c.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},e.extend(c,p),e.augment(c,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var i=this,r=i._attrs,n=r.x,s=r.y,f=r.width,u=r.height,d=this.getHitLineWidth(),b=d/2;return{minX:n-b,minY:s-b,maxX:n+f+b,maxY:s+u+b}},createPath:function(i){var r=this,n=r._attrs,s=n.x,f=n.y,u=n.width,d=n.height,b=n.radius;if(i=i||r.get("context"),i.beginPath(),b===0)i.rect(s,f,u,d);else{var _=v(b);i.moveTo(s+_.r1,f),i.lineTo(s+u-_.r2,f),_.r2!==0&&i.arc(s+u-_.r2,f+_.r2,_.r2,-Math.PI/2,0),i.lineTo(s+u,f+d-_.r3),_.r3!==0&&i.arc(s+u-_.r3,f+d-_.r3,_.r3,0,Math.PI/2),i.lineTo(s+_.r4,f+d),_.r4!==0&&i.arc(s+_.r4,f+d-_.r4,_.r4,Math.PI/2,Math.PI),i.lineTo(s,f+_.r1),_.r1!==0&&i.arc(s+_.r1,f+_.r1,_.r1,Math.PI,Math.PI*1.5),i.closePath()}}}),B.exports=c},function(B,L,o){var e=o(1),g=o(9),v=function p(c){p.superclass.constructor.call(this,c)};v.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},e.extend(v,g),e.augment(v,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var c=this._attrs.fontSize;c&&+c<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+c/12,+c/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var c=this._attrs,h=c.fontSize,i=c.fontFamily,r=c.fontWeight,n=c.fontStyle,s=c.fontVariant;c.font=[n,s,r,h+"px",i].join(" ")},_setAttrText:function(){var c=this._attrs,h=c.text,i=null;if(e.isString(h))if(h.indexOf(`
`)!==-1){i=h.split(`
`);var r=i.length;c.lineCount=r}else c.lineCount=1;c.textArr=i},_getTextHeight:function(){var c=this._attrs,h=c.lineCount,i=c.fontSize*1;if(h>1){var r=this._getSpaceingY();return i*h+r*(h-1)}return i},isHitBox:function(){return!1},calculateBox:function(){var c=this,h=c._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),h.textArr||this._setAttrText();var r=h.x,n=h.y,s=c.measureText();if(!s)return{minX:r,minY:n,maxX:r,maxY:n};var f=c._getTextHeight(),u=h.textAlign,d=h.textBaseline,b=c.getHitLineWidth(),_={x:r,y:n-f};u&&(u==="end"||u==="right"?_.x-=s:u==="center"&&(_.x-=s/2)),d&&(d==="top"?_.y+=f:d==="middle"&&(_.y+=f/2)),this.set("startPoint",_);var x=b/2;return{minX:_.x-x,minY:_.y-x,maxX:_.x+s+x,maxY:_.y+f+x}},_getSpaceingY:function(){var c=this._attrs,h=c.lineHeight,i=c.fontSize*1;return h?h-i:i*.14},drawInner:function(c){var h=this,i=h._attrs,r=this._cfg;(!r.attrs||r.hasUpdate)&&(this._assembleFont(),this._setAttrText()),c.font=i.font;var n=i.text;if(!!n){var s=i.textArr,f=i.x,u=i.y;if(c.beginPath(),h.hasStroke()){var d=i.strokeOpacity;!e.isNil(d)&&d!==1&&(c.globalAlpha=d),s?h._drawTextArr(c,!1):c.strokeText(n,f,u),c.globalAlpha=1}if(h.hasFill()){var b=i.fillOpacity;!e.isNil(b)&&b!==1&&(c.globalAlpha=b),s?h._drawTextArr(c,!0):c.fillText(n,f,u)}r.hasUpdate=!1}},_drawTextArr:function(c,h){var i=this._attrs.textArr,r=this._attrs.textBaseline,n=this._attrs.fontSize*1,s=this._getSpaceingY(),f=this._attrs.x,u=this._attrs.y,d=this.getBBox(),b=d.maxY-d.minY,_;e.each(i,function(x,M){_=u+M*(s+n)-b+n,r==="middle"&&(_+=b-n-(b-n)/2),r==="top"&&(_+=b-n),h?c.fillText(x,f,_):c.strokeText(x,f,_)})},measureText:function(){var c=this,h=c._attrs,i=h.text,r=h.font,n=h.textArr,s,f=0;if(!e.isNil(i)){var u=document.createElement("canvas").getContext("2d");return u.save(),u.font=r,n?e.each(n,function(d){s=u.measureText(d).width,f<s&&(f=s),u.restore()}):(f=u.measureText(i).width,u.restore()),f}}}),B.exports=v},function(B,L,o){var e=o(3),g=8,v=4;function p(h){var i=[];return e(h,function(r){i=i.concat(r)}),i}function c(h,i){var r;for(r=i;r>0&&h%r!=0;r--);if(r===1)for(r=i;r>0&&(h-1)%r!=0;r--);return r}B.exports=function(h){var i={},r=[],n=h.isRounding,s=p(h.data),f=s.length,u=h.maxCount||g,d;if(n?(d=c(f-1,u-1)+1,d===2?d=u:d<u-v&&(d=u-v)):d=u,!n&&f<=d+d/2)r=[].concat(s);else{for(var b=parseInt(f/(d-1),10),_=s.map(function(C,O){return O%b==0?s.slice(O,O+b):null}).filter(function(C){return C}),x=1,M=_.length;x<M&&(n?x*b<f-b:x<d-1);x++)r.push(_[x][0]);if(s.length){r.unshift(s[0]);var P=s[f-1];r.indexOf(P)===-1&&r.push(P)}}return i.categories=s,i.ticks=r,i}},function(B,L){var o=12;function e(c){var h=1;if(c===Infinity||c===-Infinity)throw new Error("Not support Infinity!");if(c<1){for(var i=0;c<1;)h=h/10,c=c*10,i++;h.toString().length>o&&(h=parseFloat(h.toFixed(i)))}else for(;c>10;)h=h*10,c=c/10;return h}function g(c,h){var i=c.length;if(i===0)return NaN;var r=c[0];if(h<c[0])return NaN;if(h>=c[i-1])return c[i-1];for(var n=1;n<c.length&&!(h<c[n]);n++)r=c[n];return r}function v(c,h){var i=c.length;if(i===0)return NaN;var r;if(h>c[i-1])return NaN;if(h<c[0])return c[0];for(var n=1;n<c.length;n++)if(h<=c[n]){r=c[n];break}return r}var p={snapFactorTo:function(h,i,r){if(isNaN(h))return NaN;var n=1;if(h!==0){h<0&&(n=-1),h=h*n;var s=e(h);n=n*s,h=h/s}r==="floor"?h=p.snapFloor(i,h):r==="ceil"?h=p.snapCeiling(i,h):h=p.snapTo(i,h);var f=parseFloat((h*n).toPrecision(o));if(Math.abs(n)<1&&f.toString().length>o){var u=parseInt(1/n),d=n>0?1:-1;f=h/u*d}return f},snapMultiple:function(h,i,r){var n;return r==="ceil"?n=Math.ceil(h/i):r==="floor"?n=Math.floor(h/i):n=Math.round(h/i),n*i},snapTo:function(h,i){var r=g(h,i),n=v(h,i);if(isNaN(r)||isNaN(n)){if(h[0]>=i)return h[0];var s=h[h.length-1];if(s<=i)return s}return Math.abs(i-r)<Math.abs(n-i)?r:n},snapFloor:function(h,i){return g(h,i)},snapCeiling:function(h,i){return v(h,i)},fixedBase:function(h,i){var r=i.toString(),n=r.indexOf("."),s=r.indexOf("e-");if(n<0&&s<0)return Math.round(h);var f=s>=0?parseInt(r.substr(s+2),10):r.substr(n+1).length;return f>20&&(f=20),parseFloat(h.toFixed(f))}};B.exports=p},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var g=o(28),v=o(199),p=o(3),c=o(11),h=o(15),i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},s.init=function(){var u=this,d=u.values,b=u.tickCount;if(p(d,function(M,P){d[P]=M.toString()}),!u.ticks){var _=d;if(b){var x=v({maxCount:b,data:d,isRounding:u.isRounding});_=x.ticks}this.ticks=_}},s.getText=function(u){return this.values.indexOf(u)===-1&&c(u)&&(u=this.values[Math.round(u)]),r.prototype.getText.call(this,u)},s.translate=function(u){var d=this.values.indexOf(u);return d===-1&&c(u)?d=u:d===-1&&(d=NaN),d},s.scale=function(u){var d=this.rangeMin(),b=this.rangeMax(),_;return(h(u)||this.values.indexOf(u)!==-1)&&(u=this.translate(u)),this.values.length>1?_=u/(this.values.length-1):_=u,d+_*(b-d)},s.invert=function(u){if(h(u))return u;var d=this.rangeMin(),b=this.rangeMax();u<d&&(u=d),u>b&&(u=b);var _=(u-d)/(b-d),x=Math.round(_*(this.values.length-1))%this.values.length;return x=x||0,this.values[x]},n}(g);g.Cat=i,B.exports=i},function(B,L,o){var e=o(222),g=o(28);g.Linear=o(61),g.Identity=o(408),g.Cat=o(201),g.Time=o(412),g.TimeCat=o(411),g.Log=o(409),g.Pow=o(410);var v=function(i){if(g.hasOwnProperty(i)){var r=e(i);g[r]=function(n){return new g[i](n)}}};for(var p in g)v(p);var c=["cat","timeCat"];g.isCategory=function(h){return c.indexOf(h)>=0},B.exports=g},function(B,L,o){var e=o(23),g=Array.prototype.splice,v=function(c,h){if(!e(c))return[];for(var i=c?h.length:0,r=i-1;i--;){var n=void 0,s=h[i];(i===r||s!==n)&&(n=s,g.call(c,s,1))}return c};B.exports=v},function(B,L,o){var e=o(3),g=o(63),v=function(c){var h=[];return e(c,function(i){g(h,i)||h.push(i)}),h};B.exports=v},function(B,L,o){var e=o(3),g=o(5),v=Object.prototype.hasOwnProperty,p=function(h,i){if(!i||!g(h))return h;var r={},n=null;return e(h,function(s){n=i(s),v.call(r,n)?r[n].push(s):r[n]=[s]}),r};B.exports=p},function(B,L,o){var e=o(14),g=o(5),v=o(205),p=function(h,i){if(!i)return{0:h};if(!e(i)){var r=g(i)?i:i.replace(/\s+/g,"").split("*");i=function(f){for(var u="_",d=0,b=r.length;d<b;d++)u+=f[r[d]]&&f[r[d]].toString();return u}}var n=v(h,i);return n};B.exports=p},function(B,L,o){var e=o(206),g=function(p,c){if(!c)return[p];var h=e(p,c),i=[];for(var r in h)i.push(h[r]);return i};B.exports=g},function(B,L,o){var e=o(3),g=o(10),v=o(433),p=o(419),c=o(435),h=o(437),i=o(445),r=o(68),n=o(456),s=o(460),f=o(464),u=o(469),d={DOMUtil:v,DomUtil:v,MatrixUtil:r,PathUtil:s,arrayUtil:p,domUtil:v,eventUtil:c,formatUtil:h,mathUtil:i,matrixUtil:r,objectUtil:n,stringUtil:f,pathUtil:s,typeUtil:u,augment:o(100),clone:o(65),debounce:o(424),deepMix:o(41),each:e,extend:o(104),filter:o(105),group:o(207),groupBy:o(205),groupToMap:o(206),indexOf:o(441),isEmpty:o(106),isEqual:o(66),isEqualWith:o(442),map:o(443),mix:g,pick:o(463),throttle:o(468),toArray:o(43),toString:o(44),uniqueId:o(116)};e([v,p,c,h,i,r,n,s,f,u],function(b){g(d,b)}),B.exports=d},function(B,L,o){var e=o(5),g=o(14),v=o(3),p=function(h,i){if(!!e(h)){var r=h[0],n=void 0;g(i)?n=i(h[0]):n=h[0][i];var s=void 0;return v(h,function(f){g(i)?s=i(f):s=f[i],s>n&&(r=f,n=s)}),r}};B.exports=p},function(B,L){B.exports=parseInt},function(B,L){B.exports=function(o,e){return o.hasOwnProperty(e)}},function(B,L,o){var e=o(213),g=o(7);function v(p,c){var h=e(c),i=h.length;if(g(p))return!i;for(var r=0;r<i;r+=1){var n=h[r];if(c[n]!==p[n]||!(n in p))return!1}return!0}B.exports=v},function(B,L,o){var e=o(3),g=o(14),v=Object.keys?function(p){return Object.keys(p)}:function(p){var c=[];return e(p,function(h,i){g(p)&&i==="prototype"||c.push(i)}),c};B.exports=v},function(B,L,o){var e=o(3),g=o(14),v=Object.values?function(p){return Object.values(p)}:function(p){var c=[];return e(p,function(h,i){g(p)&&i==="prototype"||c.push(h)}),c};B.exports=v},function(B,L){B.exports=function(e,g){for(var v=[],p=0,c=e.length;c-2*!g>p;p+=2){var h=[{x:+e[p-2],y:+e[p-1]},{x:+e[p],y:+e[p+1]},{x:+e[p+2],y:+e[p+3]},{x:+e[p+4],y:+e[p+5]}];g?p?c-4===p?h[3]={x:+e[0],y:+e[1]}:c-2===p&&(h[2]={x:+e[0],y:+e[1]},h[3]={x:+e[2],y:+e[3]}):h[0]={x:+e[c-2],y:+e[c-1]}:c-4===p?h[3]=h[2]:p||(h[0]={x:+e[p],y:+e[p+1]}),v.push(["C",(-h[0].x+6*h[1].x+h[2].x)/6,(-h[0].y+6*h[1].y+h[2].y)/6,(h[1].x+6*h[2].x-h[3].x)/6,(h[1].y+6*h[2].y-h[3].y)/6,h[2].x,h[2].y])}return v}},function(B,L){var o=/,?([a-z]),?/gi;B.exports=function(g){return g.join(",").replace(o,"$1")}},function(B,L){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},e=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,g=new RegExp("([a-z])["+e+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+e+"]*,?["+e+"]*)+)","ig"),v=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+e+"]*,?["+e+"]*","ig");B.exports=function(c){if(!c)return null;if((typeof c=="undefined"?"undefined":o(c))===o([]))return c;var h={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return String(c).replace(g,function(r,n,s){var f=[],u=n.toLowerCase();if(s.replace(v,function(d,b){b&&f.push(+b)}),u==="m"&&f.length>2&&(i.push([n].concat(f.splice(0,2))),u="l",n=n==="m"?"l":"L"),u==="o"&&f.length===1&&i.push([n,f[0]]),u==="r")i.push([n].concat(f));else for(;f.length>=h[u]&&(i.push([n].concat(f.splice(0,h[u]))),!!h[u]););}),i}},function(B,L,o){var e=o(217),g=o(215);function v(p,c,h,i,r){var n=[];if(r===null&&i===null&&(i=h),p=+p,c=+c,h=+h,i=+i,r!==null){var s=Math.PI/180,f=p+h*Math.cos(-i*s),u=p+h*Math.cos(-r*s),d=c+h*Math.sin(-i*s),b=c+h*Math.sin(-r*s);n=[["M",f,d],["A",h,h,0,+(r-i>180),0,u,b]]}else n=[["M",p,c],["m",0,-i],["a",h,i,0,1,1,0,2*i],["a",h,i,0,1,1,0,-2*i],["z"]];return n}B.exports=function(c){if(c=e(c),!c||!c.length)return[["M",0,0]];var h=[],i=0,r=0,n=0,s=0,f=0,u=void 0,d=void 0;c[0][0]==="M"&&(i=+c[0][1],r=+c[0][2],n=i,s=r,f++,h[0]=["M",i,r]);for(var b=c.length===3&&c[0][0]==="M"&&c[1][0].toUpperCase()==="R"&&c[2][0].toUpperCase()==="Z",_,x,M=f,P=c.length;M<P;M++){if(h.push(_=[]),x=c[M],u=x[0],u!==u.toUpperCase())switch(_[0]=u.toUpperCase(),_[0]){case"A":_[1]=x[1],_[2]=x[2],_[3]=x[3],_[4]=x[4],_[5]=x[5],_[6]=+x[6]+i,_[7]=+x[7]+r;break;case"V":_[1]=+x[1]+r;break;case"H":_[1]=+x[1]+i;break;case"R":d=[i,r].concat(x.slice(1));for(var C=2,O=d.length;C<O;C++)d[C]=+d[C]+i,d[++C]=+d[C]+r;h.pop(),h=h.concat(g(d,b));break;case"O":h.pop(),d=v(i,r,x[1],x[2]),d.push(d[0]),h=h.concat(d);break;case"U":h.pop(),h=h.concat(v(i,r,x[1],x[2],x[3])),_=["U"].concat(h[h.length-1].slice(-2));break;case"M":n=+x[1]+i,s=+x[2]+r;break;default:for(var w=1,S=x.length;w<S;w++)_[w]=+x[w]+(w%2?i:r)}else if(u==="R")d=[i,r].concat(x.slice(1)),h.pop(),h=h.concat(g(d,b)),_=["R"].concat(x.slice(-2));else if(u==="O")h.pop(),d=v(i,r,x[1],x[2]),d.push(d[0]),h=h.concat(d);else if(u==="U")h.pop(),h=h.concat(v(i,r,x[1],x[2],x[3])),_=["U"].concat(h[h.length-1].slice(-2));else for(var I=0,j=x.length;I<j;I++)_[I]=x[I];if(u=u.toUpperCase(),u!=="O")switch(_[0]){case"Z":i=+n,r=+s;break;case"H":i=_[1];break;case"V":r=_[1];break;case"M":n=_[_.length-2],s=_[_.length-1];break;default:i=_[_.length-2],r=_[_.length-1]}}return h}},function(B,L,o){var e=o(218),g=function c(h,i,r,n,s,f,u,d,b,_){r===n&&(r+=1);var x=Math.PI*120/180,M=Math.PI/180*(+s||0),P=[],C=void 0,O=void 0,w=void 0,S=void 0,I=void 0,j=function(ae,V,re){var te=ae*Math.cos(re)-V*Math.sin(re),q=ae*Math.sin(re)+V*Math.cos(re);return{x:te,y:q}};if(_)O=_[0],w=_[1],S=_[2],I=_[3];else{C=j(h,i,-M),h=C.x,i=C.y,C=j(d,b,-M),d=C.x,b=C.y,h===d&&i===b&&(d+=1,b+=1);var N=(h-d)/2,W=(i-b)/2,H=N*N/(r*r)+W*W/(n*n);H>1&&(H=Math.sqrt(H),r=H*r,n=H*n);var J=r*r,Q=n*n,ne=(f===u?-1:1)*Math.sqrt(Math.abs((J*Q-J*W*W-Q*N*N)/(J*W*W+Q*N*N)));S=ne*r*W/n+(h+d)/2,I=ne*-n*N/r+(i+b)/2,O=Math.asin(((i-I)/n).toFixed(9)),w=Math.asin(((b-I)/n).toFixed(9)),O=h<S?Math.PI-O:O,w=d<S?Math.PI-w:w,O<0&&(O=Math.PI*2+O),w<0&&(w=Math.PI*2+w),u&&O>w&&(O=O-Math.PI*2),!u&&w>O&&(w=w-Math.PI*2)}var K=w-O;if(Math.abs(K)>x){var ie=w,de=d,we=b;w=O+x*(u&&w>O?1:-1),d=S+r*Math.cos(w),b=I+n*Math.sin(w),P=c(d,b,r,n,s,0,u,de,we,[w,ie,S,I])}K=w-O;var Re=Math.cos(O),_e=Math.sin(O),Ue=Math.cos(w),rt=Math.sin(w),Fe=Math.tan(K/4),Se=4/3*r*Fe,ye=4/3*n*Fe,Oe=[h,i],ue=[h+Se*_e,i-ye*Re],xe=[d+Se*rt,b-ye*Ue],Ae=[d,b];if(ue[0]=2*Oe[0]-ue[0],ue[1]=2*Oe[1]-ue[1],_)return[ue,xe,Ae].concat(P);P=[ue,xe,Ae].concat(P).join().split(",");for(var pe=[],be=0,le=P.length;be<le;be++)pe[be]=be%2?j(P[be-1],P[be],M).y:j(P[be],P[be+1],M).x;return pe},v=function(h,i,r,n){return[h,i,r,n,r,n]},p=function(h,i,r,n,s,f){var u=1/3,d=2/3;return[u*h+d*r,u*i+d*n,u*s+d*r,u*f+d*n,s,f]};B.exports=function(h,i){var r=e(h),n=i&&e(i),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=[],d=[],b="",_="",x=void 0,M=function(W,H,J){var Q=void 0,ne=void 0;if(!W)return["C",H.x,H.y,H.x,H.y,H.x,H.y];switch(!(W[0]in{T:1,Q:1})&&(H.qx=H.qy=null),W[0]){case"M":H.X=W[1],H.Y=W[2];break;case"A":W=["C"].concat(g.apply(0,[H.x,H.y].concat(W.slice(1))));break;case"S":J==="C"||J==="S"?(Q=H.x*2-H.bx,ne=H.y*2-H.by):(Q=H.x,ne=H.y),W=["C",Q,ne].concat(W.slice(1));break;case"T":J==="Q"||J==="T"?(H.qx=H.x*2-H.qx,H.qy=H.y*2-H.qy):(H.qx=H.x,H.qy=H.y),W=["C"].concat(p(H.x,H.y,H.qx,H.qy,W[1],W[2]));break;case"Q":H.qx=W[1],H.qy=W[2],W=["C"].concat(p(H.x,H.y,W[1],W[2],W[3],W[4]));break;case"L":W=["C"].concat(v(H.x,H.y,W[1],W[2]));break;case"H":W=["C"].concat(v(H.x,H.y,W[1],H.y));break;case"V":W=["C"].concat(v(H.x,H.y,H.x,W[1]));break;case"Z":W=["C"].concat(v(H.x,H.y,H.X,H.Y));break;default:break}return W},P=function(W,H){if(W[H].length>7){W[H].shift();for(var J=W[H];J.length;)u[H]="A",n&&(d[H]="A"),W.splice(H++,0,["C"].concat(J.splice(0,6)));W.splice(H,1),x=Math.max(r.length,n&&n.length||0)}},C=function(W,H,J,Q,ne){W&&H&&W[ne][0]==="M"&&H[ne][0]!=="M"&&(H.splice(ne,0,["M",Q.x,Q.y]),J.bx=0,J.by=0,J.x=W[ne][1],J.y=W[ne][2],x=Math.max(r.length,n&&n.length||0))};x=Math.max(r.length,n&&n.length||0);for(var O=0;O<x;O++){r[O]&&(b=r[O][0]),b!=="C"&&(u[O]=b,O&&(_=u[O-1])),r[O]=M(r[O],s,_),u[O]!=="A"&&b==="C"&&(u[O]="C"),P(r,O),n&&(n[O]&&(b=n[O][0]),b!=="C"&&(d[O]=b,O&&(_=d[O-1])),n[O]=M(n[O],f,_),d[O]!=="A"&&b==="C"&&(d[O]="C"),P(n,O)),C(r,n,s,f,O),C(n,r,f,s,O);var w=r[O],S=n&&n[O],I=w.length,j=n&&S.length;s.x=w[I-2],s.y=w[I-1],s.bx=parseFloat(w[I-4])||s.x,s.by=parseFloat(w[I-3])||s.y,f.bx=n&&(parseFloat(S[j-4])||f.x),f.by=n&&(parseFloat(S[j-3])||f.y),f.x=n&&S[j-2],f.y=n&&S[j-1]}return n?[r,n]:r}},function(B,L,o){var e=o(216);B.exports=function(v,p,c,h,i){if(i)return[["M",+v+ +i,p],["l",c-i*2,0],["a",i,i,0,0,1,i,i],["l",0,h-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-c,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-h],["a",i,i,0,0,1,i,-i],["z"]];var r=[["M",v,p],["l",c,0],["l",0,h],["l",-c,0],["z"]];return r.parsePathArray=e,r}},function(B,L,o){var e=o(44),g=function(p){return e(p).toLowerCase()};B.exports=g},function(B,L,o){var e=o(44),g=function(p){var c=e(p);return c.charAt(0).toLowerCase()+c.substring(1)};B.exports=g},function(B,L,o){var e=o(44),g=function(p){return e(p).toUpperCase()};B.exports=g},function(B,L){var o={}.toString,e=function(v){return o.call(v).replace(/^\[object /,"").replace(/\]$/,"")};B.exports=e},function(B,L,o){var e=o(19),g=function(p){return e(p,"Date")};B.exports=g},function(B,L){var o=Object.prototype,e=function(v){var p=v&&v.constructor,c=typeof p=="function"&&p.prototype||o;return v===c};B.exports=e},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default={COORD_FUNC_PROPS:["rotate","scale","reflect","transpose"],GEOM_FUNC_PROPS:["position","color","size","shape","opacity","tooltip","style","animate","active","select","sets"]}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(31),g=c(e),v=o(70),p=c(v);function c(W){return W&&W.__esModule?W:{default:W}}for(var h=[{prop:"onPlotMove",event:"plotmove"},{prop:"onPlotEnter",event:"plotenter"},{prop:"onPlotLeave",event:"plotleave"},{prop:"onPlotClick",event:"plotclick"},{prop:"onPlotDblClick",event:"plotdblclick"},{prop:"onItemSelected",event:"itemselected"},{prop:"onItemUnselected",event:"itemunselected"},{prop:"onItemSelectedChange",event:"itemselectedchange"},{prop:"onTooltipChange",event:"tooltip:change"},{prop:"onTooltipShow",event:"tooltip:show"},{prop:"onTooltipHide",event:"tooltip:hide"}],i=["mouseenter","mousemove","mouseleave","click","dblclick","mousedown","mouseup","touchstart","touchmove","touchend"],r=["Mouseenter","Mousemove","Mouseleave","Click","Dblclick","Mousedown","Mouseup","Touchstart","Touchmove","Touchend"],n=["point","area","line","path","interval","schema","polygon","edge","axis-title","axis-label","axis-ticks","axis-line","axis-grid","legend-title","legend-item","legend-marker","legend-text","guide-text","guide-region","guide-line","guide-image","label"],s=["onPoint","onArea","onLine","onPath","onInterval","onSchema","onPolygon","onEdge","onAxisTitle","onAxisLabel","onAxisTicks","onAxisLine","onAxisGrid","onLegendTitle","onLegendItem","onLegendMarker","onLegendText","onGuideText","onGuideRegion","onGuideLine","onGuideImage","onLabel"],f=[],u=0;u<n.length;u+=1)for(var d=0;d<i.length;d+=1)f.push({prop:""+s[u]+r[d],event:n[u]+":"+i[d]});var b=h.concat(f);function _(){return[{prop:"onMouseEnter",event:"mouseenter"},{prop:"onMouseMove",event:"mousemove"},{prop:"onMouseLeave",event:"mouseleave"},{prop:"onClick",event:"click"},{prop:"onDblClick",event:"dblclick"},{prop:"onMouseDown",event:"mousedown"},{prop:"onMouseUp",event:"mouseup"},{prop:"onTouchStart",event:"touchstart"},{prop:"onTouchMove",event:"touchmove"},{prop:"onTouchEnd",event:"touchend"}]}function x(W){var H=_();return p.default.map(H,function(J){var Q=J.event;return J.event=W+":"+Q,J}),H}var M=_(),P={onMouseEnter:g.default.object,onMouseMove:g.default.object,onMouseLeave:g.default.object,onClick:g.default.oneOfType([g.default.object,g.default.func]),onDblClick:g.default.object,onMouseDown:g.default.object,onMouseUp:g.default.object,onTouchStart:g.default.object,onTouchMove:g.default.object,onTouchEnd:g.default.object},C={onMouseEnter:g.default.func,onMouseMove:g.default.func,onMouseLeave:g.default.func,onClick:g.default.func,onDblClick:g.default.func,onMouseDown:g.default.func,onMouseUp:g.default.func,onTouchStart:g.default.func,onTouchMove:g.default.func,onTouchEnd:g.default.func};function O(W){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=arguments[2];p.default.each(H,function(Q){var ne=Q.prop,K=Q.event,ie=J[ne];if(p.default.isFunction(ie))W.on(K,ie);else if(p.default.isObject(ie))for(var de in ie)ie[de]!==void 0&&W.on(de+":"+K,ie[de])})}function w(W,H){O(W,M,H)}function S(W){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=arguments[2],Q=arguments[3];p.default.each(H,function(ne){var K=ne.prop,ie=ne.event,de=J[K],we=Q[K],Re=void 0;if(!p.default.shallowEqual(de,we)){if(p.default.isFunction(de)&&p.default.isFunction(we))W.off(ie,de),W.on(ie,we);else if(p.default.isObject(de)&&p.default.isObject(we)){for(Re in de)Object.prototype.hasOwnProperty.call(de,Re)&&W.off(Re+":"+ie,de[Re]);for(Re in we)Object.prototype.hasOwnProperty.call(we,Re)&&W.on(Re+":"+ie,we[Re])}}})}function I(W,H,J){S(W,M,H,J)}function j(W){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=arguments[2];p.default.each(H,function(Q){var ne=Q.prop,K=Q.event,ie=J[ne];if(p.default.isFunction(ie))W.off(K,ie);else if(p.default.isObject(ie))for(var de in ie)Object.prototype.hasOwnProperty.call(ie,de)&&W.off(de+":"+K,ie[de])})}function N(W,H){j(W,M,H)}L.default={baseEventObjectTypes:P,baseEventFuncTypes:C,genBaseEvents:_,genItemBaseEvents:x,bindEvents:O,bindBaseEvents:w,updateEvents:S,updateBaseEvents:I,unbindEvents:j,unbindBaseEvents:N,chartEvents:b}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Object.assign||function(M){for(var P=1;P<arguments.length;P++){var C=arguments[P];for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&(M[O]=C[O])}return M},g=o(50),v=u(g),p=o(118),c=o(227),h=f(c),i=o(228),r=f(i),n=o(117),s=f(n);function f(M){return M&&M.__esModule?M:{default:M}}function u(M){if(M&&M.__esModule)return M;var P={};if(M!=null)for(var C in M)Object.prototype.hasOwnProperty.call(M,C)&&(P[C]=M[C]);return P.default=M,P}function d(M){if(Array.isArray(M)){for(var P=0,C=Array(M.length);P<M.length;P++)C[P]=M[P];return C}else return Array.from(M)}function b(M,P){var C={};for(var O in M)P.indexOf(O)>=0||!Object.prototype.hasOwnProperty.call(M,O)||(C[O]=M[O]);return C}var _=h.default.COORD_FUNC_PROPS,x=h.default.GEOM_FUNC_PROPS;L.default={createChart:function(P){var C=P.chart,O=C.props.forceFit;C.props.forceFit=!1;var w=new v.Chart(C.props);return C.props.afterChartInitialized&&C.props.afterChartInitialized(w),O&&w.forceFit(),C.g2Instance=w,w},executeChartConfig:function(P,C){var O=C.chart,w=O.props;P.coord("rect",{}),P.source(w.data,w.scale),(!C.facet&&!w.axis||!C.facet||w.axis===!1)&&P.axis(!1),P.legend(!1),P.tooltip(!1),w.filter&&w.filter.forEach(function(S){P.filter(S[0],S[1])}),r.default.bindEvents(P,r.default.chartEvents,w),r.default.bindBaseEvents(P,w)},coord:function(P,C){var O=C.coord;if(!(!O||O.g2Instance)){var w=O.props,S=w.type,I=b(w,["type"]),j=P.coord(S||"rect",p.Util.without(I,_));p.Prop.init(_,I,function(N,W){W==="reflect"?p.Util.each(N,function(H){return j[W](H)}):W==="transpose"?N[0]===!0&&j[W].apply(j,d(N)):j[W].apply(j,d(N))}),O.g2Instance=j}},createLabel:function(P,C){if(!(!C||C.g2Instance)){var O=C.props,w=O.content,S=b(O,["content"]);w&&(p.Util.isArray(w)?C.g2Instance=P.label(w[0],w[1],S):C.g2Instance=P.label(w,S))}},createGeom:function(P,C){if(C.g2Instance){C.label&&this.createLabel(C.g2Instance,C.label);return}var O=C.props,w=P[O.type||"interval"]();O.adjust&&w.adjust(O.adjust),p.Prop.init(x,O,function(S,I){w[I].apply(w,d(S))}),C.g2Instance=w,this.createLabel(w,C.label)},geoms:function(P,C){var O=C.geoms;if(!!O)for(var w in O)Object.prototype.hasOwnProperty.call(O,w)&&this.createGeom(P,O[w])},legends:function(P,C){var O=C.legends;for(var w in O)if(O[w]){var S=O[w];if(S.g2Instance)return;var I=S.props,j=I.name,N=I.visible,W=b(I,["name","visible"]),H=N;Object.prototype.hasOwnProperty.call(S.props,"visible")||(H=!0);var J=H&&W;S.g2Instance=P.legend.apply(P,d(j?[j,J]:[J]))}},tooltip:function(P,C){var O=C.tooltip;!O||O.g2Instance||(O.g2Instance=P.tooltip(e({},O.props)))},createAxis:function(P,C){if(!C.g2Instance){var O=C.props,w=O.name,S=O.visible,I=b(O,["name","visible"]);S||!Object.prototype.hasOwnProperty.call(C.props,"visible")?C.g2Instance=P.axis(w,I):C.g2Instance=P.axis(w,!1)}},axises:function(P,C){var O=C.axises;for(var w in O)O[w]&&this.createAxis(P,O[w])},views:function(P,C){var O=C.views;for(var w in O)O[w]&&this.createView(P,O[w])},createView:function(P,C){if(C.parentInfo.name!=="Facet"){if(C.g2Instance){C.filter&&C.filter.forEach(function(Q){C.g2Instance.filter(Q[0],Q[1])}),this.coord(C.g2Instance,C),this.axises(C.g2Instance,C),this.geoms(C.g2Instance,C),this.guide(C.g2Instance,C.guide);return}var O=C.props,w=O.scale,S=O.data,I=O.instance,j=O.axis,N=O.filter,W=O.geoms,H=b(O,["scale","data","instance","axis","filter","geoms"]),J=void 0;I?J=I:J=P.view(e({},H)),S&&J.source(S,w),w&&J.scale(w),N&&N.forEach(function(Q){J.filter(Q[0],Q[1])}),j===!0||I||J.axis(!1),C.g2Instance=J,this.coord(J,C),this.axises(J,C),this.geoms(J,C),this.guide(J,C.guide)}},facetView:function(P,C){var O=C.props,w=O.scale,S=O.data,I=O.axis,j=O.geoms,N=b(O,["scale","data","axis","geoms"]);S&&P.source(S,w),w&&P.scale(w),I===!1&&P.axis(!1),this.coord(P,C),this.axises(P,C),this.geoms(P,C),this.guide(P,C.guide),s.default.mergeView(C,!0)},guide:function(P,C){if(!!C){var O=C.elements;for(var w in O)if(O[w]){var S=O[w];if(!S.g2Instance){var I=S.props,j=I.type,N=b(I,["type"]);S.g2Instance=P.guide()[S.type](N)}}}},facet:function(P,C){var O=this,w=C.facet;if(!(!w||w.g2Instance)){var S=w.props,I=S.children,j=S.type,N=b(S,["children","type"]);if(!I){P.facet(j,N);return}var W=C.views,H=null;for(var J in W)if(W[J]&&W[J].parentInfo.name==="Facet"&&W[J].parentInfo.id===w.id){H=W[J];break}H&&(s.default.mergeView(H,!0),N.eachView=function(Q){O.facetView(Q,H)},P.facet(j,N))}},synchronizeG2Add:function(P,C){this.coord(P,C),this.axises(P,C),this.legends(P,C),this.tooltip(P,C),this.geoms(P,C),this.facet(P,C),this.views(P,C),this.guide(P,C.guide)},synchronizeG2Views:function(P,C){var O=C.views;for(var w in O)O[w]&&this.synchronizeG2View(O[w].g2Instance,O[w])},synchronizeG2View:function(P,C){P.clear(),this.clearViewG2Instance(C);var O=C.props,w=O.scale,S=O.data,I=O.instance,j=O.axis,N=O.geoms,W=b(O,["scale","data","instance","axis","geoms"]);S&&P.source(S,w),w&&P.scale(w),j===!0||I||P.axis(!1),this.coord(P,C),this.axises(P,C),this.geoms(P,C),this.guide(P,C.guide)},clearViewG2Instance:function(P){P.coord&&delete P.coord.g2Instance,P.axises&&Object.keys(P.axises).forEach(function(C){delete P.axises[C].g2Instance}),P.geoms&&Object.keys(P.geoms).forEach(function(C){delete P.geoms[C].g2Instance,P.geoms[C].label&&delete P.geoms[C].label.g2Instance}),P.guide&&P.guide.elements&&Object.keys(P.guide.elements).forEach(function(C){delete P.guide.elements[C].g2Instance})}}},function(B,L,o){"use strict";o.d(L,"b",function(){return e}),o.d(L,"a",function(){return g});var e=Math.PI/180,g=180/Math.PI},function(B,L,o){"use strict";L.a=e;function e(g){return(Math.pow(2,-10*g)-.0009765625)*1.0009775171065494}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(123);o.d(L,"interpolate",function(){return e.a});var g=o(233);o.d(L,"interpolateArray",function(){return g.a});var v=o(122);o.d(L,"interpolateBasis",function(){return v.a});var p=o(234);o.d(L,"interpolateBasisClosed",function(){return p.a});var c=o(236);o.d(L,"interpolateDate",function(){return c.a});var h=o(71);o.d(L,"interpolateNumber",function(){return h.a});var i=o(237);o.d(L,"interpolateObject",function(){return i.a});var r=o(513);o.d(L,"interpolateRound",function(){return r.a});var n=o(239);o.d(L,"interpolateString",function(){return n.a});var s=o(515);o.d(L,"interpolateTransformCss",function(){return s.a}),o.d(L,"interpolateTransformSvg",function(){return s.b});var f=o(517);o.d(L,"interpolateZoom",function(){return f.a});var u=o(238);o.d(L,"interpolateRgb",function(){return u.a}),o.d(L,"interpolateRgbBasis",function(){return u.b}),o.d(L,"interpolateRgbBasisClosed",function(){return u.c});var d=o(510);o.d(L,"interpolateHsl",function(){return d.a}),o.d(L,"interpolateHslLong",function(){return d.b});var b=o(511);o.d(L,"interpolateLab",function(){return b.a});var _=o(509);o.d(L,"interpolateHcl",function(){return _.a}),o.d(L,"interpolateHclLong",function(){return _.b});var x=o(508);o.d(L,"interpolateCubehelix",function(){return x.a}),o.d(L,"interpolateCubehelixLong",function(){return x.b});var M=o(512);o.d(L,"quantize",function(){return M.a})},function(B,L,o){"use strict";var e=o(123);L.a=function(g,v){var p=v?v.length:0,c=g?Math.min(p,g.length):0,h=new Array(c),i=new Array(p),r;for(r=0;r<c;++r)h[r]=o.i(e.a)(g[r],v[r]);for(;r<p;++r)i[r]=v[r];return function(n){for(r=0;r<c;++r)i[r]=h[r](n);return i}}},function(B,L,o){"use strict";var e=o(122);L.a=function(g){var v=g.length;return function(p){var c=Math.floor(((p%=1)<0?++p:p)*v),h=g[(c+v-1)%v],i=g[c%v],r=g[(c+1)%v],n=g[(c+2)%v];return o.i(e.b)((p-c/v)*v,h,i,r,n)}}},function(B,L,o){"use strict";L.a=function(e){return function(){return e}}},function(B,L,o){"use strict";L.a=function(e,g){var v=new Date;return e=+e,g-=e,function(p){return v.setTime(e+g*p),v}}},function(B,L,o){"use strict";var e=o(123);L.a=function(g,v){var p={},c={},h;(g===null||typeof g!="object")&&(g={}),(v===null||typeof v!="object")&&(v={});for(h in v)h in g?p[h]=o.i(e.a)(g[h],v[h]):c[h]=v[h];return function(i){for(h in p)c[h]=p[h](i);return c}}},function(B,L,o){"use strict";o.d(L,"b",function(){return h}),o.d(L,"c",function(){return i});var e=o(16),g=o(122),v=o(234),p=o(46);L.a=function r(n){var s=o.i(p.c)(n);function f(u,d){var b=s((u=o.i(e.e)(u)).r,(d=o.i(e.e)(d)).r),_=s(u.g,d.g),x=s(u.b,d.b),M=o.i(p.a)(u.opacity,d.opacity);return function(P){return u.r=b(P),u.g=_(P),u.b=x(P),u.opacity=M(P),u+""}}return f.gamma=r,f}(1);function c(r){return function(n){var s=n.length,f=new Array(s),u=new Array(s),d=new Array(s),b,_;for(b=0;b<s;++b)_=o.i(e.e)(n[b]),f[b]=_.r||0,u[b]=_.g||0,d[b]=_.b||0;return f=r(f),u=r(u),d=r(d),_.opacity=1,function(x){return _.r=f(x),_.g=u(x),_.b=d(x),_+""}}}var h=c(g.a),i=c(v.a)},function(B,L,o){"use strict";var e=o(71),g=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v=new RegExp(g.source,"g");function p(h){return function(){return h}}function c(h){return function(i){return h(i)+""}}L.a=function(h,i){var r=g.lastIndex=v.lastIndex=0,n,s,f,u=-1,d=[],b=[];for(h=h+"",i=i+"";(n=g.exec(h))&&(s=v.exec(i));)(f=s.index)>r&&(f=i.slice(r,f),d[u]?d[u]+=f:d[++u]=f),(n=n[0])===(s=s[0])?d[u]?d[u]+=s:d[++u]=s:(d[++u]=null,b.push({i:u,x:o.i(e.a)(n,s)})),r=v.lastIndex;return r<i.length&&(f=i.slice(r),d[u]?d[u]+=f:d[++u]=f),d.length<2?b[0]?c(b[0].x):p(i):(i=b.length,function(_){for(var x=0,M;x<i;++x)d[(M=b[x]).i]=M.x(_);return d.join("")})}},function(B,L,o){"use strict";L.a=p;var e=o(127),g=o(126),v=function(c,h){return(o.i(g.a)(h)?g.b:p)(c,h)};function p(c,h){var i=h?h.length:0,r=c?Math.min(i,c.length):0,n=new Array(r),s=new Array(i),f;for(f=0;f<r;++f)n[f]=o.i(e.a)(c[f],h[f]);for(;f<i;++f)s[f]=h[f];return function(u){for(f=0;f<r;++f)s[f]=n[f](u);return s}}},function(B,L,o){"use strict";var e=o(124);L.a=function(g){var v=g.length;return function(p){var c=Math.floor(((p%=1)<0?++p:p)*v),h=g[(c+v-1)%v],i=g[c%v],r=g[(c+1)%v],n=g[(c+2)%v];return o.i(e.b)((p-c/v)*v,h,i,r,n)}}},function(B,L,o){"use strict";L.a=function(e){return function(){return e}}},function(B,L,o){"use strict";L.a=function(e,g){var v=new Date;return e=+e,g=+g,function(p){return v.setTime(e*(1-p)+g*p),v}}},function(B,L,o){"use strict";var e=o(127);L.a=function(g,v){var p={},c={},h;(g===null||typeof g!="object")&&(g={}),(v===null||typeof v!="object")&&(v={});for(h in v)h in g?p[h]=o.i(e.a)(g[h],v[h]):c[h]=v[h];return function(i){for(h in p)c[h]=p[h](i);return c}}},function(B,L,o){"use strict";var e=o(16),g=o(124),v=o(241),p=o(34);L.a=function r(n){var s=o.i(p.c)(n);function f(u,d){var b=s((u=o.i(e.e)(u)).r,(d=o.i(e.e)(d)).r),_=s(u.g,d.g),x=s(u.b,d.b),M=o.i(p.a)(u.opacity,d.opacity);return function(P){return u.r=b(P),u.g=_(P),u.b=x(P),u.opacity=M(P),u+""}}return f.gamma=r,f}(1);function c(r){return function(n){var s=n.length,f=new Array(s),u=new Array(s),d=new Array(s),b,_;for(b=0;b<s;++b)_=o.i(e.e)(n[b]),f[b]=_.r||0,u[b]=_.g||0,d[b]=_.b||0;return f=r(f),u=r(u),d=r(d),_.opacity=1,function(x){return _.r=f(x),_.g=u(x),_.b=d(x),_+""}}}var h=c(g.a),i=c(v.a)},function(B,L,o){"use strict";var e=o(72),g=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v=new RegExp(g.source,"g");function p(h){return function(){return h}}function c(h){return function(i){return h(i)+""}}L.a=function(h,i){var r=g.lastIndex=v.lastIndex=0,n,s,f,u=-1,d=[],b=[];for(h=h+"",i=i+"";(n=g.exec(h))&&(s=v.exec(i));)(f=s.index)>r&&(f=i.slice(r,f),d[u]?d[u]+=f:d[++u]=f),(n=n[0])===(s=s[0])?d[u]?d[u]+=s:d[++u]=s:(d[++u]=null,b.push({i:u,x:o.i(e.a)(n,s)})),r=v.lastIndex;return r<i.length&&(f=i.slice(r),d[u]?d[u]+=f:d[++u]=f),d.length<2?b[0]?c(b[0].x):p(i):(i=b.length,function(_){for(var x=0,M;x<i;++x)d[(M=b[x]).i]=M.x(_);return d.join("")})}},function(B,L,o){"use strict";L.a=function(e){return function(){return this.matches(e)}}},function(B,L,o){"use strict";var e=o(20);L.a=function(g){return typeof g=="string"?new e.b([[document.querySelector(g)]],[document.documentElement]):new e.b([[g]],e.c)}},function(B,L,o){"use strict";L.b=v;var e=o(250),g=o(20);L.a=function(){return new g.b(this._enter||this._groups.map(e.a),this._parents)};function v(p,c){this.ownerDocument=p.ownerDocument,this.namespaceURI=p.namespaceURI,this._next=null,this._parent=p,this.__data__=c}v.prototype={constructor:v,appendChild:function(p){return this._parent.insertBefore(p,this._next)},insertBefore:function(p,c){return this._parent.insertBefore(p,c)},querySelector:function(p){return this._parent.querySelector(p)},querySelectorAll:function(p){return this._parent.querySelectorAll(p)}}},function(B,L,o){"use strict";L.a=function(e){return new Array(e.length)}},function(B,L,o){"use strict";L.a=c;var e=o(133);function g(h){return function(){this.style.removeProperty(h)}}function v(h,i,r){return function(){this.style.setProperty(h,i,r)}}function p(h,i,r){return function(){var n=i.apply(this,arguments);n==null?this.style.removeProperty(h):this.style.setProperty(h,n,r)}}L.b=function(h,i,r){return arguments.length>1?this.each((i==null?g:typeof i=="function"?p:v)(h,i,r==null?"":r)):c(this.node(),h)};function c(h,i){return h.style.getPropertyValue(i)||o.i(e.a)(h).getComputedStyle(h,null).getPropertyValue(i)}},function(B,L,o){"use strict";function e(){return[]}L.a=function(g){return g==null?e:function(){return this.querySelectorAll(g)}}},function(B,L,o){"use strict";var e=o(17);L.a=function(g,v){var p=g.__transition,c,h,i=!0,r;if(!!p){v=v==null?null:v+"";for(r in p){if((c=p[r]).name!==v){i=!1;continue}h=c.state>e.a&&c.state<e.b,c.state=e.c,c.timer.stop(),c.on.call(h?"interrupt":"cancel",g,g.__data__,c.index,c.group),delete p[r]}i&&delete g.__transition}}},function(B,L,o){"use strict";var e=o(16),g=o(125);L.a=function(v,p){var c;return(typeof p=="number"?g.b:p instanceof e.f?g.c:(c=o.i(e.f)(p))?(p=c,g.c):g.d)(v,p)}},function(B,L,o){var e;(function(g){"use strict";var v={},p=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,c=/\d\d?/,h=/\d{3}/,i=/\d{4}/,r=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,n=/\[([^]*?)\]/gm,s=function(){};function f(O,w){for(var S=[],I=0,j=O.length;I<j;I++)S.push(O[I].substr(0,w));return S}function u(O){return function(w,S,I){var j=I[O].indexOf(S.charAt(0).toUpperCase()+S.substr(1).toLowerCase());~j&&(w.month=j)}}function d(O,w){for(O=String(O),w=w||2;O.length<w;)O="0"+O;return O}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_=["January","February","March","April","May","June","July","August","September","October","November","December"],x=f(_,3),M=f(b,3);v.i18n={dayNamesShort:M,dayNames:b,monthNamesShort:x,monthNames:_,amPm:["am","pm"],DoFn:function(w){return w+["th","st","nd","rd"][w%10>3?0:(w-w%10!=10)*w%10]}};var P={D:function(O){return O.getDate()},DD:function(O){return d(O.getDate())},Do:function(O,w){return w.DoFn(O.getDate())},d:function(O){return O.getDay()},dd:function(O){return d(O.getDay())},ddd:function(O,w){return w.dayNamesShort[O.getDay()]},dddd:function(O,w){return w.dayNames[O.getDay()]},M:function(O){return O.getMonth()+1},MM:function(O){return d(O.getMonth()+1)},MMM:function(O,w){return w.monthNamesShort[O.getMonth()]},MMMM:function(O,w){return w.monthNames[O.getMonth()]},YY:function(O){return String(O.getFullYear()).substr(2)},YYYY:function(O){return d(O.getFullYear(),4)},h:function(O){return O.getHours()%12||12},hh:function(O){return d(O.getHours()%12||12)},H:function(O){return O.getHours()},HH:function(O){return d(O.getHours())},m:function(O){return O.getMinutes()},mm:function(O){return d(O.getMinutes())},s:function(O){return O.getSeconds()},ss:function(O){return d(O.getSeconds())},S:function(O){return Math.round(O.getMilliseconds()/100)},SS:function(O){return d(Math.round(O.getMilliseconds()/10),2)},SSS:function(O){return d(O.getMilliseconds(),3)},a:function(O,w){return O.getHours()<12?w.amPm[0]:w.amPm[1]},A:function(O,w){return O.getHours()<12?w.amPm[0].toUpperCase():w.amPm[1].toUpperCase()},ZZ:function(O){var w=O.getTimezoneOffset();return(w>0?"-":"+")+d(Math.floor(Math.abs(w)/60)*100+Math.abs(w)%60,4)}},C={D:[c,function(O,w){O.day=w}],Do:[new RegExp(c.source+r.source),function(O,w){O.day=parseInt(w,10)}],M:[c,function(O,w){O.month=w-1}],YY:[c,function(O,w){var S=new Date,I=+(""+S.getFullYear()).substr(0,2);O.year=""+(w>68?I-1:I)+w}],h:[c,function(O,w){O.hour=w}],m:[c,function(O,w){O.minute=w}],s:[c,function(O,w){O.second=w}],YYYY:[i,function(O,w){O.year=w}],S:[/\d/,function(O,w){O.millisecond=w*100}],SS:[/\d{2}/,function(O,w){O.millisecond=w*10}],SSS:[h,function(O,w){O.millisecond=w}],d:[c,s],ddd:[r,s],MMM:[r,u("monthNamesShort")],MMMM:[r,u("monthNames")],a:[r,function(O,w,S){var I=w.toLowerCase();I===S.amPm[0]?O.isPm=!1:I===S.amPm[1]&&(O.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(O,w){w==="Z"&&(w="+00:00");var S=(w+"").match(/([\+\-]|\d\d)/gi),I;S&&(I=+(S[1]*60)+parseInt(S[2],10),O.timezoneOffset=S[0]==="+"?I:-I)}]};C.dd=C.d,C.dddd=C.ddd,C.DD=C.D,C.mm=C.m,C.hh=C.H=C.HH=C.h,C.MM=C.M,C.ss=C.s,C.A=C.a,v.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},v.format=function(O,w,S){var I=S||v.i18n;if(typeof O=="number"&&(O=new Date(O)),Object.prototype.toString.call(O)!=="[object Date]"||isNaN(O.getTime()))throw new Error("Invalid Date in fecha.format");w=v.masks[w]||w||v.masks.default;var j=[];return w=w.replace(n,function(N,W){return j.push(W),"??"}),w=w.replace(p,function(N){return N in P?P[N](O,I):N.slice(1,N.length-1)}),w.replace(/\?\?/g,function(){return j.shift()})},v.parse=function(O,w,S){var I=S||v.i18n;if(typeof w!="string")throw new Error("Invalid format in fecha.parse");if(w=v.masks[w]||w,O.length>1e3)return!1;var j=!0,N={};if(w.replace(p,function(J){if(C[J]){var Q=C[J],ne=O.search(Q[0]);~ne?O.replace(Q[0],function(K){return Q[1](N,K,I),O=O.substr(ne+K.length),K}):j=!1}return C[J]?"":J.slice(1,J.length-1)}),!j)return!1;var W=new Date;N.isPm===!0&&N.hour!=null&&+N.hour!=12?N.hour=+N.hour+12:N.isPm===!1&&+N.hour==12&&(N.hour=0);var H;return N.timezoneOffset!=null?(N.minute=+(N.minute||0)-+N.timezoneOffset,H=new Date(Date.UTC(N.year||W.getFullYear(),N.month||0,N.day||1,N.hour||0,N.minute||0,N.second||0,N.millisecond||0))):H=new Date(N.year||W.getFullYear(),N.month||0,N.day||1,N.hour||0,N.minute||0,N.second||0,N.millisecond||0),H},typeof B!="undefined"&&B.exports?B.exports=v:(e=function(){return v}.call(L,o,L,B),e!==void 0&&(B.exports=e))})(this)},function(B,L,o){"use strict";var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";B.exports=e},function(B,L,o){"use strict";B.exports=o(598)},function(B,L){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(e){typeof window=="object"&&(o=window)}B.exports=o},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r}var g=o(35),v=o(3),p=1/2,c=1/2,h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n._initDefaultCfg=function(){this.marginRatio=p,this.dodgeRatio=c,this.adjustNames=["x","y"]},n.getDodgeOffset=function(f,u,d){var b=this,_=f.pre,x=f.next,M=x-_,P=M*b.dodgeRatio/d,C=b.marginRatio*P,O=1/2*(M-d*P-(d-1)*C)+((u+1)*P+u*C)-1/2*P-1/2*M;return(_+x)/2+O},n.processAdjust=function(f){var u=this,d=f.length,b=u.xField;v(f,function(_,x){for(var M=0,P=_.length;M<P;M++){var C=_[M],O=C[b],w={pre:P===1?O-1:O-.5,next:P===1?O+1:O+.5},S=u.getDodgeOffset(w,x,d);C[b]=S}})},r}(g);g.Dodge=h,B.exports=h},function(B,L,o){var e=o(10),g=o(35),v=o(259),p=o(264),c=o(136),h=o(262),i=o(263);e(g.prototype,c),e(v.prototype,c,h),e(p.prototype,i),g.Jitter=o(261),g.Symmetric=o(265),g.Dodge=v,g.Stack=p,B.exports=g},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var g=o(3),v=o(10),p={merge:o(64)},c=o(35),h=o(136),i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},s.processAdjust=function(u){var d=this,b=p.merge(u);d.adjDataArray=u,d.mergeData=b,d.adjustData(u,b),d.adjFrames=null,d.mergeData=null},s.getAdjustOffset=function(u,d){var b=Math.random(),_=d-u,x=_*.05;return u+x+_*.9*b},s._adjustGroup=function(u,d,b,_){var x=this,M=x.getAdjustRange(d,b,_);g(u,function(P){P[d]=x.getAdjustOffset(M.pre,M.next)})},s.adjustDim=function(u,d,b){var _=this,x=_.groupData(b,u);g(x,function(M,P){P=parseFloat(P),_._adjustGroup(M,u,P,d)})},n}(c);v(i.prototype,h),c.Jitter=i,B.exports=i},function(B,L,o){var e={merge:o(64),values:o(99)},g=o(207),v=o(3);B.exports={processAdjust:function(c){var h=this,i=e.merge(c),r=h.dodgeBy,n=c;r&&(n=g(i,r)),h.cacheMap={},h.adjDataArray=n,h.mergeData=i,h.adjustData(n,i),h.adjDataArray=null,h.mergeData=null},getDistribution:function(c){var h=this,i=h.adjDataArray,r=h.cacheMap,n=r[c];return n||(n={},v(i,function(s,f){var u=e.values(s,c);u.length||u.push(0),v(u,function(d){n[d]||(n[d]=[]),n[d].push(f)})}),r[c]=n),n},adjustDim:function(c,h,i,r,n){var s=this,f=s.getDistribution(c),u=s.groupData(i,c);v(u,function(d,b){b=parseFloat(b);var _;h.length===1?_={pre:h[0]-1,next:h[0]+1}:_=s.getAdjustRange(c,b,h),v(d,function(x){var M=x[c],P=f[M],C=P.indexOf(n);x[c]=s.getDodgeOffset(_,C,P.length)})})}}},function(B,L){B.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(e){var g=this,v=g.xField,p=g.yField||"y",c=g.height,h={};g.reverseOrder&&(e=e.slice(0).reverse());for(var i=0,r=e.length;i<r;i++)for(var n=e[i],s=0,f=n.length;s<f;s++){var u=n[s],d=u.size||g.size,b=d*2/c,_=u[v];h[_]||(h[_]=b/2),u[p]=h[_],h[_]+=b}},processAdjust:function(e){this.yField?this.processStack(e):this.processOneDimStack(e)}}},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.__proto__=i}var g=o(5),v=o(7),p=o(35),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r._initDefaultCfg=function(){this.xField=null,this.yField=null},r.processAdjust=function(s){this.processStack(s)},r.processStack=function(s){var f=this,u=f.xField,d=f.yField,b=s.length,_={positive:{},negative:{}};f.reverseOrder&&(s=s.slice(0).reverse());for(var x=0;x<b;x++)for(var M=s[x],P=0,C=M.length;P<C;P++){var O=M[P],w=O[u]||0,S=O[d],I=w.toString();if(S=g(S)?S[1]:S,!v(S)){var j=S>=0?"positive":"negative";_[j][I]||(_[j][I]=0),O[d]=[_[j][I],S+_[j][I]],_[j][I]+=S}}},i}(p);p.Stack=c,B.exports=c},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var g=o(3),v=o(209),p=o(5),c={merge:o(64)},h=o(35),i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},s._getMax=function(u){var d=this,b=d.mergeData,_=v(b,function(P){var C=P[u];return p(C)?Math.max.apply(null,C):C}),x=_[u],M=p(x)?Math.max.apply(null,x):x;return M},s._getXValuesMax=function(){var u=this,d=u.yField,b=u.xField,_={},x=u.mergeData;return g(x,function(M){var P=M[b],C=M[d],O=p(C)?Math.max.apply(null,C):C;_[P]=_[P]||0,_[P]<O&&(_[P]=O)}),_},s.processAdjust=function(u){var d=this,b=c.merge(u);d.mergeData=b,d._processSymmetric(u),d.mergeData=null},s._processSymmetric=function(u){var d=this,b=d.xField,_=d.yField,x=d._getMax(_),M=u[0][0],P;M&&p(M[_])&&(P=d._getXValuesMax()),g(u,function(C){g(C,function(O){var w=O[_],S;if(p(w)){var I=O[b],j=P[I];S=(x-j)/2;var N=[];g(w,function(W){N.push(S+W)}),O[_]=N}else S=(x-w)/2,O[_]=[S,w+S]})})},n}(h);h.Symmetric=i,B.exports=i},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.__proto__=i}var g=o(15),v=o(137),p=o(36),c=function(h){e(i,h);function i(n){var s;return s=h.call(this,n)||this,s.names=["color"],s.type="color",s.gradient=null,g(s.values)&&(s.linear=!0),s}var r=i.prototype;return r.getLinearValue=function(s){var f=this.gradient;if(!f){var u=this.values;f=v.gradient(u),this.gradient=f}return f(s)},i}(p);B.exports=c},function(B,L,o){function e(p,c){p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.__proto__=c}var g=o(36),v=function(p){e(c,p);function c(h){var i;return i=p.call(this,h)||this,i.names=["opacity"],i.type="opacity",i.gradient=null,i}return c}(g);B.exports=v},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r}var g=o(7),v=o(5),p=o(3),c=o(36),h=function(i){e(r,i);function r(s){var f;return f=i.call(this,s)||this,f.names=["x","y"],f.type="position",f}var n=r.prototype;return n.mapping=function(f,u){var d=this.scales,b=this.coord,_=d[0],x=d[1],M,P,C;if(g(f)||g(u))return[];if(v(u)&&v(f)){M=[],P=[];for(var O=0,w=0,S=f.length,I=u.length;O<S&&w<I;O++,w++)C=b.convertPoint({x:_.scale(f[O]),y:x.scale(u[w])}),M.push(C.x),P.push(C.y)}else if(v(u))f=_.scale(f),P=[],p(u,function(N){N=x.scale(N),C=b.convertPoint({x:f,y:N}),M&&M!==C.x?(v(M)||(M=[M]),M.push(C.x)):M=C.x,P.push(C.y)});else if(v(f))u=x.scale(u),M=[],p(f,function(N){N=_.scale(N),C=b.convertPoint({x:N,y:u}),P&&P!==C.y?(v(P)||(P=[P]),P.push(C.y)):P=C.y,M.push(C.x)});else{f=_.scale(f),u=x.scale(u);var j=b.convertPoint({x:f,y:u});M=j.x,P=j.y}return[M,P]},r}(c);B.exports=h},function(B,L,o){function e(p,c){p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.__proto__=c}var g=o(36),v=function(p){e(c,p);function c(i){var r;return r=p.call(this,i)||this,r.names=["shape"],r.type="shape",r.gradient=null,r}var h=c.prototype;return h.getLinearValue=function(r){var n=this.values,s=Math.round((n.length-1)*r);return n[s]},c}(g);B.exports=v},function(B,L,o){function e(p,c){p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.__proto__=c}var g=o(36),v=function(p){e(c,p);function c(h){var i;return i=p.call(this,h)||this,i.names=["size"],i.type="size",i.gradient=null,i}return c}(g);B.exports=v},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,g(i,r)}function g(i,r){return g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},g(i,r)}var v=o(4),p=o(37),c=v.MatrixUtil.vec2,h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return v.mix({},f,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},n.parseTick=function(f,u,d){return{text:f,value:u/d}},n._getCirclePoint=function(f,u){var d=this,b=d.get("center");return u=u||d.get("radius"),{x:b.x+Math.cos(f)*u,y:b.y+Math.sin(f)*u}},n.getTickPoint=function(f){var u=this,d=u.get("startAngle"),b=u.get("endAngle"),_=d+(b-d)*f;return u._getCirclePoint(_)},n.getSideVector=function(f,u){var d=this,b=d.get("center"),_=[u.x-b.x,u.y-b.y];if(!v.isNil(f)){var x=c.length(_);c.scale(_,_,f/x)}return _},n.getSidePoint=function(f,u){var d=this,b=d.getSideVector(u,f);return{x:f.x+b[0],y:f.y+b[1]}},n.getTickEnd=function(f,u){var d=this,b=d.get("tickLine");return u=u||b.length,d.getSidePoint(f,u)},n.getTextAnchor=function(f){var u;return v.snapEqual(f[0],0)?u="center":f[0]>0?u="left":f[0]<0&&(u="right"),u},n.getLinePath=function(){var f=this,u=f.get("center"),d=u.x,b=u.y,_=f.get("radius"),x=_,M=f.get("startAngle"),P=f.get("endAngle"),C=f.get("inner"),O=[];if(Math.abs(P-M)===Math.PI*2)O=[["M",d,b],["m",0,-x],["a",_,x,0,1,1,0,2*x],["a",_,x,0,1,1,0,-2*x],["z"]];else{var w=f._getCirclePoint(M),S=f._getCirclePoint(P),I=Math.abs(P-M)>Math.PI?1:0,j=M>P?0:1;if(!C)O=[["M",d,b],["L",w.x,w.y],["A",_,x,0,I,j,S.x,S.y],["L",d,b]];else{var N=f.getSideVector(C*_,w),W=f.getSideVector(C*_,S),H={x:N[0]+d,y:N[1]+b},J={x:W[0]+d,y:W[1]+b};O=[["M",H.x,H.y],["L",w.x,w.y],["A",_,x,0,I,j,S.x,S.y],["L",J.x,J.y],["A",_*C,x*C,0,I,Math.abs(j-1),H.x,H.y]]}}return O},n.addLabel=function(f,u,d){var b=this,_=b.get("label").offset||b.get("_labelOffset")||.001;u=b.getSidePoint(u,_),i.prototype.addLabel.call(this,f,u,d)},n.autoRotateLabels=function(){var f=this,u=f.get("ticks"),d=f.get("labelRenderer");if(d&&u.length>12){var b=f.get("radius"),_=f.get("startAngle"),x=f.get("endAngle"),M=x-_,P=M/(u.length-1),C=Math.sin(P/2)*b*2,O=f.getMaxLabelWidth(d);v.each(d.get("group").get("children"),function(w,S){var I=u[S],j=I.value*M+_,N=j%(Math.PI*2);O<C?(N<=0&&(j=j+Math.PI),N>Math.PI&&(j=j-Math.PI),j=j-Math.PI/2,w.attr("textAlign","center")):N>Math.PI/2?j=j-Math.PI:N<Math.PI/2*-1&&(j=j+Math.PI),w.rotateAtStart(j)})}},r}(p);B.exports=h},function(B,L,o){function e(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,g(n,s)}function g(n,s){return g=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},g(n,s)}var v=o(4),p=o(37),c=v.MatrixUtil,h=v.PathUtil,i=c.vec2,r=function(n){e(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return v.mix({},d,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},f.getLinePath=function(){var d=this,b=d.get("crp"),_=d.get("axisStart"),x=h.catmullRomToBezier(b);return x.unshift(["M",_.x,_.y]),x},f.getTickPoint=function(d){var b=this,_=b.get("startAngle"),x=b.get("endAngle"),M=_+(x-_)*d;return b._getHelixPoint(M)},f._getHelixPoint=function(d){var b=this,_=b.get("center"),x=b.get("a"),M=x*d+b.get("inner");return{x:_.x+Math.cos(d)*M,y:_.y+Math.sin(d)*M}},f.getSideVector=function(d,b){var _=this,x=_.get("center"),M=[b.x-x.x,b.y-x.y];if(d){var P=i.length(M);i.scale(M,M,d/P)}return M},f.getSidePoint=function(d,b){var _=this,x=_.getSideVector(b,d);return{x:d.x+x[0],y:d.y+x[1]}},f.getTickEnd=function(d,b){var _=this,x=_.get("tickLine");return b=b||x.length,_.getSidePoint(d,b)},s}(p);B.exports=r},function(B,L,o){var e=o(37);e.Base=e,e.Circle=o(271),e.Grid=o(138),e.Helix=o(272),e.Line=o(274),e.Polyline=o(275),B.exports=e},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,g(r,n)}function g(r,n){return g=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},g(r,n)}var v=o(37),p=o(4),c=p.MatrixUtil,h=c.vec2,i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return p.mix({},u,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},s._getAvgLabelLength=function(u){var d=u.get("group").get("children");return d[1].attr("x")-d[0].attr("x")},s._getAvgLabelHeightSpace=function(u){var d=u.get("group").get("children");return d[1].attr("y")-d[0].attr("y")},s.getSideVector=function(u){var d=this,b=d.get("isVertical"),_=d.get("factor");if(!p.isNumber(u))return[0,0];var x=d.get("start"),M=d.get("end"),P=d.getAxisVector(),C=h.normalize([],P),O=!1;(b&&x.y<M.y||!b&&x.x>M.x)&&(O=!0);var w=h.vertical([],C,O);return h.scale([],w,u*_)},s.getAxisVector=function(){var u=this.get("start"),d=this.get("end");return[d.x-u.x,d.y-u.y]},s.getLinePath=function(){var u=this,d=u.get("start"),b=u.get("end"),_=[];return _.push(["M",d.x,d.y]),_.push(["L",b.x,b.y]),_},s.getTickEnd=function(u,d){var b=this,_=b.getSideVector(d);return{x:u.x+_[0],y:u.y+_[1]}},s.getTickPoint=function(u){var d=this,b=d.get("start"),_=d.get("end"),x=_.x-b.x,M=_.y-b.y;return{x:b.x+x*u,y:b.y+M*u}},s.renderTitle=function(){var u=this,d=u.get("title"),b=u.getTickPoint(.5),_=d.offset;if(p.isNil(_)){_=20;var x=u.get("labelsGroup");if(x){var M=u.getMaxLabelWidth(x),P=u.get("label").offset||u.get("_labelOffset");_+=M+P}}var C=d.textStyle,O=p.mix({},C);if(d.text){var w=u.getAxisVector();if(d.autoRotate&&p.isNil(C.rotate)){var S=0;if(!p.snapEqual(w[1],0)){var I=[1,0],j=[w[0],w[1]];S=h.angleTo(j,I,!0)}O.rotate=S*(180/Math.PI)}else p.isNil(C.rotate)||(O.rotate=C.rotate/180*Math.PI);var N=u.getSideVector(_),W,H=d.position;H==="start"?W={x:this.get("start").x+N[0],y:this.get("start").y+N[1]}:H==="end"?W={x:this.get("end").x+N[0],y:this.get("end").y+N[1]}:W={x:b.x+N[0],y:b.y+N[1]},O.x=W.x,O.y=W.y,O.text=d.text;var J=u.get("group"),Q=J.addShape("Text",{zIndex:2,attrs:O});Q.name="axis-title",u.get("appendInfo")&&Q.setSilent("appendInfo",u.get("appendInfo"))}},s.autoRotateLabels=function(){var u=this,d=u.get("labelRenderer"),b=u.get("title");if(d){var _=d.get("group"),x=_.get("children"),M=u.get("label").offset,P=12,C=b?b.offset:48;if(C<0)return;var O=u.getAxisVector(),w,S;if(p.snapEqual(O[0],0)&&b&&b.text)S=u.getMaxLabelWidth(d),S>C-M-P&&(w=Math.acos((C-M-P)/S)*-1);else if(p.snapEqual(O[1],0)&&x.length>1){var I=Math.abs(u._getAvgLabelLength(d));S=u.getMaxLabelWidth(d),S>I&&(w=Math.asin((C-M-P)*1.25/S))}if(w){var j=u.get("factor");p.each(x,function(N){N.rotateAtStart(w),p.snapEqual(O[1],0)&&(j>0?N.attr("textAlign","left"):N.attr("textAlign","right"))})}}},s.autoHideLabels=function(){var u=this,d=u.get("labelRenderer"),b,_,x=8;if(d){var M=d.get("group"),P=M.get("children"),C=u.getAxisVector();if(P.length<2)return;if(p.snapEqual(C[0],0)){var O=u.getMaxLabelHeight(d)+x,w=Math.abs(u._getAvgLabelHeightSpace(d));O>w&&(b=O,_=w)}else if(p.snapEqual(C[1],0)&&P.length>1){var S=u.getMaxLabelWidth(d)+x,I=Math.abs(u._getAvgLabelLength(d));S>I&&(b=S,_=I)}if(b&&_){var j=Math.ceil(b/_);p.each(P,function(N,W){W%j!=0&&N.attr("text","")})}}},n}(v);B.exports=i},function(B,L,o){function e(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,g(n,s)}function g(n,s){return g=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},g(n,s)}var v=o(4),p=o(37),c=v.MatrixUtil,h=v.PathUtil,i=c.vec2,r=function(n){e(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return v.mix({},d,{type:"polyline"})},f.getLinePath=function(){var d=this,b=d.get("tickPoints"),_=d.get("start"),x=d.get("end"),M=[];M.push(_.x),M.push(_.y),v.each(b,function(C){M.push(C.x),M.push(C.y)}),M.push(x.x),M.push(x.y);var P=h.catmullRomToBezier(M);return P.unshift(["M",_.x,_.y]),P},f.getTickPoint=function(d,b){var _=this.get("tickPoints");return _[b]},f.getTickEnd=function(d,b,_){var x=this,M=x.get("tickLine"),P=b||M.length,C=x.getSideVector(P,d,_);return{x:d.x+C[0],y:d.y+C[1]}},f.getSideVector=function(d,b,_){var x=this,M;if(_===0){if(M=x.get("start"),M.x===b.x&&M.y===b.y)return[0,0]}else{var P=x.get("tickPoints");M=P[_-1]}var C=[b.x-M.x,b.y-M.y],O=i.normalize([],C),w=i.vertical([],O,!1);return i.scale([],w,d)},s}(p);B.exports=r},function(B,L,o){function e(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,g(n,s)}function g(n,s){return g=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},g(n,s)}var v=o(4),p=o(22),c=Math.PI,h=Math.atan;function i(n,s){var f=n.x-s.x,u=n.y-s.y,d;return u===0?f<0?d=c/2:d=270*c/180:f>=0&&u>0?d=c*2-h(f/u):f<=0&&u<0?d=c-h(f/u):f>0&&u<0?d=c+h(-f/u):f<0&&u>0&&(d=h(f/-u)),d}var r=function(n){e(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return v.mix({},d,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},f.render=function(d,b){var _=this,x=_.parsePoint(d,_.get("start")),M=_.parsePoint(d,_.get("end"));if(!(!x||!M)){var P=d.getCenter(),C=Math.sqrt((x.x-P.x)*(x.x-P.x)+(x.y-P.y)*(x.y-P.y)),O,w=i(x,P),S=i(M,P);if(S<w&&(S+=c*2),v.isNumberEqual(x.x,M.x)&&v.isNumberEqual(x.y,M.y)&&(_.get("start")[0]!==_.get("end")[0]||_.get("start")[1]!==_.get("end")[1]))O=[["M",x.x,x.y],["A",C,C,0,1,1,2*P.x-x.x,2*P.y-x.y],["A",C,C,0,1,1,x.x,x.y]];else{var I=(S-w)%(c*2),j=I>c?1:0;O=[["M",x.x,x.y],["A",C,C,0,j,1,M.x,M.y]]}var N=b.addShape("path",{zIndex:_.get("zIndex"),attrs:v.mix({path:O},_.get("style"))});N.name="guide-arc",_.get("appendInfo")&&N.setSilent("appendInfo",_.get("appendInfo")),_.set("el",N)}},s}(p);B.exports=r},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(4),p=o(22),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return v.mix({},s,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},r.render=function(s,f){var u=this,d=u.parsePoint(s,u.get("position"));if(!!d){var b=f.addGroup();b.name="guide-data-marker";var _=u._getElementPosition(d),x=u.get("display"),M,P;if(x.line){var C=_.line;M=u._drawLine(C,b)}if(x.text&&u.get("content")){var O=_.text;P=u._drawText(O,b)}if(x.point){var w=_.point;u._drawPoint(w,b)}if(u.get("autoAdjust")){var S=b.getBBox(),I=S.minX,j=S.minY,N=S.maxX,W=S.maxY,H=s.start,J=s.end;if(P){I<=H.x&&P.attr("textAlign","start"),N>=J.x&&P.attr("textAlign","end");var Q=u.get("direction");if(Q==="upward"&&j<=J.y||Q!=="upward"&&W>=H.y){var ne,K;Q==="upward"&&j<=J.y?(ne="top",K=1):(ne="bottom",K=-1),P.attr("textBaseline",ne);var ie=0;if(u.get("display").line){ie=u.get("lineLength");var de=[["M",d.x,d.y],["L",d.x,d.y+ie*K]];M.attr("path",de)}var we=d.y+(ie+2)*K;P.attr("y",we)}}}u.get("appendInfo")&&b.setSilent("appendInfo",u.get("appendInfo")),u.set("el",b)}},r._getElementPosition=function(s){var f=this,u=s.x,d=s.y,b=f.get("display").line?f.get("lineLength"):0,_=f.get("direction"),x=f.get("style").text;x.textBaseline=_==="upward"?"bottom":"top";var M=_==="upward"?-1:1,P={x:u,y:d},C={x:u,y:d},O={x:u,y:b*M+d},w={x:u,y:(b+2)*M+d};return{point:P,line:[C,O],text:w}},r._drawLine=function(s,f){var u=this,d=u.get("style").line,b=[["M",s[0].x,s[0].y],["L",s[1].x,s[1].y]],_=f.addShape("path",{attrs:v.mix({path:b},d)});return _},r._drawText=function(s,f){var u=this,d=this.get("style").text,b=f.addShape("text",{attrs:v.mix({text:u.get("content")},d,s)});return b},r._drawPoint=function(s,f){var u=this,d=u.get("style").point,b=f.addShape("circle",{attrs:v.mix({},d,s)});return b},i}(p);B.exports=c},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,g(i,r)}function g(i,r){return g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},g(i,r)}var v=o(4),p=o(139),c=o(22),h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return v.mix({},f,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},n.render=function(f,u,d){var b=this,_=b.get("lineLength")||0,x=b._getRegionData(f,d);if(!!x.length){var M=b._getBBox(x),P=[];P.push(["M",x[0].x,M.yMin-_]);for(var C=0,O=x.length;C<O;C++){var w=["L",x[C].x,x[C].y];P.push(w)}P.push(["L",x[x.length-1].x,M.yMin-_]);var S=b.get("style"),I=S.region,j=S.text,N=u.addGroup();N.name="guide-data-region",N.addShape("path",{attrs:v.mix({path:P},I)});var W=b.get("content");W&&N.addShape("Text",{attrs:v.mix({x:(M.xMin+M.xMax)/2,y:M.yMin-_,text:W},j)}),b.get("appendInfo")&&N.setSilent("appendInfo",b.get("appendInfo")),b.set("el",N)}},n._getRegionData=function(f,u){for(var d=this,b=d.get("start"),_=d.get("end"),x=p.getFirstScale(d.get("xScales")).field,M=p.getFirstScale(d.get("yScales")).field,P=v.isArray(b)?b[0]:b[x],C=v.isArray(_)?_[0]:_[x],O,w=[],S=0,I=u.length;S<I;S++){var j=u[S];if(j[x]===P&&(O=S),S>=O){var N=d.parsePoint(f,[j[x],j[M]]);N&&w.push(N)}if(j[x]===C)break}return w},n._getBBox=function(f){for(var u=[],d=[],b=0;b<f.length;b++)u.push(f[b].x),d.push(f[b].y);var _=v.arrayUtil.getRange(u),x=v.arrayUtil.getRange(d);return{xMin:_.min,xMax:_.max,yMin:x.min,yMax:x.max}},r}(c);B.exports=h},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,g(i,r)}function g(i,r){return g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},g(i,r)}var v=o(4),p=v.DomUtil,c=o(22),h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return v.mix({},f,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},n.render=function(f,u){var d=this,b=d.parsePoint(f,d.get("position"));if(!!b){var _=u.get("canvas").get("el").parentNode,x=p.createDom('<div class="g-guide"></div>');_.appendChild(x);var M=d.get("htmlContent")||d.get("html");if(v.isFunction(M)){var P=d.get("xScales"),C=d.get("yScales");M=M(P,C)}var O=p.createDom(M);x.appendChild(O),p.modifyCSS(x,{position:"absolute"}),d._setDomPosition(x,O,b),d.set("el",x)}},n._setDomPosition=function(f,u,d){var b=this,_=b.get("alignX"),x=b.get("alignY"),M=p.getOuterWidth(u),P=p.getOuterHeight(u),C={x:d.x,y:d.y};_==="middle"&&x==="top"?C.x-=Math.round(M/2):_==="middle"&&x==="bottom"?(C.x-=Math.round(M/2),C.y-=Math.round(P)):_==="left"&&x==="bottom"?C.y-=Math.round(P):_==="left"&&x==="middle"?C.y-=Math.round(P/2):_==="left"&&x==="top"?(C.x=d.x,C.y=d.y):_==="right"&&x==="bottom"?(C.x-=Math.round(M),C.y-=Math.round(P)):_==="right"&&x==="middle"?(C.x-=Math.round(M),C.y-=Math.round(P/2)):_==="right"&&x==="top"?C.x-=Math.round(M):(C.x-=Math.round(M/2),C.y-=Math.round(P/2));var O=b.get("offsetX");O&&(C.x+=O);var w=b.get("offsetY");w&&(C.y+=w),p.modifyCSS(f,{top:Math.round(C.y)+"px",left:Math.round(C.x)+"px",visibility:"visible",zIndex:b.get("zIndex")})},n.clear=function(){var f=this,u=f.get("el");u&&u.parentNode&&u.parentNode.removeChild(u)},r}(c);B.exports=h},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(4),p=o(22),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return v.mix({},s,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},r.render=function(s,f){var u=this,d=u.parsePoint(s,u.get("start"));if(!!d){var b={x:d.x,y:d.y};if(b.img=u.get("src"),!u.get("end"))b.width=u.get("width")||32,b.height=u.get("height")||32;else{var _=u.parsePoint(s,u.get("end"));if(!_)return;b.width=_.x-d.x,b.height=_.y-d.y}u.get("offsetX")&&(b.x+=u.get("offsetX")),u.get("offsetY")&&(b.y+=u.get("offsetY"));var x=f.addShape("Image",{zIndex:1,attrs:b});x.name="guide-image",u.get("appendInfo")&&x.setSilent("appendInfo",u.get("appendInfo")),u.set("el",x)}},i}(p);B.exports=c},function(B,L,o){B.exports={Guide:o(22),Arc:o(276),DataMarker:o(277),DataRegion:o(278),Html:o(279),Image:o(280),Line:o(282),Region:o(283),Text:o(284)}},function(B,L,o){function e(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,g(n,s)}function g(n,s){return g=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},g(n,s)}var v=o(4),p=o(22),c=v.MatrixUtil.vec2,h=o(21),i=h.FONT_FAMILY,r=function(n){e(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return v.mix({},d,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:i},content:null}})},f.render=function(d,b){var _=this,x=_.parsePoint(d,_.get("start")),M=_.parsePoint(d,_.get("end"));if(!(!x||!M)){var P=b.addGroup({viewId:b.get("viewId")});_._drawLines(x,M,P);var C=_.get("text");C&&C.content&&_._drawText(x,M,P),_.set("el",P)}},f._drawLines=function(d,b,_){var x=[["M",d.x,d.y],["L",b.x,b.y]],M=_.addShape("Path",{attrs:v.mix({path:x},this.get("lineStyle"))});M.name="guide-line",this.get("appendInfo")&&M.setSilent("appendInfo",this.get("appendInfo"))},f._drawText=function(d,b,_){var x=this.get("text"),M=x.position,P=x.style||{},C;M==="start"?C=0:M==="center"?C=.5:v.isString(M)&&M.indexOf("%")!==-1?C=parseInt(M,10)/100:v.isNumber(M)?C=M:C=1,(C>1||C<0)&&(C=1);var O={x:d.x+(b.x-d.x)*C,y:d.y+(b.y-d.y)*C};if(x.offsetX&&(O.x+=x.offsetX),x.offsetY&&(O.y+=x.offsetY),O.text=x.content,O=v.mix({},O,P),x.autoRotate&&v.isNil(P.rotate)){var w=c.angleTo([b.x-d.x,b.y-d.y],[1,0],1);O.rotate=w}else v.isNil(P.rotate)||(O.rotate=P.rotate*Math.PI/180);var S=_.addShape("Text",{attrs:O});S.name="guide-line-text",this.get("appendInfo")&&S.setSilent("appendInfo",this.get("appendInfo"))},s}(p);B.exports=r},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(4),p=o(22),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return v.mix({},s,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},r.render=function(s,f){var u=this,d=u.get("style"),b=u._getPath(s);if(!!b.length){var _=f.addShape("path",{zIndex:u.get("zIndex"),attrs:v.mix({path:b},d)});_.name="guide-region",u.get("appendInfo")&&_.setSilent("appendInfo",u.get("appendInfo")),u.set("el",_)}},r._getPath=function(s){var f=this,u=f.parsePoint(s,f.get("start")),d=f.parsePoint(s,f.get("end"));if(!u||!d)return[];var b=[["M",u.x,u.y],["L",d.x,u.y],["L",d.x,d.y],["L",u.x,d.y],["z"]];return b},i}(p);B.exports=c},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(4),p=o(22),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return v.mix({},s,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},r.render=function(s,f){var u=this,d=u.parsePoint(s,u.get("position"));if(!!d){var b=v.mix({},u.get("style")),_=u.get("offsetX"),x=u.get("offsetY");_&&(d.x+=_),x&&(d.y+=x),b.rotate&&(b.rotate=b.rotate*Math.PI/180);var M=f.addShape("Text",{zIndex:u.get("zIndex"),attrs:v.mix({text:u.get("content")},b,d)});M.name="guide-text",u.get("appendInfo")&&M.setSilent("appendInfo",u.get("appendInfo")),u.set("el",M)}},i}(p);B.exports=c},function(B,L,o){var e=o(140);B.exports=e},function(B,L){B.exports=function(e,g){for(var v,p,c=[],h=0;h<e.length;h++)v=e[h].getBBox(),p=g[h].getBBox(),(v.width>p.width||v.height>p.height||v.width*v.height>p.width*p.height)&&c.push(e[h]);for(var i=0;i<c.length;i++)c[i].remove()}},function(B,L,o){var e=o(141);function g(v,p,c,h){var i=v.getBBox(),r=i.width,n=i.height,s={x:p,y:c,textAlign:"center"};switch(h){case 0:s.y-=n/2,s.textAlign="left";break;case 1:s.y-=n/2,s.textAlign="right";break;case 2:s.y+=n/2,s.textAlign="right";break;case 3:s.y+=n/2,s.textAlign="left";break;case 5:s.y-=n/2;break;case 6:s.y+=n/2;break;case 7:s.x+=r/2,s.textAlign="left";break;case 8:s.x-=r/2,s.textAlign="right";break;default:break}return v.attr(s),v.getBBox()}B.exports=function(v){for(var p=new e,c=[],h,i,r,n,s,f=0;f<v.length;f++){i=v[f],r=i.attr("x"),n=i.attr("y"),s=!1;for(var u=0;u<8;u++)if(h=g(i,r,n,u),p.hasGap(h)){p.fillGap(h),s=!0;break}s||c.push(i)}for(var d=0;d<c.length;d++)c[d].remove();return s}},function(B,L,o){var e=o(141),g=20;function v(p,c){var h=-1,i=p.attr("x"),r=p.attr("y"),n=p.getBBox(),s=Math.sqrt(n.width*n.width+n.height*n.height),f,u=-h,d=0,b=0,_=function(C){return[(C*=.1)*Math.cos(C),C*Math.sin(C)]};if(c.hasGap(n))return c.fillGap(n),!0;for(var x=!1,M=0;Math.min(Math.abs(d),Math.abs(b))<s&&M<g;)if(f=_(u+=h),d=~~f[0],b=~~f[1],p.attr({x:i+d,y:r+b}),M++,c.hasGap(p.getBBox())){c.fillGap(n),x=!0;break}return x}B.exports=function(p){for(var c,h=new e,i=[],r=0;r<p.length;r++)c=p[r],v(c,h)||i.push(c);for(var n=0;n<i.length;n++)i[n].remove()}},function(B,L,o){function e(x,M){x.prototype=Object.create(M.prototype),x.prototype.constructor=x,g(x,M)}function g(x,M){return g=Object.setPrototypeOf||function(C,O){return C.__proto__=O,C},g(x,M)}var v=o(4),p=o(143),c=o(21),h=c.FONT_FAMILY,i=v.DomUtil,r="g2-legend-list",n="g2-slip",s="g2-caret-up",f="g2-caret-down",u="rgba(0,0,0,0.65)",d="rgba(0,0,0,0.25)";function b(x,M){return x.getElementsByClassName(M)[0]}var _=function(x){e(M,x);function M(){return x.apply(this,arguments)||this}var P=M.prototype;return P.getDefaultCfg=function(){var O=x.prototype.getDefaultCfg.call(this);return v.mix({},O,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:h,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+n+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},P.render=function(){x.prototype._renderHTML.call(this),this._renderFlipPage()},P._renderFlipPage=function(){var O=this.get("legendWrapper"),w=b(O,r),S=this.get("position"),I=this.get("layout"),j=S==="right"||S==="left"||I==="vertical",N=j?"block":"inline-block",W=O.offsetHeight;if(O.scrollHeight>W){var H=this.get("slipTpl"),J=i.createDom(H),Q=b(J,s),ne=b(J,f);i.modifyCSS(Q,this.get("caretStyle")),i.modifyCSS(Q,{fill:"rgba(0,0,0,0.25)"}),i.modifyCSS(ne,this.get("caretStyle"));var K=b(J,"cur-pagenum"),ie=b(J,"next-pagenum"),de=this.get("pageNumStyle");if(i.modifyCSS(K,v.mix({},de,{paddingLeft:"10px"})),i.modifyCSS(ie,v.mix({},de,{opacity:.3,paddingRight:"10px"})),i.modifyCSS(J,v.mix({},this.get("slipDomStyle"),j?{top:W+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),O.style.overflow=this.get("legendOverflow"),O.appendChild(J),!j){var we=Math.max(O.offsetWidth-10-J.offsetWidth,0);i.modifyCSS(w,{maxWidth:we+"px"})}for(var Re=w.childNodes,_e=0,Ue=1,rt=[],Fe=0;Fe<Re.length;Fe++)Re[Fe].style.display=N,_e=Re[Fe].offsetTop+Re[Fe].offsetHeight,_e>W&&(Ue++,rt.forEach(function(Se){Se.style.display="none"}),rt=[]),rt.push(Re[Fe]);ie.innerText="/"+Ue,Re.forEach(function(Se){Se.style.display=N,_e=Se.offsetTop+Se.offsetHeight,_e>W&&(Se.style.display="none")}),Q.addEventListener("click",function(){if(Re[0].style.display!==N){var Se=-1;Re.forEach(function(ue,xe){ue.style.display===N&&(Se=Se===-1?xe:Se,ue.style.display="none")});for(var ye=Se-1;ye>=0&&(Re[ye].style.display=N,_e=Re[Se-1].offsetTop+Re[Se-1].offsetHeight,Re[ye].style.display="none",_e<=W);ye--)Re[ye].style.display=N;var Oe=Number.parseInt(K.innerText,10)-1;Oe===1?Q.style.fill=d:Q.style.fill=u,ne.style.fill=u,K.innerText=Oe}}),ne.addEventListener("click",function(){if(Re[Re.length-1].style.display!==N){var Se=-1;Re.forEach(function(ue,xe){ue.style.display===N&&(Se=xe,ue.style.display="none")});for(var ye=Se+1;ye<Re.length&&(Re[ye].style.display=N,_e=Re[ye].offsetTop+Re[ye].offsetHeight,Re[ye].style.display="none",_e<=W);ye++)Re[ye].style.display=N;var Oe=Number.parseInt(K.innerText,10)+1;Oe===Ue?ne.style.fill=d:ne.style.fill=u,Q.style.fill=u,K.innerText=Oe}}),this.set("slipDom",J)}},P.destroy=function(){var O=this.get("slipDom");O&&O.parentNode&&O.parentNode.removeChild(O),x.prototype.destroy.call(this)},M}(p);B.exports=_},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,g(r,n)}function g(r,n){return g=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},g(r,n)}var v=o(78),p=v.ColorUtil,c=o(4),h=o(80),i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return c.mix({},u,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},s._setPercentage=function(){var u=this.get("items");if(!u[0].percentage){var d=u[0].value,b=u[u.length-1].value;c.each(u,function(_){_.percentage=(_.value-d)/(b-d)})}},s._renderSliderShape=function(){this._setPercentage();var u=this.get("slider"),d=u.get("backgroundElement"),b=this.get("width"),_=this.get("height"),x=this.get("layout"),M=this.get("items"),P="",C;return x==="vertical"?(P+="l (90) ",c.each(M,function(O){C=p.toRGB(O.color),P+=1-O.percentage+":"+C+" "})):(P+="l (0) ",c.each(M,function(O){C=p.toRGB(O.color),P+=O.percentage+":"+C+" "})),this._addMiddleBar(d,"Rect",{x:0,y:0,width:b,height:_,fill:P,strokeOpacity:0})},s._renderUnslidable=function(){this._setPercentage();var u=this.get("titleShape"),d=this.get("titleGap");d=u?u.getBBox().height+d:d;var b=this.get("width"),_=this.get("height"),x=this.get("layout"),M=this.get("items"),P="",C,O=[],w=this.get("group"),S=w.addGroup(),I=M.length;if(x==="vertical"){P+="l (90) ";for(var j=0;j<I;j+=1){if(j!==0&&j!==I-1&&(O.push(["M",0,_-M[j].percentage*_]),O.push(["L",b,_-M[j].percentage*_])),C=p.toRGB(M[j].color),P+=1-M[j].percentage+":"+C+" ",this.get("isSegment")&&j>0){var N=p.toRGB(M[j-1].color);P+=1-M[j].percentage+":"+N+" "}S.addShape("text",{attrs:c.mix({},{x:b+this.get("textOffset")/2,y:_-M[j].percentage*_,text:this._formatItemValue(M[j].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{P+="l (0) ";for(var W=0;W<I;W+=1){if(W!==0&&W!==I-1&&(O.push(["M",M[W].percentage*b,0]),O.push(["L",M[W].percentage*b,_])),C=p.toRGB(M[W].color),this.get("isSegment")&&W>0){var H=p.toRGB(M[W-1].color);P+=M[W].percentage+":"+H+" "}P+=M[W].percentage+":"+C+" ",S.addShape("text",{attrs:c.mix({},{x:M[W].percentage*b,y:_+5+this.get("textOffset"),text:this._formatItemValue(M[W].value)+""},this.get("textStyle"))})}}S.addShape("rect",{attrs:{x:0,y:0,width:b,height:_,fill:P,strokeOpacity:0}}),S.addShape("path",{attrs:c.mix({path:O},this.get("lineStyle"))}),S.move(0,d)},n}(h);B.exports=i},function(B,L,o){B.exports={Category:o(144),CatHtml:o(143),CatPageHtml:o(289),Color:o(290),Size:o(293),CircleSize:o(292)}},function(B,L,o){function e(s,f){s.prototype=Object.create(f.prototype),s.prototype.constructor=s,g(s,f)}function g(s,f){return g=Object.setPrototypeOf||function(d,b){return d.__proto__=b,d},g(s,f)}var v=o(4),p=o(80),c=2,h=16,i=16,r=5,n=function(s){e(f,s);function f(){return s.apply(this,arguments)||this}var u=f.prototype;return u.getDefaultCfg=function(){var b=s.prototype.getDefaultCfg.call(this);return v.mix({},b,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},u._renderSliderShape=function(){var b=r,_=this.get("slider"),x=_.get("backgroundElement"),M=this.get("layout"),P=M==="vertical"?c:this.get("width"),C=M==="vertical"?this.get("height"):c,O=b,w=this.get("height")/2,S=this.get("frontMiddleBarStyle"),I=M==="vertical"?[[0,0],[P,0],[P,C],[0,C]]:[[0,w+C],[0,w-C],[O+P-4,w-C],[O+P-4,w+C]];return this._addMiddleBar(x,"Polygon",v.mix({points:I},S))},u._addHorizontalTrigger=function(b,_,x,M){var P=this.get("slider"),C=P.get(b+"HandleElement"),O=-this.get("height")/2,w=C.addShape("circle",{attrs:v.mix({x:0,y:O,r:M},_)}),S=C.addShape("text",{attrs:v.mix(x,{x:0,y:O+M+10,textAlign:"center",textBaseline:"middle"})}),I=this.get("layout"),j=I==="vertical"?"ns-resize":"ew-resize";w.attr("cursor",j),S.attr("cursor",j),this.set(b+"ButtonElement",w),this.set(b+"TextElement",S)},u._addVerticalTrigger=function(b,_,x,M){var P=this.get("slider"),C=P.get(b+"HandleElement"),O=C.addShape("circle",{attrs:v.mix({x:0,y:0,r:M},_)}),w=C.addShape("text",{attrs:v.mix(x,{x:M+10,y:0,textAlign:"start",textBaseline:"middle"})}),S=this.get("layout"),I=S==="vertical"?"ns-resize":"ew-resize";O.attr("cursor",I),w.attr("cursor",I),this.set(b+"ButtonElement",O),this.set(b+"TextElement",w)},u._renderTrigger=function(){var b=this.get("firstItem"),_=this.get("lastItem"),x=this.get("layout"),M=this.get("textStyle"),P=this.get("triggerAttr"),C=v.mix({},P),O=v.mix({},P),w=r,S=i,I=v.mix({text:this._formatItemValue(b.value)+""},M),j=v.mix({text:this._formatItemValue(_.value)+""},M);x==="vertical"?(this._addVerticalTrigger("min",C,I,w),this._addVerticalTrigger("max",O,j,S)):(this._addHorizontalTrigger("min",C,I,w),this._addHorizontalTrigger("max",O,j,S))},u._bindEvents=function(){var b=this;if(this.get("slidable")){var _=this.get("slider");_.on("sliderchange",function(x){var M=x.range,P=b.get("firstItem").value,C=b.get("lastItem").value,O=P+M[0]/100*(C-P),w=P+M[1]/100*(C-P),S=r+M[0]/100*(i-r),I=r+M[1]/100*(i-r);b._updateElement(O,w,S,I);var j=new Event("itemfilter",x,!0,!0);j.range=[O,w],b.emit("itemfilter",j)})}},u._updateElement=function(b,_,x,M){s.prototype._updateElement.call(this,b,_);var P=this.get("minTextElement"),C=this.get("maxTextElement"),O=this.get("minButtonElement"),w=this.get("maxButtonElement");O.attr("r",x),w.attr("r",M);var S=this.get("layout");if(S==="vertical")P.attr("x",x+10),C.attr("x",M+10);else{var I=-this.get("height")/2;P.attr("y",I+x+10),C.attr("y",I+M+10)}},u._addCircle=function(b,_,x,M,P){var C=this.get("group"),O=C.addGroup(),w=this.get("_unslidableCircleStyle"),S=this.get("textStyle"),I=this.get("titleShape"),j=this.get("titleGap");I&&(j+=I.getBBox().height),O.addShape("circle",{attrs:v.mix({x:b,y:_+j,r:x===0?1:x},w)}),this.get("layout")==="vertical"?O.addShape("text",{attrs:v.mix({x:P+20+this.get("textOffset"),y:_+j,text:M===0?"0":M},S)}):O.addShape("text",{attrs:v.mix({x:b,y:_+j+P+13+this.get("textOffset"),text:M===0?"0":M},S)})},u._renderUnslidable=function(){var b=this.get("firstItem").value,_=this.get("lastItem").value;if(b>_){var x=_;_=b,b=x}var M=this._formatItemValue(b),P=this._formatItemValue(_),C=b<r?r:b,O=_>i?i:_;C>O&&(C=r,O=i),this.get("layout")==="vertical"?(this._addCircle(O,O,C,M,2*O),this._addCircle(O,O*2+h+C,O,P,2*O)):(this._addCircle(O,O,C,M,2*O),this._addCircle(O*2+h+C,O,O,P,2*O))},u.activate=function(b){!this.get("slidable")||s.prototype.activate.call(this,b)},f}(p);B.exports=n},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(4),p=o(80),c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return v.mix({},s,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},r._renderSliderShape=function(){var s=this.get("slider"),f=s.get("backgroundElement"),u=this.get("layout"),d=this.get("width"),b=this.get("height"),_=this.get("height")/2,x=this.get("frontMiddleBarStyle"),M=u==="vertical"?[[0,0],[d,0],[d,b],[d-4,b]]:[[0,_+b/2],[0,_+b/2-4],[d,_-b/2],[d,_+b/2]];return this._addMiddleBar(f,"Polygon",v.mix({points:M},x))},r._renderUnslidable=function(){var s=this.get("layout"),f=this.get("width"),u=this.get("height"),d=this.get("frontMiddleBarStyle"),b=s==="vertical"?[[0,0],[f,0],[f,u],[f-4,u]]:[[0,u],[0,u-4],[f,0],[f,u]],_=this.get("group"),x=_.addGroup();x.addShape("Polygon",{attrs:v.mix({points:b},d)});var M=this._formatItemValue(this.get("firstItem").value),P=this._formatItemValue(this.get("lastItem").value);this.get("layout")==="vertical"?(this._addText(f+10,u-3,M),this._addText(f+10,3,P)):(this._addText(0,u,M),this._addText(f,u,P))},r._addText=function(s,f,u){var d=this.get("group"),b=d.addGroup(),_=this.get("textStyle"),x=this.get("titleShape"),M=this.get("titleGap");x&&(M+=x.getBBox().height),this.get("layout")==="vertical"?b.addShape("text",{attrs:v.mix({x:s+this.get("textOffset"),y:f,text:u===0?"0":u},_)}):(f+=M+this.get("textOffset")-20,x||(f+=10),b.addShape("text",{attrs:v.mix({x:s,y:f,text:u===0?"0":u},_)}))},i}(p);B.exports=c},function(B,L,o){var e=o(4),g=e.DomUtil,v=e.Group,p=function c(h){c.superclass.constructor.call(this,h)};e.extend(p,v),e.augment(p,{getDefaultCfg:function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_beforeRenderUI:function(){var h=this.get("layout"),i=this.get("backgroundElement"),r=this.get("minHandleElement"),n=this.get("maxHandleElement"),s=this.addShape("rect",{attrs:this.get("middleAttr")}),f=h==="vertical"?"ns-resize":"ew-resize";this.add([i,r,n]),this.set("middleHandleElement",s),i.set("zIndex",0),s.set("zIndex",1),r.set("zIndex",2),n.set("zIndex",2),s.attr("cursor","move"),r.attr("cursor",f),n.attr("cursor",f),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(h){var i=this.get("range"),r=i[0]/100,n=i[1]/100,s=this.get("width"),f=this.get("height"),u=this.get("minHandleElement"),d=this.get("maxHandleElement"),b=this.get("middleHandleElement");u.resetMatrix(),d.resetMatrix(),h==="horizontal"?(b.attr({x:s*r,y:0,width:(n-r)*s,height:f}),u.translate(r*s,f),d.translate(n*s,f)):(b.attr({x:0,y:f*(1-n),width:s,height:(n-r)*f}),u.translate(1,(1-r)*f),d.translate(1,(1-n)*f))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",e.wrapBehavior(this,"_onMouseDown"))},_isElement:function(h,i){var r=this.get(i);if(h===r)return!0;if(r.isGroup){var n=r.get("children");return n.indexOf(h)>-1}return!1},_getRange:function(h,i){var r=h+i;return r=r>100?100:r,r=r<0?0:r,r},_updateStatus:function(h,i){var r=h==="x"?this.get("width"):this.get("height");h=e.upperFirst(h);var n=this.get("range"),s=this.get("page"+h),f=this.get("currentTarget"),u=this.get("rangeStash"),d=this.get("layout"),b=d==="vertical"?-1:1,_=i["page"+h],x=_-s,M=x/r*100*b,P;n[1]<=n[0]?(this._isElement(f,"minHandleElement")||this._isElement(f,"maxHandleElement"))&&(n[0]=this._getRange(M,n[0]),n[1]=this._getRange(M,n[0])):(this._isElement(f,"minHandleElement")&&(n[0]=this._getRange(M,n[0])),this._isElement(f,"maxHandleElement")&&(n[1]=this._getRange(M,n[1]))),this._isElement(f,"middleHandleElement")&&(P=u[1]-u[0],n[0]=this._getRange(M,n[0]),n[1]=n[0]+P,n[1]>100&&(n[1]=100,n[0]=n[1]-P)),this.emit("sliderchange",{range:n}),this.set("page"+h,_),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(h){var i=h.currentTarget,r=h.event,n=this.get("range");r.stopPropagation(),r.preventDefault(),this.set("pageX",r.pageX),this.set("pageY",r.pageY),this.set("currentTarget",i),this.set("rangeStash",[n[0],n[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var h=this.get("canvas").get("containerDOM");this.onMouseMoveListener=g.addEventListener(h,"mousemove",e.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=g.addEventListener(h,"mouseup",e.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=g.addEventListener(h,"mouseleave",e.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(h){if(!this._mouseOutArea(h)){var i=this.get("layout");i==="horizontal"?this._updateStatus("x",h):this._updateStatus("y",h)}},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_mouseOutArea:function(h){var i=this.get("canvas").get("el"),r=i.getBoundingClientRect(),n=this.get("parent"),s=n.getBBox(),f=n.attr("matrix")[6],u=n.attr("matrix")[7],d=f+s.width,b=u+s.height,_=h.clientX-r.x,x=h.clientY-r.y;return _<f||_>d||x<u||x>b}}),B.exports=p},function(B,L,o){function e(){return e=Object.assign||function(j){for(var N=1;N<arguments.length;N++){var W=arguments[N];for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(j[H]=W[H])}return j},e.apply(this,arguments)}function g(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function v(j,N){j.prototype=Object.create(N.prototype),j.prototype.constructor=j,p(j,N)}function p(j,N){return p=Object.setPrototypeOf||function(H,J){return H.__proto__=J,H},p(j,N)}var c=o(52),h=o(81),i=o(4),r=i.DomUtil,n=o(298),s=o(146),f=o(148),u=o(147),d="g2-tooltip",b="g2-tooltip-title",_="g2-tooltip-list",x="g2-tooltip-marker",M="g2-tooltip-value",P="g2-tooltip-list-item",C=5,O=c.Marker;function w(j,N){return j.getElementsByClassName(N)[0]}function S(j,N){return Object.keys(j).forEach(function(W){N[W]&&(j[W]=i.mix(j[W],N[W]))}),j}var I=function(j){v(W,j);var N=W.prototype;N.getDefaultCfg=function(){var J=j.prototype.getDefaultCfg.call(this);return i.mix({},J,{containerTpl:' <div class="'+d+'"> <div class="'+b+'"></div><ul class="'+_+'"></ul></div>',itemTpl:`<li data-index={index}>
      <svg viewBox="0 0 `+C+" "+C+'" class="'+x+`"></svg>
      {name}<span class="`+M+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})};function W(H){var J;J=j.call(this,H)||this,i.assign(g(J),f),i.assign(g(J),u);var Q=n;J.style=S(Q,H),J._init_(),J.get("items")&&J.render();var ne=J.get("crosshairs");if(ne){var K=ne.type==="rect"?J.get("backPlot"):J.get("frontPlot"),ie=new s(i.mix({plot:K,plotRange:J.get("plotRange"),canvas:J.get("canvas")},J.get("crosshairs")));ie.hide(),J.set("crosshairGroup",ie)}return J}return N._init_=function(){var J=this,Q=J.get("containerTpl"),ne=J.get("canvas").get("el").parentNode,K;if(!this.get("htmlContent")){if(/^\#/.test(Q)){var ie=Q.replace("#","");K=document.getElementById(ie)}else K=r.createDom(Q),r.modifyCSS(K,J.style[d]),ne.appendChild(K),ne.style.position="relative";J.set("container",K)}},N.render=function(){var J=this;if(J.clear(),J.get("htmlContent")){var Q=J.get("canvas").get("el").parentNode,ne=J._getHtmlContent();Q.appendChild(ne),J.set("container",ne)}else J._renderTpl()},N._renderTpl=function(){var J=this,Q=J.get("showTitle"),ne=J.get("titleContent"),K=J.get("container"),ie=w(K,b),de=w(K,_),we=J.get("items");ie&&Q&&(r.modifyCSS(ie,J.style[b]),ie.innerHTML=ne),de&&(r.modifyCSS(de,J.style[_]),i.each(we,function(Re,_e){de.appendChild(J._addItem(Re,_e))}))},N.clear=function(){var J=this.get("container");if(this.get("htmlContent"))J&&J.remove();else{var Q=w(J,b),ne=w(J,_);Q&&(Q.innerHTML=""),ne&&(ne.innerHTML="")}},N.show=function(){var J=this.get("container");if(!(!J||this.destroyed)){J.style.visibility="visible",J.style.display="block";var Q=this.get("crosshairGroup");Q&&Q.show();var ne=this.get("markerGroup");ne&&ne.show(),j.prototype.show.call(this),this.get("canvas").draw()}},N.hide=function(){var J=this.get("container");if(!(!J||this.destroyed)){J.style.visibility="hidden",J.style.display="none";var Q=this.get("crosshairGroup");Q&&Q.hide();var ne=this.get("markerGroup");ne&&ne.hide(),j.prototype.hide.call(this),this.get("canvas").draw()}},N.destroy=function(){var J=this,Q=J.get("container"),ne=J.get("containerTpl");Q&&!/^\#/.test(ne)&&Q.parentNode.removeChild(Q);var K=this.get("crosshairGroup");K&&K.destroy();var ie=this.get("markerGroup");ie&&ie.remove(),j.prototype.destroy.call(this)},N._getMarkerSvg=function(J){var Q=J.marker||{},ne=Q.activeSymbol||Q.symbol,K;i.isFunction(ne)?K=ne:i.isString(ne)&&(K=O.Symbols[ne]),K=i.isFunction(K)?K:O.Symbols.circle;var ie=K(C/2,C/2,C/2),de=ie.reduce(function(we,Re){return""+we+Re[0]+Re.slice(1).join(",")},"");return'<path d="'+de+'" fill="'+(Q.fill||"none")+'" stroke="'+(Q.stroke||"none")+'" />'},N._addItem=function(J,Q){var ne=this.get("itemTpl"),K=i.substitute(ne,i.mix({index:Q},J)),ie=r.createDom(K);r.modifyCSS(ie,this.style[P]);var de=w(ie,x);if(de){r.modifyCSS(de,e({},this.style[x],{borderRadius:"unset"}));var we=this._getMarkerSvg(J);de.innerHTML=we}var Re=w(ie,M);return Re&&r.modifyCSS(Re,this.style[M]),ie},N._getHtmlContent=function(){var J=this.get("htmlContent"),Q=this.get("titleContent"),ne=this.get("items"),K=J(Q,ne),ie=r.createDom(K);return ie},N.setPosition=function(J,Q,ne){var K=this.get("container"),ie=this.get("canvas").get("el"),de=r.getWidth(ie),we=r.getHeight(ie),Re=K.clientWidth,_e=K.clientHeight,Ue=J,rt=Q,Fe,Se=this.get("prePosition")||{x:0,y:0};if(Re||(K.style.display="block",Re=K.clientWidth,_e=K.clientHeight,K.style.display="none"),this.get("enterable")?(Q=Q-K.clientHeight/2,Fe=[J,Q],Se&&J-Se.x>0?J-=K.clientWidth+1:J+=1):this.get("position")?(Fe=this._calcTooltipPosition(J,Q,this.get("position"),Re,_e,ne),J=Fe[0],Q=Fe[1]):(Fe=this._constraintPositionInBoundary(J,Q,Re,_e,de,we),J=Fe[0],Q=Fe[1]),this.get("inPlot")){var ye=this.get("plotRange");Fe=this._constraintPositionInPlot(J,Q,Re,_e,ye,this.get("enterable")),J=Fe[0],Q=Fe[1]}var Oe=this.get("markerItems");i.isEmpty(Oe)||(Ue=Oe[0].x,rt=Oe[0].y),this.set("prePosition",Fe);var ue=this.get("follow");ue&&(K.style.left=J+"px",K.style.top=Q+"px");var xe=this.get("crosshairGroup");if(xe){var Ae=this.get("items");xe.setPosition(Ue,rt,Ae)}j.prototype.setPosition.call(this,J,Q)},W}(h);B.exports=I},function(B,L,o){var e=o(81);e.Html=o(295),e.Canvas=o(145),e.Mini=o(297),B.exports=e},function(B,L,o){function e(s,f){s.prototype=Object.create(f.prototype),s.prototype.constructor=s,g(s,f)}function g(s,f){return g=Object.setPrototypeOf||function(d,b){return d.__proto__=b,d},g(s,f)}var v=o(4),p=o(145),c=o(21),h=c.FONT_FAMILY,i=v.DomUtil,r=v.MatrixUtil,n=function(s){e(f,s);function f(){return s.apply(this,arguments)||this}var u=f.prototype;return u.getDefaultCfg=function(){var b=s.prototype.getDefaultCfg.call(this);return v.mix({},b,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:h,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},u._init_=function(){var b=this,_=b.get("padding"),x=b.get("frontPlot"),M=x.addGroup();b.set("container",M);var P=M.addShape("rect",{attrs:v.mix({},b.get("boardStyle"))});b.set("board",P);var C=M.addShape("path",{attrs:{fill:b.get("boardStyle").fill}});b.set("triangleShape",C);var O=M.addGroup();O.move(_.left,_.top);var w=O.addShape("text",{attrs:v.mix({},b.get("valueStyle"))});b.set("valueShape",w)},u.render=function(){var b=this;b.clear();var _=b.get("board"),x=b.get("valueShape"),M=b.get("padding"),P=b.get("items")[0];x&&x.attr("text",P.value);var C=x?x.getBBox():{width:80,height:30},O=M.left+C.width+M.right,w=M.top+C.height+M.bottom;_.attr("width",O),_.attr("height",w),b._centerTriangleShape()},u.clear=function(){var b=this.get("valueShape");b.attr("text","")},u.setPosition=function(b,_,x){var M=this,P=M.get("container"),C=M.get("plotRange"),O=P.getBBox(),w=O.width,S=O.height;if(b-=w/2,x&&(x.name==="point"||x.name==="interval")){var I=x.getBBox().y;_=I}if(_-=S,this.get("inPlot"))b<C.tl.x?(b=C.tl.x,M._leftTriangleShape()):b+w/2>C.tr.x?(b=C.tr.x-w,M._rightTriangleShape()):M._centerTriangleShape(),_<C.tl.y?_=C.tl.y:_+S>C.bl.y&&(_=C.bl.y-S);else{var j=this.get("canvas").get("el"),N=i.getWidth(j),W=i.getHeight(j);b<0?(b=0,M._leftTriangleShape()):b+w/2>N?(b=N-w,M._rightTriangleShape()):M._centerTriangleShape(),_<0?_=0:_+S>W&&(_=W-S)}var H=[1,0,0,0,1,0,0,0,1],J=r.transform(H,[["t",b,_]]);P.stopAnimate(),P.animate({matrix:J},this.get("animationDuration"))},u._centerTriangleShape=function(){var b=this.get("triangleShape"),_=this.get("triangleWidth"),x=this.get("triangleHeight"),M=this.get("board").getBBox(),P=M.width,C=M.height,O=[["M",0,0],["L",_,0],["L",_/2,x],["L",0,0],["Z"]];b.attr("path",O),b.move(P/2-_/2,C-1)},u._leftTriangleShape=function(){var b=this.get("triangleShape"),_=this.get("triangleWidth"),x=this.get("triangleHeight"),M=this.get("board").getBBox(),P=M.height,C=[["M",0,0],["L",_,0],["L",0,x+3],["L",0,0],["Z"]];b.attr("path",C),b.move(0,P-3)},u._rightTriangleShape=function(){var b=this.get("triangleShape"),_=this.get("triangleWidth"),x=this.get("triangleHeight"),M=this.get("board").getBBox(),P=M.width,C=M.height,O=[["M",0,0],["L",_,0],["L",_,x+4],["L",0,0],["Z"]];b.attr("path",O),b.move(P-_-1,C-4)},f}(p);B.exports=n},function(B,L,o){var e,g=o(21),v=g.FONT_FAMILY,p="g2-tooltip",c="g2-tooltip-title",h="g2-tooltip-list",i="g2-tooltip-list-item",r="g2-tooltip-marker",n="g2-tooltip-value",s=(e={crosshairs:!1,offset:15},e[""+p]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:v,lineHeight:"20px",padding:"10px 10px 6px 10px"},e[""+c]={marginBottom:"4px"},e[""+h]={margin:0,listStyleType:"none",padding:0},e[""+i]={marginBottom:"4px"},e[""+r]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e[""+n]={display:"inline-block",float:"right",marginLeft:"30px"},e);B.exports=s},function(B,L,o){"use strict";function e(_){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(M){return typeof M}:e=function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},e(_)}function g(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function v(_,x){return x&&(e(x)==="object"||typeof x=="function")?x:p(_)}function p(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function c(_,x){for(var M=0;M<x.length;M++){var P=x[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}function h(_,x,M){return x&&c(_.prototype,x),M&&c(_,M),_}function i(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),x&&r(_,x)}function r(_,x){return r=Object.setPrototypeOf||function(P,C){return P.__proto__=C,P},r(_,x)}function n(_,x,M){return typeof Reflect!="undefined"&&Reflect.get?n=Reflect.get:n=function(C,O,w){var S=s(C,O);if(!!S){var I=Object.getOwnPropertyDescriptor(S,O);return I.get?I.get.call(w):I.value}},n(_,x,M||_)}function s(_,x){for(;!Object.prototype.hasOwnProperty.call(_,x)&&(_=f(_),_!==null););return _}function f(_){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},f(_)}var u=o(10),d=o(48),b=function(_){i(x,_),h(x,[{key:"getDefaultCfg",value:function(){var P=n(f(x.prototype),"getDefaultCfg",this).call(this);return u({},P,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]);function x(M){var P;return g(this,x),P=v(this,f(x).call(this,M)),P._init(),P}return h(x,[{key:"_init",value:function(){var P=this.start,C=this.end,O={start:P.x,end:C.x},w={start:P.y,end:C.y};this.x=O,this.y=w}},{key:"convertPoint",value:function(P){var C,O;return this.isTransposed?(C=P.y,O=P.x):(C=P.x,O=P.y),{x:this.convertDim(C,"x"),y:this.convertDim(O,"y")}}},{key:"invertPoint",value:function(P){var C=this.invertDim(P.x,"x"),O=this.invertDim(P.y,"y");return this.isTransposed?{x:O,y:C}:{x:C,y:O}}}]),x}(d);B.exports=b},function(B,L,o){"use strict";function e(P){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(O){return typeof O}:e=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},e(P)}function g(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")}function v(P,C){return C&&(e(C)==="object"||typeof C=="function")?C:p(P)}function p(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function c(P,C){for(var O=0;O<C.length;O++){var w=C[O];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(P,w.key,w)}}function h(P,C,O){return C&&c(P.prototype,C),O&&c(P,O),P}function i(P,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(C&&C.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),C&&r(P,C)}function r(P,C){return r=Object.setPrototypeOf||function(w,S){return w.__proto__=S,w},r(P,C)}function n(P,C,O){return typeof Reflect!="undefined"&&Reflect.get?n=Reflect.get:n=function(S,I,j){var N=s(S,I);if(!!N){var W=Object.getOwnPropertyDescriptor(N,I);return W.get?W.get.call(j):W.value}},n(P,C,O||P)}function s(P,C){for(;!Object.prototype.hasOwnProperty.call(P,C)&&(P=f(P),P!==null););return P}function f(P){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},f(P)}var u=o(68),d=o(42),b=o(10),_=o(48),x=u.vec2,M=function(P){i(C,P),h(C,[{key:"getDefaultCfg",value:function(){var w=n(f(C.prototype),"getDefaultCfg",this).call(this);return b({},w,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]);function C(O){var w;return g(this,C),w=v(this,f(C).call(this,O)),w._init(),w}return h(C,[{key:"_init",value:function(){var w=this.width,S=this.height,I=this.radius,j=this.innerRadius,N=this.startAngle,W=this.endAngle,H=(W-N)/(2*Math.PI)+1,J=Math.min(w,S)/2;I&&I>=0&&I<=1&&(J=J*I);var Q=Math.floor(J*(1-j)/H),ne=Q/(Math.PI*2),K={start:N,end:W},ie={start:j*J,end:j*J+Q*.99};this.a=ne,this.d=Q,this.x=K,this.y=ie}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(w){var S=this.a,I=this.center,j,N;this.isTransposed?(j=w.y,N=w.x):(j=w.x,N=w.y);var W=this.convertDim(j,"x"),H=S*W,J=this.convertDim(N,"y");return{x:I.x+Math.cos(W)*(H+J),y:I.y+Math.sin(W)*(H+J)}}},{key:"invertPoint",value:function(w){var S=this.center,I=this.a,j=this.d+this.y.start,N=x.subtract([],[w.x,w.y],[S.x,S.y]),W=x.angleTo(N,[1,0],!0),H=W*I;x.length(N)<H&&(H=x.length(N));var J=Math.floor((x.length(N)-H)/j);W=2*J*Math.PI+W;var Q=I*W,ne=x.length(N)-Q;ne=d(ne,0)?0:ne;var K=this.invertDim(W,"x"),ie=this.invertDim(ne,"y");K=d(K,0)?0:K,ie=d(ie,0)?0:ie;var de={};return de.x=this.isTransposed?ie:K,de.y=this.isTransposed?K:ie,de}}]),C}(_);B.exports=M},function(B,L,o){"use strict";var e=o(48);e.Cartesian=o(299),e.Rect=e.Cartesian,e.Polar=o(302),e.Helix=o(300),B.exports=e},function(B,L,o){"use strict";function e(O){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(S){return typeof S}:e=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},e(O)}function g(O,w){if(!(O instanceof w))throw new TypeError("Cannot call a class as a function")}function v(O,w){return w&&(e(w)==="object"||typeof w=="function")?w:p(O)}function p(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function c(O,w){for(var S=0;S<w.length;S++){var I=w[S];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(O,I.key,I)}}function h(O,w,S){return w&&c(O.prototype,w),S&&c(O,S),O}function i(O,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(w&&w.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),w&&r(O,w)}function r(O,w){return r=Object.setPrototypeOf||function(I,j){return I.__proto__=j,I},r(O,w)}function n(O,w,S){return typeof Reflect!="undefined"&&Reflect.get?n=Reflect.get:n=function(j,N,W){var H=s(j,N);if(!!H){var J=Object.getOwnPropertyDescriptor(H,N);return J.get?J.get.call(W):J.value}},n(O,w,S||O)}function s(O,w){for(;!Object.prototype.hasOwnProperty.call(O,w)&&(O=f(O),O!==null););return O}function f(O){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},f(O)}var u=o(68),d=o(42),b=o(10),_=o(48),x=u.mat3,M=u.vec2,P=u.vec3,C=function(O){i(w,O),h(w,[{key:"getDefaultCfg",value:function(){var I=n(f(w.prototype),"getDefaultCfg",this).call(this);return b({},I,{startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,type:"polar",isPolar:!0})}}]);function w(S){var I;return g(this,w),I=v(this,f(w).call(this,S)),I._init(),I}return h(w,[{key:"_init",value:function(){for(var I=this.radius,j=this.innerRadius,N=this.center,W=this.startAngle,H=this.endAngle;H<W;)H+=Math.PI*2;this.endAngle=H;var J=this.getOneBox(),Q=J.maxX-J.minX,ne=J.maxY-J.minY,K=Math.abs(J.minX)/Q,ie=Math.abs(J.minY)/ne,de=this.width,we=this.height,Re,_e;we/ne>de/Q?(Re=de/Q,_e={x:N.x-(.5-K)*de,y:N.y-(.5-ie)*Re*ne}):(Re=we/ne,_e={x:N.x-(.5-K)*Re*Q,y:N.y-(.5-ie)*we}),I?I>0&&I<=1?I=Re*I:(I<=0||I>Re)&&(I=Re):I=Re;var Ue={start:W,end:H},rt={start:j*I,end:I};this.x=Ue,this.y=rt,this.radius=I,this.circleCentre=_e,this.center=_e}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var I=this.startAngle,j=this.endAngle;if(Math.abs(j-I)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var N=[0,Math.cos(I),Math.cos(j)],W=[0,Math.sin(I),Math.sin(j)],H=Math.min(I,j);H<Math.max(I,j);H+=Math.PI/18)N.push(Math.cos(H)),W.push(Math.sin(H));return{minX:Math.min.apply(Math,N),maxX:Math.max.apply(Math,N),minY:Math.min.apply(Math,W),maxY:Math.max.apply(Math,W)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(I){var j=this.getCenter(),N=this.isTransposed?I.y:I.x,W=this.isTransposed?I.x:I.y;return N=this.convertDim(N,"x"),W=this.convertDim(W,"y"),{x:j.x+Math.cos(N)*W,y:j.y+Math.sin(N)*W}}},{key:"invertPoint",value:function(I){var j=this.getCenter(),N=[I.x-j.x,I.y-j.y],W=this.x,H=[1,0,0,0,1,0,0,0,1];x.rotate(H,H,W.start);var J=[1,0,0];P.transformMat3(J,J,H),J=[J[0],J[1]];var Q=M.angleTo(J,N,W.end<W.start);d(Q,Math.PI*2)&&(Q=0);var ne=M.length(N),K=Q/(W.end-W.start);K=W.end-W.start>0?K:-K;var ie=this.invertDim(ne,"y"),de={};return de.x=this.isTransposed?ie:K,de.y=this.isTransposed?K:ie,de}}]),w}(_);B.exports=C},function(B,L,o){var e=o(0),g=o(18),v=e.PathUtil;function p(w){var S=w.start,I=w.end,j=w.getWidth(),N=w.getHeight(),W=200,H,J,Q,ne,K;return w.isPolar?(ne=w.getRadius(),Q=w.getCenter(),H=w.startAngle,J=w.endAngle,K=new g.Fan({attrs:{x:Q.x,y:Q.y,rs:0,re:ne+W,startAngle:H,endAngle:H}}),K.endState={endAngle:J}):(K=new g.Rect({attrs:{x:S.x-W,y:I.y-W,width:w.isTransposed?j+W*2:0,height:w.isTransposed?0:N+W*2}}),w.isTransposed?K.endState={height:N+W*2}:K.endState={width:j+W*2}),K.isClip=!0,K}function c(w){if(e.isEmpty(w))return null;var S=w[0].x,I=w[0].x,j=w[0].y,N=w[0].y;return e.each(w,function(W){S=S>W.x?W.x:S,I=I<W.x?W.x:I,j=j>W.y?W.y:j,N=N<W.y?W.y:N}),{minX:S,maxX:I,minY:j,maxY:N,centerX:(S+I)/2,centerY:(j+N)/2}}function h(w,S){var I=w.points||w.get("origin").points,j=c(I),N,W,H=S.startAngle,J=S.endAngle,Q=J-H;return S.isTransposed?(N=j.maxY*Q,W=j.minY*Q):(N=j.maxX*Q,W=j.minX*Q),N+=H,W+=H,{startAngle:W,endAngle:N}}function i(w,S,I){var j={};return w.delay&&(j.delay=e.isFunction(w.delay)?w.delay(S,I):w.delay),j.easing=e.isFunction(w.easing)?w.easing(S,I):w.easing,j.duration=e.isFunction(w.duration)?w.duration(S,I):w.duration,j.callback=w.callback,j}function r(w,S){var I=w._id,j=w.get("index"),N=w.getBBox(),W=w.get("origin").points,H=(N.minX+N.maxX)/2,J;W[0].y-W[1].y<=0?J=N.maxY:J=N.minY;var Q=[H,J,1];w.apply(Q),w.attr("transform",[["t",-H,-J],["s",1,.01],["t",H,J]]);var ne={transform:[["t",-H,-J],["s",1,100],["t",H,J]]},K=i(S,j,I,ne);w.animate(ne,K.duration,K.easing,K.callback,K.delay)}function n(w,S){var I=w._id,j=w.get("index"),N=w.getBBox(),W=w.get("origin").points,H,J=(N.minY+N.maxY)/2;W[0].y-W[1].y>0?H=N.maxX:H=N.minX;var Q=[H,J,1];w.apply(Q),w.attr({transform:[["t",-H,-J],["s",.01,1],["t",H,J]]});var ne={transform:[["t",-H,-J],["s",100,1],["t",H,J]]},K=i(S,j,I,ne);w.animate(ne,K.duration,K.easing,K.callback,K.delay)}function s(w,S){var I={lineWidth:0,opacity:0},j=w._id,N=w.get("index"),W=i(S,N,j,I);w.animate(I,W.duration,W.easing,function(){w.remove()},W.delay)}function f(w,S,I){var j=w._id,N=w.get("index"),W,H;if(I.isPolar&&w.name!=="point")W=I.getCenter().x,H=I.getCenter().y;else{var J=w.getBBox();W=(J.minX+J.maxX)/2,H=(J.minY+J.maxY)/2}var Q=[W,H,1];w.apply(Q),w.attr({transform:[["t",-W,-H],["s",.01,.01],["t",W,H]]});var ne={transform:[["t",-W,-H],["s",100,100],["t",W,H]]},K=i(S,N,j,ne);w.animate(ne,K.duration,K.easing,K.callback,K.delay)}function u(w,S,I){var j=w._id,N=w.get("index"),W,H;if(I.isPolar&&w.name!=="point")W=I.getCenter().x,H=I.getCenter().y;else{var J=w.getBBox();W=(J.minX+J.maxX)/2,H=(J.minY+J.maxY)/2}var Q=[W,H,1];w.apply(Q);var ne={transform:[["t",-W,-H],["s",.01,.01],["t",W,H]]},K=i(S,N,j,ne);w.animate(ne,K.duration,K.easing,function(){w.remove()},K.delay)}function d(w,S){if(w.get("type")==="path"){var I=w._id,j=w.get("index"),N=v.pathToAbsolute(w.attr("path"));w.attr("path",[N[0]]);var W={path:N},H=i(S,j,I,W);w.animate(W,H.duration,H.easing,H.callback,H.delay)}}function b(w,S){if(w.get("type")==="path"){var I=w._id,j=w.get("index"),N=v.pathToAbsolute(w.attr("path")),W={path:[N[0]]},H=i(S,j,I,W);w.animate(W,H.duration,H.easing,function(){w.remove()},H.delay)}}function _(w,S,I,j,N){var W=p(I),H=w.get("canvas"),J=w._id,Q=w.get("index"),ne;j?(W.attr("startAngle",j),W.attr("endAngle",j),ne={endAngle:N}):ne=W.endState,W.set("canvas",H),w.attr("clip",W),w.setSilent("animating",!0);var K=i(S,Q,J,ne);W.animate(ne,K.duration,K.easing,function(){w&&!w.get("destroyed")&&(w.attr("clip",null),w.setSilent("cacheShape",null),w.setSilent("animating",!1),W.remove())},K.delay)}function x(w,S){var I=w._id,j=w.get("index"),N=e.isNil(w.attr("fillOpacity"))?1:w.attr("fillOpacity"),W=e.isNil(w.attr("strokeOpacity"))?1:w.attr("strokeOpacity");w.attr("fillOpacity",0),w.attr("strokeOpacity",0);var H={fillOpacity:N,strokeOpacity:W},J=i(S,j,I,H);w.animate(H,J.duration,J.easing,J.callback,J.delay)}function M(w,S){var I=w._id,j=w.get("index"),N={fillOpacity:0,strokeOpacity:0},W=i(S,j,I,N);w.animate(N,W.duration,W.easing,function(){w.remove()},W.delay)}function P(w,S,I){var j=h(w,I),N=j.endAngle,W=j.startAngle;_(w,S,I,W,N)}function C(w,S,I){if(w.name==="line"){var j=w.get("canvas"),N=w.get("cacheShape"),W=w._id,H=w.get("index"),J=new g.Rect({attrs:{x:I.start.x,y:I.end.y,width:I.getWidth(),height:I.getHeight()}});J.isClip=!0,J.set("canvas",j);var Q=v.pathToAbsolute(N.attrs.path),ne=v.pathToAbsolute(w.attr("path")),K=Q[1][1]-Q[0][1],ie=Q[Q.length-1][1]+K,de=ne[ne.length-1][2],we=Q.concat([["L",ie,de]]),Re=[0,0,1];w.apply(Re),w.attr("clip",J),w.attr("path",we);var _e={transform:[["t",-K,0]]},Ue=i(S,H,W,_e);w.animate(_e,Ue.duration,Ue.easing,function(){w&&!w.get("destroyed")&&(w.attr("path",ne),w.attr({transform:[["t",K,0]]}),w.attr("clip",null),w.setSilent("cacheShape",null),J.remove())},Ue.delay)}}function O(w,S,I){if(w.name==="area"){var j=w.get("canvas"),N=w.get("cacheShape"),W=w._id,H=w.get("index"),J=new g.Rect({attrs:{x:I.start.x,y:I.end.y,width:I.getWidth(),height:I.getHeight()}});J.isClip=!0,J.set("canvas",j);var Q=v.pathToAbsolute(N.attrs.path),ne=v.pathToAbsolute(w.attr("path")),K=Q[1][1]-Q[0][1],ie=Math.floor(Q.length/2),de=Q[ie-1][1]+K,we=ne[ie-1][2],Re=[].concat(Q.slice(0,ie),[["L",de,we],["L",de,ne[ie][2]]],Q.slice(ie)),_e=[0,0,1];w.apply(_e),w.attr("clip",J),w.attr("path",Re);var Ue={transform:[["t",-K,0]]},rt=i(S,H,W,Ue);w.animate(Ue,rt.duration,rt.easing,function(){w&&!w.get("destroyed")&&(w.attr("path",ne),w.attr({transform:[["t",K,0]]}),w.attr("clip",null),w.setSilent("cacheShape",null),J.remove())},rt.delay)}}B.exports={enter:{clipIn:_,zoomIn:f,pathIn:d,scaleInY:r,scaleInX:n,fanIn:P,fadeIn:x},leave:{lineWidthOut:s,zoomOut:u,pathOut:b,fadeOut:M},appear:{clipIn:_,zoomIn:f,pathIn:d,scaleInY:r,scaleInX:n,fanIn:P,fadeIn:x},update:{fadeIn:x,fanIn:P,lineSlideLeft:C,areaSlideLeft:O}}},function(B,L,o){var e=o(0),g=o(149),v=e.MatrixUtil,p=v.mat3;function c(s,f){var u=[];if(s.get("animate")===!1)return[];var d=s.get("children");return e.each(d,function(b){if(b.isGroup)u=u.concat(c(b,f));else if(b.isShape&&b._id){var _=b._id;_=_.split("-")[0],_===f&&u.push(b)}}),u}function h(s){var f={};return e.each(s,function(u){if(!(!u._id||u.isClip)){var d=u._id;f[d]={_id:d,type:u.get("type"),attrs:e.cloneDeep(u.attr()),name:u.name,index:u.get("index"),animateCfg:u.get("animateCfg"),coord:u.get("coord")}}}),f}function i(s,f,u,d){var b;return d?b=g.Action[u][d]:b=g.getAnimation(s,f,u),b}function r(s,f,u){var d=g.getAnimateCfg(s,f);return u&&u[f]?e.deepMix({},d,u[f]):d}function n(s,f,u,d){var b,_,x=!1;if(d){var M=[],P=[];e.each(f,function(C){var O=s[C._id];O?(C.setSilent("cacheShape",O),M.push(C),delete s[C._id]):P.push(C)}),e.each(s,function(C){var O=C.name,w=C.coord,S=C._id,I=C.attrs,j=C.index,N=C.type;if(_=r(O,"leave",C.animateCfg),b=i(O,w,"leave",_.animation),e.isFunction(b)){var W=u.addShape(N,{attrs:I,index:j});if(W._id=S,W.name=O,w&&O!=="label"){var H=W.getMatrix(),J=p.multiply([],H,w.matrix);W.setMatrix(J)}x=!0,b(W,_,w)}}),e.each(M,function(C){var O=C.name,w=C.get("coord"),S=C.get("cacheShape").attrs;if(!e.isEqual(S,C.attr())){if(_=r(O,"update",C.get("animateCfg")),b=i(O,w,"update",_.animation),e.isFunction(b))b(C,_,w);else{var I=e.cloneDeep(C.attr());C.attr(S),C.animate(I,_.duration,_.easing,function(){C.setSilent("cacheShape",null)})}x=!0}}),e.each(P,function(C){var O=C.name,w=C.get("coord");_=r(O,"enter",C.get("animateCfg")),b=i(O,w,"enter",_.animation),e.isFunction(b)&&(b(C,_,w),x=!0)})}else e.each(f,function(C){var O=C.name,w=C.get("coord");_=r(O,"appear",C.get("animateCfg")),b=i(O,w,"appear",_.animation),e.isFunction(b)&&(b(C,_,w),x=!0)});return x}B.exports={execAnimation:function(f,u){var d=f.get("middlePlot"),b=f.get("backPlot"),_=f.get("_id"),x=f.get("canvas"),M=x.get(_+"caches")||[];M.length===0&&(u=!1);var P=c(d,_),C=c(b,_),O=P.concat(C);x.setSilent(_+"caches",h(O));var w;u?w=n(M,O,x,u):w=n(M,P,x,u),w||x.draw()}}},function(B,L,o){var e=o(0),g=o(32),v=g.Axis,p=e.MatrixUtil.vec2;function c(n){var s=[];if(n.length>0){s=n.slice(0);var f=s[0],u=s[s.length-1];f.value!==0&&s.unshift({value:0}),u.value!==1&&s.push({value:1})}return s}function h(n,s,f){var u=[];return n.length<1||(n.length>=2&&s&&f&&u.push({text:"",tickValue:"",value:0}),n[0].value!==0&&u.push({text:"",tickValue:"",value:0}),u=u.concat(n),u[u.length-1].value!==1&&u.push({text:"",tickValue:"",value:1})),u}function i(n,s){return s===void 0&&(s=0),n==="middle"&&(s=.5),n.includes("%")&&(s=parseInt(n,10)/100),s}var r=function(){function n(f){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],e.mix(this,f)}var s=n.prototype;return s._isHide=function(u){var d=this.options;return!!(d&&d[u]===!1)},s._getMiddleValue=function(u,d,b,_){if(u===0&&!_)return 0;if(u===1)return 1;var x=d[b+1].value;return!_&&x===1?1:(u+x)/2},s._getLineRange=function(u,d,b,_){var x,M,P,C=d.field,O=this.options,w="";if(O[C]&&O[C].position&&(w=O[C].position),b==="x"){var S=w==="top"?1:0;S=i(w,S),x={x:0,y:S},M={x:1,y:S},P=!1}else{if(_){var I=w==="left"?0:1;I=i(w,I),x={x:I,y:0},M={x:I,y:1}}else{var j=w==="right"?1:0;j=i(w,j),x={x:j,y:0},M={x:j,y:1}}P=!0}return x=u.convert(x),M=u.convert(M),{start:x,end:M,isVertical:P}},s._getLineCfg=function(u,d,b,_){var x,M=this._getLineRange(u,d,b,_),P=M.isVertical,C=M.start,O=M.end,w=u.center;return u.isTransposed&&(P=!P),P&&C.x>w.x||!P&&C.y>w.y?x=1:x=-1,{isVertical:P,factor:x,start:C,end:O}},s._getCircleCfg=function(u){var d={},b=u.x,_=u.y,x=_.start>_.end,M;u.isTransposed?M={x:x?0:1,y:0}:M={x:0,y:x?0:1},M=u.convert(M);var P=u.circleCentre,C=[M.x-P.x,M.y-P.y],O=[1,0],w;M.y>P.y?w=p.angle(C,O):w=p.angle(C,O)*-1;var S=w+(b.end-b.start);return d.startAngle=w,d.endAngle=S,d.center=P,d.radius=Math.sqrt(Math.pow(M.x-P.x,2)+Math.pow(M.y-P.y,2)),d.inner=u.innerRadius||0,d},s._getRadiusCfg=function(u){var d=u.x.start,b=d<0?-1:1,_,x;return u.isTransposed?(_={x:0,y:0},x={x:1,y:0}):(_={x:0,y:0},x={x:0,y:1}),{factor:b,start:u.convert(_),end:u.convert(x)}},s._getAxisPosition=function(u,d,b,_){var x="",M=this.options;if(M[_]&&M[_].position)x=M[_].position;else{var P=u.type;u.isRect?d==="x"?x="bottom":d==="y"&&(b?x="right":x="left"):P==="helix"?x="helix":d==="x"?x=u.isTransposed?"radius":"circle":x=u.isTransposed?"circle":"radius"}return x},s._getAxisDefaultCfg=function(u,d,b,_){var x=this,M=x.viewTheme,P={},C=x.options,O=d.field;if(P=e.deepMix({},M.axis[_],P,C[O]),P.viewTheme=M,P.title){var w=e.isPlainObject(P.title)?P.title:{};w.text=w.text||d.alias||O,e.deepMix(P,{title:w})}return P.ticks=d.getTicks(),u.isPolar&&!d.isCategory&&b==="x"&&Math.abs(u.endAngle-u.startAngle)===Math.PI*2&&P.ticks.pop(),P.coord=u,P.label&&e.isNil(P.label.autoRotate)&&(P.label.autoRotate=!0),C.hasOwnProperty("xField")&&C.xField.hasOwnProperty("grid")&&P.position==="left"&&e.deepMix(P,C.xField),P},s._getAxisCfg=function(u,d,b,_,x,M){x===void 0&&(x="");var P=this,C=P._getAxisPosition(u,_,x,d.field),O=P._getAxisDefaultCfg(u,d,_,C);if(!e.isEmpty(O.grid)&&b){var w=[],S=[],I=c(b.getTicks());if(I.length){var j=h(O.ticks,d.isLinear,O.grid.align==="center");e.each(j,function(N,W){S.push(N.tickValue);var H=[],J=N.value;if(O.grid.align==="center"&&(J=P._getMiddleValue(J,j,W,d.isLinear)),!e.isNil(J)){var Q=u.x,ne=u.y;e.each(I,function(K){var ie=_==="x"?J:K.value,de=_==="x"?K.value:J,we=u.convert({x:ie,y:de});if(u.isPolar){var Re=u.circleCentre;ne.start>ne.end&&(de=1-de),we.flag=Q.start>Q.end?0:1,we.radius=Math.sqrt(Math.pow(we.x-Re.x,2)+Math.pow(we.y-Re.y,2))}H.push(we)}),w.push({_id:M+"-"+_+x+"-grid-"+N.tickValue,points:H})}})}O.grid.items=w,O.grid.tickValues=S}return O.type=d.type,O},s._getHelixCfg=function(u){for(var d={},b=u.a,_=u.startAngle,x=u.endAngle,M=100,P=[],C=0;C<=M;C++){var O=u.convert({x:C/100,y:0});P.push(O.x),P.push(O.y)}var w=u.convert({x:0,y:0});return d.a=b,d.startAngle=_,d.endAngle=x,d.crp=P,d.axisStart=w,d.center=u.center,d.inner=u.y.start,d},s._drawAxis=function(u,d,b,_,x,M,P){var C=this.container,O=this.canvas,w,S;u.type==="cartesian"?(w=v.Line,S=this._getLineCfg(u,d,_,P)):u.type==="helix"&&_==="x"?(w=v.Helix,S=this._getHelixCfg(u)):_==="x"?(w=v.Circle,S=this._getCircleCfg(u)):(w=v.Line,S=this._getRadiusCfg(u));var I=this._getAxisCfg(u,d,b,_,P,x);I=e.mix({},I,S),_==="y"&&M&&M.get("type")==="circle"&&(I.circle=M),I._id=x+"-"+_,e.isNil(P)||(I._id=x+"-"+_+P),e.mix(I,{canvas:O,group:C.addGroup({viewId:x})});var j=new w(I);return j.render(),this.axes.push(j),j},s.createAxis=function(u,d,b){var _=this,x=this.coord,M=x.type;if(M!=="theta"&&!(M==="polar"&&x.isTransposed)){var P;u&&!_._isHide(u.field)&&(P=_._drawAxis(x,u,d[0],"x",b)),!e.isEmpty(d)&&M!=="helix"&&e.each(d,function(C,O){_._isHide(C.field)||_._drawAxis(x,C,u,"y",b,P,O)})}},s.changeVisible=function(u){var d=this.axes;e.each(d,function(b){b.set("visible",u)})},s.clear=function(){var u=this,d=u.axes;e.each(d,function(b){b.destroy()}),u.axes=[]},n}();B.exports=r},function(B,L,o){var e=o(0),g=o(301),v=function(){function p(h){this.type="rect",this.actions=[],this.cfg={},e.mix(this,h),this.option=h||{}}var c=p.prototype;return c.reset=function(i){return this.actions=i.actions||[],this.type=i.type,this.cfg=i.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},c._execActions=function(i){var r=this.actions;e.each(r,function(n){var s=n[0];i[s](n[1],n[2])})},c.hasAction=function(i){var r=this.actions,n=!1;return e.each(r,function(s){if(i===s[0])return n=!0,!1}),n},c.createCoord=function(i,r){var n=this,s=n.type,f=n.cfg,u,d,b=e.mix({start:i,end:r},f);return s==="theta"?(u=g.Polar,n.hasAction("transpose")||n.transpose(),d=new u(b),d.type=s):(u=g[e.upperFirst(s||"")]||g.Rect,d=new u(b)),n._execActions(d),d},c.rotate=function(i){return i=i*Math.PI/180,this.actions.push(["rotate",i]),this},c.reflect=function(i){return this.actions.push(["reflect",i]),this},c.scale=function(i,r){return this.actions.push(["scale",i,r]),this},c.transpose=function(){return this.actions.push(["transpose"]),this},p}();B.exports=v},function(B,L,o){var e=o(0);function g(c,h){if(e.isNil(c)||e.isNil(h))return!1;var i=c.get("origin"),r=h.get("origin");return e.isNil(i)&&e.isNil(r)?e.isEqual(c,h):e.isEqual(i,r)}function v(c){c.shape&&c.shape.get("origin")&&(c.data=c.shape.get("origin"))}var p=function(){function c(i){this.view=null,this.canvas=null,e.assign(this,i),this._init()}var h=c.prototype;return h._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},h._getShapeEventObj=function(r){return{x:r.x/this.pixelRatio,y:r.y/this.pixelRatio,target:r.target,toElement:r.event.toElement||r.event.relatedTarget}},h._getShape=function(r,n){var s=this.view,f=s.get("canvas");return f.getShape(r,n)},h._getPointInfo=function(r){var n=this.view,s={x:r.x/this.pixelRatio,y:r.y/this.pixelRatio},f=n.getViewsByPoint(s);return s.views=f,s},h._getEventObj=function(r,n,s){return{x:n.x,y:n.y,target:r.target,toElement:r.event.toElement||r.event.relatedTarget,views:s}},h.bindEvents=function(){var r=this.canvas;r.on("mousedown",e.wrapBehavior(this,"onDown")),r.on("mousemove",e.wrapBehavior(this,"onMove")),r.on("mouseleave",e.wrapBehavior(this,"onOut")),r.on("mouseup",e.wrapBehavior(this,"onUp")),r.on("click",e.wrapBehavior(this,"onClick")),r.on("dblclick",e.wrapBehavior(this,"onClick")),r.on("touchstart",e.wrapBehavior(this,"onTouchstart")),r.on("touchmove",e.wrapBehavior(this,"onTouchmove")),r.on("touchend",e.wrapBehavior(this,"onTouchend"))},h._triggerShapeEvent=function(r,n,s){if(r&&r.name&&!r.get("destroyed")){var f=this.view;if(f.isShapeInView(r)){var u=r.name+":"+n;s.view=f,s.appendInfo=r.get("appendInfo"),f.emit(u,s);var d=f.get("parent");d&&d.emit(u,s)}}},h.onDown=function(r){var n=this.view,s=this._getShapeEventObj(r);s.shape=this.currentShape,v(s),n.emit("mousedown",s),this._triggerShapeEvent(this.currentShape,"mousedown",s)},h.onMove=function(r){var n=this,s=n.view,f=n.currentShape;f&&f.get("destroyed")&&(f=null,n.currentShape=null);var u=n._getShape(r.x,r.y)||r.currentTarget,d=n._getShapeEventObj(r);if(d.shape=u,v(d),s.emit("mousemove",d),n._triggerShapeEvent(u,"mousemove",d),f&&!g(f,u)){var b=n._getShapeEventObj(r);b.shape=f,b.toShape=u,v(b),n._triggerShapeEvent(f,"mouseleave",b)}if(u&&!g(f,u)){var _=n._getShapeEventObj(r);_.shape=u,_.fromShape=f,v(_),n._triggerShapeEvent(u,"mouseenter",_)}n.currentShape=u;var x=n._getPointInfo(r),M=n.curViews||[];M.length===0&&x.views.length&&s.emit("plotenter",n._getEventObj(r,x,x.views)),M.length&&x.views.length===0&&s.emit("plotleave",n._getEventObj(r,x,M)),x.views.length&&(d=n._getEventObj(r,x,x.views),d.shape=u,v(d),s.emit("plotmove",d)),n.curViews=x.views},h.onOut=function(r){var n=this,s=n.view,f=n._getPointInfo(r),u=n.curViews||[],d=n._getEventObj(r,f,u);n.curViews&&n.curViews.length!==0&&(!d.toElement||d.toElement.tagName!=="CANVAS")&&(s.emit("plotleave",d),n.curViews=[])},h.onUp=function(r){var n=this.view,s=this._getShapeEventObj(r);s.shape=this.currentShape,n.emit("mouseup",s),this._triggerShapeEvent(this.currentShape,"mouseup",s)},h.onClick=function(r){var n=this,s=n.view,f=n._getShape(r.x,r.y)||r.currentTarget,u=n._getShapeEventObj(r);u.shape=f,v(u),s.emit("click",u),n._triggerShapeEvent(f,r.type,u),n.currentShape=f;var d=n._getPointInfo(r),b=d.views;if(!e.isEmpty(b)){var _=n._getEventObj(r,d,b);if(n.currentShape){var x=n.currentShape;_.shape=x,v(_)}r.type==="dblclick"?(s.emit("plotdblclick",_),s.emit("dblclick",u)):s.emit("plotclick",_)}},h.onTouchstart=function(r){var n=this.view,s=this._getShape(r.x,r.y)||r.currentTarget,f=this._getShapeEventObj(r);f.shape=s,v(f),n.emit("touchstart",f),this._triggerShapeEvent(s,"touchstart",f),this.currentShape=s},h.onTouchmove=function(r){var n=this.view,s=this._getShape(r.x,r.y)||r.currentTarget,f=this._getShapeEventObj(r);f.shape=s,v(f),n.emit("touchmove",f),this._triggerShapeEvent(s,"touchmove",f),this.currentShape=s},h.onTouchend=function(r){var n=this.view,s=this._getShapeEventObj(r);s.shape=this.currentShape,v(s),n.emit("touchend",s),this._triggerShapeEvent(this.currentShape,"touchend",s)},h.clearEvents=function(){var r=this.canvas;r.off("mousemove",e.getWrapBehavior(this,"onMove")),r.off("mouseleave",e.getWrapBehavior(this,"onOut")),r.off("mousedown",e.getWrapBehavior(this,"onDown")),r.off("mouseup",e.getWrapBehavior(this,"onUp")),r.off("click",e.getWrapBehavior(this,"onClick")),r.off("dblclick",e.getWrapBehavior(this,"onClick")),r.off("touchstart",e.getWrapBehavior(this,"onTouchstart")),r.off("touchmove",e.getWrapBehavior(this,"onTouchmove")),r.off("touchend",e.getWrapBehavior(this,"onTouchend"))},c}();B.exports=p},function(B,L,o){var e=o(0),g=o(313),v=function(){function p(h){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,e.mix(this,h)}var c=p.prototype;return c._creatGuides=function(){var i=this,r=this.options,n=this.xScales,s=this.yScales,f=this.view,u=this.viewTheme;return this.backContainer&&f&&(this.backGroup=this.backContainer.addGroup({viewId:f.get("_id")})),this.frontContainer&&f&&(this.frontGroup=this.frontContainer.addGroup({viewId:f.get("_id")})),r.forEach(function(d){var b=d.type,_=e.deepMix({xScales:n,yScales:s,viewTheme:u},u?u.guide[b]:{},d);b=e.upperFirst(b);var x=new g[b](_);i.guides.push(x)}),i.guides},c.line=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"line"},i)),this},c.arc=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"arc"},i)),this},c.text=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"text"},i)),this},c.image=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"image"},i)),this},c.region=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"region"},i)),this},c.regionFilter=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"regionFilter"},i)),this},c.dataMarker=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"dataMarker"},i)),this},c.dataRegion=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"dataRegion"},i)),this},c.html=function(i){return i===void 0&&(i={}),this.options.push(e.mix({type:"html"},i)),this},c.render=function(i){var r=this,n=r.view,s=n&&n.get("data"),f=r._creatGuides();e.each(f,function(u){var d;u.get("top")?d=r.frontGroup||r.frontContainer:d=r.backGroup||r.backContainer,u.render(i,d,s,n)})},c.clear=function(){this.options=[],this.reset()},c.changeVisible=function(i){var r=this.guides;e.each(r,function(n){n.changeVisible(i)})},c.reset=function(){var i=this.guides;e.each(i,function(r){r.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},p}();B.exports=v},function(B,L,o){function e(){return e=Object.assign||function(M){for(var P=1;P<arguments.length;P++){var C=arguments[P];for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&(M[O]=C[O])}return M},e.apply(this,arguments)}var g=o(0),v=o(32),p=v.Legend,c=o(315),h=o(13),i=o(152),r=o(154),n=o(6),s="_origin",f=4.5,u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,d=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function b(M,P,C){var O;return g.isNil(C)?!1:(M=C.translate(M),P=C.translate(P),C.isCategory?O=M===P:O=Math.abs(M-P)<=1,O)}function _(M,P){var C;return g.each(M,function(O){if(O.get("visible")){var w=O.getYScale();if(w.field===P){C=O;return}}}),C}var x=function(){function M(C){var O=this;O.options={},g.mix(O,C),O.clear();var w=O.chart;O.container=w.get("frontPlot"),O.plotRange=w.get("plotRange")}var P=M.prototype;return P.clear=function(){var O=this.legends;this.backRange=null,g.each(O,function(w){g.each(w,function(S){S.destroy()})}),this.legends={}},P.getBackRange=function(){var O=this.backRange;if(!O){var w=this.chart.get("backPlot");O=i(w,r(this.chart.get("plotRange")));var S=this.plotRange;O.maxX-O.minX<S.br.x-S.tl.x&&O.maxY-O.minY<S.br.y-S.tl.y&&(O={minX:S.tl.x,minY:S.tl.y,maxX:S.br.x,maxY:S.br.y}),this.backRange=O}return O},P._isFieldInView=function(O,w,S){var I=!1,j=S.get("scales"),N=j[O];return N&&N.values&&(I=g.inArray(N.values,w)),I},P._bindClickEvent=function(O,w,S){var I=this,j=I.chart,N=j.get("views"),W=w.field,H=I.options;O.on("itemclick",function(J){if(H.onClick&&H.defaultClickHandlerEnabled!==!0)H.onClick(J);else{var Q=J.item,ne=J.checked,K=O.get("selectedMode")==="single",ie=Q.dataValue;ne?(g.Array.remove(S,ie),I._isFieldInView(W,ie,j)&&j.filter(W,function(de){return K?de===ie:!g.inArray(S,de)}),g.each(N,function(de){I._isFieldInView(W,ie,de)&&de.filter(W,function(we){return K?we===ie:!g.inArray(S,we)})})):K||(S.push(ie),I._isFieldInView(W,ie,j)&&j.filter(W,function(de){return!g.inArray(S,de)}),g.each(N,function(de){I._isFieldInView(W,ie,de)&&de.filter(W,function(we){return!g.inArray(S,we)})})),H.onClick&&H.onClick(J),j.set("keepLegend",!0),j.set("keepPadding",!0),j.repaint(),j.set("keepPadding",!1),j.set("keepLegend",!1)}})},P._bindClickEventForMix=function(O){var w=this,S=w.chart,I=S.getAllGeoms();O.on("itemclick",function(j){var N=j.item.field,W=j.checked;W?g.each(I,function(H){var J=H.getYScale().field;J===N&&H.show()}):g.each(I,function(H){var J=H.getYScale().field;J===N&&H.hide()})})},P._filterLabels=function(O,w,S){if(O.get("gLabel"))O.get("gLabel").set("visible",S);else{var I=w.get("labelCfg");if(I&&I.fields&&I.fields.length>0){var j=w.getXScale(),N=w.getYScale(),W=j.field,H=N.field,J=O.get("origin")._origin,Q=w.get("labelContainer"),ne=Q.get("labelsGroup").get("children");g.each(ne,function(K){var ie=K.get("origin")||[];ie[W]===J[W]&&ie[H]===J[H]&&(K.set("visible",S),O.set("gLabel",K))})}}},P._bindFilterEvent=function(O,w){var S=this,I=this.chart,j=w.field;O.on("itemfilter",function(N){var W=N.range;I.filterShape(function(ne,K,ie){if(!g.isNil(ne[j])){var de=ne[j]>=W[0]&&ne[j]<=W[1];return S._filterLabels(K,ie,de),de}return!0});for(var H=I.getAllGeoms()||[],J=function(K){var ie=H[K];ie.get("type")==="heatmap"&&u(function(){ie.drawWithRange(W)})},Q=0;Q<H.length;Q++)J(Q)})},P._getShapeData=function(O){var w=O.get("origin");return g.isArray(w)&&(w=w[0]),w[s]},P._bindHoverEvent=function(O,w){var S=this,I=S.chart,j=I.getAllGeoms(),N=S.options,W=I.get("canvas");O.on("itemhover",function(H){var J=H.item.value,Q=S.pre;if(!Q)g.each(j,function(ne){var K=ne.get("shapeContainer"),ie=ne.getShapes(),de=[];if(w){var we=ne.get("scales")[w];g.each(ie,function(Re){var _e=S._getShapeData(Re);_e&&b(_e[w],J,we)&&de.push(Re)})}else ne.getYScale().field===J&&(de=ie);g.isEmpty(de)||(H.shapes=de,H.geom=ne,N.onHover?(N.onHover(H),K.sort(),W.draw()):ne.setShapesActived(de))}),S.pre=J;else if(Q===J)return}),O.on("itemunhover",function(H){S.pre=null,N.onUnhover&&N.onUnhover(H),g.each(j,function(J){J.get("activeShapes")&&(J.clearActivedShapes(),W.draw())})})},P._isFiltered=function(O,w,S){if(!O.isCategory)return!0;var I=!0;return S=O.invert(S),g.each(w,function(j){if(O.getText(j)===O.getText(S))return I=!1,!1}),I},P._alignLegend=function(O,w,S,I){var j=this,N=j.viewTheme,W=j.container,H=W.get("canvas"),J=H.get("width"),Q=H.get("height"),ne=j.totalRegion,K=j.plotRange,ie=j.getBackRange(),de=O.get("offset")[0]||0,we=O.get("offset")[1]||0,Re=O.getHeight(),_e=O.getWidth(),Ue=N.legend.margin,rt=N.legend.legendMargin,Fe=j.legends[I].length,Se=I.split("-"),ye=0,Oe=0,ue=Fe>1?ne:S;if(Se[0]==="left"||Se[0]==="right")Q=K.br.y,ye=j._getXAlign(Se[0],J,S,ie,_e,Ue),w?Oe=(w.get("y")||w.get("group").get("y"))+w.getHeight()+rt:Oe=j._getYAlignVertical(Se[1],Q,ue,ie,0,Ue,H.get("height"));else if(Se[0]==="top"||Se[0]==="bottom")if(Oe=j._getYAlignHorizontal(Se[0],Q,S,ie,Re,Ue),w){var xe=w.getWidth();ye=(w.get("x")||w.get("group").get("x"))+xe+rt}else ye=j._getXAlign(Se[1],J,ue,ie,0,Ue),Se[1]==="right"&&(ye=K.br.x-ue.totalWidth);O.move(ye+de,Oe+we)},P._getXAlign=function(O,w,S,I,j,N){var W=I.minX-j-N[3]<0?0:I.minX-j-N[3],H=O==="left"?W:I.maxX+N[1];return O==="center"&&(H=(w-S.totalWidth)/2),H},P._getYAlignHorizontal=function(O,w,S,I,j,N){var W=O==="top"?I.minY-j-N[0]:I.maxY+N[2];return W},P._getYAlignVertical=function(O,w,S,I,j,N,W){var H=O==="top"?I.minY-j-N[0]:w-S.totalHeight;return O==="center"&&(H=(W-S.totalHeight)/2),H},P._getSubRegion=function(O){var w=0,S=0,I=0,j=0;return g.each(O,function(N){var W=N.getWidth(),H=N.getHeight();w<W&&(w=W),I+=W,S<H&&(S=H),j+=H}),{maxWidth:w,totalWidth:I,maxHeight:S,totalHeight:j}},P._getRegion=function(){var O=this,w=O.viewTheme,S=O.legends,I=w.legend.legendMargin,j=[],N=0,W=0;return g.each(S,function(H){var J=O._getSubRegion(H);j.push(J),N+=J.totalWidth+I,W+=J.totalHeight+I}),{totalWidth:N,totalHeight:W,subs:j}},P._addCategoryLegend=function(O,w,S,I,j){var N=this,W=O.field,H=N.options,J=H[W];J&&(H=J);var Q=N.legends;Q[j]=Q[j]||[];var ne=N.container,K=[],ie=O.getTicks(),de=!0,we=S.get("shapeType")||"point",Re=S.getDefaultValue("shape")||"circle";H[W]&&H[W].marker?(Re=H[W].marker,we="point",de=!1):H.marker&&(Re=H.marker,we="point",de=!1);var _e=N.chart,Ue=N.viewTheme,rt=_e.get("canvas"),Fe=N.plotRange,Se=j.split("-"),ye=Se[0]==="right"||Se[0]==="left"?Fe.bl.y-Fe.tr.y:rt.get("width");g.each(ie,function(pe){var be=pe.text,le=be,z=pe.value,ae=O.invert(z),V={isInCircle:S.isInCircle()},re=I?N._isFiltered(O,I,z):!0,te=S.getAttr("color"),q=S.getAttr("shape");if(te)if(te.callback&&te.callback.length>1){var ve=Array(te.callback.length-1).fill("");V.color=te.mapping.apply(te,[ae].concat(ve)).join("")||Ue.defaultColor}else V.color=te.mapping(ae).join("")||Ue.defaultColor;if(de&&q)if(q.callback&&q.callback.length>1){var Me=Array(q.callback.length-1).fill("");Re=q.mapping.apply(q,[ae].concat(Me)).join("")}else Re=q.mapping(ae).join("");var De=h.getShapeFactory(we),ze=De.getMarkerCfg(Re,V);n.legendMarkerRadius&&(ze.radius=n.legendMarkerRadius),g.isFunction(Re)&&(ze.symbol=Re),K.push({value:le,dataValue:ae,checked:re,marker:ze})});var Oe=g.deepMix({},Ue.legend[Se[0]],H[W]||H,{viewId:_e.get("_id"),maxLength:ye,items:K,container:ne,position:[0,0]});Oe.title&&g.deepMix(Oe,{title:{text:O.alias||O.field}});var ue;if(N._isTailLegend(H,S))Oe.chart=N.chart,Oe.geom=S,ue=new c(Oe);else if(H.useHtml){var xe=ne.get("canvas").get("el");if(ne=H.container,g.isString(ne)&&/^\#/.test(ne)){var Ae=ne.replace("#","");ne=document.getElementById(Ae)}ne||(ne=xe.parentNode),Oe.container=ne,Oe.legendStyle===void 0&&(Oe.legendStyle={}),Oe.legendStyle.CONTAINER_CLASS=e({},Oe.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":xe.style.zIndex===""?1:parseInt(xe.style.zIndex,10)+1}),H.flipPage?(Oe.legendStyle.CONTAINER_CLASS.height=Se[0]==="right"||Se[0]==="left"?ye+"px":"auto",Oe.legendStyle.CONTAINER_CLASS.width=Se[0]==="right"||Se[0]==="left"?"auto":ye+"px",ue=new p.CatPageHtml(Oe)):ue=new p.CatHtml(Oe)}else ue=new p.Category(Oe);return N._bindClickEvent(ue,O,I),Q[j].push(ue),ue},P._bindChartMove=function(O){var w=this.chart,S=this.legends;w.on("plotmove",function(I){var j=!1;if(I.target){var N=I.target.get("origin");if(N){var W=N[s]||N[0][s],H=O.field;if(W){var J=W[H];g.each(S,function(Q){g.each(Q,function(ne){j=!0,!ne.destroyed&&ne.activate(J)})})}}}j||g.each(S,function(Q){g.each(Q,function(ne){!ne.destroyed&&ne.deactivate()})})})},P._addContinuousLegend=function(O,w,S){var I=this,j=I.legends;j[S]=j[S]||[];var N=I.container,W=O.field,H=O.getTicks(),J=[],Q,ne,K,ie=I.viewTheme;g.each(H,function(Ue){var rt=Ue.value,Fe=O.invert(rt),Se=w.mapping(Fe).join("");J.push({value:Ue.tickValue,attrValue:Se,color:Se,scaleValue:rt}),rt===0&&(ne=!0),rt===1&&(K=!0)}),ne||J.push({value:O.min,attrValue:w.mapping(0).join(""),color:w.mapping(0).join(""),scaleValue:0}),K||J.push({value:O.max,attrValue:w.mapping(1).join(""),color:w.mapping(1).join(""),scaleValue:1});var de=I.options,we=S.split("-"),Re=ie.legend[we[0]];(de&&de.slidable===!1||de[W]&&de[W].slidable===!1)&&(Re=g.mix({},Re,ie.legend.gradient));var _e=g.deepMix({},Re,de[W]||de,{items:J,attr:w,formatter:O.formatter,container:N,position:[0,0]});if(_e.title&&g.deepMix(_e,{title:{text:O.alias||O.field}}),w.type==="color")Q=new p.Color(_e);else if(w.type==="size")de&&de.sizeType==="circle"?Q=new p.CircleSize(_e):Q=new p.Size(_e);else return;return I._bindFilterEvent(Q,O),j[S].push(Q),Q},P._isTailLegend=function(O,w){if(O.hasOwnProperty("attachLast")&&O.attachLast){var S=w.get("type");if(S==="line"||S==="lineStack"||S==="area"||S==="areaStack")return!0}return!1},P._adjustPosition=function(O,w){var S;if(w)S="right-top";else if(g.isArray(O))S=String(O[0])+"-"+String(O[1]);else{var I=O.split("-");I.length===1?(I[0]==="left"&&(S="left-bottom"),I[0]==="right"&&(S="right-bottom"),I[0]==="top"&&(S="top-center"),I[0]==="bottom"&&(S="bottom-center")):S=O}return S},P.addLegend=function(O,w,S,I){var j=this,N=j.options,W=O.field,H=N[W],J=j.viewTheme;if(H===!1)return null;if(H&&H.custom)j.addCustomLegend(W);else{var Q=N.position||J.defaultLegendPosition;Q=j._adjustPosition(Q,j._isTailLegend(N,S)),H&&H.position&&(Q=j._adjustPosition(H.position,j._isTailLegend(H,S)));var ne;O.isLinear?ne=j._addContinuousLegend(O,w,Q):ne=j._addCategoryLegend(O,w,S,I,Q),ne&&(j._bindHoverEvent(ne,W),N.reactive&&j._bindChartMove(O))}},P.addCustomLegend=function(O){var w=this,S=w.chart,I=w.viewTheme,j=w.container,N=w.options;O&&(N=N[O]);var W=N.position||I.defaultLegendPosition;W=w._adjustPosition(W);var H=w.legends;H[W]=H[W]||[];var J=N.items;if(!!J){var Q=S.getAllGeoms();g.each(J,function(rt){var Fe=_(Q,rt.value);g.isPlainObject(rt.marker)?rt.marker.radius=rt.marker.radius||n.legendMarkerRadius||f:(rt.marker={symbol:rt.marker||"circle",radius:n.legendMarkerRadius||f},g.indexOf(d,rt.marker.symbol)!==-1?rt.marker.stroke=rt.fill:rt.marker.fill=rt.fill);var Se=rt.marker.symbol;g.isString(Se)&&Se.indexOf("hollow")!==-1&&(rt.marker.symbol=g.lowerFirst(Se.substr(6))),rt.checked=g.isNil(rt.checked)?!0:rt.checked,rt.geom=Fe});var ne=S.get("canvas"),K=w.plotRange,ie=W.split("-"),de=ie[0]==="right"||ie[0]==="left"?K.bl.y-K.tr.y:ne.get("width"),we=g.deepMix({},I.legend[ie[0]],N,{maxLength:de,items:J,container:j,position:[0,0]}),Re;if(N.useHtml){var _e=N.container;if(/^\#/.test(j)){var Ue=_e.replace("#","");_e=document.getElementById(Ue)}else _e||(_e=j.get("canvas").get("el").parentNode);we.container=_e,we.legendStyle===void 0&&(we.legendStyle={}),we.legendStyle.CONTAINER_CLASS||(we.legendStyle.CONTAINER_CLASS={height:ie[0]==="right"||ie[0]==="left"?de+"px":"auto",width:ie[0]==="right"||ie[0]==="left"?"auto":de+"px",position:"absolute",overflow:"auto"}),N.flipPage?Re=new p.CatPageHtml(we):Re=new p.CatHtml(we)}else Re=new p.Category(we);return H[W].push(Re),Re.on("itemclick",function(rt){N.onClick&&N.onClick(rt)}),w._bindHoverEvent(Re),Re}},P.addMixedLegend=function(O,w){var S=this,I=S.options,j=[];g.each(O,function(H){var J=H.alias||H.field,Q=I[H.field];g.each(w,function(ne){if(ne.getYScale()===H&&H.values&&H.values.length>0&&Q!==!1){var K=ne.get("shapeType")||"point",ie=ne.getDefaultValue("shape")||"circle",de=h.getShapeFactory(K),we={color:ne.getDefaultValue("color")},Re=de.getMarkerCfg(ie,we);n.legendMarkerRadius&&(Re.radius=n.legendMarkerRadius);var _e={value:J,marker:Re,field:H.field};j.push(_e)}})});var N={custom:!0,items:j};S.options=g.deepMix({},N,S.options);var W=S.addCustomLegend();S._bindClickEventForMix(W)},P.alignLegends=function(){var O=this,w=O.legends,S=O._getRegion(w);O.totalRegion=S;var I=0;return g.each(w,function(j,N){var W=S.subs[I];g.each(j,function(H,J){var Q=j[J-1];H.get("useHtml")&&!H.get("autoPosition")||O._alignLegend(H,Q,W,N)}),I++}),this},M}();B.exports=x},function(B,L,o){var e=o(202),g=o(0),v=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,p={LINEAR:"linear",CAT:"cat",TIME:"time"},c=function(){function h(r){this.defs={},this.viewTheme={scales:{}},this.filters={},g.assign(this,r)}var i=h.prototype;return i._getDef=function(n){var s=this.defs,f=this.viewTheme,u=null;return(f.scales[n]||s[n])&&(u=g.mix({},f.scales[n]),g.each(s[n],function(d,b){g.isNil(d)?delete u[b]:u[b]=d}),this.filters[n]&&(delete u.min,delete u.max)),u},i._getDefaultType=function(n,s){var f=p.LINEAR,u=g.Array.firstValue(s,n);return g.isArray(u)&&(u=u[0]),v.test(u)?f=p.TIME:g.isString(u)&&(f=p.CAT),f},i._getScaleCfg=function(n,s,f){var u={field:s},d=g.Array.values(f,s);if(u.values=d,!e.isCategory(n)&&n!=="time"){var b=g.Array.getRange(d);u.min=b.min,u.max=b.max,u.nice=!0}return n==="time"&&(u.nice=!1),u},i.createScale=function(n,s){var f=this,u=f._getDef(n),d,b=s||[],_=g.Array.firstValue(b,n);if(g.isNumber(n)||g.isNil(_)&&!u)d=e.identity({value:n,field:n.toString(),values:[n]});else{var x;u&&(x=u.type),x=x||f._getDefaultType(n,b);var M=f._getScaleCfg(x,n,b);u&&g.mix(M,u),d=e[x](M)}return d},h}();B.exports=c},function(B,L,o){function e(){return e=Object.assign||function(x){for(var M=1;M<arguments.length;M++){var P=arguments[M];for(var C in P)Object.prototype.hasOwnProperty.call(P,C)&&(x[C]=P[C])}return x},e.apply(this,arguments)}var g=o(0),v=o(13),p=o(32),c=p.Tooltip,h=g.MatrixUtil,i=h.vec2,r=["line","area","path","areaStack"],n=["line","area","point"],s=["marker","showMarker"];function f(x,M){var P=-1;return g.each(x,function(C,O){var w=!0;for(var S in M)if(M.hasOwnProperty(S)&&!s.includes(S)&&!g.isObject(M[S])&&M[S]!==C[S]){w=!1;break}if(w)return P=O,!1}),P}function u(x,M){if(!x)return!1;var P="";return x.className?(g.isNil(x.className.baseVal)?P=x.className:P=x.className.baseVal,P.includes(M)):!1}function d(x,M){for(var P=x.parentNode,C=!1;P&&P!==document.body;){if(u(P,M)){C=!0;break}P=P.parentNode}return C}function b(x){var M=[];return g.each(x,function(P){var C=f(M,P);C===-1?M.push(P):M[C]=P}),M}var _=function(){function x(P){g.assign(this,P),this.timeStamp=0,this.locked=!1}var M=x.prototype;return M._normalizeEvent=function(C){var O=this.chart,w=this._getCanvas(),S=w.getPointByClient(C.clientX,C.clientY),I=w.get("pixelRatio");S.x=S.x/I,S.y=S.y/I;var j=O.getViewsByPoint(S);return S.views=j,S},M._getCanvas=function(){return this.chart.get("canvas")},M._getTriggerEvent=function(){var C=this.options,O=C.triggerOn,w;return!O||O==="mousemove"?w="plotmove":O==="click"?w="plotclick":O==="none"&&(w=null),w},M._getDefaultTooltipCfg=function(){var C=this,O=C.chart,w=C.viewTheme,S=C.options,I=g.mix({},w.tooltip),j=O.getAllGeoms().filter(function(ne){return ne.get("visible")}),N=[];g.each(j,function(ne){var K=ne.get("type"),ie=ne.get("adjusts"),de=!1;ie&&g.each(ie,function(we){if(we.type==="symmetric"||we.type==="Symmetric")return de=!0,!1}),g.indexOf(N,K)===-1&&!de&&N.push(K)});var W=j.length&&j[0].get("coord")?j[0].get("coord").isTransposed:!1,H;if(j.length&&j[0].get("coord")&&j[0].get("coord").type==="cartesian"){if(N[0]==="interval"&&S.shared!==!1){var J=g.mix({},w.tooltipCrosshairsRect);J.isTransposed=W,H={zIndex:0,crosshairs:J}}else if(g.indexOf(n,N[0])>-1){var Q=g.mix({},w.tooltipCrosshairsLine);Q.isTransposed=W,H={crosshairs:Q}}}return g.mix(I,H,{})},M._bindEvent=function(){var C=this.chart,O=this._getTriggerEvent();O&&(C.on(O,g.wrapBehavior(this,"onMouseMove")),C.on("plotleave",g.wrapBehavior(this,"onMouseOut")))},M._offEvent=function(){var C=this.chart,O=this._getTriggerEvent();O&&(C.off(O,g.getWrapBehavior(this,"onMouseMove")),C.off("plotleave",g.getWrapBehavior(this,"onMouseOut")))},M._setTooltip=function(C,O,w,S){var I=this,j=I.tooltip,N=I.prePoint;if(!N||N.x!==C.x||N.y!==C.y){O=b(O),I.prePoint=C;var W=I.chart,H=I.viewTheme,J=g.isArray(C.x)?C.x[C.x.length-1]:C.x,Q=g.isArray(C.y)?C.y[C.y.length-1]:C.y;j.get("visible")||W.emit("tooltip:show",{x:J,y:Q,tooltip:j});var ne=O[0],K=ne.title||ne.name;j.isContentChange(K,O)&&(W.emit("tooltip:change",{tooltip:j,x:J,y:Q,items:O}),K=O[0].title||O[0].name,j.setContent(K,O),g.isEmpty(w)?(j.clearMarkers(),j.set("markerItems",[])):I.options.hideMarkers===!0?j.set("markerItems",w):j.setMarkers(w,H.tooltipMarker));var ie=this._getCanvas();S===ie&&j.get("type")==="mini"?j.hide():(j.setPosition(J,Q,S),j.show())}},M.hideTooltip=function(){var C=this.tooltip,O=this.chart,w=this._getCanvas();this.prePoint=null,C.hide(),O.emit("tooltip:hide",{tooltip:C}),w.draw()},M.onMouseMove=function(C){if(!(g.isEmpty(C.views)||this.locked)){var O=this.timeStamp,w=+new Date,S={x:C.x,y:C.y};w-O>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(S,C.views,C.shape),this.timeStamp=w)}},M.onMouseOut=function(C){var O=this.tooltip;!O.get("visible")||!O.get("follow")||this.locked||C&&C.toElement&&(u(C.toElement,"g2-tooltip")||d(C.toElement,"g2-tooltip"))||this.hideTooltip()},M.renderTooltip=function(){var C=this;if(!C.tooltip){var O=C.chart,w=C.viewTheme,S=C._getCanvas(),I=C._getDefaultTooltipCfg(),j=C.options;j=g.deepMix({plotRange:O.get("plotRange"),capture:!1,canvas:S,frontPlot:O.get("frontPlot"),viewTheme:w.tooltip,backPlot:O.get("backPlot")},I,j),j.crosshairs&&j.crosshairs.type==="rect"&&(j.zIndex=0),j.visible=!1;var N;j.type==="mini"?(j.crosshairs=!1,j.position="top",N=new c.Mini(j)):j.useHtml?N=new c.Html(j):N=new c.Canvas(j),C.tooltip=N;var W=C._getTriggerEvent(),H=N.get("container");!N.get("enterable")&&W==="plotmove"&&H&&(H.onmousemove=function(J){var Q=C._normalizeEvent(J);O.emit(W,Q)}),H&&(H.onmouseleave=function(){C.locked||C.hideTooltip()}),C._bindEvent()}},M._formatMarkerOfItem=function(C,O,w){var S=this,I=S.options,j=w.point;if(j&&j.x&&j.y){var N=g.isArray(j.x)?j.x[j.x.length-1]:j.x,W=g.isArray(j.y)?j.y[j.y.length-1]:j.y;j=C.applyMatrix(N,W,1),w.x=j[0],w.y=j[1],w.showMarker=!0,w.color.substring(0,2)==="l("&&(!I.hasOwnProperty("useHtml")||I.useHtml)&&(w.color=w.color.split(" ")[1].substring(2));var H=S._getItemMarker(O,w);if(w.marker=H,g.indexOf(r,O.get("type"))!==-1)return w}return null},M.lockTooltip=function(){this.locked=!0},M.unlockTooltip=function(){this.locked=!1},M.showTooltip=function(C,O,w){var S=this,I=this;if(!(g.isEmpty(O)||!C)){this.tooltip||this.renderTooltip();var j=I.options,N=[],W=[];if(g.each(O,function(ie){if(!ie.get("tooltipEnable"))return!0;var de=ie.get("geoms"),we=ie.get("coord");g.each(de,function(Re){var _e=Re.get("type");if(Re.get("visible")&&Re.get("tooltipCfg")!==!1){var Ue=Re.get("dataArray");if(Re.isShareTooltip()||j.shared===!1&&g.inArray(["area","line","path","polygon"],_e)){var rt=Re.getXScale(),Fe=Re.getAttr("color"),Se=Fe?Fe.field:void 0;if(_e==="interval"&&rt.field===Se&&Re.hasAdjust("dodge")){var ye=g.find(Ue,function(pe){return!!Re.findPoint(C,pe)});g.each(ye,function(pe){var be=Re.getTipItems(pe,j.title);g.each(be,function(le){var z=I._formatMarkerOfItem(we,Re,le);z&&N.push(z)}),W=W.concat(be)})}else g.each(Ue,function(pe){var be=Re.findPoint(C,pe);if(be){var le=Re.getTipItems(be,j.title);g.each(le,function(z){var ae=I._formatMarkerOfItem(we,Re,z);ae&&N.push(ae)}),W=W.concat(le)}})}else{var Oe=Re.get("shapeContainer"),ue=Oe.get("canvas"),xe=ue.get("pixelRatio"),Ae=Oe.getShape(C.x*xe,C.y*xe);Ae&&Ae.get("visible")&&Ae.get("origin")&&(W=Re.getTipItems(Ae.get("origin"),j.title)),g.each(W,function(pe){var be=S._formatMarkerOfItem(we,Re,pe);be&&N.push(be)})}}}),g.each(W,function(Re){var _e=Re.point,Ue=g.isArray(_e.x)?_e.x[_e.x.length-1]:_e.x,rt=g.isArray(_e.y)?_e.y[_e.y.length-1]:_e.y;_e=we.applyMatrix(Ue,rt,1),Re.x=_e[0],Re.y=_e[1]})}),W.length){var H=W[0];if(!W.every(function(ie){return ie.title===H.title})){var J=H,Q=Infinity;W.forEach(function(ie){var de=i.distance([C.x,C.y],[ie.x,ie.y]);de<Q&&(Q=de,J=ie)}),W=W.filter(function(ie){return ie.title===J.title}),N=N.filter(function(ie){return ie.title===J.title})}if(j.shared===!1&&W.length>1){var ne=W[0],K=Math.abs(C.y-ne.y);g.each(W,function(ie){Math.abs(C.y-ie.y)<=K&&(ne=ie,K=Math.abs(C.y-ie.y))}),ne&&ne.x&&ne.y&&(N=[ne]),W=[ne]}I._setTooltip(C,W,N,w)}else I.hideTooltip()}},M.clear=function(){var C=this.tooltip;C&&C.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},M._getItemMarker=function(C,O){var w=this.options,S=w.marker||this.viewTheme.tooltip.marker;if(g.isFunction(S)){var I=C.get("shapeType")||"point",j=C.getDefaultValue("shape")||"circle",N=v.getShapeFactory(I),W={color:O.color},H=N.getMarkerCfg(j,W);return S(H,O)}return e({fill:O.color},S)},x}();B.exports=_},function(B,L,o){function e(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function g(M,P){M.prototype=Object.create(P.prototype),M.prototype.constructor=M,v(M,P)}function v(M,P){return v=Object.setPrototypeOf||function(O,w){return O.__proto__=w,O},v(M,P)}var p=o(150),c=o(12),h=o(0),i=o(151),r=o(6),n=o(162),s="_origin",f=o(304);function u(M){var P=M.startAngle,C=M.endAngle;return!(!h.isNil(P)&&!h.isNil(C)&&C-P<Math.PI*2)}function d(M,P,C){var O=(M-P)/(C-P);return O>=0&&O<=1}function b(M,P){var C=!1;if(M){var O=M.type;if(O==="theta"){var w=M.start,S=M.end;C=d(P.x,w.x,S.x)&&d(P.y,w.y,S.y)}else{var I=M.invert(P);C=I.x>=0&&I.y>=0&&I.x<=1&&I.y<=1}}return C}var _={};h.each(c,function(M,P){var C=h.lowerFirst(P);_[C]=function(O){var w=new M(O);return this.addGeom(w),w}});var x=function(M){g(C,M);var P=C.prototype;P.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:r.animate,visible:!0}};function C(O){var w;w=M.call(this,O)||this;var S=e(w);return S._setTheme(),h.each(c,function(I,j){var N=h.lowerFirst(j);S[N]=function(W){W===void 0&&(W={}),W.viewTheme=S.get("viewTheme");var H=new I(W);return S.addGeom(H),H}}),S.init(),w}return P._setTheme=function(){var w=this,S=w.get("theme"),I={},j={};h.isObject(S)?j=S:h.indexOf(Object.keys(n),S)!==-1&&(j=n[S]),h.deepMix(I,r,j),w.set("viewTheme",I)},P.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},P._initOptions=function(){var w=this,S=h.mix({},w.get("options"));S.scales||(S.scales={}),S.coord||(S.coord={}),S.animate===!1&&this.set("animate",!1),(S.tooltip===!1||h.isNull(S.tooltip))&&this.set("tooltipEnable",!1),S.geoms&&S.geoms.length&&h.each(S.geoms,function(N){w._createGeom(N)});var I=w.get("scaleController");I&&(I.defs=S.scales);var j=w.get("coordController");j&&j.reset(S.coord),this.set("options",S)},P._createGeom=function(w){var S=w.type,I;this[S]&&(I=this[S](),h.each(w,function(j,N){if(I[N])if(h.isObject(j)&&j.field)if(j==="label")I[N](j.field,j.callback,j.cfg);else{var W;h.each(j,function(H,J){J!=="field"&&(W=H)}),I[N](j.field,W)}else I[N](j)}))},P._initControllers=function(){var w=this,S=w.get("options"),I=w.get("viewTheme"),j=w.get("canvas"),N=new i.Scale({viewTheme:I,defs:S.scales}),W=new i.Coord(S.coord);this.set("scaleController",N),this.set("coordController",W);var H=new i.Axis({canvas:j,viewTheme:I});this.set("axisController",H);var J=new i.Guide({viewTheme:I,options:S.guides||[]});this.set("guideController",J)},P._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},P._initGeoms=function(){for(var w=this.get("geoms"),S=this.get("filteredData"),I=this.get("coord"),j=this.get("_id"),N=0;N<w.length;N++){var W=w[N];W.set("data",S),W.set("coord",I),W.set("_id",j+"-geom"+N),W.set("keyFields",this.get("keyFields")),W.init()}},P._clearGeoms=function(){for(var w=this,S=w.get("geoms"),I=0;I<S.length;I++){var j=S[I];j.clear()}},P._removeGeoms=function(){for(var w=this,S=w.get("geoms");S.length>0;){var I=S.shift();I.destroy()}},P._drawGeoms=function(){this.emit("beforedrawgeoms");for(var w=this.get("geoms"),S=this.get("coord"),I=0;I<w.length;I++){var j=w[I];j.setCoord(S),j.paint()}this.emit("afterdrawgeoms")},P.isShapeInView=function(w){var S=this.get("_id"),I=w._id;if(I)return I.split("-")[0]===S;for(var j=w;j;){if(j.get("viewId")===S)return!0;j=j.get("parent")}return!1},P.getViewRegion=function(){var w=this,S=w.get("parent"),I,j;if(S){var N=S.getViewRegion(),W=w._getViewRegion(N.start,N.end);I=W.start,j=W.end}else I=w.get("start"),j=w.get("end");return{start:I,end:j}},P._getViewRegion=function(w,S){var I=this.get("start"),j=this.get("end"),N=I.x,W=1-j.y,H=j.x,J=1-I.y,Q=this.get("padding"),ne=h.toAllPadding(Q),K=ne[0],ie=ne[1],de=ne[2],we=ne[3],Re={x:N*(S.x-w.x)+w.x+we,y:W*(S.y-w.y)+w.y-de},_e={x:H*(S.x-w.x)+w.x-ie,y:J*(S.y-w.y)+w.y+K};return{start:Re,end:_e}},P._createCoord=function(){var w=this.get("coordController"),S=this.getViewRegion(),I=w.createCoord(S.start,S.end);this.set("coord",I)},P._renderAxes=function(){var w=this.get("options"),S=w.axes;if(S!==!1){var I=this.get("axisController");I.container=this.get("backPlot"),I.coord=this.get("coord"),I.options=S||{};var j=this.getXScale(),N=this.getYScales(),W=this.get("_id");I.createAxis(j,N,W)}},P._renderGuides=function(){var w=this.get("guideController");if(!h.isEmpty(w.options)){var S=this.get("coord");w.view=this,w.backContainer=this.get("backPlot"),w.frontContainer=this.get("frontPlot"),w.xScales=this._getScales("x"),w.yScales=this._getScales("y"),w.render(S)}},P._bindEvents=function(){var w=new i.Event({view:this,canvas:this.get("canvas")});w.bindEvents(),this.set("eventController",w)},P._clearEvents=function(){var w=this.get("eventController");w&&w.clearEvents()},P._getScales=function(w){for(var S=this.get("geoms"),I={},j=0;j<S.length;j++){var N=S[j],W=w==="x"?N.getXScale():N.getYScale();W&&!I[W.field]&&(I[W.field]=W)}return I},P._adjustScale=function(){this._setCatScalesRange();for(var w=this.get("geoms"),S=this.get("scaleController"),I=S.defs,j=0;j<w.length;j++){var N=w[j];if(N.get("type")==="interval"){var W=N.getYScale(),H=W.field,J=W.min,Q=W.max,ne=W.type;!(I[H]&&I[H].min)&&ne!=="time"&&(J>0?W.change({min:0}):Q<=0&&W.change({max:0}))}}},P._setCatScalesRange=function(){var w=this,S=w.get("coord"),I=w.get("viewTheme"),j=w.getXScale(),N=w.getYScales(),W=[];j&&W.push(j),W=W.concat(N);var H=S.isPolar&&u(S),J=w.get("scaleController"),Q=J.defs;h.each(W,function(ne){if((ne.isCategory||ne.isIdentity)&&ne.values&&!(Q[ne.field]&&Q[ne.field].range)){var K=ne.values.length,ie;if(K===1)ie=[.5,1];else{var de=1,we=0;H?S.isTransposed?(de=I.widthRatio.multiplePie,we=1/K*de,ie=[we/2,1-we/2]):ie=[0,1-1/K]:(we=1/K*1/2,ie=[we,1-we])}ne.range=ie}})},P.getXScale=function(){var w=this.get("geoms"),S=null;return h.isEmpty(w)||(S=w[0].getXScale()),S},P.getYScales=function(){for(var w=this.get("geoms"),S=[],I=0;I<w.length;I++){var j=w[I],N=j.getYScale();N&&h.indexOf(S,N)===-1&&S.push(N)}return S},P.getXY=function(w){var S=this,I=S.get("coord"),j=S._getScales("x"),N=S._getScales("y"),W,H;for(var J in w)j[J]&&(W=j[J].scale(w[J])),N[J]&&(H=N[J].scale(w[J]));return!h.isNil(W)&&!h.isNil(H)?I.convert({x:W,y:H}):null},P.getSnapRecords=function(w){var S=this,I=S.get("geoms"),j=[];return h.each(I,function(N){var W=N.get("dataArray"),H;h.each(W,function(J){H=N.findPoint(w,J),H&&j.push(H)})}),j},P.addGeom=function(w){var S=this,I=S.get("geoms");I.push(w),w.set("view",S);var j=S.get("viewContainer");w.set("container",j),w.set("animate",S.get("animate")),w.bindEvents()},P.removeGeom=function(w){var S=this.get("geoms");h.Array.remove(S,w),w.destroy()},P.createScale=function(w,S){var I=this.get("scales"),j=this.get("parent"),N=I[w];if(!S){var W=this.get("filteredData"),H=this._getFieldsForLegend();W.length&&!H.includes(w)?S=W:S=this.get("data")}var J=this.get("scaleController");if(N){if(N.sync){var ne=J.createScale(w,S);this._syncScale(N,ne)}}else{if(N=J.createScale(w,S),N.sync&&j){var Q=j.createScale(w,S);N=this._getSyncScale(Q,N)}I[w]=N}return N},P._getFieldsForLegend=function(){var w=[],S=this.get("geoms");return h.each(S,function(I){var j=I.getFieldsForLegend();w=w.concat(j)}),h.uniq(w)},P._getSyncScale=function(w,S){return w.type!==S.type?S:(this._syncScale(w,S),w)},P._syncScale=function(w,S){var I=h.union(w.values,S.values);if(S.isLinear){var j=Math.max(w.max,S.max),N=Math.min(w.min,S.min);(w.max!==j||w.min!==N)&&w.change({min:N,max:j,values:I})}I.length!==w.values.length&&w.change({values:I})},P.getFilteredValues=function(w){var S=this.get("scales")[w],I=S.values,j=this._getFilters(),N;return j&&j[w]?N=I.filter(j[w]):N=I.slice(0),N},P.getFilteredOutValues=function(w){var S=this.get("scales")[w],I=S.values,j=this._getFilters(),N;return j&&j[w]?N=I.filter(function(){return!j[w].apply(j,arguments)}):N=[],N},P.filter=function(w,S){var I=this.get("options");I.filters||(I.filters={}),I.filters[w]=S,this.get("scaleController").filters=I.filters},P._getFilters=function(){var w=this.get("options");return w.filters},P.execFilter=function(w){var S=this,I=S._getFilters();return I&&(w=w.filter(function(j){var N=!0;return h.each(I,function(W,H){if(W&&(N=W(j[H],j),!N))return!1}),N})),w},P.axis=function(w,S){var I=this.get("options");if(w===!1)I.axes=!1;else{I.axes||(I.axes={});var j=I.axes;j[w]=S}return this},P.guide=function(){return this.get("guideController")},P._getKeyFields=function(w){var S=[];h.each(w,function(I,j){I.key&&S.push(j)}),this.set("keyFields",S)},P.scale=function(w,S){var I=this.get("options"),j=I.scales;return h.isObject(w)?h.mix(j,w):j[w]=S,this._getKeyFields(j),this},P.tooltip=function(w){return this.set("tooltipEnable",w),this},P.animate=function(w){var S=this.get("options");return S.animate=w,this.set("animate",w),this},P.changeOptions=function(w){return this.set("options",w),this._initOptions(w),this},P.getViewsByPoint=function(w){var S=[],I=this.get("views");return b(this.get("coord"),w)&&S.push(this),h.each(I,function(j){j.get("visible")&&b(j.get("coord"),w)&&S.push(j)}),S},P.eachShape=function(w){var S=this,I=S.get("views"),j=S.get("canvas");h.each(I,function(W){W.eachShape(w)});var N=this.get("geoms");return h.each(N,function(W){var H=W.getShapes();h.each(H,function(J){var Q=J.get("origin");if(h.isArray(Q)){var ne=Q.map(function(ie){return ie[s]});w(ne,J,W,S)}else{var K=Q[s];w(K,J,W,S)}})}),j.draw(),this},P.filterShape=function(w){var S=function(j,N,W,H){w(j,N,W,H)?N.show():N.hide()};return this.eachShape(S),this},P.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner");var w=this.get("options");w.geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},P.clear=function(){var w=this.get("options");return w.filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},P.coord=function(w,S){var I=this.get("coordController");return I.reset({type:w,cfg:S}),I},P.resetCoord=function(){this._createCoord()},P.source=function(w,S){return this._initData(w),S&&this.scale(S),this.emit("setdata"),this},P.changeData=function(w){return this.emit("beforechangedata"),this._initData(w),this.emit("afterchangedata"),this.repaint(),this},P._initData=function(w){var S=this.get("dataView");S&&(S.off("change",h.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),w&&w.isDataView&&(w.on("change",h.wrapBehavior(this,"_onViewChange")),this.set("dataView",w),w=w.rows),this.set("data",w)},P._onViewChange=function(){this.emit("beforechangedata");var w=this.get("dataView"),S=w.rows;this.set("data",S),this.emit("afterchangedata"),this.repaint()},P.beforeRender=function(){var w=this.get("views");h.each(w,function(S){S.beforeRender()}),this.initView()},P.drawComponents=function(){var w=this.get("views");h.each(w,function(S){S.drawComponents()}),this._renderAxes(),this._renderGuides()},P.drawCanvas=function(w){if(!w){var S=this.get("views"),I=this.get("backPlot");I.sort();var j=this.get("canvas"),N=this.get("animate");if(N){var W=this.get("isUpdate");h.each(S,function(H){f.execAnimation(H,W)}),f.execAnimation(this,W)}else j.draw()}},P.render=function(w){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(w),this.emit("afterrender"),this.set("rendered",!0),this},P.initView=function(){var w=this.get("data")||[],S=this.execFilter(w);this.set("filteredData",S),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},P.paint=function(){var w=this.get("views");h.each(w,function(I){I.paint()});var S=this.get("data");h.isEmpty(S)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},P.changeVisible=function(w,S){var I=this.get("geoms");if(h.each(I,function(N){N.changeVisible(w,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(w),this.get("guideController")&&this.get("guideController").changeVisible(w),!S){var j=this.get("canvas");j.draw()}},P.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},P.destroy=function(){this._clearEvents();var w=this.get("dataView");w&&w.off("change",h.getWrapBehavior(this,"_onViewChange")),this.clear(),M.prototype.destroy.call(this)},C}(p);B.exports=x},function(B,L,o){var e=o(32),g=e.Guide,v=o(314);g.RegionFilter=v,B.exports=g},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,g(r,n)}function g(r,n){return g=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},g(r,n)}var v=o(0),p=o(22),c=o(184),h=c.Path,i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return v.mix({},u,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},s.render=function(u,d,b,_){var x=this,M=d.addGroup();M.name="guide-region-filter",_.once("afterpaint",function(){if(!M.get("destroyed")){x._drawShapes(_,M);var P=x._drawClip(u);M.attr({clip:P}),x.set("clip",P),x.get("appendInfo")&&M.setSilent("appendInfo",x.get("appendInfo")),x.set("el",M)}})},s._drawShapes=function(u,d){var b=this,_=[],x=u.getAllGeoms();return x.map(function(M){var P=M.getShapes(),C=M.get("type"),O=b._geomFilter(C);return O&&P.map(function(w){var S=w.type,I=v.cloneDeep(w.attr());b._adjustDisplay(I);var j=d.addShape(S,{attrs:I});return _.push(j),w}),M}),_},s._drawClip=function(u){var d=this,b=d.parsePoint(u,d.get("start")),_=d.parsePoint(u,d.get("end")),x=[["M",b.x,b.y],["L",_.x,b.y],["L",_.x,_.y],["L",b.x,_.y],["z"]],M=new h({attrs:{path:x,opacity:1}});return M},s._adjustDisplay=function(u){var d=this,b=d.get("color");u.fill&&(u.fill=u.fillStyle=b),u.stroke=u.strokeStyle=b},s._geomFilter=function(u){var d=this,b=d.get("apply");return b?v.contains(b,u):!0},s.clear=function(){r.prototype.clear.call(this);var u=this.get("clip");u&&u.remove()},n}(p);B.exports=i},function(B,L,o){function e(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,g(n,s)}function g(n,s){return g=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},g(n,s)}var v=o(0),p=o(32),c=o(6),h=p.Legend,i=h.Category,r=function(n){e(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return v.mix({},d,{type:"tail-legend",layout:"vertical",autoLayout:!0})},f._addItem=function(d){var b=this.get("itemsGroup"),_=this._getNextX(),x=0,M=this.get("unCheckColor"),P=b.addGroup({x:0,y:0,value:d.value,scaleValue:d.scaleValue,checked:d.checked});P.translate(_,x),P.set("viewId",b.get("viewId"));var C=this.get("textStyle"),O=this.get("_wordSpaceing"),w=0;if(d.marker){var S=v.mix({},d.marker,{x:d.marker.radius,y:0});d.checked||(S.fill&&(S.fill=M),S.stroke&&(S.stroke=M));var I=P.addShape("marker",{type:"marker",attrs:S});I.attr("cursor","pointer"),I.name="legend-marker",w+=I.getBBox().width+O}var j=v.mix({},C,{x:w,y:0,text:this._formatItemValue(d.value)});d.checked||v.mix(j,{fill:M});var N=P.addShape("text",{attrs:j});N.attr("cursor","pointer"),N.name="legend-text",this.get("appendInfo")&&N.setSilent("appendInfo",this.get("appendInfo"));var W=P.getBBox(),H=this.get("itemWidth"),J=P.addShape("rect",{attrs:{x:_,y:x-W.height/2,fill:"#fff",fillOpacity:0,width:H||W.width,height:W.height}});return J.attr("cursor","pointer"),J.setSilent("origin",d),J.name="legend-item",this.get("appendInfo")&&J.setSilent("appendInfo",this.get("appendInfo")),P.name="legendGroup",P},f._adjust=function(){var d=this,b=d.get("geom");if(b){var _=d.get("group").attr("matrix");_[7]=0;var x=d.get("geom").get("dataArray"),M=this.get("itemsGroup").get("children"),P=0;v.each(M,function(C){var O=x[P],w=O[O.length-1].y;v.isArray(w)&&(w=w[1]);var S=C.getBBox().height,I=C.get("x"),j=w-S/2;C.translate(I,j),P++}),d.get("autoLayout")&&d._antiCollision(M)}},f.render=function(){var d=this;n.prototype.render.call(this);var b=this.get("chart");b.once("afterpaint",function(){d._adjust()})},f._getPreviousY=function(d){var b=d.attr("matrix")[7],_=d.getBBox().height;return b+_},f._adjustDenote=function(d,b,_){var x=c.legend.legendMargin,M=-2,P=-x*2;d.addShape("path",{attrs:{path:"M"+M+","+b+"L"+P+","+(_+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},f._antiCollision=function(d){if(d===void 0&&(d=[]),!!d.length){var b=this;d.sort(function(ne,K){var ie=ne.attr("matrix")[7],de=K.attr("matrix")[7];return ie-de});var _=!0,x=b.get("chart").get("plotRange"),M=x.tl.y,P=Math.abs(M-x.bl.y),C=d[0].getBBox().height,O=Number.MIN_VALUE,w=0,S=d.map(function(ne){var K=ne.attr("matrix")[7];return K>w&&(w=K),K<O&&(O=K),{size:ne.getBBox().height,targets:[K-M]}});O-=M;for(var I=0;_;){for(var j=0;j<S.length;j++){var N=S[j],W=(Math.min.apply(O,N.targets)+Math.max.apply(O,N.targets))/2;N.pos=Math.min(Math.max(O,W-N.size/2),P-N.size)}for(_=!1,I=S.length;I--;)if(I>0){var H=S[I-1],J=S[I];H.pos+H.size>J.pos&&(H.size+=J.size,H.targets=H.targets.concat(J.targets),S.splice(I,1),_=!0)}}I=0;var Q=this.get("itemsGroup").addGroup();S.forEach(function(ne){var K=M+C;ne.targets.forEach(function(){var ie=d[I].attr("matrix")[7],de=ne.pos+K-C/2,we=Math.abs(ie-de);we>C/2&&b._adjustDenote(Q,de,ie-b.get("group").attr("matrix")[7]/2),d[I].translate(0,-ie),d[I].translate(0,de),K+=C,I++})})}},s}(i);B.exports=r},function(B,L,o){var e=o(0),g=o(18),v=g.Group,p="auto",c=function h(i){h.superclass.constructor.call(this,i)};e.extend(c,v),e.augment(c,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var i=this,r=i.get("background");if(r){var n=this.get("canvas"),s=i.get("width")||n.get("width"),f=i.get("height")||n.get("height"),u={x:0,y:0,width:s,height:f},d=i.get("backgroundShape");d?d.attr(u):(d=this.addShape("rect",{attrs:e.mix(u,r)}),this.set("backgroundShape",d))}else return},_renderPlotBackground:function(){var i=this,r=i.get("plotBackground");if(r){var n=i.get("plotRange"),s=n.br.x-n.bl.x,f=n.br.y-n.tr.y,u=n.tl,d={x:u.x,y:u.y,width:s,height:f},b=i.get("plotBackShape");b?b.attr(d):(r.image?(d.img=r.image,b=i.addShape("image",{attrs:d})):(e.mix(d,r),b=i.addShape("rect",{attrs:d})),i.set("plotBackShape",b))}else return},_convert:function(i,r){if(e.isString(i)){if(i===p)i=0;else if(i.includes("%")){var n=this.get("canvas"),s=this.get("width")||n.get("width"),f=this.get("height")||n.get("height");i=parseInt(i,10)/100,i=r?i*s:i*f}}return i},_calculateRange:function(){var i=this,r=i.get("plotRange");e.isNil(r)&&(r={});var n=i.get("padding"),s=this.get("canvas"),f=i.get("width")||s.get("width"),u=i.get("height")||s.get("height"),d=e.toAllPadding(n),b=i._convert(d[0],!1),_=i._convert(d[1],!0),x=i._convert(d[2],!1),M=i._convert(d[3],!0),P=Math.min(M,f-_),C=Math.max(M,f-_),O=Math.min(u-x,b),w=Math.max(u-x,b);r.tl={x:P,y:O},r.tr={x:C,y:O},r.bl={x:P,y:w},r.br={x:C,y:w},r.cc={x:(C+P)/2,y:(w+O)/2},this.set("plotRange",r)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),B.exports=c},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(51);function p(h,i,r){return{x:h.x+i*Math.cos(r),y:h.y+i*Math.sin(r)}}var c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return s.type="circle",s},r.getRegion=function(s,f){var u=1/2,d=Math.PI*2/s,b=-1*Math.PI/2+d*f,_=u/(1+1/Math.sin(d/2)),x={x:.5,y:.5},M=p(x,u-_,b),P=Math.PI*5/4,C=Math.PI*1/4;return{start:p(M,_,P),end:p(M,_,C)}},r.generateFacets=function(s){var f=this,u=f.fields,d=u[0];if(!d)throw"Please specify for the field for facet!";var b=f.getFieldValues(d,s),_=b.length,x=[];return b.forEach(function(M,P){var C=[{field:d,value:M,values:b}],O=f.getFilter(C),w=s.filter(O),S={type:f.type,colValue:M,colField:d,colIndex:P,cols:_,rows:1,rowIndex:0,data:w,region:f.getRegion(_,P)};x.push(S)}),x},i}(v);B.exports=c},function(B,L,o){var e=o(0),g=o(49),v={};v.Rect=o(156),v.List=o(155),v.Circle=o(317),v.Tree=o(321),v.Mirror=o(320),v.Matrix=o(319),g.prototype.facet=function(p,c){var h=v[e.upperFirst(p)];if(!h)throw new Error("Not support such type of facets as: "+p);var i=this.get("facets");i&&i.destroy(),c.chart=this;var r=new h(c);this.set("facets",r)},B.exports=v},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,g(c,h)}function g(c,h){return g=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},g(c,h)}var v=o(156),p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i.getDefaultCfg=function(){var n=c.prototype.getDefaultCfg.call(this);return n.type="matrix",n.showTitle=!1,n},i.generateFacets=function(n){for(var s=this,f=s.fields,u=f.length,d=u,b=[],_=0;_<d;_++)for(var x=f[_],M=0;M<u;M++){var P=f[M],C={type:s.type,colValue:x,rowValue:P,colField:x,rowField:P,colIndex:_,rowIndex:M,cols:d,rows:u,data:n,region:s.getRegion(u,d,_,M)};b.push(C)}return b},i.setXAxis=function(n,s,f){f.rowIndex!==f.rows-1&&(s[n].title=null,s[n].label=null)},i.setYAxis=function(n,s,f){f.colIndex!==0&&(s[n].title=null,s[n].label=null)},h}(v);B.exports=p},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,g(c,h)}function g(c,h){return g=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},g(c,h)}var v=o(155),p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i.getDefaultCfg=function(){var n=c.prototype.getDefaultCfg.call(this);return n.type="mirror",this.transpose=!1,n},i.init=function(){var n=this;n.transpose?(n.cols=2,n.rows=1):(n.cols=1,n.rows=2),c.prototype.init.call(this)},i.beforeProcessView=function(n,s){this.transpose?s.colIndex%2==0?n.coord().transpose().scale(-1,1):n.coord().transpose():s.rowIndex%2!=0&&n.coord().scale(1,-1)},i.renderTitle=function(n,s){this.transpose?this.drawColTitle(n,s):this.drawRowTitle(n,s)},i.setXAxis=function(n,s,f){(f.colIndex===1||f.rowIndex===1)&&(s[n].label=null,s[n].title=null)},i.setYAxis=function(){},h}(v);B.exports=p},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,g(i,r)}function g(i,r){return g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},g(i,r)}var v=o(51),p=o(0),c=p.assign,h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="tree",f.line={lineWidth:1,stroke:"#ddd"},f.lineSmooth=!1,f},n.generateFacets=function(f){var u=this,d=u.fields;if(!d.length)throw"Please specify for the fields for facet!";var b=[],_=u.getRootFacet(f);return b.push(_),_.children=u.getChildFacets(f,1,b),u.setRegion(b),b},n.getRootFacet=function(f){var u=this,d={type:u.type,rows:u.getRows(),rowIndex:0,colIndex:0,colValue:u.rootTitle,data:f};return d},n.getRows=function(){return this.fields.length+1},n.getChildFacets=function(f,u,d){var b=this,_=b.fields,x=_.length;if(!(x<u)){var M=[],P=_[u-1],C=b.getFieldValues(P,f);return C.forEach(function(O,w){var S=[{field:P,value:O,values:C}],I=b.getFilter(S),j=f.filter(I);if(j.length){var N={type:b.type,colValue:O,colField:P,colIndex:w,rows:b.getRows(),rowIndex:u,data:j,children:b.getChildFacets(j,u+1,d)};M.push(N),d.push(N)}}),M}},n.setRegion=function(f){var u=this;u.forceColIndex(f),f.forEach(function(d){d.region=u.getRegion(d.rows,d.cols,d.colIndex,d.rowIndex)})},n.forceColIndex=function(f){var u=this,d=[],b=0;f.forEach(function(O){u.isLeaf(O)&&(d.push(O),O.colIndex=b,b++)}),d.forEach(function(O){O.cols=d.length});for(var _=u.fields.length,x=_-1;x>=0;x--)for(var M=u.getFacetsByLevel(f,x),P=0;P<M.length;P++){var C=M[P];u.isLeaf(C)||(C.originColIndex=C.colIndex,C.colIndex=u.getRegionIndex(C.children),C.cols=d.length)}},n.getFacetsByLevel=function(f,u){var d=[];return f.forEach(function(b){b.rowIndex===u&&d.push(b)}),d},n.getRegion=function(f,u,d,b){var _=1/u,x=1/f,M={x:_*d,y:x*b},P={x:M.x+_,y:M.y+x*2/3};return{start:M,end:P}},n.getRegionIndex=function(f){var u=f[0],d=f[f.length-1];return(d.colIndex-u.colIndex)/2+u.colIndex},n.isLeaf=function(f){return!f.children||!f.children.length},n.setXAxis=function(f,u,d){d.rowIndex!==d.rows-1&&(u[f].label=null,u[f].title=null)},n.setYAxis=function(f,u,d){d.originColIndex!==0&&d.colIndex!==0&&(u[f].title=null,u[f].label=null)},n.onPaint=function(){i.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},n.drawLines=function(f,u){var d=this,b=u.addGroup();f.forEach(function(_){if(!d.isLeaf(_)){var x=_.children;d._addFacetLines(_,x,b)}})},n._addFacetLines=function(f,u,d){var b=this,_=f.view,x=_.getViewRegion(),M={x:x.start.x+(x.end.x-x.start.x)/2,y:x.start.y};u.forEach(function(P){var C=P.view.getViewRegion(),O={x:C.start.x+(C.end.x-C.start.x)/2,y:C.end.y},w={x:M.x,y:M.y+(O.y-M.y)/2},S={x:O.x,y:w.y};b._drawLine([M,w,S,O],d)})},n._getPath=function(f){var u=this,d=[],b=u.lineSmooth;return b?(d.push(["M",f[0].x,f[0].y]),d.push(["C",f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y])):f.forEach(function(_,x){x===0?d.push(["M",_.x,_.y]):d.push(["L",_.x,_.y])}),d},n._drawLine=function(f,u){var d=this,b=d._getPath(f),_=d.line;u.addShape("path",{attrs:c({path:b},_)})},r}(v);B.exports=h},function(B,L,o){function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,v(n,s)}function v(n,s){return v=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},v(n,s)}var p=o(12),c=o(158),h=o(0);o(337);var i=function(n){g(f,n);var s=f.prototype;s.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.type="area",d.shapeType="area",d.generatePoints=!0,d.sortable=!0,d};function f(u){var d;return d=n.call(this,u)||this,h.assign(e(d),c),d}return s.draw=function(d,b,_,x){var M=this,P=this.getDrawCfg(d[0]);M._applyViewThemeShapeStyle(P,P.shape,_);var C=this.splitData(d);P.origin=d,h.each(C,function(O,w){P.splitedIndex=w;var S=O.map(function(j){return j.points});P.points=S;var I=_.drawShape(P.shape,P,b);M.appendShapeInfo(I,x+w)})},f}(p),r=function(n){g(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.hasDefaultAdjust=!0,d.adjusts=[{type:"stack"}],d},s}(i);i.Stack=r,p.Area=i,p.AreaStack=r,B.exports=i},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,g(c,h)}function g(c,h){return g=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},g(c,h)}var v=o(12);o(338);var p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i.getDefaultCfg=function(){var n=c.prototype.getDefaultCfg.call(this);return n.type="edge",n.shapeType="edge",n.generatePoints=!0,n},h}(v);v.Edge=p,B.exports=p},function(B,L,o){function e(_,x){_.prototype=Object.create(x.prototype),_.prototype.constructor=_,g(_,x)}function g(_,x){return g=Object.setPrototypeOf||function(P,C){return P.__proto__=C,P},g(_,x)}var v=o(78),p=v.ColorUtil,c=o(12),h=o(0),i="_origin",r="shadowCanvas",n="valueRange",s="imageShape",f="mappedData",u="grayScaleBlurredCanvas",d="heatmapSize",b=function(_){e(x,_);function x(){return _.apply(this,arguments)||this}var M=x.prototype;return M.getDefaultCfg=function(){var C=_.prototype.getDefaultCfg.call(this);return C.type="heatmap",C.paletteCache={},C},M._prepareRange=function(){var C=this,O=C.get(f),w=C.getAttr("color"),S=w.field,I=Infinity,j=-Infinity;O.forEach(function(W){var H=W[i][S];H>j&&(j=H),H<I&&(I=H)}),I===j&&(I=j-1);var N=[I,j];C.set(n,N)},M._prepareSize=function(){var C=this,O=C.getDefaultValue("size");h.isNumber(O)||(O=C._getDefaultSize());var w=C.get("styleOptions"),S=w&&h.isObject(w.style)?w.style.blur:null;(!h.isFinite(S)||S===null)&&(S=O/2),C.set(d,{blur:S,radius:O})},M._getDefaultSize=function(){var C=this,O=C.getAttr("position"),w=C.get("coord"),S=Math.min(w.width/(O.scales[0].ticks.length*4),w.height/(O.scales[1].ticks.length*4));return S},M._colorize=function(C){for(var O=this,w=O.getAttr("color"),S=C.data,I=O.get("paletteCache"),j=3;j<S.length;j+=4){var N=S[j];if(N){var W=void 0;I[N]?W=I[N]:(W=p.rgb2arr(w.gradient(N/256)),I[N]=W),S[j-3]=W[0],S[j-2]=W[1],S[j-1]=W[2],S[j]=N}}},M._prepareGreyScaleBlurredCircle=function(C,O){var w=this,S=w.get(u);S||(S=document.createElement("canvas"),w.set(u,S));var I=C+O,j=S.getContext("2d");S.width=S.height=I*2,j.clearRect(0,0,S.width,S.height),j.shadowOffsetX=j.shadowOffsetY=I*2,j.shadowBlur=O,j.shadowColor="black",j.beginPath(),j.arc(-I,-I,C,0,Math.PI*2,!0),j.closePath(),j.fill()},M._drawGrayScaleBlurredCircle=function(C,O,w,S,I){var j=this,N=j.get(u);I.globalAlpha=S,I.drawImage(N,C-w,O-w)},M._getShadowCanvasCtx=function(){var C=this,O=C.get(r);O||(O=document.createElement("canvas"),C.set(r,O));var w=C.get("coord");return w&&(O.width=w.width,O.height=w.height),O.getContext("2d")},M._clearShadowCanvasCtx=function(){var C=this._getShadowCanvasCtx();C.clearRect(0,0,C.canvas.width,C.canvas.height)},M._getImageShape=function(){var C=this,O=C.get(s);if(O)return O;var w=C.get("container");return O=w.addShape("Image",{}),C.set(s,O),O},M.clear=function(){this._clearShadowCanvasCtx(),_.prototype.clear.call(this)},M.drawWithRange=function(C){var O=this,w=O.get("coord"),S=w.start,I=w.end,j=w.width,N=w.height,W=O.getAttr("color").field,H=O.get(d);O._clearShadowCanvasCtx();var J=O._getShadowCanvasCtx(),Q=O.get(f);C&&(Q=Q.filter(function(Ue){return Ue[i][W]<=C[1]&&Ue[i][W]>=C[0]}));for(var ne=O._getScale(W),K=0;K<Q.length;K++){var ie=Q[K],de=O.getDrawCfg(ie),we=ne.scale(ie[i][W]);O._drawGrayScaleBlurredCircle(de.x-S.x,de.y-I.y,H.radius+H.blur,we,J)}var Re=J.getImageData(0,0,j,N);O._clearShadowCanvasCtx(),O._colorize(Re),J.putImageData(Re,0,0);var _e=O._getImageShape();_e.attr("x",S.x),_e.attr("y",I.y),_e.attr("width",j),_e.attr("height",N),_e.attr("img",J.canvas)},M.draw=function(C){var O=this;O.set(f,C),O._prepareRange(),O._prepareSize();var w=O.get(d);O._prepareGreyScaleBlurredCircle(w.radius,w.blur);var S=O.get(n);O.drawWithRange(S)},x}(c);c.Heatmap=b,B.exports=b},function(B,L,o){var e=o(12);e.Point=o(334),e.PointJitter=e.Point.Jitter,e.PointStack=e.Point.Stack,e.Path=o(160),e.Line=o(330),e.LineStack=e.Line.Stack,e.Interval=o(326),e.IntervalStack=e.Interval.Stack,e.IntervalDodge=e.Interval.Dodge,e.IntervalSymmetric=e.Interval.Symmetric,e.Area=o(322),e.AreaStack=e.Area.Stack,e.Polygon=o(335),e.Schema=o(336),e.SchemaDodge=e.Schema.Dodge,e.Edge=o(323),e.Heatmap=o(324),e.Venn=o(348),e.Violin=o(349),B.exports=e},function(B,L,o){function e(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function g(f,u){f.prototype=Object.create(u.prototype),f.prototype.constructor=f,v(f,u)}function v(f,u){return v=Object.setPrototypeOf||function(b,_){return b.__proto__=_,b},v(f,u)}var p=o(12),c=o(0),h=o(83);o(339);var i=function(f){g(d,f);var u=d.prototype;u.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return _.type="interval",_.shapeType="interval",_.generatePoints=!0,_};function d(b){var _;return _=f.call(this,b)||this,c.assign(e(_),h),_}return u.createShapePointsCfg=function(_){var x=f.prototype.createShapePointsCfg.call(this,_);return x.size=this.getNormalizedSize(_),x},u.clearInner=function(){f.prototype.clearInner.call(this),this.set("defaultSize",null)},d}(p),r=function(f){g(u,f);function u(){return f.apply(this,arguments)||this}var d=u.prototype;return d.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return _.hasDefaultAdjust=!0,_.adjusts=[{type:"stack"}],_},u}(i),n=function(f){g(u,f);function u(){return f.apply(this,arguments)||this}var d=u.prototype;return d.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return _.hasDefaultAdjust=!0,_.adjusts=[{type:"dodge"}],_},u}(i),s=function(f){g(u,f);function u(){return f.apply(this,arguments)||this}var d=u.prototype;return d.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return _.hasDefaultAdjust=!0,_.adjusts=[{type:"symmetric"}],_},u}(i);i.Stack=r,i.Dodge=n,i.Symmetric=s,p.Interval=i,p.IntervalStack=r,p.IntervalDodge=n,p.IntervalSymmetric=s,B.exports=i},function(B,L,o){var e=o(82),g=o(157),v=o(329),p=o(328),c={getLabelsClass:function(i,r){var n=e;return i==="polar"?n=g:i==="theta"?n=v:(r==="interval"||r==="polygon")&&(n=p),n}};B.exports=c},function(B,L,o){var e=o(0),g=o(82),v=function p(c){p.superclass.constructor.call(this,c)};e.extend(v,g),e.augment(v,{setLabelPosition:function(c,h,i,r){e.isFunction(r)&&(r=r(c.text,h._origin,i));var n=this.get("coord"),s=n.isTransposed,f=n.convertPoint(h.points[0]),u=n.convertPoint(h.points[2]),d=(f.x-u.x)/2*(s?-1:1),b=(f.y-u.y)/2*(s?-1:1);switch(r){case"right":s?(c.x-=d,c.y+=b,c.textAlign=c.textAlign||"center"):(c.x-=d,c.y+=b,c.textAlign=c.textAlign||"left");break;case"left":s?(c.x-=d,c.y-=b,c.textAlign=c.textAlign||"center"):(c.x+=d,c.y+=b,c.textAlign=c.textAlign||"right");break;case"bottom":s?(c.x-=d*2,c.textAlign=c.textAlign||"left"):(c.y+=b*2,c.textAlign=c.textAlign||"center");break;case"middle":s?c.x-=d:c.y+=b,c.textAlign=c.textAlign||"center";break;case"top":s?c.textAlign=c.textAlign||"left":c.textAlign=c.textAlign||"center";break;default:break}}}),B.exports=v},function(B,L,o){var e=o(0),g=o(157),v=o(27),p=o(6),c=5;function h(n,s,f){return{x:n.x+f*Math.cos(s),y:n.y+f*Math.sin(s)}}function i(n,s,f,u,d){var b=!0,_=f.start,x=f.end,M=Math.min(_.y,x.y),P=Math.abs(_.y-x.y),C,O=0,w=Number.MIN_VALUE,S=n.map(function(N){return N.y>O&&(O=N.y),N.y<w&&(w=N.y),{size:s,targets:[N.y-M]}});for(w-=M,O-M>P&&(P=O-M);b;)for(S.forEach(function(N){var W=(Math.min.apply(w,N.targets)+Math.max.apply(w,N.targets))/2;N.pos=Math.min(Math.max(w,W-N.size/2),P-N.size)}),b=!1,C=S.length;C--;)if(C>0){var I=S[C-1],j=S[C];I.pos+I.size>j.pos&&(I.size+=j.size,I.targets=I.targets.concat(j.targets),I.pos+I.size>P&&(I.pos=P-I.size),S.splice(C,1),b=!0)}C=0,S.forEach(function(N){var W=M+s/2;N.targets.forEach(function(){n[C].y=N.pos+W,W+=s,C++})}),n.forEach(function(N){var W=N.r*N.r,H=Math.pow(Math.abs(N.y-u.y),2);if(W<H)N.x=u.x;else{var J=Math.sqrt(W-H);d?N.x=u.x+J:N.x=u.x-J}})}var r=function n(s){n.superclass.constructor.call(this,s)};e.extend(r,g),e.augment(r,{getDefaultCfg:function(){return{label:p.thetaLabels}},getDefaultOffset:function(s){return s.offset||0},adjustItems:function(s){var f=this,u=s[0]?s[0].offset:0;return u>0&&(s=f._distribute(s,u)),r.superclass.adjustItems.call(this,s)},_distribute:function(s,f){var u=this,d=u.get("coord"),b=d.getRadius(),_=u.get("label").labelHeight,x=d.getCenter(),M=b+f,P=M*2+_*2,C={start:d.start,end:d.end},O=u.get("geom");if(O){var w=O.get("view");C=w.getViewRegion()}var S=[[],[]];return s.forEach(function(I){!I||(I.textAlign==="right"?S[0].push(I):S[1].push(I))}),S.forEach(function(I,j){var N=parseInt(P/_,10);I.length>N&&(I.sort(function(W,H){return H["..percent"]-W["..percent"]}),I.splice(N,I.length-N)),I.sort(function(W,H){return W.y-H.y}),i(I,_,C,x,j)}),S[0].concat(S[1])},lineToLabel:function(s){var f=this,u=f.get("coord"),d=u.getRadius(),b=s.offset,_=s.orignAngle||s.angle,x=u.getCenter(),M=h(x,_,d+c/2),P=h(x,_,d+b/2);s.labelLine||(s.labelLine=f.get("label").labelLine||{}),s.labelLine.path=["M"+M.x,M.y+" Q"+P.x,P.y+" "+s.x,s.y].join(",")},getLabelRotate:function(s,f){var u;return f<0&&(u=s*180/Math.PI,u>90&&(u=u-180),u<-90&&(u=u+180)),u/180*Math.PI},getLabelAlign:function(s){var f=this,u=f.get("coord"),d=u.getCenter(),b;s.angle<=Math.PI/2&&s.x>=d.x?b="left":b="right";var _=f.getDefaultOffset(s);return _<=0&&(b==="right"?b="left":b="right"),b},getArcPoint:function(s){return s},getPointAngle:function(s){var f=this,u=f.get("coord"),d={x:e.isArray(s.x)?s.x[0]:s.x,y:s.y[0]};f.transLabelPoint(d);var b={x:e.isArray(s.x)?s.x[1]:s.x,y:s.y[1]};f.transLabelPoint(b);var _,x=v.getPointAngle(u,d);if(s.points&&s.points[0].y===s.points[1].y)_=x;else{var M=v.getPointAngle(u,b);x>=M&&(M=M+Math.PI*2),_=x+(M-x)/2}return _},getCirclePoint:function(s,f){var u=this,d=u.get("coord"),b=d.getCenter(),_=d.getRadius()+f,x=h(b,s,_);return x.angle=s,x.r=_,x}}),B.exports=r},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,g(i,r)}function g(i,r){return g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},g(i,r)}var v=o(12),p=o(160);o(340);var c=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="line",f.sortable=!0,f},r}(p),h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"stack"}],f},r}(c);c.Stack=h,v.Line=c,v.LineStack=h,B.exports=c},function(B,L,o){var e=o(0),g="_origin",v=o(159),p="_originActiveAttrs";function c(n,s){if(e.isNil(n)||e.isNil(s))return!1;var f=n.get("origin"),u=s.get("origin");return e.isEqual(f,u)}function h(n,s){if(!n||n.length!==s.length)return!0;var f=!1;return e.each(s,function(u,d){if(!c(u,n[d]))return f=!0,!1}),f}function i(n,s){var f={};return e.each(n,function(u,d){var b=s.attr(d);e.isArray(b)&&(b=e.cloneDeep(b)),f[d]=b}),f}var r={_isAllowActive:function(){var s=this.get("allowActive");if(e.isNil(s)){var f=this.get("view"),u=this.isShareTooltip(),d=f.get("options");if(d.tooltip===!1||!u)return!0}else return s;return!1},_onMouseenter:function(s){var f=this,u=s.shape,d=f.get("shapeContainer");u&&d.contain(u)&&f._isAllowActive()&&f.setShapesActived(u)},_onMouseleave:function(){var s=this,f=s.get("view"),u=f.get("canvas");s.get("activeShapes")&&(s.clearActivedShapes(),u.draw())},_bindActiveAction:function(){var s=this,f=s.get("view"),u=s.get("type");f.on(u+":mouseenter",e.wrapBehavior(s,"_onMouseenter")),f.on(u+":mouseleave",e.wrapBehavior(s,"_onMouseleave"))},_offActiveAction:function(){var s=this,f=s.get("view"),u=s.get("type");f.off(u+":mouseenter",e.getWrapBehavior(s,"_onMouseenter")),f.off(u+":mouseleave",e.getWrapBehavior(s,"_onMouseleave"))},_setActiveShape:function(s){var f=this,u=f.get("activedOptions")||{},d=s.get("origin"),b=d.shape||f.getDefaultValue("shape");e.isArray(b)&&(b=b[0]);var _=f.get("shapeFactory"),x=e.mix({},s.attr(),{origin:d}),M=_.getActiveCfg(b,x);u.style&&e.mix(M,u.style);var P=i(M,s);s.setSilent(p,P),u.animate?s.animate(M,300):s.attr(M),v.toFront(s)},setShapesActived:function(s){var f=this;e.isArray(s)||(s=[s]);var u=f.get("activeShapes");if(!!h(u,s)){var d=f.get("view"),b=d.get("canvas"),_=f.get("activedOptions");_&&_.highlight?(e.each(s,function(x){x.get("animating")&&x.stopAnimate()}),f.highlightShapes(s)):(u&&f.clearActivedShapes(),e.each(s,function(x){x.get("animating")&&x.stopAnimate(),x.get("visible")&&f._setActiveShape(x)})),f.set("activeShapes",s),b.draw()}},clearActivedShapes:function(){var s=this,f=s.get("shapeContainer"),u=s.get("activedOptions"),d=u&&u.animate;if(f&&!f.get("destroyed")){var b=s.get("activeShapes");e.each(b,function(M){var P=M.get(p);d?(M.stopAnimate(),M.animate(P,300)):M.attr(P),v.resetZIndex(M),M.setSilent(p,null)});var _=s.get("preHighlightShapes");if(_){var x=f.get("children");e.each(x,function(M){var P=M.get(p);P&&(d?(M.stopAnimate(),M.animate(P,300)):M.attr(P),v.resetZIndex(M),M.setSilent(p,null))})}s.set("activeShapes",null),s.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(s){var f=this,u=f.get("shapeContainer"),d=[];if(u){var b=f.getXScale().field,_=f.getShapes(),x=f._getOriginByPoint(s);e.each(_,function(M){var P=M.get("origin");if(M.get("visible")&&P){var C=P[g][b];C===x[b]&&d.push(M)}})}return d},getSingleShapeByPoint:function(s){var f=this,u=f.get("shapeContainer"),d=u.get("canvas"),b=d.get("pixelRatio"),_;if(u&&(_=u.getShape(s.x*b,s.y*b)),_&&_.get("origin"))return _},highlightShapes:function(s,f){var u=this;e.isArray(s)||(s=[s]);var d=u.get("activeShapes");if(!!h(d,s)){d&&u.clearActivedShapes();var b=u.getShapes(),_=u.get("activedOptions"),x=_&&_.animate,M=_&&_.style;e.each(b,function(P){var C={};P.stopAnimate(),e.indexOf(s,P)!==-1?(e.mix(C,M,f),v.toFront(P)):(e.mix(C,{fillOpacity:.3,opacity:.3}),v.resetZIndex(P));var O=i(C,P);P.setSilent(p,O),x?P.animate(C,300):P.attr(C)}),u.set("preHighlightShapes",s),u.set("activeShapes",s)}}};B.exports=r},function(B,L,o){var e=o(0),g="_origin",v=o(159);function p(i,r){if(e.isNil(i)||e.isNil(r))return!1;var n=i.get("origin"),s=r.get("origin");return e.isEqual(n,s)}function c(i,r){var n={};return e.each(i,function(s,f){f==="transform"&&(f="matrix");var u=r.attr(f);e.isArray(u)&&(u=e.cloneDeep(u)),n[f]=u}),n}var h={_isAllowSelect:function(){var r=this.get("allowSelect");if(e.isNil(r)){var n=this.get("type"),s=this.get("coord"),f=s&&s.type;if(n==="interval"&&f==="theta")return!0}else return r;return!1},_onClick:function(r){var n=this;if(n._isAllowSelect()){var s=r.shape,f=n.get("shapeContainer");s&&f.contain(s)&&n.setShapeSelected(s)}},_bindSelectedAction:function(){var r=this,n=r.get("view"),s=r.get("type");n.on(s+":click",e.wrapBehavior(r,"_onClick"))},_offSelectedAction:function(){var r=this,n=r.get("view"),s=r.get("type");n.off(s+":click",e.getWrapBehavior(r,"_onClick"))},_setShapeStatus:function(r,n){var s=this,f=s.get("view"),u=s.get("selectedOptions")||{},d=u.animate!==!1,b=f.get("canvas");r.set("selected",n);var _=r.get("origin");if(n){var x=_.shape||s.getDefaultValue("shape");e.isArray(x)&&(x=x[0]);var M=s.get("shapeFactory"),P=e.mix({geom:s,point:_},u),C=M.getSelectedCfg(x,P);e.mix(C,P.style),r.get("_originAttrs")||(r.get("animating")&&r.stopAnimate(),r.set("_originAttrs",c(C,r))),u.toFront&&v.toFront(r),d?r.animate(C,300):(r.attr(C),b.draw())}else{var O=r.get("_originAttrs");u.toFront&&v.resetZIndex(r),r.set("_originAttrs",null),d?r.animate(O,300):(r.attr(O),b.draw())}},setShapeSelected:function(r){var n=this,s=n._getSelectedShapes(),f=n.get("selectedOptions")||{},u=f.cancelable!==!1;if(f.mode==="multiple")e.indexOf(s,r)===-1?(s.push(r),n._setShapeStatus(r,!0)):u&&(e.Array.remove(s,r),n._setShapeStatus(r,!1));else{var d=s[0];u&&(r=p(d,r)?null:r),p(d,r)||(d&&n._setShapeStatus(d,!1),r&&n._setShapeStatus(r,!0))}},clearSelected:function(){var r=this,n=r.get("shapeContainer");if(n&&!n.get("destroyed")){var s=r._getSelectedShapes();e.each(s,function(f){r._setShapeStatus(f,!1),f.set("_originAttrs",null)})}},setSelected:function(r){var n=this,s=n.getShapes();return e.each(s,function(f){var u=f.get("origin");u&&u[g]===r&&n.setShapeSelected(f)}),this},_getSelectedShapes:function(){var r=this,n=r.getShapes(),s=[];return e.each(n,function(f){f.get("selected")&&s.push(f)}),r.set("selectedShapes",s),s}};B.exports=h},function(B,L,o){var e=o(0),g=o(6),v=g.defaultColor,p="_origin";function c(i){return i.alias||i.field}var h={_getIntervalSize:function(r){var n=null,s=this.get("type"),f=this.get("coord");if(f.isRect&&(s==="interval"||s==="schema")){n=this.getSize(r[p]);var u=f.isTransposed?"y":"x";if(e.isArray(r[u])){var d=Math.abs(r[u][1]-r[u][0]);n=n<d?null:n}}return n},_snapEqual:function(r,n,s){var f;return r=s.translate(r),n=s.translate(n),s.isCategory?f=r===n:f=e.snapEqual(r,n),f},_getScaleValueByPoint:function(r){var n=0,s=this.get("coord"),f=this.getXScale(),u=s.invert(r),d=u.x;return this.isInCircle()&&d>(1+f.rangeMax())/2&&(d=f.rangeMin()),n=f.invert(d),f.isCategory&&(n=f.translate(n)),n},_getOriginByPoint:function(r){var n=this.getXScale(),s=this.getYScale(),f=n.field,u=s.field,d=this.get("coord"),b=d.invert(r),_=n.invert(b.x),x=s.invert(b.y),M={};return M[f]=_,M[u]=x,M},_getScale:function(r){var n=this,s=n.get("scales"),f=null;return e.each(s,function(u){if(u.field===r)return f=u,!1}),f},_getTipValueScale:function(){var r=this.getAttrsForLegend(),n;e.each(r,function(u){var d=u.getScale(u.type);if(d.isLinear)return n=d,!1});var s=this.getXScale(),f=this.getYScale();return!n&&f&&f.field==="..y"?s:n||f||s},_getTipTitleScale:function(r){var n=this;if(r)return n._getScale(r);var s=n.getAttr("position"),f=s.getFields(),u;return e.each(f,function(d){if(!d.includes(".."))return u=d,!1}),n._getScale(u)},_filterValue:function(r,n){var s=this.get("coord"),f=this.getYScale(),u=f.field,d=s.invert(n),b=d.y;b=f.invert(b);var _=r[r.length-1];return e.each(r,function(x){var M=x[p];if(M[u][0]<=b&&M[u][1]>=b)return _=x,!1}),_},getXDistance:function(){var r=this,n=r.get("xDistance");if(!n){var s=r.getXScale();if(s.isCategory)n=1;else{var f=s.values,u=s.translate(f[0]),d=u;e.each(f,function(_){_=s.translate(_),_<u&&(u=_),_>d&&(d=_)});var b=f.length;n=(d-u)/(b-1)}r.set("xDistance",n)}return n},findPoint:function(r,n){var s=this,f=s.get("type"),u=s.getXScale(),d=s.getYScale(),b=u.field,_=d.field,x=null;if(e.indexOf(["heatmap","point"],f)>-1){var M=s.get("coord"),P=M.invert(r),C=u.invert(P.x),O=d.invert(P.y),w=Infinity;return e.each(n,function(Re){var _e=Math.pow(Re[p][b]-C,2)+Math.pow(Re[p][_]-O,2);_e<w&&(w=_e,x=Re)}),x}var S=n[0],I=n[n.length-1];if(!S)return x;var j=s._getScaleValueByPoint(r),N=S[p][b],W=S[p][_],H=I[p][b],J=d.isLinear&&e.isArray(W);if(e.isArray(N))e.each(n,function(Re){var _e=Re[p];if(u.translate(_e[b][0])<=j&&u.translate(_e[b][1])>=j)if(J)e.isArray(x)||(x=[]),x.push(Re);else return x=Re,!1}),e.isArray(x)&&(x=this._filterValue(x,r));else{var Q;if(!u.isLinear&&u.type!=="timeCat")e.each(n,function(Re,_e){var Ue=Re[p];if(s._snapEqual(Ue[b],j,u))if(J)e.isArray(x)||(x=[]),x.push(Re);else return x=Re,!1;else u.translate(Ue[b])<=j&&(I=Re,Q=n[_e+1])}),e.isArray(x)&&(x=this._filterValue(x,r));else{if((j>u.translate(H)||j<u.translate(N))&&(j>u.max||j<u.min))return null;for(var ne=0,K=n.length-1,ie;ne<=K;){ie=Math.floor((ne+K)/2);var de=n[ie][p][b];if(s._snapEqual(de,j,u))return n[ie];u.translate(de)<=u.translate(j)?(ne=ie+1,I=n[ie],Q=n[ie+1]):(K===0&&(I=n[0]),K=ie-1)}}I&&Q&&Math.abs(u.translate(I[p][b])-j)>Math.abs(u.translate(Q[p][b])-j)&&(I=Q)}var we=s.getXDistance();return!x&&Math.abs(u.translate(I[p][b])-j)<=we/2&&(x=I),x},getTipTitle:function(r,n){var s="",f=this._getTipTitleScale(n);if(f){var u=r[f.field];s=f.getText(u)}else if(this.get("type")==="heatmap"){var d=this.getXScale(),b=this.getYScale(),_=d.getText(r[d.field]),x=b.getText(r[b.field]);s="( "+_+", "+x+" )"}return s},getTipValue:function(r,n){var s,f=n.field,u=r.key;if(s=r[f],e.isArray(s)){var d=[];e.each(s,function(b){d.push(n.getText(b))}),s=d.join("-")}else s=n.getText(s,u);return s},getTipName:function(r){var n,s,f=this._getGroupScales();if(f.length&&e.each(f,function(b){return s=b,!1}),s){var u=s.field;n=s.getText(r[u])}else{var d=this._getTipValueScale();n=c(d)}return n},getTipItems:function(r,n){var s=this,f=r[p],u=s.getTipTitle(f,n),d=s.get("tooltipCfg"),b=[],_,x;function M(I,j,N){if(!e.isNil(j)&&j!==""){var W={title:u,point:r,name:I||u,value:j,color:r.color||v,marker:!0};W.size=s._getIntervalSize(r),b.push(e.mix({},W,N))}}if(d){var P=d.fields,C=d.cfg,O=[];if(e.each(P,function(I){O.push(f[I])}),C){e.isFunction(C)&&(C=C.apply(null,O));var w=e.mix({},{point:r,title:u,color:r.color||v,marker:!0},C);w.size=s._getIntervalSize(r),b.push(w)}else e.each(P,function(I){if(!e.isNil(f[I])){var j=s._getScale(I);_=c(j),x=j.getText(f[I]),M(_,x)}})}else{var S=s._getTipValueScale();e.isNil(f[S.field])||(x=s.getTipValue(f,S),_=s.getTipName(f),M(_,x))}return b},isShareTooltip:function(){var r=this.get("shareTooltip"),n=this.get("type"),s=this.get("view"),f;if(s.get("parent")?f=s.get("parent").get("options"):f=s.get("options"),n==="interval"){var u=this.get("coord"),d=u.type;(d==="theta"||d==="polar"&&u.isTransposed)&&(r=!1)}else(!this.getYScale()||e.inArray(["contour","point","polygon","edge"],n))&&(r=!1);return f.tooltip&&e.isBoolean(f.tooltip.shared)&&(r=f.tooltip.shared),r}};B.exports=h},function(B,L,o){function e(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,g(r,n)}function g(r,n){return g=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},g(r,n)}var v=o(12),p=o(0);o(341);var c=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return u.type="point",u.shapeType="point",u.generatePoints=!0,u},s.drawPoint=function(u,d,b,_){var x=this,M=u.shape,P=x.getDrawCfg(u);x._applyViewThemeShapeStyle(P,M,b);var C;if(p.isArray(u.y)){var O=x.hasStack();p.each(u.y,function(w,S){P.y=w,P.yIndex=S,(!O||S!==0)&&(C=b.drawShape(M,P,d),x.appendShapeInfo(C,_+S))})}else p.isNil(u.y)||(C=b.drawShape(M,P,d),x.appendShapeInfo(C,_))},n}(v),h=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return u.hasDefaultAdjust=!0,u.adjusts=[{type:"jitter"}],u},n}(c),i=function(r){e(n,r);function n(){return r.apply(this,arguments)||this}var s=n.prototype;return s.getDefaultCfg=function(){var u=r.prototype.getDefaultCfg.call(this);return u.hasDefaultAdjust=!0,u.adjusts=[{type:"stack"}],u},n}(c);c.Jitter=h,c.Stack=i,v.Point=c,v.PointJitter=h,v.PointStack=i,B.exports=c},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,g(h,i)}function g(h,i){return g=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},g(h,i)}var v=o(12),p=o(0);o(342);var c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r.getDefaultCfg=function(){var s=h.prototype.getDefaultCfg.call(this);return s.type="polygon",s.shapeType="polygon",s.generatePoints=!0,s},r.createShapePointsCfg=function(s){var f=h.prototype.createShapePointsCfg.call(this,s),u=this,d=f.x,b=f.y,_;if(!(p.isArray(d)&&p.isArray(b))){var x=u.getXScale(),M=u.getYScale(),P=x.values?x.values.length:x.ticks.length,C=M.values?M.values.length:M.ticks.length,O=.5*1/P,w=.5*1/C;x.isCategory&&M.isCategory?(d=[d-O,d-O,d+O,d+O],b=[b-w,b+w,b+w,b-w]):p.isArray(d)?(_=d,d=[_[0],_[0],_[1],_[1]],b=[b-w/2,b+w/2,b+w/2,b-w/2]):p.isArray(b)&&(_=b,b=[_[0],_[1],_[1],_[0]],d=[d-O/2,d-O/2,d+O/2,d+O/2]),f.x=d,f.y=b}return f},i}(v);v.Polygon=c,B.exports=c},function(B,L,o){function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,v(n,s)}function v(n,s){return v=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},v(n,s)}var p=o(12),c=o(0),h=o(83);o(343);var i=function(n){g(f,n);var s=f.prototype;s.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.type="schema",d.shapeType="schema",d.generatePoints=!0,d};function f(u){var d;return d=n.call(this,u)||this,c.assign(e(d),h),d}return s.createShapePointsCfg=function(d){var b=n.prototype.createShapePointsCfg.call(this,d);return b.size=this.getNormalizedSize(d),b},s.clearInner=function(){n.prototype.clearInner.call(this),this.set("defaultSize",null)},f}(p),r=function(n){g(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.hasDefaultAdjust=!0,d.adjusts=[{type:"dodge"}],d},s}(i);i.Dodge=r,p.Schema=i,p.SchemaDodge=r,B.exports=i},function(B,L,o){var e=o(0),g=o(13),v=o(27),p=o(25),c=o(6);function h(d){var b=c.shape.hollowArea,_=e.mix({},b,d.style);return p.addStrokeAttrs(_,d),e.isNumber(d.size)&&(_.lineWidth=d.size),_}function i(d){var b=c.shape.area,_=e.mix({},b,d.style);return p.addFillAttrs(_,d),d.color&&(_.stroke=_.stroke||d.color),e.isNumber(d.size)&&(_.lineWidth=d.size),_}function r(d,b,_){var x=[],M=[],P=[],C=[],O=d.isInCircle;return e.each(d.points,function(w){P.push(w[1]),C.push(w[0])}),C=C.reverse(),M.push(P,C),e.each(M,function(w,S){var I=[];w=_.parsePoints(w);var j=w[0];O&&w.push({x:j.x,y:j.y}),b?I=v.getSplinePath(w,!1,d.constraint):I=v.getLinePath(w,!1),S>0&&(I[0][0]="L"),x=x.concat(I)}),x.push(["Z"]),x}function n(d){return{symbol:function(_,x,M){return[["M",_-M,x-4],["L",_+M,x-4],["L",_+M,x+4],["L",_-M,x+4],["Z"]]},radius:5,fill:d.color,fillOpacity:.6}}function s(d,b){if(d==="line"||d==="smoothLine"){var _=b.lineWidth||0;return{lineWidth:_+1}}var x=b.fillOpacity||b.opacity||1;return{fillOpacity:x-.15,strokeOpacity:x-.15}}function f(d,b,_){var x=d._coord,M=x.convertPoint(b.points[0][1]);return _.addShape("circle",{attrs:e.mix({x:M.x,y:M.y,r:2,fill:b.color},b.style)})}var u=g.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(b){var _=[],x=b.x,M=b.y,P=b.y0;return M=e.isArray(M)?M:[P,M],e.each(M,function(C){_.push({x,y:C})}),_},getActiveCfg:function(b,_){return s(b,_)},drawShape:function(b,_,x){var M=this.getShape(b),P;return _.points.length===1&&c.showSinglePoint?P=f(this,_,x):P=M.draw(_,x),P&&(P.set("origin",_.origin),P._id=_.splitedIndex?_._id+_.splitedIndex:_._id,P.name=this.name),P},getSelectedCfg:function(b,_){return _&&_.style?_.style:this.getActiveCfg(b,_)}});g.registerShape("area","area",{draw:function(b,_){var x=i(b),M=r(b,!1,this);return _.addShape("path",{attrs:e.mix(x,{path:M})})},getMarkerCfg:function(b){return n(b)}}),g.registerShape("area","smooth",{draw:function(b,_){var x=i(b),M=this._coord;b.constraint=[[M.start.x,M.end.y],[M.end.x,M.start.y]];var P=r(b,!0,this);return _.addShape("path",{attrs:e.mix(x,{path:P})})},getMarkerCfg:function(b){return n(b)}}),g.registerShape("area","line",{draw:function(b,_){var x=h(b),M=r(b,!1,this);return _.addShape("path",{attrs:e.mix(x,{path:M})})},getMarkerCfg:function(b){return n(b)}}),g.registerShape("area","smoothLine",{draw:function(b,_){var x=h(b),M=r(b,!0,this);return _.addShape("path",{attrs:e.mix(x,{path:M})})},getMarkerCfg:function(b){return n(b)}}),u.spline=u.smooth,B.exports=u},function(B,L,o){var e=o(0),g=o(13),v=o(25),p=o(6),c=o(27),h=1/3;function i(_){var x=p.shape.edge,M=e.mix({},x,_.style);return v.addStrokeAttrs(M,_),_.size&&(M.lineWidth=_.size),M}var r=g.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(x){return v.splitPoints(x)},getActiveCfg:function(x,M){var P=M.lineWidth||0;return{lineWidth:P+1}}});function n(_,x){var M=[];M.push({x:_.x,y:_.y*(1-1/2)+x.y*1/2}),M.push({y:_.y*(1-1/2)+x.y*1/2,x:x.x}),M.push(x);var P=["C"];return e.each(M,function(C){P.push(C.x,C.y)}),P}function s(_,x){var M=[];M.push({x:x.x,y:x.y}),M.push(_);var P=["Q"];return e.each(M,function(C){P.push(C.x,C.y)}),P}function f(_,x){var M=n(_,x),P=[["M",_.x,_.y]];return P.push(M),P}function u(_,x,M){var P=s(x,M),C=[["M",_.x,_.y]];return C.push(P),C}function d(_,x){var M=s(_[1],x),P=s(_[3],x),C=[["M",_[0].x,_[0].y]];return C.push(P),C.push(["L",_[3].x,_[3].y]),C.push(["L",_[2].x,_[2].y]),C.push(M),C.push(["L",_[1].x,_[1].y]),C.push(["L",_[0].x,_[0].y]),C.push(["Z"]),C}function b(_,x){var M=[];M.push({y:_.y*(1-h)+x.y*h,x:_.x}),M.push({y:_.y*(1-h)+x.y*h,x:x.x}),M.push(x);var P=[["M",_.x,_.y]];return e.each(M,function(C){P.push(["L",C.x,C.y])}),P}g.registerShape("edge","line",{draw:function(x,M){var P=this.parsePoints(x.points),C=i(x),O=c.getLinePath(P),w=M.addShape("path",{attrs:e.mix(C,{path:O})});return w},getMarkerCfg:function(x){return e.mix({symbol:"circle",radius:4.5},i(x))}}),g.registerShape("edge","vhv",{draw:function(x,M){var P=x.points,C=i(x),O=b(P[0],P[1]);O=this.parsePath(O);var w=M.addShape("path",{attrs:e.mix(C,{path:O})});return w},getMarkerCfg:function(x){return e.mix({symbol:"circle",radius:4.5},i(x))}}),g.registerShape("edge","smooth",{draw:function(x,M){var P=x.points,C=i(x),O=f(P[0],P[1]);O=this.parsePath(O);var w=M.addShape("path",{attrs:e.mix(C,{path:O})});return w},getMarkerCfg:function(x){return e.mix({symbol:"circle",radius:4.5},i(x))}}),g.registerShape("edge","arc",{draw:function(x,M){var P=x.points,C=P.length>2?"weight":"normal",O=i(x),w,S;if(x.isInCircle){var I={x:0,y:1};C==="normal"?S=u(P[0],P[1],I):(O.fill=O.stroke,S=d(P,I)),S=this.parsePath(S),w=M.addShape("path",{attrs:e.mix(O,{path:S})})}else if(C==="normal")P=this.parsePoints(P),w=M.addShape("arc",{attrs:e.mix(O,{x:(P[1].x+P[0].x)/2,y:P[0].y,r:Math.abs(P[1].x-P[0].x)/2,startAngle:Math.PI,endAngle:Math.PI*2})});else{S=[["M",P[0].x,P[0].y],["L",P[1].x,P[1].y]];var j=n(P[1],P[3]),N=n(P[2],P[0]);S.push(j),S.push(["L",P[3].x,P[3].y]),S.push(["L",P[2].x,P[2].y]),S.push(N),S.push(["Z"]),S=this.parsePath(S),O.fill=O.stroke,w=M.addShape("path",{attrs:e.mix(O,{path:S})})}return w},getMarkerCfg:function(x){return e.mix({symbol:"circle",radius:4.5},i(x))}}),B.exports=r},function(B,L,o){var e=o(0),g=o(13),v=o(27),p=o(25),c=o(6),h=o(18),i=e.PathUtil;function r(I,j){var N=I.x,W=I.y,H=I.y0,J=I.size,Q=H,ne=W;e.isArray(W)&&(ne=W[1],Q=W[0]);var K,ie;e.isArray(N)?(K=N[0],ie=N[1]):(K=N-J/2,ie=N+J/2);var de=[];return de.push({x:K,y:Q},{x:K,y:ne}),j?de.push({x:ie,y:(ne+Q)/2}):de.push({x:ie,y:ne},{x:ie,y:Q}),de}function n(I){for(var j=[],N=0;N<I.length;N++){var W=I[N];if(W){var H=N===0?"M":"L";j.push([H,W.x,W.y])}}var J=I[0];return j.push(["L",J.x,J.y]),j.push(["z"]),j}function s(I){var j=I.x,N=I.y,W=I.y0,H=[];return e.isArray(N)?e.each(N,function(J,Q){H.push({x:e.isArray(j)?j[Q]:j,y:J})}):H.push({x:j,y:N},{x:j,y:W}),H}function f(I){var j=I.x,N=e.isArray(I.y)?I.y[1]:I.y,W=e.isArray(I.y)?I.y[0]:I.y0,H=I.size,J=[];return J.push({x:j-H/2,y:N},{x:j+H/2,y:N},{x:j,y:N},{x:j,y:W},{x:j-H/2,y:W},{x:j+H/2,y:W}),J}function u(I){var j=[];return j.push(["M",I[0].x,I[0].y],["L",I[1].x,I[1].y],["M",I[2].x,I[2].y],["L",I[3].x,I[3].y],["M",I[4].x,I[4].y],["L",I[5].x,I[5].y]),j}function d(I){var j=c.shape.interval,N=e.mix({},j,I.style);return p.addFillAttrs(N,I),I.color&&(N.stroke=N.stroke||I.color),N}function b(I){var j=c.shape.hollowInterval,N=e.mix({},j,I.style);return p.addStrokeAttrs(N,I),N}function _(I,j){var N=[],W=I.points,H=I.nextPoints;return e.isNil(H)?j?N.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",W[2].x,W[2].y],["L",W[3].x,W[3].y],["Z"]):N.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",W[2].x,W[2].y],["L",W[2].x,W[2].y],["Z"]):N.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",H[1].x,H[1].y],["L",H[0].x,H[0].y],["Z"]),N}function x(I,j){var N=j.getRadius(),W=j.innerRadius,H,J,Q=N*W,ne,K;return!e.isArray(I.x)&&e.isArray(I.y)&&(I.x=[I.x,I.x]),e.isArray(I.x)?(ne={x:I.x[0],y:I.y[0]},K={x:I.x[1],y:I.y[1]},H=v.getPointAngle(j,ne),J=v.getPointAngle(j,K),J<=H&&(J=J+Math.PI*2)):(K=I,H=j.startAngle,J=v.getPointAngle(j,K)),{r:N,ir:Q,startAngle:H,endAngle:J}}function M(I,j){var N=j.geom,W=N.get("coord"),H=j.point,J=7.5,Q;if(W&&W.type==="theta"){var ne=x(H,W),K=(ne.endAngle-ne.startAngle)/2+ne.startAngle,ie=J*Math.cos(K),de=J*Math.sin(K);Q={transform:[["t",ie,de]]}}return e.mix({},Q)}var P=g.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(j,N){if(!j||e.inArray(["rect","funnel","pyramid"],j)){var W=N.fillOpacity||N.opacity||1;return{fillOpacity:W-.15}}var H=N.lineWidth||0;return{lineWidth:H+1}},getDefaultPoints:function(j){return r(j)},getSelectedCfg:function(j,N){return M(j,N)}});g.registerShape("interval","rect",{draw:function(j,N){var W=d(j),H=n(j.points);return H=this.parsePath(H),N.addShape("path",{attrs:e.mix(W,{path:H})})},getMarkerCfg:function(j){var N=d(j),W=j.isInCircle;return e.mix({symbol:W?"circle":"square",radius:W?4.5:4},N)}}),g.registerShape("interval","hollowRect",{draw:function(j,N){var W=b(j),H=n(j.points);return H=this.parsePath(H),N.addShape("path",{attrs:e.mix(W,{path:H})})},getMarkerCfg:function(j){var N=b(j),W=j.isInCircle;return e.mix({symbol:W?"circle":"square",radius:W?4.5:4},N)}}),g.registerShape("interval","line",{getPoints:function(j){return s(j)},draw:function(j,N){var W=b(j);W.lineWidth=j.size||1;var H=n(j.points);return H=this.parsePath(H),N.addShape("path",{attrs:e.mix(W,{path:H})})},getMarkerCfg:function(j){var N=b(j);return e.mix({symbol:"line",radius:5},N)}}),g.registerShape("interval","tick",{getPoints:function(j){return f(j)},draw:function(j,N){var W=b(j);W.lineWidth||(W.lineWidth=2);var H=u(j.points);return H=this.parsePath(H),N.addShape("path",{attrs:e.mix(W,{path:H})})},getMarkerCfg:function(j){var N=b(j);return e.mix({symbol:"tick",radius:5},N)}}),g.registerShape("interval","funnel",{getPoints:function(j){return j.size=j.size*2,r(j)},draw:function(j,N){var W=d(j),H=_(j,!0);return H=this.parsePath(H),N.addShape("path",{attrs:e.mix(W,{path:H})})},getMarkerCfg:function(j){var N=d(j);return e.mix({symbol:"square",radius:4},N)}}),g.registerShape("interval","pyramid",{getPoints:function(j){return j.size=j.size*2,r(j,!0)},draw:function(j,N){var W=d(j),H=_(j,!1);return H=this.parsePath(H),N.addShape("path",{attrs:e.mix(W,{path:H})})},getMarkerCfg:function(j){var N=d(j);return e.mix({symbol:"square",radius:4},N)}});function C(I,j,N,W){return j===0?[[I+1/2*N/Math.PI/2,W/2],[I+1/2*N/Math.PI,W],[I+N/4,W]]:j===1?[[I+1/2*N/Math.PI/2*(Math.PI-2),W],[I+1/2*N/Math.PI/2*(Math.PI-1),W/2],[I+N/4,0]]:j===2?[[I+1/2*N/Math.PI/2,-W/2],[I+1/2*N/Math.PI,-W],[I+N/4,-W]]:[[I+1/2*N/Math.PI/2*(Math.PI-2),-W],[I+1/2*N/Math.PI/2*(Math.PI-1),-W/2],[I+N/4,0]]}function O(I,j,N,W,H,J,Q){for(var ne=Math.ceil(2*I/N*4)*2,K=[];W<-Math.PI*2;)W+=Math.PI*2;for(;W>0;)W-=Math.PI*2;W=W/Math.PI/2*N;var ie=J-I+W-I*2;K.push(["M",ie,j]);for(var de=0,we=0;we<ne;++we){var Re=we%4,_e=C(we*N/4,Re,N,H);K.push(["C",_e[0][0]+ie,-_e[0][1]+j,_e[1][0]+ie,-_e[1][1]+j,_e[2][0]+ie,-_e[2][1]+j]),we===ne-1&&(de=_e[2][0])}return K.push(["L",de+ie,Q+I]),K.push(["L",ie,Q+I]),K.push(["L",ie,j]),K}function w(I,j,N,W,H,J,Q,ne){for(var K=Q.getBBox(),ie=K.maxX-K.minX,de=K.maxY-K.minY,we=5e3,Re=300,_e=0;_e<W;_e++){var Ue=J.addShape("path",{attrs:{path:O(ne,K.minY+de*N,ie/4,0,ie/64,I,j),fill:H[_e],clip:Q}});c.renderer==="canvas"&&Ue.animate({transform:[["t",ie/2,0]],repeat:!0},we-_e*Re)}}g.registerShape("interval","liquid-fill-gauge",{draw:function(j,N){var W=this,H=.5,J=0,Q=Infinity;e.each(j.points,function(Ue){Ue.x<Q&&(Q=Ue.x),J+=Ue.x});var ne=J/j.points.length,K=W.parsePoint({x:ne,y:H}),ie=W.parsePoint({x:Q,y:.5}),de=K.x-ie.x,we=Math.min(de,ie.y),Re=d(j),_e=new h.Circle({attrs:{x:K.x,y:K.y,r:we}});return w(K.x,K.y,j.y/(2*K.y),1,[Re.fill],N,_e,we*4),N.addShape("circle",{attrs:e.mix(b(j),{x:K.x,y:K.y,r:we+we/8})})}});var S={};g.registerShape("interval","liquid-fill-path",{draw:function(j,N){var W=this,H=e.mix({},d(j)),J=j.shape[1],Q=.5,ne=0,K=Infinity;e.each(j.points,function(z){z.x<K&&(K=z.x),ne+=z.x});var ie=ne/j.points.length,de=W.parsePoint({x:ie,y:Q}),we=W.parsePoint({x:K,y:.5}),Re=de.x-we.x,_e=Math.min(Re,we.y),Ue;if(S[J])Ue=S[J];else{var rt=i.parsePathString(J);S[J]=Ue={segments:rt}}var Fe=[];H.rotate&&(Fe.push(["r",H.rotate/180*Math.PI]),delete H.rotate);var Se=N.addShape("path",{attrs:e.mix(H,{fillOpacity:0,path:Ue.segments})}),ye=e.cloneDeep(Se.getBBox()),Oe=ye.maxX-ye.minX,ue=ye.maxY-ye.minY,xe=Math.max(Oe,ue),Ae=_e*2/xe;Se.transform(Fe.concat([["s",Ae,Ae]]));var pe=Ae*Oe/2,be=Ae*ue/2;Se.transform([["t",de.x-pe,de.y-be]]),w(de.x,de.y,j.y/(2*de.y),1,[H.fill],N,Se,we.y*4);var le=N.addShape("path",{attrs:e.mix(b(j),{path:Ue.segments})});return le.transform(Fe.concat([["s",Ae,Ae],["t",de.x-pe,de.y-be]])),le}}),g.registerShape("interval","top-line",{draw:function(j,N){var W=d(j),H=j.style||{},J=[["M",j.points[1].x,j.points[1].y],["L",j.points[2].x,j.points[2].y]],Q={stroke:H.stroke||"white",lineWidth:H.lineWidth||1,path:this.parsePath(J)},ne=n(j.points);ne=this.parsePath(ne),delete W.stroke;var K=N.addShape("path",{attrs:e.mix(W,{zIndex:0,path:ne})});return N.addShape("path",{zIndex:1,attrs:Q}),K},getMarkerCfg:function(j){var N=d(j),W=j.isInCircle;return e.mix({symbol:W?"circle":"square",radius:W?4.5:4},N)}}),B.exports=P},function(B,L,o){var e=o(0),g=o(27),v=o(25),p=o(13),c=o(6),h=[1,1],i=[5.5,1];function r(S){var I=c.shape.line,j=e.mix({},I,S.style);return v.addStrokeAttrs(j,S),S.size&&(j.lineWidth=S.size),j}function n(S){var I=c.shape.line,j=e.mix({lineWidth:2,radius:6},I,S.style);return v.addStrokeAttrs(j,S),j}function s(S,I,j,N){for(var W=[],H=N.isStack,J=[],Q=0;Q<S.length;Q++){var ne=S[Q],K=v.splitPoints(ne);J.push(K[0]),W.push(K[1])}var ie=f(W,I,j,N),de=f(J,I,j,N);return H?ie:ie.concat(de)}function f(S,I,j,N){var W;if(!I)W=g.getLinePath(S,!1),j&&W.push(["Z"]);else{var H=N.constraint;j&&S.length&&S.push({x:S[0].x,y:S[0].y}),W=g.getSplinePath(S,!1,H)}return W}function u(S,I){var j,N=S.points,W=S.isInCircle,H=N[0];return e.isArray(H.y)?j=s(N,I,W,S):j=f(N,I,W,S),j}function d(S,I){var j=[];return e.each(S,function(N,W){var H=S[W+1];j.push(N),H&&(j=j.concat(I(N,H)))}),j}function b(S){var I=[];return e.each(S,function(j,N){var W=N===0?["M",j.x,j.y]:["L",j.x,j.y];I.push(W)}),I}function _(S,I){var j=d(S.points,I);return b(j)}function x(S,I,j){return[["M",S-j,I],["L",S+j,I]]}function M(S,I,j){return[["M",S-j,I],["A",j/2,j/2,0,1,1,S,I],["A",j/2,j/2,0,1,0,S+j,I]]}function P(S,I){return e.mix({symbol:I?M:x},n(S))}function C(S,I){return e.mix({symbol:I},n(S))}function O(S,I,j){var N=I.points[0];return j.addShape("circle",{attrs:e.mix({x:N.x,y:N.y,r:2,fill:I.color},I.style)})}var w=p.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(I,j){var N=j.lineWidth||0;return{lineWidth:N+1}},getDefaultPoints:function(I){return v.splitPoints(I)},drawShape:function(I,j,N){var W=this.getShape(I),H;return j.points.length===1&&c.showSinglePoint?H=O(this,j,N):H=W.draw(j,N),H&&(H.set("origin",j.origin),H._id=j.splitedIndex?j._id+j.splitedIndex:j._id,H.name=this.name),H}});p.registerShape("line","line",{draw:function(I,j){var N=r(I),W=u(I,!1);return j.addShape("path",{attrs:e.mix(N,{path:W})})},getMarkerCfg:function(I){return P(I)}}),p.registerShape("line","dot",{draw:function(I,j){var N=r(I),W=u(I,!1);return j.addShape("path",{attrs:e.mix(N,{path:W,lineDash:h})})},getMarkerCfg:function(I){var j=P(I,!1);return j.lineDash=h,j}}),p.registerShape("line","dash",{draw:function(I,j){var N=r(I),W=u(I,!1);return j.addShape("path",{attrs:e.mix({path:W,lineDash:i},N)})},getMarkerCfg:function(I){var j=P(I,!1);return j.lineDash=j.lineDash||i,j}}),p.registerShape("line","smooth",{draw:function(I,j){var N=r(I),W=this._coord;I.constraint=[[W.start.x,W.end.y],[W.end.x,W.start.y]];var H=u(I,!0);return j.addShape("path",{attrs:e.mix(N,{path:H})})},getMarkerCfg:function(I){return P(I,!0)}}),p.registerShape("line","hv",{draw:function(I,j){var N=r(I),W=_(I,function(H,J){var Q=[];return Q.push({x:J.x,y:H.y}),Q});return j.addShape("path",{attrs:e.mix(N,{path:W})})},getMarkerCfg:function(I){return C(I,function(j,N,W){return[["M",j-W-1,N-2.5],["L",j,N-2.5],["L",j,N+2.5],["L",j+W+1,N+2.5]]})}}),p.registerShape("line","vh",{draw:function(I,j){var N=r(I),W=_(I,function(H,J){var Q=[];return Q.push({x:H.x,y:J.y}),Q});return j.addShape("path",{attrs:e.mix(N,{path:W})})},getMarkerCfg:function(I){return C(I,function(j,N,W){return[["M",j-W-1,N+2.5],["L",j,N+2.5],["L",j,N-2.5],["L",j+W+1,N-2.5]]})}}),p.registerShape("line","hvh",{draw:function(I,j){var N=r(I),W=_(I,function(H,J){var Q=[],ne=(J.x-H.x)/2+H.x;return Q.push({x:ne,y:H.y}),Q.push({x:ne,y:J.y}),Q});return j.addShape("path",{attrs:e.mix(N,{path:W})})},getMarkerCfg:function(I){return C(I,function(j,N,W){return[["M",j-(W+1),N+2.5],["L",j-W/2,N+2.5],["L",j-W/2,N-2.5],["L",j+W/2,N-2.5],["L",j+W/2,N+2.5],["L",j+W+1,N+2.5]]})}}),p.registerShape("line","vhv",{draw:function(I,j){var N=r(I),W=_(I,function(H,J){var Q=[],ne=(J.y-H.y)/2+H.y;return Q.push({x:H.x,y:ne}),Q.push({x:J.x,y:ne}),Q});return j.addShape("path",{attrs:e.mix(N,{path:W})})},getMarkerCfg:function(I){return C(I,function(j,N){return[["M",j-5,N+2.5],["L",j-5,N],["L",j,N],["L",j,N-3],["L",j,N+3],["L",j+6.5,N+3]]})}}),w.spline=w.smooth,B.exports=w},function(B,L,o){var e=o(0),g=o(25),v=o(6),p=o(13),c=o(18),h=c.Marker,i=e.PathUtil,r=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],n=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],s=Math.sqrt(3);e.mix(h.Symbols,{hexagon:function(M,P,C){var O=C/2*s;return[["M",M,P-C],["L",M+O,P-C/2],["L",M+O,P+C/2],["L",M,P+C],["L",M-O,P+C/2],["L",M-O,P-C/2],["Z"]]},bowtie:function(M,P,C){var O=C-1.5;return[["M",M-C,P-O],["L",M+C,P+O],["L",M+C,P-O],["L",M-C,P+O],["Z"]]},cross:function(M,P,C){return[["M",M-C,P-C],["L",M+C,P+C],["M",M+C,P-C],["L",M-C,P+C]]},tick:function(M,P,C){return[["M",M-C/2,P-C],["L",M+C/2,P-C],["M",M,P-C],["L",M,P+C],["M",M-C/2,P+C],["L",M+C/2,P+C]]},plus:function(M,P,C){return[["M",M-C,P],["L",M+C,P],["M",M,P-C],["L",M,P+C]]},hyphen:function(M,P,C){return[["M",M-C,P],["L",M+C,P]]},line:function(M,P,C){return[["M",M,P-C],["L",M,P+C]]}});function f(x){var M=v.shape.point,P=e.mix({},M,x.style);return g.addFillAttrs(P,x),e.isNumber(x.size)&&(P.radius=x.size),P}function u(x){var M=v.shape.hollowPoint,P=e.mix({},M,x.style);return g.addStrokeAttrs(P,x),e.isNumber(x.size)&&(P.radius=x.size),P}var d=p.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(M,P){var C=P.radius,O;return M&&(M.indexOf("hollow")===0||e.indexOf(n,M)!==-1)||!M?O=P.stroke||P.strokeStyle:O=P.fill||P.fillStyle,{radius:C+1,shadowBlur:C,shadowColor:O,stroke:O,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(M){return g.splitPoints(M)}});function b(x){var M=x.points[0].x,P=x.points[0].y,C=x.size[0],O=x.size[1],w=[["M",M-.5*C,P-.5*O],["L",M+.5*C,P-.5*O],["L",M+.5*C,P+.5*O],["L",M-.5*C,P+.5*O],["z"]];return w}p.registerShape("point","rect",{draw:function(M,P){var C=f(M),O=b(M);O=this.parsePath(O);var w=P.addShape("path",{attrs:e.mix(C,{path:O})});return w},getMarkerCfg:function(M){var P=f(M);return P.symbol="rect",P.radius=4.5,P}}),e.each(r,function(x){p.registerShape("point",x,{draw:function(P,C){var O=f(P);return C.addShape("Marker",{attrs:e.mix(O,{symbol:x,x:P.x,y:P.y})})},getMarkerCfg:function(P){var C=f(P);return C.symbol=x,C.radius=4.5,C}}),p.registerShape("point","hollow"+e.upperFirst(x),{draw:function(P,C){var O=u(P);return C.addShape("Marker",{attrs:e.mix(O,{symbol:x,x:P.x,y:P.y})})},getMarkerCfg:function(P){var C=u(P);return C.symbol=x,C.radius=4.5,C}})}),e.each(n,function(x){p.registerShape("point",x,{draw:function(P,C){var O=u(P);return C.addShape("Marker",{attrs:e.mix(O,{symbol:x,x:P.x,y:P.y})})},getMarkerCfg:function(P){var C=u(P);return C.symbol=x,C.radius=4.5,C}})}),p.registerShape("point","image",{draw:function(M,P){return M.points=this.parsePoints(M.points),P.addShape("image",{attrs:{x:M.points[0].x-M.size/2,y:M.points[0].y-M.size,width:M.size,height:M.size,img:M.shape[1]}})}});var _={};p.registerShape("point","path",{draw:function(M,P){var C=e.mix({},u(M),f(M)),O=M.shape[1],w=M.size||10,S;if(_[O])S=_[O];else{var I=i.parsePathString(O),j=e.flatten(I).filter(function(J){return e.isNumber(J)});_[O]=S={range:Math.max.apply(null,j)-Math.min.apply(null,j),segments:I}}var N=w/S.range,W=[];C.rotate&&(W.push(["r",C.rotate/180*Math.PI]),delete C.rotate);var H=P.addShape("path",{attrs:e.mix(C,{path:S.segments})});return W.push(["s",N,N],["t",M.x,M.y]),H.transform(W),H}}),B.exports=d},function(B,L,o){var e=o(0),g=o(13),v=o(25),p=o(6);function c(n){var s=p.shape.polygon,f=e.mix({},s,n.style);return v.addFillAttrs(f,n),f}function h(n){var s=p.shape.hollowPolygon,f=e.mix({},s,n.style);return v.addStrokeAttrs(f,n),f}function i(n){for(var s=n[0],f=1,u=[["M",s.x,s.y]];f<n.length;){var d=n[f];(d.x!==n[f-1].x||d.y!==n[f-1].y)&&(u.push(["L",d.x,d.y]),d.x===s.x&&d.y===s.y&&f<n.length-1&&(s=n[f+1],u.push(["Z"]),u.push(["M",s.x,s.y]),f++)),f++}return e.isEqual(u[u.length-1],s)||u.push(["L",s.x,s.y]),u.push(["Z"]),u}var r=g.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(s){var f=[];return e.each(s.x,function(u,d){var b=s.y[d];f.push({x:u,y:b})}),f},getActiveCfg:function(s,f){var u=f.lineWidth||1;if(s==="hollow")return{lineWidth:u+1};var d=f.fillOpacity||f.opacity||1;return{fillOpacity:d-.08}},getSelectedCfg:function(s,f){return f&&f.style?f.style:this.getActiveCfg(s,f)}});g.registerShape("polygon","polygon",{draw:function(s,f){if(!e.isEmpty(s.points)){var u=c(s),d=i(s.points);return d=this.parsePath(d),f.addShape("path",{attrs:e.mix(u,{path:d})})}},getMarkerCfg:function(s){return e.mix({symbol:"square",radius:4},c(s))}}),g.registerShape("polygon","hollow",{draw:function(s,f){if(!e.isEmpty(s.points)){var u=h(s),d=i(s.points);return d=this.parsePath(d),f.addShape("path",{attrs:e.mix(u,{path:d})})}},getMarkerCfg:function(s){return e.mix({symbol:"square",radius:4},c(s))}}),B.exports=r},function(B,L,o){var e=o(0),g=o(13),v=o(25),p=o(6);function c(_){e.isArray(_)||(_=[_]);var x=_[0],M=_[_.length-1],P=_.length>1?_[1]:x,C=_.length>3?_[3]:M,O=_.length>2?_[2]:P;return{min:x,max:M,min1:P,max1:C,median:O}}function h(_,x){e.each(_,function(M){x.push({x:M[0],y:M[1]})})}function i(_){var x=p.shape.schema,M=e.mix({},x,_.style);return v.addStrokeAttrs(M,_),M}function r(_){var x=p.shape.schema,M=e.mix({},x,_.style);return v.addFillAttrs(M,_),_.color&&(M.stroke=_.color||M.stroke),M}function n(_,x,M){var P=[],C,O;return e.isArray(x)?(O=c(x),C=[[_-M/2,O.max],[_+M/2,O.max],[_,O.max],[_,O.max1],[_-M/2,O.min1],[_-M/2,O.max1],[_+M/2,O.max1],[_+M/2,O.min1],[_,O.min1],[_,O.min],[_-M/2,O.min],[_+M/2,O.min],[_-M/2,O.median],[_+M/2,O.median]]):(x=x||.5,O=c(_),C=[[O.min,x-M/2],[O.min,x+M/2],[O.min,x],[O.min1,x],[O.min1,x-M/2],[O.min1,x+M/2],[O.max1,x+M/2],[O.max1,x-M/2],[O.max1,x],[O.max,x],[O.max,x-M/2],[O.max,x+M/2],[O.median,x-M/2],[O.median,x+M/2]]),h(C,P),P}function s(_){e.isArray(_)||(_=[_]);var x=_.sort(function(O,w){return O<w?1:-1}),M=x.length;if(M<4)for(var P=x[M-1],C=0;C<4-M;C++)x.push(P);return x}function f(_,x,M){var P=s(x),C=[{x:_,y:P[0]},{x:_,y:P[1]},{x:_-M/2,y:P[2]},{x:_-M/2,y:P[1]},{x:_+M/2,y:P[1]},{x:_+M/2,y:P[2]},{x:_,y:P[2]},{x:_,y:P[3]}];return C}function u(_){var x=[["M",_[0].x,_[0].y],["L",_[1].x,_[1].y],["M",_[2].x,_[2].y],["L",_[3].x,_[3].y],["M",_[4].x,_[4].y],["L",_[5].x,_[5].y],["L",_[6].x,_[6].y],["L",_[7].x,_[7].y],["L",_[4].x,_[4].y],["Z"],["M",_[8].x,_[8].y],["L",_[9].x,_[9].y],["M",_[10].x,_[10].y],["L",_[11].x,_[11].y],["M",_[12].x,_[12].y],["L",_[13].x,_[13].y]];return x}function d(_){var x=[["M",_[0].x,_[0].y],["L",_[1].x,_[1].y],["M",_[2].x,_[2].y],["L",_[3].x,_[3].y],["L",_[4].x,_[4].y],["L",_[5].x,_[5].y],["Z"],["M",_[6].x,_[6].y],["L",_[7].x,_[7].y]];return x}var b=g.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(x,M){if(x==="box"){var P=M.lineWidth||1;return{lineWidth:P+1}}var C=M.fillOpacity||M.opacity||1;return{fillOpacity:C-.15,strokeOpacity:C-.15}},getSelectedCfg:function(x,M){return M&&M.style?M.style:this.getActiveCfg(x,M)}});g.registerShape("schema","box",{getPoints:function(x){return n(x.x,x.y,x.size)},draw:function(x,M){var P=i(x),C=u(x.points);return C=this.parsePath(C),M.addShape("path",{attrs:e.mix(P,{path:C})})},getMarkerCfg:function(x){return{symbol:function(P,C,O){var w=[C-6,C-3,C,C+3,C+6],S=n(P,w,O);return[["M",S[0].x+1,S[0].y],["L",S[1].x-1,S[1].y],["M",S[2].x,S[2].y],["L",S[3].x,S[3].y],["M",S[4].x,S[4].y],["L",S[5].x,S[5].y],["L",S[6].x,S[6].y],["L",S[7].x,S[7].y],["L",S[4].x,S[4].y],["Z"],["M",S[8].x,S[8].y],["L",S[9].x,S[9].y],["M",S[10].x+1,S[10].y],["L",S[11].x-1,S[11].y],["M",S[12].x,S[12].y],["L",S[13].x,S[13].y]]},radius:6,lineWidth:1,stroke:x.color}}}),g.registerShape("schema","candle",{getPoints:function(x){return f(x.x,x.y,x.size)},draw:function(x,M){var P=r(x),C=d(x.points);return C=this.parsePath(C),M.addShape("path",{attrs:e.mix(P,{path:C})})},getMarkerCfg:function(x){return{symbol:function(P,C,O){C=[C+7.5,C+3,C-3,C-7.5];var w=f(P,C,O);return[["M",w[0].x,w[0].y],["L",w[1].x,w[1].y],["M",w[2].x,w[2].y],["L",w[3].x,w[3].y],["L",w[4].x,w[4].y],["L",w[5].x,w[5].y],["Z"],["M",w[6].x,w[6].y],["L",w[7].x,w[7].y]]},lineWidth:1,stroke:x.color,fill:x.color,radius:6}}}),B.exports=b},function(B,L,o){var e=o(0),g=o(13),v=o(25),p=o(6),c=e.PathUtil;function h(n){var s=p.shape.venn,f=e.mix({},s,n.style);return v.addFillAttrs(f,n),f}function i(n){var s=p.shape.hollowVenn,f=e.mix({},s,n.style);return v.addStrokeAttrs(f,n),f}var r=g.registerFactory("venn",{defaultShapeType:"venn",getActiveCfg:function(s,f){var u=f.lineWidth||1;if(s==="hollow")return{lineWidth:u+1};var d=f.fillOpacity||f.opacity||1;return{fillOpacity:d-.08}},getSelectedCfg:function(s,f){return f&&f.style?f.style:this.getActiveCfg(s,f)}});g.registerShape("venn","venn",{draw:function(s,f){var u=s.origin._origin,d=u.path,b=h(s),_=c.parsePathString(d),x=f.addShape("path",{attrs:e.mix(b,{path:_})});return x},getMarkerCfg:function(s){return e.mix({symbol:"circle",radius:4},h(s))}}),g.registerShape("venn","hollow",{draw:function(s,f){var u=s.origin._origin,d=u.path,b=i(s),_=c.parsePathString(d),x=f.addShape("path",{attrs:e.mix(b,{path:_})});return x},getMarkerCfg:function(s){return e.mix({symbol:"circle",radius:4},h(s))}}),B.exports=r},function(B,L,o){var e=o(0),g=o(13),v=o(25),p=o(6),c=o(27);function h(u){var d=p.shape.venn,b=e.mix({},d,u.style);return v.addFillAttrs(b,u),u.color&&(b.stroke=b.stroke||u.color),b}function i(u){var d=p.shape.hollowVenn,b=e.mix({},d,u.style);return v.addStrokeAttrs(b,u),b}function r(u){for(var d=[],b=0;b<u.length;b++){var _=u[b];if(_){var x=b===0?"M":"L";d.push([x,_.x,_.y])}}var M=u[0];return M&&(d.push(["L",M.x,M.y]),d.push(["z"])),d}function n(u){for(var d=u.length/2,b=[],_=[],x=0;x<u.length;x++)x<d?b.push(u[x]):_.push(u[x]);var M=c.getSplinePath(b,!1),P=c.getSplinePath(_,!1);_.length&&M.push(["L",_[0].x,_[0].y]),P.shift();var C=M.concat(P);return b.length&&C.push(["L",b[0].x,b[0].y]),C.push(["z"]),C}function s(u){var d=Math.max.apply(null,u);return u.map(function(b){return b/d})}var f=g.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(d){var b=d.size/2,_=[],x=s(d._size);return e.each(d.y,function(M,P){var C=x[P]*b,O=P===0,w=P===d.y.length-1;_.push({isMin:O,isMax:w,x:d.x-C,y:M}),_.unshift({isMin:O,isMax:w,x:d.x+C,y:M})}),_},getActiveCfg:function(d,b){var _=b.lineWidth||1;if(d==="hollow")return{lineWidth:_+1};var x=b.fillOpacity||b.opacity||1;return{fillOpacity:x-.08}},getSelectedCfg:function(d,b){return b&&b.style?b.style:this.getActiveCfg(d,b)}});g.registerShape("violin","violin",{draw:function(d,b){var _=h(d),x=r(d.points);x=this.parsePath(x);var M=b.addShape("path",{attrs:e.mix(_,{path:x})});return M},getMarkerCfg:function(d){return e.mix({symbol:"circle",radius:4},h(d))}}),g.registerShape("violin","smooth",{draw:function(d,b){var _=h(d),x=n(d.points);x=this.parsePath(x);var M=b.addShape("path",{attrs:e.mix(_,{path:x})});return M},getMarkerCfg:function(d){return e.mix({symbol:"circle",radius:4},h(d))}}),g.registerShape("violin","hollow",{draw:function(d,b){var _=i(d),x=r(d.points);x=this.parsePath(x);var M=b.addShape("path",{attrs:e.mix(_,{path:x})});return M},getMarkerCfg:function(d){return e.mix({symbol:"circle",radius:4},i(d))}}),g.registerShape("violin","smoothHollow",{draw:function(d,b){var _=i(d),x=n(d.points);x=this.parsePath(x);var M=b.addShape("path",{attrs:e.mix(_,{path:x})});return M},getMarkerCfg:function(d){return e.mix({symbol:"circle",radius:4},i(d))}}),B.exports=f},function(B,L,o){var e=o(0);B.exports=function(g){return e.isArray(g)?g:e.isString(g)?g.split("*"):[g]}},function(B,L,o){var e=o(0).MatrixUtil,g=e.vec2;function v(c,h,i,r){var n=[],s,f,u=!!r,d,b;if(u){d=[Infinity,Infinity],b=[-Infinity,-Infinity];for(var _=0,x=c.length;_<x;_++){var M=c[_];d=g.min([],d,M),b=g.max([],b,M)}d=g.min([],d,r[0]),b=g.max([],b,r[1])}for(var P=0,C=c.length;P<C;P++){var O=c[P];if(i)s=c[P?P-1:C-1],f=c[(P+1)%C];else if(P===0||P===C-1){n.push(O);continue}else s=c[P-1],f=c[P+1];var w=[];w=g.sub(w,f,s),w=g.scale(w,w,h);var S=g.distance(O,s),I=g.distance(O,f),j=S+I;j!==0&&(S/=j,I/=j);var N=g.scale([],w,-S),W=g.scale([],w,I),H=g.add([],O,N),J=g.add([],O,W);u&&(H=g.max([],H,d),H=g.min([],H,b),J=g.max([],J,d),J=g.min([],J,b)),n.push(H),n.push(J)}return i&&n.push(n.shift()),n}function p(c,h,i){for(var r=!!h,n=[],s=0,f=c.length;s<f;s+=2)n.push([c[s],c[s+1]]);for(var u=v(n,.4,r,i),d=n.length,b=[],_,x,M,P=0;P<d-1;P++)_=u[P*2],x=u[P*2+1],M=n[P+1],b.push(["C",_[0],_[1],x[0],x[1],M[0],M[1]]);return r&&(_=u[d],x=u[d+1],M=n[0],b.push(["C",_[0],_[1],x[0],x[1],M[0],M[1]])),b}B.exports={catmullRom2bezier:p}},function(B,L,o){function e(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,g(u,d)}function g(u,d){return g=Object.setPrototypeOf||function(_,x){return _.__proto__=x,_},g(u,d)}var v=o(12),p=o(0),c=o(600),h=c.venn,i=c.scaleSolution,r=c.circlePath,n=c.intersectionAreaPath,s=c.computeTextCentres;o(344);var f=function(u){e(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b.getDefaultCfg=function(){var x=u.prototype.getDefaultCfg.call(this);return x.type="venn",x.shapeType="venn",x.generatePoints=!1,x},b._getAttrValues=function(x,M){return x.type==="position"?[M.x,M.y]:u.prototype._getAttrValues.call(this,x,M)},b.sets=function(x){return this.set("setsField",x),this},b._initAttrs=function(){var x=this;u.prototype._initAttrs.call(this);var M=x.get("attrOptions"),P=x.get("setsField")||"sets",C=x.get("data"),O=M.size?M.size.field:"size";C.forEach(function(K){K.sets=K[P],K._sets=K[P].join("&"),K.size=K[O]});var w=h(C),S=x.get("coord"),I=[Math.min(S.x.end,S.x.start),Math.max(S.x.end,S.x.start)],j=[Math.min(S.y.end,S.y.start),Math.max(S.y.end,S.y.start)],N=I[1]-I[0],W=j[1]-j[0],H=x.get("styleOptions"),J=H&&p.isObject(H.style)?H.style.padding:0;p.isFinite(J)||(J=0);var Q=i(w,N,W,J),ne=s(Q,C);C.forEach(function(K){var ie=K.sets,de=ie.join(",");if(K.id=de,ie.length===1){var we=Q[de];K.path=r(we.x,we.y,we.radius),p.assign(K,we)}else{var Re=ie.map(function(rt){return Q[rt]}),_e=n(Re);/[zZ]$/.test(_e)||(_e+="Z"),K.path=_e;var Ue=ne[de]||{x:0,y:0};p.assign(K,Ue)}})},d}(v);v.Venn=f,B.exports=f},function(B,L,o){function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,v(n,s)}function v(n,s){return v=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},v(n,s)}var p=o(12),c=o(0),h=o(83);o(345);var i=function(n){g(f,n);var s=f.prototype;s.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.type="violin",d.shapeType="violin",d.generatePoints=!0,d};function f(u){var d;return d=n.call(this,u)||this,c.assign(e(d),h),d}return s.createShapePointsCfg=function(d){var b=this,_=n.prototype.createShapePointsCfg.call(this,d);_.size=b.getNormalizedSize(d);var x=b.get("_sizeField");return _._size=d._origin[x],_},s.clearInner=function(){n.prototype.clearInner.call(this),this.set("defaultSize",null)},s._initAttrs=function(){var d=this,b=d.get("attrOptions"),_=b.size?b.size.field:d.get("_sizeField")?d.get("_sizeField"):"size";d.set("_sizeField",_),delete b.size,n.prototype._initAttrs.call(this)},f}(p),r=function(n){g(s,n);function s(){return n.apply(this,arguments)||this}var f=s.prototype;return f.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.hasDefaultAdjust=!0,d.adjusts=[{type:"dodge"}],d},s}(i);i.Dodge=r,p.Violin=i,p.ViolinDodge=r,B.exports=i},function(B,L,o){function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,v(n,s)}function v(n,s){return v=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},v(n,s)}var p=o(0),c=o(30),h=["X","Y","XY","POLYGON"],i="XY",r=function(n){g(f,n);var s=f.prototype;s.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return p.mix({},d,{type:i,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})};function f(u,d){var b;b=n.call(this,u,d)||this;var _=e(b);_.filter=!_.draggable,_.type=_.type.toUpperCase(),_.chart=d,h.includes(_.type)||(_.type=i);var x=_.canvas;if(x){var M;x.get("children").map(function(w){return w.get("type")==="plotBack"?(M=w.get("plotRange"),!1):w}),_.plot={start:M.bl,end:M.tr}}if(d){var P=d.get("coord");_.plot={start:P.start,end:P.end},d.on("afterrender",function(){_.plot={start:P.start,end:P.end}}),_.isTransposed=P.isTransposed;var C=d._getScales("x"),O=d._getScales("y");_.xScale=_.xField?C[_.xField]:d.getXScale(),_.yScale=_.yField?O[_.yField]:d.getYScales()[0]}return b}return s.start=function(d){var b=this,_=b.canvas,x=b.type,M=b.brushShape;if(!!x){b.brushing&&b.end(d);var P={x:d.offsetX,y:d.offsetY};if(!!P.x){var C=b.plot&&b.inPlot,O=_.get("canvasDOM"),w=_.get("pixelRatio");if(b.selection&&(b.selection=null),b.draggable&&M&&!M.get("destroyed")){if(M.isHit(P.x*w,P.y*w)){if(O.style.cursor="move",b.selection=M,b.dragging=!0,x==="X")b.dragoffX=P.x-M.attr("x"),b.dragoffY=0;else if(x==="Y")b.dragoffX=0,b.dragoffY=P.y-M.attr("y");else if(x==="XY")b.dragoffX=P.x-M.attr("x"),b.dragoffY=P.y-M.attr("y");else if(x==="POLYGON"){var S=M.getBBox();b.dragoffX=P.x-S.minX,b.dragoffY=P.y-S.minY}b.onDragstart&&b.onDragstart(d)}b.prePoint=P}if(!b.dragging){b.onBrushstart&&b.onBrushstart(P);var I=b.container;if(C){var j=b.plot,N=j.start,W=j.end;if(P.x<N.x||P.x>W.x||P.y<W.y||P.y>N.y)return}O.style.cursor="crosshair",b.startPoint=P,b.brushShape=null,b.brushing=!0,I?I.clear():(I=_.addGroup({zIndex:5}),I.initTransform()),b.container=I,x==="POLYGON"&&(b.polygonPath="M "+P.x+" "+P.y)}}}},s.process=function(d){var b=this,_=b.brushing,x=b.dragging,M=b.type,P=b.plot,C=b.startPoint,O=b.xScale,w=b.yScale,S=b.canvas;if(!(!_&&!x)){var I={x:d.offsetX,y:d.offsetY},j=S.get("canvasDOM");if(_){j.style.cursor="crosshair";var N=P.start,W=P.end,H=b.polygonPath,J=b.brushShape,Q=b.container;b.plot&&b.inPlot&&(I=b._limitCoordScope(I));var ne,K,ie,de;M==="Y"?(ne=N.x,K=I.y>=C.y?C.y:I.y,ie=Math.abs(N.x-W.x),de=Math.abs(C.y-I.y)):M==="X"?(ne=I.x>=C.x?C.x:I.x,K=W.y,ie=Math.abs(C.x-I.x),de=Math.abs(W.y-N.y)):M==="XY"?(I.x>=C.x?(ne=C.x,K=I.y>=C.y?C.y:I.y):(ne=I.x,K=I.y>=C.y?C.y:I.y),ie=Math.abs(C.x-I.x),de=Math.abs(C.y-I.y)):M==="POLYGON"&&(H+="L "+I.x+" "+I.y,b.polygonPath=H,J?!J.get("destroyed")&&J.attr(p.mix({},J._attrs,{path:H})):J=Q.addShape("path",{attrs:p.mix(b.style,{path:H})})),M!=="POLYGON"&&(J?!J.get("destroyed")&&J.attr(p.mix({},J._attrs,{x:ne,y:K,width:ie,height:de})):J=Q.addShape("rect",{attrs:p.mix(b.style,{x:ne,y:K,width:ie,height:de})})),b.brushShape=J}else if(x){j.style.cursor="move";var we=b.selection;if(we&&!we.get("destroyed"))if(M==="POLYGON"){var Re=b.prePoint;b.selection.translate(I.x-Re.x,I.y-Re.y)}else b.dragoffX&&we.attr("x",I.x-b.dragoffX),b.dragoffY&&we.attr("y",I.y-b.dragoffY)}b.prePoint=I,S.draw();var _e=b._getSelected(),Ue=_e.data,rt=_e.shapes,Fe=_e.xValues,Se=_e.yValues,ye={data:Ue,shapes:rt};O&&(ye[O.field]=Fe),w&&(ye[w.field]=Se),p.mix(d,ye),ye.x=I.x,ye.y=I.y,b.onDragmove&&b.onDragmove(ye),b.onBrushmove&&b.onBrushmove(ye)}},s.end=function(d){var b=this;if(!(!b.brushing&&!b.dragging)){var _=b.data,x=b.shapes,M=b.xValues,P=b.yValues,C=b.canvas,O=b.type,w=b.startPoint,S=b.chart,I=b.container,j=b.xScale,N=b.yScale,W=d.offsetX,H=d.offsetY,J=C.get("canvasDOM");if(J.style.cursor="default",w!==null){if(Math.abs(w.x-W)<=1&&Math.abs(w.y-H)<=1){b.brushing=!1,b.dragging=!1,I.clear(),C.draw();return}var Q={data:_,shapes:x};if(j&&(Q[j.field]=M),N&&(Q[N.field]=P),p.mix(d,Q),Q.x=W,Q.y=H,b.dragging)b.dragging=!1,b.onDragend&&b.onDragend(Q);else if(b.brushing){b.brushing=!1;var ne=b.brushShape,K=b.polygonPath;O==="POLYGON"&&(K+="z",ne&&!ne.get("destroyed")&&ne.attr(p.mix({},ne._attrs,{path:K})),b.polygonPath=K,C.draw()),b.onBrushend?b.onBrushend(Q):S&&b.filter&&(I.clear(),!b.isTransposed&&O==="X"||b.isTransposed&&O==="Y"?j&&S.filter(j.field,function(ie){return M.indexOf(ie)>-1}):!b.isTransposed&&O==="Y"||b.isTransposed&&O==="X"?N&&S.filter(N.field,function(ie){return P.indexOf(ie)>-1}):(j&&S.filter(j.field,function(ie){return M.indexOf(ie)>-1}),N&&S.filter(N.field,function(ie){return P.indexOf(ie)>-1})),S.repaint())}}}},s.reset=function(){var d=this,b=d.chart,_=d.filter,x=d.brushShape,M=d.canvas;this._init(),b&&_&&(b.get("options").filters={},b.repaint()),x&&(x.destroy(),M.draw())},s._limitCoordScope=function(d){var b=this.plot,_=b.start,x=b.end;return d.x<_.x&&(d.x=_.x),d.x>x.x&&(d.x=x.x),d.y<x.y&&(d.y=x.y),d.y>_.y&&(d.y=_.y),d},s._getSelected=function(){var d=this,b=d.chart,_=d.xScale,x=d.yScale,M=d.brushShape,P=d.canvas,C=P.get("pixelRatio"),O=[],w=[],S=[],I=[];if(b){var j=b.get("geoms");j.map(function(N){var W=N.getShapes();return W.map(function(H){var J=H.get("origin");return Array.isArray(J)||(J=[J]),J.map(function(Q){if(M.isHit(Q.x*C,Q.y*C)){O.push(H);var ne=Q._origin;I.push(ne),_&&w.push(ne[_.field]),x&&S.push(ne[x.field])}return Q}),H}),N})}return d.shapes=O,d.xValues=w,d.yValues=S,d.data=I,P.draw(),{data:I,xValues:w,yValues:S,shapes:O}},f}(c);B.exports=r},function(B,L,o){var e=o(0),g=o(18),v=g.Group,p=e.DomUtil,c=5,h=function i(r){i.superclass.constructor.call(this,r)};e.extend(h,v),e.augment(h,{getDefaultCfg:function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_initHandle:function(r){var n=this,s=n.addGroup(),f=n.get("layout"),u=n.get("handleStyle"),d=u.img,b=u.width,_=u.height,x,M,P;if(f==="horizontal"){var C=u.width;P="ew-resize",M=s.addShape("Image",{attrs:{x:-C/2,y:0,width:C,height:_,img:d,cursor:P}}),x=s.addShape("Text",{attrs:e.mix({x:r==="min"?-(C/2+c):C/2+c,y:_/2,textAlign:r==="min"?"end":"start",textBaseline:"middle",text:r==="min"?this.get("minText"):this.get("maxText"),cursor:P},this.get("textStyle"))})}else P="ns-resize",M=s.addShape("Image",{attrs:{x:0,y:-_/2,width:b,height:_,img:d,cursor:P}}),x=s.addShape("Text",{attrs:e.mix({x:b/2,y:r==="min"?_/2+c:-(_/2+c),textAlign:"center",textBaseline:"middle",text:r==="min"?this.get("minText"):this.get("maxText"),cursor:P},this.get("textStyle"))});return this.set(r+"TextElement",x),this.set(r+"IconElement",M),s},_initSliderBackground:function(){var r=this.addGroup();return r.initTransform(),r.translate(0,0),r.addShape("Rect",{attrs:e.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),r},_beforeRenderUI:function(){var r=this._initSliderBackground(),n=this._initHandle("min"),s=this._initHandle("max"),f=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",f),this.set("minHandleElement",n),this.set("maxHandleElement",s),this.set("backgroundElement",r),r.set("zIndex",0),f.set("zIndex",1),n.set("zIndex",2),s.set("zIndex",2),f.attr("cursor","move"),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(r){var n=this.get("range"),s=n[0]/100,f=n[1]/100,u=this.get("width"),d=this.get("height"),b=this.get("minHandleElement"),_=this.get("maxHandleElement"),x=this.get("middleHandleElement");b.resetMatrix?(b.resetMatrix(),_.resetMatrix()):(b.initTransform(),_.initTransform()),r==="horizontal"?(x.attr({x:u*s,y:0,width:(f-s)*u,height:d}),b.translate(s*u,0),_.translate(f*u,0)):(x.attr({x:0,y:d*(1-f),width:u,height:(f-s)*d}),b.translate(0,(1-s)*d),_.translate(0,(1-f)*d))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",e.wrapBehavior(this,"_onMouseDown"))},_isElement:function(r,n){var s=this.get(n);if(r===s)return!0;if(s.isGroup){var f=s.get("children");return f.indexOf(r)>-1}return!1},_getRange:function(r,n){var s=r+n;return s=s>100?100:s,s=s<0?0:s,s},_limitRange:function(r,n,s){s[0]=this._getRange(r,s[0]),s[1]=s[0]+n,s[1]>100&&(s[1]=100,s[0]=s[1]-n)},_updateStatus:function(r,n){var s=r==="x"?this.get("width"):this.get("height");r=e.upperFirst(r);var f=this.get("range"),u=this.get("page"+r),d=this.get("currentTarget"),b=this.get("rangeStash"),_=this.get("layout"),x=_==="vertical"?-1:1,M=n["page"+r],P=M-u,C=P/s*100*x,O,w=this.get("minRange"),S=this.get("maxRange");f[1]<=f[0]?(this._isElement(d,"minHandleElement")||this._isElement(d,"maxHandleElement"))&&(f[0]=this._getRange(C,f[0]),f[1]=this._getRange(C,f[0])):(this._isElement(d,"minHandleElement")&&(f[0]=this._getRange(C,f[0]),w&&f[1]-f[0]<=w&&this._limitRange(C,w,f),S&&f[1]-f[0]>=S&&this._limitRange(C,S,f)),this._isElement(d,"maxHandleElement")&&(f[1]=this._getRange(C,f[1]),w&&f[1]-f[0]<=w&&this._limitRange(C,w,f),S&&f[1]-f[0]>=S&&this._limitRange(C,S,f))),this._isElement(d,"middleHandleElement")&&(O=b[1]-b[0],this._limitRange(C,O,f)),this.emit("sliderchange",{range:f}),this.set("page"+r,M),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(r){var n=r.currentTarget,s=r.event,f=this.get("range");s.stopPropagation(),s.preventDefault(),this.set("pageX",s.pageX),this.set("pageY",s.pageY),this.set("currentTarget",n),this.set("rangeStash",[f[0],f[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var r=this.get("canvas").get("containerDOM");this.onMouseMoveListener=p.addEventListener(r,"mousemove",e.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=p.addEventListener(r,"mouseup",e.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=p.addEventListener(r,"mouseleave",e.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(r){var n=this.get("layout");n==="horizontal"?this._updateStatus("x",r):this._updateStatus("y",r)},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()}}),B.exports=h},function(B,L,o){function e(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function g(d,b){d.prototype=Object.create(b.prototype),d.prototype.constructor=d,v(d,b)}function v(d,b){return v=Object.setPrototypeOf||function(x,M){return x.__proto__=M,x},v(d,b)}var p=o(0),c=o(30),h=o(353),i=o(84),r=o(86),n=864e5,s=["X","Y","XY"],f="X",u=function(d){g(_,d);var b=_.prototype;b.getDefaultCfg=function(){var M=d.prototype.getDefaultCfg.call(this);return p.mix({},M,{type:f,stepRatio:.05,limitRange:{},stepByField:{},threshold:20,originScaleDefsByField:{},previousPoint:null,isDragging:!1})},b._disableTooltip=function(){var M=this,P=M.chart,C=P.get("tooltipController");C&&(M._showTooltip=!0,P.tooltip(!1))},b._enableTooltip=function(M){var P=this,C=P.chart;P._showTooltip&&(C.tooltip(!0),C.showTooltip(M))};function _(x,M){var P;P=d.call(this,x,M)||this;var C=e(P);C.type=C.type.toUpperCase(),C.chart=M,C.coord=M.get("coord");var O=C.data=M.get("data");h(M);var w=M.getYScales(),S=M.getXScale();w.push(S);var I=M.get("scaleController");return w.forEach(function(j){var N=j.field;C.limitRange[N]=r(O,j);var W=I.defs[N]||{};C.originScaleDefsByField[N]=p.mix(W,{nice:!!W.nice}),j.isLinear&&(C.stepByField[N]=(j.max-j.min)*C.stepRatio)}),s.includes(C.type)||(C.type=f),C._disableTooltip(),P}return b._applyTranslate=function(M,P,C){P===void 0&&(P=0);var O=this;M.isLinear?O._translateLinearScale(M,P,C):O._translateCatScale(M,P,C)},b._translateCatScale=function(M,P,C){var O=this,w=O.chart,S=M.type,I=M.field,j=M.values,N=M.ticks,W=i(w,I),H=O.limitRange[I],J=P/C,Q=j.length,ne=Math.max(1,Math.abs(parseInt(J*Q))),K=H.indexOf(j[0]),ie=H.indexOf(j[Q-1]);if(P>0&&K>=0){for(var de=0;de<ne&&K>0;de++)K-=1,ie-=1;var we=H.slice(K,ie+1),Re=null;if(S==="timeCat"){for(var _e=N.length>2?N[1]-N[0]:n,Ue=N[0]-_e;Ue>=we[0];Ue-=_e)N.unshift(Ue);Re=N}w.scale(I,p.mix({},W,{values:we,ticks:Re}))}else if(P<0&&ie<=H.length-1){for(var rt=0;rt<ne&&ie<H.length-1;rt++)K+=1,ie+=1;var Fe=H.slice(K,ie+1),Se=null;if(S==="timeCat"){for(var ye=N.length>2?N[1]-N[0]:n,Oe=N[N.length-1]+ye;Oe<=Fe[Fe.length-1];Oe+=ye)N.push(Oe);Se=N}w.scale(I,p.mix({},W,{values:Fe,ticks:Se}))}},b._translateLinearScale=function(M,P,C){var O=this,w=O.chart,S=O.limitRange,I=M.min,j=M.max,N=M.field;if(!(I===S[N].min&&j===S[N].max)){var W=P/C,H=j-I,J=i(w,N);w.scale(N,p.mix({},J,{nice:!1,min:I+W*H,max:j+W*H}))}},b.start=function(M){var P=this,C=P.canvas,O=C.get("canvasDOM");O.style.cursor="pointer",P.isDragging=!0,P.previousPoint={x:M.x,y:M.y},P._disableTooltip()},b.process=function(M){var P=this;if(P.isDragging){var C=P.chart,O=P.type,w=P.canvas,S=P.coord,I=P.threshold,j=w.get("canvasDOM");j.style.cursor="move";var N=P.previousPoint,W=M,H=W.x-N.x,J=W.y-N.y,Q=!1;if(Math.abs(H)>I&&O.indexOf("X")>-1){Q=!0;var ne=C.getXScale();P._applyTranslate(ne,ne.isLinear?-H:H,S.width)}if(Math.abs(J)>I&&O.indexOf("Y")>-1){Q=!0;var K=C.getYScales();K.forEach(function(ie){P._applyTranslate(ie,W.y-N.y,S.height)})}Q&&(P.previousPoint=W,C.repaint())}},b.end=function(M){var P=this;P.isDragging=!1;var C=P.canvas,O=C.get("canvasDOM");O.style.cursor="default",P._enableTooltip(M)},b.reset=function(){var M=this,P=M.view,C=M.originScaleDefsByField,O=P.getYScales(),w=P.getXScale();O.push(w),O.forEach(function(S){if(S.isLinear){var I=S.field;P.scale(I,C[I])}}),P.repaint(),M._disableTooltip()},_}(c);B.exports=u},function(B,L,o){var e=o(0),g=o(62),v=o(85);B.exports=function(p){p.on("beforeinitgeoms",function(){p.set("limitInPlot",!0);var c=p.get("data"),h=v(p);if(!h)return c;var i=p.get("geoms"),r=!1;e.each(i,function(f){if(["area","line","path"].includes(f.get("type")))return r=!0,!1});var n=[];if(e.each(h,function(f,u){!r&&f&&(f.values||f.min||f.max)&&n.push(u)}),n.length===0)return c;var s=[];e.each(c,function(f){var u=!0;e.each(n,function(d){var b=f[d];if(b){var _=h[d];if(_.type==="timeCat"){var x=_.values;e.isNumber(x[0])&&(b=g.toTimeStamp(b))}(_.values&&!_.values.includes(b)||_.min&&b<_.min||_.max&&b>_.max)&&(u=!1)}}),u&&s.push(f)}),p.set("filteredData",s)})}},function(B,L){B.exports=function(o,e,g){if(!o)return[0,1];var v=0,p=0;if(g==="linear"){var c=e.min,h=e.max,i=h-c;v=(o.min-c)/i,p=(o.max-c)/i}else{var r=e,n=o.values,s=r.indexOf(n[0]),f=r.indexOf(n[n.length-1]);v=s/(r.length-1),p=f/(r.length-1)}return[v,p]}},function(B,L,o){var e=o(50),g=o(49),v=o(0),p={Base:o(30),Brush:o(350),Drag:o(352),ScrollBar:o(356),ShapeSelect:o(357),Slider:o(358),Zoom:o(359)};e._Interactions={},e.registerInteraction=function(c,h){e._Interactions[c]=h},e.getInteraction=function(c){return e._Interactions[c]},g.prototype.getInteractions=function(){var c=this;return c._interactions||(c._interactions={}),c._interactions},g.prototype._setInteraction=function(c,h){var i=this,r=i.getInteractions();r[c]&&r[c]!==h&&r[c].destroy(),r[c]=h},g.prototype.clearInteraction=function(c){var h=this,i=h.getInteractions();c?(i[c]&&(i[c]._reset(),i[c].destroy()),delete i[c]):v.each(i,function(r,n){r._reset(),r.destroy(),delete i[n]})},g.prototype.interact=g.prototype.interaction=function(c,h){var i=this,r=e.getInteraction(c),n=new r(h,i);return i._setInteraction(c,n),i},e.registerInteraction("brush",p.Brush),e.registerInteraction("Brush",p.Brush),e.registerInteraction("drag",p.Drag),e.registerInteraction("Drag",p.Drag),e.registerInteraction("zoom",p.Zoom),e.registerInteraction("Zoom",p.Zoom),e.registerInteraction("scroll-bar",p.ScrollBar),e.registerInteraction("ScrollBar",p.ScrollBar),e.registerInteraction("shape-select",p.ShapeSelect),e.registerInteraction("ShapeSelect",p.ShapeSelect),e.registerInteraction("slider",p.Slider),e.registerInteraction("Slider",p.Slider),B.exports=p},function(B,L,o){function e(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,g(n,s)}function g(n,s){return g=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},g(n,s)}var v=o(0),p=o(30),c=o(354),h=o(86),i="X",r=function(n){e(f,n);var s=f.prototype;s.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return v.mix({},d,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,type:i,xStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:0,offsetY:-10},yStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:8,offsetY:0}})},s._renderScrollBars=function(){var d=this.chart,b=d.get("_scrollBarCfg");if(!!b){var _=d.get("data"),x=d.get("plotRange");x.width=Math.abs(x.br.x-x.bl.x),x.height=Math.abs(x.tl.y-x.bl.y);var M=d.get("backPlot"),P=d.get("canvas"),C=P.get("height"),O=d.get("_limitRange"),w=b.type;if(w.indexOf("X")>-1){var S=b.xStyle,I=S.offsetX,j=S.offsetY,N=S.lineCap,W=S.backgroundColor,H=S.fillerColor,J=S.size,Q=d.getXScale(),ne=O[Q.field];ne||(ne=h(_,Q),O[Q.field]=ne);var K=c(Q,ne,Q.type),ie=d.get("_horizontalBar"),de=C-J/2+j;if(ie){var we=ie.get("children")[1];we.attr({x1:Math.max(x.bl.x+x.width*K[0]+I,x.bl.x),x2:Math.min(x.bl.x+x.width*K[1]+I,x.br.x)})}else ie=M.addGroup({className:"horizontalBar"}),ie.addShape("line",{attrs:{x1:x.bl.x+I,y1:de,x2:x.br.x+I,y2:de,lineWidth:J,stroke:W,lineCap:N}}),ie.addShape("line",{attrs:{x1:Math.max(x.bl.x+x.width*K[0]+I,x.bl.x),y1:de,x2:Math.min(x.bl.x+x.width*K[1]+I,x.br.x),y2:de,lineWidth:J,stroke:H,lineCap:N}}),d.set("_horizontalBar",ie)}if(w.indexOf("Y")>-1){var Re=b.yStyle,_e=Re.offsetX,Ue=Re.offsetY,rt=Re.lineCap,Fe=Re.backgroundColor,Se=Re.fillerColor,ye=Re.size,Oe=d.getYScales()[0],ue=O[Oe.field];ue||(ue=h(_,Oe),O[Oe.field]=ue);var xe=c(Oe,ue,Oe.type),Ae=d.get("_verticalBar"),pe=ye/2+_e;if(Ae){var be=Ae.get("children")[1];be.attr({y1:Math.max(x.tl.y+x.height*xe[0]+Ue,x.tl.y),y2:Math.min(x.tl.y+x.height*xe[1]+Ue,x.bl.y)})}else Ae=M.addGroup({className:"verticalBar"}),Ae.addShape("line",{attrs:{x1:pe,y1:x.tl.y+Ue,x2:pe,y2:x.bl.y+Ue,lineWidth:ye,stroke:Fe,lineCap:rt}}),Ae.addShape("line",{attrs:{x1:pe,y1:Math.max(x.tl.y+x.height*xe[0]+Ue,x.tl.y),x2:pe,y2:Math.min(x.tl.y+x.height*xe[1]+Ue,x.bl.y),lineWidth:ye,stroke:Se,lineCap:rt}}),d.set("_verticalBar",Ae)}}};function f(u,d){var b;b=n.call(this,u,d)||this;var _=b.getDefaultCfg();return d.set("_scrollBarCfg",v.deepMix({},_,u)),d.set("_limitRange",{}),!d.get("_horizontalBar")&&!d.get("_verticalBar")&&b._renderScrollBars(),b}return s._clear=function(){var d=this.chart;if(d){var b=d.get("_horizontalBar"),_=d.get("_verticalBar");b&&b.remove(!0),_&&_.remove(!0),d.set("_horizontalBar",null),d.set("_verticalBar",null)}},s._bindEvents=function(){this._onAfterclearOrBeforechangedata=this._onAfterclearOrBeforechangedata.bind(this),this._onAfterclearinner=this._onAfterclearinner.bind(this),this._onAfterdrawgeoms=this._onAfterdrawgeoms.bind(this);var d=this.chart;d.on("afterclear",this._onAfterclearOrBeforechangedata),d.on("beforechangedata",this._onAfterclearOrBeforechangedata),d.on("afterclearinner",this._onAfterclearinner),d.on("afterdrawgeoms",this._onAfterdrawgeoms)},s._onAfterclearOrBeforechangedata=function(){this.chart&&this.chart.set("_limitRange",{})},s._onAfterclearinner=function(){this._clear()},s._onAfterdrawgeoms=function(){this._renderScrollBars()},s._clearEvents=function(){var d=this.chart;d&&(d.off("afterclear",this._onAfterclearOrBeforechangedata),d.off("beforechangedata",this._onAfterclearOrBeforechangedata),d.off("afterclearinner",this._onAfterclearinner),d.off("afterdrawgeoms",this._onAfterdrawgeoms))},s.destroy=function(){this._clearEvents(),this._clear(),this.canvas.draw()},f}(p);B.exports=r},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,g(i,r)}function g(i,r){return g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},g(i,r)}var v=o(0),p=o(30);function c(i,r){var n={};for(var s in r)n[s]=i[s];return n}var h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return v.mix({},f,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},n.start=function(f){var u=this,d=u.view,b,_=[];if(d.eachShape(function(C,O){O.isPointInPath(f.x,f.y)?b=O:_.push(O)}),!b){u.reset();return}if(b.get("_selected")){if(!u.cancelable)return;u.reset()}else{var x=u.selectStyle,M=u.unSelectStyle,P=c(b.attr(),b);b.set("_originAttrs",P),b.attr(x),v.each(_,function(C){var O=C.get("_originAttrs");O&&C.attr(O),C.set("_selected",!1),M&&(O=c(C.attr(),M),C.set("_originAttrs",O),C.attr(M))}),b.set("_selected",!0),u.selectedShape=b,u.canvas.draw()}},n.end=function(f){var u=this.selectedShape;u&&!u.get("destroyed")&&u.get("origin")&&(f.data=u.get("origin")._origin,f.shapeInfo=u.get("origin"),f.shape=u,f.selected=!!u.get("_selected"))},n.reset=function(){var f=this;if(!!f.selectedShape){var u=f.view,d=u.get("geoms")[0],b=d.get("container").get("children")[0],_=b.get("children");v.each(_,function(x){var M=x.get("_originAttrs");M&&(x._attrs=M,x.set("_originAttrs",null)),x.set("_selected",!1)}),f.canvas.draw()}},r}(p);B.exports=h},function(B,L,o){function e(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function g(x,M){x.prototype=Object.create(M.prototype),x.prototype.constructor=x,v(x,M)}function v(x,M){return v=Object.setPrototypeOf||function(C,O){return C.__proto__=O,C},v(x,M)}var p=o(351),c=o(49),h=o(0),i=o(18),r=o(6),n=o(30),s=o(84),f=o(85),u=i.Canvas,d=h.DomUtil,b=h.isNumber,_=function(x){g(P,x);var M=P.prototype;M.getDefaultCfg=function(){var O=x.prototype.getDefaultCfg.call(this);return h.mix({},O,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,height:26,width:"auto",padding:r.plotCfg.padding,container:null,xAxis:null,yAxis:null,fillerStyle:{fill:"#BDCCED",fillOpacity:.3},backgroundStyle:{stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},range:[0,100],layout:"horizontal",textStyle:{fill:"#545454"},handleStyle:{img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},backgroundChart:{type:["area"],color:"#CCD6EC"}})},M._initContainer=function(){var O=this,w=O.container;if(!w)throw new Error("Please specify the container for the Slider!");h.isString(w)?O.domContainer=document.getElementById(w):O.domContainer=w},M.forceFit=function(){var O=this;if(!(!O||O.destroyed)){var w=d.getWidth(O.domContainer),S=O.height;if(w!==O.domWidth){var I=O.canvas;I.changeSize(w,S),O.bgChart&&O.bgChart.changeWidth(w),I.clear(),O._initWidth(),O._initSlider(),O._bindEvent(),I.draw()}}},M._initForceFitEvent=function(){var O=this,w=setTimeout(h.wrapBehavior(O,"forceFit"),200);clearTimeout(O.resizeTimer),O.resizeTimer=w},M._initStyle=function(){var O=this;O.handleStyle=h.mix({width:O.height,height:O.height},O.handleStyle),O.width==="auto"&&window.addEventListener("resize",h.wrapBehavior(O,"_initForceFitEvent"))},M._initWidth=function(){var O=this,w;O.width==="auto"?w=d.getWidth(O.domContainer):w=O.width,O.domWidth=w;var S=h.toAllPadding(O.padding);O.layout==="horizontal"?(O.plotWidth=w-S[1]-S[3],O.plotPadding=S[3],O.plotHeight=O.height):O.layout==="vertical"&&(O.plotWidth=O.width,O.plotHeight=O.height-S[0]-S[2],O.plotPadding=S[0])},M._initCanvas=function(){var O=this,w=O.domWidth,S=O.height,I=new u({width:w,height:S,containerDOM:O.domContainer,capture:!1}),j=I.get("el");j.style.position="absolute",j.style.top=0,j.style.left=0,j.style.zIndex=3,O.canvas=I},M._initBackground=function(){var O,w=this,S=this.chart,I=S.getAllGeoms[0],j=w.data=w.data||S.get("data"),N=S.getXScale(),W=w.xAxis||N.field,H=w.yAxis||S.getYScales()[0].field,J=h.deepMix((O={},O[""+W]={range:[0,1]},O),f(S),w.scales);if(delete J[W].min,delete J[W].max,!j)throw new Error("Please specify the data!");if(!W)throw new Error("Please specify the xAxis!");if(!H)throw new Error("Please specify the yAxis!");var Q=w.backgroundChart,ne=Q.type||I.get("type"),K=Q.color||"grey",ie=Q.shape;h.isArray(ne)||(ne=[ne]);var de=h.toAllPadding(w.padding),we=new c({container:w.container,width:w.domWidth,height:w.height,padding:[0,de[1],0,de[3]],animate:!1});we.source(j),we.scale(J),we.axis(!1),we.tooltip(!1),we.legend(!1),h.each(ne,function(Re,_e){var Ue=we[Re]().position(W+"*"+H).opacity(1),rt=h.isArray(K)?K[_e]:K;rt&&(h.isObject(rt)?rt.field&&Ue.color(rt.field,rt.colors):Ue.color(rt));var Fe=h.isArray(ie)?ie[_e]:ie;Fe&&(h.isObject(Fe)?Fe.field&&Ue.shape(Fe.field,Fe.callback||Fe.shapes):Ue.shape(Fe))}),we.render(),w.bgChart=we,w.scale=w.layout==="horizontal"?we.getXScale():we.getYScales()[0],w.layout==="vertical"&&we.destroy()},M._initRange=function(){var O=this,w=O.startRadio,S=O.endRadio,I=O._startValue,j=O._endValue,N=O.scale,W=0,H=1;b(w)?W=w:I&&(W=N.scale(N.translate(I))),b(S)?H=S:j&&(H=N.scale(N.translate(j)));var J=O.minSpan,Q=O.maxSpan,ne=0;if(N.type==="time"||N.type==="timeCat"){var K=N.values,ie=K[0],de=K[K.length-1];ne=de-ie}else N.isLinear&&(ne=N.max-N.min);ne&&J&&(O.minRange=J/ne*100),ne&&Q&&(O.maxRange=Q/ne*100);var we=[W*100,H*100];return O.range=we,we},M._getHandleValue=function(O){var w=this,S,I=w.range,j=I[0]/100,N=I[1]/100,W=w.scale;return O==="min"?S=w._startValue?w._startValue:W.invert(j):S=w._endValue?w._endValue:W.invert(N),S},M._initSlider=function(){var O=this,w=O.canvas,S=O._initRange(),I=O.scale,j=w.addGroup(p,{middleAttr:O.fillerStyle,range:S,minRange:O.minRange,maxRange:O.maxRange,layout:O.layout,width:O.plotWidth,height:O.plotHeight,backgroundStyle:O.backgroundStyle,textStyle:O.textStyle,handleStyle:O.handleStyle,minText:I.getText(O._getHandleValue("min")),maxText:I.getText(O._getHandleValue("max"))});O.layout==="horizontal"?j.translate(O.plotPadding,0):O.layout==="vertical"&&j.translate(0,O.plotPadding),O.rangeElement=j},M._updateElement=function(O,w){var S=this,I=S.chart,j=S.scale,N=S.rangeElement,W=j.field,H=N.get("minTextElement"),J=N.get("maxTextElement"),Q=j.invert(O),ne=j.invert(w),K=j.getText(Q),ie=j.getText(ne);H.attr("text",K),J.attr("text",ie),S._startValue=K,S._endValue=ie,S.onChange&&S.onChange({startText:K,endText:ie,startValue:Q,endValue:ne,startRadio:O,endRadio:w}),I.scale(W,h.mix({},s(I,W),{nice:!1,min:Q,max:ne})),I.repaint()},M._bindEvent=function(){var O=this,w=O.rangeElement;w.on("sliderchange",function(S){var I=S.range,j=I[0]/100,N=I[1]/100;O._updateElement(j,N)})};function P(C,O){var w;w=x.call(this,C,O)||this;var S=e(w);return S._initContainer(),S._initStyle(),S.render(),w}return M.clear=function(){var O=this;O.canvas.clear(),O.bgChart&&O.bgChart.destroy(),O.bgChart=null,O.scale=null,O.canvas.draw()},M.repaint=function(){var O=this;O.clear(),O.render()},M.render=function(){var O=this;O._initWidth(),O._initCanvas(),O._initBackground(),O._initSlider(),O._bindEvent(),O.canvas.draw()},M.destroy=function(){var O=this;clearTimeout(O.resizeTimer);var w=O.rangeElement;w.off("sliderchange"),O.bgChart&&O.bgChart.destroy(),O.canvas.destroy();for(var S=O.domContainer;S.hasChildNodes();)S.removeChild(S.firstChild);window.removeEventListener("resize",h.getWrapBehavior(O,"_initForceFitEvent")),O.destroyed=!0},P}(n);B.exports=_},function(B,L,o){function e(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function g(f,u){f.prototype=Object.create(u.prototype),f.prototype.constructor=f,v(f,u)}function v(f,u){return v=Object.setPrototypeOf||function(b,_){return b.__proto__=_,b},v(f,u)}var p=o(0),c=o(30),h=o(84),i=o(86),r=["X","Y","XY"],n="X",s=function(f){g(d,f);var u=d.prototype;u.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return p.mix({},_,{processEvent:"mousewheel",type:n,stepRatio:.05,stepByField:{},minScale:1,maxScale:4,catStep:2,limitRange:{},originScaleDefsByField:{}})};function d(b,_){var x;x=f.call(this,b,_)||this;var M=e(x);M.chart=_,M.type=M.type.toUpperCase();var P=M.data=_.get("data"),C=_.getYScales(),O=_.getXScale();C.push(O);var w=_.get("scaleController");return C.forEach(function(S){var I=S.field,j=w.defs[I]||{};M.limitRange[I]=i(P,S),M.originScaleDefsByField[I]=p.mix(j,{nice:!!j.nice}),S.isLinear?M.stepByField[I]=(S.max-S.min)*M.stepRatio:M.stepByField[I]=M.catStep}),r.includes(M.type)||(M.type=n),x}return u._applyScale=function(_,x,M,P){M===void 0&&(M=0);var C=this,O=C.chart,w=C.stepByField;if(_.isLinear){var S=_.min,I=_.max,j=_.field,N=1-M,W=w[j]*x,H=S+W*M,J=I-W*N;if(J>H){var Q=h(O,j);O.scale(j,p.mix({},Q,{nice:!1,min:H,max:J}))}}else{var ne=_.field,K=_.values,ie=C.chart,de=ie.get("coord"),we=h(ie,ne),Re=C.limitRange[ne],_e=Re.length,Ue=C.maxScale,rt=C.minScale,Fe=_e/Ue,Se=_e/rt,ye=K.length,Oe=de.invertPoint(P),ue=Oe.x,xe=ye-x*this.catStep,Ae=parseInt(xe*ue),pe=xe+Ae;if(x>0&&ye>=Fe){var be=Ae,le=pe;pe>ye&&(le=ye-1,be=ye-xe);var z=K.slice(be,le);ie.scale(ne,p.mix({},we,{values:z}))}else if(x<0&&ye<=Se){var ae=Re.indexOf(K[0]),V=Re.indexOf(K[ye-1]),re=Math.max(0,ae-Ae),te=Math.min(V+pe,_e),q=Re.slice(re,te);ie.scale(ne,p.mix({},we,{values:q}))}}},u.process=function(_){var x=this,M=x.chart,P=x.type,C=M.get("coord"),O=_.deltaY,w=C.invertPoint(_);if(O){x.onZoom&&x.onZoom(O,w,x),O>0?x.onZoomin&&x.onZoomin(O,w,x):x.onZoomout&&x.onZoomout(O,w,x);var S=O/Math.abs(O);if(P.indexOf("X")>-1&&x._applyScale(M.getXScale(),S,w.x,_),P.indexOf("Y")>-1){var I=M.getYScales();I.forEach(function(j){x._applyScale(j,S,w.y,_)})}}M.repaint()},u.reset=function(){var _=this,x=_.view,M=_.originScaleDefsByField,P=x.getYScales(),C=x.getXScale();P.push(C),P.forEach(function(O){if(O.isLinear){var w=O.field;x.scale(w,M[w])}}),x.repaint()},d}(c);B.exports=s},function(B,L,o){var e,g,v=o(0),p=o(161),c="g2-tooltip",h="g2-legend",i=v.deepMix({},p,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(e={},e[""+h]={color:"#D9D9D9"},e),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(g={},g[""+c]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},g),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});B.exports=i},function(B,L,o){var e=o(2),g=o(165),v=o(164),p=o(365),c=o(370),h=function i(r){i.superclass.constructor.call(this,r)};h.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},e.extend(h,v),e.augment(h,{init:function(){h.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(r,n){if(r)if(e.isEmpty(r._getEvents())){var s=r.get("parent");if(s&&!n.propagationStopped)return this.getEmitter(s,n)}else return r},_getEventObj:function(r,n,s,f){var u=new g(r,n,!0,!0);return u.x=s.x,u.y=s.y,u.clientX=n.clientX,u.clientY=n.clientY,u.currentTarget=f,u.target=f,u},_triggerEvent:function(r,n){var s=this.getPointByClient(n.clientX,n.clientY),f=this.getShape(s.x,s.y,n),u=this.get("el"),d;if(r==="mousemove"){var b=this.get("preShape");if(b&&b!==f){var _=this._getEventObj("mouseleave",n,s,b);d=this.getEmitter(b,n),d&&d.emit("mouseleave",_),u.style.cursor="default"}if(f){var x=this._getEventObj("mousemove",n,s,f);if(d=this.getEmitter(f,n),d&&d.emit("mousemove",x),b!==f){var M=this._getEventObj("mouseenter",n,s,f);d&&d.emit("mouseenter",M,n)}}else{var P=this._getEventObj("mousemove",n,s,this);this.emit("mousemove",P)}this.set("preShape",f)}else{var C=this._getEventObj(r,n,s,f||this);d=this.getEmitter(f,n),d&&d!==this&&d.emit(r,C),this.emit(r,C)}f&&!f.get("destroyed")&&(u.style.cursor=f.attr("cursor")||"default")},_registEvents:function(){var r=this,n=r.get("el"),s=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"];e.each(s,function(f){n.addEventListener(f,function(u){r._triggerEvent(f,u)},!1)}),n.addEventListener("touchstart",function(f){e.isEmpty(f.touches)||r._triggerEvent("touchstart",f.touches[0])},!1),n.addEventListener("touchmove",function(f){e.isEmpty(f.touches)||r._triggerEvent("touchmove",f.touches[0])},!1),n.addEventListener("touchend",function(f){e.isEmpty(f.changedTouches)||r._triggerEvent("touchend",f.changedTouches[0])},!1)},_scale:function(){var r=this.get("pixelRatio");this.scale(r,r)},_setGlobalParam:function(){var r=this.get("pixelRatio");r||this.set("pixelRatio",e.getRatio());var n=c[this.get("renderer")||"canvas"];this._cfg.renderer=n,this._cfg.canvas=this;var s=new p(this);this._cfg.timeline=s},_setContainer:function(){var r=this.get("containerId"),n=this.get("containerDOM");n||(n=document.getElementById(r),this.set("containerDOM",n)),e.modifyCSS(n,{position:"relative"})},_initPainter:function(){var r=this.get("containerDOM"),n=new this._cfg.renderer.painter(r);this._cfg.painter=n,this._cfg.canvasDOM=this._cfg.el=n.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var r=this.get("canvasDOM"),n=this.get("widthCanvas"),s=this.get("heightCanvas"),f=this.get("widthStyle"),u=this.get("heightStyle");r.style.width=f,r.style.height=u,r.setAttribute("width",n),r.setAttribute("height",s)},getWidth:function(){var r=this.get("pixelRatio"),n=this.get("width");return n*r},getHeight:function(){var r=this.get("pixelRatio"),n=this.get("height");return n*r},changeSize:function(r,n){var s=this.get("pixelRatio"),f=r*s,u=n*s;this.set("widthCanvas",f),this.set("heightCanvas",u),this.set("widthStyle",r+"px"),this.set("heightStyle",n+"px"),this.set("width",r),this.set("height",n),this._resize()},getPointByClient:function(r,n){var s=this.get("el"),f=this.get("pixelRatio")||1,u=s.getBoundingClientRect();return{x:(r-u.left)*f,y:(n-u.top)*f}},getClientByPoint:function(r,n){var s=this.get("el"),f=s.getBoundingClientRect(),u=this.get("pixelRatio")||1;return{clientX:r/u+f.left,clientY:n/u+f.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(r,n,s){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,r,n,s):h.superclass.getShape.call(this,r,n)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var r=this._cfg,n=r.containerDOM,s=r.canvasDOM;s&&n&&n.removeChild(s),r.timeline.stop(),h.superclass.destroy.call(this)}}),B.exports=h},function(B,L,o){var e=o(2),g={delay:"delay",rotate:"rotate"},v={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function p(i,r){var n={},s=r._attrs;for(var f in i.attrs)n[f]=s[f];return n}function c(i,r){var n={matrix:null,attrs:{}},s=r._attrs;for(var f in i)if(f==="transform")n.matrix=e.transform(r.getMatrix(),i[f]);else if(f==="rotate")n.matrix=e.transform(r.getMatrix(),[["r",i[f]]]);else if(f==="matrix")n.matrix=i[f];else{if(v[f]&&/^[r,R,L,l]{1}[\s]*\(/.test(i[f]))continue;!g[f]&&s[f]!==i[f]&&(n.attrs[f]=i[f])}return n}function h(i,r){var n=r.delay,s=Object.prototype.hasOwnProperty;return e.each(r.toAttrs,function(f,u){e.each(i,function(d){n<d.startTime+d.duration&&s.call(d.toAttrs,u)&&(delete d.toAttrs[u],delete d.fromAttrs[u])})}),r.toMatrix&&e.each(i,function(f){n<f.startTime+f.duration&&f.toMatrix&&delete f.toMatrix}),i}B.exports={animate:function(r,n,s,f,u){u===void 0&&(u=0);var d=this;d.set("animating",!0);var b=d.get("timeline");b||(b=d.get("canvas").get("timeline"),d.setSilent("timeline",b));var _=d.get("animators")||[];b._timer||b.initTimer(),e.isNumber(f)&&(u=f,f=null),e.isFunction(s)?(f=s,s="easeLinear"):s=s||"easeLinear";var x=c(r,d),M={fromAttrs:p(x,d),toAttrs:x.attrs,fromMatrix:e.clone(d.getMatrix()),toMatrix:x.matrix,duration:n,easing:s,callback:f,delay:u,startTime:b.getTime(),id:e.uniqueId()};_.length>0?_=h(_,M):b.addAnimator(d),_.push(M),d.setSilent("animators",_),d.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var r=this,n=this.get("animators");e.each(n,function(s){r.attr(s.toAttrs),s.toMatrix&&r.attr("matrix",s.toMatrix),s.callback&&s.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var r=this,n=r.get("timeline");return r.setSilent("pause",{isPaused:!0,pauseTime:n.getTime()}),r},resumeAnimate:function(){var r=this,n=r.get("timeline"),s=n.getTime(),f=r.get("animators"),u=r.get("pause").pauseTime;return e.each(f,function(d){d.startTime=d.startTime+(s-u),d._paused=!1,d._pauseTime=null}),r.setSilent("pause",{isPaused:!1}),r.setSilent("animators",f),r}}},function(B,L,o){var e=o(2);B.exports={canFill:!1,canStroke:!1,initAttrs:function(v){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(e.assign(this.getDefaultAttrs(),v)),this},getDefaultAttrs:function(){return{}},attr:function(v,p){var c=this;if(arguments.length===0)return c._attrs;if(e.isObject(v)){for(var h in v)this._setAttr(h,v[h]);return c.clearBBox(),this._cfg.hasUpdate=!0,c}return arguments.length===2?(this._setAttr(v,p),c.clearBBox(),this._cfg.hasUpdate=!0,c):c._attrs[v]},_setAttr:function(v,p){var c=this,h=this._attrs;if(h[v]=p,v==="fill"||v==="stroke"){h[v+"Style"]=p;return}if(v==="opacity"){h.globalAlpha=p;return}if(v==="clip"&&p){c._setClip(p);return}if(v==="path"&&c._afterSetAttrPath){c._afterSetAttrPath(p);return}if(v==="transform"){c.transform(p);return}v==="rotate"&&c.rotateAtStart(p)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(v){v._cfg.renderer=this._cfg.renderer,v._cfg.canvas=this._cfg.canvas,v._cfg.parent=this._cfg.parent,v.hasFill=function(){return!0}}}},function(B,L,o){var e=o(2),g=o(89),v={arc:o(53),ellipse:o(173),line:o(54)},p=e.createDom('<canvas width="500" height="500"></canvas>'),c=p.getContext("2d");function h(w,S,I){return I.createPath(c),c.isPointInPath(w,S)}var i=function(S,I){var j=this._attrs,N=j.x,W=j.y,H=j.r,J=j.startAngle,Q=j.endAngle,ne=j.clockwise,K=this.getHitLineWidth();return this.hasStroke()?g.arcline(N,W,H,J,Q,ne,K,S,I):!1},r=function(S,I){var j=this._attrs,N=j.x,W=j.y,H=j.r,J=this.getHitLineWidth(),Q=this.hasFill(),ne=this.hasStroke();return Q&&ne?g.circle(N,W,H,S,I)||g.arcline(N,W,H,0,Math.PI*2,!1,J,S,I):Q?g.circle(N,W,H,S,I):ne?g.arcline(N,W,H,0,Math.PI*2,!1,J,S,I):!1},n=function(S,I){var j=this._attrs,N=this.hasFill(),W=this.hasStroke(),H=j.x,J=j.y,Q=j.rx,ne=j.ry,K=this.getHitLineWidth(),ie=Q>ne?Q:ne,de=Q>ne?1:Q/ne,we=Q>ne?ne/Q:1,Re=[S,I,1],_e=[1,0,0,0,1,0,0,0,1];e.mat3.scale(_e,_e,[de,we]),e.mat3.translate(_e,_e,[H,J]);var Ue=e.mat3.invert([],_e);return e.vec3.transformMat3(Re,Re,Ue),N&&W?g.circle(0,0,ie,Re[0],Re[1])||g.arcline(0,0,ie,0,Math.PI*2,!1,K,Re[0],Re[1]):N?g.circle(0,0,ie,Re[0],Re[1]):W?g.arcline(0,0,ie,0,Math.PI*2,!1,K,Re[0],Re[1]):!1},s=function(S,I){var j=this,N=j.hasFill(),W=j.hasStroke(),H=j._attrs,J=H.x,Q=H.y,ne=H.rs,K=H.re,ie=H.startAngle,de=H.endAngle,we=H.clockwise,Re=[1,0],_e=[S-J,I-Q],Ue=e.vec2.angleTo(Re,_e);function rt(){var Se=v.arc.nearAngle(Ue,ie,de,we);if(e.isNumberEqual(Ue,Se)){var ye=e.vec2.squaredLength(_e);if(ne*ne<=ye&&ye<=K*K)return!0}return!1}function Fe(){var Se=j.getHitLineWidth(),ye={x:Math.cos(ie)*ne+J,y:Math.sin(ie)*ne+Q},Oe={x:Math.cos(ie)*K+J,y:Math.sin(ie)*K+Q},ue={x:Math.cos(de)*ne+J,y:Math.sin(de)*ne+Q},xe={x:Math.cos(de)*K+J,y:Math.sin(de)*K+Q};return!!(g.line(ye.x,ye.y,Oe.x,Oe.y,Se,S,I)||g.line(ue.x,ue.y,xe.x,xe.y,Se,S,I)||g.arcline(J,Q,ne,ie,de,we,Se,S,I)||g.arcline(J,Q,K,ie,de,we,Se,S,I))}return N&&W?rt()||Fe():N?rt():W?Fe():!1},f=function(S,I){var j=this._attrs;if(this.get("toDraw")||!j.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==j.img)&&this._setAttrImg();var N=j.x,W=j.y,H=j.width,J=j.height;return g.rect(N,W,H,J,S,I)},u=function(S,I){var j=this._attrs,N=j.x1,W=j.y1,H=j.x2,J=j.y2,Q=this.getHitLineWidth();return this.hasStroke()?g.line(N,W,H,J,Q,S,I):!1},d=function(S,I){var j=this,N=j.get("segments"),W=j.hasFill(),H=j.hasStroke();function J(){if(!e.isEmpty(N)){for(var Q=j.getHitLineWidth(),ne=0,K=N.length;ne<K;ne++)if(N[ne].isInside(S,I,Q))return!0;return!1}}return W&&H?h(S,I,j)||J():W?h(S,I,j):H?J():!1},b=function(S,I){var j=this,N=j.hasFill(),W=j.hasStroke();function H(){var J=j._attrs,Q=J.points;if(Q.length<2)return!1;var ne=j.getHitLineWidth(),K=Q.slice(0);return Q.length>=3&&K.push(Q[0]),g.polyline(K,ne,S,I)}return N&&W?h(S,I,j)||H():N?h(S,I,j):W?H():!1},_=function(S,I){var j=this._attrs,N=j.x,W=j.y,H=j.radius||j.r,J=this.getHitLineWidth();return g.circle(N,W,H+J/2,S,I)},x=function(S,I){var j=this,N=j._attrs;if(j.hasStroke()){var W=N.points;if(W.length<2)return!1;var H=N.lineWidth;return g.polyline(W,H,S,I)}return!1},M=function(S,I){var j=this,N=j.hasFill(),W=j.hasStroke();function H(){var J=j._attrs,Q=J.x,ne=J.y,K=J.width,ie=J.height,de=J.radius,we=j.getHitLineWidth();if(de===0){var Re=we/2;return g.line(Q-Re,ne,Q+K+Re,ne,we,S,I)||g.line(Q+K,ne-Re,Q+K,ne+ie+Re,we,S,I)||g.line(Q+K+Re,ne+ie,Q-Re,ne+ie,we,S,I)||g.line(Q,ne+ie+Re,Q,ne-Re,we,S,I)}return g.line(Q+de,ne,Q+K-de,ne,we,S,I)||g.line(Q+K,ne+de,Q+K,ne+ie-de,we,S,I)||g.line(Q+K-de,ne+ie,Q+de,ne+ie,we,S,I)||g.line(Q,ne+ie-de,Q,ne+de,we,S,I)||g.arcline(Q+K-de,ne+de,de,1.5*Math.PI,2*Math.PI,!1,we,S,I)||g.arcline(Q+K-de,ne+ie-de,de,0,.5*Math.PI,!1,we,S,I)||g.arcline(Q+de,ne+ie-de,de,.5*Math.PI,Math.PI,!1,we,S,I)||g.arcline(Q+de,ne+de,de,Math.PI,1.5*Math.PI,!1,we,S,I)}return N&&W?h(S,I,j)||H():N?h(S,I,j):W?H():!1},P=function(S,I){var j=this,N=j.getBBox();if(j.hasFill()||j.hasStroke())return g.box(N.minX,N.maxX,N.minY,N.maxY,S,I)},C=function(S,I){if(!this._cfg.el)return!1;var j=this._cfg.el.getBBox();return g.box(j.x,j.x+j.width,j.y,j.y+j.height,S,I)},O={arc:i,circle:r,dom:C,ellipse:n,fan:s,image:f,line:u,path:d,marker:_,polygon:b,polyline:x,rect:M,text:P};B.exports={isPointInPath:function(S,I){var j=O[this.type];return j?j.call(this,S,I):!1}}},function(B,L,o){var e=o(2),g=o(90),v=o(75),p=o(121),c=o(232),h=c.interpolate,i=c.interpolateArray,r=function(u){this._animators=[],this._current=0,this._timer=null,this.canvas=u};function n(f,u,d){var b={},_=u.toAttrs,x=u.fromAttrs,M=u.toMatrix;if(!f.get("destroyed")){var P;for(var C in _)if(!e.isEqual(x[C],_[C]))if(C==="path"){var O=_[C],w=x[C];O.length>w.length?(O=g.parsePathString(_[C]),w=g.parsePathString(x[C]),w=g.fillPathByDiff(w,O),w=g.formatPath(w,O),u.fromAttrs.path=w,u.toAttrs.path=O):u.pathFormatted||(O=g.parsePathString(_[C]),w=g.parsePathString(x[C]),w=g.formatPath(w,O),u.fromAttrs.path=w,u.toAttrs.path=O,u.pathFormatted=!0),b[C]=[];for(var S=0;S<O.length;S++){for(var I=O[S],j=w[S],N=[],W=0;W<I.length;W++)e.isNumber(I[W])&&j&&e.isNumber(j[W])?(P=h(j[W],I[W]),N.push(P(d))):N.push(I[W]);b[C].push(N)}}else P=h(x[C],_[C]),b[C]=P(d);if(M){var H=i(u.fromMatrix,M),J=H(d);f.setMatrix(J)}f.attr(b)}}function s(f,u,d){var b=u.startTime;if(d<b+u.delay||u.isPaused)return!1;var _,x=u.duration,M=u.easing;if(d=d-b-u.delay,u.toAttrs.repeat)_=d%x/x,_=p[M](_);else if(_=d/x,_<1)_=p[M](_);else return f.attr(u.toAttrs),u.toMatrix&&f.setMatrix(u.toMatrix),!0;return n(f,u,_),!1}e.augment(r,{initTimer:function(){var u=this,d=this,b=!1,_,x,M;d._timer=v.timer(function(P){if(d._current=P,u._animators.length>0){for(var C=u._animators.length-1;C>=0;C--){if(_=u._animators[C],_.get("destroyed")){d.removeAnimator(C);continue}if(!_.get("pause").isPaused){x=_.get("animators");for(var O=x.length-1;O>=0;O--)M=x[O],b=s(_,M,P),b&&(x.splice(O,1),b=!1,M.callback&&M.callback())}x.length===0&&d.removeAnimator(C)}u.canvas.draw()}})},addAnimator:function(u){this._animators.push(u)},removeAnimator:function(u){this._animators.splice(u,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(u){u.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),B.exports=r},function(B,L,o){var e=o(2);function g(c){return c[0]===1&&c[1]===0&&c[3]===0&&c[4]===1&&c[6]===0&&c[7]===0}function v(c){return c[1]===0&&c[3]===0&&c[6]===0&&c[7]===0}function p(c,h){g(h)||(v(h)?(c[0]*=h[0],c[4]*=h[4]):e.mat3.multiply(c,c,h))}B.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(h,i){var r=this._attrs.matrix;return e.mat3.translate(r,r,[h,i]),this.clearTotalMatrix(),this.attr("matrix",r),this},rotate:function(h){var i=this._attrs.matrix;return e.mat3.rotate(i,i,h),this.clearTotalMatrix(),this.attr("matrix",i),this},scale:function(h,i){var r=this._attrs.matrix;return e.mat3.scale(r,r,[h,i]),this.clearTotalMatrix(),this.attr("matrix",r),this},rotateAtStart:function(h){var i=this._attrs.x||this._cfg.attrs.x,r=this._attrs.y||this._cfg.attrs.y;return Math.abs(h)>Math.PI*2&&(h=h/180*Math.PI),this.transform([["t",-i,-r],["r",h],["t",i,r]])},move:function(h,i){var r=this.get("x")||0,n=this.get("y")||0;return this.translate(h-r,i-n),this.set("x",h),this.set("y",i),this},transform:function(h){var i=this,r=this._attrs.matrix;return e.each(h,function(n){switch(n[0]){case"t":i.translate(n[1],n[2]);break;case"s":i.scale(n[1],n[2]);break;case"r":i.rotate(n[1]);break;case"m":i.attr("matrix",e.mat3.multiply([],r,n[1])),i.clearTotalMatrix();break;default:break}}),i},setTransform:function(h){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(h)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(h){return this.attr("matrix",h),this.clearTotalMatrix(),this},apply:function(h,i){var r;return i?r=this._getMatrixByRoot(i):r=this.attr("matrix"),e.vec3.transformMat3(h,h,r),this},_getMatrixByRoot:function(h){var i=this;h=h||i;for(var r=i,n=[];r!==h;)n.unshift(r),r=r.get("parent");n.unshift(r);var s=[1,0,0,0,1,0,0,0,1];return e.each(n,function(f){e.mat3.multiply(s,f.attr("matrix"),s)}),s},getTotalMatrix:function(){var h=this._cfg.totalMatrix;if(!h){h=[1,0,0,0,1,0,0,0,1];var i=this._cfg.parent;if(i){var r=i.getTotalMatrix();p(h,r)}p(h,this.attr("matrix")),this._cfg.totalMatrix=h}return h},clearTotalMatrix:function(){},invert:function(h){var i=this.getTotalMatrix();if(v(i))h[0]/=i[0],h[1]/=i[4];else{var r=e.mat3.invert([],i);r&&e.vec3.transformMat3(h,h,r)}return this},resetTransform:function(h){var i=this.attr("matrix");g(i)||h.transform(i[0],i[1],i[3],i[4],i[6],i[7])}}},function(B,L,o){B.exports={painter:o(368)}},function(B,L,o){var e=o(2),g=o(369),v=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],p=function(){function c(i){if(!i)return null;var r=e.uniqueId("canvas_"),n=e.createDom('<canvas id="'+r+'"></canvas>');return i.appendChild(n),this.type="canvas",this.canvas=n,this.context=n.getContext("2d"),this.toDraw=!1,this}var h=c.prototype;return h.beforeDraw=function(){var r=this.canvas;this.context&&this.context.clearRect(0,0,r.width,r.height)},h.draw=function(r){var n=this;function s(){n.animateHandler=e.requestAnimationFrame(function(){n.animateHandler=void 0,n.toDraw&&s()}),n.beforeDraw();try{n._drawGroup(r)}catch(f){console.warn("error in draw canvas, detail as:"),console.warn(f),n.toDraw=!1}n.toDraw=!1}n.animateHandler?n.toDraw=!0:s()},h.drawSync=function(r){this.beforeDraw(),this._drawGroup(r)},h._drawGroup=function(r){if(!(r._cfg.removed||r._cfg.destroyed||!r._cfg.visible)){var n=this,s=r._cfg.children,f=null;this.setContext(r);for(var u=0;u<s.length;u++)f=s[u],s[u].isGroup?n._drawGroup(f):n._drawShape(f);this.restoreContext(r)}},h._drawShape=function(r){r._cfg.removed||r._cfg.destroyed||!r._cfg.visible||(this.setContext(r),r.drawInner(this.context),this.restoreContext(r),r._cfg.attrs=r._attrs,r._cfg.hasUpdate=!1)},h.setContext=function(r){var n=this.context,s=r._attrs.clip;n.save(),s&&(s.resetTransform(n),s.createPath(n),n.clip()),this.resetContext(r),r.resetTransform(n)},h.restoreContext=function(){this.context.restore()},h.resetContext=function(r){var n=this.context,s=r._attrs;if(!r.isGroup){for(var f in s)if(v.indexOf(f)>-1){var u=s[f];f==="fillStyle"&&(u=g.parseStyle(u,r,n)),f==="strokeStyle"&&(u=g.parseStyle(u,r,n)),f==="lineDash"&&n.setLineDash?e.isArray(u)?n.setLineDash(u):e.isString(u)&&n.setLineDash(u.split(" ")):n[f]=u}}},c}();B.exports=p},function(B,L,o){var e=o(2),g=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,v=/[^\s\,]+/ig,p=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,c=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/ig,r={};function n(d,b){var _=d.match(i);e.each(_,function(x){x=x.split(":"),b.addColorStop(x[0],x[1])})}function s(d,b,_){var x=p.exec(d),M=e.mod(e.toRadian(parseFloat(x[1])),Math.PI*2),P=x[2],C=b.getBBox(),O,w;M>=0&&M<.5*Math.PI?(O={x:C.minX,y:C.minY},w={x:C.maxX,y:C.maxY}):.5*Math.PI<=M&&M<Math.PI?(O={x:C.maxX,y:C.minY},w={x:C.minX,y:C.maxY}):Math.PI<=M&&M<1.5*Math.PI?(O={x:C.maxX,y:C.maxY},w={x:C.minX,y:C.minY}):(O={x:C.minX,y:C.maxY},w={x:C.maxX,y:C.minY});var S=Math.tan(M),I=S*S,j=(w.x-O.x+S*(w.y-O.y))/(I+1)+O.x,N=S*(w.x-O.x+S*(w.y-O.y))/(I+1)+O.y,W=_.createLinearGradient(O.x,O.y,j,N);return n(P,W),W}function f(d,b,_){var x=c.exec(d),M=parseFloat(x[1]),P=parseFloat(x[2]),C=parseFloat(x[3]),O=x[4];if(C===0){var w=O.match(i);return w[w.length-1].split(":")[1]}var S=b.getBBox(),I=S.maxX-S.minX,j=S.maxY-S.minY,N=Math.sqrt(I*I+j*j)/2,W=_.createRadialGradient(S.minX+I*M,S.minY+j*P,C*N,S.minX+I/2,S.minY+j/2,N);return n(O,W),W}function u(d,b,_){if(b.get("patternSource")&&b.get("patternSource")===d)return b.get("pattern");var x,M,P=h.exec(d),C=P[1],O=P[2];function w(){x=_.createPattern(M,C),b.setSilent("pattern",x),b.setSilent("patternSource",d)}switch(C){case"a":C="repeat";break;case"x":C="repeat-x";break;case"y":C="repeat-y";break;case"n":C="no-repeat";break;default:C="no-repeat"}return M=new Image,O.match(/^data:/i)||(M.crossOrigin="Anonymous"),M.src=O,M.complete?w():(M.onload=w,M.src=M.src),x}B.exports={parsePath:function(b){if(b=b||[],e.isArray(b))return b;if(e.isString(b))return b=b.match(g),e.each(b,function(_,x){if(_=_.match(v),_[0].length>1){var M=_[0].charAt(0);_.splice(1,0,_[0].substr(1)),_[0]=M}e.each(_,function(P,C){isNaN(P)||(_[C]=+P)}),b[x]=_}),b},parseStyle:function(b,_,x){if(e.isString(b)){if(b[1]==="("||b[2]==="("){if(b[0]==="l")return s(b,_,x);if(b[0]==="r")return f(b,_,x);if(b[0]==="p")return u(b,_,x)}return b}},numberToColor:function(b){var _=r[b];if(!_){for(var x=b.toString(16),M=x.length;M<6;M++)x="0"+x;_="#"+x,r[b]=_}return _}}},function(B,L,o){B.exports={canvas:o(367),svg:o(378)}},function(B,L,o){var e=o(2),g=o(374),v=o(376),p=o(372),c=o(373),h=o(375),i=function(){function r(s){var f=document.createElementNS("http://www.w3.org/2000/svg","defs"),u=e.uniqueId("defs_");f.id=u,s.appendChild(f),this.children=[],this.defaultArrow={},this.el=f,this.canvas=s}var n=r.prototype;return n.find=function(f,u){for(var d=this.children,b=null,_=0;_<d.length;_++)if(d[_].match(f,u)){b=d[_].id;break}return b},n.findById=function(f){for(var u=this.children,d=null,b=0;b<u.length;b++)if(u[b].id===f){d=u[b];break}return d},n.add=function(f){this.children.push(f),f.canvas=this.canvas,f.parent=this},n.getDefaultArrow=function(f,u){var d=f.stroke||f.strokeStyle;if(this.defaultArrow[d])return this.defaultArrow[d].id;var b=new p(f,u);return this.defaultArrow[d]=b,this.el.appendChild(b.el),b.id},n.addGradient=function(f){var u=new g(f);return this.el.appendChild(u.el),this.add(u),u.id},n.addArrow=function(f,u){var d=new p(f,u);return this.el.appendChild(d.el),d.id},n.addShadow=function(f){var u=new v(f);return this.el.appendChild(u.el),this.add(u),u.id},n.addPattern=function(f){var u=new h(f);return this.el.appendChild(u.el),this.add(u),u.id},n.addClip=function(f){var u=new c(f);return this.el.appendChild(u.el),this.add(u),u.id},r}();B.exports=i},function(B,L,o){var e=o(2),g=function(){function v(c,h){var i=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=e.uniqueId("marker_");i.setAttribute("id",r);var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("stroke","none"),n.setAttribute("fill",c.stroke||"#000"),i.appendChild(n),i.setAttribute("overflow","visible"),i.setAttribute("orient","auto-start-reverse"),this.el=i,this.child=n,this.id=r,this.cfg=c[h==="marker-start"?"startArrow":"endArrow"],this.stroke=c.stroke||"#000",this.cfg===!0?this._setDefaultPath(h,n):this._setMarker(c.lineWidth,n),this}var p=v.prototype;return p.match=function(){return!1},p._setDefaultPath=function(h,i){var r=this.el;i.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),r.setAttribute("refX",3),r.setAttribute("refY",3)},p._setMarker=function(h,i){var r=this.el,n=this.cfg.path,s=this.cfg.d;e.isArray(n)&&(n=n.map(function(f){return f.join(" ")}).join("")),i.setAttribute("d",n),r.appendChild(i),s&&r.setAttribute("refX",s/h)},p.update=function(h){var i=this.child;i.attr?i.attr("fill",h):i.setAttribute("fill",h)},v}();B.exports=g},function(B,L,o){var e=o(2),g=function(){function v(c){this.type="clip";var h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=h,this.id=e.uniqueId("clip_"),h.id=this.id;var i=c._cfg.el;return h.appendChild(i.cloneNode(!0)),this.cfg=c,this}var p=v.prototype;return p.match=function(){return!1},p.remove=function(){var h=this.el;h.parentNode.removeChild(h)},v}();B.exports=g},function(B,L,o){var e=o(2),g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,v=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,p=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function c(n){var s=n.match(p);if(!s)return"";var f="";return s.sort(function(u,d){return u=u.split(":"),d=d.split(":"),Number(u[0])-Number(d[0])}),e.each(s,function(u){u=u.split(":"),f+='<stop offset="'+u[0]+'" stop-color="'+u[1]+'"></stop>'}),f}function h(n,s){var f=g.exec(n),u=e.mod(e.toRadian(parseFloat(f[1])),Math.PI*2),d=f[2],b,_;u>=0&&u<.5*Math.PI?(b={x:0,y:0},_={x:1,y:1}):.5*Math.PI<=u&&u<Math.PI?(b={x:1,y:0},_={x:0,y:1}):Math.PI<=u&&u<1.5*Math.PI?(b={x:1,y:1},_={x:0,y:0}):(b={x:0,y:1},_={x:1,y:0});var x=Math.tan(u),M=x*x,P=(_.x-b.x+x*(_.y-b.y))/(M+1)+b.x,C=x*(_.x-b.x+x*(_.y-b.y))/(M+1)+b.y;s.setAttribute("x1",b.x),s.setAttribute("y1",b.y),s.setAttribute("x2",P),s.setAttribute("y2",C),s.innerHTML=c(d)}function i(n,s){var f=v.exec(n),u=parseFloat(f[1]),d=parseFloat(f[2]),b=parseFloat(f[3]),_=f[4];s.setAttribute("cx",u),s.setAttribute("cy",d),s.setAttribute("r",b),s.innerHTML=c(_)}var r=function(){function n(f){var u=null,d=e.uniqueId("gradient_");return f.toLowerCase()[0]==="l"?(u=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),h(f,u)):(u=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),i(f,u)),u.setAttribute("id",d),this.el=u,this.id=d,this.cfg=f,this}var s=n.prototype;return s.match=function(u,d){return this.cfg===d},n}();B.exports=r},function(B,L,o){var e=o(2),g=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,v=function(){function p(h){var i=document.createElementNS("http://www.w3.org/2000/svg","pattern");i.setAttribute("patternUnits","userSpaceOnUse");var r=document.createElementNS("http://www.w3.org/2000/svg","image");i.appendChild(r);var n=e.uniqueId("pattern_");i.id=n,this.el=i,this.id=n,this.cfg=h;var s=g.exec(h),f=s[2];r.setAttribute("href",f);var u=new Image;f.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=f;function d(){console.log(u.width,u.height),i.setAttribute("width",u.width),i.setAttribute("height",u.height)}return u.complete?d():(u.onload=d,u.src=u.src),this}var c=p.prototype;return c.match=function(i,r){return this.cfg===r},p}();B.exports=v},function(B,L,o){var e=o(2),g={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},v={x:"-40%",y:"-40%",width:"200%",height:"200%"},p=function(){function c(i){this.type="filter";var r=document.createElementNS("http://www.w3.org/2000/svg","filter");return e.each(v,function(n,s){r.setAttribute(s,n)}),this.el=r,this.id=e.uniqueId("filter_"),this.el.id=this.id,this.cfg=i,this._parseShadow(i,r),this}var h=c.prototype;return h.match=function(r,n){if(this.type!==r)return!1;var s=!0,f=this.cfg;return e.each(Object.keys(f),function(u){if(f[u]!==n[u])return s=!1,!1}),s},h.update=function(r,n){var s=this.cfg;return s[g[r]]=n,this._parseShadow(s,this.el),this},h._parseShadow=function(r,n){var s=`<feDropShadow 
      dx="`+(r.dx||0)+`" 
      dy="`+(r.dy||0)+`" 
      stdDeviation="`+(r.blur?r.blur/10:0)+`"
      flood-color="`+(r.color?r.color:"#000")+`"
      flood-opacity="`+(r.opacity?r.opacity:1)+`"
      />`;n.innerHTML=s},c}();B.exports=p},function(B,L){var o={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};B.exports=function(g,v,p){var c=p.target||p.srcElement;if(!o[c.tagName]){for(var h=c.parentNode;h&&!o[h.tagName];)h=h.parentNode;c=h}return this._cfg.el===c?this:this.find(function(i){return i._cfg&&i._cfg.el===c})}},function(B,L,o){B.exports={painter:o(379),getShape:o(377)}},function(B,L,o){var e=o(2),g=o(39),v=g.parseRadius,p=o(87),c=o(371),h={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},i=.3,r={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},n={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},s={left:"left",start:"left",center:"middle",right:"end",end:"end"},f=function(){function u(b){if(!b)return null;var _=e.uniqueId("canvas_"),x=e.createDom('<svg id="'+_+'"></svg>');return b.appendChild(x),this.type="svg",this.canvas=x,this.context=new c(x),this.toDraw=!1,this}var d=u.prototype;return d.draw=function(_){var x=this;function M(){x.animateHandler=e.requestAnimationFrame(function(){x.animateHandler=void 0,x.toDraw&&M()});try{_.resetMatrix(),x._drawGroup(_,!1)}catch(P){console.warn("error in draw canvas, detail as:"),console.warn(P),x.toDraw=!1}x.toDraw=!1}x.animateHandler?x.toDraw=!0:M()},d.drawSync=function(_){this._drawChildren(_,!1)},d._drawGroup=function(_,x){var M=_._cfg;M.removed||M.destroyed||(!M.el&&M.attrs&&(x=!0),M.tobeRemoved&&(e.each(M.tobeRemoved,function(P){P.parentNode&&P.parentNode.removeChild(P)}),M.tobeRemoved=[]),this._drawShape(_,x),M.children&&M.children.length>0&&this._drawChildren(_,x))},d._drawChildren=function(_,x){var M=this,P=_._cfg.children,C;if(!!P){if(_._cfg.el&&!x){var O=_._cfg.el.childNodes.length+1;O!==0&&O!==P.length&&(x=!0)}for(var w=0;w<P.length;w++)C=P[w],C.isGroup?M._drawGroup(C,x):M._drawShape(C,x)}},d._drawShape=function(_,x){var M=this,P=_._attrs,C=_._cfg,O=C.el;if(C.removed||C.destroyed){O&&O.parentNode.removeChild(C.el);return}if(x&&O&&(O.parentNode&&O.parentNode.removeChild(O),O=null),!O&&C.parent&&(M._createDom(_),M._updateShape(_)),O=C.el,C.visible===!1){O.setAttribute("visibility","hidden");return}C.visible&&O.hasAttribute("visibility")&&O.removeAttribute("visibility"),C.hasUpdate&&M._updateShape(_),P.clip&&P.clip._cfg.hasUpdate&&M._updateShape(P.clip)},d._updateShape=function(_){var x=this,M=_._attrs,P=_._cfg.attrs;if(!!P){if(_._cfg.el||x._createDom(_),"clip"in M&&this._setClip(_,M.clip),("shadowOffsetX"in M||"shadowOffsetY"in M||"shadowBlur"in M||"shadowColor"in M)&&this._setShadow(_),_.type==="text"){x._updateText(_);return}_.type==="fan"&&x._updateFan(_),_.type==="marker"&&_._cfg.el.setAttribute("d",x._assembleMarker(M)),_.type==="rect"&&_._cfg.el.setAttribute("d",x._assembleRect(M));for(var C in M)M[C]!==P[C]&&x._setAttribute(_,C,M[C]);_._cfg.attrs=e.deepMix({},_._attrs),_._cfg.hasUpdate=!1}},d._setAttribute=function(_,x,M){var P=_.type,C=_._attrs,O=_._cfg.el,w=this.context;if(!((P==="marker"||P==="rect")&&~["x","y","radius","r"].indexOf(x))){if(~["circle","ellipse"].indexOf(P)&&~["x","y"].indexOf(x)){O.setAttribute("c"+x,parseInt(M,10));return}if(P==="polygon"&&x==="points"){(!M||M.length===0)&&(M=""),e.isArray(M)&&(M=M.map(function(I){return I[0]+","+I[1]}),M=M.join(" ")),O.setAttribute("points",M);return}if(x==="path"&&e.isArray(M)){O.setAttribute("d",this._formatPath(M));return}if(x==="img"){this._setImage(_,M);return}if(x==="transform"){if(!M){O.removeAttribute("transform");return}this._setTransform(_);return}if(x==="rotate"){if(!M){O.removeAttribute("transform");return}this._setTransform(_);return}if(x==="matrix"){this._setTransform(_);return}if(x==="fillStyle"||x==="strokeStyle"){this._setColor(_,x,M);return}if(x!=="clip"){if(~x.indexOf("Arrow")){if(x=r[x],!M)_._cfg[x]=null,O.removeAttribute(x);else{var S=null;typeof M=="boolean"?S=w.getDefaultArrow(C,x):S=w.addArrow(C,x),O.setAttribute(x,"url(#"+S+")"),_._cfg[x]=S}return}x==="html"&&(typeof M=="string"?O.innerHTML=M:(O.innerHTML="",O.appendChild(M))),r[x]&&O.setAttribute(r[x],M)}}},d._createDom=function(_){var x=h[_.type],M=_._attrs;if(!x)throw new Error("the type"+_.type+"is not supported by svg");var P=document.createElementNS("http://www.w3.org/2000/svg",x);return _._cfg.el=P,_._cfg.parent&&_._cfg.parent.get("el").appendChild(P),_._cfg.attrs={},_.type==="text"?(P.setAttribute("paint-order","stroke"),P.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!M.stroke&&!M.strokeStyle&&P.setAttribute("stroke","none"),!M.fill&&!M.fillStyle&&P.setAttribute("fill","none")),P},d._assembleMarker=function(_){var x=_.r;if(typeof _.r=="undefined"&&(x=_.radius),isNaN(Number(_.x))||isNaN(Number(_.y))||isNaN(Number(x)))return"";var M="";return typeof _.symbol=="function"?M=_.symbol(_.x,_.y,x):M=p.Symbols[_.symbol||"circle"](_.x,_.y,x),e.isArray(M)&&(M=M.map(function(P){return P.join(" ")}).join("")),M},d._assembleRect=function(_){var x=_.x,M=_.y,P=_.width,C=_.height,O=_.radius;if(!O)return"M "+x+","+M+" l "+P+",0 l 0,"+C+" l"+-P+" 0 z";var w=v(O);e.isArray(O)?O.length===1?w.r1=w.r2=w.r3=w.r4=O[0]:O.length===2?(w.r1=w.r3=O[0],w.r2=w.r4=O[1]):O.length===3?(w.r1=O[0],w.r2=w.r4=O[1],w.r3=O[2]):(w.r1=O[0],w.r2=O[1],w.r3=O[2],w.r4=O[3]):w.r1=w.r2=w.r3=w.r4=O;var S=[["M "+(x+w.r1)+","+M],["l "+(P-w.r1-w.r2)+",0"],["a "+w.r2+","+w.r2+",0,0,1,"+w.r2+","+w.r2],["l 0,"+(C-w.r2-w.r3)],["a "+w.r3+","+w.r3+",0,0,1,"+-w.r3+","+w.r3],["l "+(w.r3+w.r4-P)+",0"],["a "+w.r4+","+w.r4+",0,0,1,"+-w.r4+","+-w.r4],["l 0,"+(w.r4+w.r1-C)],["a "+w.r1+","+w.r1+",0,0,1,"+w.r1+","+-w.r1],["z"]];return S.join(" ")},d._formatPath=function(_){return _=_.map(function(x){return x.join(" ")}).join(""),~_.indexOf("NaN")?"":_},d._setTransform=function(_){for(var x=_._attrs.matrix,M=_._cfg.el,P=[],C=0;C<9;C+=3)P.push(x[C]+","+x[C+1]);P=P.join(","),P.indexOf("NaN")===-1?M.setAttribute("transform","matrix("+P+")"):console.warn("invalid matrix:",x)},d._setImage=function(_,x){var M=_._attrs,P=_._cfg.el;if(e.isString(x))P.setAttribute("href",x);else if(x instanceof Image)M.width||(P.setAttribute("width",x.width),_._attrs.width=x.width),M.height||(P.setAttribute("height",x.height),_._attrs.height=x.height),P.setAttribute("href",x.src);else if(x instanceof HTMLElement&&e.isString(x.nodeName)&&x.nodeName.toUpperCase()==="CANVAS")P.setAttribute("href",x.toDataURL());else if(x instanceof ImageData){var C=document.createElement("canvas");C.setAttribute("width",x.width),C.setAttribute("height",x.height),C.getContext("2d").putImageData(x,0,0),M.width||(P.setAttribute("width",x.width),_._attrs.width=x.width),M.height||(P.setAttribute("height",x.height),_._attrs.height=x.height),P.setAttribute("href",C.toDataURL())}},d._updateFan=function(_){function x(K,ie,de){return{x:ie*Math.cos(K)+de.x,y:ie*Math.sin(K)+de.y}}var M=_._attrs,P=_._cfg,C={x:M.x,y:M.y},O=[],w=M.startAngle,S=M.endAngle;e.isNumberEqual(S-w,Math.PI*2)&&(S-=1e-5);var I=x(w,M.re,C),j=x(S,M.re,C),N=S>w?1:0,W=Math.abs(S-w)>Math.PI?1:0,H=M.rs,J=M.re,Q=x(w,M.rs,C),ne=x(S,M.rs,C);M.rs>0?(O.push("M "+j.x+","+j.y),O.push("L "+ne.x+","+ne.y),O.push("A "+H+","+H+",0,"+W+","+(N===1?0:1)+","+Q.x+","+Q.y),O.push("L "+I.x+" "+I.y)):(O.push("M "+C.x+","+C.y),O.push("L "+I.x+","+I.y)),O.push("A "+J+","+J+",0,"+W+","+N+","+j.x+","+j.y),M.rs>0?O.push("L "+ne.x+","+ne.y):O.push("Z"),P.el.setAttribute("d",O.join(" "))},d._updateText=function(_){var x=this,M=_._attrs,P=_._cfg.attrs,C=_._cfg.el;this._setFont(_);for(var O in M)if(M[O]!==P[O]){if(O==="text"){x._setText(_,""+M[O]);continue}if(O==="fillStyle"||O==="strokeStyle"){this._setColor(_,O,M[O]);continue}if(O==="matrix"){this._setTransform(_);continue}r[O]&&C.setAttribute(r[O],M[O])}_._cfg.attrs=Object.assign({},_._attrs),_._cfg.hasUpdate=!1},d._setFont=function(_){var x=_.get("el"),M=_._attrs,P=M.fontSize;x.setAttribute("alignment-baseline",n[M.textBaseline]||"baseline"),x.setAttribute("text-anchor",s[M.textAlign]||"left"),P&&+P<12&&(M.matrix=[1,0,0,0,1,0,0,0,1],_.transform([["t",-M.x,-M.y],["s",+P/12,+P/12],["t",M.x,M.y]]))},d._setText=function(_,x){var M=_._cfg.el,P=_._attrs.textBaseline||"bottom";if(!x)M.innerHTML="";else if(~x.indexOf(`
`)){var C=_._attrs.x,O=x.split(`
`),w=O.length-1,S="";e.each(O,function(I,j){j===0?P==="alphabetic"?S+='<tspan x="'+C+'" dy="'+-w+'em">'+I+"</tspan>":P==="top"?S+='<tspan x="'+C+'" dy="0.9em">'+I+"</tspan>":P==="middle"?S+='<tspan x="'+C+'" dy="'+-(w-1)/2+'em">'+I+"</tspan>":P==="bottom"?S+='<tspan x="'+C+'" dy="-'+(w+i)+'em">'+I+"</tspan>":P==="hanging"&&(S+='<tspan x="'+C+'" dy="'+(-(w-1)-i)+'em">'+I+"</tspan>"):S+='<tspan x="'+C+'" dy="1em">'+I+"</tspan>"}),M.innerHTML=S}else M.innerHTML=x},d._setClip=function(_,x){var M=_._cfg.el;if(!x){M.removeAttribute("clip-path");return}if(M.hasAttribute("clip-path"))x._cfg.hasUpdate&&this._updateShape(x);else{this._createDom(x),this._updateShape(x);var P=this.context.addClip(x);M.setAttribute("clip-path","url(#"+P+")")}},d._setColor=function(_,x,M){var P=_._cfg.el,C=this.context;if(!M){P.setAttribute(r[x],"none");return}if(M=M.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(M)){var O=C.find("gradient",M);O||(O=C.addGradient(M)),P.setAttribute(r[x],"url(#"+O+")")}else if(/^[p,P]{1}[\s]*\(/.test(M)){var w=C.find("pattern",M);w||(w=C.addPattern(M)),P.setAttribute(r[x],"url(#"+w+")")}else P.setAttribute(r[x],M)},d._setShadow=function(_){var x=_._cfg.el,M=_._attrs,P={dx:M.shadowOffsetX,dy:M.shadowOffsetY,blur:M.shadowBlur,color:M.shadowColor};if(!P.dx&&!P.dy&&!P.blur&&!P.color)x.removeAttribute("filter");else{var C=this.context.find("filter",P);C||(C=this.context.addShadow(P,this)),x.setAttribute("filter","url(#"+C+")")}},u}();B.exports=f},function(B,L,o){var e=o(8);e.Arc=o(166),e.Circle=o(167),e.Dom=o(168),e.Ellipse=o(169),e.Fan=o(170),e.Image=o(171),e.Line=o(172),e.Marker=o(87),e.Path=o(175),e.Polygon=o(176),e.Polyline=o(177),e.Rect=o(178),e.Text=o(179),B.exports=e},function(B,L,o){var e=o(591),g=e.detect,v=o(1),p=o(385),c=o(183),h=o(387),i=o(392),r=g(),n=r&&r.name==="firefox",s=function f(u){f.superclass.constructor.call(this,u)};s.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas",supportCSSTransform:!1},v.extend(s,c),v.augment(s,p,{init:function(){s.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this.registerEvent(this)},_scale:function(){if(this._cfg.renderType!=="svg"){var u=this.get("pixelRatio");this.scale(u,u)}},_setGlobalParam:function(){var u=this.get("renderer")||"canvas";u==="svg"?this.set("pixelRatio",1):this.get("pixelRatio")||this.set("pixelRatio",v.getRatio()),this._cfg.renderType=u;var d=i[u];this._cfg.renderer=d,this._cfg.canvas=this;var b=new h(this);this._cfg.timeline=b},_setContainer:function(){var u=this.get("containerId"),d=this.get("containerDOM");d||(d=document.getElementById(u),this.set("containerDOM",d)),v.modifyCSS(d,{position:"relative"})},_initPainter:function(){var u=this.get("containerDOM"),d=new this._cfg.renderer.painter(u);this._cfg.painter=d,this._cfg.canvasDOM=this._cfg.el=d.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var u=this.get("canvasDOM"),d=this.get("widthCanvas"),b=this.get("heightCanvas"),_=this.get("widthStyle"),x=this.get("heightStyle");u.style.width=_,u.style.height=x,u.setAttribute("width",d),u.setAttribute("height",b)},getWidth:function(){var u=this.get("pixelRatio"),d=this.get("width");return d*u},getHeight:function(){var u=this.get("pixelRatio"),d=this.get("height");return d*u},changeSize:function(u,d){var b=this.get("pixelRatio"),_=u*b,x=d*b;this.set("widthCanvas",_),this.set("heightCanvas",x),this.set("widthStyle",u+"px"),this.set("heightStyle",d+"px"),this.set("width",u),this.set("height",d),this._resize()},getPointByEvent:function(u){var d=this.get("supportCSSTransform");if(d){var b=this.get("pixelRatio")||1;if(n&&!v.isNil(u.layerX)&&u.layerX!==u.offsetX)return{x:u.layerX*b,y:u.layerY*b};if(!v.isNil(u.offsetX))return{x:u.offsetX*b,y:u.offsetY*b}}var _=this.getClientByEvent(u),x=_.x,M=_.y;return this.getPointByClient(x,M)},getClientByEvent:function(u){var d=u;return u.touches&&(u.type==="touchend"?d=u.changedTouches[0]:d=u.touches[0]),{x:d.clientX,y:d.clientY}},getPointByClient:function(u,d){var b=this.get("el"),_=this.get("pixelRatio")||1,x=b.getBoundingClientRect();return{x:(u-x.left)*_,y:(d-x.top)*_}},getClientByPoint:function(u,d){var b=this.get("el"),_=b.getBoundingClientRect(),x=this.get("pixelRatio")||1;return{clientX:u/x+_.left,clientY:d/x+_.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(u,d,b){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,u,d,b):s.superclass.getShape.call(this,u,d)},getRenderer:function(){return this._cfg.renderType},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var u=this._cfg,d=u.containerDOM,b=u.canvasDOM;b&&d&&d.removeChild(b),u.timeline.stop(),s.superclass.destroy.call(this)}}),B.exports=s},function(B,L,o){var e=o(1),g=o(91),v=o(182),p=["click","mousedown","mouseup","dblclick","contextmenu","mouseout","mouseover","mousemove","dragstart","drag","dragend","dragenter","dragleave","drop"],c=function(){};e.augment(c,v,{emit:function(i,r){var n=arguments;if(v.prototype.emit.apply(this,n),!(n.length>=2&&n[1]instanceof g&&n[1].propagationStopped)&&p.indexOf(i)>=0&&r.target===this)for(var s=this._cfg.parent;s&&!s.get("destroyed");)s.emit.apply(s,n),s=s._cfg.parent}}),B.exports=c},function(B,L,o){function e(){return e=Object.assign||function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},e.apply(this,arguments)}var g=o(1),v={delay:"delay",repeat:"repeat",rotate:"rotate"};function p(i,r){var n={},s=r._attrs;for(var f in i.attrs)n[f]=s[f];return n}function c(i,r){var n={matrix:null,attrs:{}},s=r._attrs;for(var f in i)f==="transform"?n.matrix=g.transform(r.getMatrix(),i[f]):f==="matrix"?n.matrix=i[f]:g.isColorProp(f)&&g.isGradientColor(i[f])?n.attrs[f]=i[f]:!v[f]&&s[f]!==i[f]&&(f==="rotate"&&(r._attrs.rotate=r._attrs.rotate||0),n.attrs[f]=i[f]);return n}function h(i,r){if(r.onFrame)return i;var n=r.delay,s=Object.prototype.hasOwnProperty;return g.each(r.toAttrs,function(f,u){g.each(i,function(d){n<d.startTime+d.duration&&s.call(d.toAttrs,u)&&(delete d.toAttrs[u],delete d.fromAttrs[u])})}),r.toMatrix&&g.each(i,function(f){n<f.startTime+f.duration&&f.toMatrix&&delete f.toMatrix}),i}B.exports={animate:function(r,n,s,f,u){u===void 0&&(u=0);var d=this;d.set("animating",!0);var b=d.get("timeline");b||(b=d.get("canvas").get("timeline"),d.setSilent("timeline",b));var _=d.get("animators")||[];b._timer||b.initTimer(),g.isNumber(f)&&(u=f,f=null),g.isFunction(s)?(f=s,s="easeLinear"):s=s||"easeLinear";var x={repeat:r.repeat,duration:n,easing:s,callback:f,delay:u,startTime:b.getTime(),id:g.uniqueId()};if(r.onFrame)x.onFrame=r.onFrame;else{var M=c(r,d);x=e({fromAttrs:p(M,d),toAttrs:M.attrs,fromMatrix:g.clone(d.getMatrix()),toMatrix:M.matrix},x)}_.length>0?_=h(_,x):b.addAnimator(d),_.push(x),d.setSilent("animators",_),d.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var r=this,n=this.get("animators");g.each(n,function(s){r.attr(s.toAttrs||s.onFrame(1)),s.toMatrix&&r.attr("matrix",s.toMatrix),s.callback&&s.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var r=this,n=r.get("timeline");return r.setSilent("pause",{isPaused:!0,pauseTime:n.getTime()}),r},resumeAnimate:function(){var r=this,n=r.get("timeline"),s=n.getTime(),f=r.get("animators"),u=r.get("pause").pauseTime;return g.each(f,function(d){d.startTime=d.startTime+(s-u),d._paused=!1,d._pauseTime=null}),r.setSilent("pause",{isPaused:!1}),r.setSilent("animators",f),r}}},function(B,L,o){var e=o(1);B.exports={canFill:!1,canStroke:!1,initAttrs:function(v){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(e.assign(this.getDefaultAttrs(),v)),this},getDefaultAttrs:function(){return{}},attr:function(v,p){var c=this;if(arguments.length===0)return c._attrs;if(e.isObject(v)){for(var h in v)this._setAttr(h,v[h]);return c.clearBBox(),this._cfg.hasUpdate=!0,c}return arguments.length===2?(this._setAttr(v,p),c.clearBBox(),this._cfg.hasUpdate=!0,c):c._attrs[v]},_setAttr:function(v,p){var c=this,h=this._attrs;if(h[v]=p,v==="fill"||v==="stroke"){h[v+"Style"]=p;return}if(v==="opacity"){h.globalAlpha=p;return}if(v==="clip"&&p){c._setClip(p);return}if(v==="path"&&c._afterSetAttrPath){c._afterSetAttrPath(p);return}if(v==="transform"){c.transform(p);return}v==="rotate"&&c.rotateAtStart(p)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(v){v._cfg.renderer=this._cfg.renderer,v._cfg.canvas=this._cfg.canvas,v._cfg.parent=this._cfg.parent,v.hasFill=function(){return!0}}}},function(B,L,o){var e=o(1),g=o(91),v=["mousedown","mouseup","dblclick","mouseenter","mouseout","mouseover","mousemove","mouseleave"],p=function(){var d=new Date;return d.getTime()},c=40,h=0,i=null,r=null,n={},s=null,f=0;B.exports={registerEvent:function(){var d=this,b=this.get("el");e.each(v,function(_){b.addEventListener(_,function(x){d._triggerEvent(_,x)},!1)}),b.addEventListener("touchstart",function(_){e.isEmpty(_.touches)||d._triggerEvent("touchstart",_.touches[0])},!1),b.addEventListener("touchmove",function(_){e.isEmpty(_.touches)||d._triggerEvent("touchmove",_.touches[0])},!1),b.addEventListener("touchend",function(_){e.isEmpty(_.changedTouches)||d._triggerEvent("touchend",_.changedTouches[0])},!1),b.addEventListener("contextmenu",function(_){d._triggerEvent("contextmenu",_),_.preventDefault()},!1)},_getEmitter:function(d,b){if(d)if(e.isEmpty(d._getEvents())){var _=d.get("parent");if(_&&!b.propagationStopped)return this._getEmitter(_,b)}else return d},_getEventObj:function(d,b,_,x){var M=new g(d,b,!0,!0);return M.x=_.x,M.y=_.y,M.clientX=b.clientX,M.clientY=b.clientY,M.currentTarget=x,M.target=x,M},_triggerEvent:function(d,b){var _=this,x=_.getPointByEvent(b),M=_.getShape(x.x,x.y,b),P=_.get("el");if(s&&_.getRenderer()==="svg"&&(M=_.getShape(x.x,x.y)),d==="mousemove"){if(i&&i!==M&&(_._emitEvent("mouseout",b,x,i),_._emitEvent("mouseleave",b,x,i),s&&_._emitEvent("dragleave",b,x,i),(!M||M.destroyed)&&(P.style.cursor="default")),s&&(_._emitEvent("drag",b,x,s),_._emitEvent("mousemove",b,x,M)),M){if(!s)if(r===M){var C=p(),O=C-f,w=n.x-b.clientX,S=n.y-b.clientY,I=w*w+S*S;O>120||I>c?(s=M,r=null,this._emitEvent("dragstart",b,x,M)):_._emitEvent("mousemove",b,x,M)}else _._emitEvent("mousemove",b,x,M);i!==M&&(_._emitEvent("mouseenter",b,x,M),_._emitEvent("mouseover",b,x,M),s&&_._emitEvent("dragenter",b,x,M))}else{var j=_._getEventObj("mousemove",b,x,_);_.emit("mousemove",j)}i=M}else if(this._emitEvent(d,b,x,M||this),!s&&d==="mousedown"&&b.button===h&&(r=M,n={x:b.clientX,y:b.clientY},f=p()),d==="mouseup"&&b.button===h){var N=n.x-b.clientX,W=n.y-b.clientY,H=N*N+W*W,J=p(),Q=J-f;(H<c||Q<200)&&(f=0,this._emitEvent("click",b,x,r||this)),s&&(s._cfg.capture=!0,this._emitEvent("dragend",b,x,s),s=null,this._emitEvent("drop",b,x,M||this)),r=null}M&&!M.get("destroyed")&&(P.style.cursor=M.attr("cursor")||"default")},_emitEvent:function(d,b,_,x){var M=this._getEventObj(d,b,_,x),P=this._getEmitter(x,b);return P&&!P.get("destroyed")&&P.emit(d,M),P}}},function(B,L,o){var e=o(1),g=o(94),v={arc:o(57),ellipse:o(192),line:o(58)},p=e.createDom('<canvas width="1" height="1"></canvas>'),c=p.getContext("2d");function h(w,S,I){return I.createPath(c),c.isPointInPath(w,S)}var i=function(S,I){var j=this._attrs,N=j.x,W=j.y,H=j.r,J=j.startAngle,Q=j.endAngle,ne=j.clockwise,K=this.getHitLineWidth();return this.hasStroke()?g.arcline(N,W,H,J,Q,ne,K,S,I):!1},r=function(S,I){var j=this._attrs,N=j.x,W=j.y,H=j.r,J=this.getHitLineWidth(),Q=this.hasFill(),ne=this.hasStroke();return Q&&ne?g.circle(N,W,H,S,I)||g.arcline(N,W,H,0,Math.PI*2,!1,J,S,I):Q?g.circle(N,W,H,S,I):ne?g.arcline(N,W,H,0,Math.PI*2,!1,J,S,I):!1},n=function(S,I){var j=this._attrs,N=this.hasFill(),W=this.hasStroke(),H=j.x,J=j.y,Q=j.rx,ne=j.ry,K=this.getHitLineWidth(),ie=Q>ne?Q:ne,de=Q>ne?1:Q/ne,we=Q>ne?ne/Q:1,Re=[S,I,1],_e=[1,0,0,0,1,0,0,0,1];e.mat3.scale(_e,_e,[de,we]),e.mat3.translate(_e,_e,[H,J]);var Ue=e.mat3.invert([],_e);return e.vec3.transformMat3(Re,Re,Ue),N&&W?g.circle(0,0,ie,Re[0],Re[1])||g.arcline(0,0,ie,0,Math.PI*2,!1,K,Re[0],Re[1]):N?g.circle(0,0,ie,Re[0],Re[1]):W?g.arcline(0,0,ie,0,Math.PI*2,!1,K,Re[0],Re[1]):!1},s=function(S,I){var j=this,N=j.hasFill(),W=j.hasStroke(),H=j._attrs,J=H.x,Q=H.y,ne=H.rs,K=H.re,ie=H.startAngle,de=H.endAngle,we=H.clockwise,Re=[1,0],_e=[S-J,I-Q],Ue=e.vec2.angleTo(Re,_e);function rt(){var Se=v.arc.nearAngle(Ue,ie,de,we);if(e.isNumberEqual(Ue,Se)){var ye=e.vec2.squaredLength(_e);if(ne*ne<=ye&&ye<=K*K)return!0}return!1}function Fe(){var Se=j.getHitLineWidth(),ye={x:Math.cos(ie)*ne+J,y:Math.sin(ie)*ne+Q},Oe={x:Math.cos(ie)*K+J,y:Math.sin(ie)*K+Q},ue={x:Math.cos(de)*ne+J,y:Math.sin(de)*ne+Q},xe={x:Math.cos(de)*K+J,y:Math.sin(de)*K+Q};return!!(g.line(ye.x,ye.y,Oe.x,Oe.y,Se,S,I)||g.line(ue.x,ue.y,xe.x,xe.y,Se,S,I)||g.arcline(J,Q,ne,ie,de,we,Se,S,I)||g.arcline(J,Q,K,ie,de,we,Se,S,I))}return N&&W?rt()||Fe():N?rt():W?Fe():!1},f=function(S,I){var j=this._attrs;if(this.get("toDraw")||!j.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==j.img)&&this._setAttrImg();var N=j.x,W=j.y,H=j.width,J=j.height;return g.rect(N,W,H,J,S,I)},u=function(S,I){var j=this._attrs,N=j.x1,W=j.y1,H=j.x2,J=j.y2,Q=this.getHitLineWidth();return this.hasStroke()?g.line(N,W,H,J,Q,S,I):!1},d=function(S,I){var j=this,N=j.get("segments"),W=j.hasFill(),H=j.hasStroke();function J(){if(!e.isEmpty(N)){for(var Q=j.getHitLineWidth(),ne=0,K=N.length;ne<K;ne++)if(N[ne].isInside(S,I,Q))return!0;return!1}}return W&&H?h(S,I,j)||J():W?h(S,I,j):H?J():!1},b=function(S,I){var j=this,N=j.hasFill(),W=j.hasStroke();function H(){var J=j._attrs,Q=J.points;if(Q.length<2)return!1;var ne=j.getHitLineWidth(),K=Q.slice(0);return Q.length>=3&&K.push(Q[0]),g.polyline(K,ne,S,I)}return N&&W?h(S,I,j)||H():N?h(S,I,j):W?H():!1},_=function(S,I){var j=this._attrs,N=j.x,W=j.y,H=j.radius||j.r,J=this.getHitLineWidth();return g.circle(N,W,H+J/2,S,I)},x=function(S,I){var j=this,N=j._attrs;if(j.hasStroke()){var W=N.points;if(W.length<2)return!1;var H=N.lineWidth;return g.polyline(W,H,S,I)}return!1},M=function(S,I){var j=this,N=j.hasFill(),W=j.hasStroke();function H(){var J=j._attrs,Q=J.x,ne=J.y,K=J.width,ie=J.height,de=J.radius,we=j.getHitLineWidth();if(de===0){var Re=we/2;return g.line(Q-Re,ne,Q+K+Re,ne,we,S,I)||g.line(Q+K,ne-Re,Q+K,ne+ie+Re,we,S,I)||g.line(Q+K+Re,ne+ie,Q-Re,ne+ie,we,S,I)||g.line(Q,ne+ie+Re,Q,ne-Re,we,S,I)}return g.line(Q+de,ne,Q+K-de,ne,we,S,I)||g.line(Q+K,ne+de,Q+K,ne+ie-de,we,S,I)||g.line(Q+K-de,ne+ie,Q+de,ne+ie,we,S,I)||g.line(Q,ne+ie-de,Q,ne+de,we,S,I)||g.arcline(Q+K-de,ne+de,de,1.5*Math.PI,2*Math.PI,!1,we,S,I)||g.arcline(Q+K-de,ne+ie-de,de,0,.5*Math.PI,!1,we,S,I)||g.arcline(Q+de,ne+ie-de,de,.5*Math.PI,Math.PI,!1,we,S,I)||g.arcline(Q+de,ne+de,de,Math.PI,1.5*Math.PI,!1,we,S,I)}return N&&W?h(S,I,j)||H():N?h(S,I,j):W?H():!1},P=function(S,I){var j=this,N=j.getBBox();if(j.hasFill()||j.hasStroke())return g.box(N.minX,N.maxX,N.minY,N.maxY,S,I)},C=function(S,I){if(!this._cfg.el)return!1;var j=this._cfg.el.getBBox();return g.box(j.x,j.x+j.width,j.y,j.y+j.height,S,I)},O={arc:i,circle:r,dom:C,ellipse:n,fan:s,image:f,line:u,path:d,marker:_,polygon:b,polyline:x,rect:M,text:P};B.exports={isPointInPath:function(S,I){var j=O[this.type];return j?j.call(this,S,I):!1}}},function(B,L,o){var e=o(1),g=o(96),v=o(75),p=o(121),c=o(232),h=c.interpolate,i=c.interpolateArray,r=function(u){this._animators=[],this._current=0,this._timer=null,this.canvas=u};function n(f,u,d){var b={},_=u.toAttrs,x=u.fromAttrs,M=u.toMatrix;if(!f.get("destroyed")){var P;for(var C in _)if(!e.isEqual(x[C],_[C]))if(C==="path"){var O=_[C],w=x[C];O.length>w.length?(O=g.parsePathString(_[C]),w=g.parsePathString(x[C]),w=g.fillPathByDiff(w,O),w=g.formatPath(w,O),u.fromAttrs.path=w,u.toAttrs.path=O):u.pathFormatted||(O=g.parsePathString(_[C]),w=g.parsePathString(x[C]),w=g.formatPath(w,O),u.fromAttrs.path=w,u.toAttrs.path=O,u.pathFormatted=!0),b[C]=[];for(var S=0;S<O.length;S++){for(var I=O[S],j=w[S],N=[],W=0;W<I.length;W++)e.isNumber(I[W])&&j&&e.isNumber(j[W])?(P=h(j[W],I[W]),N.push(P(d))):N.push(I[W]);b[C].push(N)}}else e.isColorProp(C)&&e.isGradientColor(_[C])?b[C]=_[C]:(P=h(x[C],_[C]),b[C]=P(d));if(M){var H=i(u.fromMatrix,M),J=H(d);f.setMatrix(J)}f.attr(b)}}function s(f,u,d){var b=u.startTime;if(d<b+u.delay||u.isPaused)return!1;var _,x=u.duration,M=u.easing;if(d=d-b-u.delay,u.repeat)_=d%x/x,_=p[M](_);else if(_=d/x,_<1)_=p[M](_);else{var P=u.toAttrs||u.onFrame(1);return f.attr(P),u.toMatrix&&f.setMatrix(u.toMatrix),!0}if(u.onFrame){var C=u.onFrame(_);f.attr(C)}else n(f,u,_);return!1}e.augment(r,{initTimer:function(){var u=this,d=this,b=!1,_,x,M;d._timer=v.timer(function(P){if(d._current=P,u._animators.length>0){for(var C=u._animators.length-1;C>=0;C--){if(_=u._animators[C],_.get("destroyed")){d.removeAnimator(C);continue}if(!_.get("pause").isPaused){x=_.get("animators");for(var O=x.length-1;O>=0;O--)M=x[O],b=s(_,M,P),b&&(x.splice(O,1),b=!1,M.callback&&M.callback())}x.length===0&&d.removeAnimator(C)}u.canvas.draw()}})},addAnimator:function(u){this._animators.push(u)},removeAnimator:function(u){this._animators.splice(u,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(u){u.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),B.exports=r},function(B,L,o){var e=o(1);function g(c){return c[0]===1&&c[1]===0&&c[3]===0&&c[4]===1&&c[6]===0&&c[7]===0}function v(c){return c[1]===0&&c[3]===0&&c[6]===0&&c[7]===0}function p(c,h){g(h)||(v(h)?(c[0]*=h[0],c[4]*=h[4]):e.mat3.multiply(c,c,h))}B.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(h,i){var r=this._attrs.matrix;return e.mat3.translate(r,r,[h,i]),this.clearTotalMatrix(),this.attr("matrix",r),this},rotate:function(h){var i=this._attrs.matrix;return e.mat3.rotate(i,i,h),this.clearTotalMatrix(),this.attr("matrix",i),this},scale:function(h,i){var r=this._attrs.matrix;return e.mat3.scale(r,r,[h,i]),this.clearTotalMatrix(),this.attr("matrix",r),this},rotateAtStart:function(h){var i=this._attrs.x||this._cfg.attrs.x,r=this._attrs.y||this._cfg.attrs.y;return Math.abs(h)>Math.PI*2&&(h=h/180*Math.PI),this.transform([["t",-i,-r],["r",h],["t",i,r]])},move:function(h,i){var r=this.get("x")||0,n=this.get("y")||0;return this.translate(h-r,i-n),this.set("x",h),this.set("y",i),this},transform:function(h){var i=this,r=this._attrs.matrix;return e.each(h,function(n){switch(n[0]){case"t":i.translate(n[1],n[2]);break;case"s":i.scale(n[1],n[2]);break;case"r":i.rotate(n[1]);break;case"m":i.attr("matrix",e.mat3.multiply([],r,n[1])),i.clearTotalMatrix();break;default:break}}),i},setTransform:function(h){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(h)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(h){return this.attr("matrix",h),this.clearTotalMatrix(),this},apply:function(h,i){var r;return i?r=this._getMatrixByRoot(i):r=this.attr("matrix"),e.vec3.transformMat3(h,h,r),this},_getMatrixByRoot:function(h){var i=this;h=h||i;for(var r=i,n=[];r!==h;)n.unshift(r),r=r.get("parent");n.unshift(r);var s=[1,0,0,0,1,0,0,0,1];return e.each(n,function(f){e.mat3.multiply(s,f.attr("matrix"),s)}),s},getTotalMatrix:function(){var h=this._cfg.totalMatrix;if(!h){h=[1,0,0,0,1,0,0,0,1];var i=this._cfg.parent;if(i){var r=i.getTotalMatrix();p(h,r)}p(h,this.attr("matrix")),this._cfg.totalMatrix=h}return h},clearTotalMatrix:function(){},invert:function(h){var i=this.getTotalMatrix();if(v(i))h[0]/=i[0],h[1]/=i[4];else{var r=e.mat3.invert([],i);r&&e.vec3.transformMat3(h,h,r)}return this},resetTransform:function(h){var i=this.attr("matrix");g(i)||h.transform(i[0],i[1],i[3],i[4],i[6],i[7])}}},function(B,L,o){B.exports={painter:o(390)}},function(B,L,o){var e=o(1),g=o(391),v=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],p=function(){function c(i){if(!i)return null;var r=e.uniqueId("canvas_"),n=e.createDom('<canvas id="'+r+'"></canvas>');return i.appendChild(n),this.type="canvas",this.canvas=n,this.context=n.getContext("2d"),this.toDraw=!1,this}var h=c.prototype;return h.beforeDraw=function(){var r=this.canvas;this.context&&this.context.clearRect(0,0,r.width,r.height)},h.draw=function(r){var n=this;function s(){n.animateHandler=e.requestAnimationFrame(function(){n.animateHandler=void 0,n.toDraw&&s()}),n.beforeDraw();try{n._drawGroup(r)}catch(f){console.warn("error in draw canvas, detail as:"),console.warn(f)}finally{n.toDraw=!1}}n.animateHandler?n.toDraw=!0:s()},h.drawSync=function(r){this.beforeDraw(),this._drawGroup(r)},h._drawGroup=function(r){if(!(r._cfg.removed||r._cfg.destroyed||!r._cfg.visible)){var n=this,s=r._cfg.children,f=null;this.setContext(r);for(var u=0;u<s.length;u++)f=s[u],s[u].isGroup?n._drawGroup(f):n._drawShape(f);this.restoreContext(r)}},h._drawShape=function(r){r._cfg.removed||r._cfg.destroyed||!r._cfg.visible||(this.setContext(r),r.drawInner(this.context),this.restoreContext(r),r._cfg.attrs=r._attrs,r._cfg.hasUpdate=!1)},h.setContext=function(r){var n=this.context,s=r._attrs.clip;n.save(),s&&(s.resetTransform(n),s.createPath(n),n.clip()),this.resetContext(r),r.resetTransform(n)},h.restoreContext=function(){this.context.restore()},h.resetContext=function(r){var n=this.context,s=r._attrs;if(!r.isGroup){for(var f in s)if(v.indexOf(f)>-1){var u=s[f];f==="fillStyle"&&(u=g.parseStyle(u,r,n)),f==="strokeStyle"&&(u=g.parseStyle(u,r,n)),f==="lineDash"&&n.setLineDash?e.isArray(u)?n.setLineDash(u):e.isString(u)&&n.setLineDash(u.split(" ")):n[f]=u}}},c}();B.exports=p},function(B,L,o){var e=o(1),g=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,v=/[^\s\,]+/ig,p=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,c=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function r(u,d){var b=u.match(i);e.each(b,function(_){_=_.split(":"),d.addColorStop(_[0],_[1])})}function n(u,d,b){var _=p.exec(u),x=e.mod(e.toRadian(parseFloat(_[1])),Math.PI*2),M=_[2],P=d.getBBox(),C,O;x>=0&&x<.5*Math.PI?(C={x:P.minX,y:P.minY},O={x:P.maxX,y:P.maxY}):.5*Math.PI<=x&&x<Math.PI?(C={x:P.maxX,y:P.minY},O={x:P.minX,y:P.maxY}):Math.PI<=x&&x<1.5*Math.PI?(C={x:P.maxX,y:P.maxY},O={x:P.minX,y:P.minY}):(C={x:P.minX,y:P.maxY},O={x:P.maxX,y:P.minY});var w=Math.tan(x),S=w*w,I=(O.x-C.x+w*(O.y-C.y))/(S+1)+C.x,j=w*(O.x-C.x+w*(O.y-C.y))/(S+1)+C.y,N=b.createLinearGradient(C.x,C.y,I,j);return r(M,N),N}function s(u,d,b){var _=c.exec(u),x=parseFloat(_[1]),M=parseFloat(_[2]),P=parseFloat(_[3]),C=_[4];if(P===0){var O=C.match(i);return O[O.length-1].split(":")[1]}var w=d.getBBox(),S=w.maxX-w.minX,I=w.maxY-w.minY,j=Math.sqrt(S*S+I*I)/2,N=b.createRadialGradient(w.minX+S*x,w.minY+I*M,P*j,w.minX+S/2,w.minY+I/2,j);return r(C,N),N}function f(u,d,b){if(d.get("patternSource")&&d.get("patternSource")===u)return d.get("pattern");var _,x,M=h.exec(u),P=M[1],C=M[2];function O(){_=b.createPattern(x,P),d.setSilent("pattern",_),d.setSilent("patternSource",u)}switch(P){case"a":P="repeat";break;case"x":P="repeat-x";break;case"y":P="repeat-y";break;case"n":P="no-repeat";break;default:P="no-repeat"}return x=new Image,C.match(/^data:/i)||(x.crossOrigin="Anonymous"),x.src=C,x.complete?O():(x.onload=O,x.src=x.src),_}B.exports={parsePath:function(d){if(d=d||[],e.isArray(d))return d;if(e.isString(d))return d=d.match(g),e.each(d,function(b,_){if(b=b.match(v),b[0].length>1){var x=b[0].charAt(0);b.splice(1,0,b[0].substr(1)),b[0]=x}e.each(b,function(M,P){isNaN(M)||(b[P]=+M)}),d[_]=b}),d},parseStyle:function(d,b,_){if(e.isString(d)){if(d[1]==="("||d[2]==="("){if(d[0]==="l")return n(d,b,_);if(d[0]==="r")return s(d,b,_);if(d[0]==="p")return f(d,b,_)}return d}}}},function(B,L,o){B.exports={canvas:o(389),svg:o(400)}},function(B,L,o){var e=o(1),g=o(396),v=o(398),p=o(394),c=o(395),h=o(397),i=function(){function r(s){var f=document.createElementNS("http://www.w3.org/2000/svg","defs"),u=e.uniqueId("defs_");f.id=u,s.appendChild(f),this.children=[],this.defaultArrow={},this.el=f,this.canvas=s}var n=r.prototype;return n.find=function(f,u){for(var d=this.children,b=null,_=0;_<d.length;_++)if(d[_].match(f,u)){b=d[_].id;break}return b},n.findById=function(f){for(var u=this.children,d=null,b=0;b<u.length;b++)if(u[b].id===f){d=u[b];break}return d},n.add=function(f){this.children.push(f),f.canvas=this.canvas,f.parent=this},n.getDefaultArrow=function(f,u){var d=f.stroke||f.strokeStyle;if(this.defaultArrow[d])return this.defaultArrow[d].id;var b=new p(f,u);return this.defaultArrow[d]=b,this.el.appendChild(b.el),b.id},n.addGradient=function(f){var u=new g(f);return this.el.appendChild(u.el),this.add(u),u.id},n.addArrow=function(f,u){var d=new p(f,u);return this.el.appendChild(d.el),d.id},n.addShadow=function(f){var u=new v(f);return this.el.appendChild(u.el),this.add(u),u.id},n.addPattern=function(f){var u=new h(f);return this.el.appendChild(u.el),this.add(u),u.id},n.addClip=function(f){var u=new c(f);return this.el.appendChild(u.el),this.add(u),u.id},r}();B.exports=i},function(B,L,o){var e=o(1),g=function(){function v(c,h){var i=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=e.uniqueId("marker_");i.setAttribute("id",r);var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("stroke","none"),n.setAttribute("fill",c.stroke||"#000"),i.appendChild(n),i.setAttribute("overflow","visible"),i.setAttribute("orient","auto-start-reverse"),this.el=i,this.child=n,this.id=r,this.cfg=c[h==="marker-start"?"startArrow":"endArrow"],this.stroke=c.stroke||"#000",this.cfg===!0?this._setDefaultPath(h,n):this._setMarker(c.lineWidth,n),this}var p=v.prototype;return p.match=function(){return!1},p._setDefaultPath=function(h,i){var r=this.el;i.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),r.setAttribute("refX",3),r.setAttribute("refY",3)},p._setMarker=function(h,i){var r=this.el,n=this.cfg.path,s=this.cfg.d;e.isArray(n)&&(n=n.map(function(f){return f.join(" ")}).join("")),i.setAttribute("d",n),r.appendChild(i),s&&r.setAttribute("refX",s/h)},p.update=function(h){var i=this.child;i.attr?i.attr("fill",h):i.setAttribute("fill",h)},v}();B.exports=g},function(B,L,o){var e=o(1),g=function(){function v(c){this.type="clip";var h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=h,this.id=e.uniqueId("clip_"),h.id=this.id;var i=c._cfg.el;return h.appendChild(i.cloneNode(!0)),this.cfg=c,this}var p=v.prototype;return p.match=function(){return!1},p.remove=function(){var h=this.el;h.parentNode.removeChild(h)},v}();B.exports=g},function(B,L,o){var e=o(1),g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,v=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,p=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function c(n){var s=n.match(p);if(!s)return"";var f="";return s.sort(function(u,d){return u=u.split(":"),d=d.split(":"),Number(u[0])-Number(d[0])}),e.each(s,function(u){u=u.split(":"),f+='<stop offset="'+u[0]+'" stop-color="'+u[1]+'"></stop>'}),f}function h(n,s){var f=g.exec(n),u=e.mod(e.toRadian(parseFloat(f[1])),Math.PI*2),d=f[2],b,_;u>=0&&u<.5*Math.PI?(b={x:0,y:0},_={x:1,y:1}):.5*Math.PI<=u&&u<Math.PI?(b={x:1,y:0},_={x:0,y:1}):Math.PI<=u&&u<1.5*Math.PI?(b={x:1,y:1},_={x:0,y:0}):(b={x:0,y:1},_={x:1,y:0});var x=Math.tan(u),M=x*x,P=(_.x-b.x+x*(_.y-b.y))/(M+1)+b.x,C=x*(_.x-b.x+x*(_.y-b.y))/(M+1)+b.y;s.setAttribute("x1",b.x),s.setAttribute("y1",b.y),s.setAttribute("x2",P),s.setAttribute("y2",C),s.innerHTML=c(d)}function i(n,s){var f=v.exec(n),u=parseFloat(f[1]),d=parseFloat(f[2]),b=parseFloat(f[3]),_=f[4];s.setAttribute("cx",u),s.setAttribute("cy",d),s.setAttribute("r",b),s.innerHTML=c(_)}var r=function(){function n(f){var u=null,d=e.uniqueId("gradient_");return f.toLowerCase()[0]==="l"?(u=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),h(f,u)):(u=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),i(f,u)),u.setAttribute("id",d),this.el=u,this.id=d,this.cfg=f,this}var s=n.prototype;return s.match=function(u,d){return this.cfg===d},n}();B.exports=r},function(B,L,o){var e=o(1),g=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,v=function(){function p(h){var i=document.createElementNS("http://www.w3.org/2000/svg","pattern");i.setAttribute("patternUnits","userSpaceOnUse");var r=document.createElementNS("http://www.w3.org/2000/svg","image");i.appendChild(r);var n=e.uniqueId("pattern_");i.id=n,this.el=i,this.id=n,this.cfg=h;var s=g.exec(h),f=s[2];r.setAttribute("href",f);var u=new Image;f.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=f;function d(){i.setAttribute("width",u.width),i.setAttribute("height",u.height)}return u.complete?d():(u.onload=d,u.src=u.src),this}var c=p.prototype;return c.match=function(i,r){return this.cfg===r},p}();B.exports=v},function(B,L,o){var e=o(1),g={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},v={x:"-40%",y:"-40%",width:"200%",height:"200%"},p=function(){function c(i){this.type="filter";var r=document.createElementNS("http://www.w3.org/2000/svg","filter");return e.each(v,function(n,s){r.setAttribute(s,n)}),this.el=r,this.id=e.uniqueId("filter_"),this.el.id=this.id,this.cfg=i,this._parseShadow(i,r),this}var h=c.prototype;return h.match=function(r,n){if(this.type!==r)return!1;var s=!0,f=this.cfg;return e.each(Object.keys(f),function(u){if(f[u]!==n[u])return s=!1,!1}),s},h.update=function(r,n){var s=this.cfg;return s[g[r]]=n,this._parseShadow(s,this.el),this},h._parseShadow=function(r,n){var s=`<feDropShadow 
      dx="`+(r.dx||0)+`" 
      dy="`+(r.dy||0)+`" 
      stdDeviation="`+(r.blur?r.blur/10:0)+`"
      flood-color="`+(r.color?r.color:"#000")+`"
      flood-opacity="`+(r.opacity?r.opacity:1)+`"
      />`;n.innerHTML=s},c}();B.exports=p},function(B,L){var o={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};B.exports=function(g,v,p){var c=p.target||p.srcElement;if(!o[c.tagName]){for(var h=c.parentNode;h&&!o[h.tagName];)h=h.parentNode;c=h}return this._cfg.el===c?this:this.find(function(i){return i._cfg&&i._cfg.el===c})}},function(B,L,o){B.exports={painter:o(401),getShape:o(399)}},function(B,L,o){var e=o(1),g=o(40),v=g.parseRadius,p=o(92),c=o(393),h={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},i=.3,r={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},n={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},s={left:"left",start:"left",center:"middle",right:"end",end:"end"},f=function(){function u(b){if(!b)return null;var _=e.uniqueId("canvas_"),x=e.createDom('<svg id="'+_+'"></svg>');return b.appendChild(x),this.type="svg",this.canvas=x,this.context=new c(x),this.toDraw=!1,this}var d=u.prototype;return d.draw=function(_){var x=this;function M(){x.animateHandler=e.requestAnimationFrame(function(){x.animateHandler=void 0,x.toDraw&&M()});try{x._drawChildren(_)}catch(P){console.warn("error in draw canvas, detail as:"),console.warn(P)}finally{x.toDraw=!1}}x.animateHandler?x.toDraw=!0:M()},d.drawSync=function(_){this._drawChildren(_)},d._drawGroup=function(_,x){var M=_._cfg;M.removed||M.destroyed||(M.tobeRemoved&&(e.each(M.tobeRemoved,function(P){P.parentNode&&P.parentNode.removeChild(P)}),M.tobeRemoved=[]),this._drawShape(_,x),M.children&&M.children.length>0&&this._drawChildren(_))},d._drawChildren=function(_){var x=this,M=_._cfg.children,P;if(!!M)for(var C=0;C<M.length;C++)P=M[C],P.isGroup?x._drawGroup(P,C):x._drawShape(P,C)},d._drawShape=function(_,x){var M=this,P=_._attrs,C=_._cfg,O=C.el;if(C.removed||C.destroyed){O&&O.parentNode.removeChild(C.el);return}if(!O&&C.parent&&(M._createDom(_,x),M._updateShape(_)),O=C.el,C.visible===!1){O.setAttribute("visibility","hidden");return}C.visible&&O.hasAttribute("visibility")&&O.removeAttribute("visibility"),C.hasUpdate&&M._updateShape(_),P.clip&&P.clip._cfg.hasUpdate&&M._updateShape(P.clip)},d._updateShape=function(_){var x=this,M=_._attrs,P=_._cfg.attrs;if(!!P){if(_._cfg.el||x._createDom(_),"clip"in M&&this._setClip(_,M.clip),("shadowOffsetX"in M||"shadowOffsetY"in M||"shadowBlur"in M||"shadowColor"in M)&&this._setShadow(_),_.type==="text"){x._updateText(_);return}_.type==="fan"&&x._updateFan(_),_.type==="marker"&&_._cfg.el.setAttribute("d",x._assembleMarker(M)),_.type==="rect"&&_._cfg.el.setAttribute("d",x._assembleRect(M));for(var C in M)M[C]!==P[C]&&x._setAttribute(_,C,M[C]);_._cfg.attrs=e.deepMix({},_._attrs),_._cfg.hasUpdate=!1}},d._setAttribute=function(_,x,M){var P=_.type,C=_._attrs,O=_._cfg.el,w=this.context;if(!((P==="marker"||P==="rect")&&~["x","y","radius","r"].indexOf(x))){if(~["circle","ellipse"].indexOf(P)&&~["x","y"].indexOf(x)){O.setAttribute("c"+x,parseInt(M,10));return}if(P==="polygon"&&x==="points"){(!M||M.length===0)&&(M=""),e.isArray(M)&&(M=M.map(function(I){return I[0]+","+I[1]}),M=M.join(" ")),O.setAttribute("points",M);return}if(x==="path"&&e.isArray(M)){O.setAttribute("d",this._formatPath(M));return}if(x==="img"){this._setImage(_,M);return}if(x==="transform"){if(!M){O.removeAttribute("transform");return}this._setTransform(_);return}if(x==="rotate"){if(!M){O.removeAttribute("transform");return}this._setTransform(_);return}if(x==="matrix"){this._setTransform(_);return}if(x==="fillStyle"||x==="strokeStyle"){this._setColor(_,x,M);return}if(x!=="clip"){if(~x.indexOf("Arrow")){if(x=r[x],!M)_._cfg[x]=null,O.removeAttribute(x);else{var S=null;typeof M=="boolean"?S=w.getDefaultArrow(C,x):S=w.addArrow(C,x),O.setAttribute(x,"url(#"+S+")"),_._cfg[x]=S}return}x==="html"&&(typeof M=="string"?O.innerHTML=M:(O.innerHTML="",O.appendChild(M))),r[x]&&O.setAttribute(r[x],M)}}},d._createDom=function(_,x){var M=h[_.type],P=_._attrs,C=_._cfg.parent;if(!M)throw new Error("the type"+_.type+"is not supported by svg");var O=document.createElementNS("http://www.w3.org/2000/svg",M);if(_._cfg.id&&(O.id=_._cfg.id),_._cfg.el=O,C){var w=C._cfg.el;if(typeof x=="undefined")w.appendChild(O);else{var S=C._cfg.el.childNodes;w.tagName==="svg"&&(x+=1),S.length<=x?w.appendChild(O):w.insertBefore(O,S[x])}}return _._cfg.attrs={},_.type==="text"?(O.setAttribute("paint-order","stroke"),O.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!P.stroke&&!P.strokeStyle&&O.setAttribute("stroke","none"),!P.fill&&!P.fillStyle&&O.setAttribute("fill","none")),O},d._assembleMarker=function(_){var x=_.r;if(typeof _.r=="undefined"&&(x=_.radius),isNaN(Number(_.x))||isNaN(Number(_.y))||isNaN(Number(x)))return"";var M="";return typeof _.symbol=="function"?M=_.symbol(_.x,_.y,x):M=p.Symbols[_.symbol||"circle"](_.x,_.y,x),e.isArray(M)&&(M=M.map(function(P){return P.join(" ")}).join("")),M},d._assembleRect=function(_){var x=_.x,M=_.y,P=_.width,C=_.height,O=_.radius;if(!O)return"M "+x+","+M+" l "+P+",0 l 0,"+C+" l"+-P+" 0 z";var w=v(O);e.isArray(O)?O.length===1?w.r1=w.r2=w.r3=w.r4=O[0]:O.length===2?(w.r1=w.r3=O[0],w.r2=w.r4=O[1]):O.length===3?(w.r1=O[0],w.r2=w.r4=O[1],w.r3=O[2]):(w.r1=O[0],w.r2=O[1],w.r3=O[2],w.r4=O[3]):w.r1=w.r2=w.r3=w.r4=O;var S=[["M "+(x+w.r1)+","+M],["l "+(P-w.r1-w.r2)+",0"],["a "+w.r2+","+w.r2+",0,0,1,"+w.r2+","+w.r2],["l 0,"+(C-w.r2-w.r3)],["a "+w.r3+","+w.r3+",0,0,1,"+-w.r3+","+w.r3],["l "+(w.r3+w.r4-P)+",0"],["a "+w.r4+","+w.r4+",0,0,1,"+-w.r4+","+-w.r4],["l 0,"+(w.r4+w.r1-C)],["a "+w.r1+","+w.r1+",0,0,1,"+w.r1+","+-w.r1],["z"]];return S.join(" ")},d._formatPath=function(_){return _=_.map(function(x){return x.join(" ")}).join(""),~_.indexOf("NaN")?"":_},d._setTransform=function(_){for(var x=_._attrs.matrix,M=_._cfg.el,P=[],C=0;C<9;C+=3)P.push(x[C]+","+x[C+1]);P=P.join(","),P.indexOf("NaN")===-1?M.setAttribute("transform","matrix("+P+")"):console.warn("invalid matrix:",x)},d._setImage=function(_,x){var M=_._attrs,P=_._cfg.el;if(e.isString(x))P.setAttribute("href",x);else if(x instanceof Image)M.width||(P.setAttribute("width",x.width),_._attrs.width=x.width),M.height||(P.setAttribute("height",x.height),_._attrs.height=x.height),P.setAttribute("href",x.src);else if(x instanceof HTMLElement&&e.isString(x.nodeName)&&x.nodeName.toUpperCase()==="CANVAS")P.setAttribute("href",x.toDataURL());else if(x instanceof ImageData){var C=document.createElement("canvas");C.setAttribute("width",x.width),C.setAttribute("height",x.height),C.getContext("2d").putImageData(x,0,0),M.width||(P.setAttribute("width",x.width),_._attrs.width=x.width),M.height||(P.setAttribute("height",x.height),_._attrs.height=x.height),P.setAttribute("href",C.toDataURL())}},d._updateFan=function(_){function x(K,ie,de){return{x:ie*Math.cos(K)+de.x,y:ie*Math.sin(K)+de.y}}var M=_._attrs,P=_._cfg,C={x:M.x,y:M.y},O=[],w=M.startAngle,S=M.endAngle;e.isNumberEqual(S-w,Math.PI*2)&&(S-=1e-5);var I=x(w,M.re,C),j=x(S,M.re,C),N=S>w?1:0,W=Math.abs(S-w)>Math.PI?1:0,H=M.rs,J=M.re,Q=x(w,M.rs,C),ne=x(S,M.rs,C);M.rs>0?(O.push("M "+j.x+","+j.y),O.push("L "+ne.x+","+ne.y),O.push("A "+H+","+H+",0,"+W+","+(N===1?0:1)+","+Q.x+","+Q.y),O.push("L "+I.x+" "+I.y)):(O.push("M "+C.x+","+C.y),O.push("L "+I.x+","+I.y)),O.push("A "+J+","+J+",0,"+W+","+N+","+j.x+","+j.y),M.rs>0?O.push("L "+ne.x+","+ne.y):O.push("Z"),P.el.setAttribute("d",O.join(" "))},d._updateText=function(_){var x=this,M=_._attrs,P=_._cfg.attrs,C=_._cfg.el;this._setFont(_);for(var O in M)if(M[O]!==P[O]){if(O==="text"){x._setText(_,""+M[O]);continue}if(O==="fillStyle"||O==="strokeStyle"){this._setColor(_,O,M[O]);continue}if(O==="matrix"){this._setTransform(_);continue}r[O]&&C.setAttribute(r[O],M[O])}_._cfg.attrs=Object.assign({},_._attrs),_._cfg.hasUpdate=!1},d._setFont=function(_){var x=_.get("el"),M=_._attrs,P=M.fontSize;x.setAttribute("alignment-baseline",n[M.textBaseline]||"baseline"),x.setAttribute("text-anchor",s[M.textAlign]||"left"),P&&+P<12&&(M.matrix=[1,0,0,0,1,0,0,0,1],_.transform([["t",-M.x,-M.y],["s",+P/12,+P/12],["t",M.x,M.y]]))},d._setText=function(_,x){var M=_._cfg.el,P=_._attrs.textBaseline||"bottom";if(!x)M.innerHTML="";else if(~x.indexOf(`
`)){var C=_._attrs.x,O=x.split(`
`),w=O.length-1,S="";e.each(O,function(I,j){j===0?P==="alphabetic"?S+='<tspan x="'+C+'" dy="'+-w+'em">'+I+"</tspan>":P==="top"?S+='<tspan x="'+C+'" dy="0.9em">'+I+"</tspan>":P==="middle"?S+='<tspan x="'+C+'" dy="'+-(w-1)/2+'em">'+I+"</tspan>":P==="bottom"?S+='<tspan x="'+C+'" dy="-'+(w+i)+'em">'+I+"</tspan>":P==="hanging"&&(S+='<tspan x="'+C+'" dy="'+(-(w-1)-i)+'em">'+I+"</tspan>"):S+='<tspan x="'+C+'" dy="1em">'+I+"</tspan>"}),M.innerHTML=S}else M.innerHTML=x},d._setClip=function(_,x){var M=_._cfg.el;if(!x){M.removeAttribute("clip-path");return}if(M.hasAttribute("clip-path"))x._cfg.hasUpdate&&this._updateShape(x);else{this._createDom(x),this._updateShape(x);var P=this.context.addClip(x);M.setAttribute("clip-path","url(#"+P+")")}},d._setColor=function(_,x,M){var P=_._cfg.el,C=this.context;if(!M){P.setAttribute(r[x],"none");return}if(M=M.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(M)){var O=C.find("gradient",M);O||(O=C.addGradient(M)),P.setAttribute(r[x],"url(#"+O+")")}else if(/^[p,P]{1}[\s]*\(/.test(M)){var w=C.find("pattern",M);w||(w=C.addPattern(M)),P.setAttribute(r[x],"url(#"+w+")")}else P.setAttribute(r[x],M)},d._setShadow=function(_){var x=_._cfg.el,M=_._attrs,P={dx:M.shadowOffsetX,dy:M.shadowOffsetY,blur:M.shadowBlur,color:M.shadowColor};if(!P.dx&&!P.dy&&!P.blur&&!P.color)x.removeAttribute("filter");else{var C=this.context.find("filter",P);C||(C=this.context.addShadow(P,this)),x.setAttribute("filter","url(#"+C+")")}},u}();B.exports=f},function(B,L,o){var e=o(9);e.Arc=o(185),e.Circle=o(186),e.Dom=o(187),e.Ellipse=o(188),e.Fan=o(189),e.Image=o(190),e.Line=o(191),e.Marker=o(92),e.Path=o(194),e.Polygon=o(195),e.Polyline=o(196),e.Rect=o(197),e.Text=o(198),B.exports=e},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.sub=L.mul=void 0,L.create=p,L.fromMat4=c,L.clone=h,L.copy=i,L.fromValues=r,L.set=n,L.identity=s,L.transpose=f,L.invert=u,L.adjoint=d,L.determinant=b,L.multiply=_,L.translate=x,L.rotate=M,L.scale=P,L.fromTranslation=C,L.fromRotation=O,L.fromScaling=w,L.fromMat2d=S,L.fromQuat=I,L.normalFromMat4=j,L.projection=N,L.str=W,L.frob=H,L.add=J,L.subtract=Q,L.multiplyScalar=ne,L.multiplyScalarAndAdd=K,L.exactEquals=ie,L.equals=de;var e=o(97),g=v(e);function v(_e){if(_e&&_e.__esModule)return _e;var Ue={};if(_e!=null)for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&(Ue[rt]=_e[rt]);return Ue.default=_e,Ue}function p(){var _e=new g.ARRAY_TYPE(9);return g.ARRAY_TYPE!=Float32Array&&(_e[1]=0,_e[2]=0,_e[3]=0,_e[5]=0,_e[6]=0,_e[7]=0),_e[0]=1,_e[4]=1,_e[8]=1,_e}function c(_e,Ue){return _e[0]=Ue[0],_e[1]=Ue[1],_e[2]=Ue[2],_e[3]=Ue[4],_e[4]=Ue[5],_e[5]=Ue[6],_e[6]=Ue[8],_e[7]=Ue[9],_e[8]=Ue[10],_e}function h(_e){var Ue=new g.ARRAY_TYPE(9);return Ue[0]=_e[0],Ue[1]=_e[1],Ue[2]=_e[2],Ue[3]=_e[3],Ue[4]=_e[4],Ue[5]=_e[5],Ue[6]=_e[6],Ue[7]=_e[7],Ue[8]=_e[8],Ue}function i(_e,Ue){return _e[0]=Ue[0],_e[1]=Ue[1],_e[2]=Ue[2],_e[3]=Ue[3],_e[4]=Ue[4],_e[5]=Ue[5],_e[6]=Ue[6],_e[7]=Ue[7],_e[8]=Ue[8],_e}function r(_e,Ue,rt,Fe,Se,ye,Oe,ue,xe){var Ae=new g.ARRAY_TYPE(9);return Ae[0]=_e,Ae[1]=Ue,Ae[2]=rt,Ae[3]=Fe,Ae[4]=Se,Ae[5]=ye,Ae[6]=Oe,Ae[7]=ue,Ae[8]=xe,Ae}function n(_e,Ue,rt,Fe,Se,ye,Oe,ue,xe,Ae){return _e[0]=Ue,_e[1]=rt,_e[2]=Fe,_e[3]=Se,_e[4]=ye,_e[5]=Oe,_e[6]=ue,_e[7]=xe,_e[8]=Ae,_e}function s(_e){return _e[0]=1,_e[1]=0,_e[2]=0,_e[3]=0,_e[4]=1,_e[5]=0,_e[6]=0,_e[7]=0,_e[8]=1,_e}function f(_e,Ue){if(_e===Ue){var rt=Ue[1],Fe=Ue[2],Se=Ue[5];_e[1]=Ue[3],_e[2]=Ue[6],_e[3]=rt,_e[5]=Ue[7],_e[6]=Fe,_e[7]=Se}else _e[0]=Ue[0],_e[1]=Ue[3],_e[2]=Ue[6],_e[3]=Ue[1],_e[4]=Ue[4],_e[5]=Ue[7],_e[6]=Ue[2],_e[7]=Ue[5],_e[8]=Ue[8];return _e}function u(_e,Ue){var rt=Ue[0],Fe=Ue[1],Se=Ue[2],ye=Ue[3],Oe=Ue[4],ue=Ue[5],xe=Ue[6],Ae=Ue[7],pe=Ue[8],be=pe*Oe-ue*Ae,le=-pe*ye+ue*xe,z=Ae*ye-Oe*xe,ae=rt*be+Fe*le+Se*z;return ae?(ae=1/ae,_e[0]=be*ae,_e[1]=(-pe*Fe+Se*Ae)*ae,_e[2]=(ue*Fe-Se*Oe)*ae,_e[3]=le*ae,_e[4]=(pe*rt-Se*xe)*ae,_e[5]=(-ue*rt+Se*ye)*ae,_e[6]=z*ae,_e[7]=(-Ae*rt+Fe*xe)*ae,_e[8]=(Oe*rt-Fe*ye)*ae,_e):null}function d(_e,Ue){var rt=Ue[0],Fe=Ue[1],Se=Ue[2],ye=Ue[3],Oe=Ue[4],ue=Ue[5],xe=Ue[6],Ae=Ue[7],pe=Ue[8];return _e[0]=Oe*pe-ue*Ae,_e[1]=Se*Ae-Fe*pe,_e[2]=Fe*ue-Se*Oe,_e[3]=ue*xe-ye*pe,_e[4]=rt*pe-Se*xe,_e[5]=Se*ye-rt*ue,_e[6]=ye*Ae-Oe*xe,_e[7]=Fe*xe-rt*Ae,_e[8]=rt*Oe-Fe*ye,_e}function b(_e){var Ue=_e[0],rt=_e[1],Fe=_e[2],Se=_e[3],ye=_e[4],Oe=_e[5],ue=_e[6],xe=_e[7],Ae=_e[8];return Ue*(Ae*ye-Oe*xe)+rt*(-Ae*Se+Oe*ue)+Fe*(xe*Se-ye*ue)}function _(_e,Ue,rt){var Fe=Ue[0],Se=Ue[1],ye=Ue[2],Oe=Ue[3],ue=Ue[4],xe=Ue[5],Ae=Ue[6],pe=Ue[7],be=Ue[8],le=rt[0],z=rt[1],ae=rt[2],V=rt[3],re=rt[4],te=rt[5],q=rt[6],ve=rt[7],Me=rt[8];return _e[0]=le*Fe+z*Oe+ae*Ae,_e[1]=le*Se+z*ue+ae*pe,_e[2]=le*ye+z*xe+ae*be,_e[3]=V*Fe+re*Oe+te*Ae,_e[4]=V*Se+re*ue+te*pe,_e[5]=V*ye+re*xe+te*be,_e[6]=q*Fe+ve*Oe+Me*Ae,_e[7]=q*Se+ve*ue+Me*pe,_e[8]=q*ye+ve*xe+Me*be,_e}function x(_e,Ue,rt){var Fe=Ue[0],Se=Ue[1],ye=Ue[2],Oe=Ue[3],ue=Ue[4],xe=Ue[5],Ae=Ue[6],pe=Ue[7],be=Ue[8],le=rt[0],z=rt[1];return _e[0]=Fe,_e[1]=Se,_e[2]=ye,_e[3]=Oe,_e[4]=ue,_e[5]=xe,_e[6]=le*Fe+z*Oe+Ae,_e[7]=le*Se+z*ue+pe,_e[8]=le*ye+z*xe+be,_e}function M(_e,Ue,rt){var Fe=Ue[0],Se=Ue[1],ye=Ue[2],Oe=Ue[3],ue=Ue[4],xe=Ue[5],Ae=Ue[6],pe=Ue[7],be=Ue[8],le=Math.sin(rt),z=Math.cos(rt);return _e[0]=z*Fe+le*Oe,_e[1]=z*Se+le*ue,_e[2]=z*ye+le*xe,_e[3]=z*Oe-le*Fe,_e[4]=z*ue-le*Se,_e[5]=z*xe-le*ye,_e[6]=Ae,_e[7]=pe,_e[8]=be,_e}function P(_e,Ue,rt){var Fe=rt[0],Se=rt[1];return _e[0]=Fe*Ue[0],_e[1]=Fe*Ue[1],_e[2]=Fe*Ue[2],_e[3]=Se*Ue[3],_e[4]=Se*Ue[4],_e[5]=Se*Ue[5],_e[6]=Ue[6],_e[7]=Ue[7],_e[8]=Ue[8],_e}function C(_e,Ue){return _e[0]=1,_e[1]=0,_e[2]=0,_e[3]=0,_e[4]=1,_e[5]=0,_e[6]=Ue[0],_e[7]=Ue[1],_e[8]=1,_e}function O(_e,Ue){var rt=Math.sin(Ue),Fe=Math.cos(Ue);return _e[0]=Fe,_e[1]=rt,_e[2]=0,_e[3]=-rt,_e[4]=Fe,_e[5]=0,_e[6]=0,_e[7]=0,_e[8]=1,_e}function w(_e,Ue){return _e[0]=Ue[0],_e[1]=0,_e[2]=0,_e[3]=0,_e[4]=Ue[1],_e[5]=0,_e[6]=0,_e[7]=0,_e[8]=1,_e}function S(_e,Ue){return _e[0]=Ue[0],_e[1]=Ue[1],_e[2]=0,_e[3]=Ue[2],_e[4]=Ue[3],_e[5]=0,_e[6]=Ue[4],_e[7]=Ue[5],_e[8]=1,_e}function I(_e,Ue){var rt=Ue[0],Fe=Ue[1],Se=Ue[2],ye=Ue[3],Oe=rt+rt,ue=Fe+Fe,xe=Se+Se,Ae=rt*Oe,pe=Fe*Oe,be=Fe*ue,le=Se*Oe,z=Se*ue,ae=Se*xe,V=ye*Oe,re=ye*ue,te=ye*xe;return _e[0]=1-be-ae,_e[3]=pe-te,_e[6]=le+re,_e[1]=pe+te,_e[4]=1-Ae-ae,_e[7]=z-V,_e[2]=le-re,_e[5]=z+V,_e[8]=1-Ae-be,_e}function j(_e,Ue){var rt=Ue[0],Fe=Ue[1],Se=Ue[2],ye=Ue[3],Oe=Ue[4],ue=Ue[5],xe=Ue[6],Ae=Ue[7],pe=Ue[8],be=Ue[9],le=Ue[10],z=Ue[11],ae=Ue[12],V=Ue[13],re=Ue[14],te=Ue[15],q=rt*ue-Fe*Oe,ve=rt*xe-Se*Oe,Me=rt*Ae-ye*Oe,De=Fe*xe-Se*ue,ze=Fe*Ae-ye*ue,We=Se*Ae-ye*xe,He=pe*V-be*ae,$e=pe*re-le*ae,It=pe*te-z*ae,Yt=be*re-le*V,rr=be*te-z*V,ir=le*te-z*re,Br=q*ir-ve*rr+Me*Yt+De*It-ze*$e+We*He;return Br?(Br=1/Br,_e[0]=(ue*ir-xe*rr+Ae*Yt)*Br,_e[1]=(xe*It-Oe*ir-Ae*$e)*Br,_e[2]=(Oe*rr-ue*It+Ae*He)*Br,_e[3]=(Se*rr-Fe*ir-ye*Yt)*Br,_e[4]=(rt*ir-Se*It+ye*$e)*Br,_e[5]=(Fe*It-rt*rr-ye*He)*Br,_e[6]=(V*We-re*ze+te*De)*Br,_e[7]=(re*Me-ae*We-te*ve)*Br,_e[8]=(ae*ze-V*Me+te*q)*Br,_e):null}function N(_e,Ue,rt){return _e[0]=2/Ue,_e[1]=0,_e[2]=0,_e[3]=0,_e[4]=-2/rt,_e[5]=0,_e[6]=-1,_e[7]=1,_e[8]=1,_e}function W(_e){return"mat3("+_e[0]+", "+_e[1]+", "+_e[2]+", "+_e[3]+", "+_e[4]+", "+_e[5]+", "+_e[6]+", "+_e[7]+", "+_e[8]+")"}function H(_e){return Math.sqrt(Math.pow(_e[0],2)+Math.pow(_e[1],2)+Math.pow(_e[2],2)+Math.pow(_e[3],2)+Math.pow(_e[4],2)+Math.pow(_e[5],2)+Math.pow(_e[6],2)+Math.pow(_e[7],2)+Math.pow(_e[8],2))}function J(_e,Ue,rt){return _e[0]=Ue[0]+rt[0],_e[1]=Ue[1]+rt[1],_e[2]=Ue[2]+rt[2],_e[3]=Ue[3]+rt[3],_e[4]=Ue[4]+rt[4],_e[5]=Ue[5]+rt[5],_e[6]=Ue[6]+rt[6],_e[7]=Ue[7]+rt[7],_e[8]=Ue[8]+rt[8],_e}function Q(_e,Ue,rt){return _e[0]=Ue[0]-rt[0],_e[1]=Ue[1]-rt[1],_e[2]=Ue[2]-rt[2],_e[3]=Ue[3]-rt[3],_e[4]=Ue[4]-rt[4],_e[5]=Ue[5]-rt[5],_e[6]=Ue[6]-rt[6],_e[7]=Ue[7]-rt[7],_e[8]=Ue[8]-rt[8],_e}function ne(_e,Ue,rt){return _e[0]=Ue[0]*rt,_e[1]=Ue[1]*rt,_e[2]=Ue[2]*rt,_e[3]=Ue[3]*rt,_e[4]=Ue[4]*rt,_e[5]=Ue[5]*rt,_e[6]=Ue[6]*rt,_e[7]=Ue[7]*rt,_e[8]=Ue[8]*rt,_e}function K(_e,Ue,rt,Fe){return _e[0]=Ue[0]+rt[0]*Fe,_e[1]=Ue[1]+rt[1]*Fe,_e[2]=Ue[2]+rt[2]*Fe,_e[3]=Ue[3]+rt[3]*Fe,_e[4]=Ue[4]+rt[4]*Fe,_e[5]=Ue[5]+rt[5]*Fe,_e[6]=Ue[6]+rt[6]*Fe,_e[7]=Ue[7]+rt[7]*Fe,_e[8]=Ue[8]+rt[8]*Fe,_e}function ie(_e,Ue){return _e[0]===Ue[0]&&_e[1]===Ue[1]&&_e[2]===Ue[2]&&_e[3]===Ue[3]&&_e[4]===Ue[4]&&_e[5]===Ue[5]&&_e[6]===Ue[6]&&_e[7]===Ue[7]&&_e[8]===Ue[8]}function de(_e,Ue){var rt=_e[0],Fe=_e[1],Se=_e[2],ye=_e[3],Oe=_e[4],ue=_e[5],xe=_e[6],Ae=_e[7],pe=_e[8],be=Ue[0],le=Ue[1],z=Ue[2],ae=Ue[3],V=Ue[4],re=Ue[5],te=Ue[6],q=Ue[7],ve=Ue[8];return Math.abs(rt-be)<=g.EPSILON*Math.max(1,Math.abs(rt),Math.abs(be))&&Math.abs(Fe-le)<=g.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(le))&&Math.abs(Se-z)<=g.EPSILON*Math.max(1,Math.abs(Se),Math.abs(z))&&Math.abs(ye-ae)<=g.EPSILON*Math.max(1,Math.abs(ye),Math.abs(ae))&&Math.abs(Oe-V)<=g.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(V))&&Math.abs(ue-re)<=g.EPSILON*Math.max(1,Math.abs(ue),Math.abs(re))&&Math.abs(xe-te)<=g.EPSILON*Math.max(1,Math.abs(xe),Math.abs(te))&&Math.abs(Ae-q)<=g.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(q))&&Math.abs(pe-ve)<=g.EPSILON*Math.max(1,Math.abs(pe),Math.abs(ve))}var we=L.mul=_,Re=L.sub=Q},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.forEach=L.sqrLen=L.sqrDist=L.dist=L.div=L.mul=L.sub=L.len=void 0,L.create=p,L.clone=c,L.fromValues=h,L.copy=i,L.set=r,L.add=n,L.subtract=s,L.multiply=f,L.divide=u,L.ceil=d,L.floor=b,L.min=_,L.max=x,L.round=M,L.scale=P,L.scaleAndAdd=C,L.distance=O,L.squaredDistance=w,L.length=S,L.squaredLength=I,L.negate=j,L.inverse=N,L.normalize=W,L.dot=H,L.cross=J,L.lerp=Q,L.random=ne,L.transformMat2=K,L.transformMat2d=ie,L.transformMat3=de,L.transformMat4=we,L.rotate=Re,L.angle=_e,L.str=Ue,L.exactEquals=rt,L.equals=Fe;var e=o(97),g=v(e);function v(le){if(le&&le.__esModule)return le;var z={};if(le!=null)for(var ae in le)Object.prototype.hasOwnProperty.call(le,ae)&&(z[ae]=le[ae]);return z.default=le,z}function p(){var le=new g.ARRAY_TYPE(2);return g.ARRAY_TYPE!=Float32Array&&(le[0]=0,le[1]=0),le}function c(le){var z=new g.ARRAY_TYPE(2);return z[0]=le[0],z[1]=le[1],z}function h(le,z){var ae=new g.ARRAY_TYPE(2);return ae[0]=le,ae[1]=z,ae}function i(le,z){return le[0]=z[0],le[1]=z[1],le}function r(le,z,ae){return le[0]=z,le[1]=ae,le}function n(le,z,ae){return le[0]=z[0]+ae[0],le[1]=z[1]+ae[1],le}function s(le,z,ae){return le[0]=z[0]-ae[0],le[1]=z[1]-ae[1],le}function f(le,z,ae){return le[0]=z[0]*ae[0],le[1]=z[1]*ae[1],le}function u(le,z,ae){return le[0]=z[0]/ae[0],le[1]=z[1]/ae[1],le}function d(le,z){return le[0]=Math.ceil(z[0]),le[1]=Math.ceil(z[1]),le}function b(le,z){return le[0]=Math.floor(z[0]),le[1]=Math.floor(z[1]),le}function _(le,z,ae){return le[0]=Math.min(z[0],ae[0]),le[1]=Math.min(z[1],ae[1]),le}function x(le,z,ae){return le[0]=Math.max(z[0],ae[0]),le[1]=Math.max(z[1],ae[1]),le}function M(le,z){return le[0]=Math.round(z[0]),le[1]=Math.round(z[1]),le}function P(le,z,ae){return le[0]=z[0]*ae,le[1]=z[1]*ae,le}function C(le,z,ae,V){return le[0]=z[0]+ae[0]*V,le[1]=z[1]+ae[1]*V,le}function O(le,z){var ae=z[0]-le[0],V=z[1]-le[1];return Math.sqrt(ae*ae+V*V)}function w(le,z){var ae=z[0]-le[0],V=z[1]-le[1];return ae*ae+V*V}function S(le){var z=le[0],ae=le[1];return Math.sqrt(z*z+ae*ae)}function I(le){var z=le[0],ae=le[1];return z*z+ae*ae}function j(le,z){return le[0]=-z[0],le[1]=-z[1],le}function N(le,z){return le[0]=1/z[0],le[1]=1/z[1],le}function W(le,z){var ae=z[0],V=z[1],re=ae*ae+V*V;return re>0&&(re=1/Math.sqrt(re),le[0]=z[0]*re,le[1]=z[1]*re),le}function H(le,z){return le[0]*z[0]+le[1]*z[1]}function J(le,z,ae){var V=z[0]*ae[1]-z[1]*ae[0];return le[0]=le[1]=0,le[2]=V,le}function Q(le,z,ae,V){var re=z[0],te=z[1];return le[0]=re+V*(ae[0]-re),le[1]=te+V*(ae[1]-te),le}function ne(le,z){z=z||1;var ae=g.RANDOM()*2*Math.PI;return le[0]=Math.cos(ae)*z,le[1]=Math.sin(ae)*z,le}function K(le,z,ae){var V=z[0],re=z[1];return le[0]=ae[0]*V+ae[2]*re,le[1]=ae[1]*V+ae[3]*re,le}function ie(le,z,ae){var V=z[0],re=z[1];return le[0]=ae[0]*V+ae[2]*re+ae[4],le[1]=ae[1]*V+ae[3]*re+ae[5],le}function de(le,z,ae){var V=z[0],re=z[1];return le[0]=ae[0]*V+ae[3]*re+ae[6],le[1]=ae[1]*V+ae[4]*re+ae[7],le}function we(le,z,ae){var V=z[0],re=z[1];return le[0]=ae[0]*V+ae[4]*re+ae[12],le[1]=ae[1]*V+ae[5]*re+ae[13],le}function Re(le,z,ae,V){var re=z[0]-ae[0],te=z[1]-ae[1],q=Math.sin(V),ve=Math.cos(V);return le[0]=re*ve-te*q+ae[0],le[1]=re*q+te*ve+ae[1],le}function _e(le,z){var ae=le[0],V=le[1],re=z[0],te=z[1],q=ae*ae+V*V;q>0&&(q=1/Math.sqrt(q));var ve=re*re+te*te;ve>0&&(ve=1/Math.sqrt(ve));var Me=(ae*re+V*te)*q*ve;return Me>1?0:Me<-1?Math.PI:Math.acos(Me)}function Ue(le){return"vec2("+le[0]+", "+le[1]+")"}function rt(le,z){return le[0]===z[0]&&le[1]===z[1]}function Fe(le,z){var ae=le[0],V=le[1],re=z[0],te=z[1];return Math.abs(ae-re)<=g.EPSILON*Math.max(1,Math.abs(ae),Math.abs(re))&&Math.abs(V-te)<=g.EPSILON*Math.max(1,Math.abs(V),Math.abs(te))}var Se=L.len=S,ye=L.sub=s,Oe=L.mul=f,ue=L.div=u,xe=L.dist=O,Ae=L.sqrDist=w,pe=L.sqrLen=I,be=L.forEach=function(){var le=p();return function(z,ae,V,re,te,q){var ve=void 0,Me=void 0;for(ae||(ae=2),V||(V=0),re?Me=Math.min(re*ae+V,z.length):Me=z.length,ve=V;ve<Me;ve+=ae)le[0]=z[ve],le[1]=z[ve+1],te(le,le,q),z[ve]=le[0],z[ve+1]=le[1];return z}}()},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.forEach=L.sqrLen=L.len=L.sqrDist=L.dist=L.div=L.mul=L.sub=void 0,L.create=p,L.clone=c,L.length=h,L.fromValues=i,L.copy=r,L.set=n,L.add=s,L.subtract=f,L.multiply=u,L.divide=d,L.ceil=b,L.floor=_,L.min=x,L.max=M,L.round=P,L.scale=C,L.scaleAndAdd=O,L.distance=w,L.squaredDistance=S,L.squaredLength=I,L.negate=j,L.inverse=N,L.normalize=W,L.dot=H,L.cross=J,L.lerp=Q,L.hermite=ne,L.bezier=K,L.random=ie,L.transformMat4=de,L.transformMat3=we,L.transformQuat=Re,L.rotateX=_e,L.rotateY=Ue,L.rotateZ=rt,L.angle=Fe,L.str=Se,L.exactEquals=ye,L.equals=Oe;var e=o(97),g=v(e);function v(V){if(V&&V.__esModule)return V;var re={};if(V!=null)for(var te in V)Object.prototype.hasOwnProperty.call(V,te)&&(re[te]=V[te]);return re.default=V,re}function p(){var V=new g.ARRAY_TYPE(3);return g.ARRAY_TYPE!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V}function c(V){var re=new g.ARRAY_TYPE(3);return re[0]=V[0],re[1]=V[1],re[2]=V[2],re}function h(V){var re=V[0],te=V[1],q=V[2];return Math.sqrt(re*re+te*te+q*q)}function i(V,re,te){var q=new g.ARRAY_TYPE(3);return q[0]=V,q[1]=re,q[2]=te,q}function r(V,re){return V[0]=re[0],V[1]=re[1],V[2]=re[2],V}function n(V,re,te,q){return V[0]=re,V[1]=te,V[2]=q,V}function s(V,re,te){return V[0]=re[0]+te[0],V[1]=re[1]+te[1],V[2]=re[2]+te[2],V}function f(V,re,te){return V[0]=re[0]-te[0],V[1]=re[1]-te[1],V[2]=re[2]-te[2],V}function u(V,re,te){return V[0]=re[0]*te[0],V[1]=re[1]*te[1],V[2]=re[2]*te[2],V}function d(V,re,te){return V[0]=re[0]/te[0],V[1]=re[1]/te[1],V[2]=re[2]/te[2],V}function b(V,re){return V[0]=Math.ceil(re[0]),V[1]=Math.ceil(re[1]),V[2]=Math.ceil(re[2]),V}function _(V,re){return V[0]=Math.floor(re[0]),V[1]=Math.floor(re[1]),V[2]=Math.floor(re[2]),V}function x(V,re,te){return V[0]=Math.min(re[0],te[0]),V[1]=Math.min(re[1],te[1]),V[2]=Math.min(re[2],te[2]),V}function M(V,re,te){return V[0]=Math.max(re[0],te[0]),V[1]=Math.max(re[1],te[1]),V[2]=Math.max(re[2],te[2]),V}function P(V,re){return V[0]=Math.round(re[0]),V[1]=Math.round(re[1]),V[2]=Math.round(re[2]),V}function C(V,re,te){return V[0]=re[0]*te,V[1]=re[1]*te,V[2]=re[2]*te,V}function O(V,re,te,q){return V[0]=re[0]+te[0]*q,V[1]=re[1]+te[1]*q,V[2]=re[2]+te[2]*q,V}function w(V,re){var te=re[0]-V[0],q=re[1]-V[1],ve=re[2]-V[2];return Math.sqrt(te*te+q*q+ve*ve)}function S(V,re){var te=re[0]-V[0],q=re[1]-V[1],ve=re[2]-V[2];return te*te+q*q+ve*ve}function I(V){var re=V[0],te=V[1],q=V[2];return re*re+te*te+q*q}function j(V,re){return V[0]=-re[0],V[1]=-re[1],V[2]=-re[2],V}function N(V,re){return V[0]=1/re[0],V[1]=1/re[1],V[2]=1/re[2],V}function W(V,re){var te=re[0],q=re[1],ve=re[2],Me=te*te+q*q+ve*ve;return Me>0&&(Me=1/Math.sqrt(Me),V[0]=re[0]*Me,V[1]=re[1]*Me,V[2]=re[2]*Me),V}function H(V,re){return V[0]*re[0]+V[1]*re[1]+V[2]*re[2]}function J(V,re,te){var q=re[0],ve=re[1],Me=re[2],De=te[0],ze=te[1],We=te[2];return V[0]=ve*We-Me*ze,V[1]=Me*De-q*We,V[2]=q*ze-ve*De,V}function Q(V,re,te,q){var ve=re[0],Me=re[1],De=re[2];return V[0]=ve+q*(te[0]-ve),V[1]=Me+q*(te[1]-Me),V[2]=De+q*(te[2]-De),V}function ne(V,re,te,q,ve,Me){var De=Me*Me,ze=De*(2*Me-3)+1,We=De*(Me-2)+Me,He=De*(Me-1),$e=De*(3-2*Me);return V[0]=re[0]*ze+te[0]*We+q[0]*He+ve[0]*$e,V[1]=re[1]*ze+te[1]*We+q[1]*He+ve[1]*$e,V[2]=re[2]*ze+te[2]*We+q[2]*He+ve[2]*$e,V}function K(V,re,te,q,ve,Me){var De=1-Me,ze=De*De,We=Me*Me,He=ze*De,$e=3*Me*ze,It=3*We*De,Yt=We*Me;return V[0]=re[0]*He+te[0]*$e+q[0]*It+ve[0]*Yt,V[1]=re[1]*He+te[1]*$e+q[1]*It+ve[1]*Yt,V[2]=re[2]*He+te[2]*$e+q[2]*It+ve[2]*Yt,V}function ie(V,re){re=re||1;var te=g.RANDOM()*2*Math.PI,q=g.RANDOM()*2-1,ve=Math.sqrt(1-q*q)*re;return V[0]=Math.cos(te)*ve,V[1]=Math.sin(te)*ve,V[2]=q*re,V}function de(V,re,te){var q=re[0],ve=re[1],Me=re[2],De=te[3]*q+te[7]*ve+te[11]*Me+te[15];return De=De||1,V[0]=(te[0]*q+te[4]*ve+te[8]*Me+te[12])/De,V[1]=(te[1]*q+te[5]*ve+te[9]*Me+te[13])/De,V[2]=(te[2]*q+te[6]*ve+te[10]*Me+te[14])/De,V}function we(V,re,te){var q=re[0],ve=re[1],Me=re[2];return V[0]=q*te[0]+ve*te[3]+Me*te[6],V[1]=q*te[1]+ve*te[4]+Me*te[7],V[2]=q*te[2]+ve*te[5]+Me*te[8],V}function Re(V,re,te){var q=te[0],ve=te[1],Me=te[2],De=te[3],ze=re[0],We=re[1],He=re[2],$e=ve*He-Me*We,It=Me*ze-q*He,Yt=q*We-ve*ze,rr=ve*Yt-Me*It,ir=Me*$e-q*Yt,Br=q*It-ve*$e,tr=De*2;return $e*=tr,It*=tr,Yt*=tr,rr*=2,ir*=2,Br*=2,V[0]=ze+$e+rr,V[1]=We+It+ir,V[2]=He+Yt+Br,V}function _e(V,re,te,q){var ve=[],Me=[];return ve[0]=re[0]-te[0],ve[1]=re[1]-te[1],ve[2]=re[2]-te[2],Me[0]=ve[0],Me[1]=ve[1]*Math.cos(q)-ve[2]*Math.sin(q),Me[2]=ve[1]*Math.sin(q)+ve[2]*Math.cos(q),V[0]=Me[0]+te[0],V[1]=Me[1]+te[1],V[2]=Me[2]+te[2],V}function Ue(V,re,te,q){var ve=[],Me=[];return ve[0]=re[0]-te[0],ve[1]=re[1]-te[1],ve[2]=re[2]-te[2],Me[0]=ve[2]*Math.sin(q)+ve[0]*Math.cos(q),Me[1]=ve[1],Me[2]=ve[2]*Math.cos(q)-ve[0]*Math.sin(q),V[0]=Me[0]+te[0],V[1]=Me[1]+te[1],V[2]=Me[2]+te[2],V}function rt(V,re,te,q){var ve=[],Me=[];return ve[0]=re[0]-te[0],ve[1]=re[1]-te[1],ve[2]=re[2]-te[2],Me[0]=ve[0]*Math.cos(q)-ve[1]*Math.sin(q),Me[1]=ve[0]*Math.sin(q)+ve[1]*Math.cos(q),Me[2]=ve[2],V[0]=Me[0]+te[0],V[1]=Me[1]+te[1],V[2]=Me[2]+te[2],V}function Fe(V,re){var te=i(V[0],V[1],V[2]),q=i(re[0],re[1],re[2]);W(te,te),W(q,q);var ve=H(te,q);return ve>1?0:ve<-1?Math.PI:Math.acos(ve)}function Se(V){return"vec3("+V[0]+", "+V[1]+", "+V[2]+")"}function ye(V,re){return V[0]===re[0]&&V[1]===re[1]&&V[2]===re[2]}function Oe(V,re){var te=V[0],q=V[1],ve=V[2],Me=re[0],De=re[1],ze=re[2];return Math.abs(te-Me)<=g.EPSILON*Math.max(1,Math.abs(te),Math.abs(Me))&&Math.abs(q-De)<=g.EPSILON*Math.max(1,Math.abs(q),Math.abs(De))&&Math.abs(ve-ze)<=g.EPSILON*Math.max(1,Math.abs(ve),Math.abs(ze))}var ue=L.sub=f,xe=L.mul=u,Ae=L.div=d,pe=L.dist=w,be=L.sqrDist=S,le=L.len=h,z=L.sqrLen=I,ae=L.forEach=function(){var V=p();return function(re,te,q,ve,Me,De){var ze=void 0,We=void 0;for(te||(te=3),q||(q=0),ve?We=Math.min(ve*te+q,re.length):We=re.length,ze=q;ze<We;ze+=te)V[0]=re[ze],V[1]=re[ze+1],V[2]=re[ze+2],Me(V,V,De),re[ze]=V[0],re[ze+1]=V[1],re[ze+2]=V[2];return re}}()},function(B,L,o){var e=o(7),g=o(11),v=o(200),p=5,c=7,h=[1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],i=[1,2,4,5,10],r=1e-12;B.exports=function(n){var s=n.min,f=n.max,u=n.interval,d=n.minTickInterval,b=[],_=n.minCount||p,x=n.maxCount||c,M=_===x,P=e(n.minLimit)?-Infinity:n.minLimit,C=e(n.maxLimit)?Infinity:n.maxLimit,O=(_+x)/2,w=O,S=n.snapArray?n.snapArray:M?h:i;if(s===P&&f===C&&M&&(u=(f-s)/(w-1)),e(s)&&(s=0),e(f)&&(f=0),Math.abs(f-s)<r&&(s===0?f=1:s>0?s=0:f=0,f-s<5&&!u&&f-s>=1&&(u=1)),e(u)){var I=(f-s)/(O-1);u=v.snapFactorTo(I,S,"ceil"),x!==_&&(w=parseInt((f-s)/u,10),w>x&&(w=x),w<_&&(w=_),u=v.snapFactorTo((f-s)/(w-1),S))}if(g(d)&&u<d&&(u=d),n.interval||x!==_){f=Math.min(v.snapMultiple(f,u,"ceil"),C),s=Math.max(v.snapMultiple(s,u,"floor"),P),w=Math.round((f-s)/u),s=v.fixedBase(s,u),f=v.fixedBase(f,u);for(var j=null;s>P&&P>-Infinity&&(j===null||s<j);)j=s,s=v.fixedBase(s-u,u)}else{O=parseInt(O,10);var N=(f+s)/2,W=v.snapMultiple(N,u,"ceil"),H=Math.floor((O-2)/2),J=W+H*u,Q;O%2==0?Q=W-H*u:Q=W-(H+1)*u;for(var ne=null;J<f&&(ne===null||J>ne);)ne=J,J=v.fixedBase(J+u,u);for(var K=null;Q>s&&(K===null||Q<K);)K=Q,Q=v.fixedBase(Q-u,u);f=J,s=Q}f=Math.min(f,C),s=Math.max(s,P),b.push(s);for(var ie=1;ie<w;ie++){var de=v.fixedBase(u*ie+s,u);de<f&&b.push(de)}return b[b.length-1]<f&&b.push(f),{min:s,max:f,interval:u,count:w,ticks:b}}},function(B,L,o){var e=o(200),g=o(7),v=6,p=[1,2,4,6,8,12],c=60*1e3,h=3600*1e3,i=24*3600*1e3;function r(x){return new Date(x).getFullYear()}function n(x){return new Date(x,0,1).getTime()}function s(x){return new Date(x).getMonth()}function f(x,M){var P=r(x),C=r(M),O=s(x),w=s(M);return(C-P)*12+(w-O)%12}function u(x,M){return new Date(x,M,1).getTime()}function d(x,M){return Math.ceil((M-x)/i)}function b(x,M){return Math.ceil((M-x)/h)}function _(x,M){return Math.ceil((M-x)/(60*1e3))}B.exports=function(x){var M=x.minInterval,P=[],C=x.min,O=x.max,w=x.interval,S;if(O===C&&(O=C+i),g(w)){var I=O-C,j=i,N=365*j;w=parseInt(I/(x.maxCount||v),10),M&&M>w&&(w=M);var W=w/N,H=r(C);if(W>.51){for(var J=Math.ceil(W),Q=r(O),ne=H;ne<=Q+J;ne=ne+J)P.push(n(ne));w=null}else if(W>.0834){for(var K=Math.ceil(W/.0834),ie=s(C),de=f(C,O),we=0;we<=de+K;we=we+K)P.push(u(H,we+ie));w=null}else if(w>j*.5){var Re=new Date(C),_e=Re.getFullYear(),Ue=Re.getMonth(C),rt=Re.getDate(),Fe=Math.ceil(w/j),Se=d(C,O);w=Fe*j;for(var ye=0;ye<Se+Fe;ye=ye+Fe)P.push(new Date(_e,Ue,rt+ye).getTime())}else if(w>h){var Oe=new Date(C),ue=Oe.getFullYear(),xe=Oe.getMonth(C),Ae=Oe.getDate(),pe=Oe.getHours(),be=e.snapTo(p,Math.ceil(w/h)),le=b(C,O);w=be*h;for(var z=0;z<=le+be;z=z+be)P.push(new Date(ue,xe,Ae,pe+z).getTime())}else if(w>c){var ae=_(C,O),V=Math.ceil(w/c);w=V*c;for(var re=0;re<=ae+V;re=re+V)P.push(C+re*c)}else{w<1e3&&(w=1e3),C=Math.floor(C/1e3)*1e3;var te=Math.ceil((O-C)/1e3),q=Math.ceil(w/1e3);w=q*1e3;for(var ve=0;ve<te+q;ve=ve+q)P.push(C+ve*1e3)}}if(!P.length){C=Math.floor(C/1e3)*1e3,O=Math.ceil(O/1e3)*1e3,S=(O-C)/w;for(var Me=0;Me<=S;Me++)P.push(e.fixedBase(w*Me+C,w))}return{max:O,min:C,interval:w,ticks:P,count:P.length}}},function(B,L,o){function e(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,c.__proto__=h}var g=o(28),v=o(11),p=function(c){e(h,c);function h(){return c.apply(this,arguments)||this}var i=h.prototype;return i._initDefaultCfg=function(){c.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},i.getText=function(){return this.value.toString()},i.scale=function(n){return this.value!==n&&v(n)?n:this.range[0]},i.invert=function(){return this.value},h}(g);g.Identity=p,B.exports=p},function(B,L,o){function e(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r}var g=o(3),v=o(28),p=o(61);function c(i,r){return i===1?1:Math.log(r)/Math.log(i)}var h=function(i){e(r,i);function r(){return i.apply(this,arguments)||this}var n=r.prototype;return n._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},n.calculateTicks=function(){var f=this,u=f.base,d;if(f.min<0)throw new Error("The minimum value must be greater than zero!");var b=c(u,f.max);if(f.min>0)d=Math.floor(c(u,f.min));else{var _=f.values,x=f.max;g(_,function(S){S>0&&S<x&&(x=S)}),x===f.max&&(x=f.max/u),x>1&&(x=1),d=Math.floor(c(u,x)),f._minTick=d,f.positiveMin=x}for(var M=b-d,P=f.tickCount,C=Math.ceil(M/P),O=[],w=d;w<b+C;w=w+C)O.push(Math.pow(u,w));return f.min===0&&O.unshift(0),O},n._getScalePercent=function(f){var u=this.max,d=this.min;if(u===d||f<=0)return 0;var b=this.base,_=this.positiveMin;_&&(d=_*1/b);var x;return f<_?x=f/_/(c(b,u)-c(b,d)):x=(c(b,f)-c(b,d))/(c(b,u)-c(b,d)),x},n.scale=function(f){var u=this._getScalePercent(f),d=this.rangeMin(),b=this.rangeMax();return d+u*(b-d)},n.invert=function(f){var u=this.base,d=c(u,this.max),b=this.rangeMin(),_=this.rangeMax()-b,x,M=this.positiveMin;if(M){if(f===0)return 0;x=c(u,M/u);var P=1/(d-x)*_;if(f<P)return f/P*M}else x=c(u,this.min);var C=(f-b)/_,O=C*(d-x)+x;return Math.pow(u,O)},r}(p);v.Log=h,B.exports=h},function(B,L,o){function e(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.__proto__=i}var g=o(28),v=o(61);function p(h,i){var r=Math.E,n=Math.pow(r,Math.log(i)/h);return n}var c=function(h){e(i,h);function i(){return h.apply(this,arguments)||this}var r=i.prototype;return r._initDefaultCfg=function(){h.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},r.calculateTicks=function(){var s=this,f=s.exponent,u,d=Math.ceil(p(f,s.max));if(s.min>=0?u=Math.floor(p(f,s.min)):u=0,u>d){var b=d;d=u,u=b}for(var _=d-u,x=s.tickCount,M=Math.ceil(_/x),P=[],C=u;C<d+M;C=C+M)P.push(Math.pow(C,f));return P},r._getScalePercent=function(s){var f=this.max,u=this.min;if(f===u)return 0;var d=this.exponent,b=(p(d,s)-p(d,u))/(p(d,f)-p(d,u));return b},r.scale=function(s){var f=this._getScalePercent(s),u=this.rangeMin(),d=this.rangeMax();return u+f*(d-u)},r.invert=function(s){var f=(s-this.rangeMin())/(this.rangeMax()-this.rangeMin()),u=this.exponent,d=p(u,this.max),b=p(u,this.min),_=f*(d-b)+b;return Math.pow(_,u)},i}(v);g.Pow=c,B.exports=c},function(B,L,o){function e(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,u.__proto__=d}var g=o(28),v=o(201),p=o(255),c=o(199),h=o(62),i=o(3),r=o(11),n=o(33),s=o(15),f=function(u){e(d,u);function d(){return u.apply(this,arguments)||this}var b=d.prototype;return b._initDefaultCfg=function(){u.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},b.init=function(){var x=this,M=this.values;i(M,function(P,C){M[C]=x._toTimeStamp(P)}),this.sortable&&M.sort(function(P,C){return P-C}),x.ticks||(x.ticks=this.calculateTicks())},b.calculateTicks=function(){var x=this,M=x.tickCount,P;if(M){var C=c({maxCount:M,data:x.values,isRounding:x.isRounding});P=C.ticks}else P=x.values;return P},b.translate=function(x){x=this._toTimeStamp(x);var M=this.values.indexOf(x);return M===-1&&(r(x)&&x<this.values.length?M=x:M=NaN),M},b.scale=function(x){var M=this.rangeMin(),P=this.rangeMax(),C=this.translate(x),O;return this.values.length===1||isNaN(C)?O=C:C>-1?O=C/(this.values.length-1):O=0,M+O*(P-M)},b.getText=function(x){var M="",P=this.translate(x);P>-1?M=this.values[P]:M=x;var C=this.formatter;return M=parseInt(M,10),M=C?C(M):p.format(M,this.mask),M},b.getTicks=function(){var x=this,M=this.ticks,P=[];return i(M,function(C){var O;n(C)?O=C:O={text:s(C)?C:x.getText(C),value:x.scale(C),tickValue:C},P.push(O)}),P},b._toTimeStamp=function(x){return h.toTimeStamp(x)},d}(v);g.TimeCat=f,B.exports=f},function(B,L,o){function e(f,u){f.prototype=Object.create(u.prototype),f.prototype.constructor=f,f.__proto__=u}var g=o(255),v=o(3),p=o(7),c=o(15),h=o(28),i=o(61),r=o(407),n=o(62),s=function(f){e(u,f);function u(){return f.apply(this,arguments)||this}var d=u.prototype;return d._initDefaultCfg=function(){f.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},d.init=function(){var _=this,x=_.values;if(x&&x.length){var M=[],P=Infinity,C=P,O=0;v(x,function(w){var S=_._toTimeStamp(w);if(isNaN(S))throw new TypeError("Invalid Time: "+w);P>S?(C=P,P=S):C>S&&(C=S),O<S&&(O=S),M.push(S)}),x.length>1&&(_.minTickInterval=C-P),(p(_.min)||_._toTimeStamp(_.min)>P)&&(_.min=P),(p(_.max)||_._toTimeStamp(_.max)<O)&&(_.max=O)}f.prototype.init.call(this)},d.calculateTicks=function(){var _=this,x=_.min,M=_.max,P=_.tickCount,C=_.tickInterval,O=r({min:x,max:M,minCount:P,maxCount:P,interval:C,minInterval:_.minTickInterval});return O.ticks},d.getText=function(_){var x=this.formatter;return _=this.translate(_),_=x?x(_):g.format(_,this.mask),_},d.scale=function(_){return c(_)&&(_=this.translate(_)),f.prototype.scale.call(this,_)},d.translate=function(_){return this._toTimeStamp(_)},d._toTimeStamp=function(_){return n.toTimeStamp(_)},u}(i);h.Time=s,B.exports=s},function(B,L,o){var e=o(105),g=o(63),v=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e(c,function(i){return!g(h,i)})};B.exports=v},function(B,L,o){var e=o(14),g=o(45),v=o(212);function p(c,h){var i=void 0;if(e(h)&&(i=h),g(h)&&(i=function(s){return v(s,h)}),i){for(var r=0;r<c.length;r+=1)if(i(c[r]))return c[r]}return null}B.exports=p},function(B,L,o){var e=o(7),g=o(5),v=function(c,h){for(var i=null,r=0;r<c.length;r++){var n=c[r],s=n[h];if(!e(s)){g(s)?i=s[0]:i=s;break}}return i};B.exports=v},function(B,L,o){var e=o(5),g=function v(p){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e(p))c.push(p);else for(var h=0;h<p.length;h+=1)v(p[h],c);return c};B.exports=g},function(B,L,o){var e=o(5),g=o(3),v=function(c){if(!e(c))return c;var h=[];return g(c,function(i){e(i)?g(i,function(r){h.push(r)}):h.push(i)}),h};B.exports=v},function(B,L,o){var e=o(105),g=o(5),v=function(c){if(c=e(c,function(s){return!isNaN(s)}),!c.length)return{min:0,max:0};if(g(c[0])){for(var h=[],i=0;i<c.length;i++)h=h.concat(c[i]);c=h}var r=Math.max.apply(null,c),n=Math.min.apply(null,c);return{min:n,max:r}};B.exports=v},function(B,L,o){B.exports={contains:o(63),difference:o(413),find:o(414),firstValue:o(415),flatten:o(417),flattenDeep:o(416),getRange:o(418),merge:o(64),pull:o(98),pullAt:o(203),reduce:o(420),remove:o(421),sortBy:o(422),union:o(423),uniq:o(204),valuesOfKey:o(99)}},function(B,L,o){var e=o(5),g=o(45),v=o(3),p=function(h,i,r){if(!e(h)&&!g(h))return h;var n=r;return v(h,function(s,f){n=i(n,s,f)}),n};B.exports=p},function(B,L,o){var e=o(23),g=o(203),v=function(c,h){var i=[];if(!e(c))return i;for(var r=-1,n=[],s=c.length;++r<s;){var f=c[r];h(f,r,c)&&(i.push(f),n.push(r))}return g(c,n),i};B.exports=v},function(B,L,o){var e=o(15),g=o(14),v=o(5);function p(c,h){var i=void 0;if(g(h))i=function(s,f){return h(s)-h(f)};else{var r=[];e(h)?r.push(h):v(h)&&(r=h),i=function(s,f){for(var u=0;u<r.length;u+=1){var d=r[u];if(s[d]>f[d])return 1;if(s[d]<f[d])return-1}return 0}}return c.sort(i),c}B.exports=p},function(B,L,o){var e=o(3),g=o(43),v=o(204),p=function(){var h=[],i=g(arguments);return e(i,function(r){h=h.concat(r)}),v(h)};B.exports=p},function(B,L){function o(e,g,v){var p=void 0;return function(){var c=this,h=arguments,i=function(){p=null,v||e.apply(c,h)},r=v&&!p;clearTimeout(p),p=setTimeout(i,g),r&&e.apply(c,h)}}B.exports=o},function(B,L){B.exports=function(e,g,v){if(e){if(e.addEventListener)return e.addEventListener(g,v,!1),{remove:function(){e.removeEventListener(g,v,!1)}};if(e.attachEvent)return e.attachEvent("on"+g,v),{remove:function(){e.detachEvent("on"+g,v)}}}}},function(B,L){B.exports=function(e,g){if(e&&e.getBoundingClientRect){var v=e.getBoundingClientRect(),p=document.documentElement.clientTop,c=document.documentElement.clientLeft;return{top:v.top-p,bottom:v.bottom-p,left:v.left-c,right:v.right-c}}return g||null}},function(B,L){B.exports=function(e,g){var v=this.getStyle(e,"height",g);return v==="auto"&&(v=e.offsetHeight),parseFloat(v)}},function(B,L){B.exports=function(e,g){var v=this.getHeight(e,g),p=parseFloat(this.getStyle(e,"borderTopWidth"))||0,c=parseFloat(this.getStyle(e,"paddingTop"))||0,h=parseFloat(this.getStyle(e,"paddingBottom"))||0,i=parseFloat(this.getStyle(e,"borderBottomWidth"))||0;return v+p+i+c+h}},function(B,L){B.exports=function(e,g){var v=this.getWidth(e,g),p=parseFloat(this.getStyle(e,"borderLeftWidth"))||0,c=parseFloat(this.getStyle(e,"paddingLeft"))||0,h=parseFloat(this.getStyle(e,"paddingRight"))||0,i=parseFloat(this.getStyle(e,"borderRightWidth"))||0;return v+p+i+c+h}},function(B,L){B.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(B,L,o){var e=o(7);B.exports=function(v,p,c){try{return window.getComputedStyle?window.getComputedStyle(v,null)[p]:v.currentStyle[p]}catch(h){return e(c)?null:c}}},function(B,L){B.exports=function(e,g){var v=this.getStyle(e,"width",g);return v==="auto"&&(v=e.offsetWidth),parseFloat(v)}},function(B,L,o){B.exports={addEventListener:o(425),createDom:o(101),getBoundingClientRect:o(426),getHeight:o(427),getOuterHeight:o(428),getOuterWidth:o(429),getRatio:o(430),getStyle:o(431),getWidth:o(432),modifyCSS:o(102),requestAnimationFrame:o(103)}},function(B,L){function o(e,g){return e["_wrap_"+g]}B.exports=o},function(B,L,o){B.exports={getWrapBehavior:o(434),wrapBehavior:o(436)}},function(B,L){function o(e,g){if(e["_wrap_"+g])return e["_wrap_"+g];var v=function(c){e[g](c)};return e["_wrap_"+g]=v,v}B.exports=o},function(B,L,o){var e=o(438);B.exports={number2color:e,numberToColor:e,parsePath:o(439),parseRadius:o(440)}},function(B,L){var o={};B.exports=function(g){var v=o[g];if(!v){for(var p=g.toString(16),c=p.length;c<6;c++)p="0"+p;v="#"+p,o[g]=v}return v}},function(B,L,o){var e=o(5),g=o(15),v=o(3),p=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,c=/[^\s\,]+/ig;B.exports=function(i){if(i=i||[],e(i))return i;if(g(i))return i=i.match(p),v(i,function(r,n){if(r=r.match(c),r[0].length>1){var s=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=s}v(r,function(f,u){isNaN(f)||(r[u]=+f)}),i[n]=r}),i}},function(B,L,o){var e=o(5);B.exports=function(v){var p=0,c=0,h=0,i=0;return e(v)?v.length===1?p=c=h=i=v[0]:v.length===2?(p=h=v[0],c=i=v[1]):v.length===3?(p=v[0],c=i=v[1],h=v[2]):(p=v[0],c=v[1],h=v[2],i=v[3]):p=c=h=i=v,{r1:p,r2:c,r3:h,r4:i}}},function(B,L,o){var e=o(23),g=function(p,c){if(!e(p))return-1;var h=Array.prototype.indexOf;if(h)return h.call(p,c);for(var i=-1,r=0;r<p.length;r++)if(p[r]===c){i=r;break}return i};B.exports=g},function(B,L,o){var e=o(14),g=o(66),v=function(c,h,i){return e(i)?!!i(c,h):g(c,h)};B.exports=v},function(B,L,o){var e=o(3),g=o(23),v=function(c,h){if(!g(c))return c;var i=[];return e(c,function(r,n){i.push(h(r,n))}),i};B.exports=v},function(B,L){var o=function(g,v){var p=v.toString(),c=p.indexOf(".");if(c===-1)return Math.round(g);var h=p.substr(c+1).length;return h>20&&(h=20),parseFloat(g.toFixed(h))};B.exports=o},function(B,L,o){var e=o(42);B.exports={clamp:o(67),fixedBase:o(444),isDecimal:o(446),isEven:o(447),isInteger:o(448),isNegative:o(449),isNumberEqual:e,isOdd:o(450),isPositive:o(451),maxBy:o(209),minBy:o(452),mod:o(107),snapEqual:e,toDegree:o(108),toInt:o(210),toInteger:o(210),toRadian:o(109)}},function(B,L,o){var e=o(11),g=function(p){return e(p)&&p%1!=0};B.exports=g},function(B,L,o){var e=o(11),g=function(p){return e(p)&&p%2==0};B.exports=g},function(B,L,o){var e=o(11),g=Number.isInteger?Number.isInteger:function(v){return e(v)&&v%1==0};B.exports=g},function(B,L,o){var e=o(11),g=function(p){return e(p)&&p<0};B.exports=g},function(B,L,o){var e=o(11),g=function(p){return e(p)&&p%2!=0};B.exports=g},function(B,L,o){var e=o(11),g=function(p){return e(p)&&p>0};B.exports=g},function(B,L,o){var e=o(5),g=o(14),v=o(3),p=function(h,i){if(!!e(h)){var r=h[0],n=void 0;g(i)?n=i(h[0]):n=h[0][i];var s=void 0;return v(h,function(f){g(i)?s=i(f):s=f[i],s<n&&(r=f,n=s)}),r}};B.exports=p},function(B,L,o){B.exports=o(3)},function(B,L,o){B.exports=o(211)},function(B,L,o){var e=o(63),g=o(214);B.exports=function(v,p){return e(g(v),p)}},function(B,L,o){B.exports={forIn:o(453),has:o(211),hasKey:o(454),hasValue:o(455),keys:o(213),isMatch:o(212),values:o(214)}},function(B,L,o){var e=o(461);function g(p,c,h){var i=null,r=h;return c<r&&(r=c,i="add"),p<r&&(r=p,i="del"),{type:i,min:r}}var v=function(c,h){var i=c.length,r=h.length,n=void 0,s=void 0,f=0;if(i===0||r===0)return null;for(var u=[],d=0;d<=i;d++)u[d]=[],u[d][0]={min:d};for(var b=0;b<=r;b++)u[0][b]={min:b};for(var _=1;_<=i;_++){n=c[_-1];for(var x=1;x<=r;x++){s=h[x-1],e(n,s)?f=0:f=1;var M=u[_-1][x].min+1,P=u[_][x-1].min+1,C=u[_-1][x-1].min+f;u[_][x]=g(M,P,C)}}return u};B.exports=function(c,h){var i=v(c,h),r=c.length,n=h.length,s=[],f=1,u=1;if(i[r][n]!==r){for(var d=1;d<=r;d++){var b=i[d][d].min;u=d;for(var _=f;_<=n;_++)i[d][_].min<b&&(b=i[d][_].min,u=_);f=u,i[d][f].type&&s.push({index:d-1,type:i[d][f].type})}for(var x=s.length-1;x>=0;x--)f=s[x].index,s[x].type==="add"?c.splice(f,0,[].concat(c[f])):c.splice(f,1)}if(r=c.length,r<n)for(var M=0;M<n-r;M++)c[r-1][0]==="z"||c[r-1][0]==="Z"?c.splice(r-2,0,c[r-2]):c.push(c[r-1]);return c}},function(B,L){function o(v,p){var c=[],h=[];function i(r,n){if(r.length===1)c.push(r[0]),h.push(r[0]);else{for(var s=[],f=0;f<r.length-1;f++)f===0&&c.push(r[0]),f===r.length-2&&h.push(r[f+1]),s[f]=[(1-n)*r[f][0]+n*r[f+1][0],(1-n)*r[f][1]+n*r[f+1][1]];i(s,n)}}return v.length&&i(v,p),{left:c,right:h.reverse()}}function e(v,p,c){var h=[[v[1],v[2]]];c=c||2;var i=[];p[0]==="A"?(h.push(p[6]),h.push(p[7])):p[0]==="C"?(h.push([p[1],p[2]]),h.push([p[3],p[4]]),h.push([p[5],p[6]])):p[0]==="S"||p[0]==="Q"?(h.push([p[1],p[2]]),h.push([p[3],p[4]])):h.push([p[1],p[2]]);for(var r=h,n=1/c,s=0;s<c-1;s++){var f=n/(1-n*s),u=o(r,f);i.push(u.left),r=u.right}i.push(r);var d=i.map(function(b){var _=[];return b.length===4&&(_.push("C"),_=_.concat(b[2])),b.length>=3&&(b.length===3&&_.push("Q"),_=_.concat(b[1])),b.length===2&&_.push("L"),_=_.concat(b[b.length-1]),_});return d}function g(v,p,c){if(c===1)return[[].concat(v)];var h=[];if(p[0]==="L"||p[0]==="C"||p[0]==="Q")h=h.concat(e(v,p,c));else{var i=[].concat(v);i[0]==="M"&&(i[0]="L");for(var r=0;r<=c-1;r++)h.push(i)}return h}B.exports=function(p,c){if(p.length===1)return p;var h=p.length-1,i=c.length-1,r=h/i,n=[];if(p.length===1&&p[0][0]==="M"){for(var s=0;s<i-h;s++)p.push(p[0]);return p}for(var f=0;f<i;f++){var u=Math.floor(r*f);n[u]=(n[u]||0)+1}var d=n.reduce(function(b,_,x){return x===h?b.concat(p[h]):b.concat(g(p[x],p[x+1],_))},[]);return d.unshift(p[0]),(c[i]==="Z"||c[i]==="z")&&d.push("Z"),d}},function(B,L){function o(g){var v=[];switch(g[0]){case"M":v.push([g[1],g[2]]);break;case"L":v.push([g[1],g[2]]);break;case"A":v.push([g[6],g[7]]);break;case"Q":v.push([g[3],g[4]]),v.push([g[1],g[2]]);break;case"T":v.push([g[1],g[2]]);break;case"C":v.push([g[5],g[6]]),v.push([g[1],g[2]]),v.push([g[3],g[4]]);break;case"S":v.push([g[3],g[4]]),v.push([g[1],g[2]]);break;case"H":v.push([g[1],g[1]]);break;case"V":v.push([g[1],g[1]]);break;default:}return v}function e(g,v,p){for(var c=[].concat(g),h=void 0,i=1/(p+1),r=o(v)[0],n=1;n<=p;n++)i*=n,h=Math.floor(g.length*i),h===0?c.unshift([r[0]*i+g[h][0]*(1-i),r[1]*i+g[h][1]*(1-i)]):c.splice(h,0,[r[0]*i+g[h][0]*(1-i),r[1]*i+g[h][1]*(1-i)]);return c}B.exports=function(v,p){if(v.length<=1)return v;for(var c=void 0,h=0;h<p.length;h++)if(v[h][0]!==p[h][0])switch(c=o(v[h]),p[h][0]){case"M":v[h]=["M"].concat(c[0]);break;case"L":v[h]=["L"].concat(c[0]);break;case"A":v[h]=[].concat(p[h]),v[h][6]=c[0][0],v[h][7]=c[0][1];break;case"Q":if(c.length<2)if(h>0)c=e(c,v[h-1],1);else{v[h]=p[h];break}v[h]=["Q"].concat(c.reduce(function(i,r){return i.concat(r)},[]));break;case"T":v[h]=["T"].concat(c[0]);break;case"C":if(c.length<3)if(h>0)c=e(c,v[h-1],2);else{v[h]=p[h];break}v[h]=["C"].concat(c.reduce(function(i,r){return i.concat(r)},[]));break;case"S":if(c.length<2)if(h>0)c=e(c,v[h-1],1);else{v[h]=p[h];break}v[h]=["S"].concat(c.reduce(function(i,r){return i.concat(r)},[]));break;default:v[h]=p[h]}return v}},function(B,L,o){var e=o(462),g=o(218),v=o(219),p=o(215);B.exports={catmullRom2Bezier:p,catmullRomToBezier:p,fillPath:o(458),fillPathByDiff:o(457),formatPath:o(459),intersection:e,pathIntersection:e,parsePathArray:o(216),parsePathString:o(217),pathToAbsolute:g,path2absolute:g,pathTocurve:v,path2curve:v,rectPath:o(220)}},function(B,L,o){var e=o(3);B.exports=function(v,p){if(v.length!==p.length)return!1;var c=!0;return e(v,function(h,i){if(h!==p[i])return c=!1,!1}),c}},function(B,L,o){var e=o(5),g=o(220),v=o(219),p=function(x,M,P,C,O){var w=-3*M+9*P-9*C+3*O,S=x*w+6*M-12*P+6*C;return x*S-3*M+3*P},c=function(x,M,P,C,O,w,S,I,j){j===null&&(j=1),j=j>1?1:j<0?0:j;for(var N=j/2,W=12,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],J=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Q=0,ne=0;ne<W;ne++){var K=N*H[ne]+N,ie=p(K,x,P,O,S),de=p(K,M,C,w,I),we=ie*ie+de*de;Q+=J[ne]*Math.sqrt(we)}return N*Q},h=function(x,M,P,C,O,w,S,I){for(var j=[],N=[[],[]],W=void 0,H=void 0,J=void 0,Q=void 0,ne=0;ne<2;++ne){if(ne===0?(H=6*x-12*P+6*O,W=-3*x+9*P-9*O+3*S,J=3*P-3*x):(H=6*M-12*C+6*w,W=-3*M+9*C-9*w+3*I,J=3*C-3*M),Math.abs(W)<1e-12){if(Math.abs(H)<1e-12)continue;Q=-J/H,Q>0&&Q<1&&j.push(Q);continue}var K=H*H-4*J*W,ie=Math.sqrt(K);if(!(K<0)){var de=(-H+ie)/(2*W);de>0&&de<1&&j.push(de);var we=(-H-ie)/(2*W);we>0&&we<1&&j.push(we)}}for(var Re=j.length,_e=Re,Ue=void 0;Re--;)Q=j[Re],Ue=1-Q,N[0][Re]=Ue*Ue*Ue*x+3*Ue*Ue*Q*P+3*Ue*Q*Q*O+Q*Q*Q*S,N[1][Re]=Ue*Ue*Ue*M+3*Ue*Ue*Q*C+3*Ue*Q*Q*w+Q*Q*Q*I;return N[0][_e]=x,N[1][_e]=M,N[0][_e+1]=S,N[1][_e+1]=I,N[0].length=N[1].length=_e+2,{min:{x:Math.min.apply(0,N[0]),y:Math.min.apply(0,N[1])},max:{x:Math.max.apply(0,N[0]),y:Math.max.apply(0,N[1])}}},i=function(x,M,P,C,O,w,S,I){if(!(Math.max(x,P)<Math.min(O,S)||Math.min(x,P)>Math.max(O,S)||Math.max(M,C)<Math.min(w,I)||Math.min(M,C)>Math.max(w,I))){var j=(x*C-M*P)*(O-S)-(x-P)*(O*I-w*S),N=(x*C-M*P)*(w-I)-(M-C)*(O*I-w*S),W=(x-P)*(w-I)-(M-C)*(O-S);if(!!W){var H=j/W,J=N/W,Q=+H.toFixed(2),ne=+J.toFixed(2);if(!(Q<+Math.min(x,P).toFixed(2)||Q>+Math.max(x,P).toFixed(2)||Q<+Math.min(O,S).toFixed(2)||Q>+Math.max(O,S).toFixed(2)||ne<+Math.min(M,C).toFixed(2)||ne>+Math.max(M,C).toFixed(2)||ne<+Math.min(w,I).toFixed(2)||ne>+Math.max(w,I).toFixed(2)))return{x:H,y:J}}}},r=function(x,M,P){return M>=x.x&&M<=x.x+x.width&&P>=x.y&&P<=x.y+x.height},n=function(x,M,P,C){return x===null&&(x=M=P=C=0),M===null&&(M=x.y,P=x.width,C=x.height,x=x.x),{x,y:M,width:P,w:P,height:C,h:C,x2:x+P,y2:M+C,cx:x+P/2,cy:M+C/2,r1:Math.min(P,C)/2,r2:Math.max(P,C)/2,r0:Math.sqrt(P*P+C*C)/2,path:g(x,M,P,C),vb:[x,M,P,C].join(" ")}},s=function(x,M){return x=n(x),M=n(M),r(M,x.x,x.y)||r(M,x.x2,x.y)||r(M,x.x,x.y2)||r(M,x.x2,x.y2)||r(x,M.x,M.y)||r(x,M.x2,M.y)||r(x,M.x,M.y2)||r(x,M.x2,M.y2)||(x.x<M.x2&&x.x>M.x||M.x<x.x2&&M.x>x.x)&&(x.y<M.y2&&x.y>M.y||M.y<x.y2&&M.y>x.y)},f=function(x,M,P,C,O,w,S,I){e(x)||(x=[x,M,P,C,O,w,S,I]);var j=h.apply(null,x);return n(j.min.x,j.min.y,j.max.x-j.min.x,j.max.y-j.min.y)},u=function(x,M,P,C,O,w,S,I,j){var N=1-j,W=Math.pow(N,3),H=Math.pow(N,2),J=j*j,Q=J*j,ne=W*x+H*3*j*P+N*3*j*j*O+Q*S,K=W*M+H*3*j*C+N*3*j*j*w+Q*I,ie=x+2*j*(P-x)+J*(O-2*P+x),de=M+2*j*(C-M)+J*(w-2*C+M),we=P+2*j*(O-P)+J*(S-2*O+P),Re=C+2*j*(w-C)+J*(I-2*w+C),_e=N*x+j*P,Ue=N*M+j*C,rt=N*O+j*S,Fe=N*w+j*I,Se=90-Math.atan2(ie-we,de-Re)*180/Math.PI;return{x:ne,y:K,m:{x:ie,y:de},n:{x:we,y:Re},start:{x:_e,y:Ue},end:{x:rt,y:Fe},alpha:Se}},d=function(x,M,P){var C=f(x),O=f(M);if(!s(C,O))return P?0:[];for(var w=c.apply(0,x),S=c.apply(0,M),I=~~(w/8),j=~~(S/8),N=[],W=[],H={},J=P?0:[],Q=0;Q<I+1;Q++){var ne=u.apply(0,x.concat(Q/I));N.push({x:ne.x,y:ne.y,t:Q/I})}for(var K=0;K<j+1;K++){var ie=u.apply(0,M.concat(K/j));W.push({x:ie.x,y:ie.y,t:K/j})}for(var de=0;de<I;de++)for(var we=0;we<j;we++){var Re=N[de],_e=N[de+1],Ue=W[we],rt=W[we+1],Fe=Math.abs(_e.x-Re.x)<.001?"y":"x",Se=Math.abs(rt.x-Ue.x)<.001?"y":"x",ye=i(Re.x,Re.y,_e.x,_e.y,Ue.x,Ue.y,rt.x,rt.y);if(ye){if(H[ye.x.toFixed(4)]===ye.y.toFixed(4))continue;H[ye.x.toFixed(4)]=ye.y.toFixed(4);var Oe=Re.t+Math.abs((ye[Fe]-Re[Fe])/(_e[Fe]-Re[Fe]))*(_e.t-Re.t),ue=Ue.t+Math.abs((ye[Se]-Ue[Se])/(rt[Se]-Ue[Se]))*(rt.t-Ue.t);Oe>=0&&Oe<=1&&ue>=0&&ue<=1&&(P?J++:J.push({x:ye.x,y:ye.y,t1:Oe,t2:ue}))}}return J},b=function(x,M,P){x=v(x),M=v(M);for(var C=void 0,O=void 0,w=void 0,S=void 0,I=void 0,j=void 0,N=void 0,W=void 0,H=void 0,J=void 0,Q=P?0:[],ne=0,K=x.length;ne<K;ne++){var ie=x[ne];if(ie[0]==="M")C=I=ie[1],O=j=ie[2];else{ie[0]==="C"?(H=[C,O].concat(ie.slice(1)),C=H[6],O=H[7]):(H=[C,O,C,O,I,j,I,j],C=I,O=j);for(var de=0,we=M.length;de<we;de++){var Re=M[de];if(Re[0]==="M")w=N=Re[1],S=W=Re[2];else{Re[0]==="C"?(J=[w,S].concat(Re.slice(1)),w=J[6],S=J[7]):(J=[w,S,w,S,N,W,N,W],w=N,S=W);var _e=d(H,J,P);if(P)Q+=_e;else{for(var Ue=0,rt=_e.length;Ue<rt;Ue++)_e[Ue].segment1=ne,_e[Ue].segment2=de,_e[Ue].bez1=H,_e[Ue].bez2=J;Q=Q.concat(_e)}}}}}return Q};B.exports=function(x,M){return b(x,M)}},function(B,L,o){var e=o(3),g=o(45),v=Object.prototype.hasOwnProperty,p=function(h,i){if(h===null||!g(h))return{};var r={};return e(i,function(n){v.call(h,n)&&(r[n]=h[n])}),r};B.exports=p},function(B,L,o){var e={lc:o(465),lowerCase:o(221),lowerFirst:o(222),substitute:o(466),uc:o(467),upperCase:o(223),upperFirst:o(113)};B.exports=e},function(B,L,o){B.exports=o(221)},function(B,L){var o=function(g,v){return!g||!v?g:g.replace(/\\?\{([^{}]+)\}/g,function(p,c){return p.charAt(0)==="\\"?p.slice(1):v[c]===void 0?"":v[c]})};B.exports=o},function(B,L,o){B.exports=o(223)},function(B,L){function o(e,g,v){var p=void 0,c=void 0,h=void 0,i=void 0,r=0;v||(v={});var n=function(){r=v.leading===!1?0:Date.now(),p=null,i=e.apply(c,h),p||(c=h=null)},s=function(){var u=Date.now();!r&&v.leading===!1&&(r=u);var d=g-(u-r);return c=this,h=arguments,d<=0||d>g?(p&&(clearTimeout(p),p=null),r=u,i=e.apply(c,h),p||(c=h=null)):!p&&v.trailing!==!1&&(p=setTimeout(n,d)),i};return s.cancel=function(){clearTimeout(p),r=0,p=c=h=null},s}B.exports=o},function(B,L,o){var e=o(19),g={getType:o(224),isArray:o(5),isArrayLike:o(23),isBoolean:o(114),isFunction:o(14),isNil:o(7),isNull:o(472),isNumber:o(11),isObject:o(33),isObjectLike:o(115),isPlainObject:o(45),isPrototype:o(226),isType:e,isUndefined:o(474),isString:o(15),isRegExp:o(473),isDate:o(225),isArguments:o(470),isError:o(471)};B.exports=g},function(B,L,o){var e=o(19),g=function(p){return e(p,"Arguments")};B.exports=g},function(B,L,o){var e=o(19),g=function(p){return e(p,"Error")};B.exports=g},function(B,L){var o=function(g){return g===null};B.exports=o},function(B,L,o){var e=o(19),g=function(p){return e(p,"RegExp")};B.exports=g},function(B,L){var o=function(g){return g===void 0};B.exports=o},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(26),g=v(e);function v(p){return p&&p.__esModule?p:{default:p}}L.default=g.default.generateBaseTypedComponent("Axis")},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(){function d(b,_){for(var x=0;x<_.length;x++){var M=_[x];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(b,M.key,M)}}return function(b,_,x){return _&&d(b.prototype,_),x&&d(b,x),b}}(),g=o(47),v=r(g),p=o(31),c=r(p),h=o(601),i=r(h);function r(d){return d&&d.__esModule?d:{default:d}}function n(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function s(d,b){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:d}function f(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(0,i.default)(v.default.PureComponent,"`React.PureComponent` needs React >=15.3.0");var u=function(d){f(b,d);function b(){return n(this,b),s(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return e(b,[{key:"render",value:function(){var x=this.props,M=x.width,P=x.height,C=x.placeholder;return v.default.createElement("div",{style:{width:M,height:P}},C)}}]),b}(v.default.PureComponent||v.default.Component);u.propTypes={width:c.default.oneOfType([c.default.string,c.default.number]),height:c.default.oneOfType([c.default.string,c.default.number]),placeholder:c.default.node},u.defaultProps={width:"100%",placeholder:v.default.createElement("div",{style:{position:"relative",top:"48%",textAlign:"center"}},"\u6682\u65E0\u6570\u636E")},L.default=u},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Object.assign||function(C){for(var O=1;O<arguments.length;O++){var w=arguments[O];for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(C[S]=w[S])}return C},g=function(){function C(O,w){for(var S=0;S<w.length;S++){var I=w[S];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(O,I.key,I)}}return function(O,w,S){return w&&C(O.prototype,w),S&&C(O,S),O}}(),v=o(47),p=f(v),c=o(478),h=f(c),i=o(476),r=f(i),n=o(480),s=f(n);function f(C){return C&&C.__esModule?C:{default:C}}function u(C,O){var w={};for(var S in C)O.indexOf(S)>=0||!Object.prototype.hasOwnProperty.call(C,S)||(w[S]=C[S]);return w}function d(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function b(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function _(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}function x(C){var O=!0;return(C==null||C.length===0||C.rows&&C.rows.length===0)&&(O=!1),!!O}var M=function(C){_(O,C);function O(){var w,S,I,j;d(this,O);for(var N=arguments.length,W=Array(N),H=0;H<N;H++)W[H]=arguments[H];return j=(S=(I=b(this,(w=O.__proto__||Object.getPrototypeOf(O)).call.apply(w,[this].concat(W))),I),I._refCallback=function(J){J&&(I.chart=J.getG2Instance())},I.hasViewSource=function(){var J=!1;return p.default.Children.map(I.props.children,function(Q){!J&&Q&&typeof Q.type=="function"&&Q.type.name==="View"&&Q.props.data&&x(Q.props.data)&&(J=!0)}),J},S),b(I,j)}return g(O,[{key:"getG2Instance",value:function(){return this.chart}},{key:"render",value:function(){var S=this.props,I=S.data,j=S.width,N=S.height,W=S.placeholder,H=S.className,J=S.style;return p.default.createElement("div",{className:H,style:J},x(I)||this.hasViewSource()||!W?p.default.createElement(h.default,e({ref:this._refCallback},this.props)):p.default.createElement(r.default,{width:j,height:N,placeholder:W===!0?void 0:W}))}}]),O}(p.default.PureComponent||p.default.Component),P=function(C){_(O,C);function O(){return d(this,O),b(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return g(O,[{key:"render",value:function(){var S=this.props,I=S.widthErrorBoundary,j=u(S,["widthErrorBoundary"]);return I===!1?p.default.createElement(M,j):p.default.createElement(s.default,null,p.default.createElement(M,j))}}]),O}(p.default.Component);L.default=P},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Object.assign||function(C){for(var O=1;O<arguments.length;O++){var w=arguments[O];for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(C[S]=w[S])}return C},g=function(){function C(O,w){for(var S=0;S<w.length;S++){var I=w[S];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(O,I.key,I)}}return function(O,w,S){return w&&C(O.prototype,w),S&&C(O,S),O}}(),v=o(47),p=d(v),c=o(31),h=d(c),i=o(491),r=d(i),n=o(599),s=d(n),f=o(593),u=d(f);function d(C){return C&&C.__esModule?C:{default:C}}function b(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function _(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function x(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var M=function(C){x(O,C);function O(w){b(this,O);var S=_(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,w));return P.call(S),S.name="Chart",S.gId=0,S.id=S.createId(),S.g2Processor=new r.default,S.forceFit=(0,u.default)(function(){!S.chart||S.chart.forceFit()},300),S}return g(O,[{key:"getChildContext",value:function(){return{addElement:this.addElement,updateElement:this.updateElement,deleteElement:this.deleteElement,createId:this.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}},{key:"componentDidMount",value:function(){if(this.addElement(this.name,this.id,e({},this.props,{container:this.containerWrap})),this.chart=this.g2Processor.createG2Instance(),this.notifyG2Instance(),this.props.forceFit){var S=new s.default(this.forceFit);S.observe(this.containerWrap),this.observe=S}}},{key:"componentDidUpdate",value:function(){this.updateElement(this.name,this.id,e({},this.props,{container:this.containerWrap}));var S=this.g2Processor.batchedUpdate();this.chart!==S&&(this.chart=S,this.notifyG2Instance()),this.props.forceUpdate&&this.chart.forceFit()}},{key:"componentWillUnmount",value:function(){this.g2Processor.destory(),this.chart=null,this.forceFit&&this.forceFit.cancel(),this.observe&&this.observe.unobserve(this.containerWrap),this.containerWrap=null}},{key:"getG2Instance",value:function(){return this.chart}},{key:"notifyG2Instance",value:function(){this.props.onGetG2Instance&&this.props.onGetG2Instance(this.chart)}},{key:"render",value:function(){return p.default.createElement("div",{ref:this.refHandle},this.props.children)}}]),O}(v.Component);M.propTypes={data:h.default.oneOfType([h.default.arrayOf(h.default.object),h.default.object]),scale:h.default.oneOfType([h.default.object,h.default.array]),animate:h.default.bool,width:h.default.number,height:h.default.number.isRequired,onGetG2Instance:h.default.func,forceFit:h.default.bool,forceUpdate:h.default.bool},M.childContextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func};var P=function(){var O=this;this.getViewId=function(){},this.getParentInfo=function(){return{id:O.id,name:O.name}},this.createId=function(){return O.gId+=1,O.gId},this.addElement=function(w,S,I,j,N){return O.g2Processor.addElement(w,S,I,j,N)},this.updateElement=function(w,S,I,j,N){O.g2Processor.updateElement(w,S,I,j,N)},this.deleteElement=function(w,S,I){O.g2Processor.deleteElement(w,S,I)},this.refHandle=function(w){O.containerWrap||(O.containerWrap=w)}};L.default=M},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(26),g=v(e);function v(p){return p&&p.__esModule?p:{default:p}}L.default=g.default.generateBaseTypedComponent("Coord")},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(){function n(s,f){for(var u=0;u<f.length;u++){var d=f[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}return function(s,f,u){return f&&n(s.prototype,f),u&&n(s,u),s}}(),g=o(47),v=p(g);function p(n){return n&&n.__esModule?n:{default:n}}function c(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function h(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:n}function i(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}var r=function(n){i(s,n);function s(f){c(this,s);var u=h(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,f));return u.state={hasError:!1},u}return e(s,[{key:"shouldComponentUpdate",value:function(){return this.state.hasError&&this.setState({hasError:!1}),!0}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"unstable_handleError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?v.default.createElement("h1",null,"bizcharts error."):this.props.children}}]),s}(v.default.Component);L.default=r},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),o(318);var e=o(26),g=v(e);function v(p){return p&&p.__esModule?p:{default:p}}L.default=g.default.generateBaseTypedComponent("Facet")},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),o(325);var e=o(26),g=v(e);function v(p){return p&&p.__esModule?p:{default:p}}L.default=g.default.generateBaseTypedComponent("Geom")},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(26),g=v(e);function v(c){return c&&c.__esModule?c:{default:c}}var p=g.default.generateBaseTypedComponent("Guide");p.Line=g.default.generateBaseTypedComponent("GuideLine"),p.Image=g.default.generateBaseTypedComponent("GuideImage"),p.Text=g.default.generateBaseTypedComponent("GuideText"),p.Region=g.default.generateBaseTypedComponent("GuideRegion"),p.Html=g.default.generateBaseTypedComponent("GuideHtml"),p.Arc=g.default.generateBaseTypedComponent("GuideArc"),p.RegionFilter=g.default.generateBaseTypedComponent("GuideRegionFilter"),p.DataMarker=g.default.generateBaseTypedComponent("GuideDataMarker"),p.DataRegion=g.default.generateBaseTypedComponent("GuideDataRegion"),L.default=p},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(){function d(b,_){for(var x=0;x<_.length;x++){var M=_[x];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(b,M.key,M)}}return function(b,_,x){return _&&d(b.prototype,_),x&&d(b,x),b}}(),g=o(592),v=r(g),p=o(26),c=r(p),h=o(31),i=r(h);function r(d){return d&&d.__esModule?d:{default:d}}function n(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function s(d,b){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:d}function f(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}var u=function(d){f(b,d);function b(_){return n(this,b),s(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_,"Label"))}return e(b,[{key:"componentWillMount",value:function(){var x=this.context.getParentInfo();(0,v.default)(x.name==="Geom","`<Label />` must be wrapped in `<Geom />`"),this.id=this.context.createId(),this.context.addElement(this.name,this.id,this.props,this.context.getParentInfo(),this.context.getViewId())}}]),b}(c.default);u.contextTypes={addElement:i.default.func,updateElement:i.default.func,deleteElement:i.default.func,createId:i.default.func,getParentInfo:i.default.func,getViewId:i.default.func},u.childContextTypes={addElement:i.default.func,updateElement:i.default.func,deleteElement:i.default.func,createId:i.default.func,getParentInfo:i.default.func,getViewId:i.default.func},L.default=u},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(26),g=c(e),v=o(31),p=c(v);function c(s){return s&&s.__esModule?s:{default:s}}function h(s,f){if(!(s instanceof f))throw new TypeError("Cannot call a class as a function")}function i(s,f){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:s}function r(s,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);s.prototype=Object.create(f&&f.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(s,f):s.__proto__=f)}var n=function(s){r(f,s);function f(u){return h(this,f),i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,u,"Legend"))}return f}(g.default);n.contextTypes={addElement:p.default.func,updateElement:p.default.func,deleteElement:p.default.func,createId:p.default.func,getParentInfo:p.default.func,getViewId:p.default.func},n.childContextTypes={addElement:p.default.func,updateElement:p.default.func,deleteElement:p.default.func,createId:p.default.func,getParentInfo:p.default.func,getViewId:p.default.func},n.defaultProps={visible:!0},L.default=n},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(26),g=v(e);function v(p){return p&&p.__esModule?p:{default:p}}L.default=g.default.generateBaseTypedComponent("Tooltip")},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=function(){function f(u,d){for(var b=0;b<d.length;b++){var _=d[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,_.key,_)}}return function(u,d,b){return d&&f(u.prototype,d),b&&f(u,b),u}}(),g=o(26),v=h(g),p=o(31),c=h(p);function h(f){return f&&f.__esModule?f:{default:f}}function i(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function r(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:f}function n(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}var s=function(f){n(u,f);function u(d){i(this,u);var b=r(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,d,"View"));return b.getViewId=function(){return b.id},b}return e(u,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}}]),u}(v.default);s.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},s.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},L.default=s},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e={Chart:"addChart",Coord:"addCoord",Geom:"addGeom",Axis:"addAxis",Tooltip:"addTooltip",Legend:"addLegend",Label:"addLabel",View:"addView",Guide:"addGuide",GuideLine:"addGuideLine",GuideImage:"addGuideImage",GuideText:"addGuideText",GuideRegion:"addGuideRegion",GuideHtml:"addGuideHtml",GuideArc:"addGuideArc",GuideRegionFilter:"addGuideRegionFilter",GuideDataMarker:"addGuideDataMarker",GuideDataRegion:"addGuideDataRegion",Facet:"addFacet"},g={addElement:function(p,c,h){this[e[p]](c,h,h.id,h.viewId,h.parentInfo)},getConfigContainer:function(p,c){return c&&(p.views||(p.views={}),p=p.views[c],p||(p={},p.views[c]=p)),p},addUniqueElement:function(p,c,h,i,r){var n=this.getConfigContainer(p,r);return n[c],n[c]=h,i},addChart:function(p,c,h){return this.addUniqueElement(p,"chart",c,h,null)},addView:function(p,c,h){return p.views||(p.views={}),p.views[h]=c,h},addAxis:function(p,c,h,i){var r=this.getConfigContainer(p,i);return r.axises||(r.axises={}),r.axises[h]=c,h},addCoord:function(p,c,h,i){return this.addUniqueElement(p,"coord",c,h,i)},addGeom:function(p,c,h,i,r){var n=this.getConfigContainer(p,i);return n.geoms||(n.geoms={}),n.geoms[h]?r?n.geoms[h].label=c.label:(n.geoms[h].label||console.log("geom label error"),c.label=n.geoms[h].label,n.geoms[h]=c):n.geoms[h]=c,h},addLabel:function(p,c,h,i,r){var n=this.getConfigContainer(p,i);return n.geoms||(n.geoms={}),this.addGeom(p,{label:c},r.id,i,!0),h},addTooltip:function(p,c,h,i){return this.addUniqueElement(p,"tooltip",c,h,i)},addFacet:function(p,c,h,i){return this.addUniqueElement(p,"facet",c,h,i)},addLegend:function(p,c,h,i){var r=this.getConfigContainer(p,i);return r.legends||(r.legends={}),r.legends[h]=c,h},addGuide:function(p,c,h,i){return this.addUniqueElement(p,"guide",c,h,i)},addTypedGuide:function(p,c,h,i,r,n){var s=this.getConfigContainer(p,r),f=s.guide;return f||(this.addUniqueElement("guide",{},n.id,r),f=s.guide),f.elements||(f.elements={}),h.type=c,f.elements[i]=h,i},addGuideLine:function(p,c,h,i,r){this.addTypedGuide(p,"line",c,h,i,r)},addGuideImage:function(p,c,h,i,r){this.addTypedGuide(p,"image",c,h,i,r)},addGuideText:function(p,c,h,i,r){this.addTypedGuide(p,"text",c,h,i,r)},addGuideRegion:function(p,c,h,i,r){this.addTypedGuide(p,"region",c,h,i,r)},addGuideHtml:function(p,c,h,i,r){this.addTypedGuide(p,"html",c,h,i,r)},addGuideArc:function(p,c,h,i,r){this.addTypedGuide(p,"arc",c,h,i,r)},addGuideRegionFilter:function(p,c,h,i,r){this.addTypedGuide(p,"regionFilter",c,h,i,r)},addGuideDataMarker:function(p,c,h,i,r){this.addTypedGuide(p,"dataMarker",c,h,i,r)},addGuideDataRegion:function(p,c,h,i,r){this.addTypedGuide(p,"dataRegion",c,h,i,r)}};L.default=g},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});function e(c){if(Array.isArray(c)){for(var h=0,i=Array(c.length);h<c.length;h++)i[h]=c[h];return i}else return Array.from(c)}var g={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",Facet:"deleteFacet"},v={Geom:!0,Label:!0,Facet:!0},p={deleteAxis:function(h,i,r){var n=i.axises[r].props;h.axis(n.name,!1)},deleteTooltip:function(h){h.tooltip(!1)},deleteCoord:function(h){h.coord("rect",{})},deleteLegend:function(h,i,r){var n=i.legends[r].props;h.legend.apply(h,e(n.name?[n.name,!1]:[!1]))},deleteGuide:function(h){h.guide().clear()},deleteView:function(h,i,r){!i.views[r].g2Instance||(h.removeView(i.views[r].g2Instance),delete i.views[r].g2Instance)},deleteViewElement:function(h,i,r,n){var s=this;Object.keys(r).forEach(function(f){var u=n[f],d=u.viewId;d&&(v[u.name]?i.views[d].needReExecute=!0:i.views[d].g2Instance&&s[g[u.name]]&&s[g[u.name]](i.views[d].g2Instance,i.views[d],u.id))})},needReExecute:function(h,i){for(var r in h)if(v[i[r].name]&&!i[r].viewId)return!0;return!1},synchronizeG2Delete:function(h,i,r,n){var s=this;Object.keys(r).forEach(function(f){var u=g[n[f].name];s[u]&&!n[f].viewId&&s[u](h,i,f)}),this.deleteViewElement(h,i,r,n)}};L.default=p},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Object.assign||function(M){for(var P=1;P<arguments.length;P++){var C=arguments[P];for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&(M[O]=C[O])}return M},g=o(118),v=o(227),p=f(v),c=o(229),h=f(c),i=o(117),r=f(i),n=o(228),s=f(n);function f(M){return M&&M.__esModule?M:{default:M}}function u(M){if(Array.isArray(M)){for(var P=0,C=Array(M.length);P<M.length;P++)C[P]=M[P];return C}else return Array.from(M)}function d(M,P){var C={};for(var O in M)P.indexOf(O)>=0||!Object.prototype.hasOwnProperty.call(M,O)||(C[O]=M[O]);return C}var b=p.default.COORD_FUNC_PROPS,_=p.default.GEOM_FUNC_PROPS,x={needRebuildChart:function(P){if(P.chart.props==null||P.chart.updateProps==null)return!1;var C=P.chart.props,O=P.chart.updateProps;return!g.Util.shallowEqual(C.padding,O.padding)||!g.Util.shallowEqual(C.background,O.background)||!g.Util.shallowEqual(C.plotBackground,O.plotBackground)||!g.Util.shallowEqual(C.pixelRatio,O.pixelRatio)},needReExecute:function(P){var C=P.geoms;if(C==null)return!1;for(var O in C)if(C[O].props&&C[O].updateProps&&(C[O].props.type!==C[O].updateProps.type||C[O].props.color&&!C[O].updateProps.color||C[O].props.size&&!C[O].updateProps.size||C[O].props.shape&&!C[O].updateProps.shape))return!0;return!1},needRepaint:function(P){var C=P.chart,O=C.props.data,w=C.updateProps.data;return O===w},synchronizeG2Update:function(P,C){this.updateChart(P,C.chart),this.updateAxises(P,C.axises),this.updateTooltip(P,C),this.updateCoord(P,C),this.updateLegends(P,C.legends),this.updateGeoms(P,C.geoms),this.updateGuide(P,C.guide),this.updateFacet(P,C),this.updateViews(P,C)},updateChart:function(P,C){if(!!C){var O=C.props,w=C.updateProps,S=O.width,I=O.height,j=O.animate,N=O.data,W=O.scale,H=w.width,J=w.height,Q=w.animate,ne=w.data,K=w.scale;N!==ne&&P.changeData(ne),g.Util.shallowEqual(W,K)||(g.Util.isArray(K)?P.scale(K[0],K[1]):P.scale(K)),j!==Q&&P.animate(Q),S!==H&&I!==J?P.changeSize(H,J):S!==H?P.changeWidth(H):I!==J&&P.changeHeight(J),s.default.updateEvents(P,s.default.chartEvents,C.props,w),s.default.updateBaseEvents(P,C.updateProps,w)}},updateAxis:function(P,C){var O=C.props,w=O.name,S=O.visible,I=d(O,["name","visible"]),j=C.updateProps,N=j.name,W=j.visible,H=d(j,["name","visible"]);S!==W&&P.axis(w,!!W),g.Util.shallowEqual(I,H)||P.axis(w,H)},updateAxises:function(P,C){if(!!C)for(var O in C)C[O]&&C[O].props&&C[O].updateProps&&this.updateAxis(P,C[O])},updateTooltip:function(P,C){if(!!C.tooltip){var O=C.tooltip.props,w=C.tooltip.updateProps;O==null&&w==null||g.Util.shallowEqual(O,w)||P.tooltip(e({},w))}},updateCoord:function(P,C){var O=C.coord;if(!!O){var w=O.props,S=O.updateProps;if(!(w==null||S==null)){var I=g.Util.without(S,b.concat(["type"]));if(!g.Util.shallowEqual(w,S)){var j=P.coord(S.type,I);O.g2Instance=j,g.Prop.init(b,S,function(N,W){W==="reflect"?g.Util.each(N,function(H){return j[W](H)}):W==="transpose"?N[0]===!0&&j[W].apply(j,u(N)):j[W].apply(j,u(N))})}}}},updateLegend:function(P,C){var O=C.props,w=C.updateProps;if(!!w&&!g.Util.shallowEqual(O,w)){var S=w.name,I=w.visible,j=d(w,["name","visible"]),N=I&&j;P.legend.apply(P,u(S?[S,N]:[N]))}},updateLegends:function(P,C){if(C!=null)for(var O in C)C[O]&&this.updateLegend(P,C[O])},updateLabel:function(P,C,O){if(!(C==null||O==null)){var w=C.content,S=d(C,["content"]),I=O.content,j=d(O,["content"]);(!g.Util.shallowEqual(S,j)||!g.Util.shallowEqual(w,I))&&(g.Util.isArray(I)?P.label(I[0],I[1],j):P.label(I,j))}},updateGeom:function(P,C){var O=C.props,w=C.updateProps;if(!(!O||!w)&&O.type===w.type){var S=C.g2Instance;if(g.Util.shallowEqual(O,w)){C.label&&this.updateLabel(S,C.label.props,C.label.updateProps);return}var I=O.adjust,j=d(O,["adjust"]),N=w.adjust,W=d(w,["adjust"]);(I||N)&&S.adjust(N),g.Prop.update(_,j,W,function(H,J){S[J].apply(S,u(H))}),C.label&&this.updateLabel(S,C.label.props,C.label.updateProps)}},updateGeoms:function(P,C){if(C==null)return!1;for(var O in C)C[O]&&this.updateGeom(P,C[O]);return!1},isTypedGuideChanged:function(P){return!g.Util.shallowEqual(P.props,P.updateProps)},updateGuide:function(P,C){if(!(!C||!C.elements)){var O=C.elements,w=!1;for(var S in O)if(O[S]&&(O[S].updateProps||this.isTypedGuideChanged(O[S]))){w=!0;break}w&&(r.default.mergeGuide(C,!0),P.guide().clear(),h.default.guide(P,C))}},updateView:function(P,C){if(!(!C||!C.props||!C.updateProps||C.parentInfo.name==="Facet")){var O=C.g2Instance,w=C.props,S=C.updateProps,I=w.scale,j=w.data,N=w.animate,W=w.axis,H=w.filter,J=S.scale,Q=S.animate,ne=S.data,K=S.axis,ie=S.filter;N!==Q&&O.animate(Q),j!==ne&&O.changeData(ne),g.Util.shallowEqual(I,J)||O.scale(J),g.Util.shallowEqual(H,ie)||ie.forEach(function(de){O.filter(de[0],de[1])}),W!==K&&O.axis(K),this.updateCoord(O,C),this.updateAxises(O,C.axises),this.updateGeoms(O,C.geoms),this.updateGuide(O,C.guide)}},updateViews:function(P,C){var O=C.views;if(!!O)for(var w in O){var S=O[w];S&&(S.needReExecute||this.needReExecute(S))?(h.default.synchronizeG2View(S.g2Instance,S),O[w].needReExecute=!1):this.updateView(P,S)}},updateFacet:function(P,C){var O=C.facet;if(!!O){var w=O.props,S=O.updateProps;if(!(w==null||S==null)){var I=w.type,j=d(w,["type"]),N=S.type,W=d(S,["type"]);(I!==N||!g.Util.shallowEqual(j,W))&&(O.props=S,h.default.facet(P,C))}}}};L.default=x},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=Object.assign||function(P){for(var C=1;C<arguments.length;C++){var O=arguments[C];for(var w in O)Object.prototype.hasOwnProperty.call(O,w)&&(P[w]=O[w])}return P},g=function(){function P(C,O){for(var w=0;w<O.length;w++){var S=O[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(C,S.key,S)}}return function(C,O,w){return O&&P(C.prototype,O),w&&P(C,w),C}}(),v=o(488),p=b(v),c=o(117),h=b(c),i=o(490),r=b(i),n=o(489),s=b(n),f=o(229),u=b(f),d=o(118);function b(P){return P&&P.__esModule?P:{default:P}}function _(P,C){var O={};for(var w in P)C.indexOf(w)>=0||!Object.prototype.hasOwnProperty.call(P,w)||(O[w]=P[w]);return O}function x(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")}var M=function(){function P(){x(this,P),this.config={},this.elementInfos={},this.added=!1,this.initedG2=!1,this.updated=!1,this.deleted=!1,this.deleteInfos={}}return g(P,[{key:"calUpdateFlag",value:function(O,w){var S=this.elementInfos[w].props,I=S.children,j=_(S,["children"]),N=this.elementInfos[w].updateProps,W=N.children,H=_(N,["children"]);if(O==="Chart"||O==="View"){var J=j.data,Q=_(j,["data"]),ne=H.data,K=_(H,["data"]);(J!==ne||!d.Util.isEqual(Q,K))&&(this.updated=!0)}else d.Util.isEqual(j,H)||(this.updated=!0)}},{key:"addElement",value:function(O,w,S,I,j){!this.chart&&this.initedG2||(this.added=!0,this.elementInfos[w]={id:w,viewId:j,parentInfo:I,name:O,props:e({},S)},I&&!this.elementInfos[I.id]&&(this.elementInfos[I.id]={id:I.id,name:I.name}),p.default.addElement(O,this.config,this.elementInfos[w]))}},{key:"updateElement",value:function(O,w,S){this.elementInfos[w].updateProps=e({},S),this.calUpdateFlag(O,w)}},{key:"deleteElement",value:function(O,w){!this.chart||(this.deleteInfos[w]=w,this.deleted=!0)}},{key:"createG2Instance",value:function(){var O=this.config,w=u.default.createChart(O,this.elementInfos);return u.default.executeChartConfig(w,O,this.elementInfos),u.default.synchronizeG2Add(w,O,this.elementInfos),w.render(),this.chart=w,this.initedG2=!0,this.resetStates(),w}},{key:"destory",value:function(){this.chart.destroy(),this.chart=null}},{key:"resetStates",value:function(){var O=this.elementInfos;for(var w in O)O[w].updateProps&&delete O[w].updateProps,this.deleteInfos[w]&&delete O[w];this.added=!1,this.updated=!1,this.deleteInfos={}}},{key:"reExecuteChart",value:function(){return this.chart.clear(),h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),u.default.executeChartConfig(this.chart,this.config,this.elementInfos),u.default.synchronizeG2Add(this.chart,this.config,this.elementInfos),this.chart.repaint(),this.resetStates(),this.chart}},{key:"batchedUpdate",value:function(){return this.chart==null?null:this.config.chart.props.forceUpdate||r.default.needRebuildChart(this.config)?(h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),this.chart.destroy(),this.chart="destroy",this.createG2Instance()):s.default.needReExecute(this.deleteInfos,this.elementInfos)||r.default.needReExecute(this.config)?(this.reExecuteChart(),this.chart):(this.deleted&&(s.default.synchronizeG2Delete(this.chart,this.config,this.deleteInfos,this.elementInfos),h.default.mergeDelete(this.config,this.deleteInfos,this.elementInfos)),this.added&&u.default.synchronizeG2Add(this.chart,this.config),this.updated&&r.default.synchronizeG2Update(this.chart,this.config),(this.added||this.deleted||this.updated)&&this.chart.repaint(),h.default.mergeUpdate(this.config,!1),this.resetStates(),this.chart)}}]),P}();L.default=M},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(70),g=v(e);function v(p){return p&&p.__esModule?p:{default:p}}L.default={init:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments[1],i=arguments[2];g.default.each(c,function(r){var n=h[r];n!==void 0&&(g.default.isArray(n)||(n=[n]),i(n,r))})},update:function(c,h,i,r){var n=void 0,s=void 0;g.default.each(c,function(f){n=h[f],s=i[f],g.default.shallowEqual(s,n)||(g.default.isArray(s)||(s=[s]),r(s,f))})}}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default={}},function(B,L,o){"use strict";L.a=d;var e=o(120),g=o(119),v=o(230),p=-.14861,c=1.78277,h=-.29227,i=-.90649,r=1.97294,n=r*i,s=r*c,f=c*h-i*p;function u(_){if(_ instanceof b)return new b(_.h,_.s,_.l,_.opacity);_ instanceof g.a||(_=o.i(g.b)(_));var x=_.r/255,M=_.g/255,P=_.b/255,C=(f*P+n*x-s*M)/(f+n-s),O=P-C,w=(r*(M-C)-h*O)/i,S=Math.sqrt(w*w+O*O)/(r*C*(1-C)),I=S?Math.atan2(w,O)*v.a-120:NaN;return new b(I<0?I+360:I,S,C,_.opacity)}function d(_,x,M,P){return arguments.length===1?u(_):new b(_,x,M,P==null?1:P)}function b(_,x,M,P){this.h=+_,this.s=+x,this.l=+M,this.opacity=+P}o.i(e.a)(b,d,o.i(e.b)(g.c,{brighter:function(_){return _=_==null?g.d:Math.pow(g.d,_),new b(this.h,this.s,this.l*_,this.opacity)},darker:function(_){return _=_==null?g.e:Math.pow(g.e,_),new b(this.h,this.s,this.l*_,this.opacity)},rgb:function(){var _=isNaN(this.h)?0:(this.h+120)*v.b,x=+this.l,M=isNaN(this.s)?0:this.s*x*(1-x),P=Math.cos(_),C=Math.sin(_);return new g.a(255*(x+M*(p*P+c*C)),255*(x+M*(h*P+i*C)),255*(x+M*(r*P)),this.opacity)}}))},function(B,L,o){"use strict";L.b=b,L.a=S;var e=o(120),g=o(119),v=o(230),p=18,c=.96422,h=1,i=.82521,r=4/29,n=6/29,s=3*n*n,f=n*n*n;function u(N){if(N instanceof _)return new _(N.l,N.a,N.b,N.opacity);if(N instanceof I)return j(N);N instanceof g.a||(N=o.i(g.b)(N));var W=C(N.r),H=C(N.g),J=C(N.b),Q=x((.2225045*W+.7168786*H+.0606169*J)/h),ne,K;return W===H&&H===J?ne=K=Q:(ne=x((.4360747*W+.3850649*H+.1430804*J)/c),K=x((.0139322*W+.0971045*H+.7141733*J)/i)),new _(116*Q-16,500*(ne-Q),200*(Q-K),N.opacity)}function d(N,W){return new _(N,0,0,W==null?1:W)}function b(N,W,H,J){return arguments.length===1?u(N):new _(N,W,H,J==null?1:J)}function _(N,W,H,J){this.l=+N,this.a=+W,this.b=+H,this.opacity=+J}o.i(e.a)(_,b,o.i(e.b)(g.c,{brighter:function(N){return new _(this.l+p*(N==null?1:N),this.a,this.b,this.opacity)},darker:function(N){return new _(this.l-p*(N==null?1:N),this.a,this.b,this.opacity)},rgb:function(){var N=(this.l+16)/116,W=isNaN(this.a)?N:N+this.a/500,H=isNaN(this.b)?N:N-this.b/200;return W=c*M(W),N=h*M(N),H=i*M(H),new g.a(P(3.1338561*W-1.6168667*N-.4906146*H),P(-.9787684*W+1.9161415*N+.033454*H),P(.0719453*W-.2289914*N+1.4052427*H),this.opacity)}}));function x(N){return N>f?Math.pow(N,1/3):N/s+r}function M(N){return N>n?N*N*N:s*(N-r)}function P(N){return 255*(N<=.0031308?12.92*N:1.055*Math.pow(N,1/2.4)-.055)}function C(N){return(N/=255)<=.04045?N/12.92:Math.pow((N+.055)/1.055,2.4)}function O(N){if(N instanceof I)return new I(N.h,N.c,N.l,N.opacity);if(N instanceof _||(N=u(N)),N.a===0&&N.b===0)return new I(NaN,0<N.l&&N.l<100?0:NaN,N.l,N.opacity);var W=Math.atan2(N.b,N.a)*v.a;return new I(W<0?W+360:W,Math.sqrt(N.a*N.a+N.b*N.b),N.l,N.opacity)}function w(N,W,H,J){return arguments.length===1?O(N):new I(H,W,N,J==null?1:J)}function S(N,W,H,J){return arguments.length===1?O(N):new I(N,W,H,J==null?1:J)}function I(N,W,H,J){this.h=+N,this.c=+W,this.l=+H,this.opacity=+J}function j(N){if(isNaN(N.h))return new _(N.l,0,0,N.opacity);var W=N.h*v.b;return new _(N.l,Math.cos(W)*N.c,Math.sin(W)*N.c,N.opacity)}o.i(e.a)(I,S,o.i(e.b)(g.c,{brighter:function(N){return new I(this.h,this.c,this.l+p*(N==null?1:N),this.opacity)},darker:function(N){return new I(this.h,this.c,this.l-p*(N==null?1:N),this.opacity)},rgb:function(){return j(this).rgb()}}))},function(B,L,o){"use strict";var e={value:function(){}};function g(){for(var i=0,r=arguments.length,n={},s;i<r;++i){if(!(s=arguments[i]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new v(n)}function v(i){this._=i}function p(i,r){return i.trim().split(/^|\s+/).map(function(n){var s="",f=n.indexOf(".");if(f>=0&&(s=n.slice(f+1),n=n.slice(0,f)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}v.prototype=g.prototype={constructor:v,on:function(i,r){var n=this._,s=p(i+"",n),f,u=-1,d=s.length;if(arguments.length<2){for(;++u<d;)if((f=(i=s[u]).type)&&(f=c(n[f],i.name)))return f;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++u<d;)if(f=(i=s[u]).type)n[f]=h(n[f],i.name,r);else if(r==null)for(f in n)n[f]=h(n[f],i.name,null);return this},copy:function(){var i={},r=this._;for(var n in r)i[n]=r[n].slice();return new v(i)},call:function(i,r){if((f=arguments.length-2)>0)for(var n=new Array(f),s=0,f,u;s<f;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(u=this._[i],s=0,f=u.length;s<f;++s)u[s].value.apply(r,n)},apply:function(i,r,n){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var s=this._[i],f=0,u=s.length;f<u;++f)s[f].value.apply(r,n)}};function c(i,r){for(var n=0,s=i.length,f;n<s;++n)if((f=i[n]).name===r)return f.value}function h(i,r,n){for(var s=0,f=i.length;s<f;++s)if(i[s].name===r){i[s]=e,i=i.slice(0,s).concat(i.slice(s+1));break}return n!=null&&i.push({name:r,value:n}),i}L.a=g},function(B,L,o){"use strict";var e=o(496);o.d(L,"a",function(){return e.a})},function(B,L,o){"use strict";o.d(L,"b",function(){return g}),o.d(L,"c",function(){return v}),o.d(L,"a",function(){return p});var e=1.70158,g=function c(h){h=+h;function i(r){return(r=+r)*r*(h*(r-1)+r)}return i.overshoot=c,i}(e),v=function c(h){h=+h;function i(r){return--r*r*((r+1)*h+r)+1}return i.overshoot=c,i}(e),p=function c(h){h=+h;function i(r){return((r*=2)<1?r*r*((h+1)*r-h):(r-=2)*r*((h+1)*r+h)+2)/2}return i.overshoot=c,i}(e)},function(B,L,o){"use strict";L.b=f,L.a=u,L.c=d;var e=4/11,g=6/11,v=8/11,p=3/4,c=9/11,h=10/11,i=15/16,r=21/22,n=63/64,s=1/e/e;function f(b){return 1-u(1-b)}function u(b){return(b=+b)<e?s*b*b:b<v?s*(b-=g)*b+p:b<h?s*(b-=c)*b+i:s*(b-=r)*b+n}function d(b){return((b*=2)<=1?1-u(1-b):u(b-1)+1)/2}},function(B,L,o){"use strict";L.b=e,L.c=g,L.a=v;function e(p){return 1-Math.sqrt(1-p*p)}function g(p){return Math.sqrt(1- --p*p)}function v(p){return((p*=2)<=1?1-Math.sqrt(1-p*p):Math.sqrt(1-(p-=2)*p)+1)/2}},function(B,L,o){"use strict";L.b=e,L.c=g,L.a=v;function e(p){return p*p*p}function g(p){return--p*p*p+1}function v(p){return((p*=2)<=1?p*p*p:(p-=2)*p*p+2)/2}},function(B,L,o){"use strict";o.d(L,"b",function(){return c}),o.d(L,"a",function(){return h}),o.d(L,"c",function(){return i});var e=o(231),g=2*Math.PI,v=1,p=.3,c=function r(n,s){var f=Math.asin(1/(n=Math.max(1,n)))*(s/=g);function u(d){return n*o.i(e.a)(- --d)*Math.sin((f-d)/s)}return u.amplitude=function(d){return r(d,s*g)},u.period=function(d){return r(n,d)},u}(v,p),h=function r(n,s){var f=Math.asin(1/(n=Math.max(1,n)))*(s/=g);function u(d){return 1-n*o.i(e.a)(d=+d)*Math.sin((d+f)/s)}return u.amplitude=function(d){return r(d,s*g)},u.period=function(d){return r(n,d)},u}(v,p),i=function r(n,s){var f=Math.asin(1/(n=Math.max(1,n)))*(s/=g);function u(d){return((d=d*2-1)<0?n*o.i(e.a)(-d)*Math.sin((f-d)/s):2-n*o.i(e.a)(d)*Math.sin((f+d)/s))/2}return u.amplitude=function(d){return r(d,s*g)},u.period=function(d){return r(n,d)},u}(v,p)},function(B,L,o){"use strict";L.b=g,L.c=v,L.a=p;var e=o(231);function g(c){return o.i(e.a)(1-+c)}function v(c){return 1-o.i(e.a)(c)}function p(c){return((c*=2)<=1?o.i(e.a)(1-c):2-o.i(e.a)(c-1))/2}},function(B,L,o){"use strict";L.a=e;function e(g){return+g}},function(B,L,o){"use strict";o.d(L,"b",function(){return g}),o.d(L,"c",function(){return v}),o.d(L,"a",function(){return p});var e=3,g=function c(h){h=+h;function i(r){return Math.pow(r,h)}return i.exponent=c,i}(e),v=function c(h){h=+h;function i(r){return 1-Math.pow(1-r,h)}return i.exponent=c,i}(e),p=function c(h){h=+h;function i(r){return((r*=2)<=1?Math.pow(r,h):2-Math.pow(2-r,h))/2}return i.exponent=c,i}(e)},function(B,L,o){"use strict";L.b=e,L.c=g,L.a=v;function e(p){return p*p}function g(p){return p*(2-p)}function v(p){return((p*=2)<=1?p*p:--p*(2-p)+1)/2}},function(B,L,o){"use strict";L.b=v,L.c=p,L.a=c;var e=Math.PI,g=e/2;function v(h){return+h==1?1:1-Math.cos(h*g)}function p(h){return Math.sin(h*g)}function c(h){return(1-Math.cos(e*h))/2}},function(B,L,o){"use strict";o.d(L,"b",function(){return p});var e=o(16),g=o(46);function v(c){return function h(i){i=+i;function r(n,s){var f=c((n=o.i(e.a)(n)).h,(s=o.i(e.a)(s)).h),u=o.i(g.a)(n.s,s.s),d=o.i(g.a)(n.l,s.l),b=o.i(g.a)(n.opacity,s.opacity);return function(_){return n.h=f(_),n.s=u(_),n.l=d(Math.pow(_,i)),n.opacity=b(_),n+""}}return r.gamma=h,r}(1)}L.a=v(g.b);var p=v(g.a)},function(B,L,o){"use strict";o.d(L,"b",function(){return p});var e=o(16),g=o(46);function v(c){return function(h,i){var r=c((h=o.i(e.b)(h)).h,(i=o.i(e.b)(i)).h),n=o.i(g.a)(h.c,i.c),s=o.i(g.a)(h.l,i.l),f=o.i(g.a)(h.opacity,i.opacity);return function(u){return h.h=r(u),h.c=n(u),h.l=s(u),h.opacity=f(u),h+""}}}L.a=v(g.b);var p=v(g.a)},function(B,L,o){"use strict";o.d(L,"b",function(){return p});var e=o(16),g=o(46);function v(c){return function(h,i){var r=c((h=o.i(e.d)(h)).h,(i=o.i(e.d)(i)).h),n=o.i(g.a)(h.s,i.s),s=o.i(g.a)(h.l,i.l),f=o.i(g.a)(h.opacity,i.opacity);return function(u){return h.h=r(u),h.s=n(u),h.l=s(u),h.opacity=f(u),h+""}}}L.a=v(g.b);var p=v(g.a)},function(B,L,o){"use strict";L.a=v;var e=o(16),g=o(46);function v(p,c){var h=o.i(g.a)((p=o.i(e.c)(p)).l,(c=o.i(e.c)(c)).l),i=o.i(g.a)(p.a,c.a),r=o.i(g.a)(p.b,c.b),n=o.i(g.a)(p.opacity,c.opacity);return function(s){return p.l=h(s),p.a=i(s),p.b=r(s),p.opacity=n(s),p+""}}},function(B,L,o){"use strict";L.a=function(e,g){for(var v=new Array(g),p=0;p<g;++p)v[p]=e(p/(g-1));return v}},function(B,L,o){"use strict";L.a=function(e,g){return e=+e,g-=e,function(v){return Math.round(e+g*v)}}},function(B,L,o){"use strict";o.d(L,"a",function(){return g});var e=180/Math.PI,g={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};L.b=function(v,p,c,h,i,r){var n,s,f;return(n=Math.sqrt(v*v+p*p))&&(v/=n,p/=n),(f=v*c+p*h)&&(c-=v*f,h-=p*f),(s=Math.sqrt(c*c+h*h))&&(c/=s,h/=s,f/=s),v*h<p*c&&(v=-v,p=-p,f=-f,n=-n),{translateX:i,translateY:r,rotate:Math.atan2(p,v)*e,skewX:Math.atan(f)*e,scaleX:n,scaleY:s}}},function(B,L,o){"use strict";o.d(L,"a",function(){return p}),o.d(L,"b",function(){return c});var e=o(71),g=o(516);function v(h,i,r,n){function s(_){return _.length?_.pop()+" ":""}function f(_,x,M,P,C,O){if(_!==M||x!==P){var w=C.push("translate(",null,i,null,r);O.push({i:w-4,x:o.i(e.a)(_,M)},{i:w-2,x:o.i(e.a)(x,P)})}else(M||P)&&C.push("translate("+M+i+P+r)}function u(_,x,M,P){_!==x?(_-x>180?x+=360:x-_>180&&(_+=360),P.push({i:M.push(s(M)+"rotate(",null,n)-2,x:o.i(e.a)(_,x)})):x&&M.push(s(M)+"rotate("+x+n)}function d(_,x,M,P){_!==x?P.push({i:M.push(s(M)+"skewX(",null,n)-2,x:o.i(e.a)(_,x)}):x&&M.push(s(M)+"skewX("+x+n)}function b(_,x,M,P,C,O){if(_!==M||x!==P){var w=C.push(s(C)+"scale(",null,",",null,")");O.push({i:w-4,x:o.i(e.a)(_,M)},{i:w-2,x:o.i(e.a)(x,P)})}else(M!==1||P!==1)&&C.push(s(C)+"scale("+M+","+P+")")}return function(_,x){var M=[],P=[];return _=h(_),x=h(x),f(_.translateX,_.translateY,x.translateX,x.translateY,M,P),u(_.rotate,x.rotate,M,P),d(_.skewX,x.skewX,M,P),b(_.scaleX,_.scaleY,x.scaleX,x.scaleY,M,P),_=x=null,function(C){for(var O=-1,w=P.length,S;++O<w;)M[(S=P[O]).i]=S.x(C);return M.join("")}}}var p=v(g.a,"px, ","px)","deg)"),c=v(g.b,", ",")",")")},function(B,L,o){"use strict";L.a=h,L.b=i;var e=o(514),g,v,p,c;function h(r){return r==="none"?e.a:(g||(g=document.createElement("DIV"),v=document.documentElement,p=document.defaultView),g.style.transform=r,r=p.getComputedStyle(v.appendChild(g),null).getPropertyValue("transform"),v.removeChild(g),r=r.slice(7,-1).split(","),o.i(e.b)(+r[0],+r[1],+r[2],+r[3],+r[4],+r[5]))}function i(r){return r==null||(c||(c=document.createElementNS("http://www.w3.org/2000/svg","g")),c.setAttribute("transform",r),!(r=c.transform.baseVal.consolidate()))?e.a:(r=r.matrix,o.i(e.b)(r.a,r.b,r.c,r.d,r.e,r.f))}},function(B,L,o){"use strict";var e=Math.SQRT2,g=2,v=4,p=1e-12;function c(r){return((r=Math.exp(r))+1/r)/2}function h(r){return((r=Math.exp(r))-1/r)/2}function i(r){return((r=Math.exp(2*r))-1)/(r+1)}L.a=function(r,n){var s=r[0],f=r[1],u=r[2],d=n[0],b=n[1],_=n[2],x=d-s,M=b-f,P=x*x+M*M,C,O;if(P<p)O=Math.log(_/u)/e,C=function(W){return[s+W*x,f+W*M,u*Math.exp(e*W*O)]};else{var w=Math.sqrt(P),S=(_*_-u*u+v*P)/(2*u*g*w),I=(_*_-u*u-v*P)/(2*_*g*w),j=Math.log(Math.sqrt(S*S+1)-S),N=Math.log(Math.sqrt(I*I+1)-I);O=(N-j)/e,C=function(W){var H=W*O,J=c(j),Q=u/(g*w)*(J*i(e*H+j)-h(j));return[s+Q*x,f+Q*M,u*J/c(e*H+j)]}}return C.duration=O*1e3,C}},function(B,L,o){"use strict";var e=o(16),g=o(34);function v(h){return function i(r){r=+r;function n(s,f){var u=h((s=o.i(e.a)(s)).h,(f=o.i(e.a)(f)).h),d=o.i(g.a)(s.s,f.s),b=o.i(g.a)(s.l,f.l),_=o.i(g.a)(s.opacity,f.opacity);return function(x){return s.h=u(x),s.s=d(x),s.l=b(Math.pow(x,r)),s.opacity=_(x),s+""}}return n.gamma=i,n}(1)}var p=v(g.b),c=v(g.a)},function(B,L,o){"use strict";var e=function(g){var v=g.length;return function(p){return g[Math.max(0,Math.min(v-1,Math.floor(p*v)))]}}},function(B,L,o){"use strict";var e=o(16),g=o(34);function v(h){return function(i,r){var n=h((i=o.i(e.b)(i)).h,(r=o.i(e.b)(r)).h),s=o.i(g.a)(i.c,r.c),f=o.i(g.a)(i.l,r.l),u=o.i(g.a)(i.opacity,r.opacity);return function(d){return i.h=n(d),i.c=s(d),i.l=f(d),i.opacity=u(d),i+""}}}var p=v(g.b),c=v(g.a)},function(B,L,o){"use strict";var e=o(16),g=o(34);function v(h){return function(i,r){var n=h((i=o.i(e.d)(i)).h,(r=o.i(e.d)(r)).h),s=o.i(g.a)(i.s,r.s),f=o.i(g.a)(i.l,r.l),u=o.i(g.a)(i.opacity,r.opacity);return function(d){return i.h=n(d),i.s=s(d),i.l=f(d),i.opacity=u(d),i+""}}}var p=v(g.b),c=v(g.a)},function(B,L,o){"use strict";var e=o(34),g=function(v,p){var c=o.i(e.b)(+v,+p);return function(h){var i=c(h);return i-360*Math.floor(i/360)}}},function(B,L,o){"use strict";var e=o(16),g=o(34);function v(p,c){var h=o.i(g.a)((p=o.i(e.c)(p)).l,(c=o.i(e.c)(c)).l),i=o.i(g.a)(p.a,c.a),r=o.i(g.a)(p.b,c.b),n=o.i(g.a)(p.opacity,c.opacity);return function(s){return p.l=h(s),p.a=i(s),p.b=r(s),p.opacity=n(s),p+""}}},function(B,L,o){"use strict";function e(g,v){for(var p=0,c=v.length-1,h=v[0],i=new Array(c<0?0:c);p<c;)i[p]=g(h,h=v[++p]);return function(r){var n=Math.max(0,Math.min(c-1,Math.floor(r*=c)));return i[n](r-n)}}},function(B,L,o){"use strict";var e=function(g,v){for(var p=new Array(v),c=0;c<v;++c)p[c]=g(c/(v-1));return p}},function(B,L,o){"use strict";var e=function(g,v){return g=+g,v=+v,function(p){return Math.round(g*(1-p)+v*p)}}},function(B,L,o){"use strict";o.d(L,"a",function(){return g});var e=180/Math.PI,g={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};L.b=function(v,p,c,h,i,r){var n,s,f;return(n=Math.sqrt(v*v+p*p))&&(v/=n,p/=n),(f=v*c+p*h)&&(c-=v*f,h-=p*f),(s=Math.sqrt(c*c+h*h))&&(c/=s,h/=s,f/=s),v*h<p*c&&(v=-v,p=-p,f=-f,n=-n),{translateX:i,translateY:r,rotate:Math.atan2(p,v)*e,skewX:Math.atan(f)*e,scaleX:n,scaleY:s}}},function(B,L,o){"use strict";o.d(L,"a",function(){return p}),o.d(L,"b",function(){return c});var e=o(72),g=o(529);function v(h,i,r,n){function s(_){return _.length?_.pop()+" ":""}function f(_,x,M,P,C,O){if(_!==M||x!==P){var w=C.push("translate(",null,i,null,r);O.push({i:w-4,x:o.i(e.a)(_,M)},{i:w-2,x:o.i(e.a)(x,P)})}else(M||P)&&C.push("translate("+M+i+P+r)}function u(_,x,M,P){_!==x?(_-x>180?x+=360:x-_>180&&(_+=360),P.push({i:M.push(s(M)+"rotate(",null,n)-2,x:o.i(e.a)(_,x)})):x&&M.push(s(M)+"rotate("+x+n)}function d(_,x,M,P){_!==x?P.push({i:M.push(s(M)+"skewX(",null,n)-2,x:o.i(e.a)(_,x)}):x&&M.push(s(M)+"skewX("+x+n)}function b(_,x,M,P,C,O){if(_!==M||x!==P){var w=C.push(s(C)+"scale(",null,",",null,")");O.push({i:w-4,x:o.i(e.a)(_,M)},{i:w-2,x:o.i(e.a)(x,P)})}else(M!==1||P!==1)&&C.push(s(C)+"scale("+M+","+P+")")}return function(_,x){var M=[],P=[];return _=h(_),x=h(x),f(_.translateX,_.translateY,x.translateX,x.translateY,M,P),u(_.rotate,x.rotate,M,P),d(_.skewX,x.skewX,M,P),b(_.scaleX,_.scaleY,x.scaleX,x.scaleY,M,P),_=x=null,function(C){for(var O=-1,w=P.length,S;++O<w;)M[(S=P[O]).i]=S.x(C);return M.join("")}}}var p=v(g.a,"px, ","px)","deg)"),c=v(g.b,", ",")",")")},function(B,L,o){"use strict";L.a=h,L.b=i;var e=o(527),g,v,p,c;function h(r){return r==="none"?e.a:(g||(g=document.createElement("DIV"),v=document.documentElement,p=document.defaultView),g.style.transform=r,r=p.getComputedStyle(v.appendChild(g),null).getPropertyValue("transform"),v.removeChild(g),r=r.slice(7,-1).split(","),o.i(e.b)(+r[0],+r[1],+r[2],+r[3],+r[4],+r[5]))}function i(r){return r==null||(c||(c=document.createElementNS("http://www.w3.org/2000/svg","g")),c.setAttribute("transform",r),!(r=c.transform.baseVal.consolidate()))?e.a:(r=r.matrix,o.i(e.b)(r.a,r.b,r.c,r.d,r.e,r.f))}},function(B,L,o){"use strict";var e=Math.SQRT2,g=2,v=4,p=1e-12;function c(n){return((n=Math.exp(n))+1/n)/2}function h(n){return((n=Math.exp(n))-1/n)/2}function i(n){return((n=Math.exp(2*n))-1)/(n+1)}var r=function(n,s){var f=n[0],u=n[1],d=n[2],b=s[0],_=s[1],x=s[2],M=b-f,P=_-u,C=M*M+P*P,O,w;if(C<p)w=Math.log(x/d)/e,O=function(H){return[f+H*M,u+H*P,d*Math.exp(e*H*w)]};else{var S=Math.sqrt(C),I=(x*x-d*d+v*C)/(2*d*g*S),j=(x*x-d*d-v*C)/(2*x*g*S),N=Math.log(Math.sqrt(I*I+1)-I),W=Math.log(Math.sqrt(j*j+1)-j);w=(W-N)/e,O=function(H){var J=H*w,Q=c(N),ne=d/(g*S)*(Q*i(e*J+N)-h(N));return[f+ne*M,u+ne*P,d*Q/c(e*J+N)]}}return O.duration=w*1e3,O}},function(B,L,o){"use strict";L.a=function(e){return function(){return e}}},function(B,L,o){"use strict";var e=o(73),g=o(248);L.a=function(v){return o.i(g.a)(o.i(e.a)(v).call(document.documentElement))}},function(B,L,o){"use strict";L.a=g;var e=0;function g(){return new v}function v(){this._="@"+(++e).toString(36)}v.prototype=g.prototype={constructor:v,get:function(p){for(var c=this._;!(c in p);)if(!(p=p.parentNode))return;return p[c]},set:function(p,c){return p[this._]=c},remove:function(p){return this._ in p&&delete p[this._]},toString:function(){return this._}}},function(B,L,o){"use strict";var e=o(132),g=o(74);L.a=function(v){var p=o.i(e.a)();return p.changedTouches&&(p=p.changedTouches[0]),o.i(g.a)(v,p)}},function(B,L,o){"use strict";var e=o(20);L.a=function(g){return typeof g=="string"?new e.b([document.querySelectorAll(g)],[document.documentElement]):new e.b([g==null?[]:g],e.c)}},function(B,L,o){"use strict";var e=o(73);L.a=function(g){var v=typeof g=="function"?g:o.i(e.a)(g);return this.select(function(){return this.appendChild(v.apply(this,arguments))})}},function(B,L,o){"use strict";var e=o(128);function g(r){return function(){this.removeAttribute(r)}}function v(r){return function(){this.removeAttributeNS(r.space,r.local)}}function p(r,n){return function(){this.setAttribute(r,n)}}function c(r,n){return function(){this.setAttributeNS(r.space,r.local,n)}}function h(r,n){return function(){var s=n.apply(this,arguments);s==null?this.removeAttribute(r):this.setAttribute(r,s)}}function i(r,n){return function(){var s=n.apply(this,arguments);s==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,s)}}L.a=function(r,n){var s=o.i(e.a)(r);if(arguments.length<2){var f=this.node();return s.local?f.getAttributeNS(s.space,s.local):f.getAttribute(s)}return this.each((n==null?s.local?v:g:typeof n=="function"?s.local?i:h:s.local?c:p)(s,n))}},function(B,L,o){"use strict";L.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},function(B,L,o){"use strict";function e(n){return n.trim().split(/^|\s+/)}function g(n){return n.classList||new v(n)}function v(n){this._node=n,this._names=e(n.getAttribute("class")||"")}v.prototype={add:function(n){var s=this._names.indexOf(n);s<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var s=this._names.indexOf(n);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function p(n,s){for(var f=g(n),u=-1,d=s.length;++u<d;)f.add(s[u])}function c(n,s){for(var f=g(n),u=-1,d=s.length;++u<d;)f.remove(s[u])}function h(n){return function(){p(this,n)}}function i(n){return function(){c(this,n)}}function r(n,s){return function(){(s.apply(this,arguments)?p:c)(this,n)}}L.a=function(n,s){var f=e(n+"");if(arguments.length<2){for(var u=g(this.node()),d=-1,b=f.length;++d<b;)if(!u.contains(f[d]))return!1;return!0}return this.each((typeof s=="function"?r:s?h:i)(f,s))}},function(B,L,o){"use strict";function e(){var v=this.cloneNode(!1),p=this.parentNode;return p?p.insertBefore(v,this.nextSibling):v}function g(){var v=this.cloneNode(!0),p=this.parentNode;return p?p.insertBefore(v,this.nextSibling):v}L.a=function(v){return this.select(v?g:e)}},function(B,L,o){"use strict";var e=o(20),g=o(249),v=o(531),p="$";function c(i,r,n,s,f,u){for(var d=0,b,_=r.length,x=u.length;d<x;++d)(b=r[d])?(b.__data__=u[d],s[d]=b):n[d]=new g.b(i,u[d]);for(;d<_;++d)(b=r[d])&&(f[d]=b)}function h(i,r,n,s,f,u,d){var b,_,x={},M=r.length,P=u.length,C=new Array(M),O;for(b=0;b<M;++b)(_=r[b])&&(C[b]=O=p+d.call(_,_.__data__,b,r),O in x?f[b]=_:x[O]=_);for(b=0;b<P;++b)O=p+d.call(i,u[b],b,u),(_=x[O])?(s[b]=_,_.__data__=u[b],x[O]=null):n[b]=new g.b(i,u[b]);for(b=0;b<M;++b)(_=r[b])&&x[C[b]]===_&&(f[b]=_)}L.a=function(i,r){if(!i)return O=new Array(this.size()),x=-1,this.each(function(Q){O[++x]=Q}),O;var n=r?h:c,s=this._parents,f=this._groups;typeof i!="function"&&(i=o.i(v.a)(i));for(var u=f.length,d=new Array(u),b=new Array(u),_=new Array(u),x=0;x<u;++x){var M=s[x],P=f[x],C=P.length,O=i.call(M,M&&M.__data__,x,s),w=O.length,S=b[x]=new Array(w),I=d[x]=new Array(w),j=_[x]=new Array(C);n(M,P,S,I,j,O,r);for(var N=0,W=0,H,J;N<w;++N)if(H=S[N]){for(N>=W&&(W=N+1);!(J=I[W])&&++W<w;);H._next=J||null}}return d=new e.b(d,s),d._enter=b,d._exit=_,d}},function(B,L,o){"use strict";L.a=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},function(B,L,o){"use strict";var e=o(133);function g(c,h,i){var r=o.i(e.a)(c),n=r.CustomEvent;typeof n=="function"?n=new n(h,i):(n=r.document.createEvent("Event"),i?(n.initEvent(h,i.bubbles,i.cancelable),n.detail=i.detail):n.initEvent(h,!1,!1)),c.dispatchEvent(n)}function v(c,h){return function(){return g(this,c,h)}}function p(c,h){return function(){return g(this,c,h.apply(this,arguments))}}L.a=function(c,h){return this.each((typeof h=="function"?p:v)(c,h))}},function(B,L,o){"use strict";L.a=function(e){for(var g=this._groups,v=0,p=g.length;v<p;++v)for(var c=g[v],h=0,i=c.length,r;h<i;++h)(r=c[h])&&e.call(r,r.__data__,h,c);return this}},function(B,L,o){"use strict";L.a=function(){return!this.node()}},function(B,L,o){"use strict";var e=o(250),g=o(20);L.a=function(){return new g.b(this._exit||this._groups.map(e.a),this._parents)}},function(B,L,o){"use strict";var e=o(20),g=o(247);L.a=function(v){typeof v!="function"&&(v=o.i(g.a)(v));for(var p=this._groups,c=p.length,h=new Array(c),i=0;i<c;++i)for(var r=p[i],n=r.length,s=h[i]=[],f,u=0;u<n;++u)(f=r[u])&&v.call(f,f.__data__,u,r)&&s.push(f);return new e.b(h,this._parents)}},function(B,L,o){"use strict";function e(){this.innerHTML=""}function g(p){return function(){this.innerHTML=p}}function v(p){return function(){var c=p.apply(this,arguments);this.innerHTML=c==null?"":c}}L.a=function(p){return arguments.length?this.each(p==null?e:(typeof p=="function"?v:g)(p)):this.node().innerHTML}},function(B,L,o){"use strict";var e=o(73),g=o(131);function v(){return null}L.a=function(p,c){var h=typeof p=="function"?p:o.i(e.a)(p),i=c==null?v:typeof c=="function"?c:o.i(g.a)(c);return this.select(function(){return this.insertBefore(h.apply(this,arguments),i.apply(this,arguments)||null)})}},function(B,L,o){"use strict";L.a=function(e,g,v){var p=this.enter(),c=this,h=this.exit();return p=typeof e=="function"?e(p):p.append(e+""),g!=null&&(c=g(c)),v==null?h.remove():v(h),p&&c?p.merge(c).order():c}},function(B,L,o){"use strict";function e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}L.a=function(){return this.each(e)}},function(B,L,o){"use strict";var e=o(20);L.a=function(g){for(var v=this._groups,p=g._groups,c=v.length,h=p.length,i=Math.min(c,h),r=new Array(c),n=0;n<i;++n)for(var s=v[n],f=p[n],u=s.length,d=r[n]=new Array(u),b,_=0;_<u;++_)(b=s[_]||f[_])&&(d[_]=b);for(;n<c;++n)r[n]=v[n];return new e.b(r,this._parents)}},function(B,L,o){"use strict";L.a=function(){for(var e=this._groups,g=0,v=e.length;g<v;++g)for(var p=e[g],c=0,h=p.length;c<h;++c){var i=p[c];if(i)return i}return null}},function(B,L,o){"use strict";L.a=function(){var e=new Array(this.size()),g=-1;return this.each(function(){e[++g]=this}),e}},function(B,L,o){"use strict";L.a=function(){for(var e=this._groups,g=-1,v=e.length;++g<v;)for(var p=e[g],c=p.length-1,h=p[c],i;--c>=0;)(i=p[c])&&(h&&i.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(i,h),h=i);return this}},function(B,L,o){"use strict";function e(p){return function(){delete this[p]}}function g(p,c){return function(){this[p]=c}}function v(p,c){return function(){var h=c.apply(this,arguments);h==null?delete this[p]:this[p]=h}}L.a=function(p,c){return arguments.length>1?this.each((c==null?e:typeof c=="function"?v:g)(p,c)):this.node()[p]}},function(B,L,o){"use strict";function e(){this.nextSibling&&this.parentNode.appendChild(this)}L.a=function(){return this.each(e)}},function(B,L,o){"use strict";function e(){var g=this.parentNode;g&&g.removeChild(this)}L.a=function(){return this.each(e)}},function(B,L,o){"use strict";var e=o(20),g=o(131);L.a=function(v){typeof v!="function"&&(v=o.i(g.a)(v));for(var p=this._groups,c=p.length,h=new Array(c),i=0;i<c;++i)for(var r=p[i],n=r.length,s=h[i]=new Array(n),f,u,d=0;d<n;++d)(f=r[d])&&(u=v.call(f,f.__data__,d,r))&&("__data__"in f&&(u.__data__=f.__data__),s[d]=u);return new e.b(h,this._parents)}},function(B,L,o){"use strict";var e=o(20),g=o(252);L.a=function(v){typeof v!="function"&&(v=o.i(g.a)(v));for(var p=this._groups,c=p.length,h=[],i=[],r=0;r<c;++r)for(var n=p[r],s=n.length,f,u=0;u<s;++u)(f=n[u])&&(h.push(v.call(f,f.__data__,u,n)),i.push(f));return new e.b(h,i)}},function(B,L,o){"use strict";L.a=function(){var e=0;return this.each(function(){++e}),e}},function(B,L,o){"use strict";var e=o(20);L.a=function(v){v||(v=g);function p(b,_){return b&&_?v(b.__data__,_.__data__):!b-!_}for(var c=this._groups,h=c.length,i=new Array(h),r=0;r<h;++r){for(var n=c[r],s=n.length,f=i[r]=new Array(s),u,d=0;d<s;++d)(u=n[d])&&(f[d]=u);f.sort(p)}return new e.b(i,this._parents).order()};function g(v,p){return v<p?-1:v>p?1:v>=p?0:NaN}},function(B,L,o){"use strict";function e(){this.textContent=""}function g(p){return function(){this.textContent=p}}function v(p){return function(){var c=p.apply(this,arguments);this.textContent=c==null?"":c}}L.a=function(p){return arguments.length?this.each(p==null?e:(typeof p=="function"?v:g)(p)):this.node().textContent}},function(B,L,o){"use strict";var e=o(132),g=o(74);L.a=function(v,p,c){arguments.length<3&&(c=p,p=o.i(e.a)().changedTouches);for(var h=0,i=p?p.length:0,r;h<i;++h)if((r=p[h]).identifier===c)return o.i(g.a)(v,r);return null}},function(B,L,o){"use strict";var e=o(132),g=o(74);L.a=function(v,p){p==null&&(p=o.i(e.a)().touches);for(var c=0,h=p?p.length:0,i=new Array(h);c<h;++c)i[c]=o.i(g.a)(v,p[c]);return i}},function(B,L,o){"use strict";var e=o(134);L.a=function(g,v,p){var c=new e.d,h=v;return v==null?(c.restart(g,v,p),c):(v=+v,p=p==null?o.i(e.a)():+p,c.restart(function i(r){r+=h,c.restart(i,h+=v,p),g(r)},v,p),c)}},function(B,L,o){"use strict";var e=o(134);L.a=function(g,v,p){var c=new e.d;return v=v==null?0:+v,c.restart(function(h){c.stop(),g(h+v)},v,p),c}},function(B,L,o){"use strict";var e=o(29),g=o(17),v=[null];L.a=function(p,c){var h=p.__transition,i,r;if(h){c=c==null?null:c+"";for(r in h)if((i=h[r]).state>g.d&&i.name===c)return new e.b([[p]],v,c,+r)}return null}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var e=o(570),g=o(29);o.d(L,"transition",function(){return g.a});var v=o(568);o.d(L,"active",function(){return v.a});var p=o(253);o.d(L,"interrupt",function(){return p.a})},function(B,L,o){"use strict";var e=o(24),g=o(571),v=o(572);e.selection.prototype.interrupt=g.a,e.selection.prototype.transition=v.a},function(B,L,o){"use strict";var e=o(253);L.a=function(g){return this.each(function(){o.i(e.a)(this,g)})}},function(B,L,o){"use strict";var e=o(29),g=o(17),v=o(121),p=o(75),c={time:null,delay:0,duration:250,ease:v.easeCubicInOut};function h(i,r){for(var n;!(n=i.__transition)||!(n=n[r]);)if(!(i=i.parentNode))return c.time=o.i(p.now)(),c;return n}L.a=function(i){var r,n;i instanceof e.b?(r=i._id,i=i._name):(r=o.i(e.c)(),(n=c).time=o.i(p.now)(),i=i==null?null:i+"");for(var s=this._groups,f=s.length,u=0;u<f;++u)for(var d=s[u],b=d.length,_,x=0;x<b;++x)(_=d[x])&&o.i(g.h)(_,i,r,x,d,n||h(_,r));return new e.b(s,this._parents,i,r)}},function(B,L,o){"use strict";var e=o(125),g=o(24),v=o(76),p=o(254);function c(f){return function(){this.removeAttribute(f)}}function h(f){return function(){this.removeAttributeNS(f.space,f.local)}}function i(f,u,d){var b,_=d+"",x;return function(){var M=this.getAttribute(f);return M===_?null:M===b?x:x=u(b=M,d)}}function r(f,u,d){var b,_=d+"",x;return function(){var M=this.getAttributeNS(f.space,f.local);return M===_?null:M===b?x:x=u(b=M,d)}}function n(f,u,d){var b,_,x;return function(){var M,P=d(this),C;return P==null?void this.removeAttribute(f):(M=this.getAttribute(f),C=P+"",M===C?null:M===b&&C===_?x:(_=C,x=u(b=M,P)))}}function s(f,u,d){var b,_,x;return function(){var M,P=d(this),C;return P==null?void this.removeAttributeNS(f.space,f.local):(M=this.getAttributeNS(f.space,f.local),C=P+"",M===C?null:M===b&&C===_?x:(_=C,x=u(b=M,P)))}}L.a=function(f,u){var d=o.i(g.namespace)(f),b=d==="transform"?e.e:p.a;return this.attrTween(f,typeof u=="function"?(d.local?s:n)(d,b,o.i(v.b)(this,"attr."+f,u)):u==null?(d.local?h:c)(d):(d.local?r:i)(d,b,u))}},function(B,L,o){"use strict";var e=o(24);function g(h,i){return function(r){this.setAttribute(h,i.call(this,r))}}function v(h,i){return function(r){this.setAttributeNS(h.space,h.local,i.call(this,r))}}function p(h,i){var r,n;function s(){var f=i.apply(this,arguments);return f!==n&&(r=(n=f)&&v(h,f)),r}return s._value=i,s}function c(h,i){var r,n;function s(){var f=i.apply(this,arguments);return f!==n&&(r=(n=f)&&g(h,f)),r}return s._value=i,s}L.a=function(h,i){var r="attr."+h;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(i==null)return this.tween(r,null);if(typeof i!="function")throw new Error;var n=o.i(e.namespace)(h);return this.tween(r,(n.local?p:c)(n,i))}},function(B,L,o){"use strict";var e=o(17);function g(p,c){return function(){o.i(e.g)(this,p).delay=+c.apply(this,arguments)}}function v(p,c){return c=+c,function(){o.i(e.g)(this,p).delay=c}}L.a=function(p){var c=this._id;return arguments.length?this.each((typeof p=="function"?g:v)(c,p)):o.i(e.f)(this.node(),c).delay}},function(B,L,o){"use strict";var e=o(17);function g(p,c){return function(){o.i(e.e)(this,p).duration=+c.apply(this,arguments)}}function v(p,c){return c=+c,function(){o.i(e.e)(this,p).duration=c}}L.a=function(p){var c=this._id;return arguments.length?this.each((typeof p=="function"?g:v)(c,p)):o.i(e.f)(this.node(),c).duration}},function(B,L,o){"use strict";var e=o(17);function g(v,p){if(typeof p!="function")throw new Error;return function(){o.i(e.e)(this,v).ease=p}}L.a=function(v){var p=this._id;return arguments.length?this.each(g(p,v)):o.i(e.f)(this.node(),p).ease}},function(B,L,o){"use strict";var e=o(17);L.a=function(){var g,v,p=this,c=p._id,h=p.size();return new Promise(function(i,r){var n={value:r},s={value:function(){--h==0&&i()}};p.each(function(){var f=o.i(e.e)(this,c),u=f.on;u!==g&&(v=(g=u).copy(),v._.cancel.push(n),v._.interrupt.push(n),v._.end.push(s)),f.on=v})})}},function(B,L,o){"use strict";var e=o(24),g=o(29);L.a=function(v){typeof v!="function"&&(v=o.i(e.matcher)(v));for(var p=this._groups,c=p.length,h=new Array(c),i=0;i<c;++i)for(var r=p[i],n=r.length,s=h[i]=[],f,u=0;u<n;++u)(f=r[u])&&v.call(f,f.__data__,u,r)&&s.push(f);return new g.b(h,this._parents,this._name,this._id)}},function(B,L,o){"use strict";var e=o(29);L.a=function(g){if(g._id!==this._id)throw new Error;for(var v=this._groups,p=g._groups,c=v.length,h=p.length,i=Math.min(c,h),r=new Array(c),n=0;n<i;++n)for(var s=v[n],f=p[n],u=s.length,d=r[n]=new Array(u),b,_=0;_<u;++_)(b=s[_]||f[_])&&(d[_]=b);for(;n<c;++n)r[n]=v[n];return new e.b(r,this._parents,this._name,this._id)}},function(B,L,o){"use strict";var e=o(17);function g(p){return(p+"").trim().split(/^|\s+/).every(function(c){var h=c.indexOf(".");return h>=0&&(c=c.slice(0,h)),!c||c==="start"})}function v(p,c,h){var i,r,n=g(c)?e.g:e.e;return function(){var s=n(this,p),f=s.on;f!==i&&(r=(i=f).copy()).on(c,h),s.on=r}}L.a=function(p,c){var h=this._id;return arguments.length<2?o.i(e.f)(this.node(),h).on.on(p):this.each(v(h,p,c))}},function(B,L,o){"use strict";function e(g){return function(){var v=this.parentNode;for(var p in this.__transition)if(+p!==g)return;v&&v.removeChild(this)}}L.a=function(){return this.on("end.remove",e(this._id))}},function(B,L,o){"use strict";var e=o(24),g=o(29),v=o(17);L.a=function(p){var c=this._name,h=this._id;typeof p!="function"&&(p=o.i(e.selector)(p));for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s)for(var f=i[s],u=f.length,d=n[s]=new Array(u),b,_,x=0;x<u;++x)(b=f[x])&&(_=p.call(b,b.__data__,x,f))&&("__data__"in b&&(_.__data__=b.__data__),d[x]=_,o.i(v.h)(d[x],c,h,x,d,o.i(v.f)(b,h)));return new g.b(n,this._parents,c,h)}},function(B,L,o){"use strict";var e=o(24),g=o(29),v=o(17);L.a=function(p){var c=this._name,h=this._id;typeof p!="function"&&(p=o.i(e.selectorAll)(p));for(var i=this._groups,r=i.length,n=[],s=[],f=0;f<r;++f)for(var u=i[f],d=u.length,b,_=0;_<d;++_)if(b=u[_]){for(var x=p.call(b,b.__data__,_,u),M,P=o.i(v.f)(b,h),C=0,O=x.length;C<O;++C)(M=x[C])&&o.i(v.h)(M,c,h,C,x,P);n.push(x),s.push(b)}return new g.b(n,s,c,h)}},function(B,L,o){"use strict";var e=o(24),g=e.selection.prototype.constructor;L.a=function(){return new g(this._groups,this._parents)}},function(B,L,o){"use strict";var e=o(125),g=o(24),v=o(17),p=o(76),c=o(254);function h(f,u){var d,b,_;return function(){var x=o.i(g.style)(this,f),M=(this.style.removeProperty(f),o.i(g.style)(this,f));return x===M?null:x===d&&M===b?_:_=u(d=x,b=M)}}function i(f){return function(){this.style.removeProperty(f)}}function r(f,u,d){var b,_=d+"",x;return function(){var M=o.i(g.style)(this,f);return M===_?null:M===b?x:x=u(b=M,d)}}function n(f,u,d){var b,_,x;return function(){var M=o.i(g.style)(this,f),P=d(this),C=P+"";return P==null&&(C=P=(this.style.removeProperty(f),o.i(g.style)(this,f))),M===C?null:M===b&&C===_?x:(_=C,x=u(b=M,P))}}function s(f,u){var d,b,_,x="style."+u,M="end."+x,P;return function(){var C=o.i(v.e)(this,f),O=C.on,w=C.value[x]==null?P||(P=i(u)):void 0;(O!==d||_!==w)&&(b=(d=O).copy()).on(M,_=w),C.on=b}}L.a=function(f,u,d){var b=(f+="")==="transform"?e.a:c.a;return u==null?this.styleTween(f,h(f,b)).on("end.style."+f,i(f)):typeof u=="function"?this.styleTween(f,n(f,b,o.i(p.b)(this,"style."+f,u))).each(s(this._id,f)):this.styleTween(f,r(f,b,u),d).on("end.style."+f,null)}},function(B,L,o){"use strict";function e(v,p,c){return function(h){this.style.setProperty(v,p.call(this,h),c)}}function g(v,p,c){var h,i;function r(){var n=p.apply(this,arguments);return n!==i&&(h=(i=n)&&e(v,n,c)),h}return r._value=p,r}L.a=function(v,p,c){var h="style."+(v+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(p==null)return this.tween(h,null);if(typeof p!="function")throw new Error;return this.tween(h,g(v,p,c==null?"":c))}},function(B,L,o){"use strict";var e=o(76);function g(p){return function(){this.textContent=p}}function v(p){return function(){var c=p(this);this.textContent=c==null?"":c}}L.a=function(p){return this.tween("text",typeof p=="function"?v(o.i(e.b)(this,"text",p)):g(p==null?"":p+""))}},function(B,L,o){"use strict";function e(v){return function(p){this.textContent=v.call(this,p)}}function g(v){var p,c;function h(){var i=v.apply(this,arguments);return i!==c&&(p=(c=i)&&e(i)),p}return h._value=v,h}L.a=function(v){var p="text";if(arguments.length<1)return(p=this.tween(p))&&p._value;if(v==null)return this.tween(p,null);if(typeof v!="function")throw new Error;return this.tween(p,g(v))}},function(B,L,o){"use strict";var e=o(29),g=o(17);L.a=function(){for(var v=this._name,p=this._id,c=o.i(e.c)(),h=this._groups,i=h.length,r=0;r<i;++r)for(var n=h[r],s=n.length,f,u=0;u<s;++u)if(f=n[u]){var d=o.i(g.f)(f,p);o.i(g.h)(f,v,c,u,n,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new e.b(h,this._parents,v,c)}},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),function(e){o.d(L,"BrowserInfo",function(){return v}),o.d(L,"NodeInfo",function(){return p}),o.d(L,"SearchBotDeviceInfo",function(){return c}),o.d(L,"BotInfo",function(){return h}),o.d(L,"ReactNativeInfo",function(){return i}),L.detect=d,L.browserName=_,L.parseUserAgent=x,L.detectOS=M,L.getNodeVersion=P;var g=this&&this.__spreadArray||function(O,w,S){if(S||arguments.length===2)for(var I=0,j=w.length,N;I<j;I++)(N||!(I in w))&&(N||(N=Array.prototype.slice.call(w,0,I)),N[I]=w[I]);return O.concat(N||Array.prototype.slice.call(w))},v=function(){function O(w,S,I){this.name=w,this.version=S,this.os=I,this.type="browser"}return O}(),p=function(){function O(w){this.version=w,this.type="node",this.name="node",this.os=e.platform}return O}(),c=function(){function O(w,S,I,j){this.name=w,this.version=S,this.os=I,this.bot=j,this.type="bot-device"}return O}(),h=function(){function O(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return O}(),i=function(){function O(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return O}(),r=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,n=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,s=3,f=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",r]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(O){return O?x(O):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new i:typeof navigator!="undefined"?x(navigator.userAgent):P()}function b(O){return O!==""&&f.reduce(function(w,S){var I=S[0],j=S[1];if(w)return w;var N=j.exec(O);return!!N&&[I,N]},!1)}function _(O){var w=b(O);return w?w[0]:null}function x(O){var w=b(O);if(!w)return null;var S=w[0],I=w[1];if(S==="searchbot")return new h;var j=I[1]&&I[1].split(".").join("_").split("_").slice(0,3);j?j.length<s&&(j=g(g([],j,!0),C(s-j.length),!0)):j=[];var N=j.join("."),W=M(O),H=n.exec(O);return H&&H[1]?new c(S,N,W,H[1]):new v(S,N,W)}function M(O){for(var w=0,S=u.length;w<S;w++){var I=u[w],j=I[0],N=I[1],W=N.exec(O);if(W)return j}return null}function P(){var O=typeof e!="undefined"&&e.version;return O?new p(e.version.slice(1)):null}function C(O){for(var w=[],S=0;S<O;S++)w.push("0");return w}}.call(L,o(595))},function(B,L,o){"use strict";var e=function(g,v,p,c,h,i,r,n){if(v===void 0)throw new Error("invariant requires an error message argument");if(!g){var s;if(v===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[p,c,h,i,r,n],u=0;s=new Error(v.replace(/%s/g,function(){return f[u++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};B.exports=e},function(B,L,o){(function(e){var g="Expected a function",v=0/0,p="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,r=/^0o[0-7]+$/i,n=parseInt,s=typeof e=="object"&&e&&e.Object===Object&&e,f=typeof self=="object"&&self&&self.Object===Object&&self,u=s||f||Function("return this")(),d=Object.prototype,b=d.toString,_=Math.max,x=Math.min,M=function(){return u.Date.now()};function P(I,j,N){var W,H,J,Q,ne,K,ie=0,de=!1,we=!1,Re=!0;if(typeof I!="function")throw new TypeError(g);j=S(j)||0,C(N)&&(de=!!N.leading,we="maxWait"in N,J=we?_(S(N.maxWait)||0,j):J,Re="trailing"in N?!!N.trailing:Re);function _e(Ae){var pe=W,be=H;return W=H=void 0,ie=Ae,Q=I.apply(be,pe),Q}function Ue(Ae){return ie=Ae,ne=setTimeout(Se,j),de?_e(Ae):Q}function rt(Ae){var pe=Ae-K,be=Ae-ie,le=j-pe;return we?x(le,J-be):le}function Fe(Ae){var pe=Ae-K,be=Ae-ie;return K===void 0||pe>=j||pe<0||we&&be>=J}function Se(){var Ae=M();if(Fe(Ae))return ye(Ae);ne=setTimeout(Se,rt(Ae))}function ye(Ae){return ne=void 0,Re&&W?_e(Ae):(W=H=void 0,Q)}function Oe(){ne!==void 0&&clearTimeout(ne),ie=0,W=K=H=ne=void 0}function ue(){return ne===void 0?Q:ye(M())}function xe(){var Ae=M(),pe=Fe(Ae);if(W=arguments,H=this,K=Ae,pe){if(ne===void 0)return Ue(K);if(we)return ne=setTimeout(Se,j),_e(K)}return ne===void 0&&(ne=setTimeout(Se,j)),Q}return xe.cancel=Oe,xe.flush=ue,xe}function C(I){var j=typeof I;return!!I&&(j=="object"||j=="function")}function O(I){return!!I&&typeof I=="object"}function w(I){return typeof I=="symbol"||O(I)&&b.call(I)==p}function S(I){if(typeof I=="number")return I;if(w(I))return v;if(C(I)){var j=typeof I.valueOf=="function"?I.valueOf():I;I=C(j)?j+"":j}if(typeof I!="string")return I===0?I:+I;I=I.replace(c,"");var N=i.test(I);return N||r.test(I)?n(I.slice(2),N?2:8):h.test(I)?v:+I}B.exports=P}).call(L,o(258))},function(B,L,o){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function p(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function c(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var i={},r=0;r<10;r++)i["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(i).map(function(f){return i[f]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(f){s[f]=f}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch(f){return!1}}B.exports=c()?Object.assign:function(h,i){for(var r,n=p(h),s,f=1;f<arguments.length;f++){r=Object(arguments[f]);for(var u in r)g.call(r,u)&&(n[u]=r[u]);if(e){s=e(r);for(var d=0;d<s.length;d++)v.call(r,s[d])&&(n[s[d]]=r[s[d]])}}return n}},function(B,L){var o=B.exports={},e,g;function v(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=v}catch(_){e=v}try{typeof clearTimeout=="function"?g=clearTimeout:g=p}catch(_){g=p}})();function c(_){if(e===setTimeout)return setTimeout(_,0);if((e===v||!e)&&setTimeout)return e=setTimeout,setTimeout(_,0);try{return e(_,0)}catch(x){try{return e.call(null,_,0)}catch(M){return e.call(this,_,0)}}}function h(_){if(g===clearTimeout)return clearTimeout(_);if((g===p||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(_);try{return g(_)}catch(x){try{return g.call(null,_)}catch(M){return g.call(this,_)}}}var i=[],r=!1,n,s=-1;function f(){!r||!n||(r=!1,n.length?i=n.concat(i):s=-1,i.length&&u())}function u(){if(!r){var _=c(f);r=!0;for(var x=i.length;x;){for(n=i,i=[];++s<x;)n&&n[s].run();s=-1,x=i.length}n=null,r=!1,h(_)}}o.nextTick=function(_){var x=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)x[M-1]=arguments[M];i.push(new d(_,x)),i.length===1&&!r&&c(u)};function d(_,x){this.fun=_,this.array=x}d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function b(){}o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(_){return[]},o.binding=function(_){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(_){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(B,L,o){"use strict";var e=function(){},g=o(256),v={},p=Function.call.bind(Object.prototype.hasOwnProperty);e=function(h){var i="Warning: "+h;typeof console!="undefined"&&console.error(i);try{throw new Error(i)}catch(r){}};function c(h,i,r,n,s){for(var f in h)if(p(h,f)){var u;try{if(typeof h[f]!="function"){var d=Error((n||"React class")+": "+r+" type `"+f+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof h[f]+"`.");throw d.name="Invariant Violation",d}u=h[f](i,f,n,r,null,g)}catch(_){u=_}if(u&&!(u instanceof Error)&&e((n||"React class")+": type specification of "+r+" `"+f+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in v)){v[u.message]=!0;var b=s?s():"";e("Failed "+r+" type: "+u.message+(b!=null?b:""))}}}c.resetWarningCache=function(){v={}},B.exports=c},function(B,L,o){"use strict";var e=o(257),g=o(594),v=o(256),p=o(596),c=Function.call.bind(Object.prototype.hasOwnProperty),h=function(){};h=function(r){var n="Warning: "+r;typeof console!="undefined"&&console.error(n);try{throw new Error(n)}catch(s){}};function i(){return null}B.exports=function(r,n){var s=typeof Symbol=="function"&&Symbol.iterator,f="@@iterator";function u(_e){var Ue=_e&&(s&&_e[s]||_e[f]);if(typeof Ue=="function")return Ue}var d="<<anonymous>>",b={array:P("array"),bool:P("boolean"),func:P("function"),number:P("number"),object:P("object"),string:P("string"),symbol:P("symbol"),any:C(),arrayOf:O,element:w(),elementType:S(),instanceOf:I,node:H(),objectOf:N,oneOf:j,oneOfType:W,shape:J,exact:Q};function _(_e,Ue){return _e===Ue?_e!==0||1/_e==1/Ue:_e!==_e&&Ue!==Ue}function x(_e){this.message=_e,this.stack=""}x.prototype=Error.prototype;function M(_e){var Ue={},rt=0;function Fe(ye,Oe,ue,xe,Ae,pe,be){if(xe=xe||d,pe=pe||ue,be!==v){if(n){var le=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw le.name="Invariant Violation",le}else if(typeof console!="undefined"){var z=xe+":"+ue;!Ue[z]&&rt<3&&(h("You are manually calling a React.PropTypes validation function for the `"+pe+"` prop on `"+xe+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),Ue[z]=!0,rt++)}}return Oe[ue]==null?ye?Oe[ue]===null?new x("The "+Ae+" `"+pe+"` is marked as required "+("in `"+xe+"`, but its value is `null`.")):new x("The "+Ae+" `"+pe+"` is marked as required in "+("`"+xe+"`, but its value is `undefined`.")):null:_e(Oe,ue,xe,Ae,pe)}var Se=Fe.bind(null,!1);return Se.isRequired=Fe.bind(null,!0),Se}function P(_e){function Ue(rt,Fe,Se,ye,Oe,ue){var xe=rt[Fe],Ae=ie(xe);if(Ae!==_e){var pe=de(xe);return new x("Invalid "+ye+" `"+Oe+"` of type "+("`"+pe+"` supplied to `"+Se+"`, expected ")+("`"+_e+"`."))}return null}return M(Ue)}function C(){return M(i)}function O(_e){function Ue(rt,Fe,Se,ye,Oe){if(typeof _e!="function")return new x("Property `"+Oe+"` of component `"+Se+"` has invalid PropType notation inside arrayOf.");var ue=rt[Fe];if(!Array.isArray(ue)){var xe=ie(ue);return new x("Invalid "+ye+" `"+Oe+"` of type "+("`"+xe+"` supplied to `"+Se+"`, expected an array."))}for(var Ae=0;Ae<ue.length;Ae++){var pe=_e(ue,Ae,Se,ye,Oe+"["+Ae+"]",v);if(pe instanceof Error)return pe}return null}return M(Ue)}function w(){function _e(Ue,rt,Fe,Se,ye){var Oe=Ue[rt];if(!r(Oe)){var ue=ie(Oe);return new x("Invalid "+Se+" `"+ye+"` of type "+("`"+ue+"` supplied to `"+Fe+"`, expected a single ReactElement."))}return null}return M(_e)}function S(){function _e(Ue,rt,Fe,Se,ye){var Oe=Ue[rt];if(!e.isValidElementType(Oe)){var ue=ie(Oe);return new x("Invalid "+Se+" `"+ye+"` of type "+("`"+ue+"` supplied to `"+Fe+"`, expected a single ReactElement type."))}return null}return M(_e)}function I(_e){function Ue(rt,Fe,Se,ye,Oe){if(!(rt[Fe]instanceof _e)){var ue=_e.name||d,xe=Re(rt[Fe]);return new x("Invalid "+ye+" `"+Oe+"` of type "+("`"+xe+"` supplied to `"+Se+"`, expected ")+("instance of `"+ue+"`."))}return null}return M(Ue)}function j(_e){if(!Array.isArray(_e))return arguments.length>1?h("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):h("Invalid argument supplied to oneOf, expected an array."),i;function Ue(rt,Fe,Se,ye,Oe){for(var ue=rt[Fe],xe=0;xe<_e.length;xe++)if(_(ue,_e[xe]))return null;var Ae=JSON.stringify(_e,function(be,le){var z=de(le);return z==="symbol"?String(le):le});return new x("Invalid "+ye+" `"+Oe+"` of value `"+String(ue)+"` "+("supplied to `"+Se+"`, expected one of "+Ae+"."))}return M(Ue)}function N(_e){function Ue(rt,Fe,Se,ye,Oe){if(typeof _e!="function")return new x("Property `"+Oe+"` of component `"+Se+"` has invalid PropType notation inside objectOf.");var ue=rt[Fe],xe=ie(ue);if(xe!=="object")return new x("Invalid "+ye+" `"+Oe+"` of type "+("`"+xe+"` supplied to `"+Se+"`, expected an object."));for(var Ae in ue)if(c(ue,Ae)){var pe=_e(ue,Ae,Se,ye,Oe+"."+Ae,v);if(pe instanceof Error)return pe}return null}return M(Ue)}function W(_e){if(!Array.isArray(_e))return h("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var Ue=0;Ue<_e.length;Ue++){var rt=_e[Ue];if(typeof rt!="function")return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+we(rt)+" at index "+Ue+"."),i}function Fe(Se,ye,Oe,ue,xe){for(var Ae=0;Ae<_e.length;Ae++){var pe=_e[Ae];if(pe(Se,ye,Oe,ue,xe,v)==null)return null}return new x("Invalid "+ue+" `"+xe+"` supplied to "+("`"+Oe+"`."))}return M(Fe)}function H(){function _e(Ue,rt,Fe,Se,ye){return ne(Ue[rt])?null:new x("Invalid "+Se+" `"+ye+"` supplied to "+("`"+Fe+"`, expected a ReactNode."))}return M(_e)}function J(_e){function Ue(rt,Fe,Se,ye,Oe){var ue=rt[Fe],xe=ie(ue);if(xe!=="object")return new x("Invalid "+ye+" `"+Oe+"` of type `"+xe+"` "+("supplied to `"+Se+"`, expected `object`."));for(var Ae in _e){var pe=_e[Ae];if(!!pe){var be=pe(ue,Ae,Se,ye,Oe+"."+Ae,v);if(be)return be}}return null}return M(Ue)}function Q(_e){function Ue(rt,Fe,Se,ye,Oe){var ue=rt[Fe],xe=ie(ue);if(xe!=="object")return new x("Invalid "+ye+" `"+Oe+"` of type `"+xe+"` "+("supplied to `"+Se+"`, expected `object`."));var Ae=g({},rt[Fe],_e);for(var pe in Ae){var be=_e[pe];if(!be)return new x("Invalid "+ye+" `"+Oe+"` key `"+pe+"` supplied to `"+Se+"`.\nBad object: "+JSON.stringify(rt[Fe],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(_e),null,"  "));var le=be(ue,pe,Se,ye,Oe+"."+pe,v);if(le)return le}return null}return M(Ue)}function ne(_e){switch(typeof _e){case"number":case"string":case"undefined":return!0;case"boolean":return!_e;case"object":if(Array.isArray(_e))return _e.every(ne);if(_e===null||r(_e))return!0;var Ue=u(_e);if(Ue){var rt=Ue.call(_e),Fe;if(Ue!==_e.entries){for(;!(Fe=rt.next()).done;)if(!ne(Fe.value))return!1}else for(;!(Fe=rt.next()).done;){var Se=Fe.value;if(Se&&!ne(Se[1]))return!1}}else return!1;return!0;default:return!1}}function K(_e,Ue){return _e==="symbol"?!0:Ue?Ue["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Ue instanceof Symbol:!1}function ie(_e){var Ue=typeof _e;return Array.isArray(_e)?"array":_e instanceof RegExp?"object":K(Ue,_e)?"symbol":Ue}function de(_e){if(typeof _e=="undefined"||_e===null)return""+_e;var Ue=ie(_e);if(Ue==="object"){if(_e instanceof Date)return"date";if(_e instanceof RegExp)return"regexp"}return Ue}function we(_e){var Ue=de(_e);switch(Ue){case"array":case"object":return"an "+Ue;case"boolean":case"date":case"regexp":return"a "+Ue;default:return Ue}}function Re(_e){return!_e.constructor||!_e.constructor.name?d:_e.constructor.name}return b.checkPropTypes=p,b.resetWarningCache=p.resetWarningCache,b.PropTypes=b,b}},function(B,L,o){"use strict";/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){"use strict";var e=typeof Symbol=="function"&&Symbol.for,g=e?Symbol.for("react.element"):60103,v=e?Symbol.for("react.portal"):60106,p=e?Symbol.for("react.fragment"):60107,c=e?Symbol.for("react.strict_mode"):60108,h=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,r=e?Symbol.for("react.context"):60110,n=e?Symbol.for("react.async_mode"):60111,s=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,_=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,M=e?Symbol.for("react.fundamental"):60117,P=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function O(z){return typeof z=="string"||typeof z=="function"||z===p||z===s||z===h||z===c||z===u||z===d||typeof z=="object"&&z!==null&&(z.$$typeof===_||z.$$typeof===b||z.$$typeof===i||z.$$typeof===r||z.$$typeof===f||z.$$typeof===M||z.$$typeof===P||z.$$typeof===C||z.$$typeof===x)}function w(z){if(typeof z=="object"&&z!==null){var ae=z.$$typeof;switch(ae){case g:var V=z.type;switch(V){case n:case s:case p:case h:case c:case u:return V;default:var re=V&&V.$$typeof;switch(re){case r:case f:case _:case b:case i:return re;default:return ae}}case v:return ae}}}var S=n,I=s,j=r,N=i,W=g,H=f,J=p,Q=_,ne=b,K=v,ie=h,de=c,we=u,Re=!1;function _e(z){return Re||(Re=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Ue(z)||w(z)===n}function Ue(z){return w(z)===s}function rt(z){return w(z)===r}function Fe(z){return w(z)===i}function Se(z){return typeof z=="object"&&z!==null&&z.$$typeof===g}function ye(z){return w(z)===f}function Oe(z){return w(z)===p}function ue(z){return w(z)===_}function xe(z){return w(z)===b}function Ae(z){return w(z)===v}function pe(z){return w(z)===h}function be(z){return w(z)===c}function le(z){return w(z)===u}L.AsyncMode=S,L.ConcurrentMode=I,L.ContextConsumer=j,L.ContextProvider=N,L.Element=W,L.ForwardRef=H,L.Fragment=J,L.Lazy=Q,L.Memo=ne,L.Portal=K,L.Profiler=ie,L.StrictMode=de,L.Suspense=we,L.isAsyncMode=_e,L.isConcurrentMode=Ue,L.isContextConsumer=rt,L.isContextProvider=Fe,L.isElement=Se,L.isForwardRef=ye,L.isFragment=Oe,L.isLazy=ue,L.isMemo=xe,L.isPortal=Ae,L.isProfiler=pe,L.isStrictMode=be,L.isSuspense=le,L.isValidElementType=O,L.typeOf=w})()},function(B,L,o){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),function(e){var g=function(){if(typeof Map!="undefined")return Map;function K(ie,de){var we=-1;return ie.some(function(Re,_e){return Re[0]===de?(we=_e,!0):!1}),we}return function(){function ie(){this.__entries__=[]}return Object.defineProperty(ie.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),ie.prototype.get=function(de){var we=K(this.__entries__,de),Re=this.__entries__[we];return Re&&Re[1]},ie.prototype.set=function(de,we){var Re=K(this.__entries__,de);~Re?this.__entries__[Re][1]=we:this.__entries__.push([de,we])},ie.prototype.delete=function(de){var we=this.__entries__,Re=K(we,de);~Re&&we.splice(Re,1)},ie.prototype.has=function(de){return!!~K(this.__entries__,de)},ie.prototype.clear=function(){this.__entries__.splice(0)},ie.prototype.forEach=function(de,we){we===void 0&&(we=null);for(var Re=0,_e=this.__entries__;Re<_e.length;Re++){var Ue=_e[Re];de.call(we,Ue[1],Ue[0])}},ie}()}(),v=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,p=function(){return typeof e!="undefined"&&e.Math===Math?e:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),c=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(p):function(K){return setTimeout(function(){return K(Date.now())},1e3/60)}}(),h=2;function i(K,ie){var de=!1,we=!1,Re=0;function _e(){de&&(de=!1,K()),we&&rt()}function Ue(){c(_e)}function rt(){var Fe=Date.now();if(de){if(Fe-Re<h)return;we=!0}else de=!0,we=!1,setTimeout(Ue,ie);Re=Fe}return rt}var r=20,n=["top","right","bottom","left","width","height","size","weight"],s=typeof MutationObserver!="undefined",f=function(){function K(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=i(this.refresh.bind(this),r)}return K.prototype.addObserver=function(ie){~this.observers_.indexOf(ie)||this.observers_.push(ie),this.connected_||this.connect_()},K.prototype.removeObserver=function(ie){var de=this.observers_,we=de.indexOf(ie);~we&&de.splice(we,1),!de.length&&this.connected_&&this.disconnect_()},K.prototype.refresh=function(){var ie=this.updateObservers_();ie&&this.refresh()},K.prototype.updateObservers_=function(){var ie=this.observers_.filter(function(de){return de.gatherActive(),de.hasActive()});return ie.forEach(function(de){return de.broadcastActive()}),ie.length>0},K.prototype.connect_=function(){!v||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},K.prototype.disconnect_=function(){!v||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},K.prototype.onTransitionEnd_=function(ie){var de=ie.propertyName,we=de===void 0?"":de,Re=n.some(function(_e){return!!~we.indexOf(_e)});Re&&this.refresh()},K.getInstance=function(){return this.instance_||(this.instance_=new K),this.instance_},K.instance_=null,K}(),u=function(K,ie){for(var de=0,we=Object.keys(ie);de<we.length;de++){var Re=we[de];Object.defineProperty(K,Re,{value:ie[Re],enumerable:!1,writable:!1,configurable:!0})}return K},d=function(K){var ie=K&&K.ownerDocument&&K.ownerDocument.defaultView;return ie||p},b=j(0,0,0,0);function _(K){return parseFloat(K)||0}function x(K){for(var ie=[],de=1;de<arguments.length;de++)ie[de-1]=arguments[de];return ie.reduce(function(we,Re){var _e=K["border-"+Re+"-width"];return we+_(_e)},0)}function M(K){for(var ie=["top","right","bottom","left"],de={},we=0,Re=ie;we<Re.length;we++){var _e=Re[we],Ue=K["padding-"+_e];de[_e]=_(Ue)}return de}function P(K){var ie=K.getBBox();return j(0,0,ie.width,ie.height)}function C(K){var ie=K.clientWidth,de=K.clientHeight;if(!ie&&!de)return b;var we=d(K).getComputedStyle(K),Re=M(we),_e=Re.left+Re.right,Ue=Re.top+Re.bottom,rt=_(we.width),Fe=_(we.height);if(we.boxSizing==="border-box"&&(Math.round(rt+_e)!==ie&&(rt-=x(we,"left","right")+_e),Math.round(Fe+Ue)!==de&&(Fe-=x(we,"top","bottom")+Ue)),!w(K)){var Se=Math.round(rt+_e)-ie,ye=Math.round(Fe+Ue)-de;Math.abs(Se)!==1&&(rt-=Se),Math.abs(ye)!==1&&(Fe-=ye)}return j(Re.left,Re.top,rt,Fe)}var O=function(){return typeof SVGGraphicsElement!="undefined"?function(K){return K instanceof d(K).SVGGraphicsElement}:function(K){return K instanceof d(K).SVGElement&&typeof K.getBBox=="function"}}();function w(K){return K===d(K).document.documentElement}function S(K){return v?O(K)?P(K):C(K):b}function I(K){var ie=K.x,de=K.y,we=K.width,Re=K.height,_e=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Ue=Object.create(_e.prototype);return u(Ue,{x:ie,y:de,width:we,height:Re,top:de,right:ie+we,bottom:Re+de,left:ie}),Ue}function j(K,ie,de,we){return{x:K,y:ie,width:de,height:we}}var N=function(){function K(ie){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=j(0,0,0,0),this.target=ie}return K.prototype.isActive=function(){var ie=S(this.target);return this.contentRect_=ie,ie.width!==this.broadcastWidth||ie.height!==this.broadcastHeight},K.prototype.broadcastRect=function(){var ie=this.contentRect_;return this.broadcastWidth=ie.width,this.broadcastHeight=ie.height,ie},K}(),W=function(){function K(ie,de){var we=I(de);u(this,{target:ie,contentRect:we})}return K}(),H=function(){function K(ie,de,we){if(this.activeObservations_=[],this.observations_=new g,typeof ie!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=ie,this.controller_=de,this.callbackCtx_=we}return K.prototype.observe=function(ie){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(ie instanceof d(ie).Element))throw new TypeError('parameter 1 is not of type "Element".');var de=this.observations_;de.has(ie)||(de.set(ie,new N(ie)),this.controller_.addObserver(this),this.controller_.refresh())}},K.prototype.unobserve=function(ie){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(ie instanceof d(ie).Element))throw new TypeError('parameter 1 is not of type "Element".');var de=this.observations_;!de.has(ie)||(de.delete(ie),de.size||this.controller_.removeObserver(this))}},K.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},K.prototype.gatherActive=function(){var ie=this;this.clearActive(),this.observations_.forEach(function(de){de.isActive()&&ie.activeObservations_.push(de)})},K.prototype.broadcastActive=function(){if(!!this.hasActive()){var ie=this.callbackCtx_,de=this.activeObservations_.map(function(we){return new W(we.target,we.broadcastRect())});this.callback_.call(ie,de,ie),this.clearActive()}},K.prototype.clearActive=function(){this.activeObservations_.splice(0)},K.prototype.hasActive=function(){return this.activeObservations_.length>0},K}(),J=typeof WeakMap!="undefined"?new WeakMap:new g,Q=function(){function K(ie){if(!(this instanceof K))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var de=f.getInstance(),we=new H(ie,de,this);J.set(this,we)}return K}();["observe","unobserve","disconnect"].forEach(function(K){Q.prototype[K]=function(){var ie;return(ie=J.get(this))[K].apply(ie,arguments)}});var ne=function(){return typeof p.ResizeObserver!="undefined"?p.ResizeObserver:Q}();L.default=ne}.call(L,o(258))},function(B,L,o){(function(e,g){g(L,o(24),o(569))})(this,function(e,g,v){"use strict";var p=1e-10;function c(le,z){var ae=i(le),V=ae.filter(function(Qe){return h(Qe,le)}),re=0,te=0,q=[],ve;if(V.length>1){var Me=u(V);for(ve=0;ve<V.length;++ve){var De=V[ve];De.angle=Math.atan2(De.x-Me.x,De.y-Me.y)}V.sort(function(Qe,it){return it.angle-Qe.angle});var ze=V[V.length-1];for(ve=0;ve<V.length;++ve){var We=V[ve];te+=(ze.x+We.x)*(We.y-ze.y);for(var He={x:(We.x+ze.x)/2,y:(We.y+ze.y)/2},$e=null,It=0;It<We.parentIndex.length;++It)if(ze.parentIndex.indexOf(We.parentIndex[It])>-1){var Yt=le[We.parentIndex[It]],rr=Math.atan2(We.x-Yt.x,We.y-Yt.y),ir=Math.atan2(ze.x-Yt.x,ze.y-Yt.y),Br=ir-rr;Br<0&&(Br+=2*Math.PI);var tr=ir-Br/2,ft=n(He,{x:Yt.x+Yt.radius*Math.sin(tr),y:Yt.y+Yt.radius*Math.cos(tr)});ft>Yt.radius*2&&(ft=Yt.radius*2),($e===null||$e.width>ft)&&($e={circle:Yt,width:ft,p1:We,p2:ze})}$e!==null&&(q.push($e),re+=r($e.circle.radius,$e.width),ze=We)}}else{var st=le[0];for(ve=1;ve<le.length;++ve)le[ve].radius<st.radius&&(st=le[ve]);var Tt=!1;for(ve=0;ve<le.length;++ve)if(n(le[ve],st)>Math.abs(st.radius-le[ve].radius)){Tt=!0;break}Tt?re=te=0:(re=st.radius*st.radius*Math.PI,q.push({circle:st,p1:{x:st.x,y:st.y+st.radius},p2:{x:st.x-p,y:st.y+st.radius},width:st.radius*2}))}return te/=2,z&&(z.area=re+te,z.arcArea=re,z.polygonArea=te,z.arcs=q,z.innerPoints=V,z.intersectionPoints=ae),re+te}function h(le,z){for(var ae=0;ae<z.length;++ae)if(n(le,z[ae])>z[ae].radius+p)return!1;return!0}function i(le){for(var z=[],ae=0;ae<le.length;++ae)for(var V=ae+1;V<le.length;++V)for(var re=f(le[ae],le[V]),te=0;te<re.length;++te){var q=re[te];q.parentIndex=[ae,V],z.push(q)}return z}function r(le,z){return le*le*Math.acos(1-z/le)-(le-z)*Math.sqrt(z*(2*le-z))}function n(le,z){return Math.sqrt((le.x-z.x)*(le.x-z.x)+(le.y-z.y)*(le.y-z.y))}function s(le,z,ae){if(ae>=le+z)return 0;if(ae<=Math.abs(le-z))return Math.PI*Math.min(le,z)*Math.min(le,z);var V=le-(ae*ae-z*z+le*le)/(2*ae),re=z-(ae*ae-le*le+z*z)/(2*ae);return r(le,V)+r(z,re)}function f(le,z){var ae=n(le,z),V=le.radius,re=z.radius;if(ae>=V+re||ae<=Math.abs(V-re))return[];var te=(V*V-re*re+ae*ae)/(2*ae),q=Math.sqrt(V*V-te*te),ve=le.x+te*(z.x-le.x)/ae,Me=le.y+te*(z.y-le.y)/ae,De=-(z.y-le.y)*(q/ae),ze=-(z.x-le.x)*(q/ae);return[{x:ve+De,y:Me-ze},{x:ve-De,y:Me+ze}]}function u(le){for(var z={x:0,y:0},ae=0;ae<le.length;++ae)z.x+=le[ae].x,z.y+=le[ae].y;return z.x/=le.length,z.y/=le.length,z}function d(le,z,ae,V){V=V||{};var re=V.maxIterations||100,te=V.tolerance||1e-10,q=le(z),ve=le(ae),Me=ae-z;if(q*ve>0)throw"Initial bisect points must have opposite signs";if(q===0)return z;if(ve===0)return ae;for(var De=0;De<re;++De){Me/=2;var ze=z+Me,We=le(ze);if(We*q>=0&&(z=ze),Math.abs(Me)<te||We===0)return ze}return z+Me}function b(le){for(var z=new Array(le),ae=0;ae<le;++ae)z[ae]=0;return z}function _(le,z){return b(le).map(function(){return b(z)})}function x(le,z){for(var ae=0,V=0;V<le.length;++V)ae+=le[V]*z[V];return ae}function M(le){return Math.sqrt(x(le,le))}function P(le,z,ae){for(var V=0;V<z.length;++V)le[V]=z[V]*ae}function C(le,z,ae,V,re){for(var te=0;te<le.length;++te)le[te]=z*ae[te]+V*re[te]}function O(le,z,ae){ae=ae||{};var V=ae.maxIterations||z.length*200,re=ae.nonZeroDelta||1.05,te=ae.zeroDelta||.001,q=ae.minErrorDelta||1e-6,ve=ae.minErrorDelta||1e-5,Me=ae.rho!==void 0?ae.rho:1,De=ae.chi!==void 0?ae.chi:2,ze=ae.psi!==void 0?ae.psi:-.5,We=ae.sigma!==void 0?ae.sigma:.5,He,$e=z.length,It=new Array($e+1);It[0]=z,It[0].fx=le(z),It[0].id=0;for(var Yt=0;Yt<$e;++Yt){var rr=z.slice();rr[Yt]=rr[Yt]?rr[Yt]*re:te,It[Yt+1]=rr,It[Yt+1].fx=le(rr),It[Yt+1].id=Yt+1}function ir(zr){for(var ct=0;ct<zr.length;ct++)It[$e][ct]=zr[ct];It[$e].fx=zr.fx}for(var Br=function(zr,ct){return zr.fx-ct.fx},tr=z.slice(),ft=z.slice(),st=z.slice(),Tt=z.slice(),Qe=0;Qe<V;++Qe){if(It.sort(Br),ae.history){var it=It.map(function(zr){var ct=zr.slice();return ct.fx=zr.fx,ct.id=zr.id,ct});it.sort(function(zr,ct){return zr.id-ct.id}),ae.history.push({x:It[0].slice(),fx:It[0].fx,simplex:it})}for(He=0,Yt=0;Yt<$e;++Yt)He=Math.max(He,Math.abs(It[0][Yt]-It[1][Yt]));if(Math.abs(It[0].fx-It[$e].fx)<q&&He<ve)break;for(Yt=0;Yt<$e;++Yt){tr[Yt]=0;for(var zt=0;zt<$e;++zt)tr[Yt]+=It[zt][Yt];tr[Yt]/=$e}var Qt=It[$e];if(C(ft,1+Me,tr,-Me,Qt),ft.fx=le(ft),ft.fx<It[0].fx)C(Tt,1+De,tr,-De,Qt),Tt.fx=le(Tt),Tt.fx<ft.fx?ir(Tt):ir(ft);else if(ft.fx>=It[$e-1].fx){var Ar=!1;if(ft.fx>Qt.fx?(C(st,1+ze,tr,-ze,Qt),st.fx=le(st),st.fx<Qt.fx?ir(st):Ar=!0):(C(st,1-ze*Me,tr,ze*Me,Qt),st.fx=le(st),st.fx<ft.fx?ir(st):Ar=!0),Ar){if(We>=1)break;for(Yt=1;Yt<It.length;++Yt)C(It[Yt],1-We,It[0],We,It[Yt]),It[Yt].fx=le(It[Yt])}}else ir(ft)}return It.sort(Br),{fx:It[0].fx,x:It[0]}}function w(le,z,ae,V,re,te,q){var ve=ae.fx,Me=x(ae.fxprime,z),De=ve,ze=ve,We=Me,He=0;re=re||1,te=te||1e-6,q=q||.1;function $e(Yt,rr,ir){for(var Br=0;Br<16;++Br)if(re=(Yt+rr)/2,C(V.x,1,ae.x,re,z),De=V.fx=le(V.x,V.fxprime),We=x(V.fxprime,z),De>ve+te*re*Me||De>=ir)rr=re;else{if(Math.abs(We)<=-q*Me)return re;We*(rr-Yt)>=0&&(rr=Yt),Yt=re,ir=De}return 0}for(var It=0;It<10;++It){if(C(V.x,1,ae.x,re,z),De=V.fx=le(V.x,V.fxprime),We=x(V.fxprime,z),De>ve+te*re*Me||It&&De>=ze)return $e(He,re,ze);if(Math.abs(We)<=-q*Me)return re;if(We>=0)return $e(re,He,De);ze=De,He=re,re*=2}return re}function S(le,z,ae){var V={x:z.slice(),fx:0,fxprime:z.slice()},re={x:z.slice(),fx:0,fxprime:z.slice()},te=z.slice(),q,ve,Me=1,De;ae=ae||{},De=ae.maxIterations||z.length*20,V.fx=le(V.x,V.fxprime),q=V.fxprime.slice(),P(q,V.fxprime,-1);for(var ze=0;ze<De;++ze){if(Me=w(le,q,V,re,Me),ae.history&&ae.history.push({x:V.x.slice(),fx:V.fx,fxprime:V.fxprime.slice(),alpha:Me}),!Me)P(q,V.fxprime,-1);else{C(te,1,re.fxprime,-1,V.fxprime);var We=x(V.fxprime,V.fxprime),He=Math.max(0,x(te,re.fxprime)/We);C(q,He,q,-1,re.fxprime),ve=V,V=re,re=ve}if(M(V.fxprime)<=1e-5)break}return ae.history&&ae.history.push({x:V.x.slice(),fx:V.fx,fxprime:V.fxprime.slice(),alpha:Me}),V}function I(le,z){z=z||{},z.maxIterations=z.maxIterations||500;var ae=z.initialLayout||Q,V=z.lossFunction||ie;le=W(le);var re=ae(le,z),te=[],q=[],ve;for(ve in re)re.hasOwnProperty(ve)&&(te.push(re[ve].x),te.push(re[ve].y),q.push(ve));for(var Me=O(function(We){for(var He={},$e=0;$e<q.length;++$e){var It=q[$e];He[It]={x:We[2*$e],y:We[2*$e+1],radius:re[It].radius}}return V(He,le)},te,z),De=Me.x,ze=0;ze<q.length;++ze)ve=q[ze],re[ve].x=De[2*ze],re[ve].y=De[2*ze+1];return re}var j=1e-10;function N(le,z,ae){return Math.min(le,z)*Math.min(le,z)*Math.PI<=ae+j?Math.abs(le-z):d(function(V){return s(le,z,V)-ae},0,le+z)}function W(le){le=le.slice();var z=[],ae={},V,re,te,q;for(V=0;V<le.length;++V){var ve=le[V];ve.sets.length==1?z.push(ve.sets[0]):ve.sets.length==2&&(te=ve.sets[0],q=ve.sets[1],ae[[te,q]]=!0,ae[[q,te]]=!0)}for(z.sort(function(Me,De){return Me>De}),V=0;V<z.length;++V)for(te=z[V],re=V+1;re<z.length;++re)q=z[re],[te,q]in ae||le.push({sets:[te,q],size:0});return le}function H(le,z,ae){var V=_(z.length,z.length),re=_(z.length,z.length);return le.filter(function(te){return te.sets.length==2}).map(function(te){var q=ae[te.sets[0]],ve=ae[te.sets[1]],Me=Math.sqrt(z[q].size/Math.PI),De=Math.sqrt(z[ve].size/Math.PI),ze=N(Me,De,te.size);V[q][ve]=V[ve][q]=ze;var We=0;te.size+1e-10>=Math.min(z[q].size,z[ve].size)?We=1:te.size<=1e-10&&(We=-1),re[q][ve]=re[ve][q]=We}),{distances:V,constraints:re}}function J(le,z,ae,V){var re=0,te;for(te=0;te<z.length;++te)z[te]=0;for(te=0;te<ae.length;++te)for(var q=le[2*te],ve=le[2*te+1],Me=te+1;Me<ae.length;++Me){var De=le[2*Me],ze=le[2*Me+1],We=ae[te][Me],He=V[te][Me],$e=(De-q)*(De-q)+(ze-ve)*(ze-ve),It=Math.sqrt($e),Yt=$e-We*We;He>0&&It<=We||He<0&&It>=We||(re+=2*Yt*Yt,z[2*te]+=4*Yt*(q-De),z[2*te+1]+=4*Yt*(ve-ze),z[2*Me]+=4*Yt*(De-q),z[2*Me+1]+=4*Yt*(ze-ve))}return re}function Q(le,z){var ae=K(le,z),V=z.lossFunction||ie;if(le.length>=8){var re=ne(le,z),te=V(re,le),q=V(ae,le);te+1e-8<q&&(ae=re)}return ae}function ne(le,z){z=z||{};var ae=z.restarts||10,V=[],re={},te;for(te=0;te<le.length;++te){var q=le[te];q.sets.length==1&&(re[q.sets[0]]=V.length,V.push(q))}var ve=H(le,V,re),Me=ve.distances,De=ve.constraints,ze=M(Me.map(M))/Me.length;Me=Me.map(function(Br){return Br.map(function(tr){return tr/ze})});var We=function(Br,tr){return J(Br,tr,Me,De)},He,$e;for(te=0;te<ae;++te){var It=b(Me.length*2).map(Math.random);$e=S(We,It,z),(!He||$e.fx<He.fx)&&(He=$e)}var Yt=He.x,rr={};for(te=0;te<V.length;++te){var ir=V[te];rr[ir.sets[0]]={x:Yt[2*te]*ze,y:Yt[2*te+1]*ze,radius:Math.sqrt(ir.size/Math.PI)}}if(z.history)for(te=0;te<z.history.length;++te)P(z.history[te].x,ze);return rr}function K(le,z){for(var ae=z&&z.lossFunction?z.lossFunction:ie,V={},re={},te,q=0;q<le.length;++q){var ve=le[q];ve.sets.length==1&&(te=ve.sets[0],V[te]={x:1e10,y:1e10,rowid:V.length,size:ve.size,radius:Math.sqrt(ve.size/Math.PI)},re[te]=[])}for(le=le.filter(function(Bt){return Bt.sets.length==2}),q=0;q<le.length;++q){var Me=le[q],De=Me.hasOwnProperty("weight")?Me.weight:1,ze=Me.sets[0],We=Me.sets[1];Me.size+j>=Math.min(V[ze].size,V[We].size)&&(De=0),re[ze].push({set:We,size:Me.size,weight:De}),re[We].push({set:ze,size:Me.size,weight:De})}var He=[];for(te in re)if(re.hasOwnProperty(te)){var $e=0;for(q=0;q<re[te].length;++q)$e+=re[te][q].size*re[te][q].weight;He.push({set:te,size:$e})}function It(Bt,Ke){return Ke.size-Bt.size}He.sort(It);var Yt={};function rr(Bt){return Bt.set in Yt}function ir(Bt,Ke){V[Ke].x=Bt.x,V[Ke].y=Bt.y,Yt[Ke]=!0}for(ir({x:0,y:0},He[0].set),q=1;q<He.length;++q){var Br=He[q].set,tr=re[Br].filter(rr);if(te=V[Br],tr.sort(It),tr.length===0)throw"ERROR: missing pairwise overlap information";for(var ft=[],st=0;st<tr.length;++st){var Tt=V[tr[st].set],Qe=N(te.radius,Tt.radius,tr[st].size);ft.push({x:Tt.x+Qe,y:Tt.y}),ft.push({x:Tt.x-Qe,y:Tt.y}),ft.push({y:Tt.y+Qe,x:Tt.x}),ft.push({y:Tt.y-Qe,x:Tt.x});for(var it=st+1;it<tr.length;++it)for(var zt=V[tr[it].set],Qt=N(te.radius,zt.radius,tr[it].size),Ar=f({x:Tt.x,y:Tt.y,radius:Qe},{x:zt.x,y:zt.y,radius:Qt}),zr=0;zr<Ar.length;++zr)ft.push(Ar[zr])}var ct=1e50,ot=ft[0];for(st=0;st<ft.length;++st){V[Br].x=ft[st].x,V[Br].y=ft[st].y;var xt=ae(V,le);xt<ct&&(ct=xt,ot=ft[st])}ir(ot,Br)}return V}function ie(le,z){var ae=0;function V(ze){return ze.map(function(We){return le[We]})}for(var re=0;re<z.length;++re){var te=z[re],q;if(te.sets.length!=1){if(te.sets.length==2){var ve=le[te.sets[0]],Me=le[te.sets[1]];q=s(ve.radius,Me.radius,n(ve,Me))}else q=c(V(te.sets));var De=te.hasOwnProperty("weight")?te.weight:1;ae+=De*(q-te.size)*(q-te.size)}}return ae}function de(le,z,ae){ae===null?le.sort(function(Yt,rr){return rr.radius-Yt.radius}):le.sort(ae);var V;if(le.length>0){var re=le[0].x,te=le[0].y;for(V=0;V<le.length;++V)le[V].x-=re,le[V].y-=te}if(le.length==2){var q=n(le[0],le[1]);q<Math.abs(le[1].radius-le[0].radius)&&(le[1].x=le[0].x+le[0].radius-le[1].radius-1e-10,le[1].y=le[0].y)}if(le.length>1){var ve=Math.atan2(le[1].x,le[1].y)-z,Me=Math.cos(ve),De=Math.sin(ve),ze,We;for(V=0;V<le.length;++V)ze=le[V].x,We=le[V].y,le[V].x=Me*ze-De*We,le[V].y=De*ze+Me*We}if(le.length>2){for(var He=Math.atan2(le[2].x,le[2].y)-z;He<0;)He+=2*Math.PI;for(;He>2*Math.PI;)He-=2*Math.PI;if(He>Math.PI){var $e=le[1].y/(1e-10+le[1].x);for(V=0;V<le.length;++V){var It=(le[V].x+$e*le[V].y)/(1+$e*$e);le[V].x=2*It-le[V].x,le[V].y=2*It*$e-le[V].y}}}}function we(le){le.map(function(De){De.parent=De});function z(De){return De.parent!==De&&(De.parent=z(De.parent)),De.parent}function ae(De,ze){var We=z(De),He=z(ze);We.parent=He}for(var V=0;V<le.length;++V)for(var re=V+1;re<le.length;++re){var te=le[V].radius+le[re].radius;n(le[V],le[re])+1e-10<te&&ae(le[re],le[V])}var q={},ve;for(V=0;V<le.length;++V)ve=z(le[V]).parent.setid,ve in q||(q[ve]=[]),q[ve].push(le[V]);le.map(function(De){delete De.parent});var Me=[];for(ve in q)q.hasOwnProperty(ve)&&Me.push(q[ve]);return Me}function Re(le){var z=function(ae){var V=Math.max.apply(null,le.map(function(te){return te[ae]+te.radius})),re=Math.min.apply(null,le.map(function(te){return te[ae]-te.radius}));return{max:V,min:re}};return{xRange:z("x"),yRange:z("y")}}function _e(le,z,ae){z===null&&(z=Math.PI/2);var V=[],re,te;for(te in le)if(le.hasOwnProperty(te)){var q=le[te];V.push({x:q.x,y:q.y,radius:q.radius,setid:te})}var ve=we(V);for(re=0;re<ve.length;++re){de(ve[re],z,ae);var Me=Re(ve[re]);ve[re].size=(Me.xRange.max-Me.xRange.min)*(Me.yRange.max-Me.yRange.min),ve[re].bounds=Me}ve.sort(function(It,Yt){return Yt.size-It.size}),V=ve[0];var De=V.bounds,ze=(De.xRange.max-De.xRange.min)/50;function We(It,Yt,rr){if(!!It){var ir=It.bounds,Br,tr,ft;Yt?Br=De.xRange.max-ir.xRange.min+ze:(Br=De.xRange.max-ir.xRange.max,ft=(ir.xRange.max-ir.xRange.min)/2-(De.xRange.max-De.xRange.min)/2,ft<0&&(Br+=ft)),rr?tr=De.yRange.max-ir.yRange.min+ze:(tr=De.yRange.max-ir.yRange.max,ft=(ir.yRange.max-ir.yRange.min)/2-(De.yRange.max-De.yRange.min)/2,ft<0&&(tr+=ft));for(var st=0;st<It.length;++st)It[st].x+=Br,It[st].y+=tr,V.push(It[st])}}for(var He=1;He<ve.length;)We(ve[He],!0,!1),We(ve[He+1],!1,!0),We(ve[He+2],!0,!0),He+=3,De=Re(V);var $e={};for(re=0;re<V.length;++re)$e[V[re].setid]=V[re];return $e}function Ue(le,z,ae,V){var re=[],te=[];for(var q in le)le.hasOwnProperty(q)&&(te.push(q),re.push(le[q]));z-=2*V,ae-=2*V;var ve=Re(re),Me=ve.xRange,De=ve.yRange;if(Me.max==Me.min||De.max==De.min)return console.log("not scaling solution: zero size detected"),le;for(var ze=z/(Me.max-Me.min),We=ae/(De.max-De.min),He=Math.min(We,ze),$e=(z-(Me.max-Me.min)*He)/2,It=(ae-(De.max-De.min)*He)/2,Yt={},rr=0;rr<re.length;++rr){var ir=re[rr];Yt[te[rr]]={radius:He*ir.radius,x:V+$e+(ir.x-Me.min)*He,y:V+It+(ir.y-De.min)*He}}return Yt}function rt(){var le=600,z=350,ae=15,V=1e3,re=Math.PI/2,te=!0,q=!0,ve=!0,Me=null,De=null,ze={},We=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],He=0,$e=function(ir){if(ir in ze)return ze[ir];var Br=ze[ir]=We[He];return He+=1,He>=We.length&&(He=0),Br},It=I,Yt=ie;function rr(ir){var Br=ir.datum(),tr={};Br.forEach(function(yt){yt.size==0&&yt.sets.length==1&&(tr[yt.sets[0]]=1)}),Br=Br.filter(function(yt){return!yt.sets.some(function(qt){return qt in tr})});var ft={},st={};if(Br.length>0){var Tt=It(Br,{lossFunction:Yt});te&&(Tt=_e(Tt,re,De)),ft=Ue(Tt,le,z,ae),st=ue(ft,Br)}var Qe={};Br.forEach(function(yt){yt.label&&(Qe[yt.sets]=yt.label)});function it(yt){if(yt.sets in Qe)return Qe[yt.sets];if(yt.sets.length==1)return""+yt.sets[0]}ir.selectAll("svg").data([ft]).enter().append("svg");var zt=ir.select("svg").attr("width",le).attr("height",z),Qt={},Ar=!1;zt.selectAll(".venn-area path").each(function(yt){var qt=g.select(this).attr("d");yt.sets.length==1&&qt&&(Ar=!0,Qt[yt.sets[0]]=pe(qt))});var zr=function(yt){return function(qt){var Er=yt.sets.map(function(Zr){var Dr=Qt[Zr],Cr=ft[Zr];return Dr||(Dr={x:le/2,y:z/2,radius:1}),Cr||(Cr={x:le/2,y:z/2,radius:1}),{x:Dr.x*(1-qt)+Cr.x*qt,y:Dr.y*(1-qt)+Cr.y*qt,radius:Dr.radius*(1-qt)+Cr.radius*qt}});return be(Er)}},ct=zt.selectAll(".venn-area").data(Br,function(yt){return yt.sets}),ot=ct.enter().append("g").attr("class",function(yt){return"venn-area venn-"+(yt.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(yt){return yt.sets.join("_")}),xt=ot.append("path"),Bt=ot.append("text").attr("class","label").text(function(yt){return it(yt)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",le/2).attr("y",z/2);ve&&(xt.style("fill-opacity","0").filter(function(yt){return yt.sets.length==1}).style("fill",function(yt){return $e(yt.sets)}).style("fill-opacity",".25"),Bt.style("fill",function(yt){return yt.sets.length==1?$e(yt.sets):"#444"}));var Ke=ir;Ar?(Ke=ir.transition("venn").duration(V),Ke.selectAll("path").attrTween("d",zr)):Ke.selectAll("path").attr("d",function(yt){return be(yt.sets.map(function(qt){return ft[qt]}))});var lt=Ke.selectAll("text").filter(function(yt){return yt.sets in st}).text(function(yt){return it(yt)}).attr("x",function(yt){return Math.floor(st[yt.sets].x)}).attr("y",function(yt){return Math.floor(st[yt.sets].y)});q&&(Ar?"on"in lt?lt.on("end",Fe(ft,it)):lt.each("end",Fe(ft,it)):lt.each(Fe(ft,it)));var mt=ct.exit().transition("venn").duration(V).remove();mt.selectAll("path").attrTween("d",zr);var qe=mt.selectAll("text").attr("x",le/2).attr("y",z/2);return Me!==null&&(Bt.style("font-size","0px"),lt.style("font-size",Me),qe.style("font-size","0px")),{circles:ft,textCentres:st,nodes:ct,enter:ot,update:Ke,exit:mt}}return rr.wrap=function(ir){return arguments.length?(q=ir,rr):q},rr.width=function(ir){return arguments.length?(le=ir,rr):le},rr.height=function(ir){return arguments.length?(z=ir,rr):z},rr.padding=function(ir){return arguments.length?(ae=ir,rr):ae},rr.colours=function(ir){return arguments.length?($e=ir,rr):$e},rr.fontSize=function(ir){return arguments.length?(Me=ir,rr):Me},rr.duration=function(ir){return arguments.length?(V=ir,rr):V},rr.layoutFunction=function(ir){return arguments.length?(It=ir,rr):It},rr.normalize=function(ir){return arguments.length?(te=ir,rr):te},rr.styled=function(ir){return arguments.length?(ve=ir,rr):ve},rr.orientation=function(ir){return arguments.length?(re=ir,rr):re},rr.orientationOrder=function(ir){return arguments.length?(De=ir,rr):De},rr.lossFunction=function(ir){return arguments.length?(Yt=ir,rr):Yt},rr}function Fe(le,z){return function(){for(var ae=g.select(this),V=ae.datum(),re=le[V.sets[0]].radius||50,te=z(V)||"",q=te.split(/\s+/).reverse(),ve=3,Me=(te.length+q.length)/ve,De=q.pop(),ze=[De],We,He=0,$e=1.1,It=ae.text(null).append("tspan").text(De);De=q.pop(),!!De;)ze.push(De),We=ze.join(" "),It.text(We),We.length>Me&&It.node().getComputedTextLength()>re&&(ze.pop(),It.text(ze.join(" ")),ze=[De],It=ae.append("tspan").text(De),He++);var Yt=.35-He*$e/2,rr=ae.attr("x"),ir=ae.attr("y");ae.selectAll("tspan").attr("x",rr).attr("y",ir).attr("dy",function(Br,tr){return Yt+tr*$e+"em"})}}function Se(le,z,ae){var V=z[0].radius-n(z[0],le),re,te;for(re=1;re<z.length;++re)te=z[re].radius-n(z[re],le),te<=V&&(V=te);for(re=0;re<ae.length;++re)te=n(ae[re],le)-ae[re].radius,te<=V&&(V=te);return V}function ye(le,z){var ae=[],V;for(V=0;V<le.length;++V){var re=le[V];ae.push({x:re.x,y:re.y}),ae.push({x:re.x+re.radius/2,y:re.y}),ae.push({x:re.x-re.radius/2,y:re.y}),ae.push({x:re.x,y:re.y+re.radius/2}),ae.push({x:re.x,y:re.y-re.radius/2})}var te=ae[0],q=Se(ae[0],le,z);for(V=1;V<ae.length;++V){var ve=Se(ae[V],le,z);ve>=q&&(te=ae[V],q=ve)}var Me=O(function(He){return-1*Se({x:He[0],y:He[1]},le,z)},[te.x,te.y],{maxIterations:500,minErrorDelta:1e-10}).x,De={x:Me[0],y:Me[1]},ze=!0;for(V=0;V<le.length;++V)if(n(De,le[V])>le[V].radius){ze=!1;break}for(V=0;V<z.length;++V)if(n(De,z[V])<z[V].radius){ze=!1;break}if(!ze)if(le.length==1)De={x:le[0].x,y:le[0].y};else{var We={};c(le,We),We.arcs.length===0?De={x:0,y:-1e3,disjoint:!0}:We.arcs.length==1?De={x:We.arcs[0].circle.x,y:We.arcs[0].circle.y}:z.length?De=ye(le,[]):De=u(We.arcs.map(function(He){return He.p1}))}return De}function Oe(le){var z={},ae=[];for(var V in le)ae.push(V),z[V]=[];for(var re=0;re<ae.length;re++)for(var te=le[ae[re]],q=re+1;q<ae.length;++q){var ve=le[ae[q]],Me=n(te,ve);Me+ve.radius<=te.radius+1e-10?z[ae[q]].push(ae[re]):Me+te.radius<=ve.radius+1e-10&&z[ae[re]].push(ae[q])}return z}function ue(le,z){for(var ae={},V=Oe(le),re=0;re<z.length;++re){for(var te=z[re].sets,q={},ve={},Me=0;Me<te.length;++Me){q[te[Me]]=!0;for(var De=V[te[Me]],ze=0;ze<De.length;++ze)ve[De[ze]]=!0}var We=[],He=[];for(var $e in le)$e in q?We.push(le[$e]):$e in ve||He.push(le[$e]);var It=ye(We,He);ae[te]=It,It.disjoint&&z[re].size>0&&console.log("WARNING: area "+te+" not represented on screen")}return ae}function xe(le,z){for(var ae=Oe(le.selectAll("svg").datum()),V={},re=0;re<z.sets.length;++re){var te=z.sets[re];for(var q in ae)for(var ve=ae[q],Me=0;Me<ve.length;++Me)if(ve[Me]==te){V[q]=!0;break}}function De(ze){for(var We=0;We<ze.length;++We)if(!(ze[We]in V))return!1;return!0}le.selectAll("g").sort(function(ze,We){return ze.sets.length!=We.sets.length?ze.sets.length-We.sets.length:ze==z?De(We.sets)?-1:1:We==z?De(ze.sets)?1:-1:We.size-ze.size})}function Ae(le,z,ae){var V=[];return V.push(`
M`,le,z),V.push(`
m`,-ae,0),V.push(`
a`,ae,ae,0,1,0,ae*2,0),V.push(`
a`,ae,ae,0,1,0,-ae*2,0),V.join(" ")}function pe(le){var z=le.split(" ");return{x:parseFloat(z[1]),y:parseFloat(z[2]),radius:-parseFloat(z[4])}}function be(le){var z={};c(le,z);var ae=z.arcs;if(ae.length===0)return"M 0 0";if(ae.length==1){var V=ae[0].circle;return Ae(V.x,V.y,V.radius)}else{for(var re=[`
M`,ae[0].p2.x,ae[0].p2.y],te=0;te<ae.length;++te){var q=ae[te],ve=q.circle.radius,Me=q.width>ve;re.push(`
A`,ve,ve,0,Me?1:0,1,q.p1.x,q.p1.y)}return re.join(" ")}}e.intersectionArea=c,e.circleCircleIntersection=f,e.circleOverlap=s,e.circleArea=r,e.distance=n,e.venn=I,e.greedyLayout=K,e.scaleSolution=Ue,e.normalizeSolution=_e,e.bestInitialLayout=Q,e.lossFunction=ie,e.disjointCluster=we,e.distanceFromIntersectArea=N,e.VennDiagram=rt,e.wrapText=Fe,e.computeTextCentres=ue,e.computeTextCentre=ye,e.sortAreas=xe,e.circlePath=Ae,e.circleFromPath=pe,e.intersectionAreaPath=be,Object.defineProperty(e,"__esModule",{value:!0})})},function(B,L,o){"use strict";var e=function(){};e=function(g,v,p){var c=arguments.length;p=new Array(c>2?c-2:0);for(var h=2;h<c;h++)p[h-2]=arguments[h];if(v===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(v.length<10||/^[s\W]*$/.test(v))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+v);if(!g){var i=0,r="Warning: "+v.replace(/%s/g,function(){return p[i++]});typeof console!="undefined"&&console.error(r);try{throw new Error(r)}catch(n){}}},B.exports=e},function(B,L,o){o(77),B.exports=o(77)}])})},yU0y:function(br,Ot,Ee){"use strict";Ee.d(Ot,"b",function(){return he}),Ee.d(Ot,"a",function(){return B}),Ee.d(Ot,"c",function(){return L});var he=1e-6,B=typeof Float32Array!="undefined"?Float32Array:Array,L=Math.random;function o(p){B=p}var e=Math.PI/180;function g(p){return p*e}function v(p,c){return Math.abs(p-c)<=he*Math.max(1,Math.abs(p),Math.abs(c))}Math.hypot||(Math.hypot=function(){for(var p=0,c=arguments.length;c--;)p+=arguments[c]*arguments[c];return Math.sqrt(p)})},yUZ2:function(br,Ot,Ee){"use strict";var he=Ee("t3DW").forEach;br.exports=function(B){B=B||{};var L=B.reporter,o=B.batchProcessor,e=B.stateHandler.getState,g=B.stateHandler.hasState,v=B.idHandler;if(!o)throw new Error("Missing required dependency: batchProcessor");if(!L)throw new Error("Missing required dependency: reporter.");var p=n(),c="erd_scroll_detection_scrollbar_style",h="erd_scroll_detection_container";function i(C){s(C,c,h)}i(window.document);function r(C){var O=B.important?" !important; ":"; ";return(C.join(O)+O).trim()}function n(){var C=500,O=500,w=document.createElement("div");w.style.cssText=r(["position: absolute","width: "+C*2+"px","height: "+O*2+"px","visibility: hidden","margin: 0","padding: 0"]);var S=document.createElement("div");S.style.cssText=r(["position: absolute","width: "+C+"px","height: "+O+"px","overflow: scroll","visibility: none","top: "+-C*3+"px","left: "+-O*3+"px","visibility: hidden","margin: 0","padding: 0"]),S.appendChild(w),document.body.insertBefore(S,document.body.firstChild);var I=C-S.clientWidth,j=O-S.clientHeight;return document.body.removeChild(S),{width:I,height:j}}function s(C,O,w){function S(W,H){H=H||function(Q){C.head.appendChild(Q)};var J=C.createElement("style");return J.innerHTML=W,J.id=O,H(J),J}if(!C.getElementById(O)){var I=w+"_animation",j=w+"_animation_active",N=`/* Created by the element-resize-detector library. */
`;N+="."+w+" > div::-webkit-scrollbar { "+r(["display: none"])+` }

`,N+="."+j+" { "+r(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+I,"animation-name: "+I])+` }
`,N+="@-webkit-keyframes "+I+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,N+="@keyframes "+I+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",S(N)}}function f(C){C.className+=" "+h+"_animation_active"}function u(C,O,w){if(C.addEventListener)C.addEventListener(O,w);else if(C.attachEvent)C.attachEvent("on"+O,w);else return L.error("[scroll] Don't know how to add event listeners.")}function d(C,O,w){if(C.removeEventListener)C.removeEventListener(O,w);else if(C.detachEvent)C.detachEvent("on"+O,w);else return L.error("[scroll] Don't know how to remove event listeners.")}function b(C){return e(C).container.childNodes[0].childNodes[0].childNodes[0]}function _(C){return e(C).container.childNodes[0].childNodes[0].childNodes[1]}function x(C,O){var w=e(C).listeners;if(!w.push)throw new Error("Cannot add listener to an element that is not detectable.");e(C).listeners.push(O)}function M(C,O,w){w||(w=O,O=C,C=null),C=C||{};function S(){if(C.debug){var xe=Array.prototype.slice.call(arguments);if(xe.unshift(v.get(O),"Scroll: "),L.log.apply)L.log.apply(null,xe);else for(var Ae=0;Ae<xe.length;Ae++)L.log(xe[Ae])}}function I(xe){function Ae(pe){var be=pe.getRootNode&&pe.getRootNode().contains(pe);return pe===pe.ownerDocument.body||pe.ownerDocument.body.contains(pe)||be}return!Ae(xe)||window.getComputedStyle(xe)===null}function j(xe){var Ae=e(xe).container.childNodes[0],pe=window.getComputedStyle(Ae);return!pe.width||pe.width.indexOf("px")===-1}function N(){var xe=window.getComputedStyle(O),Ae={};return Ae.position=xe.position,Ae.width=O.offsetWidth,Ae.height=O.offsetHeight,Ae.top=xe.top,Ae.right=xe.right,Ae.bottom=xe.bottom,Ae.left=xe.left,Ae.widthCSS=xe.width,Ae.heightCSS=xe.height,Ae}function W(){var xe=N();e(O).startSize={width:xe.width,height:xe.height},S("Element start size",e(O).startSize)}function H(){e(O).listeners=[]}function J(){if(S("storeStyle invoked."),!e(O)){S("Aborting because element has been uninstalled");return}var xe=N();e(O).style=xe}function Q(xe,Ae,pe){e(xe).lastWidth=Ae,e(xe).lastHeight=pe}function ne(xe){return b(xe).childNodes[0]}function K(){return 2*p.width+1}function ie(){return 2*p.height+1}function de(xe){return xe+10+K()}function we(xe){return xe+10+ie()}function Re(xe){return xe*2+K()}function _e(xe){return xe*2+ie()}function Ue(xe,Ae,pe){var be=b(xe),le=_(xe),z=de(Ae),ae=we(pe),V=Re(Ae),re=_e(pe);be.scrollLeft=z,be.scrollTop=ae,le.scrollLeft=V,le.scrollTop=re}function rt(){var xe=e(O).container;if(!xe){xe=document.createElement("div"),xe.className=h,xe.style.cssText=r(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),e(O).container=xe,f(xe),O.appendChild(xe);var Ae=function(){e(O).onRendered&&e(O).onRendered()};u(xe,"animationstart",Ae),e(O).onAnimationStart=Ae}return xe}function Fe(){function xe(){var Yt=e(O).style;if(Yt.position==="static"){O.style.setProperty("position","relative",C.important?"important":"");var rr=function(Br,tr,ft,st){function Tt(it){return it.replace(/[^-\d\.]/g,"")}var Qe=ft[st];Qe!=="auto"&&Tt(Qe)!=="0"&&(Br.warn("An element that is positioned static has style."+st+"="+Qe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+st+" will be set to 0. Element: ",tr),tr.style[st]=0)};rr(L,O,Yt,"top"),rr(L,O,Yt,"right"),rr(L,O,Yt,"bottom"),rr(L,O,Yt,"left")}}function Ae(Yt,rr,ir,Br){return Yt=Yt?Yt+"px":"0",rr=rr?rr+"px":"0",ir=ir?ir+"px":"0",Br=Br?Br+"px":"0",["left: "+Yt,"top: "+rr,"right: "+Br,"bottom: "+ir]}if(S("Injecting elements"),!e(O)){S("Aborting because element has been uninstalled");return}xe();var pe=e(O).container;pe||(pe=rt());var be=p.width,le=p.height,z=r(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ae=r(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Ae(-(1+be),-(1+le),-le,-be))),V=r(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),re=r(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),te=r(["position: absolute","left: 0","top: 0"]),q=r(["position: absolute","width: 200%","height: 200%"]),ve=document.createElement("div"),Me=document.createElement("div"),De=document.createElement("div"),ze=document.createElement("div"),We=document.createElement("div"),He=document.createElement("div");ve.dir="ltr",ve.style.cssText=z,ve.className=h,Me.className=h,Me.style.cssText=ae,De.style.cssText=V,ze.style.cssText=te,We.style.cssText=re,He.style.cssText=q,De.appendChild(ze),We.appendChild(He),Me.appendChild(De),Me.appendChild(We),ve.appendChild(Me),pe.appendChild(ve);function $e(){var Yt=e(O);Yt&&Yt.onExpand?Yt.onExpand():S("Aborting expand scroll handler: element has been uninstalled")}function It(){var Yt=e(O);Yt&&Yt.onShrink?Yt.onShrink():S("Aborting shrink scroll handler: element has been uninstalled")}u(De,"scroll",$e),u(We,"scroll",It),e(O).onExpandScroll=$e,e(O).onShrinkScroll=It}function Se(){function xe(V,re,te){var q=ne(V),ve=de(re),Me=we(te);q.style.setProperty("width",ve+"px",C.important?"important":""),q.style.setProperty("height",Me+"px",C.important?"important":"")}function Ae(V){var re=O.offsetWidth,te=O.offsetHeight,q=re!==e(O).lastWidth||te!==e(O).lastHeight;S("Storing current size",re,te),Q(O,re,te),o.add(0,function(){if(!!q){if(!e(O)){S("Aborting because element has been uninstalled");return}if(!pe()){S("Aborting because element container has not been initialized");return}if(C.debug){var Me=O.offsetWidth,De=O.offsetHeight;(Me!==re||De!==te)&&L.warn(v.get(O),"Scroll: Size changed before updating detector elements.")}xe(O,re,te)}}),o.add(1,function(){if(!e(O)){S("Aborting because element has been uninstalled");return}if(!pe()){S("Aborting because element container has not been initialized");return}Ue(O,re,te)}),q&&V&&o.add(2,function(){if(!e(O)){S("Aborting because element has been uninstalled");return}if(!pe()){S("Aborting because element container has not been initialized");return}V()})}function pe(){return!!e(O).container}function be(){function V(){return e(O).lastNotifiedWidth===void 0}S("notifyListenersIfNeeded invoked");var re=e(O);if(V()&&re.lastWidth===re.startSize.width&&re.lastHeight===re.startSize.height)return S("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(re.lastWidth===re.lastNotifiedWidth&&re.lastHeight===re.lastNotifiedHeight)return S("Not notifying: Size already notified");S("Current size not notified, notifying..."),re.lastNotifiedWidth=re.lastWidth,re.lastNotifiedHeight=re.lastHeight,he(e(O).listeners,function(te){te(O)})}function le(){if(S("startanimation triggered."),j(O)){S("Ignoring since element is still unrendered...");return}S("Element rendered.");var V=b(O),re=_(O);(V.scrollLeft===0||V.scrollTop===0||re.scrollLeft===0||re.scrollTop===0)&&(S("Scrollbars out of sync. Updating detector elements..."),Ae(be))}function z(){if(S("Scroll detected."),j(O)){S("Scroll event fired while unrendered. Ignoring...");return}Ae(be)}if(S("registerListenersAndPositionElements invoked."),!e(O)){S("Aborting because element has been uninstalled");return}e(O).onRendered=le,e(O).onExpand=z,e(O).onShrink=z;var ae=e(O).style;xe(O,ae.width,ae.height)}function ye(){if(S("finalizeDomMutation invoked."),!e(O)){S("Aborting because element has been uninstalled");return}var xe=e(O).style;Q(O,xe.width,xe.height),Ue(O,xe.width,xe.height)}function Oe(){w(O)}function ue(){S("Installing..."),H(),W(),o.add(0,J),o.add(1,Fe),o.add(2,Se),o.add(3,ye),o.add(4,Oe)}S("Making detectable..."),I(O)?(S("Element is detached"),rt(),S("Waiting until element is attached..."),e(O).onRendered=function(){S("Element is now attached"),ue()}):ue()}function P(C){var O=e(C);!O||(O.onExpandScroll&&d(b(C),"scroll",O.onExpandScroll),O.onShrinkScroll&&d(_(C),"scroll",O.onShrinkScroll),O.onAnimationStart&&d(O.container,"animationstart",O.onAnimationStart),O.container&&C.removeChild(O.container))}return{makeDetectable:M,addListener:x,uninstall:P,initDocument:i}}},ycre:function(br,Ot,Ee){var he=Ee("711d"),B=he("length");br.exports=B},zEVN:function(br,Ot,Ee){var he=Ee("Gi0A"),B=Ee("sEf8"),L=Ee("mdPL"),o=L&&L.isMap,e=o?B(o):he;br.exports=e},zZ0H:function(br,Ot){function Ee(he){return he}br.exports=Ee},zvhG:function(br,Ot,Ee){"use strict";br.exports=he;function he(B,L,o,e){this.cx=3*B,this.bx=3*(o-B)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*L,this.by=3*(e-L)-this.cy,this.ay=1-this.cy-this.by,this.p1x=B,this.p1y=L,this.p2x=o,this.p2y=e}he.prototype={sampleCurveX:function(L){return((this.ax*L+this.bx)*L+this.cx)*L},sampleCurveY:function(L){return((this.ay*L+this.by)*L+this.cy)*L},sampleCurveDerivativeX:function(L){return(3*this.ax*L+2*this.bx)*L+this.cx},solveCurveX:function(L,o){if(o===void 0&&(o=1e-6),L<0)return 0;if(L>1)return 1;for(var e=L,g=0;g<8;g++){var v=this.sampleCurveX(e)-L;if(Math.abs(v)<o)return e;var p=this.sampleCurveDerivativeX(e);if(Math.abs(p)<1e-6)break;e=e-v/p}var c=0,h=1;for(e=L,g=0;g<20&&(v=this.sampleCurveX(e),!(Math.abs(v-L)<o));g++)L>v?c=e:h=e,e=(h-c)*.5+c;return e},solve:function(L,o){return this.sampleCurveY(this.solveCurveX(L,o))}}}}]);
